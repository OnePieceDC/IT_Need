
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="These are my study notes.">
      
      
        <meta name="author" content="DC">
      
      
      <link rel="icon" href="../../resources/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.3">
    
    
      
        <title>网络层 - IT必备知识</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../resources/css/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="IT必备知识" class="md-header__button md-logo" aria-label="IT必备知识" data-md-component="logo">
      
  <img src="../../resources/images/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IT必备知识
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              网络层
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/" class="md-tabs__link md-tabs__link--active">
        计算机基础(8)
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="md-tabs__link">
        linux基础(20)
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/0_install_db/" class="md-tabs__link">
        mysql(19)
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/" class="md-tabs__link">
        git(2)
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/" class="md-tabs__link">
        查找排序算法(5)
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IT必备知识" class="md-nav__button md-logo" aria-label="IT必备知识" data-md-component="logo">
      
  <img src="../../resources/images/favicon.ico" alt="logo">

    </a>
    IT必备知识
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          计算机基础(8)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="计算机基础(8)" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          计算机基础(8)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/" class="md-nav__link">
        前奏(介绍)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/" class="md-nav__link">
        计算机硬件组成
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        操作系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%A7%88/" class="md-nav__link">
        计算机网络概览
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/" class="md-nav__link">
        网络接口层
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          网络层
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        网络层
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    引言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    IP协议
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip_1" class="md-nav__link">
    IP地址
  </a>
  
    <nav class="md-nav" aria-label="IP地址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip_2" class="md-nav__link">
    IP地址的组成
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip_3" class="md-nav__link">
    IP地址的分类
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    私有地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nat" class="md-nav__link">
    NAT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    子网掩码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    网络地址
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    子网划分(了解)
  </a>
  
    <nav class="md-nav" aria-label="子网划分(了解)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    未划分子网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    划分子网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    练习
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vlan" class="md-nav__link">
    VLAN(了解)
  </a>
  
    <nav class="md-nav" aria-label="VLAN(了解)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    二层隔离与三层隔离
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vlan_1" class="md-nav__link">
    vlan简介
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arp" class="md-nav__link">
    ARP协议
  </a>
  
    <nav class="md-nav" aria-label="ARP协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip_4" class="md-nav__link">
    IP数据包的走向
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arp_1" class="md-nav__link">
    ARP的广播包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    网络层整个流程
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/" class="md-nav__link">
        传输层
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/" class="md-nav__link">
        补充
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          linux基础(20)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="linux基础(20)" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          linux基础(20)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="md-nav__link">
        准备工作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        初识shell与基础常用命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        文件管理之基础命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        文件管理之四大模式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/" class="md-nav__link">
        文件管理之命令补充
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        文件管理之文件系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/" class="md-nav__link">
        权限管理之用户与组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/" class="md-nav__link">
        权限管理之文件权限
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/8_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8BACL/" class="md-nav__link">
        权限管理之ACL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/" class="md-nav__link">
        权限管理之su与sudo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/" class="md-nav__link">
        软件包管理之rpm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/" class="md-nav__link">
        软件包管理之yum
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        查看进程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        管理进程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/" class="md-nav__link">
        存储管理之传统磁盘管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/" class="md-nav__link">
        存储管理之LVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/" class="md-nav__link">
        网络管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        shell基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/" class="md-nav__link">
        crond计划任务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/" class="md-nav__link">
        系统优化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          mysql(19)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mysql(19)" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          mysql(19)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="基础" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/0_install_db/" class="md-nav__link">
        数据库安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/1_db_command/" class="md-nav__link">
        sql命令总结
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/" class="md-nav__link">
        imp_knowledge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/3_table_field/" class="md-nav__link">
        字段的约束和类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/" class="md-nav__link">
        表关系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/" class="md-nav__link">
        权限管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/" class="md-nav__link">
        单表查询
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/" class="md-nav__link">
        多表查询
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/8_query_practice/" class="md-nav__link">
        query_practice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/9_pymysql/" class="md-nav__link">
        pymysql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/" class="md-nav__link">
        just_know
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/" class="md-nav__link">
        other1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/0_%E5%9F%BA%E7%A1%80/other/05/" class="md-nav__link">
        other2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          进阶
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="进阶" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          进阶
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/1_%E8%BF%9B%E9%98%B6/0_index/" class="md-nav__link">
        索引
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/1_%E8%BF%9B%E9%98%B6/1_explain/" class="md-nav__link">
        执行计划
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/" class="md-nav__link">
        事务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/1_%E8%BF%9B%E9%98%B6/3_db_readPhenomenon/" class="md-nav__link">
        读现象
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/1_%E8%BF%9B%E9%98%B6/4_lock/" class="md-nav__link">
        锁
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5_db/1_%E8%BF%9B%E9%98%B6/other/" class="md-nav__link">
        数据库连接池
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          git(2)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="git(2)" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          git(2)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/" class="md-nav__link">
        git生活版
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9_git/1_git%E7%A0%94%E7%A9%B6%E7%89%88/" class="md-nav__link">
        git研究版
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          查找排序算法(5)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="查找排序算法(5)" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          查找排序算法(5)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/" class="md-nav__link">
        查找
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/" class="md-nav__link">
        LowB三人组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/" class="md-nav__link">
        NB三人组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        其它排序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/4_%E6%9F%A5%E6%89%BE%E4%B9%A0%E9%A2%98/" class="md-nav__link">
        查找习题
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    引言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    IP协议
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ip_1" class="md-nav__link">
    IP地址
  </a>
  
    <nav class="md-nav" aria-label="IP地址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip_2" class="md-nav__link">
    IP地址的组成
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip_3" class="md-nav__link">
    IP地址的分类
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    私有地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nat" class="md-nav__link">
    NAT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    子网掩码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    网络地址
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    子网划分(了解)
  </a>
  
    <nav class="md-nav" aria-label="子网划分(了解)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    未划分子网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    划分子网
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    练习
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vlan" class="md-nav__link">
    VLAN(了解)
  </a>
  
    <nav class="md-nav" aria-label="VLAN(了解)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    二层隔离与三层隔离
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vlan_1" class="md-nav__link">
    vlan简介
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arp" class="md-nav__link">
    ARP协议
  </a>
  
    <nav class="md-nav" aria-label="ARP协议">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip_4" class="md-nav__link">
    IP数据包的走向
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arp_1" class="md-nav__link">
    ARP的广播包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    网络层整个流程
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>网络层</h1>

<h2 id="_1">引言<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p><font color='brown'><strong>IP地址+mac地址可以标识全世界范围内唯一一台计算机.</strong></font><br />
IP地址找到对方主机处于哪个局域网,mac地址找到对方主机处于该网络的哪里..</p>
<p><strong>因为有ARP协议的存在, ARP会将ip地址转换成mac地址</strong><br />
(要么是局域网内一台计算机的mac地址,要么是网关的mac地址,不能也不会是在公网中的设备的mac地址)</p>
<p><strong>网络层(IP协议)本身没有传输包的功能,包的实际传输是委托给数据链路层(以太网中的交换机)来实现的!!</strong></p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>[补充:n进制转十进制]
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>123（n为10,8,16） --&gt; 1*n<span class="nb">^</span>2 + 2*n<span class="nb">^</span>1 + 3*n<span class="nb">^</span>0  &#39;1的后面有2位数,2的后面有1位数,3后面有0位数&#39;
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>101 (n为2) --&gt; 1*2<span class="nb">^</span>2 + 0*2<span class="nb">^</span>1 + 1*2<span class="nb">^</span>0 = 5
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>Ps: 十进制转二进展 -- 除2取余法
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>求二进制数 01111111 转成十进制, 有个小窍门！ 
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>01111111先加1,因为二进制逢二进一,原二进制数变成了10000000即2<span class="nb">^</span>7=128 所以01111111 = 2<span class="nb">^</span>7-1 = 127
</code></pre></div>
<p><strong>敲黑板!</strong> 先简单了解一些网络层的专业名词... <br />
<font color='blue'>Q: 解释下 IP地址、网段、局域网、子网、子网掩码、默认网关、ARP</font></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>参考链接: https://blog.csdn.net/qq<span class="nb">_</span>43450715/article/details/120031497
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>用自己的话笼统解释:
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>1&gt; IP地址 由网络号+主机号组成.
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>2&gt; 若某一网段内主机数量太多,广播域太大就会影响传播效率.所以会对IP划分子网.
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>   eg: 192.168.1.0/27这个c类网络,网络号向主机号借了27-24=3位,即可产生2<span class="nb">^</span>3-2个子网;
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>       每个子网都是一个网段(每个子网的网络号是不一样的)
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>3&gt; 未划分子网时候,可以大胆的说这里网段/子网/局域网一个意思.因为只有一个网络.
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>   划分子网后,准确点说: 一个网络 = 一个(大)网段 = 多个子网/多个(小)网段/多个局域网,
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>   但通常为了省事,混着叫.没有做这么准确的区分..
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>4&gt; IP地址与子网掩码进行与运算得到子网地址,⽤来确定⽬标主机的IP是否与源主机在同⼀个⽹络/网段内.
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>5&gt; ARP协议可以将IP地址转换成MAC地址
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>6&gt; 每个主机会设置默认网关表明路由器的位置.
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>注意哦!属于同一网段/局域网的主机可以直接进行通信,不同网段的主机要通过路由器(网关)才能通信.
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>也就是说局域网一般指二层设备(数据链路层的交换机)可达的网络
</code></pre></div>
<hr />
<h2 id="ip">IP协议<a class="headerlink" href="#ip" title="Permanent link">&para;</a></h2>
<blockquote>
<p>IP协议是规定网络地址的协议,定义的地址称为IP地址. </p>
</blockquote>
<p>IP协议的组成就不展开来具体阐述了.. 只需要知道IP协议里面有32位的源IP地址和32位的目的IP地址就行!!</p>
<p>1&gt; 依照IP协议在网络里传输的数据,称为 <strong>'IP数据报/数据包'</strong><br />
2&gt; IP数据报 = head + data <br />
&nbsp;&nbsp;&nbsp;&nbsp; head里面放有&lt;源IP地址&gt;和&lt;目标IP地址&gt;<br />
提一嘴: <font color='brown'>IP地址的通信 在公网里 -- 采用的是 路由协议.. (不做过多阐述,知道就行)</font></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>从网络层下来的数据到数据链路层封装成帧: 
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>帧首部 源mac地址 目的mac地址  源IP地址   目的IP地址 IP数据报数据 帧尾部
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>Ps: 帧数据 = IP数据报 = IP报头 + IP数据报数据 = 源IP地址 + 目的IP地址 + IP数据报数据
</code></pre></div>
<hr />
<h2 id="ip_1">IP地址<a class="headerlink" href="#ip_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>先说在前面, IP地址有两大作用:<br />
&nbsp;&nbsp;&nbsp;&nbsp; 1&gt; arp协议会把ip地址解析成mac地址;<br />
&nbsp;&nbsp;&nbsp;&nbsp; 2&gt; 标识子网/局域网地址</p>
</blockquote>
<h3 id="ip_2"><font color='orange'>IP地址的组成</font><a class="headerlink" href="#ip_2" title="Permanent link">&para;</a></h3>
<blockquote>
<p>IPV4版本的IP地址占4个字节,由32位二进制数组成,通常用点分十进制数表示.每8位为一组..</p>
</blockquote>
<p><strong>IP地址 = 网络号Network + 主机号Host</strong><br />
<font color='gray'>Ps: 网络号标识这台计算机在哪个局域网内;主机号标识该计算机是属于局域网的哪台机器..</font></p>
<p><strong>IP地址的范围</strong><br />
00000000.00000000.00000000.00000000 ==&gt; 0.0.0.0 <br />
11111111.11111111.11111111.11111111 ==&gt; 255.255.255.255 <br />
<font color='gray'>例如: 10101100.00010000.00001010.000000100 ==&gt; 172.16.10.4</font></p>
<h3 id="ip_3"><font color='orange'>IP地址的分类</font><a class="headerlink" href="#ip_3" title="Permanent link">&para;</a></h3>
<blockquote>
<p>2^32个IP地址将网络号和主机号固定下来后,分为了5类</p>
</blockquote>
<p><img alt="" src="../assets/IP%E5%88%86%E7%B1%BB.png" /> </p>
<p><font color='blue'>拿到一个IP地址,只需要看IP地址的第一组十进制数, 就能判断IP地址是属于哪一类的!!</font> <br />
约定前1、2、3个8位组分别为A、B、C类IP地址的网络号!(也就约定了子网掩码)  D类组播地址;E类研究地址.<br />
这5类IP地址都以固定的二进制数开头,分别是 0、10、110、1110、11110.</p>
<table>
<thead>
<tr>
<th>网络类别</th>
<th>最大可指派的网络数</th>
<th>第一个网络号</th>
<th>最后一个网络号</th>
<th>每个网络的主机数</th>
</tr>
</thead>
<tbody>
<tr>
<td>A    0</td>
<td>2^7 - 2 = 126</td>
<td>1</td>
<td>126</td>
<td>2^24-2 = 16777214</td>
</tr>
<tr>
<td>B    10</td>
<td>2^14 - 1 = 16383</td>
<td>128.1</td>
<td>191.255</td>
<td>2^16-2 = 65534</td>
</tr>
<tr>
<td>C    110</td>
<td>2^21 - 1 = 2097151</td>
<td>192.0.1</td>
<td>223.255.255</td>
<td>2^8-2 = 254</td>
</tr>
</tbody>
</table>
<p><strong>解析:</strong>  IP地址分类后,路由器仅根据目的主机所在的子网进行转发(不考虑主机号),这样可以减少路由表所占的存储空间以及查找路由表的时间！！！</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 1&gt; <strong>A至C类网络支持的网络数(局域网个数)依次增多,每个局域网所含的主机数依次减少.</strong><br />
&nbsp;&nbsp;&nbsp;&nbsp; 2&gt; A类 <strong>127</strong> .0.0.0和<strong>0</strong> .0.0.0 这两个网络地址不能使用; <br />
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; B类  <strong>128.0</strong>.0.0 这个网络地址不能使用;<br />
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; C类  <strong>192.0.0</strong>.0 这个的网络地址不能使用;<br />
&nbsp;&nbsp;&nbsp;&nbsp; 3&gt; 每个局域网/网段都需要减去网络地址和广播地址这两个IP地址..它两不能作为主机的IP.. <br />
&nbsp;&nbsp;&nbsp;&nbsp; 4&gt; A至C类网络中还包含的有只能在局域网内使用的私有地址...</p>
<p><font color='brown'><strong>[一些特殊的ip地址]</strong></font></p>
<p>1&gt; 网络地址: 网络号保留,主机号全为0&nbsp;&nbsp;&nbsp;&nbsp; 用于标识网络的 <br />
2&gt; 广播地址: 网络号保留,主机号全为1 -- 会在该网段/子网进行广播 <br />
3&gt; 全网广播地址(IPV4最大的地址): 255.255.255.255 <br />
&nbsp;&nbsp;&nbsp;&nbsp; 会在整个网络(该网络划分的所有子网)里进行广播; 各路由器均不转发 <br />
4&gt; 0.0.0.0(IPV4最小的地址): 指已经不是真正意义上的ip地址,不知道本机IP时,可以用它！<br />
5&gt; 回环地址: 数字127用于给系统做诊断用..<br />
&nbsp;&nbsp;&nbsp;&nbsp; 127.0.0.1 -- 用于本地软件环回测试    数据包到网卡了,没有往交换机走,原路返回,自己发给自己<br />
&nbsp;&nbsp;&nbsp;&nbsp; <font color='gray'>对于每一台linux主机,都有本地回环网卡,此网卡上配置的IP地址就是127.0.0.1</font> <br />
&nbsp;&nbsp;&nbsp;&nbsp; <font color='gray'>相当于一台计算机即当客户端也当服务端,用于保证软件本身的开发没问题,<strong>排除网络的因素</strong></font> <br />
6&gt; <font color='brown'>私有地址(内网地址)</font>:只能在局域网内使用!!!!! 公网上是没有这些IP地址的..</p>
<h3 id="_2"><font color='orange'>私有地址</font><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<blockquote>
<p>IP地址 = 公网地址 + 私有地址</p>
</blockquote>
<table>
<thead>
<tr>
<th>私有地址类别</th>
<th>所有的私有IP地址 (闭区间)</th>
<th>私有网络地址 （闭区间）</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>10.(0<sub>255).(0</sub>255).(0~255)</td>
<td>10.0.0.0/8</td>
<td>--- --- ---</td>
</tr>
<tr>
<td>B</td>
<td>172.(16<sub>31).(0</sub>255).(0~255)</td>
<td>172.(16～31).0.0/12</td>
<td>商用服务器集群化作业</td>
</tr>
<tr>
<td>C</td>
<td>192.168.(0<sub>255).(0</sub>255)</td>
<td>192.168.(0~255).0/16</td>
<td>办公室</td>
</tr>
</tbody>
</table>
<p>Ps: 可以算嘛,172.(16～31).0.0/12  网络号位12位, 第二个8位组前4位最大为'1111',转成10进制为31<br />
&nbsp;&nbsp;&nbsp;&nbsp;  B类私有地址 -- 2^4 = 16个连续的B类网络; C类私有地址 -- 2^8 = 256个连续的C类网络..</p>
<h3 id="nat"><font color='orange'>NAT</font><a class="headerlink" href="#nat" title="Permanent link">&para;</a></h3>
<blockquote>
<p>网关都具备NAPT功能,能够只通过一个公网IP地址就能让N台主机与外界通信.<br />
NAPT,它相对于传统的NAT,多了端口号用于找到私有网络里的目的主机..</p>
</blockquote>
<p>花钱办宽带实际上是要了一个在公网里的地址, 光猫 = 交换机 + 路由器..</p>
<table>
<thead>
<tr>
<th>方向</th>
<th>旧的IP地址和端口号</th>
<th>新的IP地址和端口号</th>
</tr>
</thead>
<tbody>
<tr>
<td>出</td>
<td>192.168.0.3:30000</td>
<td>172.38.1.5:40001 (公网)</td>
</tr>
<tr>
<td>出</td>
<td>192.168.0.4:30000</td>
<td>172.38.1.5:40002 (公网)</td>
</tr>
<tr>
<td>入</td>
<td>172.38.1.5:40001 (公网)</td>
<td>192.168.0.3:30000</td>
</tr>
<tr>
<td>入</td>
<td>172.38.1.5:40002 (公网)</td>
<td>192.168.0.4:30000</td>
</tr>
</tbody>
</table>
<p>私有地址不同端口号相同, 表明私网内不同主机上的同一软件发起的通信,到了网关这,进行NAPT转换,使用的是同一个公网IP,但分配的是不同的端口号.. 仔细想想,这是为了一一对应..</p>
<p>具体来说,假设家里的两台电脑,计算机A和计算机B私有地址分别是192.168.0.3和192.168.0.4, 计算机A和计算机B上的QQ软件都要发送一个聊天信息出去, 数据包到了网关这,需要进行转换: 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.3:30000  转换成 172.38.1.5:40001 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.4:30000  转换成 172.38.1.5:40002 <br />
接着,计算机A和B上的QQ软件需要接受聊天信息, 响应的数据包根据路由器的映射表进行IP和端口的转换:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 172.38.1.5:40001 转换成 192.168.0.3:30000 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 172.38.1.5:40002 转换成 192.168.0.4:30000</p>
<p><font color='blue'>可以这样理解, 40001、40002分别代表了计算机A和计算机B,30000代表的是计算机上的QQ软件...</font></p>
<hr />
<h2 id="_3">子网掩码<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<blockquote>
<p>如何确定IP地址哪些部分是网络号呢？就要用到子网掩码！！</p>
</blockquote>
<p>子网掩码(netmask): 用来标识一个ip地址的网络号个数 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 从左到右连续的1,连续的0. 只要属于网络号,子网掩码就标记为1; <br />
可以简写 -- eg <font color='brown'>172.16.10.2/<strong>24</strong></font>  (24代表IP地址的前24位是网络号)</p>
<p><strong>单独的IP地址没有意义,要与子网掩码一起工作</strong>: IP地址 + 子网掩码 --&gt; 标识某个局域网的位置<br />
<font color='gray'>Ps: 即子网掩码告诉了我们IP地址的网络号..或者是通过子网掩码我们能知道网络地址(IP所处的局域网)..</font><br />
 &nbsp;&nbsp;&nbsp;&nbsp; <font color='gray'>通常为了方便只会说IP地址,自己要明白还有子网掩码!</font></p>
<hr />
<h2 id="_4">网络地址<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<blockquote>
<p>二进制的IP地址与二进制的子网掩码做按位与运算得到网络地址/子网地址 -- 同1为1,否则为0</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>例1&gt; 求IP地址172.16.10.4/24的子网地址
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>     10101100.00010000.00001010.00000100 ==&gt; 172.16.10.4
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>     11111111.11111111.11111111.00000000 ==&gt; 255.255.255.0
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>     10101100.00010000.00001010.00000000 ==&gt; 172.16.10.0
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>例2&gt; 求IP地址172.16.10.5/24的子网地址
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>     10101100.00010000.00001010.00000101 ==&gt; 172.16.10.5
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>     11111111.11111111.11111111.00000000 ==&gt; 255.255.255.0
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>     10101100.00010000.00001010.00000000 ==&gt; 172.16.10.0
</code></pre></div>
<p>子网地址相同,代表处于同一个LAN(局域网)中,<br />
So, 172.16.10.4/24 与 172.16.10.5/24 是处于同一个网段/局域网.它两通信靠mac地址就行.</p>
<hr />
<h2 id="_5">子网划分(了解)<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<blockquote>
<p>借主机位给网络位使用,也就是子网掩码连续1的个数会增多..<br />
通常会在内网中用私有地址进行子网划分...</p>
</blockquote>
<h3 id="_6"><font color='orange'>未划分子网</font><a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>172.16.10.2/16这个IP所处的网络是一个B类网络.(因为此IP是B类且子网掩码是16位,所以此网络未划分子网)
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>1&gt; 在此网络里所有主机的:
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>     子网掩码 -- 255.255.0.0
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>     网络号 -- 172.16. 
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>     网络地址 -- 172.16.0.0 (网络号+主机号全0)
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>     广播地址 -- 172.16.255.255 (网络号+主机号全1)
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>2&gt; 此网络可用主机IP -- &lt;172.16.0.1 ～ 172.16.255.254&gt; 共2^(8+8)-2=65534个可用主机.
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>     即主机地址,可分配给网络中终端设备的地址,介于网络地址与广播地址之间
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>3&gt; 172.16.10.2/24 这个IP的主机号 --  10.2
</code></pre></div>
<h3 id="_7"><font color='orange'>划分子网</font><a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<blockquote>
<p>划分成多个子网后, 每个子网分配一个独立的广播域, 能节约地址、缓解内网广播负担.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>172.16.0.0/16 将这个B类网络地址切割成一个个小的网段/局域网.如何进行子网划分呢？
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>172.16.0.0/17 向主机号借一位 借的这一位称为子网位(可为 0 亦可为 1)
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>1&gt; 若子网位为0:
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>  子网地址/网络地址: 172.16.0.0/17
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>  子网掩码: 255.255.128.0
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>  广播地址(剩下15个主机位全为1): 172.16.127.255
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>  主机: 172.16.0.1~172.16.127.254  共128*254个
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>1&gt; 若子网位为1:
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>  子网地址/网络地址: 172.16.128.0/17
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>  子网掩码: 255.255.128.0
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>  广播地址(剩下15个主机位全为1): 172.16.255.255
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>  主机: 172.16.128.1~172.16.255.254 共(255-128+1)*254个
</code></pre></div>
<p><font color='red'><strong>两个公式</strong></font><br />
1&gt;  <code>2^m = 向主机位借位后产生的子网个数</code>  (m为所借位数)<br />
&nbsp;&nbsp;&nbsp;&nbsp;  Ps: 通常至少会借两位,因为划分子网后,处于头和尾的子网拿来用是没问题的,但大家约定不会用.. <br />
2&gt;  <code>2^n – 2 = 向主机位借位后产生的每个子网中可用主机IP数</code> <br />
&nbsp;&nbsp;&nbsp;&nbsp;  (n为原主机位的个数减去被借位的个数后的剩余位数) 减2是因为每个子网中的网络地址和广播地址不能用</p>
<h3 id="_8"><font color='orange'>练习</font><a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>★问: 192.168.1.64/27能否分配给PC使用？</p>
<p>首先可以看出是将192.168.1.0/24 这个C类网络做了一个子网划分,借了3位,变成了192.168.1.0/27, 产生了2^3 = 8个子网,同时每个子网有2^5-2=30个可用IP.</p>
<p>192.168.1. 000 _ <em> _ </em> _ &nbsp;&nbsp;&nbsp;&nbsp; 网络地址:  192.168.1.0 / 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 广播地址：192.168.1.31<br />
192.168.1. 001 _ <em> _ </em> _ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.32 / 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 63<br />
192.168.1. 010 _ <em> _ </em> _ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.64 / 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 95<br />
192.168.1. 011 _ <em> _ </em> _ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.96 / 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 127<br />
192.168.1. 100 _ <em> _ </em> _ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.128 / 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;  159<br />
… … …</p>
<p>以上这个方法太笨！！有聪明一点的办法.<br />
这样思考 借了3位,那么8个子网,每个子网都有32个主机IP(不管那两个是否看可用),也就是说每个子网块的大小为32个. 所以 往后加32, 就是每个子网的网络地址; 知道了相邻子网的网络地址, 再看看广播地址的概念, 广播地址使用的是该网络范围内最大地址, 所以看下一个相邻子网的网络地址再减一就行啦！</p>
<hr />
<h2 id="vlan">VLAN(了解)<a class="headerlink" href="#vlan" title="Permanent link">&para;</a></h2>
<h3 id="_9"><font color='orange'>二层隔离与三层隔离</font><a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>隔离是指属于不同的局域网<br />
二层隔离: 两台计算机接入不同的交换机<br />
三层隔离: 子网地址不同  </p>
<p>假设一个教室ABCD四台计算机都接入同一个交换机.<br />
1&gt; 那么这个教室的四台计算机在二层是连通的,但不能说这四台计算机都处于同一个局域网;<br />
2&gt; 若进行了子网划分,那么处于不同子网的计算机实现了三层隔离;<br />
&nbsp;&nbsp;&nbsp;&nbsp; arp计算的时候可不会管这些计算机是否连在同一个交换机,它只管相互通信的计算机网络地址是否相同. <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A: 192.168.1.1/25    B: 192.168.1.2/25  -- 子网位为0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C: 192.168.1.129/25  D: 192.168.1.130/25  -- 子网位为1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color='gray'>数据包的走向: 计算机A - 教室交换机 - 教室路由器 - 教室交换机 - 计算机D </font><br />
3&gt; 二层连通,三层是隔离的. 这种设计很不合理!! 因为二层连通,交换机进行广播时(交换机会在两种情况下广播),不同子网的计算机因为连在同一个交换机上都能收到!!!  一般情况下,二三层应该同时隔离!<br />
4&gt; 怎么实现二三层同时隔离呢？<strong>现在的交换机都支持划分多个vlan(虚拟局域网)</strong>.. ,AB划分到一个vlan里,CD划分到另外一个vlan里,这样的话,第一个vlan的广播不能蔓延到第二个vlan里面!!!  </p>
<p><font color='gray'>192.168.1.0 这个网络地址进行子网划分,根据真实需求划分出多个子网,每个子网都支持多台主机.. 再结合交换机的vlan.. 实现二三层同时隔离.</font></p>
<p><strong>综上:</strong><br />
&nbsp;&nbsp;&nbsp;&nbsp; 二层连通,三层是可以隔离的,即两台计算机接入同一个交换机,不一定在同一个局域网内... 不合理;
&nbsp;&nbsp;&nbsp;&nbsp; 二层隔离应该与三层隔离保持一致;</p>
<h3 id="vlan_1"><font color='orange'>vlan简介</font><a class="headerlink" href="#vlan_1" title="Permanent link">&para;</a></h3>
<blockquote>
<p>参考链接: <code>https://www.cnblogs.com/linhaifeng/p/6710751.html</code></p>
</blockquote>
<p>1&gt; 带vlan的交换机的端口分为两类: (结合这两个端口可以实现跨交换机划分vlan)<br />
&nbsp;&nbsp;&nbsp;&nbsp; Access port -- 主要用于连接电脑 这些端口会被打上VLAN Tag(交换机才能知道计算机属于哪一个vlan)<br />
&nbsp;&nbsp;&nbsp;&nbsp; Trunk por -- 主要将交换机与交换机进行一个串连..<br />
2&gt; vlan的不足之一: <br />
&nbsp;&nbsp;&nbsp;&nbsp; 它最多只支持 4096 个 VLAN 网络(还要除去几个预留的), 对于大型数据中心的来说,这个数量是远远不够.</p>
<p>交换机做集群提升性能,防止单点故障.站在物理层面是两台交换机,站在逻辑层面是一台超级交换机.<br />
<strong>在物理层面,一台服务器需要有两根线分别连接到这两个交换机同一个端口(eg 10号端口).. </strong><br />
增加性能,防止单点故障(有时间解决问题)  所以在<strong>逻辑层面端口数是没有增加的</strong>!!!</p>
<hr />
<h2 id="arp">ARP协议<a class="headerlink" href="#arp" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>[承上启下]</strong><br />
计算机A如何确定与计算机B是否在一个局域网内? 算IP所处的子网/网络地址.<br />
1&gt; 若在一个局域网内,如何通信？<br />
&nbsp;&nbsp;&nbsp;&nbsp; 通过数据链路层的学习,我们知道该用以太网协议,基于mac地址通过数据链路层的二层交换机进行广播
2&gt; 若跨局域网,如何通信？<br />
 &nbsp;&nbsp;&nbsp;&nbsp; 提一嘴,这涉及到公网的路由协议啦.(不过多深究). 但局域网到公网的过程还是需要了解的..</p>
<p><font color='brown'><strong>剧透</strong>: 不管是否在一个局域网内,交换机都需要事先将ARP协议的广播包进行广播!!! </font><br />
<font color='brown'><strong>细节</strong>: 数据链路层的&lt;数据帧&gt;里的目的mac地址是通过ARP协议的广播包广播后得到的!!!</font></p>
</blockquote>
<h3 id="ip_4"><font color='orange'>IP数据包的走向</font><a class="headerlink" href="#ip_4" title="Permanent link">&para;</a></h3>
<p>1&gt; 通信第一步先拿到目标主机的IP地址<br />
2&gt; 判断出目标主机与自己(源主机)是否在同一个子网里. <br />
&nbsp;&nbsp;&nbsp;&nbsp; ○ 若在同一个子网里,数据包的走向:<br />
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 源主机 ---&gt; 本地交换机 ---&gt; 目标主机<br />
&nbsp;&nbsp;&nbsp;&nbsp; ○ 若不在,数据包的走向:<br />
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 源主机 ---&gt; 本地交换机 ---&gt; <strong>本地路由器</strong> ---&gt; <strong>公网</strong>(运营商的一系列的网络设备) ---&gt; /<br />
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 目标路由器 ---&gt; 目标交换机 ---&gt;  目标主机<br />
&nbsp;&nbsp;&nbsp;&nbsp; <font color='gray'>Ps: 本地路由器算不算局域网里的设备?算!因为它连到了交换机上.</font></p>
<h3 id="arp_1"><font color='orange'>ARP的广播包</font><a class="headerlink" href="#arp_1" title="Permanent link">&para;</a></h3>
<p><font color='gray'>源主机A  IP        --     172.16.10.10/24 </font><br />
<font color='gray'>目标主机B  IP    --     172.16.10.11/24  </font><br />
<font color='gray'>目标主机C  IP    --     101.200.10.22/24  </font>   </p>
<p><font color='blue'><strong>要晓得</strong>: 每台计算机都有自己的MAC地址、会提前设置自己的IP地址、子网掩码和默认网关的IP地址.. </font><br />
<font color='brown'>注意哦!每台电脑里都有个ARP缓存表(IP地址与mac地址的映射关系表),一开始的时候这个表是空的,通过大家不断广播 arp 请求,最终所有电脑里面的arp 缓存表都会更新完整...</font>    </p>
<p>step1: 拿到目标主机的IP与子网掩码 <br />
step2: arp协议会算出本机和目标主机的网络地址/子网地址.<br />
step3: 判断源的子网地址与目标的子网地址是否一样.<br />
<font color='gray'>先要明确,这里发的广播包不是真正通信的数据,而是通过ARP协议得到目标主机或网关的MAC地址. </font>   </p>
<p>1&gt; <strong>A与B</strong> 处于同一个局域网, 那么 <strong>通信就是在同一个子网内通信,靠的是mac地址定位到对方在哪里.</strong><br />
&nbsp;&nbsp;&nbsp;&nbsp; A如何得到B的mac地址呢？<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; △ A发送ARP协议的广播包.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; △ 交换机拿到这个广播包,看到目标MAC是<code>FF:FF:FF:FF:FF:FF</code>,会将此广播包进行广播 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; △ 此局域网的主机会拆开广播包看目标IP是不是自己,是的话就会带上自己的mac地址回包..<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 这样A就能得到B的mac地址..  主机A的ARP缓存表也得到了更新..<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; A再重新封装发起真正的通信..<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color='green'>真正的通信数据: mac(A)  <strong>mac(B)</strong>  IP(A)   IP(B)   数据部分</font><br />
2&gt; <strong>A与C</strong> 是跨局域网传输, 那么 <strong>通信不在同一个子网内通信,靠路由器把数据包转发出去</strong> <br />
&nbsp;&nbsp;&nbsp;&nbsp; A下一步需要得到所处局域网的默认网关的mac地址!(A是知道/设置了默认网关的IP地址的)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; △ A同样会发送ARP协议的广播包.交换机拿到这个广播包同样也会进行广播. <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; △ 但只有路由器会响应,于是乎A拿到了局域网里网关/路由器的mac地址.. <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color='green'>真正的通信数据: mac(A)  <strong>mac(网关)</strong>  IP(A)  IP(C)   数据部分</font></p>
<p>数据包通过路由器到了公网,在公网中需要根据路由表<font color='brown'> <strong>hop-by-hop!!</strong></font></p>
<p><strong>广播包的格式如下</strong>:</p>
<table>
<thead>
<tr>
<th></th>
<th>源MAC</th>
<th>目标MAC</th>
<th>源IP</th>
<th>目标IP</th>
<th align="left">数据部分</th>
</tr>
</thead>
<tbody>
<tr>
<td>源主机A</td>
<td>mac A</td>
<td>FF:FF:FF:FF:FF:FF</td>
<td>172.16.10.10/24</td>
<td>B主机的IP   or   网关的IP</td>
<td align="left">数据</td>
</tr>
</tbody>
</table>
<p><font color='gray'>Ps: FF-FF-FF-FF-FF-FF 是用于广播的mac地址  广播包的目标IP是谁,就在跟谁要mac地址</font></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>交换机只有在两种情况才把包进行广播,拆包时发现:
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>1&gt; 目标mac是: FF:FF:FF:FF:FF:FF
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>2&gt; 目标mac不存在于mac地址表中
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>为啥说IP地址不可或缺:
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>1&gt; ARP协议需要. 以太网协议里的目的mac地址起初是不知道的,需要事先通过ARP协议得到.
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>2&gt; 处于网络层的路由器作为一台每个端口都拥有独立的MAC地址的设备,可以把数据包做一次转发.
</code></pre></div>
<hr />
<h2 id="_10">网络层整个流程<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p><img alt="" src="../assets/%E7%BD%91%E7%BB%9C.png" /> </p>
<p>A给F发送一个数据包!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>网络拓扑图中,路由器1与路由器2进行了连接..路由器1的路由表如下:
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Ps:路由表是根据很多路由算法/基于ip地址的路由协议得来的,不是我们研究的范围..
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    |     目的地址      |    下一跳      | 端口 |
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    | :--------------: | :-----------: | :--: |
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    |  192.168.0.0/24  |               |  0   |
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    |  192.168.1.0/24  |               |  1   |
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    |  192.168.2.0/24  | 192.168.100.5 |      |
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    | 192.168.100.0/24 |               |  2   |
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>若路由器转发的数据包里目的IP地址是192.168.1.0/24这个子网里的,则通过1号端口进行转发.
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>若匹配到的是下一跳,则需要再次匹配路由表,找到其端口..
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>1&gt; 首先根据A与F各自的IP和子网掩码与运算得到网络地址分别为 192.168.0.0, 192.168.2.0 
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>   得知AF处于不同的局域网. 于是乎A会先将数据包发给默认网关/路由器1(192.168.0.254)  
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>   再细化这一过程,主机A里是设置的有默认网关的IP地址的.
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>      ○ 主机A会通过交换机1对arp广播包进行广播..
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>      ○ 主机A拿到交换机1连接到路由器1上的那个端口的mac地址(ABAB).. 并更新主机A的arp缓存表
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>      ○ 主机A将源MAC地址(AAAA)与网关MAC地址(ABAB)封装在数据链路层头部;
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>        将源IP地址(192.168.0.1)和目的IP地址(192.168.2.2)封装在网络层头部,然后发包..
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>        广播包的格式:  AAAA FF:FF:FF:FF:FF:FF IP(A) IP(默认网关) 数据
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>        数据包的格式:  MAC(主机A) MAC(默认网关) IP(A) IP(F) 数据部分
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>       注意:数据包里的源IP和目的IP在整个过程是不会变的!!!
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>2&gt; 交换机1拿到数据包后,拆包发现目的MAC地址是ABAB,查询MAC地址表,从对应的交换机端口将数据包转发给了路由器1.
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>3&gt; 数据包到了路由器1这,拆包发现目的mac就是自己的,收下了数据包
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>   路由器继续拆包发现目标IP地址是192.168.2.2,此IP处于192.168.2.0/24这个子网/局域网下,
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>   路由器1查询自己的路由表,发现下一跳的地址是192.168.100.5,此IP处于192.168.100.0/24网段,
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>   再次匹配自己的路由表,匹配到的端口为2.. arp广播后得到192.168.100.5的mac地址为D2D2 重新封装数据包.
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>        数据包的格式: D1D1 D2D2 IP(A) IP(F) 数据部分
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>4&gt; 数据包到了路由器2这,拆包发现目的mac就是自己的,收下了数据包
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>   路由器2继续拆包,看到其目的地址是192.168.2.2,路由器2查询自己的路由表,匹配到端口号为1.
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>   路由器2查询自己的ARP缓存表,查询到192.168.2.2对应的mac是FFFF(若ARP缓存表中没有则依旧需要arp广播).
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>   将mac地址封装在数据链路层头部,并从1号端口把数据包发出去
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>        数据包的格式: EFEF FFFF IP(A) IP(F) 数据部分
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>5&gt; 交换机3收到了数据包,发现目的MAC地址为FFFF,查询自己的MAC地址表,将数据包从对应的交换机6号端口发了出去.
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>6&gt; 数据包到了F这里,F拆包发现目的mac地址就是自己,于是收下了这个包.
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>可以发现发送的真正数据,数据包的源IP和目标IP是不变的！！！
</code></pre></div>
<p><font color='red'><strong>网络层(IP协议)本身没有传输包的功能,包的实际传输是委托给数据链路层(以太网中的交换机)来实现的!!</strong></font></p>
<p><img alt="" src="../assets/%E7%BD%91%E7%BB%9C%E5%B1%82.gif" /></p>
<p><font color='gray'>注意哦: 源mac和目的mac每次都会更换.. mac地址表、交换机广播、路由表、ARP广播</font></p>
<p><strong>站在不同的视角观察,得到些许规则:</strong> </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">[</span><span class="n">电脑视角</span><span class="p">]</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    <span class="n">首先我要知道我的</span> <span class="n">IP</span> <span class="n">以及对方的</span> <span class="n">IP</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="n">通过子网掩码判断我们是否在同一个子网</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">在同一个子网就通过</span> <span class="n">arp</span> <span class="n">获取对方</span> <span class="n">mac址直接扔出去</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">不在同一个子网就通过</span> <span class="n">arp</span> <span class="n">获取默认网关的</span> <span class="n">mac</span> <span class="n">地址直接扔出去</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">[</span><span class="n">交换机视角</span><span class="p">]</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">我收到的数据包必须有目标</span> <span class="n">MAC</span> <span class="n">地址</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="n">通过</span> <span class="n">MAC</span> <span class="n">地址表查映射关系</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    <span class="n">查到了就按照映射关系从我的指定端口发出去</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="n">查不到就所有端口都发出去</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="p">[</span><span class="n">路由器视角</span><span class="p">]</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="n">我收到的数据包必须有目标</span> <span class="n">IP</span> <span class="n">地址</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>    <span class="n">通过路由表查映射关系</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>    <span class="n">查到了就按照映射关系从我的指定端口发出去</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>    <span class="n">查不到则返回一个路由不可达的数据包</span>
</code></pre></div>
<hr />





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 网络接口层" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              网络接口层
            </div>
          </div>
        </a>
      
      
        
        <a href="../6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/" class="md-footer__link md-footer__link--next" aria-label="下一页: 传输层" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              传输层
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2023 from Dc_OnePiece
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.expand", "navigation.instant", "navigation.tracking", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.37e9125f.min.js"></script>
      
        <script src="../../resources/js/extra.js"></script>
      
    
  </body>
</html>