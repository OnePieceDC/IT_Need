
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="These are my study notes.">
      
      
        <meta name="author" content="DC">
      
      
      <link rel="icon" href="../../../resources/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.3">
    
    
      
        <title>索引 - IT必备知识</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../resources/css/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-3" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="IT必备知识" class="md-header__button md-logo" aria-label="IT必备知识" data-md-component="logo">
      
  <img src="../../../resources/images/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IT必备知识
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              索引
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/" class="md-tabs__link">
        计算机基础(8)
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="md-tabs__link">
        linux基础(20)
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/0_install_db/" class="md-tabs__link md-tabs__link--active">
        mysql(19)
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/" class="md-tabs__link">
        git(2)
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/" class="md-tabs__link">
        查找排序算法(5)
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="IT必备知识" class="md-nav__button md-logo" aria-label="IT必备知识" data-md-component="logo">
      
  <img src="../../../resources/images/favicon.ico" alt="logo">

    </a>
    IT必备知识
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          计算机基础(8)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="计算机基础(8)" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          计算机基础(8)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/" class="md-nav__link">
        前奏(介绍)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/" class="md-nav__link">
        计算机硬件组成
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        操作系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/3_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%A7%88/" class="md-nav__link">
        计算机网络概览
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/" class="md-nav__link">
        网络接口层
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/" class="md-nav__link">
        网络层
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/" class="md-nav__link">
        传输层
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/" class="md-nav__link">
        补充
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          linux基础(20)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="linux基础(20)" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          linux基础(20)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" class="md-nav__link">
        准备工作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        初识shell与基础常用命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        文件管理之基础命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/" class="md-nav__link">
        文件管理之四大模式
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/" class="md-nav__link">
        文件管理之命令补充
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        文件管理之文件系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/" class="md-nav__link">
        权限管理之用户与组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/" class="md-nav__link">
        权限管理之文件权限
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/8_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8BACL/" class="md-nav__link">
        权限管理之ACL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/" class="md-nav__link">
        权限管理之su与sudo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/" class="md-nav__link">
        软件包管理之rpm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/" class="md-nav__link">
        软件包管理之yum
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        查看进程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/" class="md-nav__link">
        管理进程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/" class="md-nav__link">
        存储管理之传统磁盘管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/" class="md-nav__link">
        存储管理之LVM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/" class="md-nav__link">
        网络管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        shell基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/" class="md-nav__link">
        crond计划任务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/" class="md-nav__link">
        系统优化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          mysql(19)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mysql(19)" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          mysql(19)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="基础" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/0_install_db/" class="md-nav__link">
        数据库安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/1_db_command/" class="md-nav__link">
        sql命令总结
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/" class="md-nav__link">
        imp_knowledge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/3_table_field/" class="md-nav__link">
        字段的约束和类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/4_table_relation/" class="md-nav__link">
        表关系
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/5_permissions/" class="md-nav__link">
        权限管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/6_single_query/" class="md-nav__link">
        单表查询
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/7_multi_query/" class="md-nav__link">
        多表查询
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/8_query_practice/" class="md-nav__link">
        query_practice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/9_pymysql/" class="md-nav__link">
        pymysql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/10_just_know/" class="md-nav__link">
        just_know
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/other/01_to_11/" class="md-nav__link">
        other1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../0_%E5%9F%BA%E7%A1%80/other/05/" class="md-nav__link">
        other2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          进阶
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="进阶" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          进阶
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          索引
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        索引
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-3" class="md-nav__link">
    第1-3问题的解答如下:
  </a>
  
    <nav class="md-nav" aria-label="第1-3问题的解答如下:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    一. 什么是索引?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    二. 为何要用索引?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    三. 如何正确的看待索引呢?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    四. 储备知识
  </a>
  
    <nav class="md-nav" aria-label="四. 储备知识">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1&gt; 索引的根本原理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-io" class="md-nav__link">
    2&gt; 一次磁盘IO的影响
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3&gt; 磁盘预读
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    五. 索引的分类
  </a>
  
    <nav class="md-nav" aria-label="五. 索引的分类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b" class="md-nav__link">
    B+树！！！*****
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hash" class="md-nav__link">
    Hash *** 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-text" class="md-nav__link">
    FULL-TEXT:全文索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    六. 创建索引的两个步骤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b_1" class="md-nav__link">
    七. B+树?
  </a>
  
    <nav class="md-nav" aria-label="七. B+树?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    二叉查找树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avl" class="md-nav__link">
    平衡二叉树（AVL树）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b_2" class="md-nav__link">
    B树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b_3" class="md-nav__link">
    B+树
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-9" class="md-nav__link">
    第4-9问题的解答如下:
  </a>
  
    <nav class="md-nav" aria-label="第4-9问题的解答如下:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b_4" class="md-nav__link">
    八. B+树索引的分类
  </a>
  
    <nav class="md-nav" aria-label="八. B+树索引的分类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    聚集索引(聚簇索引｜主键索引)：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    非聚集索引(非聚簇索引｜辅助索引｜二级索引)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    九. 覆盖了索引、回表操作
  </a>
  
    <nav class="md-nav" aria-label="九. 覆盖了索引、回表操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    覆盖了索引: 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    回表操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    十. 索引管理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    十一. 索引实验
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    十二. 正确使用索引
  </a>
  
    <nav class="md-nav" aria-label="十二. 正确使用索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    构建基础
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    全表查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    等值查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    范围查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    字段运算
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    其它
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    十三. 索引下推技术
  </a>
  
    <nav class="md-nav" aria-label="十三. 索引下推技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#and" class="md-nav__link">
    连续多个and
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    连续多个or
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    十四. 联合索引与最左前缀匹配原则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    补充: 未命中索引
  </a>
  
    <nav class="md-nav" aria-label="补充: 未命中索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    类型不一致
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    使用不等于
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or_1" class="md-nav__link">
    or
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    排序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#like" class="md-nav__link">
    like 模糊匹配
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    使用函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    最左前缀原则
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_explain/" class="md-nav__link">
        执行计划
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_transaction/" class="md-nav__link">
        事务
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3_db_readPhenomenon/" class="md-nav__link">
        读现象
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4_lock/" class="md-nav__link">
        锁
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../other/" class="md-nav__link">
        数据库连接池
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          git(2)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="git(2)" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          git(2)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/" class="md-nav__link">
        git生活版
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../9_git/1_git%E7%A0%94%E7%A9%B6%E7%89%88/" class="md-nav__link">
        git研究版
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          查找排序算法(5)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="查找排序算法(5)" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          查找排序算法(5)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/" class="md-nav__link">
        查找
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/" class="md-nav__link">
        LowB三人组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/" class="md-nav__link">
        NB三人组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/" class="md-nav__link">
        其它排序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/4_%E6%9F%A5%E6%89%BE%E4%B9%A0%E9%A2%98/" class="md-nav__link">
        查找习题
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-3" class="md-nav__link">
    第1-3问题的解答如下:
  </a>
  
    <nav class="md-nav" aria-label="第1-3问题的解答如下:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    一. 什么是索引?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    二. 为何要用索引?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    三. 如何正确的看待索引呢?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    四. 储备知识
  </a>
  
    <nav class="md-nav" aria-label="四. 储备知识">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1&gt; 索引的根本原理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-io" class="md-nav__link">
    2&gt; 一次磁盘IO的影响
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3&gt; 磁盘预读
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    五. 索引的分类
  </a>
  
    <nav class="md-nav" aria-label="五. 索引的分类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b" class="md-nav__link">
    B+树！！！*****
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hash" class="md-nav__link">
    Hash *** 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-text" class="md-nav__link">
    FULL-TEXT:全文索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    六. 创建索引的两个步骤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b_1" class="md-nav__link">
    七. B+树?
  </a>
  
    <nav class="md-nav" aria-label="七. B+树?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    二叉查找树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avl" class="md-nav__link">
    平衡二叉树（AVL树）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b_2" class="md-nav__link">
    B树
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b_3" class="md-nav__link">
    B+树
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-9" class="md-nav__link">
    第4-9问题的解答如下:
  </a>
  
    <nav class="md-nav" aria-label="第4-9问题的解答如下:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#b_4" class="md-nav__link">
    八. B+树索引的分类
  </a>
  
    <nav class="md-nav" aria-label="八. B+树索引的分类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    聚集索引(聚簇索引｜主键索引)：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    非聚集索引(非聚簇索引｜辅助索引｜二级索引)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    九. 覆盖了索引、回表操作
  </a>
  
    <nav class="md-nav" aria-label="九. 覆盖了索引、回表操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    覆盖了索引: 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    回表操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    十. 索引管理
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    十一. 索引实验
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    十二. 正确使用索引
  </a>
  
    <nav class="md-nav" aria-label="十二. 正确使用索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    构建基础
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    全表查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    等值查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    范围查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    字段运算
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    其它
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    十三. 索引下推技术
  </a>
  
    <nav class="md-nav" aria-label="十三. 索引下推技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#and" class="md-nav__link">
    连续多个and
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    连续多个or
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    十四. 联合索引与最左前缀匹配原则
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    补充: 未命中索引
  </a>
  
    <nav class="md-nav" aria-label="补充: 未命中索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    类型不一致
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    使用不等于
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or_1" class="md-nav__link">
    or
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    排序
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#like" class="md-nav__link">
    like 模糊匹配
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    使用函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    最左前缀原则
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>索引</h1>

<blockquote>
<p>要搞明白的几个问题：</p>
<ol>
<li>为何索引叫key.</li>
</ol>
<p>primary key、unique、foreign key...</p>
<ol>
<li>索引是如何加速查询的,它的原理是啥？</li>
</ol>
<p>索引模型/结构 从二叉树--平衡二叉树--b树--b+数 每种树到底有什么问题最终演变成了b+树</p>
<ol>
<li>
<p>为何b+数不仅能够加速等值查询还能加速范围查询(等同于多次等值查询)</p>
</li>
<li>
<p>什么是聚集(聚簇)索引？什么是辅助(非聚集｜非聚簇｜二级)索引?</p>
</li>
<li>
<p>什么情况下叫覆盖了索引.</p>
</li>
<li>
<p>什么情况下叫回表操作.</p>
</li>
<li>
<p>什么是联合索引 最左前缀匹配原则.</p>
</li>
<li>
<p>什么是索引下推,查询优化.</p>
</li>
<li>
<p>如何正确使用索引？</p>
</li>
</ol>
</blockquote>
<hr />
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>1.什么是索引？ 
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>mysql的数据组织方式,B+树组织结构.. innodb不支持hash
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>2.为什么用索引？
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>加速查询 会降低写入速度 建完后硬盘空间会变大
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>3.如何做到加速的呢？(B+树是怎样的一种数据结构？)
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>回答思路:
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>B+树是由 二叉树、平衡二叉树、B树一路演变而来的
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>不管以什么树构建索引,都分为两步 若以id字段构建索引 key-id value-本行记录;比较key值大小 构建树形结构
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>若树型结构是二叉树 二叉树的两个特点？二叉树致命的缺点,可能是一根棍,右斜棍,树高度高-IO次数就高.
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>平衡二叉树可以解决这一致命缺点 AVL树的特点？AVL树的缺点.. 每个节点|页|磁盘块放的只有一行内容.. 若有百万行数据,哪怕是最理想的AVL树 2<span class="nb">^</span>0 2<span class="nb">^</span>1 ... 2<span class="nb">^</span>20 百万级别的数据,IO次数也得20次 一次磁盘IO的影响？
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>B树 每个节点放多个key-value. 打个比方,两组值的key的18,31.就有三个指针,一个指向比18小的,一个指向18到31中间的,一个指向比31大的. 在等量数据下,B树的高度是远远小于AVL树的. B树前几次IO不必要的value数据..
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>B+树四大特点:
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>  非叶子节点只放key值,叶子节点放key-value (相较于B树 非叶子节点固定16k的大小 可放的key值更多..指针也更多 树变矮变胖)
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>  叶子节点彼此之间有双向链表的指向(范围查询变快 why?相当于多次等值查询 从根节点一路找到某一叶子节点后... B树得每次回头从根节点开始找)说不明白就举例子 where id &gt; 3, 先找到id=4所在的叶子节点...
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>  叶子里面的key值是单向链表,叶子节点之间是双向链表 全都排好序了 导致排序也很快.
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>  高度为3的B+树能放千万级别的数据...演算过程..
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>4.B+树索引的分类 
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>  聚集索引与辅助索引的区别 id name字段举例说明
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>5.覆盖了索引与回表操作 两者都是在命中了索引的前提下
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>6.innodb引擎为啥叫索引组织表？一张表只能有一个主键 以主键来组织数据 若没有主键...
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>7.如何正确使用索引？
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>1) 索引原则:不为空且唯一占用空间小
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>2) 给重复度高or占空间大的字段建立索引 等值查询速度提升不理想
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>3）全表最好 分页给
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>4）范围查询范围别太大 太大了就相当于等值查询了
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>5）别让字段参与运算,也别用啥函数 保持字段干净
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>6）其它...
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>8.索引下推、联合索引、最左前缀匹配？
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>索引下推 and-找里面最优的那个字段缩小范围 对or没法
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>最左前缀匹配 就是一定要有最左边那个
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>9.未命中索引的情况
</code></pre></div>
<hr />
<h2 id="1-3">第1-3问题的解答如下:<a class="headerlink" href="#1-3" title="Permanent link">&para;</a></h2>
<h4 id="_1"><font color='orange'>一. 什么是索引?</font><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<blockquote>
<p>key - 数据结构 - 索引组织数据 - B+树</p>
<p>简单理解 相当于书籍的目录.</p>
</blockquote>
<p>索引是mysql的一种<strong>数据结构</strong>,这种数据结构称之为<strong>key</strong>,大白话说索引就是一种数据的组织方式.<br />
表中的一行行数据按照索引规定的结构组织成了一种树型结构,该树叫<strong>B+树</strong>.</p>
<h4 id="_2"><font color='orange'>二. 为何要用索引?</font><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<blockquote>
<p>以空间换时间</p>
</blockquote>
<p>优化查询速度.(读写比例<strong>10:1</strong>)</p>
<h4 id="_3"><font color='orange'>三. 如何正确的看待索引呢?</font><a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<blockquote>
<p>why卡？排查到索引上成本高.开发之初就应该加.</p>
<p>索引越多 ibd文件里的索引树越多 一个update语句导致很多树发生变化 IO效率down！</p>
</blockquote>
<p><strong>错误的认知</strong></p>
<ol>
<li>软件上线之后,运行了一段时间,发现软件极卡(用户请求一个数据半天出不来),想到要加索引 （x）</li>
</ol>
<p>慢：不是指绝对意义上的很长时间。即便某一条sql语句卡顿2-3秒也会严重影响用户体验.<br />
   慢的原因：网速、程序本身、数据库....<br />
<strong>在开发软件之初就应该根据业务的理解加索引</strong>(定位到常用的查询字段).<br />
   火烧眉毛再加索引,光问题定位排查到数据库上就需要耗费很长时间,成本很高！</p>
<ol>
<li>索引越多越好. (x)</li>
</ol>
<p>加索引查询 (读) 会变快,但增删改数据 (写) 的速度会变慢,因为多了一层B+树的数据结构的维护(每次操作都
   要调整整个B+树的数据结构关系) <br />
   如果某张表的ibd文件(ibd -- 数据和索引结构的文件)中创建了很多棵索引树,意味着很小的update语句会导致很多棵索引树都需要发生变化,从而硬盘的<strong>IO</strong>会很高,吃不消.</p>
<h4 id="_4"><font color='orange'>四. 储备知识</font><a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<h6 id="1"><font color='purple' size=4>1&gt; 索引的根本原理</font><a class="headerlink" href="#1" title="Permanent link">&para;</a></h6>
<blockquote>
<p>原理: 将磁盘(硬盘)的IO次数降下来.提速.</p>
</blockquote>
<p>[ 类比 ]:  书( 一张表); 书的一页( 表的一行); 索引( 书的目录)<br />
所以 准确来说 是为一张表的一行行记录创建索引！(为书的一页页内容创建目录)</p>
<p>有了目录结构(索引)后,我们以后的查询都应该通过目录(索引)去查询！</p>
<p>题外话: 像什么集群架构的优化到最后都是优化IO.<br />
硬盘内存都有IO 内存IO很快不考虑, 主要是 <strong>硬盘IO和网络IO</strong>.</p>
<p>因为内存的易失性(断电数据丢失) 一般情况下,我们都会选择将表中的数据和索引存储在磁盘这种外围设备中<br />
但是和内存相比,从磁盘中读取数据的速度会慢上百倍千倍甚至万倍,所以,应当尽量减少从磁盘中读取数据的次数。</p>
<h6 id="2-io"><font color='purple' size=4>2&gt; 一次磁盘IO的影响</font><a class="headerlink" href="#2-io" title="Permanent link">&para;</a></h6>
<blockquote>
<p>硬盘传数据到内存通过主办上的总介传输 光速！7200转/min的硬盘为例...</p>
<p>硬盘主要看找数据的时间 = avg寻道时间 + avg旋转时间 + 读写数据时间  ≈  9ms<br />
磁臂找到磁道 - 数据在磁道某一个位置 - 读取磁盘块(多个弧段)</p>
<p>9ms? 时间长吗？一个普通的cpu可以在这段时间运行450万条命令.<br />
况且一个表中的记录成千上万, 若是 一行行的找... 每行9ms ,boom原地爆炸.</p>
</blockquote>
<p>固态硬盘贵. 机械硬盘 (转速越高读写越快 读写数据靠的机械运动) </p>
<p>以7200转/分钟(120转/秒)的机械硬盘为例, 做磁盘IO将硬盘的数据读到内存. <br />
cpu下发指令到硬盘,硬盘找到数据后往内存里读, 从硬盘把数据往内存读其实就是本地在主板上通过总介传输,这个速度很快几乎光速. 我们说硬盘慢是慢在找数据这一过程.(这里说的是本地 不涉及网络哈！)</p>
<p>一次磁盘IO的延迟时间'即找数据的时间' = 平均寻道时间+ 平均旋转时间+传输时间 = 9ms<br />
&nbsp;&nbsp;&nbsp;&nbsp; 平均寻道时间: 磁臂从外到内的要划到数据所在的那个磁道上  '大概需要5ms' <br />
&nbsp;&nbsp;&nbsp;&nbsp; 平均旋转时间: 数据在磁道那一圈的某个位置 转一圈 1/120s = 1000/120ms = 8.3ms  '半圈 4ms'<br />
&nbsp;&nbsp;&nbsp;&nbsp; 传输时间: 指的是从磁盘读出或将数据写入磁盘的时间.一般在零点几毫秒.相对于前两个时间可以忽略不计.</p>
<p>9ms很长很长了,一个普通的cpu在9ms的时间里可以执行450万条指令.cpu可不乐意等这么久.</p>
<h6 id="3"><font color='purple' size=4>3&gt; 磁盘预读</font><a class="headerlink" href="#3" title="Permanent link">&para;</a></h6>
<blockquote>
<p>硬盘读写基本单位 - '扇区'(磁道弧段) 512B 字节<br />
扩展: <br />
一个文件系统存储最小单元是块 4k (哪怕文件只有1k大小也要占4k的空间)<br />
innodb存储引擎的最小单元是页Page 16k  .ibd是16的整数倍</p>
<p>n*扇区 = 磁盘块    硬盘一次IO就是读取一个磁盘块的大小到内存<br />
那磁盘块多大呢？对于innodb引擎的数据库来说,磁盘块最大为16K！</p>
<p>简单理解：数据库的一次IO最好能读取16k的数据...<br />
<font color='red'>Mysql一次IO大小 ｜ 硬盘一次IO大小  ==  一个磁盘块大小 ｜ Mysql一页数据大小 ｜索引树节点的大小</font></p>
</blockquote>
<p><strong>扇区</strong>是指磁盘上划分的区域, 磁盘上的每个磁道被等分为若干个弧段, 这些弧段便是磁盘的扇区;<br />
<strong>硬盘的读写以扇区为基本单位</strong>. 即扇区是磁盘存储信息的最小物理单位, 通常一个扇区的容量为512B; <br />
多个扇区组合到一起称作为一个<strong>磁盘块</strong>.  <strong>磁盘一次IO是读取一个磁盘块到内存里面.</strong></p>
<p><strong>一个磁盘块在数据库里称之为一页</strong>. innodb存储引擎一页16k. <font color='red'>即一次磁盘IO读16k数据到内存中.</font></p>
<p><strong>预读：当一次IO时,把当前磁盘块和相邻的磁盘块都读取到内存缓冲区内.</strong> 因为局部预读性原理告诉我们,当计算机访问一个地址的数据的时候,与其相邻的数据大概路会很快被访问到。</p>
<p>题外话：理想情况肯定是挨着存的.... 这里不深纠..<br />
A文件占3个磁盘块、B文件占4个磁盘块, C文件占3个磁盘块,依次挨着存到磁盘里很快,某一天删除了B文件,4个磁盘块就空出来了. 这时D文件来了,它需要5个磁盘块,先存满这4个磁盘块,跨过C文件再找一个磁盘块存,所以一个文件不一定是连续存的.导致磁盘的写效率就低了.</p>
<h4 id="_5"><font color='orange'>五. 索引的分类</font><a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<blockquote>
<p>B+树与Hash</p>
<p>等值查询：Hash明显有绝对的优势,只需要通过一次Hash算法就可以找到key对应的value(前提Key是唯一的.)</p>
<p>范围查询：Hash索引是无序的,哪怕原本的键值是有序的 也会被打散. 所以Hash不支持范围查询.</p>
</blockquote>
<h6 id="b"><font color='purple' size=4>B+树！！！<code>*****</code></font><a class="headerlink" href="#b" title="Permanent link">&para;</a></h6>
<p>等值查询和范围查询都快</p>
<h6 id="hash"><font color='purple' size=4>Hash <code>***</code> </font><a class="headerlink" href="#hash" title="Permanent link">&para;</a></h6>
<p>innodb不支持<br />
等值查询快 不支持范围查询、组合查询、排序、分组...<br />
适用场景: 离散型高 数据基数大 等值查询</p>
<h6 id="full-text"><font color='purple' size=4>FULL-TEXT:全文索引</font><a class="headerlink" href="#full-text" title="Permanent link">&para;</a></h6>
<p>通过关键字的匹配来进行查询,类似于like的模糊查询 <br />
like+%_ 在文本比较少的时比较合适,对于大量的文本数据检索会非常慢<br />
全文索引在大量的数据面前能比like快很多,但是准确率很低<br />
百度在搜索文章的时候使用的就是全文索引,也有可能是ES</p>
<p>全文检索通俗点就是word文档里ctrl+f查找,针对的是一篇内容很多的文档. </p>
<p>提一嘴: <br />
默认的innodb引擎不支持我们自己去创建Hash索引,但它自己内部用到了Hash索引便于找到内存里缓存的数据。</p>
<h4 id="_6"><font color='orange'>六. 创建索引的两个步骤</font><a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p><code>create index 索引名 on 表名(列名);</code></p>
<p>step1: 提取索引字段每行的值当作key, value就是对应行的记录 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10 --- 10 zs &nbsp;&nbsp;&nbsp;&nbsp; 7 --- 7 ls &nbsp;&nbsp;&nbsp;&nbsp; 13 --- 13 ww &nbsp;&nbsp;&nbsp;&nbsp; <strong>索引字段值作为键,对应的一行记录(数据)作为值</strong><br />
step2: <strong>以key值为基础比较大小</strong>,生成树型结构</p>
<h4 id="b_1"><font color='orange'>七. B+树?</font><a class="headerlink" href="#b_1" title="Permanent link">&para;</a></h4>
<blockquote>
<p>若没有索引,等值查找某个数据,会将表中的记录挨个查询,时间复杂度为O(n).<br />
有了索引后,索引按照 二叉树 --  平衡二叉树  -- B树'多分支AVL树' -- B+树 的数据结构逐步优化对数据的构建.</p>
<p>将数据(1条或多条记录)放到树的节点里,每读一个节点就是一次IO.</p>
<p>节点的大小<br />
&nbsp;&nbsp;&nbsp;&nbsp; 二叉树和平衡二叉树树的节点的基本单位一般情况下是扇区(因为一条记录所占空间不够大) ？<br />
&nbsp;&nbsp;&nbsp;&nbsp; B树和B+树的节点的基本单位是磁盘块(理想情况下的大小是16K)</p>
<p>二叉树的结构可能就是单纯的一根斜着的棍,树的高度不够低...所以有了平衡二叉树,压低了高度.但这高度实则上也不够低,因为平衡二叉树的每个节点中只放一条记录...在海量数据面前,为了让树的高度更低,就有了B树,每个节点存放多个key-value...但B树除最后一次IO节点,其它IO节点的value并没有用到. 所以B+树非叶子节点放索引结果, 叶子节点放key-value...</p>
<p>B+数的查找有点二分法查找(排好序后..)的意思.</p>
</blockquote>
<p><font color='pink'><strong>说明</strong>: </font>
<font color='pink'>在下方的一系列阐述中 将树的高度跟层数两个概念混为了一谈,但对整体的理解没多大的影响. (懒得改了..Hhhh)</font></p>
<h6 id="_7"><font color='purple' size=4>二叉查找树</font><a class="headerlink" href="#_7" title="Permanent link">&para;</a></h6>
<p><strong>树的节点分为两类三种</strong>:<br />
&nbsp;&nbsp;&nbsp;&nbsp; leaf node: 叶子节点<br />
&nbsp;&nbsp;&nbsp;&nbsp; non-leaf node: 根节点、树枝节点
顶端的节点我们称为根节点, 没有子节点的节点我们称之为叶子节点, 位于中间的都称之为树枝.</p>
<p><img alt="" src="../assets/WechatIMG5.jpeg" /></p>
<p>从图中可以看到,我们为user表(用户信息表)建立了一个二叉查找树的索引<br />
<strong>二叉查找树特点</strong>: <br />
&nbsp;&nbsp;&nbsp;&nbsp; 每个节点最多有两个子节点<br />
&nbsp;&nbsp;&nbsp;&nbsp; 任何节点的左子节点的键值都小于当前节点的键值,右子节点的键值都大于当前节点的键值<br />
<font size=2 color=gray>(不纠结根节点为啥就是10 '它就是多种构建方案的其中一种结果' 重点在于只要这棵树满足二叉查询树的特点就行！！)</font></p>
<p>图中的圆为二叉查找树的节点,节点中存储了键(key)和数据(data)<br />
&nbsp;&nbsp;&nbsp;&nbsp; 键对应user表中的id,数据对应user表中的行数据。</p>
<p>Q:  有了这个二叉树,查询效率就提高了？<br />
A：错！一定要命中索引才行！命中索引 -- sql语句中查询条件的id对应上了某棵树的key值</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="err">利用二叉索引树的查找过程如下</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="err">根结点作为当前节点</span><span class="p">,</span><span class="err">把</span><span class="mi">12</span><span class="err">与当前节点的键值</span><span class="mi">10</span><span class="err">比较</span><span class="p">,</span><span class="mi">12</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">,</span><span class="err">就将当前节点的右子节点作为当前节点</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="err">继续把</span><span class="mi">12</span><span class="err">和当前节点的键值</span><span class="mi">13</span><span class="err">比较，发现</span><span class="mi">12</span><span class="o">&lt;</span><span class="mi">13</span><span class="err">，把当前节点的左子节点作为当前节点</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="err">把</span><span class="mi">12</span><span class="err">和当前节点的键值</span><span class="mi">12</span><span class="err">对比</span><span class="p">,</span><span class="mi">12</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="err">满足条件</span><span class="p">,</span><span class="err">从当前节点中取出</span><span class="k">data</span><span class="p">,</span><span class="err">即</span><span class="n">id</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="n">xm</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>最多三次就能确定结果了,跟这颗树的高度相同！若没有树,一条条的找,最多需要7次！<br />
<font color='red'>二叉树的高度就是所需要查找的数据的最大IO次数</font></p>
<p>但二叉查询树 非常容易变成像下图 这样构建. 变成了一张链表. 若需要查找id=17的用户信息,就需要查找7次,也就相当于全表扫描了, 时间复杂度变成了O(n) 无法随机查找, 根本无法达到减少IO次数的目的.<br />
<strong>高度太高导致查询效率不稳定</strong>(上方的那颗树实则是二叉树的特殊情况 平衡二叉树)</p>
<p><img alt="" src="../assets/WechatIMG6.png" /></p>
<h6 id="avl"><font color='purple' size=4>平衡二叉树（AVL树）</font><a class="headerlink" href="#avl" title="Permanent link">&para;</a></h6>
<p>为了解决上述问题,就需要用到平衡二叉树了。
<strong>平衡二叉树的特点</strong>: 在满足二叉查找树特性的基础上，要求<strong>每个节点的左右子树的高度差不能超过1</strong>!</p>
<p><img alt="" src="../assets/WechatIMG7.jpeg" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="err">假设</span><span class="w"> </span><span class="err">一颗平衡二叉树</span><span class="p">,</span><span class="err">一共</span><span class="mi">5</span><span class="err">层</span><span class="p">,</span><span class="err">每个非叶子节点都有两个子节点</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="err">那么这棵树共有</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">0</span><span class="o">+</span><span class="mi">2</span><span class="o">^</span><span class="mi">1</span><span class="p">..</span><span class="o">+</span><span class="mi">2</span><span class="o">^</span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">31</span><span class="err">个节点</span><span class="w">  </span><span class="err">等值查找</span><span class="w"> </span><span class="err">最多</span><span class="mi">5</span><span class="err">次</span><span class="n">IO</span><span class="err">！</span><span class="w"></span>
</code></pre></div>
<p>Q: 用平衡二叉树就没问题了吗？<br />
A: No！我们创建索引的时候将索引的键值对写入硬盘, 然后mysql每次IO读取一个节点的数据到内存. 哇！诚然, 平衡二叉树相较于逐行一条条的查找可以提速. 但innodb引擎的一页数据可是可以达到16k的. 一次IO就读一条记录(几个字节)也太浪费了吧！IO次数可是取决于树的高度的！</p>
<p>这就好比于开卡车运货,为什么每辆卡车只放一个很小的货物呢？<br />
所以不用死板,灵活些,每个节点试着多放几条数据！这就不得不提B树啦.</p>
<h6 id="b_2"><font color='purple' size=4>B树</font><a class="headerlink" href="#b_2" title="Permanent link">&para;</a></h6>
<p><img alt="" src="../assets/WechatIMG8.jpeg" /> </p>
<p>注意: <br />
[1] 图中的p节点为指向子节点的指针(地址), 二叉查找树和平衡二叉树其实也有, 因为图的美观性, 被省略了<br />
[2] <strong>一页一磁盘块一节点</strong> 三者一回事. 在mysql中数据读取的基本单位是页Page, 所以这里叫做页更符合mysql中索引的底层数据结构.</p>
<p><strong>B树是一种多叉的AVL树.</strong></p>
<p>从上图可以看出, B树相较于平衡二叉树, 每个节点存储了更多的键值(key)和数据(data). 并且每个节点拥有更多的子节点, 上述图中的B树为3阶(<strong>树中<em>节点孩子个数的最大值</em>为3</strong>)B树, 高度也会更低.<br />
基于这个特性, B树相较于平衡二叉树查找数据读取磁盘的IO次数将会更少, 查找效率就会比平衡二叉树高很多。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="err">假如我们要查找</span><span class="n">id</span><span class="o">=</span><span class="mi">28</span><span class="err">的用户信息</span><span class="p">,</span><span class="w"> </span><span class="err">那么我们在上图</span><span class="n">B树中查找的流程如下</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="err">先找到根节点也就是页</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">判断</span><span class="mi">28</span><span class="err">在键值</span><span class="mi">17</span><span class="err">和</span><span class="mi">35</span><span class="err">之间</span><span class="p">,</span><span class="err">那么根据页</span><span class="mi">1</span><span class="err">中的指针</span><span class="n">p2找到页3</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="err">将</span><span class="mi">28</span><span class="err">和页</span><span class="mi">3</span><span class="err">中的键值相比较</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="err">在</span><span class="mi">26</span><span class="err">和</span><span class="mi">30</span><span class="err">之间，根据页</span><span class="mi">3</span><span class="err">中的指针</span><span class="n">p2找到页8</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="err">将</span><span class="mi">28</span><span class="err">和页</span><span class="mi">8</span><span class="err">中的键值相比较</span><span class="p">,</span><span class="w"> </span><span class="err">发现有匹配的键值</span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="err">键值</span><span class="mi">28</span><span class="err">对应的用户信息为</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span><span class="n">bv</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>提一个点: <strong>根节点一般是常驻内存的</strong>,所以读取根节点的那一次IO就不用进行了.</p>
<p><font color='blue'>二叉树的结构可能就是单纯的一根斜着的棍,树的高度不够低...所以有了平衡二叉树,压低了高度.但这高度实则上也不够低,因为平衡二叉树的每个节点只放一条记录.在海量数据面前,为了让树的高度更低,就有了B树,每个节点存放多个key-value ... </font></p>
<p>高度还能不能更低？<br />
一页(一节点)大小最大是16k,里面有多条数据,每条数据由key和value组成。大胆点想, 若只要key不要value,一页是不是就能放更多条数据, 进一步压低高度?<br />
假设查找到数据经历了三次 IO,前两次 IO 其实从磁盘读取了不必要的数据,因为只用比较 KEY,所以非叶子节点对应的 DATA 完全没有必要,如果 DATA 很大,那完全是浪费内存资源。考虑下能否把非叶子节点的 DATA 拿掉？</p>
<p>答案是肯定的,这就引出了B+树！</p>
<p><font size=2 color=gray>顺带提一嘴, B树的构造是有一些规定的, 但这不是这里的关注点 略. </font><br />
<font size=2 color=gray>B树也是平衡的,当增加或删除数据而导致B树不平衡时, 也是需要进行节点调整的。
</font></p>
<h6 id="b_3"><font color='purple' size=4>B+树</font><a class="headerlink" href="#b_3" title="Permanent link">&para;</a></h6>
<p><font color='purple'>注意啊 页1(1) - 页2(1) - 页5(1)</font> </p>
<p><img src="assets/WechatIMG9.jpeg" alt="img"  /></p>
<p><strong>高度更低</strong>:</p>
<blockquote>
<p>&lt;用空间换时间&gt; 'non-leaf node'索引结构; leaf node真正的数据<br />
(非叶子节点和叶子节点把key索引值不止存了1遍...1.5？Hhhh)</p>
<p>相较于B树的每个节点都存储键值和数据。B+树非叶子节点上是不存储数据的, 仅存储键值, 之所以这么做是因为在数据库中页的大小是固定的，innodb中页的默认大小是16KB。<br />
如果不存储数据，那么非叶子节点的磁盘块就能容纳更多的key值, 相应的树的阶数(节点的子节点树)就会更大'引出来的箭头就更多了' , 树就会更矮更胖, 被压扁了。如此一来我们查找数据进行磁盘的IO次数有会再次减少，数据查询的效率也会更快。</p>
</blockquote>
<p><font color='red'>!!!!一颗B+树能存储千万条级别的数据..</font>  推理如下:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="err">先要晓得！数据是在叶子节点中的！！！非叶子节点是索引结构！！所以能存多少条数据是看叶子节点</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="err">若一条记录大小为</span><span class="mi">1</span><span class="n">k</span><span class="p">,</span><span class="err">那么叶子节点上理论上可以放</span><span class="mi">16</span><span class="err">条数据</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="err">非叶子节点存放的</span><span class="n">key值和指针</span><span class="p">,</span><span class="err">假设主键</span><span class="n">ID为bigint类型8字节</span><span class="p">,</span><span class="err">指针大小在</span><span class="n">innodb源码里面设置是6字节</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="err">那么一组</span><span class="k">key</span><span class="o">+</span><span class="err">指针就是</span><span class="mi">14</span><span class="err">字节</span><span class="p">,</span><span class="mi">16</span><span class="n">k</span><span class="o">=</span><span class="mi">16</span><span class="o">*</span><span class="mi">1024</span><span class="o">=</span><span class="mi">16384</span><span class="n">B</span><span class="p">,</span><span class="err">则非叶子节点最多能放</span><span class="mi">16384</span><span class="o">/</span><span class="mi">14</span><span class="err">≈</span><span class="mi">1170</span><span class="err">条数据</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="err">若树的高度为</span><span class="mi">2</span><span class="p">,</span><span class="err">则根节点的每个指针指向一个叶子节点</span><span class="p">,</span><span class="err">则有</span><span class="mi">1170</span><span class="err">个叶子节点</span><span class="p">,</span><span class="err">一共能存</span><span class="mi">1170</span><span class="o">*</span><span class="mi">16</span><span class="o">=</span><span class="mi">16384</span><span class="err">条数据</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="err">若树的高度为</span><span class="mi">3</span><span class="p">,</span><span class="err">则一共能存</span><span class="w"> </span><span class="mi">1170</span><span class="o">*</span><span class="mi">1170</span><span class="o">*</span><span class="mi">16</span><span class="o">=</span><span class="mi">21902400</span><span class="err">条数据</span><span class="p">.</span><span class="w"> </span><span class="err">千万级别</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="err">若</span><span class="n">id为int类型</span><span class="w"> </span><span class="err">二千万就能变成四千万</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="err">逆推验证</span><span class="p">:</span><span class="w"> </span><span class="err">假设数据从</span><span class="mi">1</span><span class="err">到</span><span class="mi">21902400</span><span class="err">顺序存储</span><span class="p">.</span><span class="mi">16</span><span class="err">个数据为一组</span><span class="p">,</span><span class="err">就有</span><span class="mi">1170</span><span class="o">*</span><span class="mi">1170</span><span class="err">个叶子节点</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="err">每</span><span class="mi">1170</span><span class="err">个叶子节点为一组对应第二层色树枝节点</span><span class="p">(</span><span class="err">反过来</span><span class="p">,</span><span class="err">每个树枝节点里有</span><span class="mi">1170</span><span class="err">个指针</span><span class="p">),</span><span class="err">则有</span><span class="mi">1170</span><span class="err">个树枝节点</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="err">最上层的根节点有</span><span class="mi">1170</span><span class="err">个指针指向这些树枝节点</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p><strong>排序查找等更快</strong>：</p>
<blockquote>
<p>仔细看, 
1&gt; B+树索引的所有数据均存储在叶子节点, 它默认帮忙排好序,是有序排列的！(B树的数据是分散在各个节点的)<br />
2&gt; 叶子节点之间也有指针指向！</p>
<p>这使得B+树范围查找、排序查找、分组查找以及去重查找变得异常简单. <br />
B+树等值查询也快,B树也快,等值查询不是B+树独特的优势,那B+范围查询为啥快呢？</p>
</blockquote>
<p><font color='blue'>范围查询锁定一个叶子节点(双向链表)后,通过叶子节点的指向往后找,不需要每次都回头再一次从根节点查找.</font></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="o">&gt;</span><span class="mi">9</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">id</span><span class="o">&lt;</span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 依次找id=10的,id=11的直到id=20.</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">B</span><span class="o">+</span><span class="err">树</span><span class="p">:</span><span class="w"> </span><span class="err">页</span><span class="mi">1</span><span class="p">(</span><span class="n">P1</span><span class="w"> </span><span class="s1">&#39;1&lt;10&lt;18&#39;</span><span class="p">)</span><span class="w">  </span><span class="o">==&gt;</span><span class="w"> </span><span class="err">页</span><span class="mi">2</span><span class="p">(</span><span class="n">P2</span><span class="w"> </span><span class="s1">&#39;8&lt;10&lt;14&#39;</span><span class="p">)</span><span class="w">  </span><span class="o">==&gt;</span><span class="w"> </span><span class="err">页</span><span class="mi">6</span><span class="p">(</span><span class="err">找到</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">==&gt;</span><span class="w"> </span><span class="err">页</span><span class="mi">7</span><span class="w"> </span><span class="o">==&gt;</span><span class="w"> </span><span class="err">页</span><span class="mi">8</span><span class="w"> </span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">         </span><span class="err">范围查询锁定一个叶子节点</span><span class="p">(</span><span class="err">双向链表</span><span class="p">)</span><span class="err">后</span><span class="p">,</span><span class="err">通过叶子节点的指向往后找</span><span class="p">,</span><span class="err">不需要每次都回头从根节点查找</span><span class="p">.</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">B树</span><span class="p">:</span><span class="w">  </span><span class="err">叶子节点没有互相的指向</span><span class="p">,</span><span class="err">而且数据是分散的</span><span class="p">,</span><span class="err">每次都需要从根节点重新开始查询</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>下图是sql语句 <code>select * from user where id&gt;=18 and id &lt;40</code> 的查询过程.</p>
<p><img alt="" src="../assets/WechatIMG10.jpeg" />补充：name字段能做索引吗？<br />
能！因为字符类型的数据也能比大小.根据字符对应位置的ACSII码进行比较！eg 'abc' &lt; 'az' </p>
<hr />
<h2 id="4-9">第4-9问题的解答如下:<a class="headerlink" href="#4-9" title="Permanent link">&para;</a></h2>
<h4 id="b_4"><font color='orange'>八. B+树索引的分类</font><a class="headerlink" href="#b_4" title="Permanent link">&para;</a></h4>
<blockquote>
<p>注意：一张innodb存储引擎表中必须要有且只能有一个聚集索引.但是可以有多个辅助索引.</p>
<p>聚集索引 ‘一个’ 与辅助索引 ‘多个’ 比较：<br />
相同点 --- B+树结构,非叶子节点都放key,叶子节点都放key+value<br />
不同点 --- 前者的key是主键 , 后者的key是非主键字段<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 前者的value是一整行完整的记录 , 后者的value是其对应的主键字段的值</p>
</blockquote>
<h6 id="_8"><font color='purple' size=4>聚集索引(聚簇索引｜主键索引)：</font><a class="headerlink" href="#_8" title="Permanent link">&para;</a></h6>
<blockquote>
<p>通常主键选择字段id, 因为id字段占的空间小并且重复度不高(一般设置id自动增长 便于比大小).以此构建出来的树的高度会非常矮.</p>
</blockquote>
<p>聚集索引: 以<strong>主键字段为key</strong>构建的B+树, 该B+树的非叶子节点以key值构建索引树,叶子节点放的是主键值与本行完整的记录。表中的数据都聚集在叶子节点.</p>
<p>补充: <br />
以innodb引擎创建的表(索引组织表)必须要有一个主键. <br />
若没有指定主键,会自动使用不为空且唯一的字段作为主键字段,如果没有符合条件的,Innodb引擎会自动创建一个隐藏的字段作为主键字段.(若是隐藏字段做的主键的话 此主键就不具备加速效果了)  </p>
<h6 id="_9"><font color='purple' size=4>非聚集索引(非聚簇索引｜辅助索引｜二级索引)</font><a class="headerlink" href="#_9" title="Permanent link">&para;</a></h6>
<p>以 <strong><em>非主键字段为key</em></strong> 构建的B+树, 该B+树的<strong>叶子节点</strong>放的是 <em>key值和与其对应的主键字段值</em>.</p>
<h4 id="_10"><font color='orange'>九. 覆盖了索引、回表操作</font><a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<blockquote>
<p>假设 主键索引 -- id字段;  辅助索引 -- name字段.</p>
<p>命中主键索引肯定覆盖了索引<br />
命中辅助索引要看指定列是否只有辅助索引字段和主键字段. 是 覆盖了索引; 否 回表操作.</p>
</blockquote>
<h6 id="_11"><font color='purple' size=4>覆盖了索引: </font><a class="headerlink" href="#_11" title="Permanent link">&para;</a></h6>
<blockquote>
<p>在命中索引的基础上, 只在本索引树的叶子节点就找到了我们想要的数据.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 命中辅助索引  <code>select id,name from user where name='egon';</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 命中主键索引  <code>select name,age,gender from user where id=3;</code></p>
</blockquote>
<h6 id="_12"><font color='purple' size=4>回表操作</font><a class="headerlink" href="#_12" title="Permanent link">&para;</a></h6>
<blockquote>
<p><code>select name,age,gender from user where name='egon';</code> (命中辅助索引)<br />
&nbsp;&nbsp;&nbsp;&nbsp; 非聚集索引的叶子节点不存储表中的数据,而是存储该列对应的主键,想要查找数据我们还需要根据主键再去聚集索引中查找, 这个再根据聚集索引查找数据的过程, 我们称为回表.<br />
&nbsp;&nbsp;&nbsp;&nbsp; 简单来说, 在命中辅助索引的基础上,在辅助索引的叶子节点并没有找到想要的数据,需要拿着对应的主键字段去聚集索引里再找一下. eg: 树的高度是3 那么IO最大可能是6次！</p>
</blockquote>
<h4 id="_13"><font color='orange'>十. 索引管理</font><a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>增加删除主键 PRI、唯一UNL、普通索引MUL</p>
<blockquote>
<p>适用场景</p>
<p>unique<br />
需求表明某一列不能重复 eg:手机号邮箱不能重复<br />
想让两个列加起来是唯一的,那么就创建多列联合唯一索引.<br />
eg: 博客系统中的up_down推荐表. 那么user_id和article_id就适合做一个联合唯一索引. 要么赞要么踩.</p>
<p>index<br />
一些列可能重复,比如 昵称. 想通过昵称进行搜索.加快它的速度那就做普通索引.<br />
想要几个要一起去搜索的时候.就用普通联合索引.<br />
eg:  <code>select * from info where user ='**' and pwd ='**'</code> </p>
</blockquote>
<h4 id="_14"><font color='orange'>十一. 索引实验</font><a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<blockquote>
<p>在表中已经有大量数据的情况下,为某个字段建索引会很慢,且占用硬盘空间,建完后查询速度加快.<br />
百万行级别的数据大概需要8,9秒...甚至更久.  <code>create index idx on s1(id);</code>  <br />
建索引时会打乱,所以建的过程中别查？？</p>
</blockquote>
<p>它会扫描表中所有的数据,然后以id为数据项,创建索引结构,存放于硬盘的表中. 数据量大建索引快不了..</p>
<p>题外话: 若加索引的字段是sex字段, 哪怕命中索引查询也快不了.实际上sex字段加了索引跟没加一样.<br />
<code>select count(1) from t1 where sex='男';</code>  可以参考执行计划 <code>expain</code></p>
<p><strong>注意:</strong> <br />
删除索引后ibd文件的大小并不会减小.因为mysql现目前清理不掉里面的东西.Hhhh. <strong>建索引时慎重</strong>！！！<br />
只有几个字段的300万条数据. 192M. 建完id索引后. ibd文件会变大,大概250M.</p>
<h4 id="_15"><font color='orange'>十二. 正确使用索引</font><a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p><strong>正确使用索引  即使命中索引提速也不明显..</strong></p>
<p><code>explain &lt;sql语句&gt;</code> 结果 看key有无命中索引 看rows行数</p>
<h6 id="_16"><font color='purple' size=4>构建基础</font><a class="headerlink" href="#_16" title="Permanent link">&para;</a></h6>
<blockquote>
<p>1&gt; 以什么字段的值为基础构建索引?</p>
</blockquote>
<p>最好是不为空且唯一占用空间小的字段</p>
<h6 id="_17"><font color='purple' size=4>全表查询</font><a class="headerlink" href="#_17" title="Permanent link">&para;</a></h6>
<blockquote>
<p>2&gt; 针对全表查询语句如何优化？<code>select count(id) from s1;</code></p>
</blockquote>
<p>应用场景: 用户想要浏览所有的商品信息<br />
优化方案: 开发层面分页查找, 不一次性展现给用户; 缓存.</p>
<h6 id="_18"><font color='purple' size=4>等值查询</font><a class="headerlink" href="#_18" title="Permanent link">&para;</a></h6>
<blockquote>
<p>3&gt; 针对等值查询  <code>select count(id) from s1 where id = 33;</code></p>
</blockquote>
<p>以重复度低的查询字段为基础创建索引才能加速查询！！给重复度高的字段创建索引是没有意义的!<br />
以占用空间大的字段为基础创建索引加速效果不明显.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;egon&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1">-- 300万条数据的name全是egon.</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1">-- 执行上方语句 全表扫描 1.32s</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1">-- 不管三七二十一 为name字段建立索引  5.13s</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_name</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1">-- 再执行第一条sql语句 28.45s (´▽｀)变得很慢了耶 虽然命中索引但与全表扫描相比反而变慢了很多很多</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="c1">-- 因为以name创建的树 它的key全是egon. 分不清谁大谁小,就是一根棍..</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="c1">-- 这导致了个很有趣的现象 没有的瞬间判断出来</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;egon&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 0.00s 瞬间判断出来了.</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;xxxx&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 0.00s 瞬间判断出来了.</span>
</code></pre></div>
<p>总结: 等值查询的优化 应该给重复度低且占用空间小的字段值为基础创建索引.</p>
<h6 id="_19"><font color='purple' size=4>范围查询</font><a class="headerlink" href="#_19" title="Permanent link">&para;</a></h6>
<blockquote>
<p>4&gt; 关于范围查询</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">-- &gt; &gt;= &lt; &lt;= != between and like</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_id</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="n">id</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">33</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 哪怕命中了索引,也相当于对300万条数据全表扫描了</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="o">&gt;</span><span class="mi">33</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="cm">/*</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="cm">id != 33; -- 慢 是一个很大的范围</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="cm">between 1 and 3; -- 快 范围小</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="cm">between 1 and 300000; -- 慢 范围大</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="cm">*/</span><span class="w"></span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="cm">/*给email加索引后 等值查询变快</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="cm">email like &#39;xxxx&#39;; -- 快 like指定的是一个明确的值</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="cm">email like &#39;egon3%&#39;; -- 若以egon3开头的数据很多 就是一个很大的范围,慢 反之相反</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="cm">email like &#39;%xxxx&#39;; -- 慢</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="cm">-- %尽量右边 尽量将模糊查询的条件写得完善些</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="cm">*/</span><span class="w"></span>
</code></pre></div>
<p>总结: <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; innodb存储能加速范围查询,但是查询范围不能太大.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; like 后的内容%应该往右放,并且左半部分的内容应该尽量精确</p>
<h6 id="_20"><font color='purple' size=4>字段运算</font><a class="headerlink" href="#_20" title="Permanent link">&para;</a></h6>
<blockquote>
<p>5&gt; 条件字段参与运算</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_mouth_salary</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="n">mouth_salary</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1">-- 查询年薪为10000的员工</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">mouth_salary</span><span class="o">*</span><span class="mi">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 索引字段id参与了计算 每次都有四则运算下</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">mouth_salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="o">/</span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 优化</span>
</code></pre></div>
<p>总结: 不要让条件字段参与运算,也不要传递给某一个函数 保持字段是干净的..</p>
<h6 id="_21"><font color='purple' size=4>其它</font><a class="headerlink" href="#_21" title="Permanent link">&para;</a></h6>
<blockquote>
<p>隐式转换问题:  id = 1  id=“1”</p>
<p>尽量避免使用select *    因为可能会出现回表操作</p>
<p>建表时尽可能把占用空间小的往前放 这跟底层有关</p>
<p>建议用连接(join) 来代替 子查询</p>
<p>覆盖了索引</p>
<p>慢查询日志</p>
</blockquote>
<h4 id="_22"><font color='orange'>十三. 索引下推技术</font><a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<p>mysql内部优化器的一种机制.它会分析出多种执行方案.找到其中最优的方案.</p>
<h6 id="and"><font color='purple' size=4>连续多个and</font><a class="headerlink" href="#and" title="Permanent link">&para;</a></h6>
<blockquote>
<p>对于连续多个and的条件, 优化器会先找出能把范围缩到最小的某一个条件'(一般是区分度高的索引字段)'.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">select</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">name</span><span class="o">=</span><span class="s1">&#39;egon&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">age</span><span class="o">=</span><span class="mi">18</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s1">&#39;male&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="cm">/*我们的思路: </span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="cm">-- 拿到第一条记录 依次判断name、age、gender的值,若判断途中出现false就中断此次判断 再拿到第二条记录 如法炮制.*/</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="cm">/*优化器的思路: and连接的条件的地位都是一样的 谁先谁后判断都不要紧</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="cm">方案一: 以name字段为基础,先筛选出name=&#39;egon&#39;的记录,筛出来后再挨个比age和gender.</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="cm">方案二: 先筛选出age=&#39;18&#39;的记录,比name和gender</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="cm">方案二: 先筛选出gender=&#39;male&#39;的记录,比name和age</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="cm">要知道哪怕以name为基础命中了一颗索引树,但筛选出的记录也有可能很多.</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="cm">mysql会分析这些方案,看explain执行计划,看row行数等参数..来决定用哪个.</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="cm">*/</span><span class="w"></span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="c1">-- 举例 相亲,比如好看这属于稀有属性,我们会拿着这个稀有属性先缩小范围,然后再查</span><span class="w"></span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="c1">-- where 年龄=18 and 身高 = 170 and 长相 = 好看</span><span class="w"></span>
</code></pre></div>
<h6 id="or"><font color='purple' size=4>连续多个or</font><a class="headerlink" href="#or" title="Permanent link">&para;</a></h6>
<blockquote>
<p>对于连续多个or的条件 从左到右的顺序依次算 只要有一个条件成立此条记录就可以放行.</p>
<p>索引下推技术对此没招..</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;egon&#39;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">age</span><span class="o">=</span><span class="mi">18</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s1">&#39;male&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1">-- or锁定的是一个很大的范围.. 索引下推没招..</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1">-- 举例: 生产汽车找残次品 （错的思路- 先找轮胎坏的 再从轮胎坏的里面找方向盘坏的）这种思路是错的！！！</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="c1">-- where 轮胎坏了 or 方向盘坏了 or 刹车坏了;</span>
</code></pre></div>
<h4 id="_23"><font color='orange'>十四. 联合索引与最左前缀匹配原则</font><a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<blockquote>
<p>联合索引：指对表上的各个列(多个字段)合起来做一个索引</p>
<p>最做前缀匹配：从联合索引的最左边开始匹配,一定要带最左边的那个字段！<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 重复度低且占用空间较小的字段应该尽量往左放. </p>
<p>什么时候创建：条件中需要用到多个字段,并且多次查询中的多个字段都包含某一个字段.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 建立联合索引后就可以优化好几种搭配的sql语句..</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_id_name_gender</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c1">-- (1,egon1,18) &lt; (2,egon2,28) 从左到右比,1&lt;2 分胜负了,那后面的都不用比了</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="cm">/*</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="cm">查询条件中出现了(必须出现id),那么就命中了这个联合索引！！！:</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="cm">id name age ;   id name ; id age    ; id</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="cm">若仅仅只是出现了name,则没有命中.</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="cm">*/</span><span class="w"></span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="c1">-- 联合索引是一棵树</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="cm">/* ... and连接多个条件*/</span><span class="w"></span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="c1">-- 若给字段name、email、gender都加了索引</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;egon&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">email</span><span class="o">=</span><span class="mi">18</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s1">&#39;male&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="c1">-- 结合索引下推技术,上方的sql语句会很快</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="c1">-- 以后查询条件中都要带着这三name、email、gender 但也没必要为这三个字段都建立索引</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="c1">-- 建一个联合索引就行 结合联合索引应该把email字段放到最左端 </span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="c1">-- 查看表结构 MUL会出现在email字段那里</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="k">create</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="n">idx_name</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="n">email</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">gender</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="c1">-- where name=&#39;egon&#39; and gender=&#39;male&#39; and email=18; 这个最优字段email放哪无所谓..索引下推</span>
</code></pre></div>
<h4 id="_24"><font color='orange'>补充: 未命中索引</font><a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<h6 id="_25"><font color='purple' size=4>类型不一致</font><a class="headerlink" href="#_25" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">-- name字段是字符类型 而查询时赋值的是其它类型</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span><span class="w">     </span><span class="c1">-- 未命中</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span><span class="w">    </span><span class="c1">-- 未命中</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="c1">-- 若是主键索引 哪怕类型不一致也是很快的:id主键是整型 但这里写成字符类型也没关系</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;123&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 命中</span>
</code></pre></div>
<h6 id="_26"><font color='purple' size=4>使用不等于</font><a class="headerlink" href="#_26" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="ss">&quot;武沛齐&quot;</span><span class="p">;</span><span class="w">              </span><span class="c1">-- 未命中</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="ss">&quot;wupeiqi@live.com&quot;</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 未命中</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1">-- 特殊的主键：</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 命中</span>
</code></pre></div>
<h6 id="or_1"><font color='purple' size=4>or</font><a class="headerlink" href="#or_1" title="Permanent link">&para;</a></h6>
<p>当or条件中有未建立索引的列才失效</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1">-- id建了索引 password没有</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">password</span><span class="o">=</span><span class="ss">&quot;xx&quot;</span><span class="p">;</span><span class="w">          </span><span class="c1">-- 未命中</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;wupeiqi&quot;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">password</span><span class="o">=</span><span class="ss">&quot;xx&quot;</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 未命中</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1">-- 特别的： id = 10是一坨; password=&quot;xx&quot; and name=&quot;xx&quot;这是另一坨</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">password</span><span class="o">=</span><span class="ss">&quot;xx&quot;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="ss">&quot;xx&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 命中</span>
</code></pre></div>
<h6 id="_27"><font color='purple' size=4>排序</font><a class="headerlink" href="#_27" title="Permanent link">&para;</a></h6>
<p>当根据索引排序时候，选择的映射如果不是索引，则不走索引</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">-- 因为映射的是*全部 所以不会走索引 即使是根据索引name进行的排序</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">asc</span><span class="p">;</span><span class="w">     </span><span class="c1">-- 未命中</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">    </span><span class="c1">-- 未命中</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c1">-- 特别的主键：</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 命中</span>
</code></pre></div>
<h6 id="like"><font color='purple' size=4>like 模糊匹配</font><a class="headerlink" href="#like" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">&quot;%u-12-19999&quot;</span><span class="p">;</span><span class="w">    </span><span class="c1">-- 未命中</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">&quot;_u-12-19999&quot;</span><span class="p">;</span><span class="w">    </span><span class="c1">-- 未命中</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">&quot;wu-%-10&quot;</span><span class="p">;</span><span class="w">        </span><span class="c1">-- 未命中</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1">-- 特别的:通配符在前面中间不行 在最后可以</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">&quot;wu-1111-%&quot;</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 命中</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="ss">&quot;wuw-%&quot;</span><span class="p">;</span><span class="w">      </span><span class="c1">-- 命中</span>
</code></pre></div>
<h6 id="_28"><font color='purple' size=4>使用函数</font><a class="headerlink" href="#_28" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">reverse</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;wupeiqi&quot;</span><span class="p">;</span><span class="w">  </span><span class="c1">-- 未命中</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="err">特别的：</span><span class="w"></span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">big</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reverse</span><span class="p">(</span><span class="ss">&quot;wupeiqi&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">-- 命中</span>
</code></pre></div>
<h6 id="_29"><font color='purple' size=4>最左前缀原则</font><a class="headerlink" href="#_29" title="Permanent link">&para;</a></h6>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1">-- 如果联合索引为：(name,password)</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">password</span><span class="w">       </span><span class="c1">-- 命中</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="n">name</span><span class="w">                    </span><span class="c1">-- 命中</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span><span class="n">password</span><span class="w">                </span><span class="c1">-- 未命中</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">password</span><span class="w">        </span><span class="c1">-- 未命中</span>
</code></pre></div>
<p>PS: 慢查询,超过规定阀值未查询出来的sql语句都称为慢查询..</p>
<hr />





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../../0_%E5%9F%BA%E7%A1%80/other/05/" class="md-footer__link md-footer__link--prev" aria-label="上一页: other2" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              other2
            </div>
          </div>
        </a>
      
      
        
        <a href="../1_explain/" class="md-footer__link md-footer__link--next" aria-label="下一页: 执行计划" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              执行计划
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2023 from Dc_OnePiece
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.expand", "navigation.instant", "navigation.tracking", "search.suggest", "search.highlight", "search.share"], "search": "../../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.37e9125f.min.js"></script>
      
        <script src="../../../resources/js/extra.js"></script>
      
    
  </body>
</html>