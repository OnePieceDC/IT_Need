{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u8fd9\u662f\u9996\u9875!","title":"Home"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/","text":"Sometimes it\u2019s the very people who no one imagines anything of who do the things no one can imagine. -- By \u7535\u5f71:\u6a21\u4eff\u6e38\u620f \u5b66\u77e5\u8bc6\u7075\u9b42\u4e09\u95ee: \u662f\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\uff1f\u600e\u4e48\u7528\uff1f \u5f00\u59cb\u5b66\u4e60\u524d,\u4e00\u5b9a\u8981\u660e\u767d\u4e00\u70b9. \u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u8ba1\u7b97\u673a\u7f51\u7edc\u5f88\u91cd\u8981\u5f88\u91cd\u8981\uff01\u4f46\u662f\u73b0\u76ee\u524d\u6211\u4eec\u65f6\u95f4\u6709\u9650, \u5728\u6709\u9650\u7684\u65f6\u95f4\u91cc, \u53ea\u9700\u8981\u8ddf\u7740egon\u8001\u5e08\u5148\u7b80\u5355\u4e86\u89e3\u4e00\u4e9b\u5bf9\u63a5\u4e0b\u6765\u7f16\u7a0b\u6709\u5e2e\u52a9\u7684\u77e5\u8bc6\u70b9\u5373\u53ef..!!! \u4e0d\u8981\u5f53\u5b8c\u7f8e\u4e3b\u4e49\u8005\u3001\u4e0d\u8981\u5f53\u5b8c\u7f8e\u4e3b\u4e49\u8005\u3001\u4e0d\u8981\u5f53\u5b8c\u7f8e\u4e3b\u4e49\u8005. \u4e0d\u8981\u60f3\u7740\u5bf9\u8fd9\u4e09\u5927\u5757\u77e5\u8bc6\u9762\u9762\u4ff1\u5230!! \u7406\u8bba\u4e3a\u8f85,\u5b9e\u8df5\u7f16\u7a0b\u4e3a\u4e3b, \u4e0d\u7136\u5b66\u8d77\u6765\u4f1a\u5f88\u75db\u82e6, \u5207\u52ff\u81ea\u4e71\u9635\u811a, \u540e\u7eed\u518d\u6324\u65f6\u95f4\u91cd\u65b0\u4e00\u4e1d\u4e0d\u82df\u7684\u5c06\u8fd9\u4e09\u5927\u5757\u5168\u9762\u5b66\u4e60\u4e00\u904d!!! \u8ba1\u7b97\u673a \u00b6 \u7075\u9b42\u95ee\u7b54 \u00b6 \u7a0b\u5e8f\u662f\u4ec0\u4e48\uff1f \u7a0b\u5e8f \u5c31\u662f\u4e00\u5806\u4ee3\u7801\u6587\u4ef6. \u82e5\u7a0b\u5e8f\u53ea\u6709\u4e00\u4e2a\u6587\u4ef6,\u901a\u5e38\u5c06\u6b64\u6587\u4ef6\u79f0\u4e4b\u4e3a \u811a\u672c\u6587\u4ef6 . \u7a0b\u5e8f = \u6570\u636e\u7ed3\u6784 + \u7b97\u6cd5; \u7a0b\u5e8f\u4ece\u5c5e\u4e8e\u8f6f\u4ef6,\u8f6f\u4ef6\u662f\u4e00\u5806\u5b8c\u6210\u5404\u81ea\u7279\u5b9a\u529f\u80fd\u7684\u7a0b\u5e8f\u7684\u96c6\u5408. But\u5f88\u591a\u65f6\u5019,\u6211\u4eec\u5728\u9610\u8ff0\u8fc7\u7a0b\u4e2d\u8bf4\u8f6f\u4ef6\u5c31\u662f\u6307\u7a0b\u5e8f,\u8bf4\u7a0b\u5e8f\u5c31\u662f\u5728\u8bf4\u8f6f\u4ef6.. \u53ef\u7ed3\u5408\u5177\u4f53\u8bed\u5883\u5206\u6790,\u522b\u7ea0\u7ed3.. \u8ba1\u7b97\u673a\u7684\u5206\u7c7b \u8ba1\u7b97\u673a = \u786c\u4ef6 + \u8f6f\u4ef6 . \u8ba1\u7b97\u673a\u53ea\u6709\u786c\u4ef6\u7684\u8bdd,\u5c31\u76f8\u5f53\u4e8e\u662f\u4e00\u5806\u5e9f\u94c1. \u8ba1\u7b97\u673a\u7684\u8fd0\u884c\u5168\u90fd\u53d7\u5230\u8f6f\u4ef6(\u4e00\u5806\u5e94\u7528\u7a0b\u5e8f\u7684\u96c6\u5408)\u7684\u63a7\u5236. \u53ef\u4ee5\u8bf4 \u8f6f\u4ef6/\u7a0b\u5e8f\u662f\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u7075\u9b42 . \u8f6f\u4ef6\u5206\u4e3a\u4e24\u5927\u7c7b 1> \u64cd\u4f5c\u7cfb\u7edf : \u5c31\u662f\u4e00\u4e2a\u534f\u8c03\u3001\u7ba1\u7406\u3001\u63a7\u5236\u8ba1\u7b97\u673a\u786c\u4ef6\u8d44\u6e90\u4e0e\u5e94\u7528\u8f6f\u4ef6\u7684\u4e00\u4e2a\u63a7\u5236\u7a0b\u5e8f. 2> \u5e94\u7528\u8f6f\u4ef6 /\u5e94\u7528\u7a0b\u5e8f \u8ba1\u7b97\u673a\u7684\u4e09\u5c42\u7ed3\u6784 \u00b6 \u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u63a5\u53e3; \u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u786c\u4ef6; cpu\u662f\u786c\u4ef6\u4e2d\u7684\u6700\u9ad8\u6307\u6325\u5b98.. \u6362\u53e5\u8bdd\u8bf4, cpu\u662f\u786c\u4ef6\u7684\u8001\u5927, cpu\u7684\u8001\u5927\u662f\u64cd\u4f5c\u7cfb\u7edf..Hhh \u8ba1\u7b97\u673a\u4f53\u7cfb\u7684\u4e09\u5c42\u7ed3\u6784: \u6700\u4e0a\u9762 -- \u5e94\u7528\u7a0b\u5e8f \u652f\u4ed8\u5b9d \u5fae\u4fe1 \u6ef4\u6ef4... \u4e2d\u95f4\u5c42 -- \u64cd\u4f5c\u7cfb\u7edf Linux Windows Mac \u6700\u5e95\u5c42 -- \u786c\u4ef6 \u9996\u5148\u8981\u660e\u786e,\u5f00\u53d1\u7684\u5de5\u4f5c\u5c31\u662f\u4f7f\u7528\u89e3\u91ca\u5668\u89c4\u5b9a\u7684\u4e00\u7cfb\u5217\u547d\u4ee4\u5806\u780c\u6210\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f..\u7ed9\u7528\u6237\u4f7f\u7528. \u800c\u547d\u4ee4\u662f\u5e72\u5565\u7684\uff1feg: shell\u89e3\u91ca\u5668\u7684ls\u547d\u4ee4\u5c31\u662f\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u4e00\u4e9b\u63a5\u53e3\u5c01\u88c5\u540e\u7684\u4ea7\u7269 \u8bf4\u767d\u4e86, \u7528\u8f6f\u4ef6\u7684\u67d0\u4e00\u4e2a\u529f\u80fd, \u5c31\u662f\u6267\u884c\u4e86\u67d0\u4e2a\u7a0b\u5e8f(\u4e00\u5806\u4ee3\u7801/\u547d\u4ee4),\u8fdb\u800c\u53bb\u8c03\u7528OS\u5bf9\u5e94\u7684\u7cfb\u7edf\u63a5\u53e3,\u5b8c\u6210\u5bf9\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u64cd\u4f5c. \u6240\u4ee5\u8bf4, \u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u786c\u4ef6\u662f\u9700\u8981\u7ecf\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684 .\u6240\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u662f\u8fd0\u884c\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\u7684. \u8981\u7406\u89e3\u7684\u975e\u5e38\u5e95\u5c42\u624d\u80fd\u76f4\u63a5\u4f7f\u7528\u8ba1\u7b97\u673a\u786c\u4ef6. \u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8d1f\u8d23\u5e2e\u6211\u4eec\u7ba1\u7406\u786c\u4ef6,\u4f46\u5185\u6838\u63d0\u4f9b\u7684\u529f\u80fd\u8fd8\u662f\u6bd4\u8f83\u591a\u6bd4\u8f83\u7ec6\u7684. \u7cfb\u7edf\u63a5\u53e3\u5c06\u5185\u6838\u7684\u4e00\u4e9b\u529f\u80fd\u5c01\u88c5\u5c01\u88c5.(\u505a\u4e2a\u6bd4\u55bb:\u5185\u6838\u529f\u80fd\u5341\u51e0\u4e07\u4e2a,\u7cfb\u7edf\u63a5\u53e3\u5c01\u88c5\u5b8c\u53ef\u80fd\u5c31\u51e0\u4e07\u4e2a) \u6709\u4e86\u7cfb\u7edf\u63a5\u53e3\u540e\u4ecd\u7136\u4e0d\u591f\u7b80\u5355,\u4e8e\u662f\u4e4e\u6709\u4e86\u5e94\u7528\u7a0b\u5e8f. shell\u89e3\u91ca\u5668\u3001python\u89e3\u91ca\u5668\u7b49\u7b49.. \u800c\u6211\u4eec\u5b66python,\u5b66\u7684\u662fpython\u89e3\u91ca\u5668\u7684\u4e00\u7cfb\u5217\u547d\u4ee4(\u5373python\u89e3\u91ca\u5668\u7684\u4e00\u7cfb\u5217\u8fdb\u4e00\u6b65\u5c01\u88c5\u7684\u529f\u80fd) \u7528\u8fd9\u4e9bpython\u547d\u4ee4\u6211\u4eec\u53ef\u4ee5\u5f00\u53d1\u51fa\u66f4\u52a0\u4e0a\u5c42\u7684\u5e94\u7528\u7a0b\u5e8f(\u89e3\u91ca\u578b\u8bed\u8a00\u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f) \u6ce8\u610f\u54e6,\u6709\u4e9b\u5e94\u7528\u7a0b\u5e8f\u662f\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3\u7684. Ps: \u6709\u4e00\u4e9b\u8f6f\u4ef6(\u7f16\u8bd1\u578b\u8bed\u8a00 -- c\u8bed\u8a00 go\u8bed\u8a00\u5199\u7684..)\u662f\u4e0d\u901a\u8fc7\u89e3\u91ca\u5668\u7684,\u5b83 \u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3 .\u8fd9\u6837\u7684\u6548\u7387\u4f1a\u9ad8\u4e00\u4e9b. \u9879\u76ee\u5b8c\u6574\u5f00\u53d1\u6d41\u7a0b \u00b6 UE: \u4ea4\u4e92\u8bbe\u8ba1,\u8d1f\u8d23\u8f6f\u4ef6\u597d\u4e0d\u597d\u7528 UI: \u754c\u9762\u8bbe\u8ba1,\u8d1f\u8d23\u754c\u9762\u597d\u4e0d\u597d\u770b FE: \u524d\u7aef\u5f00\u53d1 RD: \u540e\u7aef\u5f00\u53d1 QA: \u6d4b\u8bd5 OP: \u8fd0\u7ef4 \u9700\u6c42\u5206\u6790\u9636\u6bb5 \u00b6 1> \u4ea7\u54c1\u7ecf\u7406 ( PM ) \u6839\u636e\u8c03\u7814\u63d0\u51fa\u4e00\u4e2a\u9700\u6c42, 2> \u516c\u53f8\u7684\u4ea7\u54c1\u90e8\u95e8\u5bf9\u9700\u6c42\u8fdb\u884c\u8bc4\u5ba1,\u5224\u65ad\u662f\u5426\u662f\u4e00\u4e2a\u4f2a\u9700\u6c42(\u4e0d\u5408\u7406\u7684\u9700\u6c42); 3> \u82e5\u9700\u6c42\u5408\u7406,PM\u4f1a\u53ec\u96c6\u9879\u76ee\u76f8\u5173\u6280\u672f\u4eba\u5458\u5f00\u9700\u6c42\u8ba8\u8bba\u4f1a. \u76f8\u5173\u6280\u672f\u4eba\u5458 [eg: UE'\u7528\u6237\u4f53\u9a8c' UI'\u754c\u9762\u8bbe\u8ba1' RD'\u7814\u53d1' QA'\u6d4b\u8bd5' \u7b49] 4> \u8fd9\u4e00\u8fc7\u7a0b\u4e2d,PM\u4f1a\u5148\u8bb2\u89e3\u4ea7\u54c1\u539f\u578b(\u4ea7\u54c1\u7684\u6837\u672c\u8349\u56fe)... \u8ba8\u8bba\u8fd9\u4e9b\u9700\u6c42\u7684\u53ef\u884c\u6027,\u80fd\u5426\u901a\u8fc7\u6280\u672f\u5b9e\u73b0 \u4e0d\u65ad\u5f00\u4f1a,\u76f4\u5230\u786e\u5b9a\u6b64\u9700\u6c42\u662f\u6ca1\u95ee\u9898\u7684. \u6ce8\u610f: \u82e5\u4f5c\u4e3a\u5f00\u53d1\u4eba\u5458,\u9700\u6c42\u4e0d\u660e\u786e,\u5343\u4e07\u522b\u8fdb\u5165\u5f00\u53d1\u73af\u8282; \u4e0d\u8981\u770b\u89c1\u67d0\u9700\u6c42\u5f88\u7b80\u5355,\u5c31\u9a6c\u4e0a\u8bf4\u80fd\u5b9e\u73b0,\u5f88\u591a\u5751\u7684 \u9879\u76ee\u5f00\u53d1\u9636\u6bb5 \u00b6 \u8fd9\u4e00\u9636\u6bb5\u5206\u4e3a \u8bbe\u8ba1\u9636\u6bb5 \u548c \u771f\u6b63\u5f00\u53d1\u9636\u6bb5 (\u524d\u540e\u7aef\u6839\u636e\u63a5\u53e3\u89c4\u8303\u5206\u5934\u5f00\u53d1). \u6700\u540e\u5408\u5e76. PM\u628a\u63a7\u8f6f\u4ef6\u7684\u6574\u4f53\u8d28\u91cf,UE\u8d1f\u8d23\u5c06PM\u8111\u4e2d\u5982\u4f55\u8ddf\u7528\u6237\u4ea4\u4e92\u7684\u62bd\u8c61\u60f3\u6cd5\u5177\u50cf\u5316, UI\u6839\u636eUE\u7684\u4ea4\u4e92\u8bbe\u8ba1\u7a3f\u8bbe\u8ba1\u9875\u9762. PM\u4f1a\u8ddfUE\u6ce1\u5728\u4e00\u8d77.-- \u753b\u51fa\u4ea4\u4e92\u539f\u578b\u56fe. \u4ea4\u4e92\u5f0f\u8bbe\u8ba1\u5e08 ( UE ) \u8d1f\u8d23\u4ea7\u54c1\u4e0e\u7528\u6237\u7684\u4ea4\u4e92,\u5982\u4f55\u4ea4\u4e92\u66f4\u7b26\u5408\u7528\u6237\u7684\u4e60\u60ef. \u8d1f\u8d23\u8f6f\u4ef6\u597d\u4e0d\u597d\u7528. UE\u6ce8\u91cd\u7684\u662f\u7528\u6237\u4f53\u9a8c.\u662f\u4e0d\u7ba1\u9875\u9762\u7684\u5177\u4f53\u5185\u5bb9\u7684 eg: \u6b64\u6309\u94ae\u5e94\u8be5\u5927\u81f4\u653e\u5728\u9875\u9762\u54ea\u4e2a\u4f4d\u7f6e,\u8df3\u8f6c\u5230\u54ea\u4e2a\u754c\u9762.\u51fa\u9519\u4e86\u5728\u54ea\u5f39\u51fa\u4fe1\u606f \u754c\u9762\u8bbe\u8ba1\u5e08 ( UI ) \u8d1f\u8d23\u8bbe\u8ba1\u9875\u9762\u5177\u4f53\u7684\u6837\u5b50.\u6bcf\u4e2a\u9875\u9762\u7684\u8fb9\u8fb9\u811a\u811a\u662f\u4ec0\u4e48\u6837\u5b50\u7684.\u672c\u8d28\u5c31\u662f\u753b\u753b. eg: \u80cc\u666f\u662f\u4ec0\u4e48, \u5b57\u4f53\u591a\u5927, \u8ddd\u79bb\u662f\u600e\u6837\u7684, \u5e03\u5c40\u662f\u600e\u6837\u7684 \u524d\u7aef\u5f00\u53d1 ( FE ) \u8d1f\u8d23\u6839\u636eUI\u7684\u8bbe\u8ba1\u56fe\u8fdb\u884c\u5ba2\u6237\u7aef\u7a0b\u5e8f (eg: web\u754c\u9762,\u624b\u673aapp,\u5fae\u4fe1\u5c0f\u7a0b\u5e8f) \u7684\u5f00\u53d1... \u540e\u7aef\u5f00\u53d1 ( RD ) \u8d1f\u8d23\u6536\u5230\u524d\u7aef\u7684\u8bf7\u6c42\u63d0\u4f9b\u6570\u636e\u63a5\u53e3 \u5728\u5565\u529f\u80fd\u90fd\u6ca1\u5199\u7684\u65f6\u5019,PE\u548cRD\u5c31\u4f1a\u5b9a\u597d\u63a5\u53e3\u89c4\u8303,\u8981\u5c01\u88c5\u54ea\u4e9b\u6570\u636e\u63a5\u53e3,\u6bcf\u4e2a\u63a5\u53e3\u53eb\u4ec0\u4e48\u540d,\u600e\u4e48\u7528. \u540e\u7aef\u5f00\u53d1\u7684\u9879\u76ee\u7ecf\u7406 project manager \u4e5f\u79f0\u4e3a PM... \u5b83\u8d1f\u8d23\u5c06\u9879\u76ee\u7684\u6280\u672f\u6846\u67b6\u642d\u5efa\u597d \u4e00\u4e24\u5468\u5c0f\u8fed\u4ee3,\u4e00\u4e24\u6708\u5927\u8fed\u4ee3 -_- \u6211\u771f\u7684\u4f1a\u8c22. \u9879\u76ee\u6d4b\u8bd5\u9636\u6bb5 \u00b6 1> \u5f00\u53d1\u4eba\u5458\u4f1a\u5148\u8fdb\u884c code review(\u4ee3\u7801\u8bc4\u5ba1 \u91cd\u65b0\u8fc7\u4e00\u904d\u4ee3\u7801) 2> \u6d4b\u8bd5\u4eba\u5458 ( QA ) \u8d1f\u8d23\u8bbe\u8ba1\u597d\u6d4b\u8bd5\u7528\u4f8b\u7b49.\u5f00\u53d1\u597d\u7684\u8f6f\u4ef6\u6216\u591a\u6216\u5c11\u6709\u70b9bug.. \u6d4b\u8bd5\u73af\u5883 -- \u51c6\u751f\u4ea7\u73af\u5883(\u4e0e\u7ebf\u4e0a\u73af\u5883\u5c3d\u53ef\u80fd\u4e00\u6bd4\u4e00 QA\u4e5f\u4f1a\u5728\u8fd9\u91cc\u9762\u6d4b\u8bd5) -- \u7ebf\u4e0a/\u751f\u4ea7\u73af\u5883(\u4e92\u8054\u7f51\u7528\u6237\u4f7f\u7528\u7684\u73af\u5883). \u9879\u76ee\u4e0a\u7ebf\u9636\u6bb5 \u00b6 \u73af\u5883 \u4f5c\u7528 dev \u524d\u540e\u7aef\u8054\u8c03\u7684\u73af\u5883 (\u6570\u636e\u81ea\u5df1\u9020,\u4e71\u4e03\u516b\u7cdf\u7684) test \u4ea4\u7ed9\u6d4b\u8bd5\u6d4b\u8bd5\u7684\u73af\u5883 (\u6570\u636e\u81ea\u5df1\u9020,\u4e71\u4e03\u516b\u7cdf\u7684) release \u9884\u53d1\u5e03\u73af\u5883, \u6570\u636e\u4ece\u771f\u5b9e\u73af\u5883\u62c9\u8fc7\u6765\u7684.\u4e00\u822c\u4e0d\u4f1a\u6539 master \u6b63\u5f0f\u73af\u5883/\u4e3b\u5206\u652f Ps: \u4e00\u65e6\u8fdb\u5165test\u73af\u5883,\u5f00\u53d1\u5c31\u4f1a\u6765\u65b0\u9879\u76ee\u4e86. \u5c31\u9879\u76ee\u6d4b\u8bd5\u6d4b\u51fa\u95ee\u9898,\u8fd8\u8981\u5360\u7528\u5f00\u53d1\u65b0\u9879\u76ee\u7684\u65f6\u95f4. (\u3064\u0414`)\u30ce \u8fd0\u7ef4\u4eba\u5458\u7f16\u5199\u4e0a\u7ebf\u65b9\u6848, \u5728\u51c6\u751f\u4ea7\u73af\u5883staging\u8fdb\u884c\u4e00\u904d\u6d4b\u8bd5.\u6ca1\u95ee\u9898\u540e\u90e8\u7f72\u4e0a\u7ebf. \u8fd0\u7ef4\u4eba\u5458 ( OP ) \u8d1f\u8d23\u8bbe\u8ba1\u597d\u6574\u5957\u7cfb\u7edf\u7684\u67b6\u6784. \u73af\u5883\u3001\u7f51\u7edc\u5b89\u5168\u3001\u8ba1\u7b97\u673a\u786c\u4ef6\u7b49\u90fd\u5f52OP\u7ba1. \u6bd4\u5982: \u8f6f\u4ef6\u8981\u4e0a\u7ebf\u65f6,\u8ba1\u7b97\u673a\u786c\u4ef6\u9700\u8981\u4ec0\u4e48\u914d\u7f6e,\u7528\u4ec0\u4e48\u64cd\u4f5c\u7cfb\u7edf.\u662f\u5426\u9700\u8981\u96c6\u7fa4\u53bb\u627f\u8f7d\u8fd9\u4e2a\u8f6f\u4ef6 \u6b64\u7248\u672c\u51fa\u73b0\u95ee\u9898\u4e86\u7acb\u523b\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\u7b49.(\u4e0a\u7ebf\u65f6\u6240\u6709\u4eba\u90fd\u5728 \u5c0f\u95ee\u9898\u9a6c\u4e0a\u6539 \u5927\u95ee\u9898\u8d76\u7d27\u56de\u6eda) \u7ec6\u5206\u7684\u8bdd,\u8fd0\u7ef4\u5206\u4e3a,devops\u81ea\u52a8\u5316\u8fd0\u7ef4;dba\u6570\u636e\u5e93\u7ba1\u7406 \u7b49\u7b49 . \u8fd0\u7ef4\u804c\u8d23: 1> \u753b\u67b6\u6784\u56fe 2> \u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f7*24*365\u5c0f\u65f6\u4e0d\u95f4\u65ad\u7684\u8fd0\u884c \u7a33\u5b9a\u6027 \u505a\u597d\u76d1\u63a7 \u53ef\u9760\u6027 \u6570\u636e\u5907\u4efd \u89e3\u51b3\u5355\u70b9\u6545\u969c \u6027\u80fd \u4f18\u5316\u8c03\u4f18,\u6269\u5c55, \u6240\u6709\u7684\u4f18\u5316\u90fd\u4f1a\u505c\u7559\u5230IO\u6027\u80fd\u4e0a OP\u5728\u670d\u52a1\u5668\u4e0a\u4e3b\u8981\u90e8\u7f72\u7684\u662f\u670d\u52a1\u7aef,\u7528\u6237\u5728\u5e94\u7528\u5546\u5e97\u4e0b\u8f7d\u7684\u662f\u5ba2\u6237\u7aef.. \u8fd0\u7ef4\u8981\u6709\u96c6\u7fa4\u7684\u6982\u5ff5(\u7535\u6e90\u3001\u98ce\u6247\u3001\u786c\u76d8\u7b49),\u96c6\u7fa4\u6027\u80fd\u66f4\u9ad8,\u4e5f\u80fd\u9632\u6b62\u5355\u70b9\u6545\u969c..\u5f53\u51fa\u73b0\u95ee\u9898\u540e,\u53ca\u65f6\u89e3\u51b3\u95ee\u9898 \u8981\u77e5\u9053\u54e6,\u4e0d\u662f\u4e00\u4e0a\u6765\u5c31\u7528\u96c6\u7fa4,\u6162\u6162\u6839\u636e\u9700\u6c42\u6539\u53d8\u7684 \u540e\u7eed\u7684\u64cd\u4f5c\u7cfb\u7edf\u90e8\u5206\u66f4\u591a\u7684\u4f1a\u4ece\u5e94\u7528\u89d2\u5ea6\u9610\u8ff0..","title":"\u524d\u594f(\u4ecb\u7ecd)"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_1","text":"","title":"\u8ba1\u7b97\u673a"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_2","text":"\u7a0b\u5e8f\u662f\u4ec0\u4e48\uff1f \u7a0b\u5e8f \u5c31\u662f\u4e00\u5806\u4ee3\u7801\u6587\u4ef6. \u82e5\u7a0b\u5e8f\u53ea\u6709\u4e00\u4e2a\u6587\u4ef6,\u901a\u5e38\u5c06\u6b64\u6587\u4ef6\u79f0\u4e4b\u4e3a \u811a\u672c\u6587\u4ef6 . \u7a0b\u5e8f = \u6570\u636e\u7ed3\u6784 + \u7b97\u6cd5; \u7a0b\u5e8f\u4ece\u5c5e\u4e8e\u8f6f\u4ef6,\u8f6f\u4ef6\u662f\u4e00\u5806\u5b8c\u6210\u5404\u81ea\u7279\u5b9a\u529f\u80fd\u7684\u7a0b\u5e8f\u7684\u96c6\u5408. But\u5f88\u591a\u65f6\u5019,\u6211\u4eec\u5728\u9610\u8ff0\u8fc7\u7a0b\u4e2d\u8bf4\u8f6f\u4ef6\u5c31\u662f\u6307\u7a0b\u5e8f,\u8bf4\u7a0b\u5e8f\u5c31\u662f\u5728\u8bf4\u8f6f\u4ef6.. \u53ef\u7ed3\u5408\u5177\u4f53\u8bed\u5883\u5206\u6790,\u522b\u7ea0\u7ed3.. \u8ba1\u7b97\u673a\u7684\u5206\u7c7b \u8ba1\u7b97\u673a = \u786c\u4ef6 + \u8f6f\u4ef6 . \u8ba1\u7b97\u673a\u53ea\u6709\u786c\u4ef6\u7684\u8bdd,\u5c31\u76f8\u5f53\u4e8e\u662f\u4e00\u5806\u5e9f\u94c1. \u8ba1\u7b97\u673a\u7684\u8fd0\u884c\u5168\u90fd\u53d7\u5230\u8f6f\u4ef6(\u4e00\u5806\u5e94\u7528\u7a0b\u5e8f\u7684\u96c6\u5408)\u7684\u63a7\u5236. \u53ef\u4ee5\u8bf4 \u8f6f\u4ef6/\u7a0b\u5e8f\u662f\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u7075\u9b42 . \u8f6f\u4ef6\u5206\u4e3a\u4e24\u5927\u7c7b 1> \u64cd\u4f5c\u7cfb\u7edf : \u5c31\u662f\u4e00\u4e2a\u534f\u8c03\u3001\u7ba1\u7406\u3001\u63a7\u5236\u8ba1\u7b97\u673a\u786c\u4ef6\u8d44\u6e90\u4e0e\u5e94\u7528\u8f6f\u4ef6\u7684\u4e00\u4e2a\u63a7\u5236\u7a0b\u5e8f. 2> \u5e94\u7528\u8f6f\u4ef6 /\u5e94\u7528\u7a0b\u5e8f","title":"\u7075\u9b42\u95ee\u7b54"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_3","text":"\u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u63a5\u53e3; \u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u786c\u4ef6; cpu\u662f\u786c\u4ef6\u4e2d\u7684\u6700\u9ad8\u6307\u6325\u5b98.. \u6362\u53e5\u8bdd\u8bf4, cpu\u662f\u786c\u4ef6\u7684\u8001\u5927, cpu\u7684\u8001\u5927\u662f\u64cd\u4f5c\u7cfb\u7edf..Hhh \u8ba1\u7b97\u673a\u4f53\u7cfb\u7684\u4e09\u5c42\u7ed3\u6784: \u6700\u4e0a\u9762 -- \u5e94\u7528\u7a0b\u5e8f \u652f\u4ed8\u5b9d \u5fae\u4fe1 \u6ef4\u6ef4... \u4e2d\u95f4\u5c42 -- \u64cd\u4f5c\u7cfb\u7edf Linux Windows Mac \u6700\u5e95\u5c42 -- \u786c\u4ef6 \u9996\u5148\u8981\u660e\u786e,\u5f00\u53d1\u7684\u5de5\u4f5c\u5c31\u662f\u4f7f\u7528\u89e3\u91ca\u5668\u89c4\u5b9a\u7684\u4e00\u7cfb\u5217\u547d\u4ee4\u5806\u780c\u6210\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f..\u7ed9\u7528\u6237\u4f7f\u7528. \u800c\u547d\u4ee4\u662f\u5e72\u5565\u7684\uff1feg: shell\u89e3\u91ca\u5668\u7684ls\u547d\u4ee4\u5c31\u662f\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u4e00\u4e9b\u63a5\u53e3\u5c01\u88c5\u540e\u7684\u4ea7\u7269 \u8bf4\u767d\u4e86, \u7528\u8f6f\u4ef6\u7684\u67d0\u4e00\u4e2a\u529f\u80fd, \u5c31\u662f\u6267\u884c\u4e86\u67d0\u4e2a\u7a0b\u5e8f(\u4e00\u5806\u4ee3\u7801/\u547d\u4ee4),\u8fdb\u800c\u53bb\u8c03\u7528OS\u5bf9\u5e94\u7684\u7cfb\u7edf\u63a5\u53e3,\u5b8c\u6210\u5bf9\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u64cd\u4f5c. \u6240\u4ee5\u8bf4, \u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u786c\u4ef6\u662f\u9700\u8981\u7ecf\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684 .\u6240\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u662f\u8fd0\u884c\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\u7684. \u8981\u7406\u89e3\u7684\u975e\u5e38\u5e95\u5c42\u624d\u80fd\u76f4\u63a5\u4f7f\u7528\u8ba1\u7b97\u673a\u786c\u4ef6. \u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8d1f\u8d23\u5e2e\u6211\u4eec\u7ba1\u7406\u786c\u4ef6,\u4f46\u5185\u6838\u63d0\u4f9b\u7684\u529f\u80fd\u8fd8\u662f\u6bd4\u8f83\u591a\u6bd4\u8f83\u7ec6\u7684. \u7cfb\u7edf\u63a5\u53e3\u5c06\u5185\u6838\u7684\u4e00\u4e9b\u529f\u80fd\u5c01\u88c5\u5c01\u88c5.(\u505a\u4e2a\u6bd4\u55bb:\u5185\u6838\u529f\u80fd\u5341\u51e0\u4e07\u4e2a,\u7cfb\u7edf\u63a5\u53e3\u5c01\u88c5\u5b8c\u53ef\u80fd\u5c31\u51e0\u4e07\u4e2a) \u6709\u4e86\u7cfb\u7edf\u63a5\u53e3\u540e\u4ecd\u7136\u4e0d\u591f\u7b80\u5355,\u4e8e\u662f\u4e4e\u6709\u4e86\u5e94\u7528\u7a0b\u5e8f. shell\u89e3\u91ca\u5668\u3001python\u89e3\u91ca\u5668\u7b49\u7b49.. \u800c\u6211\u4eec\u5b66python,\u5b66\u7684\u662fpython\u89e3\u91ca\u5668\u7684\u4e00\u7cfb\u5217\u547d\u4ee4(\u5373python\u89e3\u91ca\u5668\u7684\u4e00\u7cfb\u5217\u8fdb\u4e00\u6b65\u5c01\u88c5\u7684\u529f\u80fd) \u7528\u8fd9\u4e9bpython\u547d\u4ee4\u6211\u4eec\u53ef\u4ee5\u5f00\u53d1\u51fa\u66f4\u52a0\u4e0a\u5c42\u7684\u5e94\u7528\u7a0b\u5e8f(\u89e3\u91ca\u578b\u8bed\u8a00\u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f) \u6ce8\u610f\u54e6,\u6709\u4e9b\u5e94\u7528\u7a0b\u5e8f\u662f\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3\u7684. Ps: \u6709\u4e00\u4e9b\u8f6f\u4ef6(\u7f16\u8bd1\u578b\u8bed\u8a00 -- c\u8bed\u8a00 go\u8bed\u8a00\u5199\u7684..)\u662f\u4e0d\u901a\u8fc7\u89e3\u91ca\u5668\u7684,\u5b83 \u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3 .\u8fd9\u6837\u7684\u6548\u7387\u4f1a\u9ad8\u4e00\u4e9b.","title":"\u8ba1\u7b97\u673a\u7684\u4e09\u5c42\u7ed3\u6784"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_4","text":"UE: \u4ea4\u4e92\u8bbe\u8ba1,\u8d1f\u8d23\u8f6f\u4ef6\u597d\u4e0d\u597d\u7528 UI: \u754c\u9762\u8bbe\u8ba1,\u8d1f\u8d23\u754c\u9762\u597d\u4e0d\u597d\u770b FE: \u524d\u7aef\u5f00\u53d1 RD: \u540e\u7aef\u5f00\u53d1 QA: \u6d4b\u8bd5 OP: \u8fd0\u7ef4","title":"\u9879\u76ee\u5b8c\u6574\u5f00\u53d1\u6d41\u7a0b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_5","text":"1> \u4ea7\u54c1\u7ecf\u7406 ( PM ) \u6839\u636e\u8c03\u7814\u63d0\u51fa\u4e00\u4e2a\u9700\u6c42, 2> \u516c\u53f8\u7684\u4ea7\u54c1\u90e8\u95e8\u5bf9\u9700\u6c42\u8fdb\u884c\u8bc4\u5ba1,\u5224\u65ad\u662f\u5426\u662f\u4e00\u4e2a\u4f2a\u9700\u6c42(\u4e0d\u5408\u7406\u7684\u9700\u6c42); 3> \u82e5\u9700\u6c42\u5408\u7406,PM\u4f1a\u53ec\u96c6\u9879\u76ee\u76f8\u5173\u6280\u672f\u4eba\u5458\u5f00\u9700\u6c42\u8ba8\u8bba\u4f1a. \u76f8\u5173\u6280\u672f\u4eba\u5458 [eg: UE'\u7528\u6237\u4f53\u9a8c' UI'\u754c\u9762\u8bbe\u8ba1' RD'\u7814\u53d1' QA'\u6d4b\u8bd5' \u7b49] 4> \u8fd9\u4e00\u8fc7\u7a0b\u4e2d,PM\u4f1a\u5148\u8bb2\u89e3\u4ea7\u54c1\u539f\u578b(\u4ea7\u54c1\u7684\u6837\u672c\u8349\u56fe)... \u8ba8\u8bba\u8fd9\u4e9b\u9700\u6c42\u7684\u53ef\u884c\u6027,\u80fd\u5426\u901a\u8fc7\u6280\u672f\u5b9e\u73b0 \u4e0d\u65ad\u5f00\u4f1a,\u76f4\u5230\u786e\u5b9a\u6b64\u9700\u6c42\u662f\u6ca1\u95ee\u9898\u7684. \u6ce8\u610f: \u82e5\u4f5c\u4e3a\u5f00\u53d1\u4eba\u5458,\u9700\u6c42\u4e0d\u660e\u786e,\u5343\u4e07\u522b\u8fdb\u5165\u5f00\u53d1\u73af\u8282; \u4e0d\u8981\u770b\u89c1\u67d0\u9700\u6c42\u5f88\u7b80\u5355,\u5c31\u9a6c\u4e0a\u8bf4\u80fd\u5b9e\u73b0,\u5f88\u591a\u5751\u7684","title":"\u9700\u6c42\u5206\u6790\u9636\u6bb5"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_6","text":"\u8fd9\u4e00\u9636\u6bb5\u5206\u4e3a \u8bbe\u8ba1\u9636\u6bb5 \u548c \u771f\u6b63\u5f00\u53d1\u9636\u6bb5 (\u524d\u540e\u7aef\u6839\u636e\u63a5\u53e3\u89c4\u8303\u5206\u5934\u5f00\u53d1). \u6700\u540e\u5408\u5e76. PM\u628a\u63a7\u8f6f\u4ef6\u7684\u6574\u4f53\u8d28\u91cf,UE\u8d1f\u8d23\u5c06PM\u8111\u4e2d\u5982\u4f55\u8ddf\u7528\u6237\u4ea4\u4e92\u7684\u62bd\u8c61\u60f3\u6cd5\u5177\u50cf\u5316, UI\u6839\u636eUE\u7684\u4ea4\u4e92\u8bbe\u8ba1\u7a3f\u8bbe\u8ba1\u9875\u9762. PM\u4f1a\u8ddfUE\u6ce1\u5728\u4e00\u8d77.-- \u753b\u51fa\u4ea4\u4e92\u539f\u578b\u56fe. \u4ea4\u4e92\u5f0f\u8bbe\u8ba1\u5e08 ( UE ) \u8d1f\u8d23\u4ea7\u54c1\u4e0e\u7528\u6237\u7684\u4ea4\u4e92,\u5982\u4f55\u4ea4\u4e92\u66f4\u7b26\u5408\u7528\u6237\u7684\u4e60\u60ef. \u8d1f\u8d23\u8f6f\u4ef6\u597d\u4e0d\u597d\u7528. UE\u6ce8\u91cd\u7684\u662f\u7528\u6237\u4f53\u9a8c.\u662f\u4e0d\u7ba1\u9875\u9762\u7684\u5177\u4f53\u5185\u5bb9\u7684 eg: \u6b64\u6309\u94ae\u5e94\u8be5\u5927\u81f4\u653e\u5728\u9875\u9762\u54ea\u4e2a\u4f4d\u7f6e,\u8df3\u8f6c\u5230\u54ea\u4e2a\u754c\u9762.\u51fa\u9519\u4e86\u5728\u54ea\u5f39\u51fa\u4fe1\u606f \u754c\u9762\u8bbe\u8ba1\u5e08 ( UI ) \u8d1f\u8d23\u8bbe\u8ba1\u9875\u9762\u5177\u4f53\u7684\u6837\u5b50.\u6bcf\u4e2a\u9875\u9762\u7684\u8fb9\u8fb9\u811a\u811a\u662f\u4ec0\u4e48\u6837\u5b50\u7684.\u672c\u8d28\u5c31\u662f\u753b\u753b. eg: \u80cc\u666f\u662f\u4ec0\u4e48, \u5b57\u4f53\u591a\u5927, \u8ddd\u79bb\u662f\u600e\u6837\u7684, \u5e03\u5c40\u662f\u600e\u6837\u7684 \u524d\u7aef\u5f00\u53d1 ( FE ) \u8d1f\u8d23\u6839\u636eUI\u7684\u8bbe\u8ba1\u56fe\u8fdb\u884c\u5ba2\u6237\u7aef\u7a0b\u5e8f (eg: web\u754c\u9762,\u624b\u673aapp,\u5fae\u4fe1\u5c0f\u7a0b\u5e8f) \u7684\u5f00\u53d1... \u540e\u7aef\u5f00\u53d1 ( RD ) \u8d1f\u8d23\u6536\u5230\u524d\u7aef\u7684\u8bf7\u6c42\u63d0\u4f9b\u6570\u636e\u63a5\u53e3 \u5728\u5565\u529f\u80fd\u90fd\u6ca1\u5199\u7684\u65f6\u5019,PE\u548cRD\u5c31\u4f1a\u5b9a\u597d\u63a5\u53e3\u89c4\u8303,\u8981\u5c01\u88c5\u54ea\u4e9b\u6570\u636e\u63a5\u53e3,\u6bcf\u4e2a\u63a5\u53e3\u53eb\u4ec0\u4e48\u540d,\u600e\u4e48\u7528. \u540e\u7aef\u5f00\u53d1\u7684\u9879\u76ee\u7ecf\u7406 project manager \u4e5f\u79f0\u4e3a PM... \u5b83\u8d1f\u8d23\u5c06\u9879\u76ee\u7684\u6280\u672f\u6846\u67b6\u642d\u5efa\u597d \u4e00\u4e24\u5468\u5c0f\u8fed\u4ee3,\u4e00\u4e24\u6708\u5927\u8fed\u4ee3 -_- \u6211\u771f\u7684\u4f1a\u8c22.","title":"\u9879\u76ee\u5f00\u53d1\u9636\u6bb5"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_7","text":"1> \u5f00\u53d1\u4eba\u5458\u4f1a\u5148\u8fdb\u884c code review(\u4ee3\u7801\u8bc4\u5ba1 \u91cd\u65b0\u8fc7\u4e00\u904d\u4ee3\u7801) 2> \u6d4b\u8bd5\u4eba\u5458 ( QA ) \u8d1f\u8d23\u8bbe\u8ba1\u597d\u6d4b\u8bd5\u7528\u4f8b\u7b49.\u5f00\u53d1\u597d\u7684\u8f6f\u4ef6\u6216\u591a\u6216\u5c11\u6709\u70b9bug.. \u6d4b\u8bd5\u73af\u5883 -- \u51c6\u751f\u4ea7\u73af\u5883(\u4e0e\u7ebf\u4e0a\u73af\u5883\u5c3d\u53ef\u80fd\u4e00\u6bd4\u4e00 QA\u4e5f\u4f1a\u5728\u8fd9\u91cc\u9762\u6d4b\u8bd5) -- \u7ebf\u4e0a/\u751f\u4ea7\u73af\u5883(\u4e92\u8054\u7f51\u7528\u6237\u4f7f\u7528\u7684\u73af\u5883).","title":"\u9879\u76ee\u6d4b\u8bd5\u9636\u6bb5"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/0_%E5%89%8D%E5%A5%8F%28%E4%BB%8B%E7%BB%8D%29/#_8","text":"\u73af\u5883 \u4f5c\u7528 dev \u524d\u540e\u7aef\u8054\u8c03\u7684\u73af\u5883 (\u6570\u636e\u81ea\u5df1\u9020,\u4e71\u4e03\u516b\u7cdf\u7684) test \u4ea4\u7ed9\u6d4b\u8bd5\u6d4b\u8bd5\u7684\u73af\u5883 (\u6570\u636e\u81ea\u5df1\u9020,\u4e71\u4e03\u516b\u7cdf\u7684) release \u9884\u53d1\u5e03\u73af\u5883, \u6570\u636e\u4ece\u771f\u5b9e\u73af\u5883\u62c9\u8fc7\u6765\u7684.\u4e00\u822c\u4e0d\u4f1a\u6539 master \u6b63\u5f0f\u73af\u5883/\u4e3b\u5206\u652f Ps: \u4e00\u65e6\u8fdb\u5165test\u73af\u5883,\u5f00\u53d1\u5c31\u4f1a\u6765\u65b0\u9879\u76ee\u4e86. \u5c31\u9879\u76ee\u6d4b\u8bd5\u6d4b\u51fa\u95ee\u9898,\u8fd8\u8981\u5360\u7528\u5f00\u53d1\u65b0\u9879\u76ee\u7684\u65f6\u95f4. (\u3064\u0414`)\u30ce \u8fd0\u7ef4\u4eba\u5458\u7f16\u5199\u4e0a\u7ebf\u65b9\u6848, \u5728\u51c6\u751f\u4ea7\u73af\u5883staging\u8fdb\u884c\u4e00\u904d\u6d4b\u8bd5.\u6ca1\u95ee\u9898\u540e\u90e8\u7f72\u4e0a\u7ebf. \u8fd0\u7ef4\u4eba\u5458 ( OP ) \u8d1f\u8d23\u8bbe\u8ba1\u597d\u6574\u5957\u7cfb\u7edf\u7684\u67b6\u6784. \u73af\u5883\u3001\u7f51\u7edc\u5b89\u5168\u3001\u8ba1\u7b97\u673a\u786c\u4ef6\u7b49\u90fd\u5f52OP\u7ba1. \u6bd4\u5982: \u8f6f\u4ef6\u8981\u4e0a\u7ebf\u65f6,\u8ba1\u7b97\u673a\u786c\u4ef6\u9700\u8981\u4ec0\u4e48\u914d\u7f6e,\u7528\u4ec0\u4e48\u64cd\u4f5c\u7cfb\u7edf.\u662f\u5426\u9700\u8981\u96c6\u7fa4\u53bb\u627f\u8f7d\u8fd9\u4e2a\u8f6f\u4ef6 \u6b64\u7248\u672c\u51fa\u73b0\u95ee\u9898\u4e86\u7acb\u523b\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\u7b49.(\u4e0a\u7ebf\u65f6\u6240\u6709\u4eba\u90fd\u5728 \u5c0f\u95ee\u9898\u9a6c\u4e0a\u6539 \u5927\u95ee\u9898\u8d76\u7d27\u56de\u6eda) \u7ec6\u5206\u7684\u8bdd,\u8fd0\u7ef4\u5206\u4e3a,devops\u81ea\u52a8\u5316\u8fd0\u7ef4;dba\u6570\u636e\u5e93\u7ba1\u7406 \u7b49\u7b49 . \u8fd0\u7ef4\u804c\u8d23: 1> \u753b\u67b6\u6784\u56fe 2> \u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f7*24*365\u5c0f\u65f6\u4e0d\u95f4\u65ad\u7684\u8fd0\u884c \u7a33\u5b9a\u6027 \u505a\u597d\u76d1\u63a7 \u53ef\u9760\u6027 \u6570\u636e\u5907\u4efd \u89e3\u51b3\u5355\u70b9\u6545\u969c \u6027\u80fd \u4f18\u5316\u8c03\u4f18,\u6269\u5c55, \u6240\u6709\u7684\u4f18\u5316\u90fd\u4f1a\u505c\u7559\u5230IO\u6027\u80fd\u4e0a OP\u5728\u670d\u52a1\u5668\u4e0a\u4e3b\u8981\u90e8\u7f72\u7684\u662f\u670d\u52a1\u7aef,\u7528\u6237\u5728\u5e94\u7528\u5546\u5e97\u4e0b\u8f7d\u7684\u662f\u5ba2\u6237\u7aef.. \u8fd0\u7ef4\u8981\u6709\u96c6\u7fa4\u7684\u6982\u5ff5(\u7535\u6e90\u3001\u98ce\u6247\u3001\u786c\u76d8\u7b49),\u96c6\u7fa4\u6027\u80fd\u66f4\u9ad8,\u4e5f\u80fd\u9632\u6b62\u5355\u70b9\u6545\u969c..\u5f53\u51fa\u73b0\u95ee\u9898\u540e,\u53ca\u65f6\u89e3\u51b3\u95ee\u9898 \u8981\u77e5\u9053\u54e6,\u4e0d\u662f\u4e00\u4e0a\u6765\u5c31\u7528\u96c6\u7fa4,\u6162\u6162\u6839\u636e\u9700\u6c42\u6539\u53d8\u7684 \u540e\u7eed\u7684\u64cd\u4f5c\u7cfb\u7edf\u90e8\u5206\u66f4\u591a\u7684\u4f1a\u4ece\u5e94\u7528\u89d2\u5ea6\u9610\u8ff0..","title":"\u9879\u76ee\u4e0a\u7ebf\u9636\u6bb5"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/","text":"\u670d\u52a1\u5668 \u00b6 \u4e2a\u4eba\u7535\u8111\u8ddf\u670d\u52a1\u5668\u90fd\u662f\u8ba1\u7b97\u673a,\u53ea\u4e0d\u8fc7\u524d\u8005\u662f\u670d\u52a1\u4e8e\u4e00\u4e2a\u4eba,\u540e\u8005\u662f\u670d\u52a1\u4e8e\u591a\u4e2a\u4eba.. \u670d\u52a1\u5668\u7684\u5206\u7c7b \u00b6 1> \u6309\u7167\u5c3a\u5bf8 1U=4.45cm ( U\u8868\u793a\u670d\u52a1\u5668\u7684\u539a\u5ea6 ) 2> \u6309\u7167\u5916\u5f62 \u673a\u67b6\u5f0f\u670d\u52a1\u5668\u662f\u653e\u5728\u673a\u67b6\u4e0a\u7684; \u5200\u67b6\u670d\u52a1\u5668 ( \u8d35 \u901a\u5e38\u7528\u4e8e\u96c6\u7fa4\u5316\u4f5c\u4e1a,\u4fbf\u4e8e\u6269\u5c55 ) \u5854\u5f0f\u670d\u52a1\u5668 3> \u6309\u7167\u54c1\u724c \u6234\u5c14 \u60e0\u666e IBM \u670d\u52a1\u5668\u6700\u597d\u4e00\u76f4\u8fd0\u884c\u7740\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1,\u4e0d\u8981\u5b95\u673a; \u4f46\u5bf9\u786c\u4ef6\u7684\u635f\u8017\u5f88\u5927,\u8981\u505a\u597d\u5bf9\u786c\u4ef6\u7684\u76d1\u63a7,\u9632\u8303\u4e8e\u672a\u7136. \u6709\u4e9b\u670d\u52a1\u5668\u8fd8\u6709IDRAC\u7ba1\u7406\u53e3,\u7528\u4e8e\u914d\u5236\u8fdc\u7a0b\u7ba1\u7406\u5361,\u53ef\u4ee5\u8fdc\u7a0b\u5f00\u5173\u673a\u670d\u52a1\u5668.. Q: \u670d\u52a1\u5668\u7684\u5b89\u7f6e? A: \u673a\u623f\u4f1a\u63d0\u4f9b\u663e\u793a\u5668\u65b9\u4fbf\u673a\u67b6\u5f0f\u670d\u52a1\u5668\u7684\u4e0a\u67b6( \u521d\u6b21\u4f1a\u7ed9\u670d\u52a1\u5668\u5b89\u88c5OS,\u914d\u7f51\u7edc\u7b49.. ); \u518d\u56de\u5230\u516c\u53f8,\u901a\u8fc7xshll\u8fdc\u7a0b\u8fde\u63a5. \u4f46\u73b0\u5728\u5f88\u591a\u516c\u53f8\u90fd\u4e0d\u4e70\u670d\u52a1\u5668,\u7528\u4e91\u670d\u52a1\u5668..(\u4e91\u4e3b\u673a\u5382\u5546 -- \u963f\u91cc\u4e91 \u817e\u8baf\u4e91 \u9752\u4e91 ucloud) Q: \u5982\u4f55\u4fdd\u8bc1\u670d\u52a1\u5668\u4e0d\u65ad\u7535? A: \u53cc\u7535\u6e90 + ups + \u53d1\u7535\u673a. ups\u76f8\u5f53\u4e8e\u4e00\u5757\u84c4\u7535\u6c60.. \u5e02\u7535\u63a5\u5230ups\u4e0a,ups\u518d\u7ed9\u670d\u52a1\u5668\u4f9b\u7535,\u4e00\u65e6\u65ad\u7535,ups\u8fd8\u53ef\u4ee5\u4f9b\u7535\u4e00\u6bb5\u65f6\u95f4.. \u53bbIOE\u8fd0\u52a8 \u00b6 \u53bbIOE\u524d \u53bbIOE\u540e IBM: \u670d\u52a1\u5668 dell\u670d\u52a1\u5668 Oracle: \u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6 mysql EMC: \u6570\u636e\u5b58\u50a8\u8bbe\u5907 \u7528\u666e\u901a\u786c\u76d8\u6784\u5efa ceph\u5757\u5b58\u50a8\u3001nfs\u6587\u4ef6\u5b58\u50a8\u3001swift\u5bf9\u8c61\u5b58\u50a8 Ps: \u5c0f\u578b\u673a \u4e00\u822c\u4f1a\u57fa\u4e8eUnix\u5b9a\u5236\u4e13\u95e8\u7684OS.. \u67b6\u6784\u4e5f\u4e0d\u4e00\u6837,\u91c7\u7528\u7684\u7cbe\u7b80\u6307\u4ee4\u96c6\u5904\u7406\u5668.. (\u5c0f\u578b\u673a\u56e0\u4e3a\u53bbIOE\u8fd0\u52a8\u88ab\u6dd8\u6c70\u4e86 \u6bd4\u8f83\u6709\u540d\u7684\u662fIBM) \u8865\u5145: \u670d\u52a1\u5668\u7684\u96c6\u7fa4\u4f1a\u6709\u4e00\u4e2a\u5e26\u5934\u5927\u54e5,\u8d1f\u8d23\u8bf7\u6c42\u7684\u4e00\u4e9b\u5206\u53d1,\u8d1f\u8f7d\u5747\u8861 ( \u6709\u4e24\u79cd\u7ea7\u522b:\u786c\u4ef6>\u8f6f\u4ef6 \u901a\u5e38\u63a5\u89e6\u7684\u662f\u8f6f\u4ef6 ) eg: nginx-7\u5c42 ; lvs-4\u5c42 [ \u7f51\u7ebf ] \u6a59\u767d \u6a59 \u7eff\u767d \u84dd \u84dd\u767d \u7eff \u68d5\u767d \u68d5 \u8ba1\u7b97\u673a\u786c\u4ef6 \u00b6 \u6469\u5c14\u5b9a\u5f8b: \u786c\u4ef6\u7684\u6027\u80fd\u6bcf\u969418\u4e2a\u6708\u4f1a\u66f4\u65b0\u4e00\u500d.. (\u73b0\u5728\u4e0d\u9002\u7528\u5566Hhh) \u6ce8\u610f,\u5728\u516c\u53f8\u91cc\u4e0d\u5efa\u8bae\u81ea\u5df1\u7ec4\u88c5\u7535\u8111,\u4e0d\u7a33\u5b9a.. \u81ea\u4e2a\u513f\u4e70\u786c\u4ef6\u88c5\u7535\u8111,\u82e5\u662f\u53cccpu,\u9700\u8981\u88c5\u540c\u4e00\u578b\u53f7\u7684.. \u786c\u4ef6\u4e94\u5927\u7ec4\u6210 \u00b6 1> \u63a7\u5236\u5668: \u8ba1\u7b97\u673a\u7684\u6307\u6325\u7cfb\u7edf,\u8d1f\u8d23\u63a7\u5236\u5176\u4ed6\u786c\u4ef6\u7684\u8fd0\u884c. --- \u5927\u8111\u7684\u6307\u6325\u80fd\u529b 2> \u8fd0\u7b97\u5668: \u8d1f\u8d23\u8fd0\u7b97(\u6570\u5b66\u8fd0\u7b97\u548c\u903b\u8f91\u8fd0\u7b97) --- \u5927\u8111\u7684\u601d\u8003\u80fd\u529b 3> \u5b58\u50a8\u5668: \u8d1f\u8d23\u5b58\u50a8\u6570\u636e \u5185\u5b58 : \u57fa\u4e8e<\u7535>(\u9ad8\u4f4e\u7535\u5e73)\u5b58\u53d6\u6570\u636e.. \u65ad\u7535\u6570\u636e\u5168\u90e8\u4e22\u5931. --- \u5927\u8111\u7684\u8bb0\u5fc6\u529f\u80fd \u53ea\u80fd \u4e34\u65f6 \u4fdd\u5b58\u6570\u636e.. \u5b58\u53d6\u901f\u5ea6\u5f88 \u5feb . \u5916\u5b58 : \u4ee5\u78c1\u76d8\u4e3a\u4f8b.. \u57fa\u4e8e<\u78c1>\u5b58\u53d6\u6570\u636e.. \u65ad\u7535\u6570\u636e\u4ecd\u7136\u5b58\u5728. --- \u672c\u5b50 \u53ef\u4ee5 \u6c38\u4e45 \u4fdd\u5b58\u6570\u636e,\u5b58\u53d6\u901f\u5ea6\u76f8\u5bf9 \u6162 \u4e00\u4e9b.. 4> \u8f93\u5165\u8bbe\u5907: eg \u952e\u76d8\u3001\u9f20\u6807 --- \u4eba\u7684\u773c\u775b\u8033\u6735 5> \u8f93\u51fa\u8bbe\u5907: eg \u663e\u793a\u5668\u3001\u6253\u5370\u673a --- \u9762\u90e8\u8868\u60c5 \u63a7\u5236\u5668 + \u8fd0\u7b97\u5668 = CPU\u4e2d\u592e\u5904\u7406\u5668 CPU + \u5185\u5b58 ---> \u5927\u8111\uff01 cpu(x86-64) ; \u5185\u5b58(buffer\u3001cache) ; \u786c\u76d8(IDE\u3001SATA\u3001SAS\u63a5\u53e3; \u673a\u68b0\u3001SSD\u56fa\u6001) \u7a0b\u5e8f\u4e0e\u4e09\u5927\u6838\u5fc3\u7684\u5173\u7cfb \u00b6 \u8ba1\u7b97\u673a\u4e09\u5927\u6838\u5fc3 : cpu\u3001\u5185\u5b58(\u4e3b\u5b58\u50a8\u5668)\u3001\u786c\u76d8 \u5b89\u88c5\u3001\u52a0\u8f7d \u00b6 \u6211\u4eec\u7ecf\u5e38\u63d0\u5230\u7684<\u8fdb\u7a0b>\u8bf4\u7684\u5c31\u662f<\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f>, \u5373\u7a0b\u5e8f\u4ece\u786c\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e86.. 1> \u4e0b\u8f7d\u5b89\u88c5(\u5c31\u662f\u62f7\u8d1d\u6587\u4ef6)\u7684\u8f6f\u4ef6(\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u5806\u4ee3\u7801\u6587\u4ef6..)\u4f1a\u88c5\u5230\u786c\u76d8\u4e0a... \u8ba1\u7b97\u673a\u786c\u76d8\u7684\u5927\u5c0f\u51b3\u5b9a\u4e86\u80fd\u591f \u5b89\u88c5 \u7684\u8f6f\u4ef6\u6570\u76ee 2> \u8f6f\u4ef6\u7684\u8fd0\u884c\u4f1a\u5c06\u7a0b\u5e8f\u7684 [\u4ee3\u7801\u548c\u6570\u636e] \u4ece\u786c\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d \u8ba1\u7b97\u673a\u5185\u5b58\u7684\u5927\u5c0f\u51b3\u5b9a\u4e86\u80fd\u591f \u540c\u65f6\u8fd0\u884c \u7684\u8f6f\u4ef6\u6570\u76ee 3> \u8f6f\u4ef6\u7684 <\u542f\u52a8> \u901f\u5ea6 \u662f\u7531\u786c\u76d8\u51b3\u5b9a\u7684,\u56e0\u4e3a\u5b83\u9700\u8981\u4ece\u786c\u76d8\u8bfb\u5165\u5185\u5b58. \u56fa\u6001\u4f1a\u6bd4\u673a\u68b0\u5feb.. so,\u5f00\u673a\u901f\u5ea6(\u4f1a\u52a0\u8f7d\u64cd\u4f5c\u7cfb\u7edf,\u64cd\u4f5c\u7cfb\u7edf\u4e5f\u662f\u4e00\u4e2a\u8f6f\u4ef6)\u4e5f\u8ddf\u786c\u76d8\u6709\u5173. \u7f13\u5b58\u3001\u7f13\u51b2\u533a \u00b6 cpu\u518d\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e\u8fdb\u884c\u8fd0\u7b97\u4ee5\u53ca\u5bf9\u5176\u4ed6\u786c\u4ef6\u7684\u63a7\u5236. cpu\u8fd0\u7b97\u4ea7\u751f\u7684\u6570\u636e\u5f80\u5185\u5b58\u3001\u786c\u76d8\u91cc\u9762\u5b58. cache \u7f13\u5b58 (\u8bfb): linux\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u8bfb\u53d6\u6570\u636e\u7684\u4f18\u5316\u673a\u5236. \u5b83\u4f1a\u5c06\u786c\u76d8\u6570\u636e\u5728\u5185\u5b58\u4e2d\u5148\u7f13\u5b58\u597d,cpu\u53d6\u7684\u65f6\u5019\u53ef\u4ee5\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u53bb.. \u4e3e\u4f8b : \u8bfb\u53d6\u786c\u76d8\u4e2d\u7684\u67d0\u4e00\u6587\u4ef6,\u7b2c\u4e00\u6b21\u6ca1\u5565\u901f\u5ea6\u63d0\u5347. \u7b2c\u4e8c\u6b21\u8bfb\u53d6\u5b83\u65f6\u5c31\u76f4\u63a5\u8bfb\u5185\u5b58\u91cc\u7684cache\u7f13\u5b58\u5c31\u884c.\u901f\u5ea6\u63d0\u5347. \u6ce8\u610f : cache\u4e0d\u80fd\u7f13\u5b58\u786c\u76d8\u6240\u6709\u7684\u6570\u636e,\u5b83\u53ea\u4f1a\u7f13\u5b58\u5e38\u7528\u7684,\u7ecf\u5e38\u8bbf\u95ee\u7684\u6570\u636e.. (\u600e\u4e48\u5224\u522b\uff1flinux\u64cd\u4f5c\u7cfb\u7edf\u8bf4\u7684\u7b97) \u5185\u5b58\u4e0d\u591f\u7528\u4e86,\u6211\u4eec\u53ef\u4ee5\u5c06\u5185\u5b58\u4e2dcache\u7f13\u5b58\u7a7a\u95f4\u91ca\u653e\u6389... buffer \u7f13\u51b2\u533a (\u5199): \u4e0d\u4f1a\u7acb\u9a6c\u5c06\u6570\u636e\u5f80\u786c\u76d8\u91cc\u5237,Linux\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u6b64\u6709\u4e2a\u4f18\u5316 \u5f53\u6709\u6570\u636e\u8981\u4ece\u5185\u5b58\u653e\u5230\u786c\u76d8\u91cc\u65f6,OS\u4f1a\u5c06\u6570\u636e\u5728\u5185\u5b58\u91cc\u7f13\u51b2\u4e0b,\u6512\u4e00\u5927\u6ce2,\u518d\u4e00\u8d77\u5f80\u786c\u76d8\u91cc\u9762\u9001.. \u5c0f\u63d0\u4e00\u5634: cache\u7f13\u5b58\u548cbuffer\u7f13\u51b2\u533a\u662flinux\u64cd\u4f5c\u7cfb\u7edf\u81ea\u5e26\u7684\u4f18\u5316\u673a\u5236,windows\u7cfb\u7edf\u662f\u6ca1\u6709\u7684. buffer\u548ccache\u7684\u7a7a\u95f4\u53ef\u4ee5\u91ca\u653e\u6389,\u4f46\u901a\u5e38\u91ca\u653ecache; buff\u7684\u91ca\u653e\u8981\u8c28\u614e\u70b9,\u907f\u514d\u91ca\u653e\u65f6\u6570\u636e\u8fd8\u672a\u5199\u5230\u786c\u76d8.. cpu\u8be6\u89e3 \u00b6 \u4e24\u4e2a\u751f\u4ea7\u5382\u5546: Intel AMD x86-64 \u00b6 \u8ba1\u7b97\u673a\u662f\u57fa\u4e8e\u7535\u5de5\u4f5c\u7684,\u6240\u4ee5\u5185\u5b58\u91cc\u653e\u7684\u662f\u7535\u4fe1\u53f7..\u8868\u793a01\u4e8c\u8fdb\u5236\u7684\u9ad8\u4f4e\u7535\u5e73... \u786c\u76d8\u4ee5\u78c1\u76d8\u4e3a\u4f8b. \u78c1\u7684\u7279\u6027\u8ddf\u7535\u4e5f\u662f\u4e00\u6837\u9ad8\u4f4e\u53d8\u5316\u7684.. \u4ece\u78c1\u76d8\u8bfb\u6570\u636e\u5230\u5185\u5b58,\u5c31\u662f\u5c06\u78c1\u4fe1\u53f7\u8f6c\u6210\u7535\u4fe1\u53f7. 32/64\u4f4d: 32\u4f4d/64 \u4f4d cpu\u5206\u522b\u4ee3\u8868\u6bcf\u6b21(\u4e00\u6b21\u6027)\u80fd\u4ece\u5185\u5b58\u91cc\u8bfb\u53d6\u768432/64\u4e2a \u4e8c\u8fdb\u5236\u6570 \u5b83\u4eec\u89c4\u5b9a32/64\u4f4d\u4f1a\u7ec4\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u6307\u4ee4 .. \u6362\u4e2a\u8bf4\u6cd5,\u6307\u7684\u662fcpu\u4e00\u6b21(\u4e00\u4e2a\u6307\u4ee4)\u80fd\u5904\u7406\u591a\u5927\u7684\u6570\u636e.. \u5b66\u672f\u4e00\u70b9, 32\u4f4d\u6307\u7684\u662fCPU\u901a\u7528\u5bc4\u5b58\u5668\u7684\u6570\u636e\u5bbd\u5ea6 ,32\u4f4d\u5904\u7406\u5668\u4e00\u6b21\u53ea\u80fd\u5904\u740632\u4f4d,\u4e5f\u5c31\u662f4\u4e2a\u5b57\u8282\u7684\u6570\u636e; \u800c64\u4f4d\u5904\u7406\u5668\u4e00\u6b21\u5c31\u80fd\u5904\u740664\u4f4d, \u53738\u4e2a\u5b57\u8282\u7684\u6570\u636e. \u5982\u679c\u5c06\u603b\u957f128\u4f4d\u7684\u6307\u4ee4\u5206\u522b\u630916\u4f4d\u300132\u4f4d\u300164\u4f4d\u4e3a\u5355\u4f4d\u8fdb\u884c\u7f16\u8f91\u7684\u8bdd, 32\u4f4d\u7684\u5904\u7406\u5668\u9700\u89814\u4e2a\u6307\u4ee4; \u800c64\u4f4d\u5904\u7406\u5668\u5219\u53ea\u8981\u4e24\u4e2a\u6307\u4ee4.\u663e\u7136, \u5728\u5de5\u4f5c\u9891\u7387\u76f8\u540c\u7684\u60c5\u51b5\u4e0b, 64\u4f4d\u5904\u7406\u5668\u7684\u5904\u7406\u901f\u5ea6\u6bd432\u4f4d\u7684\u66f4\u5feb... x86\u67b6\u6784: x86\u662f\u9488\u5bf9cpu\u7684\u578b\u53f7\u6216\u8005\u8bf4\u67b6\u6784\u7684\u4e00\u79cd\u7edf\u79f0. \u6700\u65e9\u7684\u90a3\u9897\u7531Intel\u53d1\u660e\u51fa\u6765\u7684CPU\u4ee3\u53f7\u79f0\u4e3a8086,\u540e\u6765\u57288086\u7684\u57fa\u7840\u4e0a\u53c8\u5f00\u53d1\u51fa\u4e8680286\u300180386...., \u56e0\u6b64\u8fd9\u79cd\u67b6\u6784\u7684CPU\u5c31\u88ab\u7edf\u79f0\u4e3ax86\u67b6\u6784\u5566. \u7a0b\u5e8f\u5458\u5f00\u53d1\u51fa\u7684\u8f6f\u4ef6\u6700\u7ec8\u90fd\u8981\u7ffb\u8bd1\u6210cpu\u7684\u6307\u4ee4\u96c6\u624d\u80fd\u8fd0\u884c, \u56e0\u6b64\u8f6f\u4ef6\u7684\u7248\u672c\u5fc5\u987b\u4e0ecpu\u7684\u67b6\u6784(eg: x86)\u5951\u5408. \u5e76\u4e14, , 64\u4f4d\u7684cpu\u65e2\u80fd\u8fd0\u884c64\u4f4d\u8f6f\u4ef6,\u4e5f\u80fd\u8fd0\u884c32\u4f4d\u7684\u8f6f\u4ef6... \u5b89\u88c5\u5305 mysql-5.7.20-win32.zip \u91cc\u768432\u5c31\u4ee3\u8868\u6b64\u8f6f\u4ef6\u662f32\u4f4d\u7684,\u80fd\u8fd0\u884c\u572832\u4f4d\u548c64\u4f4d\u7684cpu\u4e4b\u4e0a. x86-64 \u6307\u8fd0\u884c\u5728 \u590d\u6742\u6307\u4ee4\u96c6\u768464\u4f4dcpu \u4e0a. cpu\u6307\u4ee4\u96c6 \u00b6 \u7b80\u4ecb \u00b6 \u6ce8\u610f\u54e6 , cpu\u4e0d\u4f1a\u81ea\u53d1\u7684\u63a7\u5236\u5176\u4ed6\u786c\u4ef6\u7684\u8fd0\u884c.\u56e0\u4e3acpu\u672c\u8eab\u4e5f\u662f\u786c\u4ef6, \u786c\u4ef6\u90fd\u4f1a\u53d7\u8f6f\u4ef6\u7684\u652f\u914d !!! \u4eba\u7c7b \u901a\u8fc7 \u7f16\u5199\u7a0b\u5e8f\u8f6f\u4ef6 \u6765\u63a7\u5236 cpu ,\u8fd9\u4e9b\u4eba\u7c7b\u7684\u6307\u4ee4\u6307\u6325cpu \u5185\u90e8\u96c6\u6210\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4\u96c6 \u6765\u64cd\u4f5c \u5176\u5b83\u8ba1\u7b97\u673a\u786c\u4ef6 \u800c\u65e9\u671f\u7684\u4e8c\u6781\u7ba1\u76f8\u5f53\u4e8e\u4eba\u7c7b\u76f4\u63a5\u7f16\u5199\u4e8c\u8fdb\u5236\u6307\u4ee4\u6765\u63a7\u5236\u8ba1\u7b97\u673a\u786c\u4ef6.. \u7b80\u5355\u6765\u8bf4: \u53d6\u6307 (\u7a0b\u5e8f\u6307\u4ee4) -- \u89e3\u7801 (\u5177\u4f53\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4) -- \u6267\u884c (\u64cd\u4f5c\u76f8\u5e94\u786c\u4ef6) \u73b0\u5728\u7684cpu\u53ef\u4ee5\u6709\u591a\u6761\u8fd9\u6837\u7684\u6d41\u6c34\u7ebf(\u53d6\u6307--\u89e3\u7801--\u6267\u884c) \u5e73\u5e38\u6211\u4eec\u8bf4\u76842\u68384\u7ebf\u7a0b\u91cc\u9762\u7684\u7ebf\u7a0b\u6307\u7684\u5c31\u662f\u8fd9\u6837\u7684\u6d41\u6c34\u7ebf.. 2\u6838,\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u5c062\u4e2acpu\u6838\u5fc3\u96c6\u6210\u5230\u4e86\u4e00\u4e2acpu\u4e0a. 2\u68384\u7ebf\u7a0b,\u6307\u7684\u662f2\u6838\u67094\u6761\u6d41\u6c34\u7ebf,\u5373\u6bcf\u4e2a\u6838\u5185\u90e8\u6709\u4e24\u6761\u6d41\u6c34\u7ebf..\u7269\u7406\u5c42\u9762\u76842\u6838,\u5047\u7684\u56db\u6838. \u6027\u80fd\u6bd4\u8f83: \u7eaf4\u6838 > 2\u68384\u7ebf\u7a0b > \u7eaf2\u6838 \u6ce8\u610f\u54e6! \u591a\u7ebf\u7a0b\u8fd0\u884ccpu\u4fdd\u6301\u4e24\u4e2a\u4e0d\u540c\u7684\u7ebf\u7a0b\u72b6\u6001,\u53ef\u4ee5\u5728\u7eb3\u79d2\u7ea7\u7684\u65f6\u95f4\u5185\u6765\u56de\u5207\u6362,\u901f\u5ea6\u5feb\u5230\u4f60\u770b\u5230\u7684\u7ed3\u679c\u662f\u5e76\u53d1\u7684,\u4f2a\u5e76\u884c\u7684. \u7136\u800c\u591a\u7ebf\u7a0b\u4e0d\u63d0\u4f9b\u771f\u6b63\u7684\u5e76\u884c\u5904\u7406,\u4e00\u4e2acpu\u540c\u4e00\u65f6\u523b\u53ea\u80fd\u5904\u7406\u4e00\u4e2a\u8fdb\u7a0b(\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u81f3\u5c11\u4e00\u4e2a\u7ebf\u7a0b) <Inter\u548cAMD\u5728\u5bf9\u591a\u6838\u82af\u7247\u7684\u8bbe\u8ba1\u4e0a\u4e0d\u540c> \u9996\u5148\u8981\u77e5\u9053,\u901a\u5e38\u8bf4\u7684L1\u7f13\u5b58\u6307\u7684\u5c31\u662fcpu\u5185\u90e8\u7684\u5bc4\u5b58\u5668,L2\u7f13\u5b58(\u4e0d\u5728cpu\u91cc\u9762)\u662f\u5904\u4e8e\u5185\u5b58\u548c\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u9ad8\u901f\u5b58\u53d6\u8bbe\u5907. \u4ee54\u6838\u4e3a\u4f8b,Inter\u76844\u4e2a\u6838\u5171\u4eab\u4e00\u4e2aL2\u7f13\u5b58;\u800cAMD\u7684\u6bcf\u4e2a\u6838\u90fd\u6709\u4e0e\u81ea\u5df1\u5173\u8054\u7684L2\u7f13\u5b58.. \u76f8\u6bd4\u4e4b\u4e0b,AMD\u8981\u5904\u7406\u7f13\u5b58\u6570\u636e\u540c\u6b65\u7684\u95ee\u9898..Inter\u8981\u89e3\u51b3\u7f13\u5b58\u6570\u636e\u7ade\u4e89\u7684\u95ee\u9898.. \u5206\u7c7b \u00b6 cpu\u5185\u90e8\u96c6\u6210\u7684\u5fae\u6307\u4ee4\u96c6\u5206\u4e3a\u4e24\u7c7b: \u7cbe\u7b80\u548c\u590d\u6742.. 1> \u7cbe\u7b80\u6307\u4ee4\u96c6(\u4e86\u89e3): \u4f18: \u6307\u4ee4\u77ed,\u6bcf\u4e2a\u6307\u4ee4\u7684\u8fd0\u884c\u65f6\u95f4\u90fd\u5f88\u77ed, \u5b8c\u6210\u7684\u52a8\u4f5c\u4e5f\u5f88\u5355\u7eaf,\u4e0d\u5bb9\u6613\u51fa\u9519; \u52a3: \u5b9e\u73b0\u4e00\u4e2a\u529f\u80fd,\u6240\u9700\u7684\u6307\u4ee4\u6761\u6570\u4f1a\u5f88\u591a.. \u6240\u4ee5\u8bbe\u8ba1\u8d77\u6765\u4f1a\u6bd4\u8f83\u590d\u6742. 2> \u590d\u6742\u6307\u4ee4\u96c6 : \u6bcf\u6761\u6307\u4ee4\u82b1\u8d39\u7684\u65f6\u95f4\u8f83\u957f, \u4f46\u6bcf\u6761\u4e2a\u522b\u6307\u4ee4\u53ef\u4ee5\u5904\u7406\u7684\u5de5\u4f5c\u8f83\u4e3a\u4e30\u5bcc.. \u6240\u4ee5\u8bbe\u8ba1\u8d77\u6765\u4f1a\u6bd4\u8f83\u7b80\u5355. eg: Intel\u5f00\u53d1\u7684 x86\u67b6\u6784 \u7684CPU. cpu\u5bc4\u5b58\u5668 \u00b6 \u5bc4\u5b58\u5668: \u4e0ecpu\u4e00\u6837\u7684\u6750\u8d28\u5236\u6210,\u901f\u5ea6\u975e\u5e38\u5feb,\u51e0\u4e4e\u65e0\u5ef6\u8fdf.. \u4e0d\u662f\u5b58\u50a8\u7684\u4e3b\u529b.\u4e0e\u5185\u5b58\u4e00\u6837\u65ad\u7535\u65e0. CPU\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u6570\u636e\u5148\u653e\u5230\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e2d,\u518d\u653e\u5230\u5185\u5b58\u4e2d...\u4e3a\u4e86\u6c38\u4e45\u5b58\u50a8\u518d\u5012\u817e\u5230\u786c\u76d8\u4e2d. \u5982\u4f55\u63d0\u901f,\u5728\u5f7c\u6b64\u4e4b\u95f4\u52a0\u9ad8\u901f\u8bbe\u5907! \u5bc4\u5b58\u5668 - \u5185\u5b58 - \u786c\u76d8 \u5b58\u5728\u5373\u5408\u7406..(\u9020\u4ef7 \u5bb9\u91cf \u901f\u5ea6) \u5185\u6838\u6001\u4e0e\u7528\u6237\u6001!! \u00b6 \u4ece\u8ba1\u7b97\u673a\u6574\u4f53\u7684\u89d2\u5ea6(\u6216\u8bf4\u662fcpu\u7684\u89c6\u89d2) : \u5185\u6838\u6001 : \u8ba1\u7b97\u673a\u5185\u5b58\u6b63\u5728\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u7a0b\u5e8f,\u53ef\u4ee5\u64cd\u4f5c\u786c\u4ef6 \u7528\u6237\u6001 : \u8ba1\u7b97\u673a\u5185\u5b58\u6b63\u5728\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f,\u4e0d\u80fd\u64cd\u4f5c\u8ba1\u7b97\u673a\u786c\u4ef6 \u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u89d2\u5ea6: \u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u7528\u4e8e\u5185\u6838\u6001\u3001\u7cfb\u7edf\u8c03\u7528\u8fd0\u7528\u4e8e\u7528\u6237\u6001. \u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e0d\u662f\u65b0\u77e5\u8bc6\u70b9,\u53ea\u662f\u4e3a\u4e86\u4fbf\u4e8e\u9610\u8ff0\u7684\u4e24\u4e2a\u540d\u8bcd.. \u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u5fc5\u7136\u6d89\u53ca\u5230\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u64cd\u4f5c,\u5219\u9700\u8981\u4ece\u7528\u6237\u6001\u8f6c\u5230\u5185\u6838\u6001. So, \u8ba1\u7b97\u673a\u65e0\u65f6\u65e0\u523b\u4e0d\u5728\u53d1\u751f\u7740\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7684\u6765\u56de\u5207\u6362.. \u6bd4\u5982\u5e94\u7528\u7a0b\u5e8fQQ\u53d1\u9001\u63a5\u6536\u4e00\u6bb5\u6587\u5b57,qq\u5fc5\u987b\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u6765\u63a7\u5236\u7f51\u5361\u8fd9\u4e00\u786c\u4ef6\u6765\u53d1\u9001\u4fe1\u606f(\u7528\u6237\u6001 --> \u5185\u6838\u6001),\u4e5f\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u7f51\u5361\u63a5\u6536\u5bf9\u65b9\u56de\u590d\u7684\u6d88\u606f\u6570\u636e\u7ed9qq.(\u5185\u6838\u6001 --> \u7528\u6237\u6001) \u5b58\u50a8\u5668\u8be6\u89e3 \u00b6 \u5b58\u50a8\u5668\u5206\u7c7b \u00b6 \u4eba\u7c7b\u73b0\u76ee\u524d\u65e0\u6cd5\u5236\u9020\u51fa\u4e00\u79cd\u4ef7\u94b1\u4fbf\u5b9c\u5bb9\u91cf\u5927\u901f\u5ea6\u8d85\u5feb\u7684\u5b58\u50a8\u5668... \u53ea\u80fd\u9020\u51fa\u4e0d\u540c\u7684\u786c\u4ef6\u505a\u4e0d\u540c\u7684\u4e8b\u60c5. 1> cpu\u4f7f\u7528\u67d0\u4e00\u6570\u636e,\u4f1a\u4f9d\u6b21\u5728 \u5bc4\u5b58\u5668 (\u4e5f\u79f0\u4f5cL1\u7f13\u5b58)\u3001 \u9ad8\u901f\u7f13\u5b58 (L2)\u3001 \u5185\u5b58 (\u5b58\u50a8\u7684\u4e3b\u529b)\u4e2d\u67e5\u627e; 2> \u8ba1\u7b97\u673a\u4f1a\u5c06cpu\u7acb\u9a6c\u4f1a\u7528\u5230\u7684\u6570\u636e\u653e\u5bc4\u5b58\u5668..\u5728\u5185\u5b58\u4e2d\u7ecf\u5e38\u8bbf\u95ee\u5230\u7684\u6570\u636e\u653e\u5230\u9ad8\u5ea6\u7f13\u5b58\u91cc(\u907f\u514d\u91cd\u590d\u5bfb\u5740). 3> \u6211\u4eec\u901a\u5e38\u5728\u786c\u76d8(\u5206\u4e3a\u673a\u68b0\u78c1\u76d8\u548c\u56fa\u6001\u786c\u76d8)\u4e2d\u653e\u6c38\u4e45\u5b58\u50a8\u7684\u6570\u636e,\u78c1\u5e26\u4e2d\u653e\u5907\u4efd\u7684\u6570\u636e. Ps: \u82e5\u5728\u67e5\u627e\u7684\u6570\u636e\u5728\u9ad8\u901f\u7f13\u5b58\u4e2d\u627e\u5230\u4e86,\u79f0\u4e3a\u9ad8\u901f\u7f13\u5b58\u547d\u4e2d! \u78c1\u5e26\u5728\u6162\u6162\u9000\u51fa\u5386\u53f2\u821e\u53f0,\u56e0\u4e3a\u78c1\u76d8\u8d8a\u6765\u8d8a\u4fbf\u5b9c\u4e86. \u5185\u5b58 \u00b6 ROM \u00b6 \u5185\u5b58(RAM) : \u53ef\u8bfb\u53ef\u5199,\u65ad\u7535\u6570\u636e\u4e22\u5931. \u5b58\u653e qq\u3001\u5fae\u4fe1\u3001\u5fae\u535a\u7b49 cpu\u8981\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f . \u53ea\u8bfb\u5185\u5b58(ROM) : \u5b58\u50a8\u901f\u5ea6\u8ddfRAM\u4e00\u6837, \u53ea\u80fd\u7528\u4e8e\u8bfb ,\u65ad\u7535\u6570\u636e\u4e0d\u4e22\u5931. \u5b58\u653e BIOS (Basic Input Output System\u57fa\u672c\u7684\u8f93\u5165\u8f93\u51fa\u64cd\u4f5c\u7cfb\u7edf) \u8ba1\u7b97\u673a\u751f\u4ea7\u5382\u5546\u5728\u521a\u9020\u51fa\u8ba1\u7b97\u673a\u7684\u65f6\u5019,\u5728ROM\u82af\u7247\u91cc\u628aBIOS\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801\u5c31\u5199\u8fdb\u53bb\u4e86.. \u515c\u5e95. Ps: \u867d\u7136\u662f\u53ea\u8bfb\u7684,\u4f46\u4e5f\u53ef\u4ee5\u5237,\u4e00\u822c\u7ed9\u751f\u4ea7\u5382\u5546\u5237,\u81ea\u5df1\u5237\u5931\u8d25\u4e86,\u8fd9\u5806\u786c\u4ef6\u5c31\u771f\u6210\u5e9f\u94c1\u5566..(\u00b4\u25bd\uff40) \u7535\u8111\u4e00\u5f00\u673a,cpu\u4f1a\u5148\u53bbROM\u91cc\u8bfbBIOS\u7cfb\u7edf\u6765\u63a5\u7ba1\u786c\u4ef6\u7684\u8fd0\u884c(\u5728\u7535\u8def\u4e0a\u89c4\u5b9a\u6b7b\u4e86\u7684).. \u4f1a\u626b\u63cfBIOS\u8bbe\u7f6e\u7684\u542f\u52a8\u9879, \u53bb\u542f\u52a8\u771f\u6b63\u7684OS(OS\u662f\u5b89\u88c5\u5728\u67d0\u4e00\u5757\u786c\u76d8\u4e4b\u4e0a\u7684 \u4ee5linux\u4e3a\u4f8b) \u5c06linux\u4ece\u786c\u76d8\u8bfb\u5230RAM\u4e2d.. \u901a\u8fc7linux\u7cfb\u7edf\u53bb\u63a5\u7ba1\u786c\u4ef6\u7684\u8fd0\u884c. \u82e5\u5728\u542f\u52a8\u9879\u4e2d\u6ca1\u6709\u627e\u5230\u64cd\u4f5c\u7cfb\u7edf,\u5c31\u9700\u8981\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u5566(\u8fd9\u5c31\u6d89\u53ca\u7528\u5149\u76d8,U\u76d8\u542f\u52a8\u76d8\u7b49). BIOS\u7cfb\u7edf\u76f8\u5f53\u4e8e\u4e00\u4e2a\u8fc7\u6e21\u7684\u8fc7\u7a0b, linux\u548cBIOS\u90fd\u80fd\u63a7\u5236\u786c\u4ef6\u7684\u8fd0\u884c,\u4f46linux\u64cd\u4f5c\u7cfb\u7edf\u66f4\u5f3a\u5927\u4e00\u4e9b.. CMOS \u00b6 BIOS\u7cfb\u7edf\u4f1a\u4fee\u6539\u4e00\u4e9b\u914d\u7f6e(\u6bd4\u5982\u542f\u52a8\u9879\u4f18\u5148\u7ea7\u7684\u8c03\u6574,\u52a0\u5bc6\u8bbe\u8ba1\u7684\u5bc6\u7801,\u8ba1\u7b97\u673a\u7684\u65f6\u95f4..), \u5176\u4ea7\u751f\u7684\u6570\u636e\u4e0d\u80fd\u76f4\u63a5\u653e\u5230ROM\u91cc,\u56e0\u4e3aROM\u662f\u53ea\u8bfb\u7684; \u8fd9\u4e9b\u6570\u636e\u4f1a\u653e\u5230 CMOS (\u65ad\u7535\u6570\u636e\u5c31\u6ca1,\u8017\u7535\u91cf\u5f88\u4f4e,\u5f88\u5c0f\u5757\u7535\u6c60\u5c31\u80fd\u4f7f\u7528\u82e5\u5e72\u5e74)\u91cc\u9762.. \u8ba1\u7b97\u673a\u521a\u5f00\u59cb\u542f\u52a8\u65f6\u7684\u4f53\u7cfb --- CPU + ROM + CMOS (\u5b58\u50a8BIOS\u914d\u7f6e\u6570\u636e) \u8ba1\u7b97\u673a\u542f\u52a8\u8d77\u6765\u4ee5\u540e\u7684\u4f53\u7cfb --- CPU + RAM + \u786c\u76d8 Ps: \u65ad\u7535\u540e,\u4e3b\u677f\u4e0a\u6709\u4e00\u5757\u7535\u6c60\u5728\u7ed9CMOS\u548c\u65f6\u949f\u82af\u7247(\u4fdd\u8bc1\u5173\u673a\u540e\u5f00\u673a\u65f6\u95f4\u8fd8\u662f\u6b63\u786e\u7684)\u4f9b\u7535. [\u786c\u76d8\u63a5\u53e3] \u00b6 \u786c\u76d8\u5927\u81f4\u5206\u4e3a\u4e24\u7c7b \u673a\u68b0\u78c1\u76d8(\u4e70\u7684\u65f6\u5019\u4e3b\u8981\u770b\u8f6c\u901f\u8fd9\u4e00\u6307\u6807)\u3001\u56fa\u6001\u786c\u76d8(\u7b80\u79f0SSD).. \u7406\u8bba\u4e0a\u90fd\u662f\u6c38\u4e45\u5b58\u653e\u6570\u636e\u7684 \u524d\u8005\u4f9d\u8d56\u78c1\u5b58\u53d6\u6570\u636e,\u540e\u8005\u4f9d\u8d56\u7535\u5b50\u5b58\u53d6\u6570\u636e.. \u4e0d\u7ba1\u600e\u6837\u90fd\u662f\u9ad8\u4f4e\u7684\u53d8\u5316\u6765\u8868\u793a\u4e8c\u8fdb\u5236. \u51b7\u77e5\u8bc6: 1B/Byte/\u5b57\u8282 = 8bit/\u6bd4\u7279\u4f4d/\u4f4d/\u4e8c\u8fdb\u5236\u6570 1KB = 1024B bit B KB MB GB TB PB EB ... ... \u5e02\u9762\u4e0a\u5356\u7684\u786c\u76d8\u90fd\u662f\u6309\u71671000\u6765\u8ba1\u7b97\u7684,500G\u7684\u786c\u76d8=500 x 1000 x 1000 x 1000 \u5b57\u8282 \u25ce \u63a5\u53e3 \u00b6 1> IDE \u5e76\u53e3 -- \u53d1\u6570\u636e\u65f6\u6bcf\u4e2a\u9488\u811a\u5f7c\u6b64\u4e4b\u95f4\u4f1a\u6709\u5e72\u6270..\u4f1a\u5f71\u54cd\u4f20\u8f93\u901f\u5ea6 2> SATA \u4e32\u53e3 -- \u4f20\u8f93\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u90fd\u5f3a\u4e8eIDE 3> SCSI -- \u4e3a\u5c0f\u578b\u673a\u6253\u9020\u7684 4> SAS -- \u5c06SATA\u4e0eSCSI\u63a5\u53e3\u7684\u4f18\u52bf\u76f8\u7ed3\u5408 (\u670d\u52a1\u5668\u786c\u76d8\u7684\u4e3b\u6d41) 5> \u5149\u7ea4\u901a\u9053 -- \u4e3b\u8981\u7528\u5728\u9ad8\u7aef\u670d\u52a1\u5668\u4e0a,\u6bd4\u5982\u4e13\u4e1a\u7684\u5b58\u50a8\u8bbe\u5907 \u25ce \u786c\u76d8\u4e0e\u63a5\u53e3\u7ec4\u5408 \u00b6 SSD + SAS > SSD + SATA > \u673a\u68b0\u78c1\u76d8 + SAS > \u673a\u68b0\u78c1\u76d8 + SATA \u670d\u52a1\u5668\u5728 \u9ad8\u5e76\u53d1\u573a\u666f \u4e0b,\u6709\u4e2a\u6027\u4ef7\u6bd4\u6bd4\u8f83\u9ad8(\u5c31\u662f\u7f3a\u94b1..)\u7684\u65b9\u6848: \u5c06 \u70ed\u6570\u636e (\u7528\u6237\u7ecf\u5e38\u8bbf\u95ee\u7684\u6570\u636e)\u653e\u5230 SSD+SAS \u4e0a, \u51b7\u6570\u636e (\u4e0d\u7ecf\u5e38\u8bbf\u95ee)\u653e\u5728 \u673a\u68b0\u786c\u76d8+SAS \u4e0a.. \u670d\u52a1\u5668\u5728\u5e38\u89c4\u573a\u666f\u4e0b: \u5bf9\u901f\u5ea6\u6709\u7279\u6b8a\u8981\u6c42,\u9009\u62e9 SSD + SATA ; \u6bd4\u8f83\u6838\u5fc3,\u5bf9\u901f\u5ea6\u8981\u6c42\u4e0d\u600e\u4e48\u9ad8\u7684\u4e1a\u52a1\u7528 \u673a\u68b0\u78c1\u76d8 + SAS . \u800c\u516c\u53f8\u5185\u90e8\u7684\u670d\u52a1\u4f1a\u7528 \u673a\u68b0\u78c1\u76d8 + SATA . Ps: \u73b0\u5728\u5e95\u5c42\u7684\u57fa\u7840\u8bbe\u65bd\u90fd\u4e0d\u662f\u4e00\u4e0a\u6765\u5c31\u7528\u9ad8\u7aef\u7684\u786c\u4ef6\u6765\u5806\u53e0,\u800c\u662f\u7528\u4e00\u4e9b\u6027\u4ef7\u6bd4\u6bd4\u8f83\u9ad8\u7684\u786c\u4ef6\u901a\u8fc7\u6280\u672f\u624b\u6bb5(\u6bd4\u5982\u96c6\u7fa4)\u63d0\u9ad8\u5176\u6027\u80fd.. \u5f53\u7136\u4e0d\u5dee\u94b1\u53e6\u8bf4.. \u25ce RAID\u6280\u672f \u00b6 \u78c1\u76d8\u9635\u5217 raid -- \u5bf9\u786c\u76d8\u505a\u96c6\u7fa4. Ps: \u96c6\u7fa4\u7684\u597d\u5904 1. \u9632\u6b62\u5355\u70b9\u6545\u969c(\u5b9e\u5219\u662f\u4e3a\u4e86\u9884\u7559\u6392\u67e5\u7ea0\u9519\u65f6\u95f4) 2.\u63d0\u5347\u6027\u80fd \u670d\u52a1\u5668\u901a\u5e38\u4f1a\u914d\u7f6e\u591a\u5757\u786c\u76d8,\u901a\u8fc7\u540d\u4e3aRAID\u7684\u6280\u672f\u624b\u6bb5\u5408\u6210\u4e00\u5757\u786c\u76d8(\u5bf9\u5916\u66b4\u9732\u5c31\u662f\u4e00\u5757\u76d8)... \u591a\u5757\u786c\u76d8\u8981\u8fde\u63a5\u5230 RAID\u5361 (\u9635\u5217\u5361)\u4e0a,\u7136\u540e\u5236\u4f5craid... Ps: \u786craid -- \u901a\u8fc7raid\u5361\u5236\u4f5c\u7684raid; \u8f6fraid( \u51e0\u4e4e\u4e0d\u7528 ) -- \u901a\u8fc7\u8f6f\u4ef6\u5236\u4f5c\u7684raid.. \u786craid\u66f4\u597d . \u5e38\u89c1\u7684raid\u6709\u56db\u79cd.. 1> raid0: \u81f3\u5c111\u5757\u76d8(\u82e5\u771f\u7528\u4e00\u5757,\u51f8\u663e\u4e0d\u51faraid\u7684\u4f18\u52bf..),\u901a\u5e38\u4f1a\u5927\u4e8e1\u5757\u76d8. <\u5c06\u8fde\u7eed\u7684\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a\u786c\u76d8\u4e0a\u5b58\u53d6.> \u5bb9\u91cf -- n\u5757\u76d8\u5408\u5728\u4e00\u8d77\u7684\u603b\u5bb9\u91cf;\u786c\u76d8\u5bb9\u91cf\u4e0d\u6d6a\u8d39. \u5177\u6709\u5728\u6240\u6709RAID\u7ea7\u522b\u4e2d\u6700\u9ad8\u7684\u5b58\u50a8\u6027\u80fd,\u539f\u7406\u662f\u5c06\u8fde\u7eed\u7684\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a\u786c\u76d8\u4e0a\u5b58\u53d6. \u6027\u80fd -- \u7406\u8bba\u4e0a\u662fn\u5757\u76d8\u5408\u5728\u4e00\u8d77\u7684\u8bfb\u5199\u901f\u5ea6,\u5b9e\u9645\u4e0a\u8981\u4f4e\u4e00\u4e9b; \u5197\u4f59 -- \u4e0d\u5141\u8bb8\u574f\u4efb\u4f55\u4e00\u5757\u76d8;(\u5197\u4f59\u6027\u5373\u8003\u8651\u5355\u70b9\u6545\u969c\u7684\u95ee\u9898) \u573a\u5408 -- \u8ffd\u6c42\u8bfb\u5199\u6027\u80fd,\u4f46\u662f\u5bf9\u6570\u636e\u5b89\u5168\u6027\u6ca1\u6709\u8981\u6c42. eg: \u96c6\u7fa4\u670d\u52a1\u5668 (\u66f4\u63a8\u8350\u7528raid5) \u5373\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u4e2d\u7684\u591a\u4e2a\u786c\u76d8\u90fd\u505a\u5e94\u7528\u7a0b\u5e8f\u7684raid0 \u4e0d\u6015\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u6ca1\u4e86,\u56e0\u4e3a\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u670d\u52a1\u5668\u90fd\u6709 PS: \u6570\u636e\u5e93\u4ece\u5e93mysql slave;\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9RS. \u7279\u70b9 -- \u901f\u5ea6\u5feb,\u65e0\u5197\u4f59,\u5bb9\u91cf\u65e0\u635f\u5931. 2> raid1: \u53ea\u80fd2\u5757\u76d8 <\u4e00\u5757\u76d8\u5b58\u6570\u636e,\u53e6\u4e00\u5757\u76d8\u7528\u6765\u505a\u5907\u4efd/\u955c\u50cf.> \u5bb9\u91cf -- \u4e00\u5757\u76d8\u7684\u5bb9\u91cf; \u6027\u80fd -- \u51e0\u4e4e\u5c31\u662f\u4e00\u5757\u76d8\u7684\u8bfb\u5199\u901f\u5ea6; \u5197\u4f59 -- \u53ef\u4ee5\u574f\u4e00\u5757\u76d8,\u53e6\u5916\u4e00\u5f20\u76d8\u6709\u5b8c\u6574\u7684\u6570\u636e; \u5177\u6709\u5728\u6240\u6709RAID\u7ea7\u522b\u4e2d\u6700\u9ad8\u7684\u6570\u636e\u5b89\u5168\u4fdd\u969c..\u5197\u4f59\u5ea6\u767e\u5206\u4e4b\u767e. \u573a\u5408 -- \u5bf9\u6570\u636e\u5b89\u5168\u6027\u6709\u8981\u6c42,\u5bf9\u8bfb\u5199\u901f\u5ea6\u6ca1\u6709\u7279\u6b8a\u8981\u6c42; eg: \u670d\u52a1\u5668\u53ef\u4ee5\u6709\u591a\u5757\u786c\u76d8,\u62bd\u51fa\u4e24\u5757\u786c\u76d8\u505araid1\u7528\u6765\u88c5\u64cd\u4f5c\u7cfb\u7edf,\u4fdd\u8bc1OS\u7684\u7a33\u5b9a.. (\u5b9e\u9645\u60c5\u51b5\u4e0b,\u4f1a\u7528\u4e24\u5757\u56fa\u6001\u505a\u7cfb\u7edf\u76d8\u7684raid1,\u4fdd\u8bc1\u5b89\u5168\u7684\u540c\u65f6\u517c\u987e\u901f\u5ea6) \u5f53\u7136\u7f51\u7edc\u7684\u53ef\u9760,\u786c\u4ef6\u7684\u7a33\u5b9a\u4e5f\u662f\u8981\u8003\u8651\u7684,\u8fd9\u91cc\u5355\u5355\u4fa7\u91cd\u64cd\u4f5c\u7cfb\u7edf.. \u7279\u70b9 -- \u767e\u5206\u4e4b\u767e\u5197\u4f59,\u5bb9\u91cf\u635f\u5931\u4e00\u534a. \u7efc\u5408raid0\u548craid1,\u82e5\u670d\u52a1\u5668\u4e0a\u63d2\u4e8610\u5757\u7269\u7406\u786c\u76d8,\u4e24\u5757\u505a\u6210raid1\u653e\u64cd\u4f5c\u7cfb\u7edf,\u5269\u4f598\u5757\u505a\u6210raid0\u653e\u5e94\u7528\u7a0b\u5e8f. \u5bf9\u5916\u770b\u8d77\u6765\u5c31\u4f1a\u53ea\u6709\u4e24\u4e2a\u76d8\u5566..(raid0\u901a\u5e38\u4f1a\u6d89\u53ca\u5230\u670d\u52a1\u5668\u96c6\u7fa4,\u4e00\u53f0\u670d\u52a1\u5668\u7684\u5e94\u7528\u7a0b\u5e8f\u51fa\u95ee\u9898\u4e86,\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\u8fd8\u6709..) \u6211\u4eec\u4e0d\u4f1a\u8fd9\u4e48\u505a!\u6700\u76f4\u89c2\u7684\u89e3\u91ca8\u5757\u4e2d\u6709\u4e00\u5757\u574f\u4e86,\u8fd98\u5757\u76d8\u5168\u90fd\u4e0d\u80fd\u7528\u4e86..radi0\u65e0\u5197\u4f59.\u5f88\u6d6a\u8d39. \u771f\u5b9e\u60c5\u51b5\u4e0b,\u901a\u5e38\u7cfb\u7edf\u76d8\u505aradi1,\u5176\u4ed6\u76d8\u505aradi5.. 3> raid5(\u4ecb\u4e8eraid0\u548craid1\u4e4b\u95f4,\u662f\u4e00\u79cd\u6298\u4e2d\u7684\u65b9\u6848): \u81f3\u5c113\u5757\u76d8 < \u91c7\u7528\u5947\u5076\u6821\u9a8c,\u672c\u8d28\u5c31\u662f\u505a\u5f02\u6216\u8fd0\u7b97(\u76f8\u540c\u7ed3\u679c\u4e3a0,\u4e0d\u540c\u7ed3\u679c\u4e3a1) \u53ea\u6709\u540c\u65f6\u635f\u574f\u4e24\u5757\u76d8\u65f6,\u6570\u636e\u624d\u4f1a\u635f\u574f,\u53ea\u635f\u574f\u4e00\u5757\u76d8\u65f6,\u7cfb\u7edf\u4f1a\u6839\u636e\u5b58\u50a8\u7684\u5947\u5076\u6821\u9a8c\u4f4d\u91cd\u5efa\u6570\u636e,\u4e34\u65f6\u63d0\u4f9b\u670d\u52a1. > \u5bb9\u91cf -- \u5e9f\u6389\u4e00\u5757\u76d8\u7684\u5bb9\u91cf,\u7b49\u91cf\u76d8\u7684\u60c5\u51b5\u4e0b,\u5bb9\u91cf\u4f4e\u4e8eraid0; \u6027\u80fd -- \u8bfb\u5199\u901f\u5ea6\u4f4e\u4e8eraid0,\u9ad8\u4e8eraid1; \u5197\u4f59 -- \u53ef\u4ee5\u574f\u4e00\u5757\u76d8,\u5269\u4e0b\u7684\u76d8\u53ef\u4ee5\u901a\u8fc7\u5947\u5076\u6821\u9a8c\u63a8\u5012\u51fa\u574f\u76d8\u7684\u6570\u636e. \u573a\u5408 -- \u4e00\u822c\u573a\u5408\u90fd\u53ef\u4ee5\u4f7f\u7528.\u9002\u7528\u4e8e\u5bf9\u6027\u80fd\u548c\u5197\u4f59\u90fd\u6709\u4e00\u5b9a\u8981\u6c42,\u53c8\u90fd\u4e0d\u662f\u5341\u5206\u9ad8\u7684\u60c5\u51b5.. \u7279\u70b9 -- raid0\u548craid1\u7684\u6298\u4e2d\u65b9\u6848. 4> raid10: \u81f3\u5c114\u5757\u76d8 \u4e24\u4e24\u4e4b\u95f4\u5148\u505araid1,\u518d\u505araid0; raid1\u548craid0\u6574\u5408\u7684\u4ea7\u7269,\u517c\u987e\u4e86raid1\u7684\u5b89\u5168\u6027\u4e0eraid0\u7684\u901f\u5ea6,\u4f46\u6210\u672c\u5927\u5e45\u5ea6\u63d0\u5347. \u901a\u5e38\u7528\u4e8e\u6570\u636e\u5e93\u670d\u52a1\u5668. \u5197\u4f59\u4ece\u597d\u5230\u574f: raid1 == raid10 > raid5 > raid0 \u8bfb\u5199\u6027\u80fd\u4ece\u597d\u5230\u574f: raid0 == raid10 > raid5 > raid1 \u6210\u672c\u4ece\u9ad8\u5230\u4f4e: raid10 > raid1 > raid5 > raid0 \u8fd0\u7ef4\u751f\u4ea7\u73af\u5883\u5e38\u7528\u7684\u56db\u79cdRAID\u7ea7\u522b\u4f18\u7f3a\u70b9\u5bf9\u6bd4. \u7ea7\u522b \u6700\u5c11\u78c1\u76d8\u8981\u6c42 \u5173\u952e\u4f18\u70b9 \u5173\u952e\u7f3a\u70b9 \u5b9e\u9645\u5e94\u7528\u573a\u666f RAID0 1\u5757 \u8bfb\u5199\u901f\u5ea6\u5feb \u6ca1\u6709\u4efb\u4f55\u5197\u4f59 Mysql Slave, \u96c6\u7fa4\u4e2d\u7684\u8282\u70b9RS RAID1 2\u5757(\u53ea\u80fd) 100%\u5197\u4f59,\u955c\u50cf \u8bfb\u5199\u6027\u80fd\u4e00\u822c,\u6210\u672c\u8f83\u9ad8 \u5355\u72ec\u7684,\u6570\u636e\u5f88\u91cd\u8981\u4e14\u4e0d\u80fd\u5b95\u673a\u7684\u4e1a\u52a1\u76d1\u63a7, \u7cfb\u7edf\u76d8 RAID5 3\u5757 \u5177\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u548c\u5197\u4f59, \u53ef\u4ee5\u574f\u4e00\u5757\u786c\u76d8 \u5199\u5165\u6027\u80fd\u4e0d\u9ad8 \u4e00\u822c\u4e1a\u52a1\u90fd\u53ef\u4ee5\u7528, \u5e38\u89c4 RAID10 4\u5757 \u8bfb\u5199\u901f\u5ea6\u5feb,100%\u5197\u4f59 \u6210\u672c\u9ad8, \u571f\u8c6a \u6027\u80fd\u548c\u5197\u4f59\u8981\u6c42\u5f88\u597d\u7684\u4e1a\u52a1. eg: \u6570\u636e\u5e93 \u4e3b\u5e93,\u5b58\u50a8\u7684\u4e3b\u8282\u70b9. \u7efc\u5408\u5e94\u7528\u573a\u666f \u5047\u8bbe\u670910\u53f0\u670d\u52a1\u5668,\u5176\u4e2d\u6709\u4e00\u53f0\u670d\u52a1\u5668\u662f\u6765\u505a\u6570\u636e\u7684.\u6b64\u6570\u636e\u5e93/\u5b58\u50a8\u670d\u52a1\u5668\u5148\u7528\u4e24\u5757\u786c\u76d8(\u6700\u597d\u662f\u56fa\u6001\u786c\u76d8)\u505a\u6210raid1\u6765\u88c5\u64cd\u4f5c\u7cfb\u7edf,\u5269\u4e0b\u7684\u76d8\u6765\u505a\u6210raid10\u6765\u5b58\u653e\u6570\u636e.. \u5373\u7cfb\u7edf\u76d8raid1,\u5176\u4f59\u76d8raid10.. \u5176\u4f59\u76849\u53f0\u670d\u52a1\u5668\u7528\u6765\u505a\u96c6\u7fa4,\u6bcf\u53f0\u670d\u52a1\u5668\u90fd\u7528\u4e24\u5757\u76d8\u505a\u6210raid1\u6765\u88c5\u64cd\u4f5c\u7cfb\u7edf,\u5269\u4f59\u7684\u76d8\u505araid5... \u5c0f\u9ed1\u677f: \u505a\u96c6\u7fa4\u65e2\u80fd\u63d0\u5347\u6027\u80fd,\u4e5f\u80fd\u9632\u6b62\u5355\u70b9\u6545\u969c [\u673a\u68b0\u78c1\u76d8] \u00b6 IO\u65f6\u95f4 = \u5e73\u5747\u5bfb\u9053\u65f6\u95f4 + \u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4(\u8f6c\u901f\u8d8a\u9ad8 \u5ef6\u8fdf\u65f6\u95f4\u8d8a\u4f4e) \u5148\u63d0\u4e00\u5634, \u76f4\u63a5\u5173\u673a\u4f1a\u635f\u5931\u673a\u68b0\u78c1\u76d8,\u56e0\u4e3a\u5728\u9ad8\u901f\u8fd0\u8f6c\u4e2d,\u7a81\u7136\u505c\u6b62,\u6709\u60ef\u6027\u7684..\u5bff\u547d\u51cf\u4e00. \u56fe\u4e2d\u7684\u6570\u5b570 1 2 3..\u6307\u7684\u662f\u76d8\u9762. \u4e0a\u56fe\u4e2d\u5171\u67093\u4e2a\u76d8\u7247,6\u4e2a\u76d8\u9762.\u5373\u4e00\u4e2a\u76d8\u7247\u67092\u4e2a\u76d8\u9762.. 1> \u78c1\u9053 : \u78c1\u5934\u653e\u7684\u4f4d\u7f6e\u968f\u7740\u4e3b\u8f74\u8f6c\u52a8\u4e00\u5468\u6240\u7ecf\u8fc7\u7684\u5730\u65b9\u5c31\u662f\u4e00\u4e2a\u78c1\u9053. 2> \u67f1\u9762 : \u56fe\u4e2d\u76846\u4e2a\u78c1\u5934\u5728\u81ea\u4e2a\u513f\u6240\u5904\u7684\u76d8\u9762\u7684\u540c\u4e00\u78c1\u9053\u4ece\u4e0a\u5230\u4e0b\u6784\u6210\u4e86\u4e00\u4e2a\u67f1\u9762. 3> \u5206\u533a : \u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u8bf4\u7684D\u76d8,E\u76d8\u7b49. \u4ece\u4e00\u4e2a\u67f1\u9762\u5f00\u59cb\u5230\u53e6\u4e00\u4e2a\u67f1\u9762\u4e4b\u95f4\u6240\u5305\u542b\u7684\u5185\u5bb9.\u95ed\u533a\u95f4. 4> \u6247\u533a\u3001\u6247\u9762\u3001\u7c07 : \u673a\u68b0\u78c1\u76d8\u6700\u5c0f\u8bfb\u5199\u5355\u4f4d\u662f\u6247\u533a.. \u901a\u5e38\u662f 512\u4e2aBytes\u5b57\u8282 . \u64cd\u4f5c\u7cfb\u7edf\u6700\u5c0f\u8bfb\u5199\u5355\u4f4d\u662f\u4e00\u4e2ablock\u5757.. \u901a\u5e38\u662f8\u4e2a\u6247\u533a\u7684\u5927\u5c0f.\u5373 4k . \u8fd9\u5c31\u6d89\u53ca\u5230\u4e86\u524d\u6587\u6240\u8bb2\u7684linux\u4f18\u5316\u673a\u5236<buffer\u7f13\u51b2\u533a>,\u901a\u8fc7\u4e00\u4e2a\u7c7b\u6bd4\u5177\u4f53\u5c55\u5f00\u6765\u8bf4.. buffer\u7f13\u51b2\u533a --- \u5927\u5361\u8f66 \u64cd\u4f5c\u7cfb\u7edf\u7684block\u5757 --- \u6536\u7eb3\u7bb1 \u786c\u76d8\u7684\u6247\u533a --- \u5355\u4e2a\u5feb\u9012\u76d2\u5b50 \u5927\u5361\u8f66\u91cc\u9762\u5b58\u653e\u4e86n\u4e2a\u6536\u7eb3\u7bb1,\u6bcf\u4e2a\u6536\u7eb3\u7bb1\u91cc\u9762\u5b58\u653e\u4e868\u4e2a\u5feb\u9012\u76d2\u5b50. 5> \u5e73\u5747\u5bfb\u9053\u65f6\u95f4\u3001\u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4 Q: \u6211\u4eec\u8bf4\u673a\u68b0\u78c1\u76d8\u6162... \u6162\u5728\u54ea\uff1f A: \u65e2\u4e0d\u662f\u627e\u5230\u6570\u636e\u540e\u8bfb\u53d6\u6570\u636e,\u4e5f\u4e0d\u662f\u4ece\u78c1\u76d8\u8bfb\u53d6\u5b8c\u6570\u636e\u540e\u5f80\u5185\u5b58\u9001\u7684\u8fc7\u7a0b (\u8ba1\u7b97\u673a\u786c\u4ef6\u4e4b\u95f4\u662f\u901a\u8fc7\u7535\u8def\u8fde\u63a5\u5728\u4e00\u8d77\u7684,\u5f88\u5feb!) \u5373\u627e\u5230\u6570\u636e\u540e,\u8bfb\u6570\u636e\u518d\u5f80\u5185\u5b58\u4e2d\u8bfb\u7684\u65f6\u95f4\u5ffd\u7565\u4e0d\u8ba1. \u6162\u662f\u6162\u5728\u627e\u5230\u6570\u636e\u7684\u8fc7\u7a0b.. \u5e73\u5747\u5bfb\u9053\u65f6\u95f4 : \u6307\u78c1\u76d8\u5728\u63a5\u6536\u5230\u7cfb\u7edf\u6307\u4ee4\u540e,\u78c1\u5934\u4ece\u5f00\u59cb\u79fb\u52a8\u5230\u6570\u636e\u6240\u5728\u7684\u78c1\u9053\u6240\u82b1\u8d39\u65f6\u95f4\u7684\u5e73\u5747\u503c,\u5927\u69825ms. \u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4 : \u4ee57200\u8f6c/\u5206(120\u8f6c/s)\u7684\u673a\u68b0\u786c\u76d8\u4e3a\u4f8b,\u8f6c\u4e00\u5708\u5927\u6982\u9700\u89811/120=0.008s.. \u6211\u4eec\u77e5\u9053\u6570\u636e\u662f\u5728\u78c1\u9053\u4e0a\u5b58\u7740\u7684, \u8fd0\u6c14\u597d\u5728\u78c1\u9053\u8d77\u59cb\u4f4d\u7f6e\u5c31\u627e\u5230\u4e86,\u8fd0\u6c14\u4e0d\u597d,\u5728\u4e00\u5708\u7684\u672b\u5c3e.. \u53d6\u4e2a\u5e73\u5747\u503c,\u627e\u534a\u5708\u80fd\u627e\u5230,\u4e5f\u5c31\u662f0.004s..4ms.. \u7efc\u4e0a, 7200\u8f6c/\u5206\u7684\u673a\u68b0\u786c\u76d8IO\u5ef6\u8fdf\u65f6\u95f4\u5927\u6982\u662f9ms ,\u770b\u4f3c\u5f88\u77ed,\u4f46\u4e5f\u80fd\u8ba9\u4e00\u4e2a\u7b80\u5355\u7684cpu\u8fd0\u884c\u4e0a\u767e\u4e07\u6761\u4e8c\u8fdb\u5236\u6307\u4ee4.. [\u56fa\u6001\u786c\u76d8] \u00b6 \u4f9d\u8d56\u7535\u5b50\u5b58\u53d6\u6570\u636e,\u9020\u4ef7\u9ad8.. \u4f46\u6bd4\u673a\u68b0\u786c\u76d8\u901f\u5ea6\u5feb,\u56e0\u4e3a\u7701\u53bb\u4e86\u673a\u68b0\u7684\u8fc7\u7a0b.. Ps: \u53ef\u80fd\u4f1a\u5728\u56fa\u6001\u786c\u76d8\u4e0a\u770b\u5230\u7c7b\u4f3c\u4e8e15k\u7684\u53c2\u6570,\u610f\u601d\u5c31\u662f\u6b64\u56fa\u6001\u7684\u901f\u5ea6\u7b49\u540c\u4e8e15000\u8f6c/\u5206\u949f\u7684\u673a\u68b0\u78c1\u76d8. [swap\u865a\u62df\u5185\u5b58] \u00b6 \u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/articles/13915855.html \u8bb8\u591a\u8ba1\u7b97\u673a\u652f\u6301 \u865a\u62df\u5185\u5b58\u673a\u5236 ,\u8be5\u673a\u5236\u4f7f\u8ba1\u7b97\u673a\u53ef\u4ee5\u8fd0\u884c\u5927\u4e8e\u7269\u7406\u5185\u5b58\u7684\u7a0b\u5e8f. \u5b83\u4f1a\u5c06\u6b63\u5728\u4f7f\u7528\u7684\u7a0b\u5e8f\u653e\u5165\u5185\u5b58\u4e2d\u6267\u884c, \u800c\u6682\u65f6\u4e0d\u9700\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u653e\u5230\u78c1\u76d8\u7684\u67d0\u5757\u5730\u65b9,\u8fd9\u5757\u5730\u65b9\u53eb\u505a\u865a\u62df\u5185\u5b58. \u5728linux\u7cfb\u7edf\u4e2d,\u4f1a\u5bf9\u786c\u76d8\u8fdb\u884c\u5206\u533a.. \u5176\u4e2d\u6709\u4e2a\u5206\u533a\u540d\u4e3a swap\u5206\u533a ..(\u5145\u5f53\u4e34\u65f6\u5185\u5b58) \u5f53\u7269\u7406\u5185\u5b58\u4e0d\u591f\u7528\u7684\u65f6\u5019,linux\u624d\u4f1a\u5c06\u5b83\u8ba4\u4e3a\u5185\u5b58\u4e2d\u6682\u65f6\u7528\u4e0d\u5230\u7684\u6570\u636e\u5f80\u786c\u76d8\u7684swap\u5206\u533a\u91cc\u653e... swap\u5206\u533a\u5145\u5f53\u4e34\u65f6\u5185\u5b58,\u662f\u5047\u7684\u5185\u5b58,\u8fd9\u4e00\u5012\u817e,\u901f\u5ea6\u80af\u5b9a\u6162..\u4f46\u662f\u7eed\u547d\u5566(\u00b4\u25bd\uff40) \u524d\u63d0\u662flinux\u7cfb\u7edf\u54e6\uff01\uff01swap\u5206\u533a\u4e0d\u80fd\u50cf\u5176\u4ed6\u786c\u76d8\u7a7a\u95f4\u4e00\u6837\u4f7f\u7528.. \u770b\u4f3c\u6d6a\u8d39,\u5b9e\u5219\u53ef\u4ee5\u5e94\u6025\u4fdd\u547d. Ps: \u77e5\u9053\u4e86\u4e5f\u6ca1\u7528\u7cfb\u5217 -- \u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e0d\u591f\u7528\u7684\u65f6\u5019,linux\u8fd8\u53ef\u80fd\u968f\u673akill\u6389\u8fdb\u7a0b.. IO\u8bbe\u5907 \u00b6 I/O\u8bbe\u5907,\u6307\u7684\u662f\u5373\u80fd\u5f80\u5916\u8bfb\u6570\u636e\u4e5f\u80fd\u5f80\u91cc\u5199\u6570\u636e\u7684\u8bbe\u5907... \u6bd4\u5982\u5185\u5b58\u3001\u786c\u76d8\u662fI/O\u8bbe\u5907; \u952e\u76d8\u9f20\u6807\u51c6\u786e\u70b9\u5e94\u8be5\u53eb\u505a\u8f93\u5165\u8bbe\u5907;\u663e\u793a\u5668\u6253\u5370\u673a\u51c6\u786e\u70b9\u5e94\u8be5\u53eb\u505a\u8f93\u51fa\u8bbe\u5907.. \u4f46\u6211\u4eec\u90fd\u5c06\u5b83\u4eec\u5f52\u4e3aI/O\u8bbe\u5907.. I/O\u8bbe\u5907\u4e00\u822c\u5206\u4e3a\u4e24\u90e8\u5206: \u8bbe\u5907\u63a7\u5236\u5668 \u548c\u8bbe\u5907\u672c\u8eab.. [\u8bbe\u5907\u63a7\u5236\u5668] \u8ba1\u7b97\u673a\u786c\u4ef6\u90fd\u5728\u4e3b\u677f\u4e0a ,\u4e3b\u677f\u4e0a\u6709\u5f88\u591a\u7684\u63a5\u53e3,\u6bcf\u4e2a\u63a5\u53e3(eg \u63a5\u663e\u793a\u5668\u7684VGA\u63a5\u53e3,\u653e\u5185\u5b58\u6761\u7684\u63a5\u53e3,\u786c\u76d8\u7684\u63a5\u53e3\u7b49)\u7684\u80cc\u540e\u90fd\u5bf9\u5e94\u7740\u4e00\u4e2a\u82af\u7247,\u6b64<\u82af\u7247>\u5c31\u53eb\u505a\u8bbe\u5907\u63a7\u5236\u5668.. [\u9a71\u52a8\u7a0b\u5e8f] \u9a71\u52a8\u7a0b\u5e8f\u7b80\u5355\u7406\u89e3\u5c31\u662f\u4f7f I/O\u8bbe\u5907 \u8fd0\u8f6c\u7684\u7a0b\u5e8f.. \u9a71\u52a8\u7a0b\u5e8f\u4f1a\u5b89\u88c5\u5728\u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762\u7684,\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u9a71\u52a8\u7a0b\u5e8f,\u9a71\u52a8\u7a0b\u5e8f\u901a\u8fc7\u63a7\u5236\u8bbe\u5907\u63a7\u5236\u5668\u6765\u63a7\u5236\u8bbe\u5907\u672c\u8eab.. \u6240\u4ee5,\u5b89\u88c5\u5b8c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u6709\u4e2a\u6b65\u9aa4,\u5b89\u88c5\u9a71\u52a8!! \u77e5\u9053\u4e3a\u4ec0\u4e48\u4e86\u5427!(\u00b4\u25bd\uff40) Q: \u9a71\u52a8\u7a0b\u5e8f\u4e0d\u80fd\u7531\u64cd\u4f5c\u7cfb\u7edf\u81ea\u4e2a\u513f\u5f00\u53d1\u5417\uff1f A: \u5148\u4e0d\u8bf4\u5e38\u89c1\u7684\u64cd\u4f5c\u7cfb\u7edf\u6709\u4e09\u4e2a window linux mac.. \u4ee5\u663e\u5361\u4e3a\u4f8b,\u82e5OS\u8fd9\u4e00\u8f6f\u4ef6\u5728\u4e00\u5f00\u59cb\u5c31\u5305\u542b\u4e86\u663e\u5361\u7684\u9a71\u52a8\u7a0b\u5e8f,\u90a3\u4e48\u663e\u5361\u7684\u4e0d\u540c\u751f\u4ea7\u5382\u5546\u751f\u4ea7\u7684\u663e\u5361\u90fd\u5fc5\u987b\u6309\u7167OS\u7684\u663e\u5361\u9a71\u52a8\u7a0b\u5e8f\u7684\u6807\u51c6\u6765\u9020\u663e\u5361,\u4f46\u4e8b\u5b9e\u4e0a\u663e\u5361\u7684\u4e0d\u540c\u751f\u4ea7\u5382\u5546\u9020\u663e\u5361\u7684\u5185\u90e8\u7ec6\u8282\u662f\u4e0d\u4e00\u6837\u7684.. (\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e9b\u5185\u90e8\u7684\u7ec6\u8282\u624d\u4f7f\u4e0d\u540c\u5382\u5546\u751f\u4ea7\u7684\u663e\u5361\u6027\u80fd\u4e0d\u4e00\u6837) \u6240\u4ee5\u663e\u5361\u7684\u5236\u9020\u5382\u5546\u9664\u4e86\u9020\u663e\u5361\u8fd8\u9700\u8981\u9488\u5bf9\u672c\u5382\u5546\u7684\u663e\u5361\u4e13\u95e8\u5f00\u53d1\u663e\u5361\u9a71\u52a8..\u7136\u540e,\u64cd\u4f5c\u7cfb\u7edf\u5b89\u88c5\u672c\u53f0\u8ba1\u7b97\u673a\u6b63\u5728\u4f7f\u7528\u7684\u663e\u5361\u5bf9\u5e94\u5382\u5546\u5f00\u53d1\u7684\u663e\u5361\u9a71\u52a8,\u4fdd\u8bc1\u663e\u5361\u7684\u6b63\u5e38\u8fd0\u884c..(\u517c\u5bb9\u6027\u7684\u4f53\u73b0) \u6ce8\u610f\u54e6,\u663e\u5361\u7684\u4e0d\u540c\u5236\u9020\u5382\u5546\u5f00\u7684\u7684\u663e\u5361\u9a71\u52a8\u90fd\u5fc5\u987b\u9075\u5faaOS\u89c4\u5b9a\u597d\u7684\u63a5\u53e3,\u8fd9\u6837OS\u624d\u80fd\u5b89\u88c5\u5f97\u4e0a\u9a71\u52a8.. Ps: \u901a\u8fc7\u524d\u9762\u6211\u4eec\u77e5\u9053\u8ba1\u7b97\u673a\u542f\u52a8\u4f1a\u5148\u542f\u52a8BIOS,BIOS\u542f\u52a8\u6211\u4eec\u771f\u6b63\u4f7f\u7528\u7684OS(windows\u3001linux\u3001mac),OS\u8fd8\u4f1a\u8981\u6c42BIOS\u53bb\u68c0\u67e5\u4e00\u4e0b\u786c\u4ef6\u76f8\u5173\u7684\u9a71\u52a8\u662f\u5426\u6b63\u5e38.. \u603b\u7ebf \u00b6 \u5317\u6865\u5373 PCI \u6865: \u8fde\u63a5\u9ad8\u901f\u8bbe\u5907\u7684\u82af\u7247 \u5357\u6865\u5373 ISA \u6865: \u8fde\u63a5\u6162\u901f\u8bbe\u5907\u7684\u82af\u7247 \u8ba1\u7b97\u673a\u542f\u52a8\u8fc7\u7a0b \u00b6 step1: \u8ba1\u7b97\u673a\u901a\u7535 step2: \u542f\u52a8BIOS(\u8ba1\u7b97\u673a\u542f\u52a8\u4e00\u5b9a\u4f1a\u5148\u542f\u52a8\u6b64\u7cfb\u7edf); \u626b\u63cf\u542f\u52a8\u8bbe\u5907/\u542f\u52a8\u76d8(\u5149\u76d8\u3001U\u76d8\u3001\u672c\u5730\u786c\u76d8\u7b49),\u4f9d\u6b21\u68c0\u7d22(\u6709\u9ed8\u8ba4\u7684\u987a\u5e8f,\u53ef\u8c03 \u53c2\u6570\u4f1a\u5728CMOS\u91cc\u4fdd\u5b58). \u82e5\u5728\u67d0\u4e00\u542f\u52a8\u8bbe\u5907\u4e2d\u627e\u5230\u64cd\u4f5c\u7cfb\u7edf,\u5c31\u5f00\u59cb\u5f80\u5185\u5b58\u91cc\u8bfb;\u82e5\u90fd\u6ca1\u6709\u627e\u5230,\u505c\u5728BIOS\u754c\u9762... Ps \u901a\u5e38\u4e00\u95ea\u800c\u8fc7,\u6beb\u65e0\u5bdf\u89c9\u5c31\u8fdb\u5165\u4e86window\u754c\u9762.. \u53ef\u4ee5\u901a\u8fc7\u5f00\u673a\u6309\u952e\u505c\u5728BIOS\u754c\u9762 step3: \u64cd\u4f5c\u7cfb\u7edf\u7684\u5f15\u5bfc\u4fe1\u606f\u4f1a\u653e\u5728\u542f\u52a8\u76d8\u7b2c\u4e00\u4e2a\u5206\u533a\u91cc,\u8fd9\u662f\u56fa\u5b9a\u6b7b\u7684.. \u8bfb\u53d6\u542f\u52a8\u76d8\u7684\u7b2c\u4e00\u4e2a\u6247\u533a\u7684\u6570\u636e(\u79f0\u4e4b\u4e3a \u4e3b\u5f15\u5bfc\u8bb0\u5f55MBR );\u5176\u5927\u5c0f\u4e3a512\u5b57\u8282.. \u524d446\u5b57\u8282\u4e3a\u5f15\u5bfc\u4fe1\u606f,\u91cc\u9762\u6709\u4e00\u4e2abootloader'\u542f\u52a8\u52a0\u8f7d'\u7a0b\u5e8f -- grub\u7a0b\u5e8f; \u540e46\u5b57\u8282\u4e3a\u5206\u533a\u4fe1\u606f; \u6700\u540e2\u5b57\u8282\u4e3a\u7ed3\u675f\u6807\u5fd7\u4f4d.. BIOS\u53ea\u9700\u8981\u5c06grap\u7a0b\u5e8f\u5f80\u5185\u5b58\u91cc\u8bfb grap\u8d1f\u8d23\u5c06OS\u5185\u6838\u88c5\u8f7d\u8fdb\u5185\u5b58,\u542f\u52a8OS(\u5373\u5c06\u64cd\u4f5c\u7cfb\u7edf\u5269\u4e0b\u7684\u5927\u90e8\u961f\u62db\u547c\u8fdb\u5185\u5b58) step4: \u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8ba9BIOS\u53bb\u68c0\u6d4b\u9a71\u52a8\u7a0b\u5e8f\u662f\u5426\u6b63\u5e38..\u82e5\u6ca1\u6709\u95ee\u9898,BIOS\u5c31\u9000\u51fa\u821e\u53f0,OS\u63a5\u7ba1\u6574\u4e2a\u786c\u4ef6\u7684\u8fd0\u884c! \u4f18\u5316/\u964d\u4f4eIO \u00b6 \u6240\u6709\u4f18\u5316\u5230\u6700\u540e\u90fd\u4f1a\u505c\u7559\u5230IO\u6027\u80fd\u7684\u4f18\u5316\u4e0a.. \u6700\u4e3b\u8981\u7684\u662f\u786c\u76d8IO. \u6bd4\u59827200\u8f6c/\u5206\u7684\u673a\u68b0\u786c\u76d8IO\u5ef6\u8fdf\u65f6\u95f4\u5927\u6982\u662f9ms,\u8fd99ms\u7684\u65f6\u95f4cpu\u5c31\u662f\u95f2\u7740\u7684.. \u4e3a\u4e86\u5c3d\u91cf\u8ba9cpu\u4e0d\u95f2\u7740,\u4e0d\u96be\u53d1\u73b0,\u6211\u4eec\u9700\u8981\u7740\u91cd\u4e8e\u4f18\u5316<\u786c\u76d8-\u5185\u5b58>\u8fd9\u4e00\u73af\u8282..\u964d\u4f4e\u786c\u76d8IO.. \u5148\u6765\u770b\u770b linux\u64cd\u4f5c\u7cfb\u7edf<\u8fd9\u4e2a\u8f6f\u4ef6> \u5728\u8fd9\u4e00\u73af\u8282\u600e\u4e48\u505a\u7684. linux\u81ea\u5e26\u4f18\u5316\u673a\u5236 cache\u7f13\u5b58 (\u4ece\u786c\u76d8\u4e2d\u8bfb\u6570\u636e\u5230\u5185\u5b58)\u548c buffer\u7f13\u51b2\u533a (\u4ece\u5185\u5b58\u5f80\u786c\u76d8\u4e2d\u5b58\u6570\u636e) \u8bfb \u5148\u4e0d\u5220,\u5728\u5185\u5b58\u4e2d\u7f13\u5b58\u4e0b\u6765,\u4e0b\u6b21\u8bfb\u5c31\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u53d6\u5c31\u884c;\u5199 \u6512\u4e00\u6ce2\u518d\u5b58; \u6ce8\u610f,\u91ca\u653ecache\u6ca1\u5f71\u54cd,\u91ca\u653ebuffer\u65f6\u8981\u5148\u628a\u5185\u5b58\u7684\u6570\u636e\u5237\u5230\u786c\u76d8\u91cc\u9762\u53bb. sync \u8981\u77e5\u9053,OS\u4e0d\u80fd\u628a\u6240\u6709\u7684\u786c\u76d8\u6570\u636e\u90fd\u7f13\u5b58\u5230\u5185\u5b58\u91cc,\u53ea\u4f1a\u7f13\u5b58linux\u81ea\u5df1\u89c9\u5f97\u4f60\u4f1a\u7ecf\u5e38\u8bbf\u95ee\u7684\u6570\u636e.. \u5e76\u4e14linux\u7f13\u5b58\u7684\u6570\u636e\u4e0d\u4e00\u5b9a\u662f\u6211\u4eec\u81ea\u4e2a\u513f\u5f00\u53d1\u7684\u5e94\u7528\u8f6f\u4ef6\u60f3\u8981\u7684.. \u6240\u4ee5\u5728\u6211\u4eec \u81ea\u5df1\u5199\u7684\u8f6f\u4ef6 ,\u60f3\u8981\u964d\u4f4e\u786c\u76d8IO, \u8981\u6709\u7c7b\u4f3c\u7684\u673a\u5236, \u9075\u5faa\u4e24\u4e2a\u4f18\u5316\u539f\u5219: 1> \u9488\u5bf9\u8bfb\u64cd\u4f5c, \u6570\u636e\u80fd\u4ece\u5185\u5b58\u4e2d\u53d6\u5c31\u4e0d\u8981\u4ece\u786c\u76d8.. 2> \u9488\u5bf9\u5199\u64cd\u4f5c, \u5728\u5185\u5b58\u4e2d\u6512\u4e00\u6ce2\u518d\u5199\u5165\u786c\u76d8..","title":"\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_1","text":"\u4e2a\u4eba\u7535\u8111\u8ddf\u670d\u52a1\u5668\u90fd\u662f\u8ba1\u7b97\u673a,\u53ea\u4e0d\u8fc7\u524d\u8005\u662f\u670d\u52a1\u4e8e\u4e00\u4e2a\u4eba,\u540e\u8005\u662f\u670d\u52a1\u4e8e\u591a\u4e2a\u4eba..","title":"\u670d\u52a1\u5668"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_2","text":"1> \u6309\u7167\u5c3a\u5bf8 1U=4.45cm ( U\u8868\u793a\u670d\u52a1\u5668\u7684\u539a\u5ea6 ) 2> \u6309\u7167\u5916\u5f62 \u673a\u67b6\u5f0f\u670d\u52a1\u5668\u662f\u653e\u5728\u673a\u67b6\u4e0a\u7684; \u5200\u67b6\u670d\u52a1\u5668 ( \u8d35 \u901a\u5e38\u7528\u4e8e\u96c6\u7fa4\u5316\u4f5c\u4e1a,\u4fbf\u4e8e\u6269\u5c55 ) \u5854\u5f0f\u670d\u52a1\u5668 3> \u6309\u7167\u54c1\u724c \u6234\u5c14 \u60e0\u666e IBM \u670d\u52a1\u5668\u6700\u597d\u4e00\u76f4\u8fd0\u884c\u7740\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1,\u4e0d\u8981\u5b95\u673a; \u4f46\u5bf9\u786c\u4ef6\u7684\u635f\u8017\u5f88\u5927,\u8981\u505a\u597d\u5bf9\u786c\u4ef6\u7684\u76d1\u63a7,\u9632\u8303\u4e8e\u672a\u7136. \u6709\u4e9b\u670d\u52a1\u5668\u8fd8\u6709IDRAC\u7ba1\u7406\u53e3,\u7528\u4e8e\u914d\u5236\u8fdc\u7a0b\u7ba1\u7406\u5361,\u53ef\u4ee5\u8fdc\u7a0b\u5f00\u5173\u673a\u670d\u52a1\u5668.. Q: \u670d\u52a1\u5668\u7684\u5b89\u7f6e? A: \u673a\u623f\u4f1a\u63d0\u4f9b\u663e\u793a\u5668\u65b9\u4fbf\u673a\u67b6\u5f0f\u670d\u52a1\u5668\u7684\u4e0a\u67b6( \u521d\u6b21\u4f1a\u7ed9\u670d\u52a1\u5668\u5b89\u88c5OS,\u914d\u7f51\u7edc\u7b49.. ); \u518d\u56de\u5230\u516c\u53f8,\u901a\u8fc7xshll\u8fdc\u7a0b\u8fde\u63a5. \u4f46\u73b0\u5728\u5f88\u591a\u516c\u53f8\u90fd\u4e0d\u4e70\u670d\u52a1\u5668,\u7528\u4e91\u670d\u52a1\u5668..(\u4e91\u4e3b\u673a\u5382\u5546 -- \u963f\u91cc\u4e91 \u817e\u8baf\u4e91 \u9752\u4e91 ucloud) Q: \u5982\u4f55\u4fdd\u8bc1\u670d\u52a1\u5668\u4e0d\u65ad\u7535? A: \u53cc\u7535\u6e90 + ups + \u53d1\u7535\u673a. ups\u76f8\u5f53\u4e8e\u4e00\u5757\u84c4\u7535\u6c60.. \u5e02\u7535\u63a5\u5230ups\u4e0a,ups\u518d\u7ed9\u670d\u52a1\u5668\u4f9b\u7535,\u4e00\u65e6\u65ad\u7535,ups\u8fd8\u53ef\u4ee5\u4f9b\u7535\u4e00\u6bb5\u65f6\u95f4..","title":"\u670d\u52a1\u5668\u7684\u5206\u7c7b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#ioe","text":"\u53bbIOE\u524d \u53bbIOE\u540e IBM: \u670d\u52a1\u5668 dell\u670d\u52a1\u5668 Oracle: \u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6 mysql EMC: \u6570\u636e\u5b58\u50a8\u8bbe\u5907 \u7528\u666e\u901a\u786c\u76d8\u6784\u5efa ceph\u5757\u5b58\u50a8\u3001nfs\u6587\u4ef6\u5b58\u50a8\u3001swift\u5bf9\u8c61\u5b58\u50a8 Ps: \u5c0f\u578b\u673a \u4e00\u822c\u4f1a\u57fa\u4e8eUnix\u5b9a\u5236\u4e13\u95e8\u7684OS.. \u67b6\u6784\u4e5f\u4e0d\u4e00\u6837,\u91c7\u7528\u7684\u7cbe\u7b80\u6307\u4ee4\u96c6\u5904\u7406\u5668.. (\u5c0f\u578b\u673a\u56e0\u4e3a\u53bbIOE\u8fd0\u52a8\u88ab\u6dd8\u6c70\u4e86 \u6bd4\u8f83\u6709\u540d\u7684\u662fIBM) \u8865\u5145: \u670d\u52a1\u5668\u7684\u96c6\u7fa4\u4f1a\u6709\u4e00\u4e2a\u5e26\u5934\u5927\u54e5,\u8d1f\u8d23\u8bf7\u6c42\u7684\u4e00\u4e9b\u5206\u53d1,\u8d1f\u8f7d\u5747\u8861 ( \u6709\u4e24\u79cd\u7ea7\u522b:\u786c\u4ef6>\u8f6f\u4ef6 \u901a\u5e38\u63a5\u89e6\u7684\u662f\u8f6f\u4ef6 ) eg: nginx-7\u5c42 ; lvs-4\u5c42 [ \u7f51\u7ebf ] \u6a59\u767d \u6a59 \u7eff\u767d \u84dd \u84dd\u767d \u7eff \u68d5\u767d \u68d5","title":"\u53bbIOE\u8fd0\u52a8"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_3","text":"\u6469\u5c14\u5b9a\u5f8b: \u786c\u4ef6\u7684\u6027\u80fd\u6bcf\u969418\u4e2a\u6708\u4f1a\u66f4\u65b0\u4e00\u500d.. (\u73b0\u5728\u4e0d\u9002\u7528\u5566Hhh) \u6ce8\u610f,\u5728\u516c\u53f8\u91cc\u4e0d\u5efa\u8bae\u81ea\u5df1\u7ec4\u88c5\u7535\u8111,\u4e0d\u7a33\u5b9a.. \u81ea\u4e2a\u513f\u4e70\u786c\u4ef6\u88c5\u7535\u8111,\u82e5\u662f\u53cccpu,\u9700\u8981\u88c5\u540c\u4e00\u578b\u53f7\u7684..","title":"\u8ba1\u7b97\u673a\u786c\u4ef6"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_4","text":"1> \u63a7\u5236\u5668: \u8ba1\u7b97\u673a\u7684\u6307\u6325\u7cfb\u7edf,\u8d1f\u8d23\u63a7\u5236\u5176\u4ed6\u786c\u4ef6\u7684\u8fd0\u884c. --- \u5927\u8111\u7684\u6307\u6325\u80fd\u529b 2> \u8fd0\u7b97\u5668: \u8d1f\u8d23\u8fd0\u7b97(\u6570\u5b66\u8fd0\u7b97\u548c\u903b\u8f91\u8fd0\u7b97) --- \u5927\u8111\u7684\u601d\u8003\u80fd\u529b 3> \u5b58\u50a8\u5668: \u8d1f\u8d23\u5b58\u50a8\u6570\u636e \u5185\u5b58 : \u57fa\u4e8e<\u7535>(\u9ad8\u4f4e\u7535\u5e73)\u5b58\u53d6\u6570\u636e.. \u65ad\u7535\u6570\u636e\u5168\u90e8\u4e22\u5931. --- \u5927\u8111\u7684\u8bb0\u5fc6\u529f\u80fd \u53ea\u80fd \u4e34\u65f6 \u4fdd\u5b58\u6570\u636e.. \u5b58\u53d6\u901f\u5ea6\u5f88 \u5feb . \u5916\u5b58 : \u4ee5\u78c1\u76d8\u4e3a\u4f8b.. \u57fa\u4e8e<\u78c1>\u5b58\u53d6\u6570\u636e.. \u65ad\u7535\u6570\u636e\u4ecd\u7136\u5b58\u5728. --- \u672c\u5b50 \u53ef\u4ee5 \u6c38\u4e45 \u4fdd\u5b58\u6570\u636e,\u5b58\u53d6\u901f\u5ea6\u76f8\u5bf9 \u6162 \u4e00\u4e9b.. 4> \u8f93\u5165\u8bbe\u5907: eg \u952e\u76d8\u3001\u9f20\u6807 --- \u4eba\u7684\u773c\u775b\u8033\u6735 5> \u8f93\u51fa\u8bbe\u5907: eg \u663e\u793a\u5668\u3001\u6253\u5370\u673a --- \u9762\u90e8\u8868\u60c5 \u63a7\u5236\u5668 + \u8fd0\u7b97\u5668 = CPU\u4e2d\u592e\u5904\u7406\u5668 CPU + \u5185\u5b58 ---> \u5927\u8111\uff01 cpu(x86-64) ; \u5185\u5b58(buffer\u3001cache) ; \u786c\u76d8(IDE\u3001SATA\u3001SAS\u63a5\u53e3; \u673a\u68b0\u3001SSD\u56fa\u6001)","title":"\u786c\u4ef6\u4e94\u5927\u7ec4\u6210"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_5","text":"\u8ba1\u7b97\u673a\u4e09\u5927\u6838\u5fc3 : cpu\u3001\u5185\u5b58(\u4e3b\u5b58\u50a8\u5668)\u3001\u786c\u76d8","title":"\u7a0b\u5e8f\u4e0e\u4e09\u5927\u6838\u5fc3\u7684\u5173\u7cfb"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_6","text":"\u6211\u4eec\u7ecf\u5e38\u63d0\u5230\u7684<\u8fdb\u7a0b>\u8bf4\u7684\u5c31\u662f<\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f>, \u5373\u7a0b\u5e8f\u4ece\u786c\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e86.. 1> \u4e0b\u8f7d\u5b89\u88c5(\u5c31\u662f\u62f7\u8d1d\u6587\u4ef6)\u7684\u8f6f\u4ef6(\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u5806\u4ee3\u7801\u6587\u4ef6..)\u4f1a\u88c5\u5230\u786c\u76d8\u4e0a... \u8ba1\u7b97\u673a\u786c\u76d8\u7684\u5927\u5c0f\u51b3\u5b9a\u4e86\u80fd\u591f \u5b89\u88c5 \u7684\u8f6f\u4ef6\u6570\u76ee 2> \u8f6f\u4ef6\u7684\u8fd0\u884c\u4f1a\u5c06\u7a0b\u5e8f\u7684 [\u4ee3\u7801\u548c\u6570\u636e] \u4ece\u786c\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d \u8ba1\u7b97\u673a\u5185\u5b58\u7684\u5927\u5c0f\u51b3\u5b9a\u4e86\u80fd\u591f \u540c\u65f6\u8fd0\u884c \u7684\u8f6f\u4ef6\u6570\u76ee 3> \u8f6f\u4ef6\u7684 <\u542f\u52a8> \u901f\u5ea6 \u662f\u7531\u786c\u76d8\u51b3\u5b9a\u7684,\u56e0\u4e3a\u5b83\u9700\u8981\u4ece\u786c\u76d8\u8bfb\u5165\u5185\u5b58. \u56fa\u6001\u4f1a\u6bd4\u673a\u68b0\u5feb.. so,\u5f00\u673a\u901f\u5ea6(\u4f1a\u52a0\u8f7d\u64cd\u4f5c\u7cfb\u7edf,\u64cd\u4f5c\u7cfb\u7edf\u4e5f\u662f\u4e00\u4e2a\u8f6f\u4ef6)\u4e5f\u8ddf\u786c\u76d8\u6709\u5173.","title":"\u5b89\u88c5\u3001\u52a0\u8f7d"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_7","text":"cpu\u518d\u4ece\u5185\u5b58\u4e2d\u8bfb\u53d6\u6570\u636e\u8fdb\u884c\u8fd0\u7b97\u4ee5\u53ca\u5bf9\u5176\u4ed6\u786c\u4ef6\u7684\u63a7\u5236. cpu\u8fd0\u7b97\u4ea7\u751f\u7684\u6570\u636e\u5f80\u5185\u5b58\u3001\u786c\u76d8\u91cc\u9762\u5b58. cache \u7f13\u5b58 (\u8bfb): linux\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u8bfb\u53d6\u6570\u636e\u7684\u4f18\u5316\u673a\u5236. \u5b83\u4f1a\u5c06\u786c\u76d8\u6570\u636e\u5728\u5185\u5b58\u4e2d\u5148\u7f13\u5b58\u597d,cpu\u53d6\u7684\u65f6\u5019\u53ef\u4ee5\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u53bb.. \u4e3e\u4f8b : \u8bfb\u53d6\u786c\u76d8\u4e2d\u7684\u67d0\u4e00\u6587\u4ef6,\u7b2c\u4e00\u6b21\u6ca1\u5565\u901f\u5ea6\u63d0\u5347. \u7b2c\u4e8c\u6b21\u8bfb\u53d6\u5b83\u65f6\u5c31\u76f4\u63a5\u8bfb\u5185\u5b58\u91cc\u7684cache\u7f13\u5b58\u5c31\u884c.\u901f\u5ea6\u63d0\u5347. \u6ce8\u610f : cache\u4e0d\u80fd\u7f13\u5b58\u786c\u76d8\u6240\u6709\u7684\u6570\u636e,\u5b83\u53ea\u4f1a\u7f13\u5b58\u5e38\u7528\u7684,\u7ecf\u5e38\u8bbf\u95ee\u7684\u6570\u636e.. (\u600e\u4e48\u5224\u522b\uff1flinux\u64cd\u4f5c\u7cfb\u7edf\u8bf4\u7684\u7b97) \u5185\u5b58\u4e0d\u591f\u7528\u4e86,\u6211\u4eec\u53ef\u4ee5\u5c06\u5185\u5b58\u4e2dcache\u7f13\u5b58\u7a7a\u95f4\u91ca\u653e\u6389... buffer \u7f13\u51b2\u533a (\u5199): \u4e0d\u4f1a\u7acb\u9a6c\u5c06\u6570\u636e\u5f80\u786c\u76d8\u91cc\u5237,Linux\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u6b64\u6709\u4e2a\u4f18\u5316 \u5f53\u6709\u6570\u636e\u8981\u4ece\u5185\u5b58\u653e\u5230\u786c\u76d8\u91cc\u65f6,OS\u4f1a\u5c06\u6570\u636e\u5728\u5185\u5b58\u91cc\u7f13\u51b2\u4e0b,\u6512\u4e00\u5927\u6ce2,\u518d\u4e00\u8d77\u5f80\u786c\u76d8\u91cc\u9762\u9001.. \u5c0f\u63d0\u4e00\u5634: cache\u7f13\u5b58\u548cbuffer\u7f13\u51b2\u533a\u662flinux\u64cd\u4f5c\u7cfb\u7edf\u81ea\u5e26\u7684\u4f18\u5316\u673a\u5236,windows\u7cfb\u7edf\u662f\u6ca1\u6709\u7684. buffer\u548ccache\u7684\u7a7a\u95f4\u53ef\u4ee5\u91ca\u653e\u6389,\u4f46\u901a\u5e38\u91ca\u653ecache; buff\u7684\u91ca\u653e\u8981\u8c28\u614e\u70b9,\u907f\u514d\u91ca\u653e\u65f6\u6570\u636e\u8fd8\u672a\u5199\u5230\u786c\u76d8..","title":"\u7f13\u5b58\u3001\u7f13\u51b2\u533a"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#cpu","text":"\u4e24\u4e2a\u751f\u4ea7\u5382\u5546: Intel AMD","title":"cpu\u8be6\u89e3"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#x86-64","text":"\u8ba1\u7b97\u673a\u662f\u57fa\u4e8e\u7535\u5de5\u4f5c\u7684,\u6240\u4ee5\u5185\u5b58\u91cc\u653e\u7684\u662f\u7535\u4fe1\u53f7..\u8868\u793a01\u4e8c\u8fdb\u5236\u7684\u9ad8\u4f4e\u7535\u5e73... \u786c\u76d8\u4ee5\u78c1\u76d8\u4e3a\u4f8b. \u78c1\u7684\u7279\u6027\u8ddf\u7535\u4e5f\u662f\u4e00\u6837\u9ad8\u4f4e\u53d8\u5316\u7684.. \u4ece\u78c1\u76d8\u8bfb\u6570\u636e\u5230\u5185\u5b58,\u5c31\u662f\u5c06\u78c1\u4fe1\u53f7\u8f6c\u6210\u7535\u4fe1\u53f7. 32/64\u4f4d: 32\u4f4d/64 \u4f4d cpu\u5206\u522b\u4ee3\u8868\u6bcf\u6b21(\u4e00\u6b21\u6027)\u80fd\u4ece\u5185\u5b58\u91cc\u8bfb\u53d6\u768432/64\u4e2a \u4e8c\u8fdb\u5236\u6570 \u5b83\u4eec\u89c4\u5b9a32/64\u4f4d\u4f1a\u7ec4\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u6307\u4ee4 .. \u6362\u4e2a\u8bf4\u6cd5,\u6307\u7684\u662fcpu\u4e00\u6b21(\u4e00\u4e2a\u6307\u4ee4)\u80fd\u5904\u7406\u591a\u5927\u7684\u6570\u636e.. \u5b66\u672f\u4e00\u70b9, 32\u4f4d\u6307\u7684\u662fCPU\u901a\u7528\u5bc4\u5b58\u5668\u7684\u6570\u636e\u5bbd\u5ea6 ,32\u4f4d\u5904\u7406\u5668\u4e00\u6b21\u53ea\u80fd\u5904\u740632\u4f4d,\u4e5f\u5c31\u662f4\u4e2a\u5b57\u8282\u7684\u6570\u636e; \u800c64\u4f4d\u5904\u7406\u5668\u4e00\u6b21\u5c31\u80fd\u5904\u740664\u4f4d, \u53738\u4e2a\u5b57\u8282\u7684\u6570\u636e. \u5982\u679c\u5c06\u603b\u957f128\u4f4d\u7684\u6307\u4ee4\u5206\u522b\u630916\u4f4d\u300132\u4f4d\u300164\u4f4d\u4e3a\u5355\u4f4d\u8fdb\u884c\u7f16\u8f91\u7684\u8bdd, 32\u4f4d\u7684\u5904\u7406\u5668\u9700\u89814\u4e2a\u6307\u4ee4; \u800c64\u4f4d\u5904\u7406\u5668\u5219\u53ea\u8981\u4e24\u4e2a\u6307\u4ee4.\u663e\u7136, \u5728\u5de5\u4f5c\u9891\u7387\u76f8\u540c\u7684\u60c5\u51b5\u4e0b, 64\u4f4d\u5904\u7406\u5668\u7684\u5904\u7406\u901f\u5ea6\u6bd432\u4f4d\u7684\u66f4\u5feb... x86\u67b6\u6784: x86\u662f\u9488\u5bf9cpu\u7684\u578b\u53f7\u6216\u8005\u8bf4\u67b6\u6784\u7684\u4e00\u79cd\u7edf\u79f0. \u6700\u65e9\u7684\u90a3\u9897\u7531Intel\u53d1\u660e\u51fa\u6765\u7684CPU\u4ee3\u53f7\u79f0\u4e3a8086,\u540e\u6765\u57288086\u7684\u57fa\u7840\u4e0a\u53c8\u5f00\u53d1\u51fa\u4e8680286\u300180386...., \u56e0\u6b64\u8fd9\u79cd\u67b6\u6784\u7684CPU\u5c31\u88ab\u7edf\u79f0\u4e3ax86\u67b6\u6784\u5566. \u7a0b\u5e8f\u5458\u5f00\u53d1\u51fa\u7684\u8f6f\u4ef6\u6700\u7ec8\u90fd\u8981\u7ffb\u8bd1\u6210cpu\u7684\u6307\u4ee4\u96c6\u624d\u80fd\u8fd0\u884c, \u56e0\u6b64\u8f6f\u4ef6\u7684\u7248\u672c\u5fc5\u987b\u4e0ecpu\u7684\u67b6\u6784(eg: x86)\u5951\u5408. \u5e76\u4e14, , 64\u4f4d\u7684cpu\u65e2\u80fd\u8fd0\u884c64\u4f4d\u8f6f\u4ef6,\u4e5f\u80fd\u8fd0\u884c32\u4f4d\u7684\u8f6f\u4ef6... \u5b89\u88c5\u5305 mysql-5.7.20-win32.zip \u91cc\u768432\u5c31\u4ee3\u8868\u6b64\u8f6f\u4ef6\u662f32\u4f4d\u7684,\u80fd\u8fd0\u884c\u572832\u4f4d\u548c64\u4f4d\u7684cpu\u4e4b\u4e0a. x86-64 \u6307\u8fd0\u884c\u5728 \u590d\u6742\u6307\u4ee4\u96c6\u768464\u4f4dcpu \u4e0a.","title":"x86-64"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#cpu_1","text":"","title":"cpu\u6307\u4ee4\u96c6"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_8","text":"\u6ce8\u610f\u54e6 , cpu\u4e0d\u4f1a\u81ea\u53d1\u7684\u63a7\u5236\u5176\u4ed6\u786c\u4ef6\u7684\u8fd0\u884c.\u56e0\u4e3acpu\u672c\u8eab\u4e5f\u662f\u786c\u4ef6, \u786c\u4ef6\u90fd\u4f1a\u53d7\u8f6f\u4ef6\u7684\u652f\u914d !!! \u4eba\u7c7b \u901a\u8fc7 \u7f16\u5199\u7a0b\u5e8f\u8f6f\u4ef6 \u6765\u63a7\u5236 cpu ,\u8fd9\u4e9b\u4eba\u7c7b\u7684\u6307\u4ee4\u6307\u6325cpu \u5185\u90e8\u96c6\u6210\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4\u96c6 \u6765\u64cd\u4f5c \u5176\u5b83\u8ba1\u7b97\u673a\u786c\u4ef6 \u800c\u65e9\u671f\u7684\u4e8c\u6781\u7ba1\u76f8\u5f53\u4e8e\u4eba\u7c7b\u76f4\u63a5\u7f16\u5199\u4e8c\u8fdb\u5236\u6307\u4ee4\u6765\u63a7\u5236\u8ba1\u7b97\u673a\u786c\u4ef6.. \u7b80\u5355\u6765\u8bf4: \u53d6\u6307 (\u7a0b\u5e8f\u6307\u4ee4) -- \u89e3\u7801 (\u5177\u4f53\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4) -- \u6267\u884c (\u64cd\u4f5c\u76f8\u5e94\u786c\u4ef6) \u73b0\u5728\u7684cpu\u53ef\u4ee5\u6709\u591a\u6761\u8fd9\u6837\u7684\u6d41\u6c34\u7ebf(\u53d6\u6307--\u89e3\u7801--\u6267\u884c) \u5e73\u5e38\u6211\u4eec\u8bf4\u76842\u68384\u7ebf\u7a0b\u91cc\u9762\u7684\u7ebf\u7a0b\u6307\u7684\u5c31\u662f\u8fd9\u6837\u7684\u6d41\u6c34\u7ebf.. 2\u6838,\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u5c062\u4e2acpu\u6838\u5fc3\u96c6\u6210\u5230\u4e86\u4e00\u4e2acpu\u4e0a. 2\u68384\u7ebf\u7a0b,\u6307\u7684\u662f2\u6838\u67094\u6761\u6d41\u6c34\u7ebf,\u5373\u6bcf\u4e2a\u6838\u5185\u90e8\u6709\u4e24\u6761\u6d41\u6c34\u7ebf..\u7269\u7406\u5c42\u9762\u76842\u6838,\u5047\u7684\u56db\u6838. \u6027\u80fd\u6bd4\u8f83: \u7eaf4\u6838 > 2\u68384\u7ebf\u7a0b > \u7eaf2\u6838 \u6ce8\u610f\u54e6! \u591a\u7ebf\u7a0b\u8fd0\u884ccpu\u4fdd\u6301\u4e24\u4e2a\u4e0d\u540c\u7684\u7ebf\u7a0b\u72b6\u6001,\u53ef\u4ee5\u5728\u7eb3\u79d2\u7ea7\u7684\u65f6\u95f4\u5185\u6765\u56de\u5207\u6362,\u901f\u5ea6\u5feb\u5230\u4f60\u770b\u5230\u7684\u7ed3\u679c\u662f\u5e76\u53d1\u7684,\u4f2a\u5e76\u884c\u7684. \u7136\u800c\u591a\u7ebf\u7a0b\u4e0d\u63d0\u4f9b\u771f\u6b63\u7684\u5e76\u884c\u5904\u7406,\u4e00\u4e2acpu\u540c\u4e00\u65f6\u523b\u53ea\u80fd\u5904\u7406\u4e00\u4e2a\u8fdb\u7a0b(\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u81f3\u5c11\u4e00\u4e2a\u7ebf\u7a0b) <Inter\u548cAMD\u5728\u5bf9\u591a\u6838\u82af\u7247\u7684\u8bbe\u8ba1\u4e0a\u4e0d\u540c> \u9996\u5148\u8981\u77e5\u9053,\u901a\u5e38\u8bf4\u7684L1\u7f13\u5b58\u6307\u7684\u5c31\u662fcpu\u5185\u90e8\u7684\u5bc4\u5b58\u5668,L2\u7f13\u5b58(\u4e0d\u5728cpu\u91cc\u9762)\u662f\u5904\u4e8e\u5185\u5b58\u548c\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u9ad8\u901f\u5b58\u53d6\u8bbe\u5907. \u4ee54\u6838\u4e3a\u4f8b,Inter\u76844\u4e2a\u6838\u5171\u4eab\u4e00\u4e2aL2\u7f13\u5b58;\u800cAMD\u7684\u6bcf\u4e2a\u6838\u90fd\u6709\u4e0e\u81ea\u5df1\u5173\u8054\u7684L2\u7f13\u5b58.. \u76f8\u6bd4\u4e4b\u4e0b,AMD\u8981\u5904\u7406\u7f13\u5b58\u6570\u636e\u540c\u6b65\u7684\u95ee\u9898..Inter\u8981\u89e3\u51b3\u7f13\u5b58\u6570\u636e\u7ade\u4e89\u7684\u95ee\u9898..","title":"\u7b80\u4ecb"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_9","text":"cpu\u5185\u90e8\u96c6\u6210\u7684\u5fae\u6307\u4ee4\u96c6\u5206\u4e3a\u4e24\u7c7b: \u7cbe\u7b80\u548c\u590d\u6742.. 1> \u7cbe\u7b80\u6307\u4ee4\u96c6(\u4e86\u89e3): \u4f18: \u6307\u4ee4\u77ed,\u6bcf\u4e2a\u6307\u4ee4\u7684\u8fd0\u884c\u65f6\u95f4\u90fd\u5f88\u77ed, \u5b8c\u6210\u7684\u52a8\u4f5c\u4e5f\u5f88\u5355\u7eaf,\u4e0d\u5bb9\u6613\u51fa\u9519; \u52a3: \u5b9e\u73b0\u4e00\u4e2a\u529f\u80fd,\u6240\u9700\u7684\u6307\u4ee4\u6761\u6570\u4f1a\u5f88\u591a.. \u6240\u4ee5\u8bbe\u8ba1\u8d77\u6765\u4f1a\u6bd4\u8f83\u590d\u6742. 2> \u590d\u6742\u6307\u4ee4\u96c6 : \u6bcf\u6761\u6307\u4ee4\u82b1\u8d39\u7684\u65f6\u95f4\u8f83\u957f, \u4f46\u6bcf\u6761\u4e2a\u522b\u6307\u4ee4\u53ef\u4ee5\u5904\u7406\u7684\u5de5\u4f5c\u8f83\u4e3a\u4e30\u5bcc.. \u6240\u4ee5\u8bbe\u8ba1\u8d77\u6765\u4f1a\u6bd4\u8f83\u7b80\u5355. eg: Intel\u5f00\u53d1\u7684 x86\u67b6\u6784 \u7684CPU.","title":"\u5206\u7c7b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#cpu_2","text":"\u5bc4\u5b58\u5668: \u4e0ecpu\u4e00\u6837\u7684\u6750\u8d28\u5236\u6210,\u901f\u5ea6\u975e\u5e38\u5feb,\u51e0\u4e4e\u65e0\u5ef6\u8fdf.. \u4e0d\u662f\u5b58\u50a8\u7684\u4e3b\u529b.\u4e0e\u5185\u5b58\u4e00\u6837\u65ad\u7535\u65e0. CPU\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u6570\u636e\u5148\u653e\u5230\u81ea\u5df1\u7684\u5bc4\u5b58\u5668\u4e2d,\u518d\u653e\u5230\u5185\u5b58\u4e2d...\u4e3a\u4e86\u6c38\u4e45\u5b58\u50a8\u518d\u5012\u817e\u5230\u786c\u76d8\u4e2d. \u5982\u4f55\u63d0\u901f,\u5728\u5f7c\u6b64\u4e4b\u95f4\u52a0\u9ad8\u901f\u8bbe\u5907! \u5bc4\u5b58\u5668 - \u5185\u5b58 - \u786c\u76d8 \u5b58\u5728\u5373\u5408\u7406..(\u9020\u4ef7 \u5bb9\u91cf \u901f\u5ea6)","title":"cpu\u5bc4\u5b58\u5668"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_10","text":"\u4ece\u8ba1\u7b97\u673a\u6574\u4f53\u7684\u89d2\u5ea6(\u6216\u8bf4\u662fcpu\u7684\u89c6\u89d2) : \u5185\u6838\u6001 : \u8ba1\u7b97\u673a\u5185\u5b58\u6b63\u5728\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u7a0b\u5e8f,\u53ef\u4ee5\u64cd\u4f5c\u786c\u4ef6 \u7528\u6237\u6001 : \u8ba1\u7b97\u673a\u5185\u5b58\u6b63\u5728\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f,\u4e0d\u80fd\u64cd\u4f5c\u8ba1\u7b97\u673a\u786c\u4ef6 \u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u89d2\u5ea6: \u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u7528\u4e8e\u5185\u6838\u6001\u3001\u7cfb\u7edf\u8c03\u7528\u8fd0\u7528\u4e8e\u7528\u6237\u6001. \u5185\u6838\u6001\u548c\u7528\u6237\u6001\u4e0d\u662f\u65b0\u77e5\u8bc6\u70b9,\u53ea\u662f\u4e3a\u4e86\u4fbf\u4e8e\u9610\u8ff0\u7684\u4e24\u4e2a\u540d\u8bcd.. \u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u5fc5\u7136\u6d89\u53ca\u5230\u8ba1\u7b97\u673a\u786c\u4ef6\u7684\u64cd\u4f5c,\u5219\u9700\u8981\u4ece\u7528\u6237\u6001\u8f6c\u5230\u5185\u6838\u6001. So, \u8ba1\u7b97\u673a\u65e0\u65f6\u65e0\u523b\u4e0d\u5728\u53d1\u751f\u7740\u5185\u6838\u6001\u548c\u7528\u6237\u6001\u7684\u6765\u56de\u5207\u6362.. \u6bd4\u5982\u5e94\u7528\u7a0b\u5e8fQQ\u53d1\u9001\u63a5\u6536\u4e00\u6bb5\u6587\u5b57,qq\u5fc5\u987b\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u6765\u63a7\u5236\u7f51\u5361\u8fd9\u4e00\u786c\u4ef6\u6765\u53d1\u9001\u4fe1\u606f(\u7528\u6237\u6001 --> \u5185\u6838\u6001),\u4e5f\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u7f51\u5361\u63a5\u6536\u5bf9\u65b9\u56de\u590d\u7684\u6d88\u606f\u6570\u636e\u7ed9qq.(\u5185\u6838\u6001 --> \u7528\u6237\u6001)","title":"\u5185\u6838\u6001\u4e0e\u7528\u6237\u6001!!"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_11","text":"","title":"\u5b58\u50a8\u5668\u8be6\u89e3"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_12","text":"\u4eba\u7c7b\u73b0\u76ee\u524d\u65e0\u6cd5\u5236\u9020\u51fa\u4e00\u79cd\u4ef7\u94b1\u4fbf\u5b9c\u5bb9\u91cf\u5927\u901f\u5ea6\u8d85\u5feb\u7684\u5b58\u50a8\u5668... \u53ea\u80fd\u9020\u51fa\u4e0d\u540c\u7684\u786c\u4ef6\u505a\u4e0d\u540c\u7684\u4e8b\u60c5. 1> cpu\u4f7f\u7528\u67d0\u4e00\u6570\u636e,\u4f1a\u4f9d\u6b21\u5728 \u5bc4\u5b58\u5668 (\u4e5f\u79f0\u4f5cL1\u7f13\u5b58)\u3001 \u9ad8\u901f\u7f13\u5b58 (L2)\u3001 \u5185\u5b58 (\u5b58\u50a8\u7684\u4e3b\u529b)\u4e2d\u67e5\u627e; 2> \u8ba1\u7b97\u673a\u4f1a\u5c06cpu\u7acb\u9a6c\u4f1a\u7528\u5230\u7684\u6570\u636e\u653e\u5bc4\u5b58\u5668..\u5728\u5185\u5b58\u4e2d\u7ecf\u5e38\u8bbf\u95ee\u5230\u7684\u6570\u636e\u653e\u5230\u9ad8\u5ea6\u7f13\u5b58\u91cc(\u907f\u514d\u91cd\u590d\u5bfb\u5740). 3> \u6211\u4eec\u901a\u5e38\u5728\u786c\u76d8(\u5206\u4e3a\u673a\u68b0\u78c1\u76d8\u548c\u56fa\u6001\u786c\u76d8)\u4e2d\u653e\u6c38\u4e45\u5b58\u50a8\u7684\u6570\u636e,\u78c1\u5e26\u4e2d\u653e\u5907\u4efd\u7684\u6570\u636e. Ps: \u82e5\u5728\u67e5\u627e\u7684\u6570\u636e\u5728\u9ad8\u901f\u7f13\u5b58\u4e2d\u627e\u5230\u4e86,\u79f0\u4e3a\u9ad8\u901f\u7f13\u5b58\u547d\u4e2d! \u78c1\u5e26\u5728\u6162\u6162\u9000\u51fa\u5386\u53f2\u821e\u53f0,\u56e0\u4e3a\u78c1\u76d8\u8d8a\u6765\u8d8a\u4fbf\u5b9c\u4e86.","title":"\u5b58\u50a8\u5668\u5206\u7c7b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_13","text":"","title":"\u5185\u5b58"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#rom","text":"\u5185\u5b58(RAM) : \u53ef\u8bfb\u53ef\u5199,\u65ad\u7535\u6570\u636e\u4e22\u5931. \u5b58\u653e qq\u3001\u5fae\u4fe1\u3001\u5fae\u535a\u7b49 cpu\u8981\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f . \u53ea\u8bfb\u5185\u5b58(ROM) : \u5b58\u50a8\u901f\u5ea6\u8ddfRAM\u4e00\u6837, \u53ea\u80fd\u7528\u4e8e\u8bfb ,\u65ad\u7535\u6570\u636e\u4e0d\u4e22\u5931. \u5b58\u653e BIOS (Basic Input Output System\u57fa\u672c\u7684\u8f93\u5165\u8f93\u51fa\u64cd\u4f5c\u7cfb\u7edf) \u8ba1\u7b97\u673a\u751f\u4ea7\u5382\u5546\u5728\u521a\u9020\u51fa\u8ba1\u7b97\u673a\u7684\u65f6\u5019,\u5728ROM\u82af\u7247\u91cc\u628aBIOS\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801\u5c31\u5199\u8fdb\u53bb\u4e86.. \u515c\u5e95. Ps: \u867d\u7136\u662f\u53ea\u8bfb\u7684,\u4f46\u4e5f\u53ef\u4ee5\u5237,\u4e00\u822c\u7ed9\u751f\u4ea7\u5382\u5546\u5237,\u81ea\u5df1\u5237\u5931\u8d25\u4e86,\u8fd9\u5806\u786c\u4ef6\u5c31\u771f\u6210\u5e9f\u94c1\u5566..(\u00b4\u25bd\uff40) \u7535\u8111\u4e00\u5f00\u673a,cpu\u4f1a\u5148\u53bbROM\u91cc\u8bfbBIOS\u7cfb\u7edf\u6765\u63a5\u7ba1\u786c\u4ef6\u7684\u8fd0\u884c(\u5728\u7535\u8def\u4e0a\u89c4\u5b9a\u6b7b\u4e86\u7684).. \u4f1a\u626b\u63cfBIOS\u8bbe\u7f6e\u7684\u542f\u52a8\u9879, \u53bb\u542f\u52a8\u771f\u6b63\u7684OS(OS\u662f\u5b89\u88c5\u5728\u67d0\u4e00\u5757\u786c\u76d8\u4e4b\u4e0a\u7684 \u4ee5linux\u4e3a\u4f8b) \u5c06linux\u4ece\u786c\u76d8\u8bfb\u5230RAM\u4e2d.. \u901a\u8fc7linux\u7cfb\u7edf\u53bb\u63a5\u7ba1\u786c\u4ef6\u7684\u8fd0\u884c. \u82e5\u5728\u542f\u52a8\u9879\u4e2d\u6ca1\u6709\u627e\u5230\u64cd\u4f5c\u7cfb\u7edf,\u5c31\u9700\u8981\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u5566(\u8fd9\u5c31\u6d89\u53ca\u7528\u5149\u76d8,U\u76d8\u542f\u52a8\u76d8\u7b49). BIOS\u7cfb\u7edf\u76f8\u5f53\u4e8e\u4e00\u4e2a\u8fc7\u6e21\u7684\u8fc7\u7a0b, linux\u548cBIOS\u90fd\u80fd\u63a7\u5236\u786c\u4ef6\u7684\u8fd0\u884c,\u4f46linux\u64cd\u4f5c\u7cfb\u7edf\u66f4\u5f3a\u5927\u4e00\u4e9b..","title":"ROM"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#cmos","text":"BIOS\u7cfb\u7edf\u4f1a\u4fee\u6539\u4e00\u4e9b\u914d\u7f6e(\u6bd4\u5982\u542f\u52a8\u9879\u4f18\u5148\u7ea7\u7684\u8c03\u6574,\u52a0\u5bc6\u8bbe\u8ba1\u7684\u5bc6\u7801,\u8ba1\u7b97\u673a\u7684\u65f6\u95f4..), \u5176\u4ea7\u751f\u7684\u6570\u636e\u4e0d\u80fd\u76f4\u63a5\u653e\u5230ROM\u91cc,\u56e0\u4e3aROM\u662f\u53ea\u8bfb\u7684; \u8fd9\u4e9b\u6570\u636e\u4f1a\u653e\u5230 CMOS (\u65ad\u7535\u6570\u636e\u5c31\u6ca1,\u8017\u7535\u91cf\u5f88\u4f4e,\u5f88\u5c0f\u5757\u7535\u6c60\u5c31\u80fd\u4f7f\u7528\u82e5\u5e72\u5e74)\u91cc\u9762.. \u8ba1\u7b97\u673a\u521a\u5f00\u59cb\u542f\u52a8\u65f6\u7684\u4f53\u7cfb --- CPU + ROM + CMOS (\u5b58\u50a8BIOS\u914d\u7f6e\u6570\u636e) \u8ba1\u7b97\u673a\u542f\u52a8\u8d77\u6765\u4ee5\u540e\u7684\u4f53\u7cfb --- CPU + RAM + \u786c\u76d8 Ps: \u65ad\u7535\u540e,\u4e3b\u677f\u4e0a\u6709\u4e00\u5757\u7535\u6c60\u5728\u7ed9CMOS\u548c\u65f6\u949f\u82af\u7247(\u4fdd\u8bc1\u5173\u673a\u540e\u5f00\u673a\u65f6\u95f4\u8fd8\u662f\u6b63\u786e\u7684)\u4f9b\u7535.","title":"CMOS"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_14","text":"\u786c\u76d8\u5927\u81f4\u5206\u4e3a\u4e24\u7c7b \u673a\u68b0\u78c1\u76d8(\u4e70\u7684\u65f6\u5019\u4e3b\u8981\u770b\u8f6c\u901f\u8fd9\u4e00\u6307\u6807)\u3001\u56fa\u6001\u786c\u76d8(\u7b80\u79f0SSD).. \u7406\u8bba\u4e0a\u90fd\u662f\u6c38\u4e45\u5b58\u653e\u6570\u636e\u7684 \u524d\u8005\u4f9d\u8d56\u78c1\u5b58\u53d6\u6570\u636e,\u540e\u8005\u4f9d\u8d56\u7535\u5b50\u5b58\u53d6\u6570\u636e.. \u4e0d\u7ba1\u600e\u6837\u90fd\u662f\u9ad8\u4f4e\u7684\u53d8\u5316\u6765\u8868\u793a\u4e8c\u8fdb\u5236. \u51b7\u77e5\u8bc6: 1B/Byte/\u5b57\u8282 = 8bit/\u6bd4\u7279\u4f4d/\u4f4d/\u4e8c\u8fdb\u5236\u6570 1KB = 1024B bit B KB MB GB TB PB EB ... ... \u5e02\u9762\u4e0a\u5356\u7684\u786c\u76d8\u90fd\u662f\u6309\u71671000\u6765\u8ba1\u7b97\u7684,500G\u7684\u786c\u76d8=500 x 1000 x 1000 x 1000 \u5b57\u8282","title":"[\u786c\u76d8\u63a5\u53e3]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_15","text":"1> IDE \u5e76\u53e3 -- \u53d1\u6570\u636e\u65f6\u6bcf\u4e2a\u9488\u811a\u5f7c\u6b64\u4e4b\u95f4\u4f1a\u6709\u5e72\u6270..\u4f1a\u5f71\u54cd\u4f20\u8f93\u901f\u5ea6 2> SATA \u4e32\u53e3 -- \u4f20\u8f93\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u90fd\u5f3a\u4e8eIDE 3> SCSI -- \u4e3a\u5c0f\u578b\u673a\u6253\u9020\u7684 4> SAS -- \u5c06SATA\u4e0eSCSI\u63a5\u53e3\u7684\u4f18\u52bf\u76f8\u7ed3\u5408 (\u670d\u52a1\u5668\u786c\u76d8\u7684\u4e3b\u6d41) 5> \u5149\u7ea4\u901a\u9053 -- \u4e3b\u8981\u7528\u5728\u9ad8\u7aef\u670d\u52a1\u5668\u4e0a,\u6bd4\u5982\u4e13\u4e1a\u7684\u5b58\u50a8\u8bbe\u5907","title":"\u25ce \u63a5\u53e3"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_16","text":"SSD + SAS > SSD + SATA > \u673a\u68b0\u78c1\u76d8 + SAS > \u673a\u68b0\u78c1\u76d8 + SATA \u670d\u52a1\u5668\u5728 \u9ad8\u5e76\u53d1\u573a\u666f \u4e0b,\u6709\u4e2a\u6027\u4ef7\u6bd4\u6bd4\u8f83\u9ad8(\u5c31\u662f\u7f3a\u94b1..)\u7684\u65b9\u6848: \u5c06 \u70ed\u6570\u636e (\u7528\u6237\u7ecf\u5e38\u8bbf\u95ee\u7684\u6570\u636e)\u653e\u5230 SSD+SAS \u4e0a, \u51b7\u6570\u636e (\u4e0d\u7ecf\u5e38\u8bbf\u95ee)\u653e\u5728 \u673a\u68b0\u786c\u76d8+SAS \u4e0a.. \u670d\u52a1\u5668\u5728\u5e38\u89c4\u573a\u666f\u4e0b: \u5bf9\u901f\u5ea6\u6709\u7279\u6b8a\u8981\u6c42,\u9009\u62e9 SSD + SATA ; \u6bd4\u8f83\u6838\u5fc3,\u5bf9\u901f\u5ea6\u8981\u6c42\u4e0d\u600e\u4e48\u9ad8\u7684\u4e1a\u52a1\u7528 \u673a\u68b0\u78c1\u76d8 + SAS . \u800c\u516c\u53f8\u5185\u90e8\u7684\u670d\u52a1\u4f1a\u7528 \u673a\u68b0\u78c1\u76d8 + SATA . Ps: \u73b0\u5728\u5e95\u5c42\u7684\u57fa\u7840\u8bbe\u65bd\u90fd\u4e0d\u662f\u4e00\u4e0a\u6765\u5c31\u7528\u9ad8\u7aef\u7684\u786c\u4ef6\u6765\u5806\u53e0,\u800c\u662f\u7528\u4e00\u4e9b\u6027\u4ef7\u6bd4\u6bd4\u8f83\u9ad8\u7684\u786c\u4ef6\u901a\u8fc7\u6280\u672f\u624b\u6bb5(\u6bd4\u5982\u96c6\u7fa4)\u63d0\u9ad8\u5176\u6027\u80fd.. \u5f53\u7136\u4e0d\u5dee\u94b1\u53e6\u8bf4..","title":"\u25ce \u786c\u76d8\u4e0e\u63a5\u53e3\u7ec4\u5408"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#raid","text":"\u78c1\u76d8\u9635\u5217 raid -- \u5bf9\u786c\u76d8\u505a\u96c6\u7fa4. Ps: \u96c6\u7fa4\u7684\u597d\u5904 1. \u9632\u6b62\u5355\u70b9\u6545\u969c(\u5b9e\u5219\u662f\u4e3a\u4e86\u9884\u7559\u6392\u67e5\u7ea0\u9519\u65f6\u95f4) 2.\u63d0\u5347\u6027\u80fd \u670d\u52a1\u5668\u901a\u5e38\u4f1a\u914d\u7f6e\u591a\u5757\u786c\u76d8,\u901a\u8fc7\u540d\u4e3aRAID\u7684\u6280\u672f\u624b\u6bb5\u5408\u6210\u4e00\u5757\u786c\u76d8(\u5bf9\u5916\u66b4\u9732\u5c31\u662f\u4e00\u5757\u76d8)... \u591a\u5757\u786c\u76d8\u8981\u8fde\u63a5\u5230 RAID\u5361 (\u9635\u5217\u5361)\u4e0a,\u7136\u540e\u5236\u4f5craid... Ps: \u786craid -- \u901a\u8fc7raid\u5361\u5236\u4f5c\u7684raid; \u8f6fraid( \u51e0\u4e4e\u4e0d\u7528 ) -- \u901a\u8fc7\u8f6f\u4ef6\u5236\u4f5c\u7684raid.. \u786craid\u66f4\u597d . \u5e38\u89c1\u7684raid\u6709\u56db\u79cd.. 1> raid0: \u81f3\u5c111\u5757\u76d8(\u82e5\u771f\u7528\u4e00\u5757,\u51f8\u663e\u4e0d\u51faraid\u7684\u4f18\u52bf..),\u901a\u5e38\u4f1a\u5927\u4e8e1\u5757\u76d8. <\u5c06\u8fde\u7eed\u7684\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a\u786c\u76d8\u4e0a\u5b58\u53d6.> \u5bb9\u91cf -- n\u5757\u76d8\u5408\u5728\u4e00\u8d77\u7684\u603b\u5bb9\u91cf;\u786c\u76d8\u5bb9\u91cf\u4e0d\u6d6a\u8d39. \u5177\u6709\u5728\u6240\u6709RAID\u7ea7\u522b\u4e2d\u6700\u9ad8\u7684\u5b58\u50a8\u6027\u80fd,\u539f\u7406\u662f\u5c06\u8fde\u7eed\u7684\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a\u786c\u76d8\u4e0a\u5b58\u53d6. \u6027\u80fd -- \u7406\u8bba\u4e0a\u662fn\u5757\u76d8\u5408\u5728\u4e00\u8d77\u7684\u8bfb\u5199\u901f\u5ea6,\u5b9e\u9645\u4e0a\u8981\u4f4e\u4e00\u4e9b; \u5197\u4f59 -- \u4e0d\u5141\u8bb8\u574f\u4efb\u4f55\u4e00\u5757\u76d8;(\u5197\u4f59\u6027\u5373\u8003\u8651\u5355\u70b9\u6545\u969c\u7684\u95ee\u9898) \u573a\u5408 -- \u8ffd\u6c42\u8bfb\u5199\u6027\u80fd,\u4f46\u662f\u5bf9\u6570\u636e\u5b89\u5168\u6027\u6ca1\u6709\u8981\u6c42. eg: \u96c6\u7fa4\u670d\u52a1\u5668 (\u66f4\u63a8\u8350\u7528raid5) \u5373\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u4e2d\u7684\u591a\u4e2a\u786c\u76d8\u90fd\u505a\u5e94\u7528\u7a0b\u5e8f\u7684raid0 \u4e0d\u6015\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u6ca1\u4e86,\u56e0\u4e3a\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u670d\u52a1\u5668\u90fd\u6709 PS: \u6570\u636e\u5e93\u4ece\u5e93mysql slave;\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9RS. \u7279\u70b9 -- \u901f\u5ea6\u5feb,\u65e0\u5197\u4f59,\u5bb9\u91cf\u65e0\u635f\u5931. 2> raid1: \u53ea\u80fd2\u5757\u76d8 <\u4e00\u5757\u76d8\u5b58\u6570\u636e,\u53e6\u4e00\u5757\u76d8\u7528\u6765\u505a\u5907\u4efd/\u955c\u50cf.> \u5bb9\u91cf -- \u4e00\u5757\u76d8\u7684\u5bb9\u91cf; \u6027\u80fd -- \u51e0\u4e4e\u5c31\u662f\u4e00\u5757\u76d8\u7684\u8bfb\u5199\u901f\u5ea6; \u5197\u4f59 -- \u53ef\u4ee5\u574f\u4e00\u5757\u76d8,\u53e6\u5916\u4e00\u5f20\u76d8\u6709\u5b8c\u6574\u7684\u6570\u636e; \u5177\u6709\u5728\u6240\u6709RAID\u7ea7\u522b\u4e2d\u6700\u9ad8\u7684\u6570\u636e\u5b89\u5168\u4fdd\u969c..\u5197\u4f59\u5ea6\u767e\u5206\u4e4b\u767e. \u573a\u5408 -- \u5bf9\u6570\u636e\u5b89\u5168\u6027\u6709\u8981\u6c42,\u5bf9\u8bfb\u5199\u901f\u5ea6\u6ca1\u6709\u7279\u6b8a\u8981\u6c42; eg: \u670d\u52a1\u5668\u53ef\u4ee5\u6709\u591a\u5757\u786c\u76d8,\u62bd\u51fa\u4e24\u5757\u786c\u76d8\u505araid1\u7528\u6765\u88c5\u64cd\u4f5c\u7cfb\u7edf,\u4fdd\u8bc1OS\u7684\u7a33\u5b9a.. (\u5b9e\u9645\u60c5\u51b5\u4e0b,\u4f1a\u7528\u4e24\u5757\u56fa\u6001\u505a\u7cfb\u7edf\u76d8\u7684raid1,\u4fdd\u8bc1\u5b89\u5168\u7684\u540c\u65f6\u517c\u987e\u901f\u5ea6) \u5f53\u7136\u7f51\u7edc\u7684\u53ef\u9760,\u786c\u4ef6\u7684\u7a33\u5b9a\u4e5f\u662f\u8981\u8003\u8651\u7684,\u8fd9\u91cc\u5355\u5355\u4fa7\u91cd\u64cd\u4f5c\u7cfb\u7edf.. \u7279\u70b9 -- \u767e\u5206\u4e4b\u767e\u5197\u4f59,\u5bb9\u91cf\u635f\u5931\u4e00\u534a. \u7efc\u5408raid0\u548craid1,\u82e5\u670d\u52a1\u5668\u4e0a\u63d2\u4e8610\u5757\u7269\u7406\u786c\u76d8,\u4e24\u5757\u505a\u6210raid1\u653e\u64cd\u4f5c\u7cfb\u7edf,\u5269\u4f598\u5757\u505a\u6210raid0\u653e\u5e94\u7528\u7a0b\u5e8f. \u5bf9\u5916\u770b\u8d77\u6765\u5c31\u4f1a\u53ea\u6709\u4e24\u4e2a\u76d8\u5566..(raid0\u901a\u5e38\u4f1a\u6d89\u53ca\u5230\u670d\u52a1\u5668\u96c6\u7fa4,\u4e00\u53f0\u670d\u52a1\u5668\u7684\u5e94\u7528\u7a0b\u5e8f\u51fa\u95ee\u9898\u4e86,\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\u8fd8\u6709..) \u6211\u4eec\u4e0d\u4f1a\u8fd9\u4e48\u505a!\u6700\u76f4\u89c2\u7684\u89e3\u91ca8\u5757\u4e2d\u6709\u4e00\u5757\u574f\u4e86,\u8fd98\u5757\u76d8\u5168\u90fd\u4e0d\u80fd\u7528\u4e86..radi0\u65e0\u5197\u4f59.\u5f88\u6d6a\u8d39. \u771f\u5b9e\u60c5\u51b5\u4e0b,\u901a\u5e38\u7cfb\u7edf\u76d8\u505aradi1,\u5176\u4ed6\u76d8\u505aradi5.. 3> raid5(\u4ecb\u4e8eraid0\u548craid1\u4e4b\u95f4,\u662f\u4e00\u79cd\u6298\u4e2d\u7684\u65b9\u6848): \u81f3\u5c113\u5757\u76d8 < \u91c7\u7528\u5947\u5076\u6821\u9a8c,\u672c\u8d28\u5c31\u662f\u505a\u5f02\u6216\u8fd0\u7b97(\u76f8\u540c\u7ed3\u679c\u4e3a0,\u4e0d\u540c\u7ed3\u679c\u4e3a1) \u53ea\u6709\u540c\u65f6\u635f\u574f\u4e24\u5757\u76d8\u65f6,\u6570\u636e\u624d\u4f1a\u635f\u574f,\u53ea\u635f\u574f\u4e00\u5757\u76d8\u65f6,\u7cfb\u7edf\u4f1a\u6839\u636e\u5b58\u50a8\u7684\u5947\u5076\u6821\u9a8c\u4f4d\u91cd\u5efa\u6570\u636e,\u4e34\u65f6\u63d0\u4f9b\u670d\u52a1. > \u5bb9\u91cf -- \u5e9f\u6389\u4e00\u5757\u76d8\u7684\u5bb9\u91cf,\u7b49\u91cf\u76d8\u7684\u60c5\u51b5\u4e0b,\u5bb9\u91cf\u4f4e\u4e8eraid0; \u6027\u80fd -- \u8bfb\u5199\u901f\u5ea6\u4f4e\u4e8eraid0,\u9ad8\u4e8eraid1; \u5197\u4f59 -- \u53ef\u4ee5\u574f\u4e00\u5757\u76d8,\u5269\u4e0b\u7684\u76d8\u53ef\u4ee5\u901a\u8fc7\u5947\u5076\u6821\u9a8c\u63a8\u5012\u51fa\u574f\u76d8\u7684\u6570\u636e. \u573a\u5408 -- \u4e00\u822c\u573a\u5408\u90fd\u53ef\u4ee5\u4f7f\u7528.\u9002\u7528\u4e8e\u5bf9\u6027\u80fd\u548c\u5197\u4f59\u90fd\u6709\u4e00\u5b9a\u8981\u6c42,\u53c8\u90fd\u4e0d\u662f\u5341\u5206\u9ad8\u7684\u60c5\u51b5.. \u7279\u70b9 -- raid0\u548craid1\u7684\u6298\u4e2d\u65b9\u6848. 4> raid10: \u81f3\u5c114\u5757\u76d8 \u4e24\u4e24\u4e4b\u95f4\u5148\u505araid1,\u518d\u505araid0; raid1\u548craid0\u6574\u5408\u7684\u4ea7\u7269,\u517c\u987e\u4e86raid1\u7684\u5b89\u5168\u6027\u4e0eraid0\u7684\u901f\u5ea6,\u4f46\u6210\u672c\u5927\u5e45\u5ea6\u63d0\u5347. \u901a\u5e38\u7528\u4e8e\u6570\u636e\u5e93\u670d\u52a1\u5668. \u5197\u4f59\u4ece\u597d\u5230\u574f: raid1 == raid10 > raid5 > raid0 \u8bfb\u5199\u6027\u80fd\u4ece\u597d\u5230\u574f: raid0 == raid10 > raid5 > raid1 \u6210\u672c\u4ece\u9ad8\u5230\u4f4e: raid10 > raid1 > raid5 > raid0 \u8fd0\u7ef4\u751f\u4ea7\u73af\u5883\u5e38\u7528\u7684\u56db\u79cdRAID\u7ea7\u522b\u4f18\u7f3a\u70b9\u5bf9\u6bd4. \u7ea7\u522b \u6700\u5c11\u78c1\u76d8\u8981\u6c42 \u5173\u952e\u4f18\u70b9 \u5173\u952e\u7f3a\u70b9 \u5b9e\u9645\u5e94\u7528\u573a\u666f RAID0 1\u5757 \u8bfb\u5199\u901f\u5ea6\u5feb \u6ca1\u6709\u4efb\u4f55\u5197\u4f59 Mysql Slave, \u96c6\u7fa4\u4e2d\u7684\u8282\u70b9RS RAID1 2\u5757(\u53ea\u80fd) 100%\u5197\u4f59,\u955c\u50cf \u8bfb\u5199\u6027\u80fd\u4e00\u822c,\u6210\u672c\u8f83\u9ad8 \u5355\u72ec\u7684,\u6570\u636e\u5f88\u91cd\u8981\u4e14\u4e0d\u80fd\u5b95\u673a\u7684\u4e1a\u52a1\u76d1\u63a7, \u7cfb\u7edf\u76d8 RAID5 3\u5757 \u5177\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u548c\u5197\u4f59, \u53ef\u4ee5\u574f\u4e00\u5757\u786c\u76d8 \u5199\u5165\u6027\u80fd\u4e0d\u9ad8 \u4e00\u822c\u4e1a\u52a1\u90fd\u53ef\u4ee5\u7528, \u5e38\u89c4 RAID10 4\u5757 \u8bfb\u5199\u901f\u5ea6\u5feb,100%\u5197\u4f59 \u6210\u672c\u9ad8, \u571f\u8c6a \u6027\u80fd\u548c\u5197\u4f59\u8981\u6c42\u5f88\u597d\u7684\u4e1a\u52a1. eg: \u6570\u636e\u5e93 \u4e3b\u5e93,\u5b58\u50a8\u7684\u4e3b\u8282\u70b9. \u7efc\u5408\u5e94\u7528\u573a\u666f \u5047\u8bbe\u670910\u53f0\u670d\u52a1\u5668,\u5176\u4e2d\u6709\u4e00\u53f0\u670d\u52a1\u5668\u662f\u6765\u505a\u6570\u636e\u7684.\u6b64\u6570\u636e\u5e93/\u5b58\u50a8\u670d\u52a1\u5668\u5148\u7528\u4e24\u5757\u786c\u76d8(\u6700\u597d\u662f\u56fa\u6001\u786c\u76d8)\u505a\u6210raid1\u6765\u88c5\u64cd\u4f5c\u7cfb\u7edf,\u5269\u4e0b\u7684\u76d8\u6765\u505a\u6210raid10\u6765\u5b58\u653e\u6570\u636e.. \u5373\u7cfb\u7edf\u76d8raid1,\u5176\u4f59\u76d8raid10.. \u5176\u4f59\u76849\u53f0\u670d\u52a1\u5668\u7528\u6765\u505a\u96c6\u7fa4,\u6bcf\u53f0\u670d\u52a1\u5668\u90fd\u7528\u4e24\u5757\u76d8\u505a\u6210raid1\u6765\u88c5\u64cd\u4f5c\u7cfb\u7edf,\u5269\u4f59\u7684\u76d8\u505araid5... \u5c0f\u9ed1\u677f: \u505a\u96c6\u7fa4\u65e2\u80fd\u63d0\u5347\u6027\u80fd,\u4e5f\u80fd\u9632\u6b62\u5355\u70b9\u6545\u969c","title":"\u25ce RAID\u6280\u672f"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_17","text":"IO\u65f6\u95f4 = \u5e73\u5747\u5bfb\u9053\u65f6\u95f4 + \u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4(\u8f6c\u901f\u8d8a\u9ad8 \u5ef6\u8fdf\u65f6\u95f4\u8d8a\u4f4e) \u5148\u63d0\u4e00\u5634, \u76f4\u63a5\u5173\u673a\u4f1a\u635f\u5931\u673a\u68b0\u78c1\u76d8,\u56e0\u4e3a\u5728\u9ad8\u901f\u8fd0\u8f6c\u4e2d,\u7a81\u7136\u505c\u6b62,\u6709\u60ef\u6027\u7684..\u5bff\u547d\u51cf\u4e00. \u56fe\u4e2d\u7684\u6570\u5b570 1 2 3..\u6307\u7684\u662f\u76d8\u9762. \u4e0a\u56fe\u4e2d\u5171\u67093\u4e2a\u76d8\u7247,6\u4e2a\u76d8\u9762.\u5373\u4e00\u4e2a\u76d8\u7247\u67092\u4e2a\u76d8\u9762.. 1> \u78c1\u9053 : \u78c1\u5934\u653e\u7684\u4f4d\u7f6e\u968f\u7740\u4e3b\u8f74\u8f6c\u52a8\u4e00\u5468\u6240\u7ecf\u8fc7\u7684\u5730\u65b9\u5c31\u662f\u4e00\u4e2a\u78c1\u9053. 2> \u67f1\u9762 : \u56fe\u4e2d\u76846\u4e2a\u78c1\u5934\u5728\u81ea\u4e2a\u513f\u6240\u5904\u7684\u76d8\u9762\u7684\u540c\u4e00\u78c1\u9053\u4ece\u4e0a\u5230\u4e0b\u6784\u6210\u4e86\u4e00\u4e2a\u67f1\u9762. 3> \u5206\u533a : \u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u8bf4\u7684D\u76d8,E\u76d8\u7b49. \u4ece\u4e00\u4e2a\u67f1\u9762\u5f00\u59cb\u5230\u53e6\u4e00\u4e2a\u67f1\u9762\u4e4b\u95f4\u6240\u5305\u542b\u7684\u5185\u5bb9.\u95ed\u533a\u95f4. 4> \u6247\u533a\u3001\u6247\u9762\u3001\u7c07 : \u673a\u68b0\u78c1\u76d8\u6700\u5c0f\u8bfb\u5199\u5355\u4f4d\u662f\u6247\u533a.. \u901a\u5e38\u662f 512\u4e2aBytes\u5b57\u8282 . \u64cd\u4f5c\u7cfb\u7edf\u6700\u5c0f\u8bfb\u5199\u5355\u4f4d\u662f\u4e00\u4e2ablock\u5757.. \u901a\u5e38\u662f8\u4e2a\u6247\u533a\u7684\u5927\u5c0f.\u5373 4k . \u8fd9\u5c31\u6d89\u53ca\u5230\u4e86\u524d\u6587\u6240\u8bb2\u7684linux\u4f18\u5316\u673a\u5236<buffer\u7f13\u51b2\u533a>,\u901a\u8fc7\u4e00\u4e2a\u7c7b\u6bd4\u5177\u4f53\u5c55\u5f00\u6765\u8bf4.. buffer\u7f13\u51b2\u533a --- \u5927\u5361\u8f66 \u64cd\u4f5c\u7cfb\u7edf\u7684block\u5757 --- \u6536\u7eb3\u7bb1 \u786c\u76d8\u7684\u6247\u533a --- \u5355\u4e2a\u5feb\u9012\u76d2\u5b50 \u5927\u5361\u8f66\u91cc\u9762\u5b58\u653e\u4e86n\u4e2a\u6536\u7eb3\u7bb1,\u6bcf\u4e2a\u6536\u7eb3\u7bb1\u91cc\u9762\u5b58\u653e\u4e868\u4e2a\u5feb\u9012\u76d2\u5b50. 5> \u5e73\u5747\u5bfb\u9053\u65f6\u95f4\u3001\u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4 Q: \u6211\u4eec\u8bf4\u673a\u68b0\u78c1\u76d8\u6162... \u6162\u5728\u54ea\uff1f A: \u65e2\u4e0d\u662f\u627e\u5230\u6570\u636e\u540e\u8bfb\u53d6\u6570\u636e,\u4e5f\u4e0d\u662f\u4ece\u78c1\u76d8\u8bfb\u53d6\u5b8c\u6570\u636e\u540e\u5f80\u5185\u5b58\u9001\u7684\u8fc7\u7a0b (\u8ba1\u7b97\u673a\u786c\u4ef6\u4e4b\u95f4\u662f\u901a\u8fc7\u7535\u8def\u8fde\u63a5\u5728\u4e00\u8d77\u7684,\u5f88\u5feb!) \u5373\u627e\u5230\u6570\u636e\u540e,\u8bfb\u6570\u636e\u518d\u5f80\u5185\u5b58\u4e2d\u8bfb\u7684\u65f6\u95f4\u5ffd\u7565\u4e0d\u8ba1. \u6162\u662f\u6162\u5728\u627e\u5230\u6570\u636e\u7684\u8fc7\u7a0b.. \u5e73\u5747\u5bfb\u9053\u65f6\u95f4 : \u6307\u78c1\u76d8\u5728\u63a5\u6536\u5230\u7cfb\u7edf\u6307\u4ee4\u540e,\u78c1\u5934\u4ece\u5f00\u59cb\u79fb\u52a8\u5230\u6570\u636e\u6240\u5728\u7684\u78c1\u9053\u6240\u82b1\u8d39\u65f6\u95f4\u7684\u5e73\u5747\u503c,\u5927\u69825ms. \u5e73\u5747\u5ef6\u8fdf\u65f6\u95f4 : \u4ee57200\u8f6c/\u5206(120\u8f6c/s)\u7684\u673a\u68b0\u786c\u76d8\u4e3a\u4f8b,\u8f6c\u4e00\u5708\u5927\u6982\u9700\u89811/120=0.008s.. \u6211\u4eec\u77e5\u9053\u6570\u636e\u662f\u5728\u78c1\u9053\u4e0a\u5b58\u7740\u7684, \u8fd0\u6c14\u597d\u5728\u78c1\u9053\u8d77\u59cb\u4f4d\u7f6e\u5c31\u627e\u5230\u4e86,\u8fd0\u6c14\u4e0d\u597d,\u5728\u4e00\u5708\u7684\u672b\u5c3e.. \u53d6\u4e2a\u5e73\u5747\u503c,\u627e\u534a\u5708\u80fd\u627e\u5230,\u4e5f\u5c31\u662f0.004s..4ms.. \u7efc\u4e0a, 7200\u8f6c/\u5206\u7684\u673a\u68b0\u786c\u76d8IO\u5ef6\u8fdf\u65f6\u95f4\u5927\u6982\u662f9ms ,\u770b\u4f3c\u5f88\u77ed,\u4f46\u4e5f\u80fd\u8ba9\u4e00\u4e2a\u7b80\u5355\u7684cpu\u8fd0\u884c\u4e0a\u767e\u4e07\u6761\u4e8c\u8fdb\u5236\u6307\u4ee4..","title":"[\u673a\u68b0\u78c1\u76d8]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_18","text":"\u4f9d\u8d56\u7535\u5b50\u5b58\u53d6\u6570\u636e,\u9020\u4ef7\u9ad8.. \u4f46\u6bd4\u673a\u68b0\u786c\u76d8\u901f\u5ea6\u5feb,\u56e0\u4e3a\u7701\u53bb\u4e86\u673a\u68b0\u7684\u8fc7\u7a0b.. Ps: \u53ef\u80fd\u4f1a\u5728\u56fa\u6001\u786c\u76d8\u4e0a\u770b\u5230\u7c7b\u4f3c\u4e8e15k\u7684\u53c2\u6570,\u610f\u601d\u5c31\u662f\u6b64\u56fa\u6001\u7684\u901f\u5ea6\u7b49\u540c\u4e8e15000\u8f6c/\u5206\u949f\u7684\u673a\u68b0\u78c1\u76d8.","title":"[\u56fa\u6001\u786c\u76d8]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#swap","text":"\u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/articles/13915855.html \u8bb8\u591a\u8ba1\u7b97\u673a\u652f\u6301 \u865a\u62df\u5185\u5b58\u673a\u5236 ,\u8be5\u673a\u5236\u4f7f\u8ba1\u7b97\u673a\u53ef\u4ee5\u8fd0\u884c\u5927\u4e8e\u7269\u7406\u5185\u5b58\u7684\u7a0b\u5e8f. \u5b83\u4f1a\u5c06\u6b63\u5728\u4f7f\u7528\u7684\u7a0b\u5e8f\u653e\u5165\u5185\u5b58\u4e2d\u6267\u884c, \u800c\u6682\u65f6\u4e0d\u9700\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u653e\u5230\u78c1\u76d8\u7684\u67d0\u5757\u5730\u65b9,\u8fd9\u5757\u5730\u65b9\u53eb\u505a\u865a\u62df\u5185\u5b58. \u5728linux\u7cfb\u7edf\u4e2d,\u4f1a\u5bf9\u786c\u76d8\u8fdb\u884c\u5206\u533a.. \u5176\u4e2d\u6709\u4e2a\u5206\u533a\u540d\u4e3a swap\u5206\u533a ..(\u5145\u5f53\u4e34\u65f6\u5185\u5b58) \u5f53\u7269\u7406\u5185\u5b58\u4e0d\u591f\u7528\u7684\u65f6\u5019,linux\u624d\u4f1a\u5c06\u5b83\u8ba4\u4e3a\u5185\u5b58\u4e2d\u6682\u65f6\u7528\u4e0d\u5230\u7684\u6570\u636e\u5f80\u786c\u76d8\u7684swap\u5206\u533a\u91cc\u653e... swap\u5206\u533a\u5145\u5f53\u4e34\u65f6\u5185\u5b58,\u662f\u5047\u7684\u5185\u5b58,\u8fd9\u4e00\u5012\u817e,\u901f\u5ea6\u80af\u5b9a\u6162..\u4f46\u662f\u7eed\u547d\u5566(\u00b4\u25bd\uff40) \u524d\u63d0\u662flinux\u7cfb\u7edf\u54e6\uff01\uff01swap\u5206\u533a\u4e0d\u80fd\u50cf\u5176\u4ed6\u786c\u76d8\u7a7a\u95f4\u4e00\u6837\u4f7f\u7528.. \u770b\u4f3c\u6d6a\u8d39,\u5b9e\u5219\u53ef\u4ee5\u5e94\u6025\u4fdd\u547d. Ps: \u77e5\u9053\u4e86\u4e5f\u6ca1\u7528\u7cfb\u5217 -- \u5728\u8ba1\u7b97\u673a\u5185\u5b58\u4e0d\u591f\u7528\u7684\u65f6\u5019,linux\u8fd8\u53ef\u80fd\u968f\u673akill\u6389\u8fdb\u7a0b..","title":"[swap\u865a\u62df\u5185\u5b58]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#io","text":"I/O\u8bbe\u5907,\u6307\u7684\u662f\u5373\u80fd\u5f80\u5916\u8bfb\u6570\u636e\u4e5f\u80fd\u5f80\u91cc\u5199\u6570\u636e\u7684\u8bbe\u5907... \u6bd4\u5982\u5185\u5b58\u3001\u786c\u76d8\u662fI/O\u8bbe\u5907; \u952e\u76d8\u9f20\u6807\u51c6\u786e\u70b9\u5e94\u8be5\u53eb\u505a\u8f93\u5165\u8bbe\u5907;\u663e\u793a\u5668\u6253\u5370\u673a\u51c6\u786e\u70b9\u5e94\u8be5\u53eb\u505a\u8f93\u51fa\u8bbe\u5907.. \u4f46\u6211\u4eec\u90fd\u5c06\u5b83\u4eec\u5f52\u4e3aI/O\u8bbe\u5907.. I/O\u8bbe\u5907\u4e00\u822c\u5206\u4e3a\u4e24\u90e8\u5206: \u8bbe\u5907\u63a7\u5236\u5668 \u548c\u8bbe\u5907\u672c\u8eab.. [\u8bbe\u5907\u63a7\u5236\u5668] \u8ba1\u7b97\u673a\u786c\u4ef6\u90fd\u5728\u4e3b\u677f\u4e0a ,\u4e3b\u677f\u4e0a\u6709\u5f88\u591a\u7684\u63a5\u53e3,\u6bcf\u4e2a\u63a5\u53e3(eg \u63a5\u663e\u793a\u5668\u7684VGA\u63a5\u53e3,\u653e\u5185\u5b58\u6761\u7684\u63a5\u53e3,\u786c\u76d8\u7684\u63a5\u53e3\u7b49)\u7684\u80cc\u540e\u90fd\u5bf9\u5e94\u7740\u4e00\u4e2a\u82af\u7247,\u6b64<\u82af\u7247>\u5c31\u53eb\u505a\u8bbe\u5907\u63a7\u5236\u5668.. [\u9a71\u52a8\u7a0b\u5e8f] \u9a71\u52a8\u7a0b\u5e8f\u7b80\u5355\u7406\u89e3\u5c31\u662f\u4f7f I/O\u8bbe\u5907 \u8fd0\u8f6c\u7684\u7a0b\u5e8f.. \u9a71\u52a8\u7a0b\u5e8f\u4f1a\u5b89\u88c5\u5728\u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762\u7684,\u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u9a71\u52a8\u7a0b\u5e8f,\u9a71\u52a8\u7a0b\u5e8f\u901a\u8fc7\u63a7\u5236\u8bbe\u5907\u63a7\u5236\u5668\u6765\u63a7\u5236\u8bbe\u5907\u672c\u8eab.. \u6240\u4ee5,\u5b89\u88c5\u5b8c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u6709\u4e2a\u6b65\u9aa4,\u5b89\u88c5\u9a71\u52a8!! \u77e5\u9053\u4e3a\u4ec0\u4e48\u4e86\u5427!(\u00b4\u25bd\uff40) Q: \u9a71\u52a8\u7a0b\u5e8f\u4e0d\u80fd\u7531\u64cd\u4f5c\u7cfb\u7edf\u81ea\u4e2a\u513f\u5f00\u53d1\u5417\uff1f A: \u5148\u4e0d\u8bf4\u5e38\u89c1\u7684\u64cd\u4f5c\u7cfb\u7edf\u6709\u4e09\u4e2a window linux mac.. \u4ee5\u663e\u5361\u4e3a\u4f8b,\u82e5OS\u8fd9\u4e00\u8f6f\u4ef6\u5728\u4e00\u5f00\u59cb\u5c31\u5305\u542b\u4e86\u663e\u5361\u7684\u9a71\u52a8\u7a0b\u5e8f,\u90a3\u4e48\u663e\u5361\u7684\u4e0d\u540c\u751f\u4ea7\u5382\u5546\u751f\u4ea7\u7684\u663e\u5361\u90fd\u5fc5\u987b\u6309\u7167OS\u7684\u663e\u5361\u9a71\u52a8\u7a0b\u5e8f\u7684\u6807\u51c6\u6765\u9020\u663e\u5361,\u4f46\u4e8b\u5b9e\u4e0a\u663e\u5361\u7684\u4e0d\u540c\u751f\u4ea7\u5382\u5546\u9020\u663e\u5361\u7684\u5185\u90e8\u7ec6\u8282\u662f\u4e0d\u4e00\u6837\u7684.. (\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e9b\u5185\u90e8\u7684\u7ec6\u8282\u624d\u4f7f\u4e0d\u540c\u5382\u5546\u751f\u4ea7\u7684\u663e\u5361\u6027\u80fd\u4e0d\u4e00\u6837) \u6240\u4ee5\u663e\u5361\u7684\u5236\u9020\u5382\u5546\u9664\u4e86\u9020\u663e\u5361\u8fd8\u9700\u8981\u9488\u5bf9\u672c\u5382\u5546\u7684\u663e\u5361\u4e13\u95e8\u5f00\u53d1\u663e\u5361\u9a71\u52a8..\u7136\u540e,\u64cd\u4f5c\u7cfb\u7edf\u5b89\u88c5\u672c\u53f0\u8ba1\u7b97\u673a\u6b63\u5728\u4f7f\u7528\u7684\u663e\u5361\u5bf9\u5e94\u5382\u5546\u5f00\u53d1\u7684\u663e\u5361\u9a71\u52a8,\u4fdd\u8bc1\u663e\u5361\u7684\u6b63\u5e38\u8fd0\u884c..(\u517c\u5bb9\u6027\u7684\u4f53\u73b0) \u6ce8\u610f\u54e6,\u663e\u5361\u7684\u4e0d\u540c\u5236\u9020\u5382\u5546\u5f00\u7684\u7684\u663e\u5361\u9a71\u52a8\u90fd\u5fc5\u987b\u9075\u5faaOS\u89c4\u5b9a\u597d\u7684\u63a5\u53e3,\u8fd9\u6837OS\u624d\u80fd\u5b89\u88c5\u5f97\u4e0a\u9a71\u52a8.. Ps: \u901a\u8fc7\u524d\u9762\u6211\u4eec\u77e5\u9053\u8ba1\u7b97\u673a\u542f\u52a8\u4f1a\u5148\u542f\u52a8BIOS,BIOS\u542f\u52a8\u6211\u4eec\u771f\u6b63\u4f7f\u7528\u7684OS(windows\u3001linux\u3001mac),OS\u8fd8\u4f1a\u8981\u6c42BIOS\u53bb\u68c0\u67e5\u4e00\u4e0b\u786c\u4ef6\u76f8\u5173\u7684\u9a71\u52a8\u662f\u5426\u6b63\u5e38..","title":"IO\u8bbe\u5907"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_19","text":"\u5317\u6865\u5373 PCI \u6865: \u8fde\u63a5\u9ad8\u901f\u8bbe\u5907\u7684\u82af\u7247 \u5357\u6865\u5373 ISA \u6865: \u8fde\u63a5\u6162\u901f\u8bbe\u5907\u7684\u82af\u7247","title":"\u603b\u7ebf"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#_20","text":"step1: \u8ba1\u7b97\u673a\u901a\u7535 step2: \u542f\u52a8BIOS(\u8ba1\u7b97\u673a\u542f\u52a8\u4e00\u5b9a\u4f1a\u5148\u542f\u52a8\u6b64\u7cfb\u7edf); \u626b\u63cf\u542f\u52a8\u8bbe\u5907/\u542f\u52a8\u76d8(\u5149\u76d8\u3001U\u76d8\u3001\u672c\u5730\u786c\u76d8\u7b49),\u4f9d\u6b21\u68c0\u7d22(\u6709\u9ed8\u8ba4\u7684\u987a\u5e8f,\u53ef\u8c03 \u53c2\u6570\u4f1a\u5728CMOS\u91cc\u4fdd\u5b58). \u82e5\u5728\u67d0\u4e00\u542f\u52a8\u8bbe\u5907\u4e2d\u627e\u5230\u64cd\u4f5c\u7cfb\u7edf,\u5c31\u5f00\u59cb\u5f80\u5185\u5b58\u91cc\u8bfb;\u82e5\u90fd\u6ca1\u6709\u627e\u5230,\u505c\u5728BIOS\u754c\u9762... Ps \u901a\u5e38\u4e00\u95ea\u800c\u8fc7,\u6beb\u65e0\u5bdf\u89c9\u5c31\u8fdb\u5165\u4e86window\u754c\u9762.. \u53ef\u4ee5\u901a\u8fc7\u5f00\u673a\u6309\u952e\u505c\u5728BIOS\u754c\u9762 step3: \u64cd\u4f5c\u7cfb\u7edf\u7684\u5f15\u5bfc\u4fe1\u606f\u4f1a\u653e\u5728\u542f\u52a8\u76d8\u7b2c\u4e00\u4e2a\u5206\u533a\u91cc,\u8fd9\u662f\u56fa\u5b9a\u6b7b\u7684.. \u8bfb\u53d6\u542f\u52a8\u76d8\u7684\u7b2c\u4e00\u4e2a\u6247\u533a\u7684\u6570\u636e(\u79f0\u4e4b\u4e3a \u4e3b\u5f15\u5bfc\u8bb0\u5f55MBR );\u5176\u5927\u5c0f\u4e3a512\u5b57\u8282.. \u524d446\u5b57\u8282\u4e3a\u5f15\u5bfc\u4fe1\u606f,\u91cc\u9762\u6709\u4e00\u4e2abootloader'\u542f\u52a8\u52a0\u8f7d'\u7a0b\u5e8f -- grub\u7a0b\u5e8f; \u540e46\u5b57\u8282\u4e3a\u5206\u533a\u4fe1\u606f; \u6700\u540e2\u5b57\u8282\u4e3a\u7ed3\u675f\u6807\u5fd7\u4f4d.. BIOS\u53ea\u9700\u8981\u5c06grap\u7a0b\u5e8f\u5f80\u5185\u5b58\u91cc\u8bfb grap\u8d1f\u8d23\u5c06OS\u5185\u6838\u88c5\u8f7d\u8fdb\u5185\u5b58,\u542f\u52a8OS(\u5373\u5c06\u64cd\u4f5c\u7cfb\u7edf\u5269\u4e0b\u7684\u5927\u90e8\u961f\u62db\u547c\u8fdb\u5185\u5b58) step4: \u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8ba9BIOS\u53bb\u68c0\u6d4b\u9a71\u52a8\u7a0b\u5e8f\u662f\u5426\u6b63\u5e38..\u82e5\u6ca1\u6709\u95ee\u9898,BIOS\u5c31\u9000\u51fa\u821e\u53f0,OS\u63a5\u7ba1\u6574\u4e2a\u786c\u4ef6\u7684\u8fd0\u884c!","title":"\u8ba1\u7b97\u673a\u542f\u52a8\u8fc7\u7a0b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90/#io_1","text":"\u6240\u6709\u4f18\u5316\u5230\u6700\u540e\u90fd\u4f1a\u505c\u7559\u5230IO\u6027\u80fd\u7684\u4f18\u5316\u4e0a.. \u6700\u4e3b\u8981\u7684\u662f\u786c\u76d8IO. \u6bd4\u59827200\u8f6c/\u5206\u7684\u673a\u68b0\u786c\u76d8IO\u5ef6\u8fdf\u65f6\u95f4\u5927\u6982\u662f9ms,\u8fd99ms\u7684\u65f6\u95f4cpu\u5c31\u662f\u95f2\u7740\u7684.. \u4e3a\u4e86\u5c3d\u91cf\u8ba9cpu\u4e0d\u95f2\u7740,\u4e0d\u96be\u53d1\u73b0,\u6211\u4eec\u9700\u8981\u7740\u91cd\u4e8e\u4f18\u5316<\u786c\u76d8-\u5185\u5b58>\u8fd9\u4e00\u73af\u8282..\u964d\u4f4e\u786c\u76d8IO.. \u5148\u6765\u770b\u770b linux\u64cd\u4f5c\u7cfb\u7edf<\u8fd9\u4e2a\u8f6f\u4ef6> \u5728\u8fd9\u4e00\u73af\u8282\u600e\u4e48\u505a\u7684. linux\u81ea\u5e26\u4f18\u5316\u673a\u5236 cache\u7f13\u5b58 (\u4ece\u786c\u76d8\u4e2d\u8bfb\u6570\u636e\u5230\u5185\u5b58)\u548c buffer\u7f13\u51b2\u533a (\u4ece\u5185\u5b58\u5f80\u786c\u76d8\u4e2d\u5b58\u6570\u636e) \u8bfb \u5148\u4e0d\u5220,\u5728\u5185\u5b58\u4e2d\u7f13\u5b58\u4e0b\u6765,\u4e0b\u6b21\u8bfb\u5c31\u76f4\u63a5\u4ece\u5185\u5b58\u4e2d\u53d6\u5c31\u884c;\u5199 \u6512\u4e00\u6ce2\u518d\u5b58; \u6ce8\u610f,\u91ca\u653ecache\u6ca1\u5f71\u54cd,\u91ca\u653ebuffer\u65f6\u8981\u5148\u628a\u5185\u5b58\u7684\u6570\u636e\u5237\u5230\u786c\u76d8\u91cc\u9762\u53bb. sync \u8981\u77e5\u9053,OS\u4e0d\u80fd\u628a\u6240\u6709\u7684\u786c\u76d8\u6570\u636e\u90fd\u7f13\u5b58\u5230\u5185\u5b58\u91cc,\u53ea\u4f1a\u7f13\u5b58linux\u81ea\u5df1\u89c9\u5f97\u4f60\u4f1a\u7ecf\u5e38\u8bbf\u95ee\u7684\u6570\u636e.. \u5e76\u4e14linux\u7f13\u5b58\u7684\u6570\u636e\u4e0d\u4e00\u5b9a\u662f\u6211\u4eec\u81ea\u4e2a\u513f\u5f00\u53d1\u7684\u5e94\u7528\u8f6f\u4ef6\u60f3\u8981\u7684.. \u6240\u4ee5\u5728\u6211\u4eec \u81ea\u5df1\u5199\u7684\u8f6f\u4ef6 ,\u60f3\u8981\u964d\u4f4e\u786c\u76d8IO, \u8981\u6709\u7c7b\u4f3c\u7684\u673a\u5236, \u9075\u5faa\u4e24\u4e2a\u4f18\u5316\u539f\u5219: 1> \u9488\u5bf9\u8bfb\u64cd\u4f5c, \u6570\u636e\u80fd\u4ece\u5185\u5b58\u4e2d\u53d6\u5c31\u4e0d\u8981\u4ece\u786c\u76d8.. 2> \u9488\u5bf9\u5199\u64cd\u4f5c, \u5728\u5185\u5b58\u4e2d\u6512\u4e00\u6ce2\u518d\u5199\u5165\u786c\u76d8..","title":"\u4f18\u5316/\u964d\u4f4eIO"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","text":"\u524d\u8a00 \u00b6 \u6572\u91cd\u70b9! \u64cd\u4f5c\u7cfb\u7edf \u6700\u6838\u5fc3\u7684\u6982\u5ff5\u5c31\u662f \u8fdb\u7a0b ! \u8fdb\u7a0b\u662f\u5565\uff1f\u522b\u89c9\u5f97\u5f88\u6df1\u5965,\u5b83\u5565\u4e5f\u4e0d\u662f,\u5c31\u662f\u4e00\u4e2a\u65b9\u4fbf\u6c9f\u901a,\u53d1\u660e\u7684\u540d\u8bcd\u800c\u5df2.. \u6307\u7684\u662f\u4e00\u4e2a\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b,\u5177\u4f53\u6765\u8bf4\u662f \u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u786c\u4ef6(cpu\u3001\u786c\u76d8\u3001\u5185\u5b58\u7b49)\u6765\u8fd0\u884c\u7a0b\u5e8f\u7684\u8fc7\u7a0b .. \u7b80\u5355\u6765\u8bf4, \u6211\u4eec\u7ecf\u5e38\u63d0\u5230\u7684<\u8fdb\u7a0b>\u8bf4\u7684\u5c31\u662f<\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f>,\u5373\u7a0b\u5e8f\u4ece\u786c\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e86.. \u4e3a\u4ec0\u4e48\u8981\u6709OS? \u00b6 \u7a0b\u5e8f\u5458\u65e0\u6cd5\u628a\u6240\u6709\u7684\u786c\u4ef6\u64cd\u4f5c\u7ec6\u8282\u90fd\u4e86\u89e3\u5230, \u7ba1\u7406\u8fd9\u4e9b\u786c\u4ef6\u5e76\u4e14\u52a0\u4ee5\u4f18\u5316\u4f7f\u7528\u662f\u975e\u5e38\u7e41\u7410\u7684\u5de5\u4f5c. \u8fd9\u4e2a\u7e41\u7410\u7684\u5de5\u4f5c\u5e94\u8be5\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u5b8c\u6210,\u8fd9\u6837\u7684\u8bdd,\u7a0b\u5e8f\u5458\u5c31\u53ea\u9700\u8981\u4e13\u6ce8\u4e8e\u81ea\u5df1\u5e94\u7528\u8f6f\u4ef6\u7684\u7f16\u5199, \u7f16\u5199\u597d\u7684\u5e94\u7528\u8f6f\u4ef6\u4f1a\u76f4\u63a5\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u529f\u80fd\u6765\u95f4\u63a5\u4f7f\u7528\u786c\u4ef6... \u4ec0\u4e48\u662fOS? \u00b6 \u64cd\u4f5c\u7cfb\u7edf\u662f\u4e00\u4e2a\u534f\u8c03\u3001\u7ba1\u7406\u548c\u63a7\u5236\u8ba1\u7b97\u673a\u5e95\u5c42\u7684\u786c\u4ef6\u8d44\u6e90\u548c\u4e0a\u5c42\u7684\u8f6f\u4ef6\u8d44\u6e90\u7684\u63a7\u5236\u7a0b\u5e8f! Q: \u64cd\u4f5c\u7cfb\u7edf\u662f\u8fd0\u884c\u4e8e\u5185\u6838\u6001\u7684\uff1f A: \u5355\u7eaf\u7684\u8bf4\u64cd\u4f5c\u7cfb\u7edf\u662f\u8fd0\u884c\u4e8e\u5185\u6838\u6001\u662f\u4e0d\u51c6\u786e\u7684.. \u64cd\u4f5c\u7cfb\u7edf\u4f4d\u4e8e\u8ba1\u7b97\u673a\u786c\u4ef6\u4e0e\u5e94\u7528\u8f6f\u4ef6\u4e4b\u95f4, \u672c\u8d28\u4e5f\u662f\u4e00\u4e2a\u8f6f\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u7531 \u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u6838 (\u8fd0\u884c\u4e8e\u5185\u6838\u6001,\u7ba1\u7406\u786c\u4ef6\u8d44\u6e90)\u4ee5\u53ca \u7cfb\u7edf\u8c03\u7528 (\u8fd0\u884c\u4e8e\u7528\u6237\u6001,\u4e3a\u5e94\u7528\u7a0b\u5e8f\u5458\u5199\u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3)\u4e24\u90e8\u5206\u7ec4\u6210.. Ps: \u7cfb\u7edf\u8c03\u7528\u63a5\u53e3,\u5373\u63d0\u4f9b\u7ed9\u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u786c\u4ef6\u8d44\u6e90\u7684\u63a5\u53e3..\u662f\u4e00\u79cd\u5bf9\u786c\u4ef6\u8d44\u6e90\u7684\u62bd\u8c61. \u6bd4\u5982\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u6587\u4ef6\u8fd9\u4e2a\u62bd\u8c61\u6982\u5ff5, \u5bf9\u6587\u4ef6\u7684\u64cd\u4f5c\u5c31\u662f\u5bf9\u78c1\u76d8\u7684\u64cd\u4f5c, \u6709\u4e86\u6587\u4ef6\u6211\u4eec\u65e0\u9700\u518d\u53bb\u8003\u8651\u5173\u4e8e\u78c1\u76d8\u7684\u8bfb\u5199\u63a7\u5236. \u64cd\u4f5c\u7cfb\u7edf\u53d1\u5c55\u53f2 \u00b6 \u64cd\u4f5c\u7cfb\u7edf\u8ddf\u8ba1\u7b97\u673a\u786c\u4ef6\u662f\u540c\u6b65\u53d1\u5c55\u7684.. \u64cd\u4f5c\u7cfb\u7edf\u662f\u4f34\u968f\u7740\u786c\u4ef6\u7684\u5347\u7ea7\u4e00\u70b9\u70b9\u5347\u7ea7\u7684. \u7b2c\u4e00\u4ee3 \u00b6 \u7b2c\u4e00\u4ee3\u8ba1\u7b97\u673a(1940~1955): \u771f\u7a7a\u7ba1\u548c\u7a7f\u5b54\u5361\u7247 \u6240\u6709\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u90fd\u662f\u76f4\u63a5\u64cd\u63a7\u786c\u4ef6! \u6ca1\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u6982\u5ff5. \u7a0b\u5e8f\u5458\u9884\u7ea6\u540e,\u5728\u9884\u7ea6\u7684\u65f6\u95f4\u6bb5\u53ea\u80fd\u7a0b\u5e8f\u5458\u4e00\u4e2a\u4eba\u7528,\u72ec\u4eab\u8ba1\u7b97\u673a\u8d44\u6e90.. \u4e00\u65e6\u7a0b\u5e8f\u51fabug,\u6392\u67e5\u65f6\u95f4\u6bb5\u8ba1\u7b97\u673a\u8d44\u6e90\u662f\u6d6a\u8d39\u7684 \u5e76\u4e14\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7a0b\u5e8f\u5728\u5185\u5b58\u4e2d\u88abcpu\u8c03\u7528\u6267\u884c.. \u7b2c\u4e8c\u4ee3 \u00b6 \u7b2c\u4e8c\u4ee3\u8ba1\u7b97\u673a(1955~1965): \u6676\u4f53\u7ba1\u548c\u6279\u5904\u7406\u7cfb\u7edf \u771f\u7a7a\u7ba1\u5f88\u5bb9\u6613\u70e7 ,\u6539\u8fdb\u6210\u4e86 \u6676\u4f53\u7ba1 ; \u5f53\u65f6\u7684\u8ba1\u7b97\u673a\u5f88\u6602\u8d35,\u4e3a\u4e86\u63d0\u9ad8\u8ba1\u7b97\u673a\u8d44\u6e90\u5229\u7528\u7387,\u4f7f\u7528\u4e86 \u6279\u5904\u7406\u7cfb\u7edf .. \u5171\u4e09\u53f0\u8ba1\u7b97\u673a,\u4e8c\u53f01401\u4fa7\u91cd\u4e8eIO,\u4e00\u53f07094\u4fa7\u91cd\u4e8e\u8fd0\u7b97; \u4e00\u5806\u5361\u7247 \u901a\u8fc71401\u8bfb\u5165\u78c1\u5e26\u673a,\u7ecf\u8fc7\u7cfb\u7edf\u78c1\u5e26\u5904\u7406\u540e, \u8f93\u5165\u78c1\u5e26\u7ed97094,7094\u6279\u5904\u7406\u8fd0\u7b97\u540e\u8f93\u51fa\u78c1\u5e26\u7ed9\u53e6\u4e00\u53f01401\u8fdb\u884c\u6253\u5370.. \u4f55\u4e3a\u6279\u5904\u7406\u7cfb\u7edf\uff1f \u00b6 \u6279\u5904\u7406\u7cfb\u7edf -- \u5355\u7528\u6237\u5355\u4efb\u52a1 \u7b80\u5355\u4e3e\u4e2a\u6817\u5b50,\u4e00\u6b21\u6027\u8f93\u5165\u7ed9\u8ba1\u7b97\u673a10\u4e2a\u7a0b\u5e8f,\u8ba1\u7b97\u673a \u4f9d\u6b21 \u5c06\u5176\u653e\u5165\u5185\u5b58\u4e2d\u8fd0\u884c,\u518d\u4e00\u8d77\u8f93\u51fa.. \u5728\u8fd9\u4e00\u8fc7\u7a0b\u4e2d,\u8ddf\u7b2c\u4e00\u4ee3\u540c\u6837\u7684, \u8ba1\u7b97\u673a\u4e00\u6b21\u53ea\u80fd\u628a\u4e00\u4e2a/\u9053\u7a0b\u5e8f\u8bfb\u5165\u5185\u5b58,\u8fd0\u884c\u5b8c\u6bd5\u540e,\u518d\u6267\u884c\u4e0b\u4e00\u4e2a\u7a0b\u5e8f,\u6ca1\u6709\u5e76\u53d1,\u79f0\u4e4b\u4e3a < \u4e32\u884c >. \u4f60\u7ec6\u54c1,\u662f\u6709\u8fdb\u7a0b\u90a3\u5473\u9053\u5728\u91cc\u9762\u7684(\u00b4\u25bd\uff40) \u53ef\u80fd\u4f60\u4f1a\u60f3,\u67d0\u4e00\u9053\u7a0b\u5e8f\u51fa\u9519\u4e86,\u4e0d\u5c31\u963b\u585e\u5728\u90a3\u4e86\u5417\uff1f\u7a0b\u5e8f\u6709\u5f02\u5e38\u5904\u7406\u554a,\u6253\u5370\u51fa\u9519\u4fe1\u606f.\u7ee7\u7eed\u8fd0\u884c\u4e0b\u4e00\u4e2a\u7a0b\u5e8f. \u4f18: \u5145\u5206\u5229\u7528\u4e86\u8ba1\u7b97\u673a\u8d44\u6e90 \u52a3: 1> \u6574\u4e2a\u8fc7\u7a0b\u662f\u9700\u8981\u4eba\u53c2\u4e0e\u7684,\u5c06\u78c1\u5e26\u642c\u6765\u642c\u53bb; 2> \u7a0b\u5e8f\u8fd0\u884c\u662f\u4ecd\u7136\u662f\u4e32\u884c\u7684,\u4f1a\u6512\u4e00\u5927\u6ce2\u518d\u4e00\u8d77\u8f93\u51fa,\u8ba9\u7a0b\u5e8f\u5458\u660e\u663e\u611f\u89c9\u5230\u7b49\u5f85.. \u4e0d\u80fd\u5373\u65f6\u8c03\u8bd5\u7a0b\u5e8f.. \u672c\u8d28\u4e0a\u662f\u5355\u4efb\u52a1\u5355\u7528\u6237,\u6ca1\u6709\u5e76\u53d1,\u662f \u4e32\u884c \u7b2c\u4e09\u4ee3 \u00b6 \u7b2c\u4e09\u4ee3\u8ba1\u7b97\u673a(1965~1980): \u96c6\u6210\u7535\u8def\u82af\u7247\u548c\u591a\u9053\u7a0b\u5e8f\u8bbe\u8ba1 \u63d0\u4e00\u5634: IBM\u516c\u53f8\u53d1\u660e system/360 \u7cfb\u5217\u7684\u8ba1\u7b97\u673a \u96c6IO\u4e0e\u8fd0\u7b97\u4e8e\u4e00\u8eab. \u6b64\u4e43\u73b0\u5728\u670d\u52a1\u5668\u7684 \u9f3b\u7956 .. \u7b2c\u4e8c\u4ee3\u8ba1\u7b97\u673a\u7684\u7b2c\u4e00\u4e2a\u7f3a\u70b9\u901a\u8fc7SPOOLING\u6280\u672f\u89e3\u51b3\u4e86;\u7b2c\u4e8c\u4e2a\u7f3a\u70b9\u901a\u8fc7\u591a\u9053\u6280\u672f\u5b9e\u73b0\u5e76\u53d1\u6765\u89e3\u51b3.. Ps: \u82e5\u6709\u591a\u4e2a\u4efb\u52a1, \u4e32\u884c\u662f\u4e00\u4e2a\u8fd0\u884c\u5b8c\u6bd5\u540e\u518d\u8fd0\u884c\u4e0b\u4e00\u4e2a;\u5e76\u53d1\u7684\u8bdd\u770b\u8d77\u6765\u662f\u540c\u65f6\u8fd0\u884c\u7684.. \u5e76\u53d1 : \u591a\u4e2a\u8fdb\u7a0b\u770b\u8d77\u6765\u662f\u540c\u65f6\u8fd0\u884c\u7684. \u628a\u65f6\u95f4\u5206\u6210\u82e5\u5e72\u6bb5,\u4f7f\u591a\u4e2a\u8fdb\u7a0b\u5feb\u901f\u4ea4\u66ff\u7684\u6267\u884c \u5e76\u884c : \u591a\u4e2a\u8fdb\u7a0b\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u540c\u65f6\u8fd0\u884c,\u53ea\u6709\u591a\u4e2acpu(\u4e0d\u7ba1\u662f\u5355\u6838\u8fd8\u662f\u591a\u6838\u7684)\u624d\u80fd\u5b9e\u73b0\u591a\u4e2a\u8fdb\u7a0b\u5e76\u884c. Ps \u7ebf\u7a0b\u7684\u5e76\u53d1\u5e76\u884c\u6682\u4e14\u4e0d\u8c08,\u540e\u9762\u518d\u8bf4.. \u591a\u9053\u6280\u672f\u4ea7\u751f\u80cc\u666f \u00b6 \u591a\u9053\u6280\u672f -- \u5e76\u53d1 \u540e\u7eed\u7684\u64cd\u4f5c\u7cfb\u7edf\u90fd\u91c7\u7528\u4e86\u591a\u9053\u6280\u672f.. Ps: \u6211\u4eec\u5f80\u5f80\u56fe\u7701\u4e8b,\u8bf4cpu\u5728\u591a\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362;\u5b9e\u5219\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236cpu\u53bb\u5207\u6362\u7684.. \u82e5CPU\u6709\u56db\u4e2a\u6838,\u90a3\u4e48\u6bcf\u4e2a\u6838\u90fd\u5728\u4efb\u52a1(\u5f80\u5f80\u6307\u7684\u662f\u7ebf\u7a0b)\u4e4b\u95f4\u5207\u6362. cpu\u5728\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\u7684\u8fc7\u7a0b\u4e2d,\u82e5\u9700\u8981\u64cd\u4f5c\u786c\u76d8,\u5219\u53d1\u9001\u64cd\u4f5c\u786c\u76d8\u7684\u6307\u4ee4. \u6307\u4ee4\u4e00\u65e6\u53d1\u51fa,\u786c\u76d8\u4e0a\u7684\u673a\u68b0\u624b\u81c2\u6ed1\u52a8\u8bfb\u53d6\u6570\u636e\u5230\u5185\u5b58\u4e2d. \u8fd9\u4e00\u6bb5\u65f6\u95f4,cpu\u9700\u8981\u7b49\u5f85,\u65f6\u95f4\u770b\u4f3c\u5f88\u77ed\u5f88\u77ed,\u4f46\u5bf9\u4e8ecpu\u6765\u8bf4\u5df2\u7ecf\u5f88\u957f\u5f88\u957f,\u957f\u5230\u53ef\u4ee5\u8ba9cpu\u505a\u5f88\u591a\u5176\u4ed6\u7684\u4efb\u52a1. \u5982\u679c\u6211\u4eec\u8ba9cpu\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u5207\u6362\u5230\u53bb\u505a\u5176\u4ed6\u7684\u4efb\u52a1,\u8fd9\u6837cpu\u4e0d\u5c31\u5145\u5206\u5229\u7528\u4e86\u5417? \u6700\u5927\u9650\u5ea6\u7684\u5229\u7528cpu\u8d44\u6e90. \u7a7a\u95f4\u4e0a\u7684\u590d\u7528 \u00b6 \u591a\u9053\u6280\u672f -- \u7a7a\u95f4\u4e0a\u7684\u590d\u7528: \u591a\u9053\u7a0b\u5e8f\u5728\u8fd0\u884c\u524d\u5fc5\u987b\u5148\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d.(\u4e5f\u5c31\u53d8\u6210\u4e86\u591a\u4e2a\u8fdb\u7a0b) Ps: \u591a\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u662f\u76f8\u4e92\u9694\u79bb\u7684,\u5e76\u4e14\u662f\u7269\u7406\u9694\u79bb!(\u5373\u786c\u4ef6\u5c42\u9762\u7684\u9694\u79bb) \u5b89\u5168\u6027 -- \u591a\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u4e0d\u4e92\u901a; \u7a33\u5b9a\u6027 -- \u9000\u51fa\u7a0b\u5e8f\u53ea\u4f1a\u91ca\u653e\u6389\u81ea\u4e2a\u513f\u7684\u5185\u5b58\u7a7a\u95f4. \u6b63\u56e0\u4e3a\u5b9e\u73b0\u4e86\u8fdb\u7a0b\u5185\u5b58\u4e4b\u95f4\u7684\u7269\u7406\u9694\u79bb,\u5206\u65f6\u7cfb\u7edf\u624d\u80fd\u6d41\u884c\u8d77\u6765.. Q:\u5982\u4f55\u9694\u79bb\u7684\uff1f\uff1f A:\u64cd\u4f5c\u7cfb\u7edf\u4e3b\u8981\u6709\u4e94\u5927\u529f\u80fd:\u4f5c\u4e1a\u7ba1\u7406\u3001\u8fdb\u7a0b\u7ba1\u7406\u3001\u5b58\u50a8\u7ba1\u7406\u3001\u8bbe\u5907\u7ba1\u7406\u548c\u6587\u4ef6\u7ba1\u7406.. \u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u786c\u4ef6\u8d44\u6e90\u7ed9\u4e0a\u5c42\u7684\u8f6f\u4ef6\u4f7f\u7528..\u800c\u786c\u4ef6\u8d44\u6e90\u4e2d\u7684cpu\u662f\u8fd9\u4e9b\u786c\u4ef6\u8d44\u6e90\u7684\u8001\u5927..cpu\u5b83\u627f\u62c5\u4e86\u6240\u6709\u7684\u8ba1\u7b97\u4efb\u52a1 \u63d0\u4e00\u5634,\u4f5c\u4e1a\u3001\u7a0b\u5e8f\u3001\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb: \u53c2\u8003\u8d44\u6599: https://blog.csdn.net/hguisu/article/details/1910803 \u4f5c\u4e1a -- \u7528\u6237\u5728\u4e00\u6b21\u89e3\u51b3\u6216\u662f\u4e00\u4e2a\u4e8b\u52a1\u5904\u7406\u8fc7\u7a0b\u4e2d\u8981\u6c42\u8ba1\u7b97\u673a\u7cfb\u7edf\u6240\u505a\u7684\u5de5\u4f5c\u7684\u96c6\u5408 \u8fdb\u7a0b -- \u4e00\u4e2a\u5177\u6709\u4e00\u5b9a\u72ec\u7acb\u529f\u80fd\u7684\u7a0b\u5e8f\u5728\u4e00\u4e2a\u6570\u636e\u96c6\u4e0a\u7684\u4e00\u6b21\u52a8\u6001\u6267\u884c\u7684\u8fc7\u7a0b, \u662f\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u4e00\u4e2a\u72ec\u7acb\u5355\u4f4d,\u662f\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u7684\u8f7d\u4f53. 1 > \u8fdb\u7a0b\u4e0e\u4f5c\u4e1a\u662f\u4e00\u4e00\u5bf9\u5e94\u7684. ( \u274c ) \u6267\u884c\u4e00\u4e2a\u4f5c\u4e1a\u53ef\u80fd\u4f1a\u8fd0\u884c\u591a\u4e2a\u4e0d\u540c\u7684\u8fdb\u7a0b,\u4e14\u5fc5\u987b\u81f3\u5c11\u7531\u4e00\u4e2a\u8fdb\u7a0b\u7ec4\u6210,\u53cd\u4e4b\u4e0d\u6210\u7acb ; 2 > \u8fdb\u7a0b\u4e0e\u7a0b\u5e8f\u662f\u4e00\u4e00\u5bf9\u5e94\u7684. ( \u274c ) \u4e00\u4e2a\u7a0b\u5e8f\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a\u8fdb\u7a0b ; \u4e00\u4e2a\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\u6709\u5e8f\u5730\u6267\u884c\u82e5\u5e72\u7a0b\u5e8f 3 > \u7a0b\u5e8f\u662f\u9759\u6001\u7684,\u800c\u8fdb\u7a0b\u662f\u52a8\u6001\u7684.. \u63a5\u4e0b\u6765\u9700\u8981\u4e86\u89e3\u51e0\u4e2a\u6982\u5ff5:\u903b\u8f91 ( \u76f8\u5bf9 ) \u5730\u5740\u3001\u7ebf\u6027 ( \u865a\u62df ) \u5730\u5740\u3001\u7269\u7406 ( \u7edd\u5bf9 ) \u5730\u5740\u3001\u5206\u6bb5\u673a\u5236\u3001\u5206\u9875\u673a\u5236\u3001\u6bb5\u9875\u5f0f\u590d\u5408 1 > cpu\u7ecf\u8fc7MMU\u5185\u5b58\u7ba1\u7406\u5355\u5143\u53ef\u4ee5\u8f6c\u6362\u5f97\u5230\u5916\u5730\u5740\u603b\u7ebf\u7684\u4f4d\u6570,\u6b64\u4f4d\u6570\u51b3\u5b9a\u4e86\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f.. 2 > CPU\u4f7f\u7528\u7269\u7406\u5730\u5740\u7d22\u5f15\u8ba1\u7b97\u673a\u7684\u6240\u6709\u786c\u4ef6\u8d44\u6e90 3 > \u4e00\u4e2a\u786c\u4ef6\u5e73\u53f0\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u5730\u5740\u7a7a\u95f4,\u800c\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u8ba4\u4e3a\u81ea\u5df1\u72ec\u4eab\u6574\u4e2a\u5e73\u53f0\u7684\u8d44\u6e90.. \u6240\u4ee5\u6709\u4e86\u7ebf\u6027\u5730\u5740, \u7ebf\u6027\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u5f80\u5f80\u4e8ecpu\u7684\u4f4d\u6570\u4e00\u81f4,32\u4f4d\u7684cpu,\u90a3\u4e48\u7ebf\u6027\u7a7a\u95f4\u7684\u5927\u5c0f\u5c31\u4f4d2^32 = 4GB. ( \u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u4e0e\u7ebf\u6027\u7a7a\u95f4\u7684\u5927\u5c0f\u6ca1\u6709\u5fc5\u7136\u8054\u7cfb ) 4 > \u7ebf\u6027\u5730\u5740\u53ef\u4ee5\u6620\u5c04\u5230\u67d0\u4e00\u90e8\u5206\u7269\u7406\u5730\u5740\u7a7a\u95f4\u6216\u6574\u4e2a\u7269\u7406\u5730\u5740\u7a7a\u95f4.. \u5c3d\u7ba1\u4e00\u4e2a\u786c\u4ef6\u5e73\u53f0\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u5730\u5740\u7a7a\u95f4 \u4f46\u4e00\u4e2a\u786c\u4ef6\u5e73\u53f0\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u6027\u5730\u5740\u7a7a\u95f4.. 5 > x86\u67b6\u6784\u7684cpu\u5185\u5b58\u7ba1\u7406\u673a\u5236\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206:\u5206\u6bb5\u673a\u5236\u548c\u5206\u9875\u673a\u5236. \u5206\u6bb5\u548c\u5206\u9875\u673a\u5236\u5b9e\u73b0\u4e86\u7a0b\u5e8f\u4e4b\u95f4\u7684\u9694\u79bb.. \u5206\u9875\u673a\u5236\u5b9e\u73b0\u4e86\u6bd4\u5206\u6bb5\u673a\u5236\u66f4\u7c92\u5ea6\u5316\u7684\u7ba1\u7406.. \u5206\u9875\u673a\u5236\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u865a\u62df\u5185\u5b58.. 6 > \u5206\u6bb5\u673a\u5236\u542f\u7528,\u5206\u9875\u673a\u5236\u672a\u542f\u7528: \u903b\u8f91 --> \u7ebf\u6027 == \u7269\u7406\u5730\u5740 \u5206\u6bb5\u5206\u9875\u673a\u5236\u540c\u65f6\u542f\u7528: \u903b\u8f91 --> \u7ebf\u6027 --> \u7269\u7406\u5730\u5740 ( \u5177\u4f53\u7684\u8f6c\u6362\u8fc7\u7a0b,\u5c31\u4e0d\u662f\u4e00\u4e01\u534a\u70b9\u80fd\u9610\u8ff0\u6e05\u695a\u7684\u5566,\u77e5\u9053\u8fd9\u4e2a\u5927\u4f53\u65b9\u5411\u5c31\u884c\u5566,\u5177\u4f53\u8fc7\u7a0b\u6682\u4e14\u4e0d\u7528\u4e86\u89e3.\u7565\u8fc7. ) \u65f6\u95f4\u4e0a\u7684\u590d\u7528 \u00b6 \u591a\u9053\u6280\u672f -- \u65f6\u95f4\u4e0a\u7684\u590d\u7528: \u591a\u4e2a\u4efb\u52a1\u590d\u7528cpu\u7684\u65f6\u95f4\u7247,\u901a\u4fd7\u6765\u8bb2,\u5c31\u662fcpu\u5728\u591a\u4e2a\u7a0b\u5e8f\u4e4b\u95f4\u6765\u56de\u5feb\u901f\u5207\u6362. \u4e0d\u96be\u770b\u51fa,\u7a7a\u95f4\u4e0a\u7684\u590d\u7528\u662f\u5728\u4e3a\u65f6\u95f4\u4e0a\u7684\u590d\u7528\u505a\u94fa\u57ab,\u4e3a\u4e86\u8ba9cpu\u5207\u6362\u7684\u5feb\u4e00\u4e9b.. \u6ce8\u610f\u54e6! cpu\u662f\u786c\u4ef6,\u6765\u56de\u5207\u6362\u662f\u53d7\u64cd\u4f5c\u7cfb\u7edf\u8fd9\u4e00\u8f6f\u4ef6\u63a7\u5236\u7684.. \u591a\u9053\u6280\u672f\u662f\u5e94\u7528\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684! \u6709\u4e09\u4e2a\u4efb\u52a1A B C.\u5148\u4f9d\u6b21\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d. \u5b83\u4eec\u9700\u8981cpu\u8fd0\u7b97\u7684\u65f6\u95f4\u90fd\u662f1s,\u8fd0\u7b97\u5b8c\u540e\u4ea7\u751f\u7684\u6570\u636e\u9700\u8981\u653e\u5230\u786c\u76d8\u91cc,\u786c\u76d8IO\u65f6\u95f4\u90fd\u662f9s.. Q: \u4f7f\u7528\u591a\u9053\u6280\u672f,\u5b8c\u6210\u8fd93\u4e2a\u4efb\u52a1\u9700\u8981\u591a\u957f\u65f6\u95f4? A: 1+1+1+9 = 12s. \u60f3\u901a\u5173\u952e\u7684\u4e00\u70b9\u5728\u4e8e,\u5728\u505a\u4efb\u52a1C\u7684IO\u65f6,\u4efb\u52a1A\u548cB\u7684IO\u4e5f\u5728\u505a,\u5f53\u4efb\u52a1C\u7684IO\u505a\u5b8c\u65f6,AB\u7684IO\u65e9\u5c31\u505a\u5b8c\u4e86. \u800ccpu\u5728\u4e09\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362\u7684\u65f6\u95f4\u5ffd\u7565\u4e0d\u8ba1.. \u5148\u8865\u5145\u4e00\u4e2a\u77e5\u8bc6\u70b9,\u5728\u5b9e\u9645\u60c5\u51b5\u4e0b,\u54ea\u6015\u4efb\u52a1A\u53ea\u6709\u8fd0\u7b97\u6ca1\u6709IO,\u82e5\u6b64\u4efb\u52a1A\u5360\u7528cpu\u7684\u65f6\u95f4\u8fc7\u957f(\u4f60\u95ee\u591a\u957f\u7b97\u957f,OS\u5185\u90e8\u4ee3\u7801\u7684\u4e8b\u60c5\u4e86,\u6211\u4eec\u4e0d\u5fc5care..),\u4e5f\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u4e00\u811a\u8e39\u5f00,\u817e\u51facpu\u7ed9\u5176\u5b83\u4efb\u52a1\u7528.. Q: \u82e5\u4efb\u52a1ABC\u90fd\u53ea\u6709\u8fd0\u7b97\u65f6\u95f410s,\u90fd\u6ca1\u6709IO..\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u5e76\u53d1\u771f\u7684\u6bd4\u4e32\u884c\u6548\u7387\u9ad8\u5417\uff1f A: \u4e32\u884c30s,\u5e76\u884c\u662f\u5927\u4e8e30s\u7684,\u56e0\u4e3a\u8fd8\u8981\u8003\u8651cpu\u5207\u6362\u8fdb\u7a0b\u7684\u65f6\u95f4.. \u5373cpu\u5728\u6ca1\u6709\u9047\u5230IO\u7684\u60c5\u51b5\u4e0b\u5207\u6362,\u4e0d\u4f1a\u5207\u6362\u6548\u7387,\u53cd\u800c\u4f1a\u964d\u4f4e\u6548\u7387.. \u4f46\u771f\u5b9e\u60c5\u51b5\u4e0b,\u8fd8\u662f\u5f97\u5207,\u56e0\u4e3a\u5f97\u5b9e\u73b0\u5e76\u53d1,\u5c31\u4e0d\u80fd\u8ba9cpu\u88ab\u6346\u7ed1\u7684\u65f6\u95f4\u8fc7\u957f. \u7efc\u4e0a, \u4ec0\u4e48\u65f6\u5019\u5207\u6362\uff1f \u60c5\u51b5\u4e00: \u5f53\u4e00\u4e2a\u4efb\u52a1\u9047\u5230IO,\u80af\u5b9a\u8981\u5207\u6362 -- \u6548\u7387\u63d0\u5347 \u60c5\u51b5\u4e8c: \u4e00\u4e2a\u4efb\u52a1\u6ca1\u6709\u9047\u5230IO\u4f46\u662f\u5360\u7528cpu\u65f6\u95f4\u8fc7\u957f,\u4e5f\u8981\u5207\u6362 -- \u964d\u4f4e\u6548\u7387 \u5206\u65f6\u64cd\u4f5c\u7cfb\u7edfCTTS \u00b6 \u6838\u5fc3\u5c31\u662f\u5e94\u7528 \u591a\u9053\u6280\u672f \u6765\u5b9e\u73b0\u591a\u4e2a\u4efb\u52a1/\u8fdb\u7a0b\u7684 \u5e76\u53d1 \u8fd0\u884c. -- \u591a\u7528\u6237\u591a\u4efb\u52a1 \u25b2 \u4ec5\u4ece\u64cd\u4f5c\u7cfb\u7edf\u89d2\u5ea6\u770b: Linux/Unix\u662f\u4e00\u4e2a\u591a\u7528\u6237\u3001\u591a\u4efb\u52a1\u7684\u64cd\u4f5c\u7cfb\u7edf windows\u662f\u4e00\u4e2a\u5355\u7528\u6237\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf \u591a\u7528\u6237\u4e0d\u662f\u8bf4\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7528\u6237,\u800c\u662f\u6307\u4e00\u6b21\u53ef\u4ee5\u767b\u5f55\u591a\u4e2a\u7528\u6237 \u591a\u4efb\u52a1\u6307\u7684\u662f\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u8fdb\u7a0b \u25b2 \u4ece\u7f51\u7edc\u6280\u672f\u7684\u89d2\u5ea6: \u8fde\u673a\u7ec8\u7aef\u5728\u6ca1\u6709\u4e92\u8054\u7f51\u7684\u60c5\u51b5\u4e0b\u662f\u6709\u610f\u4e49\u7684,\u591a\u4e2a\u4eba\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u8fde\u673a\u7ec8\u7aef\u8fde\u5230\u4e00\u53f0\u673a\u5668/\u670d\u52a1\u5668\u4e0a\u4f7f\u7528 \u800c\u6709\u4e86\u4e92\u8054\u7f51\u4e4b\u540e,\u591a\u4e2a\u4eba\u53ef\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u670d\u52a1\u5668,\u8fd9\u4e2a\u65f6\u5019\u591a\u7528\u6237or\u5355\u7528\u6237\u7684\u6982\u5ff5\u5c31\u4e0d\u518d\u90a3\u4e48\u91cd\u8981 \u63d0\u4e00\u5634:windows\u526a\u5207\u677f\u5b9e\u9645\u4e0a\u662f\u6240\u6709\u8fdb\u7a0b\u7684\u5171\u4eab\u5185\u5b58.. linux\u91cc\u9762\u7684\u7ba1\u9053\u4e5f\u662f\u4e00\u79cd\u5171\u4eab\u5185\u5b58. \u5206\u65f6\u64cd\u4f5c\u7cfb\u7edf = \u591a\u4e2a\u8054\u673a\u7ec8\u7aef + \u591a\u9053\u6280\u672f. 10\u4e2a\u5ba2\u6237\u7aef/10\u4e2a\u7a0b\u5e8f\u733f \u901a\u8fc7\u8054\u673a\u8bbe\u5907(\u6ca1\u6709\u7f51\u7edc\u54e6) \u52a0\u8f7d\u81ea\u5df1\u7684\u7a0b\u5e8f\u5230\u8ba1\u7b97\u673a\u5185\u5b58.(10\u4e2a\u8fdb\u7a0b) \u8ba1\u7b97\u673a\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u591a\u9053\u6280\u672f\u8ba9\u8ba1\u7b97\u673a\u7684\u8fd9\u4e00\u9897cpu\u5728\u8fd910\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u6765\u56de\u5207\u6362\u8fdb\u884c\u8fd0\u7b97.. \u4f7f\u5f97\u8fd910\u4e2a\u7a0b\u5e8f\u5458\u4ee5\u4e3a\u81ea\u5df1\u72ec\u4eab\u4e86\u8ba1\u7b97\u673a\u8d44\u6e90... (\u5f53\u65f6\u6ca1\u6709\u591a\u6838\u591acpu) Ps: \u5f53\u65f6\u7684\u5206\u65f6\u64cd\u4f5c\u7cfb\u7edf\u53ea\u80fd\u652f\u630110\u51e0\u4e2a\u8054\u673a\u7ec8\u7aef. <\u804a\u4e00\u70b9\u70b9\u7a17\u5b98\u91ce\u53f2> CTTS -- MULTICS -- unix -- minix -- linux -- linux\u53d1\u884c\u7248:redhat\u3001centos MIT\uff0c\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u548c\u901a\u7528\u7535\u6c14\u5728CTTS\u6210\u529f\u7814\u5236\u540e\u51b3\u5b9a\u5f00\u53d1\u80fd\u591f\u540c\u65f6\u652f\u6301\u4e0a\u767e\u7ec8\u7aef\u7684MULTICS \u4f46\u5176\u8bbe\u8ba1\u8005\u7740\u773c\u4e8e\u5efa\u9020\u6ee1\u8db3\u6ce2\u58eb\u987f\u5730\u533a\u6240\u6709\u7528\u6237\u8ba1\u7b97\u9700\u6c42\u7684\u4e00\u53f0\u673a\u5668, \u4e00\u5f00\u59cb\u5c31\u8ffd\u6c42\u5b8c\u7f8e,\u6700\u540e\u9879\u76ee\u6d41\u4ea7\u4e86. \u540e\u6765\u4e00\u4f4d\u53c2\u52a0\u8fc7MULTICS\u7814\u5236\u7684\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u8ba1\u7b97\u673a\u79d1\u5b66\u5bb6\"Ken Thompson\"!! \u5b83\u5f00\u53d1\u4e86\u4e00\u4e2a\u7b80\u6613\u7684,\u5355\u7528\u6237\u7248\u672c\u7684MULTICS,\u6700\u65e9\u53ea\u652f\u63012\u4e2a\u8054\u673a\u7ec8\u7aef --- \u8fd9\u5c31\u662f\u540e\u6765\u5927\u540d\u9f0e\u9f0e\u7684\"UNIX\u7cfb\u7edf\"\u7684\u524d\u8eab!!! 1970\u5e74 -- UNIX\u8bde\u751f \u79f0\u4e4b\u4e3aUNIX\u5143\u5e74.UNIX\u7cfb\u7edf\u6700\u5f00\u59cb\u662f\u4f7f\u7528\u6c47\u7f16\u8bed\u8a00B\u8bed\u8a00\u5199\u7684!! 1973\u5e74 Ken Thompson\u548cc\u8bed\u8a00\u4e4b\u7236\u4e39\u5c3c\u65af\u91cc\u5947\u4e00\u8d77\u7528c\u8bed\u8a00\u91cd\u6784\u4e86UNIX.. Ps: \u5982\u4eca\u5f00\u53d1\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bed\u8a00\u4e5f\u662fC\u8bed\u8a00..(c\u8bed\u8a00\u662f\u5728\u9ad8\u7ea7\u8bed\u8a00\u4e2d\u662f\u6700\u63a5\u8fd1\u786c\u4ef6\u7684\u8bed\u8a00,\u6548\u7387\u6700\u9ad8) 1974\u5e74 UNIX\u7b2c\u4e00\u6b21\u516c\u4e4b\u4e8e\u4f17,\u5171\u4eab\u4e86\u6e90\u4ee3\u7801,\u5927\u5bb6\u96c6\u601d\u5e7f\u76ca,\u5f97\u5230\u8fc5\u901f\u7684\u53d1\u5c55 1979\u5e74 \u5728UNIX\u57fa\u7840\u4e0a\u7814\u7a76TCP/IP\u534f\u8bae,\u6781\u5927\u4fc3\u8fdb\u4e86UNIX\u7684\u53d1\u5c55 (\u6572\u9ed1\u677f!\u8fd9\u4f7f\u5f97Linux\u5728\u7f51\u7edc\u670d\u52a1\u9886\u57df\u6027\u80fd\u975e\u5e38\u5f3a\u5927 linux\u7cfb\u7edf\u7684\u8001\u7956\u5b97\u662funix) (\u4e5f\u56e0\u4e3a\u7f51\u7edc\u7684\u51fa\u73b0,\u4f7f\u5f97\u591a\u7528\u6237\u7684\u7528\u5904\u4e0d\u5927,\u8ba1\u7b97\u673a\u80fd\u901a\u8fc7\u7f51\u7edc\u652f\u6301\u66f4\u591a\u7528\u6237..) 1984\u5e74 \u56e0\u4e3aUNIX\u7684\u5546\u4e1a\u5316,Andrew S.anenbaum\u5f00\u53d1\u4e86\u4e00\u4e2aMinix\u7684\u6559\u5b66\u64cd\u4f5c\u7cfb\u7edf. (\u5bf9\u5916\u79f0\u672a\u53c2\u7167UNIX \u9a97\u5c0f\u5b69.. \u4f46\u6e90\u4ee3\u7801\u662f\u5f00\u6e90\u4e86\u7684) 1985\u5e74 Richard Stallman\u5bf9UNIX\u7684\u5546\u4e1a\u5316\u611f\u5230\u6124\u6012. \u53d1\u8d77\u4e86\u4e00\u4e2a\u540d\u4e3aGNU\u7684\u5f00\u6e90\u8ba1\u5212,\u5176\u4e2d\u5b9a\u5236\u7684GPL\u6761\u6b3e\u76f4\u63a5\u5960\u5b9a\u4e86\u5982\u4eca\u7684\u5f00\u6e90\u57fa\u8c03. 1991\u5e74 \u82ac\u5170\u5927\u5b66\u751fLinus Torvalds\u4eceMinix\u4e0a\u83b7\u53d6\u4e86\u4e9b\u7075\u611f,\u5f00\u53d1\u5e76\u5f00\u6e90\u4e86linux\u7cfb\u7edf. Linux\u64cd\u4f5c\u7cfb\u7edf\u6700\u9ad8\u67097\u4e2a\u7ec8\u7aef\u5c31\u662f\u81f4\u656cunix\u7cfb\u7edf(unix\u7cfb\u7edf\u6700\u9ad8\u4e5f\u662f7\u4e2a) \u4e0d\u5f97\u4e0d\u63d0,Linux\u7cfb\u7edf\u6709\u4e2a\u91cd\u8981\u7684\u6982\u5ff5 -- \u4e00\u5207\u7686\u6587\u4ef6. \u56e0\u4e3a\u5f00\u6e90,\u540e\u6765\u6709\u4e86linux\u5404\u79cd\u5404\u6837\u7684\u53d1\u884c\u7248(\u628alinux\u6e90\u7801\u62ff\u6765\u6539\u4e00\u6539\u52a0\u70b9\u81ea\u5df1\u7684\u4e1c\u897f),\u6bd4\u5982\u7ea2\u5e3d\u3001ubuntu\u3001\u9e92\u9e9f\u7b49. \u56e0\u4e3a\u7ea2\u5e3d\u6536\u8d39\u5927\u5bb6\u5bf9\u5b83\u4e0d\u6ee1,\u53c8\u62ff\u6765\u6539\u5427\u6539\u5427(\u5f53\u7136\u7ea2\u5e3d\u4e5f\u662f\u9075\u5faa\u5f00\u6e90\u534f\u8bae..) \u51e0\u4e4e\u628a\u7ea2\u5e3d\u5168\u76d8\u6252\u62c9\u4e0b\u6765,\u628a\u91cc\u9762\u5e26\u6709\u660e\u663e\u7279\u5f81\u7684\u6bd4\u5982\u540d\u5b57\u547d\u540dredhat\u6539\u4e86,logo\u6539\u4e86.. -- CentOS \u518d\u8bf4\u8fc7\u4e2a\u5c0f\u6545\u4e8b linux\u662f\u5f00\u6e90\u7684,\u4e00\u5f00\u59cblinux\u793e\u533a\u7684\u7a0b\u5e8f\u5458\u4f1a\u5c06\u66f4\u65b0\u7684\u4ee3\u7801\u6258\u7ba1\u5230\u7b2c\u4e09\u65b9\u5e73\u53f0\u4e0a.. \u540e\u6765\u793e\u533a\u7684\u4eba\u5f00\u59cb\u7834\u89e3\u8fd9\u4e2a\u5e73\u53f0\u7684\u534f\u8bae,\u906d\u5230\u4e86\u5e73\u53f0\u7684\u8b66\u544a.. linux\u793e\u533a\u7684\u5927\u4f6c\u4eec\u53d7\u8fd9\u6c14?\u76f4\u63a5\u5f00\u53d1\u4e86\u4e00\u4e2a\u540d\u4e3agit\u7684\u8f6f\u4ef6\u6765\u66f4\u597d\u7684\u7ba1\u7406linux\u7684\u5185\u6838\u5f00\u53d1.. (\u77e5\u9053\u4e3a\u5565\u53ebgit\u5417\uff1fgit\u7684\u82f1\u6587\u7ffb\u8bd1\u53eb\u505a\u8822\u8d27.. xswl) Git\u662f\u76ee\u524d\u6700\u4e3b\u6d41\u7684\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf(\u5728\u672c\u5730) Github\u662f\u6700\u4e3b\u6d41\u7684\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0(\u53f7\u79f0\u5168\u7403\u6700\u5927\u7684\u540c\u6027\u4ea4\u53cb\u7f51\u7ad9 Hhhh),\u53ef\u7406\u89e3\u6210\u4e00\u4e2a\u5b58\u653e\u548c\u7ba1\u7406\u4ee3\u7801\u7684\u5e73\u53f0. Git \u2260 Github. Git\u662f\u6293\u624b,Github\u662f\u5e73\u53f0.\u6ca1\u6709\u5fc5\u7136\u7684\u8054\u7cfb. \u4e54\u5e03\u65af\u8ddf\u6bd4\u5c14\u76d6\u8328\u5173\u4e8e\u56fe\u5f62\u754c\u9762\u64cd\u4f5c\u7cfb\u7edf\u7684\u6545\u4e8b..\u7565. \u8fdb\u7a0b\u4e0e\u7ebf\u7a0b \u00b6 \u6982\u5ff5 \u00b6 <\u8fdb\u7a0b>\u662f \u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90 \u7684\u6700\u5c0f\u5355\u4f4d; <\u7ebf\u7a0b>\u662f\u7a0b\u5e8f\u6267\u884c/ cpu\u8c03\u5ea6 \u7684\u6700\u5c0f\u5355\u4f4d \u5728\u8fd9\u7bc7\u7b14\u8bb0\u7684\u5f00\u59cb,\u5c31\u4e8b\u5148\u63d0\u53ca\u4e86\u8fdb\u7a0b\u7684\u6982\u5ff5. \u8fdb\u7a0b\u53ef\u4ee5\u6307\u4ee3\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4e00\u4e2a\u4e2a\u7684\u7a0b\u5e8f;\u4e5f\u53ef\u4ee5\u8bf4\u662f\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u786c\u4ef6\u6765\u8fd0\u884c\u7a0b\u5e8f\u7684\u4e00\u4e2a\u8fc7\u7a0b.. \u8fd9\u4e00\u8fc7\u7a0b\u7528\u4e00\u4e2a\u516c\u5f0f\u8868\u793a: \u8fdb\u7a0b = \u8d44\u6e90\u7533\u8bf7(\u5f00\u8f9f\u5185\u5b58\u7a7a\u95f4) + \u7a0b\u5e8f\u6267\u884c(\u8fd0\u884c\u4ee3\u7801) \u8fd9\u91cc\u4e0d\u5f97\u4e0d\u7740\u91cd\u5355\u72ec\u63d0\u4e00\u63d0\u7a0b\u5e8f\u4e0e\u8fdb\u7a0b\u7684\u533a\u522b: \u7a0b\u5e8f\u6307\u7684\u662f\u4e00\u4e2a\u9759\u6001\u7684\u6307\u4ee4\u5e8f\u5217(\u8bf4\u767d\u4e86,\u5c31\u662f\u4ee3\u7801),\u800c\u8fdb\u7a0b\u662f\u4e00\u4e2a\u5bb9\u5668,\u5176\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u7a0b\u5e8f\u7684\u7279\u5b9a\u5b9e\u4f8b\u6240\u7528\u5230\u7684\u6240\u6709\u8d44\u6e90... \u90a3\u4e48\u7ebf\u7a0b\u662f\u4ec0\u4e48\u5462\uff1f \u7ebf\u7a0b\u662f\u4ece\u8fdb\u7a0b\u4e2d\u62bd\u8c61\u51fa\u7684\u4e00\u4e2a\u66f4\u7ec6\u7684\u5355\u4f4d..(\u7ebf\u7a0b\u5305\u542b\u4e8e\u8fdb\u7a0b) \u5b98\u65b9\u89e3\u91ca: \u7ebf\u7a0b\u662f\u7a0b\u5e8f\u6267\u884c\u4e2d\u4e00\u4e2a\u5355\u4e00\u7684\u987a\u5e8f\u63a7\u5236\u6d41\u7a0b,\u662f\u7a0b\u5e8f\u6267\u884c\u6d41\u7684\u6700\u5c0f\u5355\u5143,\u662f\u5904\u7406\u5668\u8c03\u5ea6\u548c\u5206\u6d3e\u7684\u57fa\u672c\u5355\u4f4d \u8ddf\u8fdb\u7a0b\u8fd9\u4e00\u540d\u8bcd\u4e00\u6837(\u9ed1\u8bdd),\u4e3a\u4e86\u65b9\u4fbf\u6c9f\u901a\u53d1\u660e\u4e86\u7ebf\u7a0b. \u5c06\u7ebf\u7a0b\u4f5c\u4e3a\u7a0b\u5e8f\u6267\u884c/ cpu\u8c03\u5ea6 \u7684\u6700\u5c0f\u5355\u4f4d, \u56e0\u4e3acpu\u53ea\u4f1a\u8d1f\u8d23\u4e0a\u65b9\u8fdb\u7a0b\u516c\u5f0f\u91cc\u8fd0\u7b97\u90e8\u5206(\u8fd0\u884c\u4ee3\u7801), \u8d44\u6e90\u7533\u8bf7\u7684\u90e8\u5206\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8d1f\u8d23... \u6982\u62ec\u6765\u8bb2: <\u8fdb\u7a0b\u662f\u8d44\u6e90\u5355\u4f4d> -- \u4e00\u4e2a\u7a0b\u5e8f\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u6570\u636e\u90fd\u4e0e\u81ea\u5df1\u7684\u8fdb\u7a0b\u6709\u5173 <\u7ebf\u7a0b\u662f\u6267\u884c\u5355\u4f4d,cpu\u6267\u884c\u7684\u7ebf\u7a0b> -- \u8fdb\u7a0b\u5185\u4ee3\u7801\u7684\u8fd0\u884c\u8fc7\u7a0b \u5728\u4e0a\u6587\u591a\u9053\u6280\u672f\u90a3,\u6211\u4eec\u63d0\u53ca\u5230\u4e86\u4e0ecpu\u8c03\u5ea6\u76f8\u5173\u7684 \u65f6\u95f4\u7247 \u6982\u5ff5.. cpu\u4f1a\u5728\u591a\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u6765\u56de\u5feb\u901f\u5207\u6362,\u73b0\u5728\u5f15\u5165\u4e86\u7ebf\u7a0b,\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u66f4\u51c6\u786e\u70b9\u6765\u8bf4,\u770b\u5f97\u66f4\u7ec6\u4e00\u70b9,cpu\u7684\u65f6\u95f4\u7247\u662f\u4f5c\u7528\u4e8e\u7ebf\u7a0b\u7684.. \u8d77\u4e86\u4e00\u4e2aqq\u8fdb\u7a0b --- \u5f00\u8f9f\u4e00\u5757\u5185\u5b58\u7a7a\u95f4,\u5c06\u6570\u636e\u4ece\u786c\u76d8\u8bfb\u5230\u5185\u5b58,\u5f00\u59cb\u8fd0\u884c\u4ee3\u7801(\u5f00\u59cb\u8fd0\u884cqq\u7684\u591a\u4e2a\u7ebf\u7a0b) \u8d77\u4e86\u4e00\u4e2aqq\u7ebf\u7a0b --- \u901a\u5e38\u4e00\u4e2a\u8fdb\u7a0b\u6709\u591a\u4e2a\u7ebf\u7a0b,so\u6b64\u6d41\u6c34\u7ebf\u53ea\u662f\u6307\u4e00\u90e8\u5206\u7a0b\u5e8f\u4ee3\u7801\u7684\u8fd0\u884c [\u6ce8\u610f] \u5f88\u591a\u6587\u732e\u4e2d,\u4e0d\u4f1a\u5177\u4f53\u63d0\u53ca\u662f\u8fdb\u7a0b\u8fd8\u662f\u7ebf\u7a0b,\u4f1a\u8bf4\u662ftask\u4efb\u52a1,\u90a3\u4e48\u5c31\u9700\u8981\u7ed3\u5408\u8bed\u5883\u5206\u6790. \u82e5\u4e0ecpu\u8c03\u5ea6\u76f8\u5173,\u6b64\u5904\u7684\u4efb\u52a1\u5927\u6982\u7387\u662f\u8bf4\u7ebf\u7a0b;\u82e5\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90\u4e0e\u5173,\u6b64\u5904\u7684\u4efb\u52a1\u5927\u6982\u7387\u662f\u6307\u8fdb\u7a0b.. \u82e5\u8ba1\u7b97\u673a\u64cd\u4f5c\u7cfb\u7edf\u8d77\u4e862\u4e2a\u8fdb\u7a0b(\u901a\u5e38\u4e00\u4e2a\u8f6f\u4ef6\u5c31\u8d77\u4e00\u4e2a\u8fdb\u7a0b),\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u67093\u4e2a\u7ebf\u7a0b,\u5219cpu\u5e76\u53d1\u4e862x3=6\u4e2a\u4efb\u52a1(\u7ad9\u5728\u7ebf\u7a0b\u7684\u89d2\u5ea6 \u5373\u6b64\u5904\u7684\u4efb\u52a1\u662f\u6307\u7ebf\u7a0b) 1> \u8ba1\u7b97\u673a\u7684\u6838\u5fc3\u662fCPU,\u5b83\u627f\u62c5\u4e86\u6240\u6709\u7684\u8ba1\u7b97\u4efb\u52a1. \u5b83\u5c31\u50cf\u4e00\u5ea7\u5de5\u5382,\u65f6\u523b\u5728\u8fd0\u884c. 2> \u5047\u5b9a\u5de5\u5382\u7684\u7535\u529b\u6709\u9650,\u4e00\u6b21\u53ea\u80fd\u4f9b\u7ed9\u4e00\u4e2a\u8f66\u95f4\u4f7f\u7528. \u4e5f\u5c31\u662f\u8bf4,\u4e00\u4e2a\u8f66\u95f4\u5f00\u5de5\u7684\u65f6\u5019,\u5176\u4ed6\u8f66\u95f4\u90fd\u5fc5\u987b\u505c\u5de5. \u80cc\u540e\u7684\u542b\u4e49\u5c31\u662f, \u5355\u4e2aCPU\u4e00\u6b21\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2a\u4efb\u52a1. 3> \u8fdb\u7a0b\u5c31\u597d\u6bd4\u5de5\u5382\u7684\u8f66\u95f4,\u5b83\u4ee3\u8868CPU\u6240\u80fd\u5904\u7406\u7684\u5355\u4e2a\u4efb\u52a1.\u4efb\u4e00\u65f6\u523b,CPU\u603b\u662f\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b,\u5176\u4ed6\u8fdb\u7a0b\u5904\u4e8e\u975e\u8fd0\u884c\u72b6\u6001. 4> \u4e00\u4e2a\u8f66\u95f4(\u8fdb\u7a0b)\u91cc,\u53ef\u4ee5\u6709\u5f88\u591a\u5de5\u4eba(\u7ebf\u7a0b),\u5373\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5305\u62ec\u591a\u4e2a\u7ebf\u7a0b.. \u5b83\u4eec(\u591a\u4e2a\u7ebf\u7a0b)\u534f\u540c\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1(\u8fdb\u7a0b). 5> \u6bcf\u4e2a\u5de5\u4eba\u6709\u81ea\u5df1\u7684\u4efb\u52a1,\u4e5f\u6709\u81ea\u5df1\u7684\u4e8b\u60c5\u505a.(\u6b64\u5904\u7684\u4efb\u52a1\u7ad9\u5728\u7ebf\u7a0b\u7684\u89d2\u5ea6\u8bf4\u7684) 6> \u8f66\u95f4\u7684\u7a7a\u95f4\u662f\u5de5\u4eba\u4eec\u5171\u4eab\u7684,\u6bd4\u5982\u8bb8\u591a\u623f\u95f4\u662f\u6bcf\u4e2a\u5de5\u4eba\u90fd\u53ef\u4ee5\u8fdb\u51fa\u7684. \u8fd9\u8c61\u5f81\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u662f\u8fdb\u7a0b\u91cc\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u6240\u5171\u4eab\u7684. 7> \u53ef\u662f,\u6bcf\u95f4\u623f\u95f4\u7684\u5927\u5c0f\u4e0d\u540c,\u6709\u4e9b\u623f\u95f4\u6700\u591a\u53ea\u80fd\u5bb9\u7eb3\u4e00\u4e2a\u4eba. \u6bd4\u5982\u5395\u6240,\u91cc\u9762\u6709\u4eba\u7684\u65f6\u5019,\u5176\u4ed6\u4eba\u5c31\u4e0d\u80fd\u8fdb\u53bb\u4e86. \u8fd9\u4ee3\u8868\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u67d0\u4e9b\u5171\u4eab\u5185\u5b58\u65f6,\u5176\u4ed6\u7ebf\u7a0b\u5fc5\u987b\u7b49\u5b83\u7ed3\u675f\u624d\u80fd\u4f7f\u7528\u8fd9\u4e00\u5757\u5185\u5b58\u3002 8> \u4e00\u4e2a\u9632\u6b62\u4ed6\u4eba\u8fdb\u5165\u7684\u7b80\u5355\u65b9\u6cd5,\u5c31\u662f\u95e8\u53e3\u52a0\u4e00\u628a\u9501.\u5148\u5230\u7684\u4eba\u9501\u4e0a\u95e8,\u540e\u5230\u7684\u4eba\u770b\u5230\u4e0a\u9501,\u5c31\u5728\u95e8\u53e3\u6392\u961f,\u7b49\u9501\u6253\u5f00\u518d\u8fdb\u53bb. \u8fd9\u5c31\u53eb\u201c\u4e92\u65a5\u9501\u201d(Mutual exclusion,\u7f29\u5199 Mutex)\u9632\u6b62\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u5199\u67d0\u4e00\u5757\u5185\u5b58\u533a\u57df. 9> \u8fd8\u6709\u4e9b\u623f\u95f4,\u53ef\u4ee5\u540c\u65f6\u5bb9\u7eb3n\u4e2a\u4eba,\u6bd4\u5982\u53a8\u623f. \u4e5f\u5c31\u662f\u8bf4,\u5982\u679c\u4eba\u6570\u5927\u4e8en,\u591a\u51fa\u6765\u7684\u4eba\u53ea\u80fd\u5728\u5916\u9762\u7b49\u7740. \u8fd9\u597d\u6bd4\u67d0\u4e9b\u5185\u5b58\u533a\u57df,\u53ea\u80fd\u4f9b\u7ed9\u56fa\u5b9a\u6570\u76ee\u7684\u7ebf\u7a0b\u4f7f\u7528. 10> \u8fd9\u65f6\u7684\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u5728\u95e8\u53e3\u6302n\u628a\u94a5\u5319. \u8fdb\u53bb\u7684\u4eba\u5c31\u53d6\u4e00\u628a\u94a5\u5319,\u51fa\u6765\u65f6\u518d\u628a\u94a5\u5319\u6302\u56de\u539f\u5904. \u540e\u5230\u7684\u4eba\u53d1\u73b0\u94a5\u5319\u67b6\u7a7a\u4e86,\u5c31\u77e5\u9053\u5fc5\u987b\u5728\u95e8\u53e3\u6392\u961f\u7b49\u7740\u4e86. \u8fd9\u79cd\u505a\u6cd5\u53eb\u505a\u201c\u4fe1\u53f7\u91cf\u201d(Semaphore),\u7528\u6765\u4fdd\u8bc1\u591a\u4e2a\u7ebf\u7a0b\u4e0d\u4f1a\u4e92\u76f8\u51b2\u7a81. \u4e0d\u96be\u770b\u51fa,mutex\u662fsemaphore\u7684\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5(n=1\u65f6).\u4e5f\u5c31\u662f\u8bf4,\u5b8c\u5168\u53ef\u4ee5\u7528\u540e\u8005\u66ff\u4ee3\u524d\u8005. \u4f46\u662f,\u56e0\u4e3amutex\u8f83\u4e3a\u7b80\u5355\u4e14\u6548\u7387\u9ad8,\u6240\u4ee5\u5728\u5fc5\u987b\u4fdd\u8bc1\u8d44\u6e90\u72ec\u5360\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u91c7\u7528\u8fd9\u79cd\u8bbe\u8ba1\u3002 \u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4e09\u70b9: (1)\u4ee5\u591a\u8fdb\u7a0b\u5f62\u5f0f,\u5141\u8bb8\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u8fd0\u884c; (2)\u4ee5\u591a\u7ebf\u7a0b\u5f62\u5f0f,\u5141\u8bb8\u5355\u4e2a\u4efb\u52a1\u5206\u6210\u4e0d\u540c\u7684\u90e8\u5206\u8fd0\u884c; (3)\u63d0\u4f9b\u534f\u8c03\u673a\u5236,\u4e00\u65b9\u9762\u9632\u6b62\u8fdb\u7a0b\u4e4b\u95f4\u548c\u7ebf\u7a0b\u4e4b\u95f4\u4ea7\u751f\u51b2\u7a81,\u53e6\u4e00\u65b9\u9762\u5141\u8bb8\u8fdb\u7a0b\u4e4b\u95f4\u548c\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u8d44\u6e90. \u53c2\u8003\u94fe\u63a5: https://mp.weixin.qq.com/s/rN _ aNty51npDTe _ z35y7QQ Ps: \u8fd9\u91cc\u8bb2\u7ebf\u7a0b\u6bd4\u55bb\u6210\u4e86\u5de5\u4eba,\u524d\u9762\u4e2d\u6211\u4eec\u8bb2\u7ebf\u7a0b\u6bd4\u55bb\u6210\u4e86\u6d41\u6c34\u7ebf.. \u4e0d\u51b2\u7a81. \u4efb\u52a1\u8fd0\u884c\u7684\u4e09\u79cd\u72b6\u6001 \u00b6 \u975e\u963b\u585e\u6001 -- \u5c31\u7eea\u6001\u3001\u8fd0\u884c\u6001 \u963b\u585e\u6001 1> \u8fd0\u884c/\u6267\u884c (Running) \u6001: \u4efb\u52a1\u62ff\u5230cpu,\u6b63\u5728\u8fd0\u884c 2> \u5c31\u7eea\u6001: \u4efb\u52a1\u5df2\u5206\u914d\u5230\u9664CPU\u4ee5\u5916\u7684\u6240\u6709\u5fc5\u8981\u7684\u8d44\u6e90,\u7b49\u5f85\u88ab\u5206\u914dcpu,\u4e00\u65e6\u5f97\u5230cpu,\u4efb\u52a1\u5c31\u53ef\u4ee5\u7acb\u9a6c\u5f00\u59cb\u8fd0\u884c 3> \u963b\u585e (Blocked) \u6001: \u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\u7531\u4e8e\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u53d1\u751f\u800c\u65e0\u6cd5\u6267\u884c\u65f6,\u4fbf\u4f1a\u653e\u5f03cpu\u800c\u5904\u4e8e\u963b\u585e\u72b6\u6001. \u5f15\u8d77\u8fdb\u7a0b\u963b\u585e\u7684\u4e8b\u4ef6\u53ef\u6709\u591a\u79cd,\u4f8b\u5982,\u7b49\u5f85I/O\u5b8c\u6210\u3001\u7533\u8bf7\u7f13\u51b2\u533a\u4e0d\u80fd\u6ee1\u8db3\u3001\u7b49\u5f85\u4fe1\u4ef6(\u4fe1\u53f7)\u7b49. \u8fd9\u91cc\u4ee5\u9047\u89c1IO\u4e3a\u4f8b,\u4efb\u52a1\u9047\u5230\u4e86IO,\u62ff\u5230cpu\u4e5f\u65e0\u6cd5\u8fd0\u884c,\u5fc5\u987b\u7b49\u5230IO\u64cd\u4f5c\u7ed3\u675f,\u8fdb\u5165\u5c31\u7eea\u6001 \u63d0\u4e00\u5634: cpu\u53d7\u64cd\u4f5c\u7cfb\u7edf\u8f6f\u4ef6\u63a7\u5236. cpu\u8fd0\u884c\u4efb\u52a1. \u6b64\u4efb\u52a1\u8bf4\u662f\u8fdb\u7a0b\u4ea6\u6216\u8005\u7ebf\u7a0b\u90fd\u6ca1\u9519 \u4f46\u81ea\u5df1\u8981\u77e5\u9053\u8fd0\u884c\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u662f\u8fdb\u7a0b\u91cc\u7684\u4e00\u6761\u7ebf\u7a0b\u5728\u8fd0\u884c . [\u5c31\u7eea\u6001 --> \u8fd0\u884c\u6001] \u82e5\u6b64\u65f6\u6709\u591a\u4e2a\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u4efb\u52a1,ABCD... \u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u534f\u8c03\u8fd9\u4ef6\u4e8b,\u5c06\u4efb\u52a1A\u5148\u5206\u914d\u7ed9cpu,\u6b64\u65f6\u4efb\u52a1A\u5c31\u5904\u4e8e\u8fd0\u884c\u6001. [\u8fd0\u884c\u6001 --> \u5c31\u7eea\u6001] \u5f53OS\u8ba4\u4e3a\u4efb\u52a1A\u5360\u7528\u7684\u65f6\u95f4\u8fc7\u957f\u4e86.\u518d\u6216\u8005,\u6709\u4e00\u4e2a\u4f18\u5148\u7ea7\u6bd4\u4efb\u52a1A\u66f4\u9ad8\u7684\u4efb\u52a1B; \u4efb\u52a1B\u5c31\u4f1a\u628acpu\u62a2\u8d70\u4e86.\u4efb\u52a1A\u5c31\u4f1a\u5904\u4e8e\u5c31\u7eea\u6001. [\u8fd0\u884c\u6001 --> \u963b\u585e\u6001] (IO\u662f\u6307\u786c\u76d8\u5f00\u59cb\u8f6c,\u627e\u5230\u76f8\u5e94\u6570\u636e\u5e76\u5c06\u6570\u636e\u8bfb\u5230\u5185\u5b58\u7684\u8fc7\u7a0b) \u5f53\u4efb\u52a1A\u9047\u5230IO.\u6b64\u65f6\u4efb\u52a1A\u5c06\u8fdb\u5165\u963b\u585e\u6001.\u610f\u5473\u7740\u6b64\u65f6\u7acb\u523b\u628acpu\u7ed9\u5904\u4e8e\u963b\u585e\u6001\u7684\u4efb\u52a1A\u7528,\u4efb\u52a1A\u4e5f\u4e0d\u4f1a\u7528(\u4efb\u52a1A\u5728\u8fdb\u884cIO\u64cd\u4f5c\u5462,\u5fd9\u4e0d\u8fc7\u6765). \u8981\u77e5\u9053\u64cd\u4f5c\u7cfb\u7edf\u80af\u5b9a\u4e0d\u4f1a\u8ba9cpu\u95f2\u7740.. So,cpu\u4e0b\u53d1\u6307\u4ee4\u7ed9\u786c\u76d8\u540e,\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u628a\u4efb\u52a1A\u4e00\u811a\u8e39\u5f00,\u628acpu\u62ff\u8fc7\u6765\u8fd0\u884c\u53e6\u4e00\u4e2a\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u4efb\u52a1. [\u963b\u585e\u6001 --> \u5c31\u7eea\u6001 --> \u8fd0\u884c\u6001] \u963b\u585e\u6001\u4e0d\u80fd\u4e00\u4e0b\u5b50\u5207\u5230\u8fd0\u884c\u6001,\u53ea\u80fd\u7b49IO\u64cd\u4f5c\u505a\u5b8c,\u963b\u585e\u5b8c\u6bd5..\u8f6c\u6362\u6210\u5c31\u7eea\u6001,\u62ff\u5230\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7684cpu\u540e\u518d\u8f6c\u6362\u6210\u8fd0\u884c\u6001. Q:\u5982\u4f55\u63d0\u5347\u4efb\u52a1\u6267\u884c\u7684\u6548\u7387\u5462\uff1f A:\u7406\u60f3\u60c5\u51b5,cpu\u4e00\u76f4\u88ab\u6b64\u4efb\u52a1\u5360\u7528,\u4efb\u52a1\u7684IO\u64cd\u4f5c\u5b8c\u6210\u540e,\u7acb\u9a6c\u80fd\u5f97\u5230CPU\u7684\u4f7f\u7528. \u4f46\u8fd9\u662f\u4e0d\u73b0\u5b9e\u7684,\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5141\u8bb8cpu\u8d44\u6e90\u8fd9\u6837\u6d6a\u8d39.. \u6211\u4eec\u552f\u4e00\u80fd\u63a7\u5236\u7684\u5c31\u662f\u963b\u585e. \u6211\u4eec\u53ea\u80fd\u5728\u5199\u7a0b\u5e8f\u4ee5\u53ca\u90e8\u7f72\u96c6\u7fa4\u67b6\u6784\u7684\u8fc7\u7a0b\u4e2d\u51cf\u5c11\u4efb\u52a1\u5904\u4e8e\u963b\u585e\u6001\u7684\u65f6\u95f4,\u589e\u52a0\u4efb\u52a1\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u65f6\u95f4 (\u4efb\u52a1\u5904\u4e8e\u963b\u585e\u6001,\u7ed9\u5b83cpu,\u5b83\u4e5f\u4e0d\u4e2d\u7528\u554a) \u8fd9\u6837\u7684\u8bdd,\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u4efb\u52a1\u4e00\u65e6\u5f97\u5230cpu\u5c31\u4f1a\u76f4\u63a5\u5f00\u59cb\u8fd0\u884c..\u4efb\u52a1\u6574\u4f53\u7684\u6267\u884c\u6548\u7387\u5c31\u63d0\u9ad8\u4e86. Ps: \u9e3f\u8499\u7cfb\u7edf \u4e07\u7269\u4e92\u8054.5G\u65f6\u4ee3.\u5206\u5e03\u5f0f\u8f6f\u7ec4\u4ef6..","title":"\u64cd\u4f5c\u7cfb\u7edf"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_1","text":"\u6572\u91cd\u70b9! \u64cd\u4f5c\u7cfb\u7edf \u6700\u6838\u5fc3\u7684\u6982\u5ff5\u5c31\u662f \u8fdb\u7a0b ! \u8fdb\u7a0b\u662f\u5565\uff1f\u522b\u89c9\u5f97\u5f88\u6df1\u5965,\u5b83\u5565\u4e5f\u4e0d\u662f,\u5c31\u662f\u4e00\u4e2a\u65b9\u4fbf\u6c9f\u901a,\u53d1\u660e\u7684\u540d\u8bcd\u800c\u5df2.. \u6307\u7684\u662f\u4e00\u4e2a\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b,\u5177\u4f53\u6765\u8bf4\u662f \u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u786c\u4ef6(cpu\u3001\u786c\u76d8\u3001\u5185\u5b58\u7b49)\u6765\u8fd0\u884c\u7a0b\u5e8f\u7684\u8fc7\u7a0b .. \u7b80\u5355\u6765\u8bf4, \u6211\u4eec\u7ecf\u5e38\u63d0\u5230\u7684<\u8fdb\u7a0b>\u8bf4\u7684\u5c31\u662f<\u5185\u5b58\u4e2d\u7684\u7a0b\u5e8f>,\u5373\u7a0b\u5e8f\u4ece\u786c\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e86..","title":"\u524d\u8a00"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#os","text":"\u7a0b\u5e8f\u5458\u65e0\u6cd5\u628a\u6240\u6709\u7684\u786c\u4ef6\u64cd\u4f5c\u7ec6\u8282\u90fd\u4e86\u89e3\u5230, \u7ba1\u7406\u8fd9\u4e9b\u786c\u4ef6\u5e76\u4e14\u52a0\u4ee5\u4f18\u5316\u4f7f\u7528\u662f\u975e\u5e38\u7e41\u7410\u7684\u5de5\u4f5c. \u8fd9\u4e2a\u7e41\u7410\u7684\u5de5\u4f5c\u5e94\u8be5\u7531\u64cd\u4f5c\u7cfb\u7edf\u6765\u5b8c\u6210,\u8fd9\u6837\u7684\u8bdd,\u7a0b\u5e8f\u5458\u5c31\u53ea\u9700\u8981\u4e13\u6ce8\u4e8e\u81ea\u5df1\u5e94\u7528\u8f6f\u4ef6\u7684\u7f16\u5199, \u7f16\u5199\u597d\u7684\u5e94\u7528\u8f6f\u4ef6\u4f1a\u76f4\u63a5\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u529f\u80fd\u6765\u95f4\u63a5\u4f7f\u7528\u786c\u4ef6...","title":"\u4e3a\u4ec0\u4e48\u8981\u6709OS?"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#os_1","text":"\u64cd\u4f5c\u7cfb\u7edf\u662f\u4e00\u4e2a\u534f\u8c03\u3001\u7ba1\u7406\u548c\u63a7\u5236\u8ba1\u7b97\u673a\u5e95\u5c42\u7684\u786c\u4ef6\u8d44\u6e90\u548c\u4e0a\u5c42\u7684\u8f6f\u4ef6\u8d44\u6e90\u7684\u63a7\u5236\u7a0b\u5e8f! Q: \u64cd\u4f5c\u7cfb\u7edf\u662f\u8fd0\u884c\u4e8e\u5185\u6838\u6001\u7684\uff1f A: \u5355\u7eaf\u7684\u8bf4\u64cd\u4f5c\u7cfb\u7edf\u662f\u8fd0\u884c\u4e8e\u5185\u6838\u6001\u662f\u4e0d\u51c6\u786e\u7684.. \u64cd\u4f5c\u7cfb\u7edf\u4f4d\u4e8e\u8ba1\u7b97\u673a\u786c\u4ef6\u4e0e\u5e94\u7528\u8f6f\u4ef6\u4e4b\u95f4, \u672c\u8d28\u4e5f\u662f\u4e00\u4e2a\u8f6f\u4ef6 \u64cd\u4f5c\u7cfb\u7edf\u7531 \u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u6838 (\u8fd0\u884c\u4e8e\u5185\u6838\u6001,\u7ba1\u7406\u786c\u4ef6\u8d44\u6e90)\u4ee5\u53ca \u7cfb\u7edf\u8c03\u7528 (\u8fd0\u884c\u4e8e\u7528\u6237\u6001,\u4e3a\u5e94\u7528\u7a0b\u5e8f\u5458\u5199\u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7cfb\u7edf\u8c03\u7528\u63a5\u53e3)\u4e24\u90e8\u5206\u7ec4\u6210.. Ps: \u7cfb\u7edf\u8c03\u7528\u63a5\u53e3,\u5373\u63d0\u4f9b\u7ed9\u5e94\u7528\u7a0b\u5e8f\u8c03\u7528\u786c\u4ef6\u8d44\u6e90\u7684\u63a5\u53e3..\u662f\u4e00\u79cd\u5bf9\u786c\u4ef6\u8d44\u6e90\u7684\u62bd\u8c61. \u6bd4\u5982\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u6587\u4ef6\u8fd9\u4e2a\u62bd\u8c61\u6982\u5ff5, \u5bf9\u6587\u4ef6\u7684\u64cd\u4f5c\u5c31\u662f\u5bf9\u78c1\u76d8\u7684\u64cd\u4f5c, \u6709\u4e86\u6587\u4ef6\u6211\u4eec\u65e0\u9700\u518d\u53bb\u8003\u8651\u5173\u4e8e\u78c1\u76d8\u7684\u8bfb\u5199\u63a7\u5236.","title":"\u4ec0\u4e48\u662fOS?"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_2","text":"\u64cd\u4f5c\u7cfb\u7edf\u8ddf\u8ba1\u7b97\u673a\u786c\u4ef6\u662f\u540c\u6b65\u53d1\u5c55\u7684.. \u64cd\u4f5c\u7cfb\u7edf\u662f\u4f34\u968f\u7740\u786c\u4ef6\u7684\u5347\u7ea7\u4e00\u70b9\u70b9\u5347\u7ea7\u7684.","title":"\u64cd\u4f5c\u7cfb\u7edf\u53d1\u5c55\u53f2"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_3","text":"\u7b2c\u4e00\u4ee3\u8ba1\u7b97\u673a(1940~1955): \u771f\u7a7a\u7ba1\u548c\u7a7f\u5b54\u5361\u7247 \u6240\u6709\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u90fd\u662f\u76f4\u63a5\u64cd\u63a7\u786c\u4ef6! \u6ca1\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u6982\u5ff5. \u7a0b\u5e8f\u5458\u9884\u7ea6\u540e,\u5728\u9884\u7ea6\u7684\u65f6\u95f4\u6bb5\u53ea\u80fd\u7a0b\u5e8f\u5458\u4e00\u4e2a\u4eba\u7528,\u72ec\u4eab\u8ba1\u7b97\u673a\u8d44\u6e90.. \u4e00\u65e6\u7a0b\u5e8f\u51fabug,\u6392\u67e5\u65f6\u95f4\u6bb5\u8ba1\u7b97\u673a\u8d44\u6e90\u662f\u6d6a\u8d39\u7684 \u5e76\u4e14\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u7a0b\u5e8f\u5728\u5185\u5b58\u4e2d\u88abcpu\u8c03\u7528\u6267\u884c..","title":"\u7b2c\u4e00\u4ee3"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_4","text":"\u7b2c\u4e8c\u4ee3\u8ba1\u7b97\u673a(1955~1965): \u6676\u4f53\u7ba1\u548c\u6279\u5904\u7406\u7cfb\u7edf \u771f\u7a7a\u7ba1\u5f88\u5bb9\u6613\u70e7 ,\u6539\u8fdb\u6210\u4e86 \u6676\u4f53\u7ba1 ; \u5f53\u65f6\u7684\u8ba1\u7b97\u673a\u5f88\u6602\u8d35,\u4e3a\u4e86\u63d0\u9ad8\u8ba1\u7b97\u673a\u8d44\u6e90\u5229\u7528\u7387,\u4f7f\u7528\u4e86 \u6279\u5904\u7406\u7cfb\u7edf .. \u5171\u4e09\u53f0\u8ba1\u7b97\u673a,\u4e8c\u53f01401\u4fa7\u91cd\u4e8eIO,\u4e00\u53f07094\u4fa7\u91cd\u4e8e\u8fd0\u7b97; \u4e00\u5806\u5361\u7247 \u901a\u8fc71401\u8bfb\u5165\u78c1\u5e26\u673a,\u7ecf\u8fc7\u7cfb\u7edf\u78c1\u5e26\u5904\u7406\u540e, \u8f93\u5165\u78c1\u5e26\u7ed97094,7094\u6279\u5904\u7406\u8fd0\u7b97\u540e\u8f93\u51fa\u78c1\u5e26\u7ed9\u53e6\u4e00\u53f01401\u8fdb\u884c\u6253\u5370..","title":"\u7b2c\u4e8c\u4ee3"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_5","text":"\u6279\u5904\u7406\u7cfb\u7edf -- \u5355\u7528\u6237\u5355\u4efb\u52a1 \u7b80\u5355\u4e3e\u4e2a\u6817\u5b50,\u4e00\u6b21\u6027\u8f93\u5165\u7ed9\u8ba1\u7b97\u673a10\u4e2a\u7a0b\u5e8f,\u8ba1\u7b97\u673a \u4f9d\u6b21 \u5c06\u5176\u653e\u5165\u5185\u5b58\u4e2d\u8fd0\u884c,\u518d\u4e00\u8d77\u8f93\u51fa.. \u5728\u8fd9\u4e00\u8fc7\u7a0b\u4e2d,\u8ddf\u7b2c\u4e00\u4ee3\u540c\u6837\u7684, \u8ba1\u7b97\u673a\u4e00\u6b21\u53ea\u80fd\u628a\u4e00\u4e2a/\u9053\u7a0b\u5e8f\u8bfb\u5165\u5185\u5b58,\u8fd0\u884c\u5b8c\u6bd5\u540e,\u518d\u6267\u884c\u4e0b\u4e00\u4e2a\u7a0b\u5e8f,\u6ca1\u6709\u5e76\u53d1,\u79f0\u4e4b\u4e3a < \u4e32\u884c >. \u4f60\u7ec6\u54c1,\u662f\u6709\u8fdb\u7a0b\u90a3\u5473\u9053\u5728\u91cc\u9762\u7684(\u00b4\u25bd\uff40) \u53ef\u80fd\u4f60\u4f1a\u60f3,\u67d0\u4e00\u9053\u7a0b\u5e8f\u51fa\u9519\u4e86,\u4e0d\u5c31\u963b\u585e\u5728\u90a3\u4e86\u5417\uff1f\u7a0b\u5e8f\u6709\u5f02\u5e38\u5904\u7406\u554a,\u6253\u5370\u51fa\u9519\u4fe1\u606f.\u7ee7\u7eed\u8fd0\u884c\u4e0b\u4e00\u4e2a\u7a0b\u5e8f. \u4f18: \u5145\u5206\u5229\u7528\u4e86\u8ba1\u7b97\u673a\u8d44\u6e90 \u52a3: 1> \u6574\u4e2a\u8fc7\u7a0b\u662f\u9700\u8981\u4eba\u53c2\u4e0e\u7684,\u5c06\u78c1\u5e26\u642c\u6765\u642c\u53bb; 2> \u7a0b\u5e8f\u8fd0\u884c\u662f\u4ecd\u7136\u662f\u4e32\u884c\u7684,\u4f1a\u6512\u4e00\u5927\u6ce2\u518d\u4e00\u8d77\u8f93\u51fa,\u8ba9\u7a0b\u5e8f\u5458\u660e\u663e\u611f\u89c9\u5230\u7b49\u5f85.. \u4e0d\u80fd\u5373\u65f6\u8c03\u8bd5\u7a0b\u5e8f.. \u672c\u8d28\u4e0a\u662f\u5355\u4efb\u52a1\u5355\u7528\u6237,\u6ca1\u6709\u5e76\u53d1,\u662f \u4e32\u884c","title":"\u4f55\u4e3a\u6279\u5904\u7406\u7cfb\u7edf\uff1f"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_6","text":"\u7b2c\u4e09\u4ee3\u8ba1\u7b97\u673a(1965~1980): \u96c6\u6210\u7535\u8def\u82af\u7247\u548c\u591a\u9053\u7a0b\u5e8f\u8bbe\u8ba1 \u63d0\u4e00\u5634: IBM\u516c\u53f8\u53d1\u660e system/360 \u7cfb\u5217\u7684\u8ba1\u7b97\u673a \u96c6IO\u4e0e\u8fd0\u7b97\u4e8e\u4e00\u8eab. \u6b64\u4e43\u73b0\u5728\u670d\u52a1\u5668\u7684 \u9f3b\u7956 .. \u7b2c\u4e8c\u4ee3\u8ba1\u7b97\u673a\u7684\u7b2c\u4e00\u4e2a\u7f3a\u70b9\u901a\u8fc7SPOOLING\u6280\u672f\u89e3\u51b3\u4e86;\u7b2c\u4e8c\u4e2a\u7f3a\u70b9\u901a\u8fc7\u591a\u9053\u6280\u672f\u5b9e\u73b0\u5e76\u53d1\u6765\u89e3\u51b3.. Ps: \u82e5\u6709\u591a\u4e2a\u4efb\u52a1, \u4e32\u884c\u662f\u4e00\u4e2a\u8fd0\u884c\u5b8c\u6bd5\u540e\u518d\u8fd0\u884c\u4e0b\u4e00\u4e2a;\u5e76\u53d1\u7684\u8bdd\u770b\u8d77\u6765\u662f\u540c\u65f6\u8fd0\u884c\u7684.. \u5e76\u53d1 : \u591a\u4e2a\u8fdb\u7a0b\u770b\u8d77\u6765\u662f\u540c\u65f6\u8fd0\u884c\u7684. \u628a\u65f6\u95f4\u5206\u6210\u82e5\u5e72\u6bb5,\u4f7f\u591a\u4e2a\u8fdb\u7a0b\u5feb\u901f\u4ea4\u66ff\u7684\u6267\u884c \u5e76\u884c : \u591a\u4e2a\u8fdb\u7a0b\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u540c\u65f6\u8fd0\u884c,\u53ea\u6709\u591a\u4e2acpu(\u4e0d\u7ba1\u662f\u5355\u6838\u8fd8\u662f\u591a\u6838\u7684)\u624d\u80fd\u5b9e\u73b0\u591a\u4e2a\u8fdb\u7a0b\u5e76\u884c. Ps \u7ebf\u7a0b\u7684\u5e76\u53d1\u5e76\u884c\u6682\u4e14\u4e0d\u8c08,\u540e\u9762\u518d\u8bf4..","title":"\u7b2c\u4e09\u4ee3"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_7","text":"\u591a\u9053\u6280\u672f -- \u5e76\u53d1 \u540e\u7eed\u7684\u64cd\u4f5c\u7cfb\u7edf\u90fd\u91c7\u7528\u4e86\u591a\u9053\u6280\u672f.. Ps: \u6211\u4eec\u5f80\u5f80\u56fe\u7701\u4e8b,\u8bf4cpu\u5728\u591a\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362;\u5b9e\u5219\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236cpu\u53bb\u5207\u6362\u7684.. \u82e5CPU\u6709\u56db\u4e2a\u6838,\u90a3\u4e48\u6bcf\u4e2a\u6838\u90fd\u5728\u4efb\u52a1(\u5f80\u5f80\u6307\u7684\u662f\u7ebf\u7a0b)\u4e4b\u95f4\u5207\u6362. cpu\u5728\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\u7684\u8fc7\u7a0b\u4e2d,\u82e5\u9700\u8981\u64cd\u4f5c\u786c\u76d8,\u5219\u53d1\u9001\u64cd\u4f5c\u786c\u76d8\u7684\u6307\u4ee4. \u6307\u4ee4\u4e00\u65e6\u53d1\u51fa,\u786c\u76d8\u4e0a\u7684\u673a\u68b0\u624b\u81c2\u6ed1\u52a8\u8bfb\u53d6\u6570\u636e\u5230\u5185\u5b58\u4e2d. \u8fd9\u4e00\u6bb5\u65f6\u95f4,cpu\u9700\u8981\u7b49\u5f85,\u65f6\u95f4\u770b\u4f3c\u5f88\u77ed\u5f88\u77ed,\u4f46\u5bf9\u4e8ecpu\u6765\u8bf4\u5df2\u7ecf\u5f88\u957f\u5f88\u957f,\u957f\u5230\u53ef\u4ee5\u8ba9cpu\u505a\u5f88\u591a\u5176\u4ed6\u7684\u4efb\u52a1. \u5982\u679c\u6211\u4eec\u8ba9cpu\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u5207\u6362\u5230\u53bb\u505a\u5176\u4ed6\u7684\u4efb\u52a1,\u8fd9\u6837cpu\u4e0d\u5c31\u5145\u5206\u5229\u7528\u4e86\u5417? \u6700\u5927\u9650\u5ea6\u7684\u5229\u7528cpu\u8d44\u6e90.","title":"\u591a\u9053\u6280\u672f\u4ea7\u751f\u80cc\u666f"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_8","text":"\u591a\u9053\u6280\u672f -- \u7a7a\u95f4\u4e0a\u7684\u590d\u7528: \u591a\u9053\u7a0b\u5e8f\u5728\u8fd0\u884c\u524d\u5fc5\u987b\u5148\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d.(\u4e5f\u5c31\u53d8\u6210\u4e86\u591a\u4e2a\u8fdb\u7a0b) Ps: \u591a\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u662f\u76f8\u4e92\u9694\u79bb\u7684,\u5e76\u4e14\u662f\u7269\u7406\u9694\u79bb!(\u5373\u786c\u4ef6\u5c42\u9762\u7684\u9694\u79bb) \u5b89\u5168\u6027 -- \u591a\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u4e0d\u4e92\u901a; \u7a33\u5b9a\u6027 -- \u9000\u51fa\u7a0b\u5e8f\u53ea\u4f1a\u91ca\u653e\u6389\u81ea\u4e2a\u513f\u7684\u5185\u5b58\u7a7a\u95f4. \u6b63\u56e0\u4e3a\u5b9e\u73b0\u4e86\u8fdb\u7a0b\u5185\u5b58\u4e4b\u95f4\u7684\u7269\u7406\u9694\u79bb,\u5206\u65f6\u7cfb\u7edf\u624d\u80fd\u6d41\u884c\u8d77\u6765.. Q:\u5982\u4f55\u9694\u79bb\u7684\uff1f\uff1f A:\u64cd\u4f5c\u7cfb\u7edf\u4e3b\u8981\u6709\u4e94\u5927\u529f\u80fd:\u4f5c\u4e1a\u7ba1\u7406\u3001\u8fdb\u7a0b\u7ba1\u7406\u3001\u5b58\u50a8\u7ba1\u7406\u3001\u8bbe\u5907\u7ba1\u7406\u548c\u6587\u4ef6\u7ba1\u7406.. \u64cd\u4f5c\u7cfb\u7edf\u8c03\u7528\u786c\u4ef6\u8d44\u6e90\u7ed9\u4e0a\u5c42\u7684\u8f6f\u4ef6\u4f7f\u7528..\u800c\u786c\u4ef6\u8d44\u6e90\u4e2d\u7684cpu\u662f\u8fd9\u4e9b\u786c\u4ef6\u8d44\u6e90\u7684\u8001\u5927..cpu\u5b83\u627f\u62c5\u4e86\u6240\u6709\u7684\u8ba1\u7b97\u4efb\u52a1 \u63d0\u4e00\u5634,\u4f5c\u4e1a\u3001\u7a0b\u5e8f\u3001\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb: \u53c2\u8003\u8d44\u6599: https://blog.csdn.net/hguisu/article/details/1910803 \u4f5c\u4e1a -- \u7528\u6237\u5728\u4e00\u6b21\u89e3\u51b3\u6216\u662f\u4e00\u4e2a\u4e8b\u52a1\u5904\u7406\u8fc7\u7a0b\u4e2d\u8981\u6c42\u8ba1\u7b97\u673a\u7cfb\u7edf\u6240\u505a\u7684\u5de5\u4f5c\u7684\u96c6\u5408 \u8fdb\u7a0b -- \u4e00\u4e2a\u5177\u6709\u4e00\u5b9a\u72ec\u7acb\u529f\u80fd\u7684\u7a0b\u5e8f\u5728\u4e00\u4e2a\u6570\u636e\u96c6\u4e0a\u7684\u4e00\u6b21\u52a8\u6001\u6267\u884c\u7684\u8fc7\u7a0b, \u662f\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u8d44\u6e90\u5206\u914d\u548c\u8c03\u5ea6\u7684\u4e00\u4e2a\u72ec\u7acb\u5355\u4f4d,\u662f\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u7684\u8f7d\u4f53. 1 > \u8fdb\u7a0b\u4e0e\u4f5c\u4e1a\u662f\u4e00\u4e00\u5bf9\u5e94\u7684. ( \u274c ) \u6267\u884c\u4e00\u4e2a\u4f5c\u4e1a\u53ef\u80fd\u4f1a\u8fd0\u884c\u591a\u4e2a\u4e0d\u540c\u7684\u8fdb\u7a0b,\u4e14\u5fc5\u987b\u81f3\u5c11\u7531\u4e00\u4e2a\u8fdb\u7a0b\u7ec4\u6210,\u53cd\u4e4b\u4e0d\u6210\u7acb ; 2 > \u8fdb\u7a0b\u4e0e\u7a0b\u5e8f\u662f\u4e00\u4e00\u5bf9\u5e94\u7684. ( \u274c ) \u4e00\u4e2a\u7a0b\u5e8f\u53ef\u4ee5\u542f\u52a8\u591a\u4e2a\u8fdb\u7a0b ; \u4e00\u4e2a\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\u6709\u5e8f\u5730\u6267\u884c\u82e5\u5e72\u7a0b\u5e8f 3 > \u7a0b\u5e8f\u662f\u9759\u6001\u7684,\u800c\u8fdb\u7a0b\u662f\u52a8\u6001\u7684.. \u63a5\u4e0b\u6765\u9700\u8981\u4e86\u89e3\u51e0\u4e2a\u6982\u5ff5:\u903b\u8f91 ( \u76f8\u5bf9 ) \u5730\u5740\u3001\u7ebf\u6027 ( \u865a\u62df ) \u5730\u5740\u3001\u7269\u7406 ( \u7edd\u5bf9 ) \u5730\u5740\u3001\u5206\u6bb5\u673a\u5236\u3001\u5206\u9875\u673a\u5236\u3001\u6bb5\u9875\u5f0f\u590d\u5408 1 > cpu\u7ecf\u8fc7MMU\u5185\u5b58\u7ba1\u7406\u5355\u5143\u53ef\u4ee5\u8f6c\u6362\u5f97\u5230\u5916\u5730\u5740\u603b\u7ebf\u7684\u4f4d\u6570,\u6b64\u4f4d\u6570\u51b3\u5b9a\u4e86\u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f.. 2 > CPU\u4f7f\u7528\u7269\u7406\u5730\u5740\u7d22\u5f15\u8ba1\u7b97\u673a\u7684\u6240\u6709\u786c\u4ef6\u8d44\u6e90 3 > \u4e00\u4e2a\u786c\u4ef6\u5e73\u53f0\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u5730\u5740\u7a7a\u95f4,\u800c\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u8ba4\u4e3a\u81ea\u5df1\u72ec\u4eab\u6574\u4e2a\u5e73\u53f0\u7684\u8d44\u6e90.. \u6240\u4ee5\u6709\u4e86\u7ebf\u6027\u5730\u5740, \u7ebf\u6027\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u5f80\u5f80\u4e8ecpu\u7684\u4f4d\u6570\u4e00\u81f4,32\u4f4d\u7684cpu,\u90a3\u4e48\u7ebf\u6027\u7a7a\u95f4\u7684\u5927\u5c0f\u5c31\u4f4d2^32 = 4GB. ( \u7269\u7406\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f\u4e0e\u7ebf\u6027\u7a7a\u95f4\u7684\u5927\u5c0f\u6ca1\u6709\u5fc5\u7136\u8054\u7cfb ) 4 > \u7ebf\u6027\u5730\u5740\u53ef\u4ee5\u6620\u5c04\u5230\u67d0\u4e00\u90e8\u5206\u7269\u7406\u5730\u5740\u7a7a\u95f4\u6216\u6574\u4e2a\u7269\u7406\u5730\u5740\u7a7a\u95f4.. \u5c3d\u7ba1\u4e00\u4e2a\u786c\u4ef6\u5e73\u53f0\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u5730\u5740\u7a7a\u95f4 \u4f46\u4e00\u4e2a\u786c\u4ef6\u5e73\u53f0\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u6027\u5730\u5740\u7a7a\u95f4.. 5 > x86\u67b6\u6784\u7684cpu\u5185\u5b58\u7ba1\u7406\u673a\u5236\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206:\u5206\u6bb5\u673a\u5236\u548c\u5206\u9875\u673a\u5236. \u5206\u6bb5\u548c\u5206\u9875\u673a\u5236\u5b9e\u73b0\u4e86\u7a0b\u5e8f\u4e4b\u95f4\u7684\u9694\u79bb.. \u5206\u9875\u673a\u5236\u5b9e\u73b0\u4e86\u6bd4\u5206\u6bb5\u673a\u5236\u66f4\u7c92\u5ea6\u5316\u7684\u7ba1\u7406.. \u5206\u9875\u673a\u5236\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u865a\u62df\u5185\u5b58.. 6 > \u5206\u6bb5\u673a\u5236\u542f\u7528,\u5206\u9875\u673a\u5236\u672a\u542f\u7528: \u903b\u8f91 --> \u7ebf\u6027 == \u7269\u7406\u5730\u5740 \u5206\u6bb5\u5206\u9875\u673a\u5236\u540c\u65f6\u542f\u7528: \u903b\u8f91 --> \u7ebf\u6027 --> \u7269\u7406\u5730\u5740 ( \u5177\u4f53\u7684\u8f6c\u6362\u8fc7\u7a0b,\u5c31\u4e0d\u662f\u4e00\u4e01\u534a\u70b9\u80fd\u9610\u8ff0\u6e05\u695a\u7684\u5566,\u77e5\u9053\u8fd9\u4e2a\u5927\u4f53\u65b9\u5411\u5c31\u884c\u5566,\u5177\u4f53\u8fc7\u7a0b\u6682\u4e14\u4e0d\u7528\u4e86\u89e3.\u7565\u8fc7. )","title":"\u7a7a\u95f4\u4e0a\u7684\u590d\u7528"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_9","text":"\u591a\u9053\u6280\u672f -- \u65f6\u95f4\u4e0a\u7684\u590d\u7528: \u591a\u4e2a\u4efb\u52a1\u590d\u7528cpu\u7684\u65f6\u95f4\u7247,\u901a\u4fd7\u6765\u8bb2,\u5c31\u662fcpu\u5728\u591a\u4e2a\u7a0b\u5e8f\u4e4b\u95f4\u6765\u56de\u5feb\u901f\u5207\u6362. \u4e0d\u96be\u770b\u51fa,\u7a7a\u95f4\u4e0a\u7684\u590d\u7528\u662f\u5728\u4e3a\u65f6\u95f4\u4e0a\u7684\u590d\u7528\u505a\u94fa\u57ab,\u4e3a\u4e86\u8ba9cpu\u5207\u6362\u7684\u5feb\u4e00\u4e9b.. \u6ce8\u610f\u54e6! cpu\u662f\u786c\u4ef6,\u6765\u56de\u5207\u6362\u662f\u53d7\u64cd\u4f5c\u7cfb\u7edf\u8fd9\u4e00\u8f6f\u4ef6\u63a7\u5236\u7684.. \u591a\u9053\u6280\u672f\u662f\u5e94\u7528\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684! \u6709\u4e09\u4e2a\u4efb\u52a1A B C.\u5148\u4f9d\u6b21\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d. \u5b83\u4eec\u9700\u8981cpu\u8fd0\u7b97\u7684\u65f6\u95f4\u90fd\u662f1s,\u8fd0\u7b97\u5b8c\u540e\u4ea7\u751f\u7684\u6570\u636e\u9700\u8981\u653e\u5230\u786c\u76d8\u91cc,\u786c\u76d8IO\u65f6\u95f4\u90fd\u662f9s.. Q: \u4f7f\u7528\u591a\u9053\u6280\u672f,\u5b8c\u6210\u8fd93\u4e2a\u4efb\u52a1\u9700\u8981\u591a\u957f\u65f6\u95f4? A: 1+1+1+9 = 12s. \u60f3\u901a\u5173\u952e\u7684\u4e00\u70b9\u5728\u4e8e,\u5728\u505a\u4efb\u52a1C\u7684IO\u65f6,\u4efb\u52a1A\u548cB\u7684IO\u4e5f\u5728\u505a,\u5f53\u4efb\u52a1C\u7684IO\u505a\u5b8c\u65f6,AB\u7684IO\u65e9\u5c31\u505a\u5b8c\u4e86. \u800ccpu\u5728\u4e09\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362\u7684\u65f6\u95f4\u5ffd\u7565\u4e0d\u8ba1.. \u5148\u8865\u5145\u4e00\u4e2a\u77e5\u8bc6\u70b9,\u5728\u5b9e\u9645\u60c5\u51b5\u4e0b,\u54ea\u6015\u4efb\u52a1A\u53ea\u6709\u8fd0\u7b97\u6ca1\u6709IO,\u82e5\u6b64\u4efb\u52a1A\u5360\u7528cpu\u7684\u65f6\u95f4\u8fc7\u957f(\u4f60\u95ee\u591a\u957f\u7b97\u957f,OS\u5185\u90e8\u4ee3\u7801\u7684\u4e8b\u60c5\u4e86,\u6211\u4eec\u4e0d\u5fc5care..),\u4e5f\u4f1a\u88ab\u64cd\u4f5c\u7cfb\u7edf\u4e00\u811a\u8e39\u5f00,\u817e\u51facpu\u7ed9\u5176\u5b83\u4efb\u52a1\u7528.. Q: \u82e5\u4efb\u52a1ABC\u90fd\u53ea\u6709\u8fd0\u7b97\u65f6\u95f410s,\u90fd\u6ca1\u6709IO..\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u5e76\u53d1\u771f\u7684\u6bd4\u4e32\u884c\u6548\u7387\u9ad8\u5417\uff1f A: \u4e32\u884c30s,\u5e76\u884c\u662f\u5927\u4e8e30s\u7684,\u56e0\u4e3a\u8fd8\u8981\u8003\u8651cpu\u5207\u6362\u8fdb\u7a0b\u7684\u65f6\u95f4.. \u5373cpu\u5728\u6ca1\u6709\u9047\u5230IO\u7684\u60c5\u51b5\u4e0b\u5207\u6362,\u4e0d\u4f1a\u5207\u6362\u6548\u7387,\u53cd\u800c\u4f1a\u964d\u4f4e\u6548\u7387.. \u4f46\u771f\u5b9e\u60c5\u51b5\u4e0b,\u8fd8\u662f\u5f97\u5207,\u56e0\u4e3a\u5f97\u5b9e\u73b0\u5e76\u53d1,\u5c31\u4e0d\u80fd\u8ba9cpu\u88ab\u6346\u7ed1\u7684\u65f6\u95f4\u8fc7\u957f. \u7efc\u4e0a, \u4ec0\u4e48\u65f6\u5019\u5207\u6362\uff1f \u60c5\u51b5\u4e00: \u5f53\u4e00\u4e2a\u4efb\u52a1\u9047\u5230IO,\u80af\u5b9a\u8981\u5207\u6362 -- \u6548\u7387\u63d0\u5347 \u60c5\u51b5\u4e8c: \u4e00\u4e2a\u4efb\u52a1\u6ca1\u6709\u9047\u5230IO\u4f46\u662f\u5360\u7528cpu\u65f6\u95f4\u8fc7\u957f,\u4e5f\u8981\u5207\u6362 -- \u964d\u4f4e\u6548\u7387","title":"\u65f6\u95f4\u4e0a\u7684\u590d\u7528"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#ctts","text":"\u6838\u5fc3\u5c31\u662f\u5e94\u7528 \u591a\u9053\u6280\u672f \u6765\u5b9e\u73b0\u591a\u4e2a\u4efb\u52a1/\u8fdb\u7a0b\u7684 \u5e76\u53d1 \u8fd0\u884c. -- \u591a\u7528\u6237\u591a\u4efb\u52a1 \u25b2 \u4ec5\u4ece\u64cd\u4f5c\u7cfb\u7edf\u89d2\u5ea6\u770b: Linux/Unix\u662f\u4e00\u4e2a\u591a\u7528\u6237\u3001\u591a\u4efb\u52a1\u7684\u64cd\u4f5c\u7cfb\u7edf windows\u662f\u4e00\u4e2a\u5355\u7528\u6237\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf \u591a\u7528\u6237\u4e0d\u662f\u8bf4\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u7528\u6237,\u800c\u662f\u6307\u4e00\u6b21\u53ef\u4ee5\u767b\u5f55\u591a\u4e2a\u7528\u6237 \u591a\u4efb\u52a1\u6307\u7684\u662f\u53ef\u4ee5\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u8fdb\u7a0b \u25b2 \u4ece\u7f51\u7edc\u6280\u672f\u7684\u89d2\u5ea6: \u8fde\u673a\u7ec8\u7aef\u5728\u6ca1\u6709\u4e92\u8054\u7f51\u7684\u60c5\u51b5\u4e0b\u662f\u6709\u610f\u4e49\u7684,\u591a\u4e2a\u4eba\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u8fde\u673a\u7ec8\u7aef\u8fde\u5230\u4e00\u53f0\u673a\u5668/\u670d\u52a1\u5668\u4e0a\u4f7f\u7528 \u800c\u6709\u4e86\u4e92\u8054\u7f51\u4e4b\u540e,\u591a\u4e2a\u4eba\u53ef\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u670d\u52a1\u5668,\u8fd9\u4e2a\u65f6\u5019\u591a\u7528\u6237or\u5355\u7528\u6237\u7684\u6982\u5ff5\u5c31\u4e0d\u518d\u90a3\u4e48\u91cd\u8981 \u63d0\u4e00\u5634:windows\u526a\u5207\u677f\u5b9e\u9645\u4e0a\u662f\u6240\u6709\u8fdb\u7a0b\u7684\u5171\u4eab\u5185\u5b58.. linux\u91cc\u9762\u7684\u7ba1\u9053\u4e5f\u662f\u4e00\u79cd\u5171\u4eab\u5185\u5b58. \u5206\u65f6\u64cd\u4f5c\u7cfb\u7edf = \u591a\u4e2a\u8054\u673a\u7ec8\u7aef + \u591a\u9053\u6280\u672f. 10\u4e2a\u5ba2\u6237\u7aef/10\u4e2a\u7a0b\u5e8f\u733f \u901a\u8fc7\u8054\u673a\u8bbe\u5907(\u6ca1\u6709\u7f51\u7edc\u54e6) \u52a0\u8f7d\u81ea\u5df1\u7684\u7a0b\u5e8f\u5230\u8ba1\u7b97\u673a\u5185\u5b58.(10\u4e2a\u8fdb\u7a0b) \u8ba1\u7b97\u673a\u64cd\u4f5c\u7cfb\u7edf\u4f7f\u7528\u591a\u9053\u6280\u672f\u8ba9\u8ba1\u7b97\u673a\u7684\u8fd9\u4e00\u9897cpu\u5728\u8fd910\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u6765\u56de\u5207\u6362\u8fdb\u884c\u8fd0\u7b97.. \u4f7f\u5f97\u8fd910\u4e2a\u7a0b\u5e8f\u5458\u4ee5\u4e3a\u81ea\u5df1\u72ec\u4eab\u4e86\u8ba1\u7b97\u673a\u8d44\u6e90... (\u5f53\u65f6\u6ca1\u6709\u591a\u6838\u591acpu) Ps: \u5f53\u65f6\u7684\u5206\u65f6\u64cd\u4f5c\u7cfb\u7edf\u53ea\u80fd\u652f\u630110\u51e0\u4e2a\u8054\u673a\u7ec8\u7aef. <\u804a\u4e00\u70b9\u70b9\u7a17\u5b98\u91ce\u53f2> CTTS -- MULTICS -- unix -- minix -- linux -- linux\u53d1\u884c\u7248:redhat\u3001centos MIT\uff0c\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u548c\u901a\u7528\u7535\u6c14\u5728CTTS\u6210\u529f\u7814\u5236\u540e\u51b3\u5b9a\u5f00\u53d1\u80fd\u591f\u540c\u65f6\u652f\u6301\u4e0a\u767e\u7ec8\u7aef\u7684MULTICS \u4f46\u5176\u8bbe\u8ba1\u8005\u7740\u773c\u4e8e\u5efa\u9020\u6ee1\u8db3\u6ce2\u58eb\u987f\u5730\u533a\u6240\u6709\u7528\u6237\u8ba1\u7b97\u9700\u6c42\u7684\u4e00\u53f0\u673a\u5668, \u4e00\u5f00\u59cb\u5c31\u8ffd\u6c42\u5b8c\u7f8e,\u6700\u540e\u9879\u76ee\u6d41\u4ea7\u4e86. \u540e\u6765\u4e00\u4f4d\u53c2\u52a0\u8fc7MULTICS\u7814\u5236\u7684\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u8ba1\u7b97\u673a\u79d1\u5b66\u5bb6\"Ken Thompson\"!! \u5b83\u5f00\u53d1\u4e86\u4e00\u4e2a\u7b80\u6613\u7684,\u5355\u7528\u6237\u7248\u672c\u7684MULTICS,\u6700\u65e9\u53ea\u652f\u63012\u4e2a\u8054\u673a\u7ec8\u7aef --- \u8fd9\u5c31\u662f\u540e\u6765\u5927\u540d\u9f0e\u9f0e\u7684\"UNIX\u7cfb\u7edf\"\u7684\u524d\u8eab!!! 1970\u5e74 -- UNIX\u8bde\u751f \u79f0\u4e4b\u4e3aUNIX\u5143\u5e74.UNIX\u7cfb\u7edf\u6700\u5f00\u59cb\u662f\u4f7f\u7528\u6c47\u7f16\u8bed\u8a00B\u8bed\u8a00\u5199\u7684!! 1973\u5e74 Ken Thompson\u548cc\u8bed\u8a00\u4e4b\u7236\u4e39\u5c3c\u65af\u91cc\u5947\u4e00\u8d77\u7528c\u8bed\u8a00\u91cd\u6784\u4e86UNIX.. Ps: \u5982\u4eca\u5f00\u53d1\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bed\u8a00\u4e5f\u662fC\u8bed\u8a00..(c\u8bed\u8a00\u662f\u5728\u9ad8\u7ea7\u8bed\u8a00\u4e2d\u662f\u6700\u63a5\u8fd1\u786c\u4ef6\u7684\u8bed\u8a00,\u6548\u7387\u6700\u9ad8) 1974\u5e74 UNIX\u7b2c\u4e00\u6b21\u516c\u4e4b\u4e8e\u4f17,\u5171\u4eab\u4e86\u6e90\u4ee3\u7801,\u5927\u5bb6\u96c6\u601d\u5e7f\u76ca,\u5f97\u5230\u8fc5\u901f\u7684\u53d1\u5c55 1979\u5e74 \u5728UNIX\u57fa\u7840\u4e0a\u7814\u7a76TCP/IP\u534f\u8bae,\u6781\u5927\u4fc3\u8fdb\u4e86UNIX\u7684\u53d1\u5c55 (\u6572\u9ed1\u677f!\u8fd9\u4f7f\u5f97Linux\u5728\u7f51\u7edc\u670d\u52a1\u9886\u57df\u6027\u80fd\u975e\u5e38\u5f3a\u5927 linux\u7cfb\u7edf\u7684\u8001\u7956\u5b97\u662funix) (\u4e5f\u56e0\u4e3a\u7f51\u7edc\u7684\u51fa\u73b0,\u4f7f\u5f97\u591a\u7528\u6237\u7684\u7528\u5904\u4e0d\u5927,\u8ba1\u7b97\u673a\u80fd\u901a\u8fc7\u7f51\u7edc\u652f\u6301\u66f4\u591a\u7528\u6237..) 1984\u5e74 \u56e0\u4e3aUNIX\u7684\u5546\u4e1a\u5316,Andrew S.anenbaum\u5f00\u53d1\u4e86\u4e00\u4e2aMinix\u7684\u6559\u5b66\u64cd\u4f5c\u7cfb\u7edf. (\u5bf9\u5916\u79f0\u672a\u53c2\u7167UNIX \u9a97\u5c0f\u5b69.. \u4f46\u6e90\u4ee3\u7801\u662f\u5f00\u6e90\u4e86\u7684) 1985\u5e74 Richard Stallman\u5bf9UNIX\u7684\u5546\u4e1a\u5316\u611f\u5230\u6124\u6012. \u53d1\u8d77\u4e86\u4e00\u4e2a\u540d\u4e3aGNU\u7684\u5f00\u6e90\u8ba1\u5212,\u5176\u4e2d\u5b9a\u5236\u7684GPL\u6761\u6b3e\u76f4\u63a5\u5960\u5b9a\u4e86\u5982\u4eca\u7684\u5f00\u6e90\u57fa\u8c03. 1991\u5e74 \u82ac\u5170\u5927\u5b66\u751fLinus Torvalds\u4eceMinix\u4e0a\u83b7\u53d6\u4e86\u4e9b\u7075\u611f,\u5f00\u53d1\u5e76\u5f00\u6e90\u4e86linux\u7cfb\u7edf. Linux\u64cd\u4f5c\u7cfb\u7edf\u6700\u9ad8\u67097\u4e2a\u7ec8\u7aef\u5c31\u662f\u81f4\u656cunix\u7cfb\u7edf(unix\u7cfb\u7edf\u6700\u9ad8\u4e5f\u662f7\u4e2a) \u4e0d\u5f97\u4e0d\u63d0,Linux\u7cfb\u7edf\u6709\u4e2a\u91cd\u8981\u7684\u6982\u5ff5 -- \u4e00\u5207\u7686\u6587\u4ef6. \u56e0\u4e3a\u5f00\u6e90,\u540e\u6765\u6709\u4e86linux\u5404\u79cd\u5404\u6837\u7684\u53d1\u884c\u7248(\u628alinux\u6e90\u7801\u62ff\u6765\u6539\u4e00\u6539\u52a0\u70b9\u81ea\u5df1\u7684\u4e1c\u897f),\u6bd4\u5982\u7ea2\u5e3d\u3001ubuntu\u3001\u9e92\u9e9f\u7b49. \u56e0\u4e3a\u7ea2\u5e3d\u6536\u8d39\u5927\u5bb6\u5bf9\u5b83\u4e0d\u6ee1,\u53c8\u62ff\u6765\u6539\u5427\u6539\u5427(\u5f53\u7136\u7ea2\u5e3d\u4e5f\u662f\u9075\u5faa\u5f00\u6e90\u534f\u8bae..) \u51e0\u4e4e\u628a\u7ea2\u5e3d\u5168\u76d8\u6252\u62c9\u4e0b\u6765,\u628a\u91cc\u9762\u5e26\u6709\u660e\u663e\u7279\u5f81\u7684\u6bd4\u5982\u540d\u5b57\u547d\u540dredhat\u6539\u4e86,logo\u6539\u4e86.. -- CentOS \u518d\u8bf4\u8fc7\u4e2a\u5c0f\u6545\u4e8b linux\u662f\u5f00\u6e90\u7684,\u4e00\u5f00\u59cblinux\u793e\u533a\u7684\u7a0b\u5e8f\u5458\u4f1a\u5c06\u66f4\u65b0\u7684\u4ee3\u7801\u6258\u7ba1\u5230\u7b2c\u4e09\u65b9\u5e73\u53f0\u4e0a.. \u540e\u6765\u793e\u533a\u7684\u4eba\u5f00\u59cb\u7834\u89e3\u8fd9\u4e2a\u5e73\u53f0\u7684\u534f\u8bae,\u906d\u5230\u4e86\u5e73\u53f0\u7684\u8b66\u544a.. linux\u793e\u533a\u7684\u5927\u4f6c\u4eec\u53d7\u8fd9\u6c14?\u76f4\u63a5\u5f00\u53d1\u4e86\u4e00\u4e2a\u540d\u4e3agit\u7684\u8f6f\u4ef6\u6765\u66f4\u597d\u7684\u7ba1\u7406linux\u7684\u5185\u6838\u5f00\u53d1.. (\u77e5\u9053\u4e3a\u5565\u53ebgit\u5417\uff1fgit\u7684\u82f1\u6587\u7ffb\u8bd1\u53eb\u505a\u8822\u8d27.. xswl) Git\u662f\u76ee\u524d\u6700\u4e3b\u6d41\u7684\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf(\u5728\u672c\u5730) Github\u662f\u6700\u4e3b\u6d41\u7684\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0(\u53f7\u79f0\u5168\u7403\u6700\u5927\u7684\u540c\u6027\u4ea4\u53cb\u7f51\u7ad9 Hhhh),\u53ef\u7406\u89e3\u6210\u4e00\u4e2a\u5b58\u653e\u548c\u7ba1\u7406\u4ee3\u7801\u7684\u5e73\u53f0. Git \u2260 Github. Git\u662f\u6293\u624b,Github\u662f\u5e73\u53f0.\u6ca1\u6709\u5fc5\u7136\u7684\u8054\u7cfb. \u4e54\u5e03\u65af\u8ddf\u6bd4\u5c14\u76d6\u8328\u5173\u4e8e\u56fe\u5f62\u754c\u9762\u64cd\u4f5c\u7cfb\u7edf\u7684\u6545\u4e8b..\u7565.","title":"\u5206\u65f6\u64cd\u4f5c\u7cfb\u7edfCTTS"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_10","text":"","title":"\u8fdb\u7a0b\u4e0e\u7ebf\u7a0b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_11","text":"<\u8fdb\u7a0b>\u662f \u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90 \u7684\u6700\u5c0f\u5355\u4f4d; <\u7ebf\u7a0b>\u662f\u7a0b\u5e8f\u6267\u884c/ cpu\u8c03\u5ea6 \u7684\u6700\u5c0f\u5355\u4f4d \u5728\u8fd9\u7bc7\u7b14\u8bb0\u7684\u5f00\u59cb,\u5c31\u4e8b\u5148\u63d0\u53ca\u4e86\u8fdb\u7a0b\u7684\u6982\u5ff5. \u8fdb\u7a0b\u53ef\u4ee5\u6307\u4ee3\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4e00\u4e2a\u4e2a\u7684\u7a0b\u5e8f;\u4e5f\u53ef\u4ee5\u8bf4\u662f\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u786c\u4ef6\u6765\u8fd0\u884c\u7a0b\u5e8f\u7684\u4e00\u4e2a\u8fc7\u7a0b.. \u8fd9\u4e00\u8fc7\u7a0b\u7528\u4e00\u4e2a\u516c\u5f0f\u8868\u793a: \u8fdb\u7a0b = \u8d44\u6e90\u7533\u8bf7(\u5f00\u8f9f\u5185\u5b58\u7a7a\u95f4) + \u7a0b\u5e8f\u6267\u884c(\u8fd0\u884c\u4ee3\u7801) \u8fd9\u91cc\u4e0d\u5f97\u4e0d\u7740\u91cd\u5355\u72ec\u63d0\u4e00\u63d0\u7a0b\u5e8f\u4e0e\u8fdb\u7a0b\u7684\u533a\u522b: \u7a0b\u5e8f\u6307\u7684\u662f\u4e00\u4e2a\u9759\u6001\u7684\u6307\u4ee4\u5e8f\u5217(\u8bf4\u767d\u4e86,\u5c31\u662f\u4ee3\u7801),\u800c\u8fdb\u7a0b\u662f\u4e00\u4e2a\u5bb9\u5668,\u5176\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a\u7a0b\u5e8f\u7684\u7279\u5b9a\u5b9e\u4f8b\u6240\u7528\u5230\u7684\u6240\u6709\u8d44\u6e90... \u90a3\u4e48\u7ebf\u7a0b\u662f\u4ec0\u4e48\u5462\uff1f \u7ebf\u7a0b\u662f\u4ece\u8fdb\u7a0b\u4e2d\u62bd\u8c61\u51fa\u7684\u4e00\u4e2a\u66f4\u7ec6\u7684\u5355\u4f4d..(\u7ebf\u7a0b\u5305\u542b\u4e8e\u8fdb\u7a0b) \u5b98\u65b9\u89e3\u91ca: \u7ebf\u7a0b\u662f\u7a0b\u5e8f\u6267\u884c\u4e2d\u4e00\u4e2a\u5355\u4e00\u7684\u987a\u5e8f\u63a7\u5236\u6d41\u7a0b,\u662f\u7a0b\u5e8f\u6267\u884c\u6d41\u7684\u6700\u5c0f\u5355\u5143,\u662f\u5904\u7406\u5668\u8c03\u5ea6\u548c\u5206\u6d3e\u7684\u57fa\u672c\u5355\u4f4d \u8ddf\u8fdb\u7a0b\u8fd9\u4e00\u540d\u8bcd\u4e00\u6837(\u9ed1\u8bdd),\u4e3a\u4e86\u65b9\u4fbf\u6c9f\u901a\u53d1\u660e\u4e86\u7ebf\u7a0b. \u5c06\u7ebf\u7a0b\u4f5c\u4e3a\u7a0b\u5e8f\u6267\u884c/ cpu\u8c03\u5ea6 \u7684\u6700\u5c0f\u5355\u4f4d, \u56e0\u4e3acpu\u53ea\u4f1a\u8d1f\u8d23\u4e0a\u65b9\u8fdb\u7a0b\u516c\u5f0f\u91cc\u8fd0\u7b97\u90e8\u5206(\u8fd0\u884c\u4ee3\u7801), \u8d44\u6e90\u7533\u8bf7\u7684\u90e8\u5206\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8d1f\u8d23... \u6982\u62ec\u6765\u8bb2: <\u8fdb\u7a0b\u662f\u8d44\u6e90\u5355\u4f4d> -- \u4e00\u4e2a\u7a0b\u5e8f\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u6570\u636e\u90fd\u4e0e\u81ea\u5df1\u7684\u8fdb\u7a0b\u6709\u5173 <\u7ebf\u7a0b\u662f\u6267\u884c\u5355\u4f4d,cpu\u6267\u884c\u7684\u7ebf\u7a0b> -- \u8fdb\u7a0b\u5185\u4ee3\u7801\u7684\u8fd0\u884c\u8fc7\u7a0b \u5728\u4e0a\u6587\u591a\u9053\u6280\u672f\u90a3,\u6211\u4eec\u63d0\u53ca\u5230\u4e86\u4e0ecpu\u8c03\u5ea6\u76f8\u5173\u7684 \u65f6\u95f4\u7247 \u6982\u5ff5.. cpu\u4f1a\u5728\u591a\u4e2a\u8fdb\u7a0b\u4e4b\u95f4\u6765\u56de\u5feb\u901f\u5207\u6362,\u73b0\u5728\u5f15\u5165\u4e86\u7ebf\u7a0b,\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u66f4\u51c6\u786e\u70b9\u6765\u8bf4,\u770b\u5f97\u66f4\u7ec6\u4e00\u70b9,cpu\u7684\u65f6\u95f4\u7247\u662f\u4f5c\u7528\u4e8e\u7ebf\u7a0b\u7684.. \u8d77\u4e86\u4e00\u4e2aqq\u8fdb\u7a0b --- \u5f00\u8f9f\u4e00\u5757\u5185\u5b58\u7a7a\u95f4,\u5c06\u6570\u636e\u4ece\u786c\u76d8\u8bfb\u5230\u5185\u5b58,\u5f00\u59cb\u8fd0\u884c\u4ee3\u7801(\u5f00\u59cb\u8fd0\u884cqq\u7684\u591a\u4e2a\u7ebf\u7a0b) \u8d77\u4e86\u4e00\u4e2aqq\u7ebf\u7a0b --- \u901a\u5e38\u4e00\u4e2a\u8fdb\u7a0b\u6709\u591a\u4e2a\u7ebf\u7a0b,so\u6b64\u6d41\u6c34\u7ebf\u53ea\u662f\u6307\u4e00\u90e8\u5206\u7a0b\u5e8f\u4ee3\u7801\u7684\u8fd0\u884c [\u6ce8\u610f] \u5f88\u591a\u6587\u732e\u4e2d,\u4e0d\u4f1a\u5177\u4f53\u63d0\u53ca\u662f\u8fdb\u7a0b\u8fd8\u662f\u7ebf\u7a0b,\u4f1a\u8bf4\u662ftask\u4efb\u52a1,\u90a3\u4e48\u5c31\u9700\u8981\u7ed3\u5408\u8bed\u5883\u5206\u6790. \u82e5\u4e0ecpu\u8c03\u5ea6\u76f8\u5173,\u6b64\u5904\u7684\u4efb\u52a1\u5927\u6982\u7387\u662f\u8bf4\u7ebf\u7a0b;\u82e5\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90\u4e0e\u5173,\u6b64\u5904\u7684\u4efb\u52a1\u5927\u6982\u7387\u662f\u6307\u8fdb\u7a0b.. \u82e5\u8ba1\u7b97\u673a\u64cd\u4f5c\u7cfb\u7edf\u8d77\u4e862\u4e2a\u8fdb\u7a0b(\u901a\u5e38\u4e00\u4e2a\u8f6f\u4ef6\u5c31\u8d77\u4e00\u4e2a\u8fdb\u7a0b),\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u67093\u4e2a\u7ebf\u7a0b,\u5219cpu\u5e76\u53d1\u4e862x3=6\u4e2a\u4efb\u52a1(\u7ad9\u5728\u7ebf\u7a0b\u7684\u89d2\u5ea6 \u5373\u6b64\u5904\u7684\u4efb\u52a1\u662f\u6307\u7ebf\u7a0b) 1> \u8ba1\u7b97\u673a\u7684\u6838\u5fc3\u662fCPU,\u5b83\u627f\u62c5\u4e86\u6240\u6709\u7684\u8ba1\u7b97\u4efb\u52a1. \u5b83\u5c31\u50cf\u4e00\u5ea7\u5de5\u5382,\u65f6\u523b\u5728\u8fd0\u884c. 2> \u5047\u5b9a\u5de5\u5382\u7684\u7535\u529b\u6709\u9650,\u4e00\u6b21\u53ea\u80fd\u4f9b\u7ed9\u4e00\u4e2a\u8f66\u95f4\u4f7f\u7528. \u4e5f\u5c31\u662f\u8bf4,\u4e00\u4e2a\u8f66\u95f4\u5f00\u5de5\u7684\u65f6\u5019,\u5176\u4ed6\u8f66\u95f4\u90fd\u5fc5\u987b\u505c\u5de5. \u80cc\u540e\u7684\u542b\u4e49\u5c31\u662f, \u5355\u4e2aCPU\u4e00\u6b21\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2a\u4efb\u52a1. 3> \u8fdb\u7a0b\u5c31\u597d\u6bd4\u5de5\u5382\u7684\u8f66\u95f4,\u5b83\u4ee3\u8868CPU\u6240\u80fd\u5904\u7406\u7684\u5355\u4e2a\u4efb\u52a1.\u4efb\u4e00\u65f6\u523b,CPU\u603b\u662f\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b,\u5176\u4ed6\u8fdb\u7a0b\u5904\u4e8e\u975e\u8fd0\u884c\u72b6\u6001. 4> \u4e00\u4e2a\u8f66\u95f4(\u8fdb\u7a0b)\u91cc,\u53ef\u4ee5\u6709\u5f88\u591a\u5de5\u4eba(\u7ebf\u7a0b),\u5373\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u5305\u62ec\u591a\u4e2a\u7ebf\u7a0b.. \u5b83\u4eec(\u591a\u4e2a\u7ebf\u7a0b)\u534f\u540c\u5b8c\u6210\u4e00\u4e2a\u4efb\u52a1(\u8fdb\u7a0b). 5> \u6bcf\u4e2a\u5de5\u4eba\u6709\u81ea\u5df1\u7684\u4efb\u52a1,\u4e5f\u6709\u81ea\u5df1\u7684\u4e8b\u60c5\u505a.(\u6b64\u5904\u7684\u4efb\u52a1\u7ad9\u5728\u7ebf\u7a0b\u7684\u89d2\u5ea6\u8bf4\u7684) 6> \u8f66\u95f4\u7684\u7a7a\u95f4\u662f\u5de5\u4eba\u4eec\u5171\u4eab\u7684,\u6bd4\u5982\u8bb8\u591a\u623f\u95f4\u662f\u6bcf\u4e2a\u5de5\u4eba\u90fd\u53ef\u4ee5\u8fdb\u51fa\u7684. \u8fd9\u8c61\u5f81\u4e00\u4e2a\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\u662f\u8fdb\u7a0b\u91cc\u7684\u6bcf\u4e2a\u7ebf\u7a0b\u6240\u5171\u4eab\u7684. 7> \u53ef\u662f,\u6bcf\u95f4\u623f\u95f4\u7684\u5927\u5c0f\u4e0d\u540c,\u6709\u4e9b\u623f\u95f4\u6700\u591a\u53ea\u80fd\u5bb9\u7eb3\u4e00\u4e2a\u4eba. \u6bd4\u5982\u5395\u6240,\u91cc\u9762\u6709\u4eba\u7684\u65f6\u5019,\u5176\u4ed6\u4eba\u5c31\u4e0d\u80fd\u8fdb\u53bb\u4e86. \u8fd9\u4ee3\u8868\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u67d0\u4e9b\u5171\u4eab\u5185\u5b58\u65f6,\u5176\u4ed6\u7ebf\u7a0b\u5fc5\u987b\u7b49\u5b83\u7ed3\u675f\u624d\u80fd\u4f7f\u7528\u8fd9\u4e00\u5757\u5185\u5b58\u3002 8> \u4e00\u4e2a\u9632\u6b62\u4ed6\u4eba\u8fdb\u5165\u7684\u7b80\u5355\u65b9\u6cd5,\u5c31\u662f\u95e8\u53e3\u52a0\u4e00\u628a\u9501.\u5148\u5230\u7684\u4eba\u9501\u4e0a\u95e8,\u540e\u5230\u7684\u4eba\u770b\u5230\u4e0a\u9501,\u5c31\u5728\u95e8\u53e3\u6392\u961f,\u7b49\u9501\u6253\u5f00\u518d\u8fdb\u53bb. \u8fd9\u5c31\u53eb\u201c\u4e92\u65a5\u9501\u201d(Mutual exclusion,\u7f29\u5199 Mutex)\u9632\u6b62\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bfb\u5199\u67d0\u4e00\u5757\u5185\u5b58\u533a\u57df. 9> \u8fd8\u6709\u4e9b\u623f\u95f4,\u53ef\u4ee5\u540c\u65f6\u5bb9\u7eb3n\u4e2a\u4eba,\u6bd4\u5982\u53a8\u623f. \u4e5f\u5c31\u662f\u8bf4,\u5982\u679c\u4eba\u6570\u5927\u4e8en,\u591a\u51fa\u6765\u7684\u4eba\u53ea\u80fd\u5728\u5916\u9762\u7b49\u7740. \u8fd9\u597d\u6bd4\u67d0\u4e9b\u5185\u5b58\u533a\u57df,\u53ea\u80fd\u4f9b\u7ed9\u56fa\u5b9a\u6570\u76ee\u7684\u7ebf\u7a0b\u4f7f\u7528. 10> \u8fd9\u65f6\u7684\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u5728\u95e8\u53e3\u6302n\u628a\u94a5\u5319. \u8fdb\u53bb\u7684\u4eba\u5c31\u53d6\u4e00\u628a\u94a5\u5319,\u51fa\u6765\u65f6\u518d\u628a\u94a5\u5319\u6302\u56de\u539f\u5904. \u540e\u5230\u7684\u4eba\u53d1\u73b0\u94a5\u5319\u67b6\u7a7a\u4e86,\u5c31\u77e5\u9053\u5fc5\u987b\u5728\u95e8\u53e3\u6392\u961f\u7b49\u7740\u4e86. \u8fd9\u79cd\u505a\u6cd5\u53eb\u505a\u201c\u4fe1\u53f7\u91cf\u201d(Semaphore),\u7528\u6765\u4fdd\u8bc1\u591a\u4e2a\u7ebf\u7a0b\u4e0d\u4f1a\u4e92\u76f8\u51b2\u7a81. \u4e0d\u96be\u770b\u51fa,mutex\u662fsemaphore\u7684\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5(n=1\u65f6).\u4e5f\u5c31\u662f\u8bf4,\u5b8c\u5168\u53ef\u4ee5\u7528\u540e\u8005\u66ff\u4ee3\u524d\u8005. \u4f46\u662f,\u56e0\u4e3amutex\u8f83\u4e3a\u7b80\u5355\u4e14\u6548\u7387\u9ad8,\u6240\u4ee5\u5728\u5fc5\u987b\u4fdd\u8bc1\u8d44\u6e90\u72ec\u5360\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u91c7\u7528\u8fd9\u79cd\u8bbe\u8ba1\u3002 \u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4e09\u70b9: (1)\u4ee5\u591a\u8fdb\u7a0b\u5f62\u5f0f,\u5141\u8bb8\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u8fd0\u884c; (2)\u4ee5\u591a\u7ebf\u7a0b\u5f62\u5f0f,\u5141\u8bb8\u5355\u4e2a\u4efb\u52a1\u5206\u6210\u4e0d\u540c\u7684\u90e8\u5206\u8fd0\u884c; (3)\u63d0\u4f9b\u534f\u8c03\u673a\u5236,\u4e00\u65b9\u9762\u9632\u6b62\u8fdb\u7a0b\u4e4b\u95f4\u548c\u7ebf\u7a0b\u4e4b\u95f4\u4ea7\u751f\u51b2\u7a81,\u53e6\u4e00\u65b9\u9762\u5141\u8bb8\u8fdb\u7a0b\u4e4b\u95f4\u548c\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u8d44\u6e90. \u53c2\u8003\u94fe\u63a5: https://mp.weixin.qq.com/s/rN _ aNty51npDTe _ z35y7QQ Ps: \u8fd9\u91cc\u8bb2\u7ebf\u7a0b\u6bd4\u55bb\u6210\u4e86\u5de5\u4eba,\u524d\u9762\u4e2d\u6211\u4eec\u8bb2\u7ebf\u7a0b\u6bd4\u55bb\u6210\u4e86\u6d41\u6c34\u7ebf.. \u4e0d\u51b2\u7a81.","title":"\u6982\u5ff5"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2_%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/#_12","text":"\u975e\u963b\u585e\u6001 -- \u5c31\u7eea\u6001\u3001\u8fd0\u884c\u6001 \u963b\u585e\u6001 1> \u8fd0\u884c/\u6267\u884c (Running) \u6001: \u4efb\u52a1\u62ff\u5230cpu,\u6b63\u5728\u8fd0\u884c 2> \u5c31\u7eea\u6001: \u4efb\u52a1\u5df2\u5206\u914d\u5230\u9664CPU\u4ee5\u5916\u7684\u6240\u6709\u5fc5\u8981\u7684\u8d44\u6e90,\u7b49\u5f85\u88ab\u5206\u914dcpu,\u4e00\u65e6\u5f97\u5230cpu,\u4efb\u52a1\u5c31\u53ef\u4ee5\u7acb\u9a6c\u5f00\u59cb\u8fd0\u884c 3> \u963b\u585e (Blocked) \u6001: \u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\u7531\u4e8e\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u53d1\u751f\u800c\u65e0\u6cd5\u6267\u884c\u65f6,\u4fbf\u4f1a\u653e\u5f03cpu\u800c\u5904\u4e8e\u963b\u585e\u72b6\u6001. \u5f15\u8d77\u8fdb\u7a0b\u963b\u585e\u7684\u4e8b\u4ef6\u53ef\u6709\u591a\u79cd,\u4f8b\u5982,\u7b49\u5f85I/O\u5b8c\u6210\u3001\u7533\u8bf7\u7f13\u51b2\u533a\u4e0d\u80fd\u6ee1\u8db3\u3001\u7b49\u5f85\u4fe1\u4ef6(\u4fe1\u53f7)\u7b49. \u8fd9\u91cc\u4ee5\u9047\u89c1IO\u4e3a\u4f8b,\u4efb\u52a1\u9047\u5230\u4e86IO,\u62ff\u5230cpu\u4e5f\u65e0\u6cd5\u8fd0\u884c,\u5fc5\u987b\u7b49\u5230IO\u64cd\u4f5c\u7ed3\u675f,\u8fdb\u5165\u5c31\u7eea\u6001 \u63d0\u4e00\u5634: cpu\u53d7\u64cd\u4f5c\u7cfb\u7edf\u8f6f\u4ef6\u63a7\u5236. cpu\u8fd0\u884c\u4efb\u52a1. \u6b64\u4efb\u52a1\u8bf4\u662f\u8fdb\u7a0b\u4ea6\u6216\u8005\u7ebf\u7a0b\u90fd\u6ca1\u9519 \u4f46\u81ea\u5df1\u8981\u77e5\u9053\u8fd0\u884c\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u662f\u8fdb\u7a0b\u91cc\u7684\u4e00\u6761\u7ebf\u7a0b\u5728\u8fd0\u884c . [\u5c31\u7eea\u6001 --> \u8fd0\u884c\u6001] \u82e5\u6b64\u65f6\u6709\u591a\u4e2a\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u4efb\u52a1,ABCD... \u64cd\u4f5c\u7cfb\u7edf\u8d1f\u8d23\u534f\u8c03\u8fd9\u4ef6\u4e8b,\u5c06\u4efb\u52a1A\u5148\u5206\u914d\u7ed9cpu,\u6b64\u65f6\u4efb\u52a1A\u5c31\u5904\u4e8e\u8fd0\u884c\u6001. [\u8fd0\u884c\u6001 --> \u5c31\u7eea\u6001] \u5f53OS\u8ba4\u4e3a\u4efb\u52a1A\u5360\u7528\u7684\u65f6\u95f4\u8fc7\u957f\u4e86.\u518d\u6216\u8005,\u6709\u4e00\u4e2a\u4f18\u5148\u7ea7\u6bd4\u4efb\u52a1A\u66f4\u9ad8\u7684\u4efb\u52a1B; \u4efb\u52a1B\u5c31\u4f1a\u628acpu\u62a2\u8d70\u4e86.\u4efb\u52a1A\u5c31\u4f1a\u5904\u4e8e\u5c31\u7eea\u6001. [\u8fd0\u884c\u6001 --> \u963b\u585e\u6001] (IO\u662f\u6307\u786c\u76d8\u5f00\u59cb\u8f6c,\u627e\u5230\u76f8\u5e94\u6570\u636e\u5e76\u5c06\u6570\u636e\u8bfb\u5230\u5185\u5b58\u7684\u8fc7\u7a0b) \u5f53\u4efb\u52a1A\u9047\u5230IO.\u6b64\u65f6\u4efb\u52a1A\u5c06\u8fdb\u5165\u963b\u585e\u6001.\u610f\u5473\u7740\u6b64\u65f6\u7acb\u523b\u628acpu\u7ed9\u5904\u4e8e\u963b\u585e\u6001\u7684\u4efb\u52a1A\u7528,\u4efb\u52a1A\u4e5f\u4e0d\u4f1a\u7528(\u4efb\u52a1A\u5728\u8fdb\u884cIO\u64cd\u4f5c\u5462,\u5fd9\u4e0d\u8fc7\u6765). \u8981\u77e5\u9053\u64cd\u4f5c\u7cfb\u7edf\u80af\u5b9a\u4e0d\u4f1a\u8ba9cpu\u95f2\u7740.. So,cpu\u4e0b\u53d1\u6307\u4ee4\u7ed9\u786c\u76d8\u540e,\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u628a\u4efb\u52a1A\u4e00\u811a\u8e39\u5f00,\u628acpu\u62ff\u8fc7\u6765\u8fd0\u884c\u53e6\u4e00\u4e2a\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u4efb\u52a1. [\u963b\u585e\u6001 --> \u5c31\u7eea\u6001 --> \u8fd0\u884c\u6001] \u963b\u585e\u6001\u4e0d\u80fd\u4e00\u4e0b\u5b50\u5207\u5230\u8fd0\u884c\u6001,\u53ea\u80fd\u7b49IO\u64cd\u4f5c\u505a\u5b8c,\u963b\u585e\u5b8c\u6bd5..\u8f6c\u6362\u6210\u5c31\u7eea\u6001,\u62ff\u5230\u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u7684cpu\u540e\u518d\u8f6c\u6362\u6210\u8fd0\u884c\u6001. Q:\u5982\u4f55\u63d0\u5347\u4efb\u52a1\u6267\u884c\u7684\u6548\u7387\u5462\uff1f A:\u7406\u60f3\u60c5\u51b5,cpu\u4e00\u76f4\u88ab\u6b64\u4efb\u52a1\u5360\u7528,\u4efb\u52a1\u7684IO\u64cd\u4f5c\u5b8c\u6210\u540e,\u7acb\u9a6c\u80fd\u5f97\u5230CPU\u7684\u4f7f\u7528. \u4f46\u8fd9\u662f\u4e0d\u73b0\u5b9e\u7684,\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5141\u8bb8cpu\u8d44\u6e90\u8fd9\u6837\u6d6a\u8d39.. \u6211\u4eec\u552f\u4e00\u80fd\u63a7\u5236\u7684\u5c31\u662f\u963b\u585e. \u6211\u4eec\u53ea\u80fd\u5728\u5199\u7a0b\u5e8f\u4ee5\u53ca\u90e8\u7f72\u96c6\u7fa4\u67b6\u6784\u7684\u8fc7\u7a0b\u4e2d\u51cf\u5c11\u4efb\u52a1\u5904\u4e8e\u963b\u585e\u6001\u7684\u65f6\u95f4,\u589e\u52a0\u4efb\u52a1\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u65f6\u95f4 (\u4efb\u52a1\u5904\u4e8e\u963b\u585e\u6001,\u7ed9\u5b83cpu,\u5b83\u4e5f\u4e0d\u4e2d\u7528\u554a) \u8fd9\u6837\u7684\u8bdd,\u5904\u4e8e\u5c31\u7eea\u6001\u7684\u4efb\u52a1\u4e00\u65e6\u5f97\u5230cpu\u5c31\u4f1a\u76f4\u63a5\u5f00\u59cb\u8fd0\u884c..\u4efb\u52a1\u6574\u4f53\u7684\u6267\u884c\u6548\u7387\u5c31\u63d0\u9ad8\u4e86. Ps: \u9e3f\u8499\u7cfb\u7edf \u4e07\u7269\u4e92\u8054.5G\u65f6\u4ee3.\u5206\u5e03\u5f0f\u8f6f\u7ec4\u4ef6..","title":"\u4efb\u52a1\u8fd0\u884c\u7684\u4e09\u79cd\u72b6\u6001"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/3_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%A7%88/","text":"\u7f51\u7edc \u00b6 Q1: \u4e3a\u4f55\u8981\u6709\u7f51\u7edc\uff1f A1: \u4e3a\u4e86\u65b9\u4fbf\u6570\u636e\u7684\u4f20\u8f93/\u901a\u4fe1.. \u56e0\u800c\u7f51\u7edc\u65e9\u671f\u8fd8\u6709\u4e2a\u522b\u540d -- \u4fe1\u606f\u9ad8\u901f\u516c\u8def. \u6253\u7834\u4e86\u5730\u57df\u9650\u5236,\u63d0\u9ad8\u4e86\u4f20\u6570\u636e\u7684\u6548\u7387 Q2: \u4ec0\u4e48\u662f\u7f51\u7edc\uff1f A2: \u7f51\u7edc= \u7269\u7406\u8fde\u63a5\u4ecb\u8d28 + \u4e92\u8054\u7f51\u901a\u4fe1\u534f\u8bae/\u89c4\u5b9a 1> \u7269\u7406\u8fde\u63a5\u4ecb\u8d28: \u7f51\u5361\u3001\u5149\u7ea4\u3001\u6d77\u5e95\u7535\u7f06\u7b49 \u628a\u8def\u5148\u94fa\u597d\u5566; 2> \u4e92\u8054\u7f51\u901a\u4fe1\u534f\u8bae\u6839\u636e\u529f\u80fd\u7684\u4e0d\u540c: OSI\u4e03\u5c42\u901a\u4fe1\u534f\u8bae -- \u5e94\u8868\u4f1a\u4f20\u7f51\u6570\u7269 Q3: \u73b0\u4ee3\u7f51\u7edc\u8bbe\u5907\u4e92\u8054\u7684\u4e24\u79cd\u6a21\u5f0f\uff1f\u6709\u4f55\u7279\u70b9\uff1f A3: C/S (\u4e00\u4e2a\u670d\u52a1\u5668\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u5ba2\u6237\u7aef) P2P (\u6ca1\u6709\u5ba2\u6237\u7aef\u670d\u52a1\u7aef\u4e4b\u5206,\u53ea\u8981\u4e24\u4e2a\u4e3b\u673a\u90fd\u8fd0\u884c\u4e86\u5bf9\u7b49\u8fde\u63a5\u8f6f\u4ef6p2p\u8f6f\u4ef6,\u5373\u53ef\u5e73\u7b49\u5bf9\u7b49\u7684\u8fdb\u884c\u901a\u4fe1) Q4:\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u6027\u80fd\u6307\u6807 \u65f6\u5ef6\u5305\u542b\u54ea\u51e0\u4e2a\u90e8\u5206? A4: \u65f6\u5ef6 = \u53d1\u9001+\u8fde\u63a5+\u6392\u961f+\u5904\u7406 RTT \u6570\u636e\u62a5\u6587\u5728\u7aef\u5230\u7aef\u7684\u901a\u4fe1\u4e2d\u6765\u56de\u4e00\u6b21\u7684\u65f6\u95f4 \u5b66\u8ba1\u7b97\u673a\u7f51\u7edc\u5c31\u662f\u5728\u5b66\u5404\u79cd\u534f\u8bae!!! OSI\u4e03\u5c42\u6a21\u578b \u00b6 OSI\u4e03\u5c42\u6a21\u578b \u4f5c\u7528 \u5e38\u89c1\u534f\u8bae \u6570\u636e \u5e94\u7528\u5c42 \u4e3a\u8ba1\u7b97\u673a\u7528\u6237\u63d0\u4f9b\u63a5\u53e3\u548c\u670d\u52a1(\u4e00\u7cfb\u5217\u5e94\u7528\u8f6f\u4ef6) HTTP/FTP data \u4f1a\u8bdd\u5c42 \u6570\u636e\u5904\u7406(\u7f16\u7801\u89e3\u7801\u3001\u52a0\u5bc6\u89e3\u5bc6\u7b49) \u8868\u793a\u5c42 \u7ba1\u7406(\u5efa\u7acb\u3001\u7ef4\u62a4\u3001\u91cd\u8fde)\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u4f1a\u8bdd \u4f20\u8f93\u5c42 \u7ba1\u7406\u7aef\u5230\u7aef(\u8fdb\u7a0b\u4e4b\u95f4)\u7684\u901a\u4fe1\u8fde\u63a5 UTP/TCP \u6bb5 segment \u7f51\u7edc\u5c42 \u89e3\u51b3\u5728\u591a\u4e2a\u7f51\u7edc\u4e4b\u95f4\u4f20\u8f93(\u8def\u7531)\u7684\u95ee\u9898 IP/ICMP \u5305/\u62a5 packet \u6570\u636e\u94fe\u8def\u5c42 \u7ba1\u7406\u76f8\u90bb\u8282\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1(\u540c\u4e00\u4e2a\u5c40\u57df\u7f51) Ethernet/ARP \u5e27 frame \u7269\u7406\u5c42 \u89e3\u51b3\u4f7f\u7528\u4f55\u79cd\u4fe1\u53f7\u6765\u4f20\u8f93\u6bd4\u72790\u548c1\u7684\u95ee\u9898 \u4f4d bit \u53d1\u9001\u6570\u636e\u662f\u4e00\u4e2a\u5c01\u88c5\u7684\u8fc7\u7a0b,\u63a5\u6536\u6570\u636e\u5219\u662f\u89e3\u5c01\u88c5. \u6570\u636e\u5c01\u88c5\u8fc7\u7a0b (\u4ece\u4e0a\u5230\u4e0b\u4ece\u5185\u5230\u5916\u4f9d\u6b21\u52a0\u4e0a\u6bcf\u4e00\u5c42\u7684head\u5934\u90e8\u4fe1\u606f): \u5206\u6bb5 - \u6253\u5305 - \u6210\u5e27 - \u4f20\u4f4d \u6570\u636e\u89e3\u5305\u8fc7\u7a0b (\u4ece\u4e0b\u5230\u4e0a\u4ece\u5916\u5230\u5185\u4f9d\u6b21\u4e22\u6389\u6bcf\u4e00\u5c42\u7684head\u5934\u90e8/\u9996\u90e8\u4fe1\u606f) \u5c40\u57df\u7f51\u5185\u4e00\u5b9a\u662f\u57fa\u4e8emac\u5730\u5740\u7684\u5e7f\u64ad\u901a\u4fe1: 1> \u5c01\u88c5 2> \u4ea4\u6362\u673a(\u901a\u5e38\u662f\u4e8c\u5c42\u8bbe\u5907,\u5c06\u4e8c\u8fdb\u5236\u8fd8\u539f\u6210\u6570\u636e\u5e27,\u62c6\u5305\u53ef\u4ee5\u770b\u5230\u76ee\u7684mac,\u77e5\u9053\u8f6c\u53d1\u7ed9\u8c01\u540e\u518d\u5c01\u88c5\u6210\u6570\u636e\u5e27 \u4f20\u4f4d) 3> \u76ee\u7684mac\u5bf9\u5e94\u7684\u5c40\u57df\u7f51\u7684\u90a3\u53f0\u4e3b\u673a,\u8fdb\u884c\u89e3\u5305 \u4e0e\u5916\u7f51\u901a\u4fe1: \u4ea4\u6362\u673a\u770b\u5230\u7684\u76ee\u7684mac\u5c31\u662f\u7f51\u5173\u7684mac\u5566 \u7f51\u5173\u662f\u4e09\u5c42\u8bbe\u5907(\u80fd\u5c06\u5c01\u88c5\u597d\u7684\u5305\u62c6\u5230\u7f51\u7edc\u5c42) \u7f51\u5173\u6839\u636e\u8def\u7531\u8868\u5728\u5916\u7f51\u4e2d\u8fdb\u884c\"hop-by-hop\" socket\u5957\u63a5\u5b57\u5c42 \u00b6 \u6240\u6709\u57fa\u4e8e\u7f51\u7edc\u901a\u4fe1\u5199\u51fa\u6765\u7684\u8f6f\u4ef6\u672c\u8d28\u90fd\u662f\u5957\u63a5\u5b57\u5199\u51fa\u6765\u7684. socket\u5c31\u662f\u4e00\u4e2a\u5957\u63a5\u5b57\u8f6f\u4ef6\u7a0b\u5e8f.. \u662f\u5bf9\u4f20\u8f93\u5c42\u53ca\u4ee5\u4e0b\u7684\u5c01\u88c5. \u5b83\u5904\u4e8e\u5e94\u7528\u5c42\u4e0e\u4f20\u8f93\u5c42\u4e4b\u95f4. \u5b83\u7ed9\u5e94\u7528\u5c42\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u63d0\u4f9b\u4e86\u4f20\u8f93\u5c42\u53ca\u4ee5\u4e0b\u7684\u4e00\u4e2a\u4e2a\u63a5\u53e3.. \u8ba9\u7a0b\u5e8f\u5458\u4e13\u6ce8\u4e8e\u7a0b\u5e8f\u7684\u5f00\u53d1,\u4e0d\u7528\u5b9e\u73b0\u7f51\u7edc\u4f20\u8f93\u5e95\u5c42\u7684\u4e00\u7cfb\u5217\u7684\u534f\u8bae \u4e0b\u9762\u6211\u5c06\u4ece\u7269\u7406\u5c42\u3001\u6570\u636e\u94fe\u8def\u5c42\u3001\u7f51\u7edc\u5c42...\u4f9d\u6b21\u8fdb\u884c\u9610\u8ff0.. \u6bcf\u4e00\u5c0f\u8282\u4f1a\u7ad9\u5728\u672c\u5c42\u7684\u89d2\u5ea6\u8fdb\u884c\u4ecb\u7ecd...\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u5bf9\u7d27\u90bb\u7684\u4e0a\u4e00\u5c0f\u8282\u8fdb\u884c\u8865\u5145..\u4e0d\u65ad\u98a0\u8986\u4e0d\u65ad\u7ec6\u5316\u7684\u8fc7\u7a0b!!","title":"\u8ba1\u7b97\u673a\u7f51\u7edc\u6982\u89c8"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/3_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%A7%88/#_1","text":"Q1: \u4e3a\u4f55\u8981\u6709\u7f51\u7edc\uff1f A1: \u4e3a\u4e86\u65b9\u4fbf\u6570\u636e\u7684\u4f20\u8f93/\u901a\u4fe1.. \u56e0\u800c\u7f51\u7edc\u65e9\u671f\u8fd8\u6709\u4e2a\u522b\u540d -- \u4fe1\u606f\u9ad8\u901f\u516c\u8def. \u6253\u7834\u4e86\u5730\u57df\u9650\u5236,\u63d0\u9ad8\u4e86\u4f20\u6570\u636e\u7684\u6548\u7387 Q2: \u4ec0\u4e48\u662f\u7f51\u7edc\uff1f A2: \u7f51\u7edc= \u7269\u7406\u8fde\u63a5\u4ecb\u8d28 + \u4e92\u8054\u7f51\u901a\u4fe1\u534f\u8bae/\u89c4\u5b9a 1> \u7269\u7406\u8fde\u63a5\u4ecb\u8d28: \u7f51\u5361\u3001\u5149\u7ea4\u3001\u6d77\u5e95\u7535\u7f06\u7b49 \u628a\u8def\u5148\u94fa\u597d\u5566; 2> \u4e92\u8054\u7f51\u901a\u4fe1\u534f\u8bae\u6839\u636e\u529f\u80fd\u7684\u4e0d\u540c: OSI\u4e03\u5c42\u901a\u4fe1\u534f\u8bae -- \u5e94\u8868\u4f1a\u4f20\u7f51\u6570\u7269 Q3: \u73b0\u4ee3\u7f51\u7edc\u8bbe\u5907\u4e92\u8054\u7684\u4e24\u79cd\u6a21\u5f0f\uff1f\u6709\u4f55\u7279\u70b9\uff1f A3: C/S (\u4e00\u4e2a\u670d\u52a1\u5668\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u5ba2\u6237\u7aef) P2P (\u6ca1\u6709\u5ba2\u6237\u7aef\u670d\u52a1\u7aef\u4e4b\u5206,\u53ea\u8981\u4e24\u4e2a\u4e3b\u673a\u90fd\u8fd0\u884c\u4e86\u5bf9\u7b49\u8fde\u63a5\u8f6f\u4ef6p2p\u8f6f\u4ef6,\u5373\u53ef\u5e73\u7b49\u5bf9\u7b49\u7684\u8fdb\u884c\u901a\u4fe1) Q4:\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u6027\u80fd\u6307\u6807 \u65f6\u5ef6\u5305\u542b\u54ea\u51e0\u4e2a\u90e8\u5206? A4: \u65f6\u5ef6 = \u53d1\u9001+\u8fde\u63a5+\u6392\u961f+\u5904\u7406 RTT \u6570\u636e\u62a5\u6587\u5728\u7aef\u5230\u7aef\u7684\u901a\u4fe1\u4e2d\u6765\u56de\u4e00\u6b21\u7684\u65f6\u95f4 \u5b66\u8ba1\u7b97\u673a\u7f51\u7edc\u5c31\u662f\u5728\u5b66\u5404\u79cd\u534f\u8bae!!!","title":"\u7f51\u7edc"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/3_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%A7%88/#osi","text":"OSI\u4e03\u5c42\u6a21\u578b \u4f5c\u7528 \u5e38\u89c1\u534f\u8bae \u6570\u636e \u5e94\u7528\u5c42 \u4e3a\u8ba1\u7b97\u673a\u7528\u6237\u63d0\u4f9b\u63a5\u53e3\u548c\u670d\u52a1(\u4e00\u7cfb\u5217\u5e94\u7528\u8f6f\u4ef6) HTTP/FTP data \u4f1a\u8bdd\u5c42 \u6570\u636e\u5904\u7406(\u7f16\u7801\u89e3\u7801\u3001\u52a0\u5bc6\u89e3\u5bc6\u7b49) \u8868\u793a\u5c42 \u7ba1\u7406(\u5efa\u7acb\u3001\u7ef4\u62a4\u3001\u91cd\u8fde)\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1\u4f1a\u8bdd \u4f20\u8f93\u5c42 \u7ba1\u7406\u7aef\u5230\u7aef(\u8fdb\u7a0b\u4e4b\u95f4)\u7684\u901a\u4fe1\u8fde\u63a5 UTP/TCP \u6bb5 segment \u7f51\u7edc\u5c42 \u89e3\u51b3\u5728\u591a\u4e2a\u7f51\u7edc\u4e4b\u95f4\u4f20\u8f93(\u8def\u7531)\u7684\u95ee\u9898 IP/ICMP \u5305/\u62a5 packet \u6570\u636e\u94fe\u8def\u5c42 \u7ba1\u7406\u76f8\u90bb\u8282\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1(\u540c\u4e00\u4e2a\u5c40\u57df\u7f51) Ethernet/ARP \u5e27 frame \u7269\u7406\u5c42 \u89e3\u51b3\u4f7f\u7528\u4f55\u79cd\u4fe1\u53f7\u6765\u4f20\u8f93\u6bd4\u72790\u548c1\u7684\u95ee\u9898 \u4f4d bit \u53d1\u9001\u6570\u636e\u662f\u4e00\u4e2a\u5c01\u88c5\u7684\u8fc7\u7a0b,\u63a5\u6536\u6570\u636e\u5219\u662f\u89e3\u5c01\u88c5. \u6570\u636e\u5c01\u88c5\u8fc7\u7a0b (\u4ece\u4e0a\u5230\u4e0b\u4ece\u5185\u5230\u5916\u4f9d\u6b21\u52a0\u4e0a\u6bcf\u4e00\u5c42\u7684head\u5934\u90e8\u4fe1\u606f): \u5206\u6bb5 - \u6253\u5305 - \u6210\u5e27 - \u4f20\u4f4d \u6570\u636e\u89e3\u5305\u8fc7\u7a0b (\u4ece\u4e0b\u5230\u4e0a\u4ece\u5916\u5230\u5185\u4f9d\u6b21\u4e22\u6389\u6bcf\u4e00\u5c42\u7684head\u5934\u90e8/\u9996\u90e8\u4fe1\u606f) \u5c40\u57df\u7f51\u5185\u4e00\u5b9a\u662f\u57fa\u4e8emac\u5730\u5740\u7684\u5e7f\u64ad\u901a\u4fe1: 1> \u5c01\u88c5 2> \u4ea4\u6362\u673a(\u901a\u5e38\u662f\u4e8c\u5c42\u8bbe\u5907,\u5c06\u4e8c\u8fdb\u5236\u8fd8\u539f\u6210\u6570\u636e\u5e27,\u62c6\u5305\u53ef\u4ee5\u770b\u5230\u76ee\u7684mac,\u77e5\u9053\u8f6c\u53d1\u7ed9\u8c01\u540e\u518d\u5c01\u88c5\u6210\u6570\u636e\u5e27 \u4f20\u4f4d) 3> \u76ee\u7684mac\u5bf9\u5e94\u7684\u5c40\u57df\u7f51\u7684\u90a3\u53f0\u4e3b\u673a,\u8fdb\u884c\u89e3\u5305 \u4e0e\u5916\u7f51\u901a\u4fe1: \u4ea4\u6362\u673a\u770b\u5230\u7684\u76ee\u7684mac\u5c31\u662f\u7f51\u5173\u7684mac\u5566 \u7f51\u5173\u662f\u4e09\u5c42\u8bbe\u5907(\u80fd\u5c06\u5c01\u88c5\u597d\u7684\u5305\u62c6\u5230\u7f51\u7edc\u5c42) \u7f51\u5173\u6839\u636e\u8def\u7531\u8868\u5728\u5916\u7f51\u4e2d\u8fdb\u884c\"hop-by-hop\"","title":"OSI\u4e03\u5c42\u6a21\u578b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/3_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%A7%88/#socket","text":"\u6240\u6709\u57fa\u4e8e\u7f51\u7edc\u901a\u4fe1\u5199\u51fa\u6765\u7684\u8f6f\u4ef6\u672c\u8d28\u90fd\u662f\u5957\u63a5\u5b57\u5199\u51fa\u6765\u7684. socket\u5c31\u662f\u4e00\u4e2a\u5957\u63a5\u5b57\u8f6f\u4ef6\u7a0b\u5e8f.. \u662f\u5bf9\u4f20\u8f93\u5c42\u53ca\u4ee5\u4e0b\u7684\u5c01\u88c5. \u5b83\u5904\u4e8e\u5e94\u7528\u5c42\u4e0e\u4f20\u8f93\u5c42\u4e4b\u95f4. \u5b83\u7ed9\u5e94\u7528\u5c42\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u63d0\u4f9b\u4e86\u4f20\u8f93\u5c42\u53ca\u4ee5\u4e0b\u7684\u4e00\u4e2a\u4e2a\u63a5\u53e3.. \u8ba9\u7a0b\u5e8f\u5458\u4e13\u6ce8\u4e8e\u7a0b\u5e8f\u7684\u5f00\u53d1,\u4e0d\u7528\u5b9e\u73b0\u7f51\u7edc\u4f20\u8f93\u5e95\u5c42\u7684\u4e00\u7cfb\u5217\u7684\u534f\u8bae \u4e0b\u9762\u6211\u5c06\u4ece\u7269\u7406\u5c42\u3001\u6570\u636e\u94fe\u8def\u5c42\u3001\u7f51\u7edc\u5c42...\u4f9d\u6b21\u8fdb\u884c\u9610\u8ff0.. \u6bcf\u4e00\u5c0f\u8282\u4f1a\u7ad9\u5728\u672c\u5c42\u7684\u89d2\u5ea6\u8fdb\u884c\u4ecb\u7ecd...\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u5bf9\u7d27\u90bb\u7684\u4e0a\u4e00\u5c0f\u8282\u8fdb\u884c\u8865\u5145..\u4e0d\u65ad\u98a0\u8986\u4e0d\u65ad\u7ec6\u5316\u7684\u8fc7\u7a0b!!","title":"socket\u5957\u63a5\u5b57\u5c42"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/","text":"\u7269\u7406\u5c42 \u00b6 \u628a\u6570\u636e\u5168\u90e8\u8f6c\u6362\u6210\u7535\u4fe1\u53f7/\u6bd4\u7279\u4f4d 010111010. \u7269\u7406\u5c42\u8fde\u63a5\u4e0d\u540c\u7684\u7f51\u7edc\u8bbe\u5907(\u5149\u7ea4\u3001\u6d77\u5e95\u7535\u7f06\u7b49)\u4f20\u8f9301011\u7684\u9ad8\u4f4e\u7535\u5e73\u4fe1\u53f7. \u6ce8\u610f : \u5355\u7eaf\u7684\u4e8c\u8fdb\u5236\u657001011\u662f\u6ca1\u6709\u610f\u4e49\u7684 \u53ea\u9700\u8981\u4e86\u89e3\u7684\u77e5\u8bc6\u70b9: \u5149\u7ea4\u3001\u6d77\u5e95\u7535\u7f06\u3001\u53cc\u7ede\u7ebf\u90fd\u662f\u7269\u7406\u5c42\u5e38\u89c1\u7684\u4f20\u8f93\u4ecb\u8d28. \u8fd9\u6570\u636e\u7535\u8def\u4e00\u822c\u6709 \u4e24\u4e2a\u4fe1\u9053 (\u5f80\u4e00\u4e2a\u65b9\u5411\u4f20\u8f93\u4fe1\u606f\u7684\u5a92\u4f53), \u5206\u522b\u7528\u4e8e\u53d1\u9001\u548c\u63a5\u6536; \u884d\u751f\u51fa\u4e86 \u5168\u53cc\u5de5\u901a\u4fe1\u4fe1\u9053\u3001\u534a\u53cc\u5de5\u3001\u5355\u5de5; \u4e3a\u4e86\u63d0\u9ad8\u4fe1\u9053\u7684\u5229\u7528\u7387, \u53ef\u4ee5\u4f7f\u7528\u5206\u7528-\u590d\u7528\u7684\u6280\u672f. \u6570\u636e\u94fe\u8def\u5c42 \u00b6 \u4e09\u5927\u529f\u80fd(\u4e86\u89e3) \u00b6 \u6570\u636e\u94fe\u8def\u5c42\u4e09\u4e2a\u91cd\u8981\u529f\u80fd: \u5c01\u88c5\u6210\u5e27(\u5e27\u9996\u90e8+\u5e27\u6570\u636e+\u5e27\u5c3e\u90e8)\u3001\u900f\u660e\u4f20\u8f93\u3001\u5dee\u9519\u68c0\u6d4b 1> \u5c01\u88c5\u6210\u5e27 : \u5b8c\u6574\u7684\u6570\u636e\u5e27 = \u5e27\u9996\u90e8+\u5e27\u6570\u636e(\u4ee5\u592a\u7f51\u6570\u636e\u5e27)+\u5e27\u5c3e\u90e8 2> \u900f\u660e\u4f20\u8f93 : \u5e27\u9996\u5c3e\u90e8\u90fd\u662f\u7279\u5b9a\u7684\u63a7\u5236\u5b57\u7b26(\u6bd4\u7279\u6d41), \u82e5\u5728\u5e27\u6570\u636e\u4e2d\u51fa\u73b0\u4e86,\u9700\u8981\u8f6c\u4e49 3> \u5dee\u9519\u68c0\u6d4b : A. \u5947\u5076\u6821\u9a8c\u6cd5(\u76f8\u52a0\u82e5\u5947\u6570\u6dfb\u52a0\u6821\u9a8c\u4f4d1,\u82e5\u5076\u6570\u6dfb\u52a0\u6821\u9a8c\u4f4d0),\u540c\u65f6\u9519\u4e24\u4e2a\u5c31\u62c9\u8de8 B. \u5faa\u73af\u5197\u4f59\u68c0\u9a8c\u7801 CRC \uff01\u591a\u9879\u5f0f \u5f02\u6216\u64cd\u4f5c(\u5f02\u4e3a1 \u540c\u4e3a0) \u4e3e\u6817: \u5047\u8bbe\u6709\u6570\u636e1101011011\u9700\u8981\u4f20\u8f93, \u91c7\u7528CRC\u7684\u751f\u6210\u591a\u9879\u5f0f\u4e3aP(X)=X^4+X+1, \u8bf7\u8ba1\u7b97\u6dfb\u52a0\u4e86CRC\u6821\u9a8c\u7801\u4e4b\u540e\u7684\u6570\u636e. \u89e3: \u591a\u9879\u5f0f\u4f4d\u4e32\u4e3a --> 10011, \u6a21\u4e8c\u9664\u6cd5\u5f97\u5230\u4f59\u65701110, \u6240\u4ee5\u5f97\u5230\u7ed3\u679c11010110111110 \u6ce8\u610f: \u7269\u7406\u5c42\u53ea\u7ba1\u6bd4\u7279\u6d41\u7684\u4f20\u8f93, \u65e0\u6cd5\u63a7\u5236\u662f\u5426\u51fa\u9519 \u6570\u636e\u94fe\u8def\u5c42\u53ea\u8fdb\u884c\u6570\u636e\u7684\u68c0\u6d4b, \u4e0d\u8fdb\u884c\u7ea0\u6b63\u6709\u9519\u4f1a\u88ab\u4e22\u5f03 \u4ee5\u592a\u7f51\u534f\u8bae \u00b6 Ethernet \u4ee5\u592a\u7f51\u534f\u8bae \u89c4\u5b9a\u4e86\u6570\u636e\u5e27\u5728\u6570\u636e\u94fe\u8def\u5c42\u4e2d\u7684\u4f20\u8f93\u6807\u51c6.. \u4ee5\u592a\u7f51\u534f\u8bae\u6ce8\u610f\u4e09\u70b9: \u5c40\u57df\u7f51\u6280\u672f \u3001 \u5e94\u7528\u4e8e\u6570\u636e\u94fe\u8def\u5c42 \u3001 \u5b9e\u73b0\u4e86\u6570\u636e\u5e27\u5728\u76f8\u90bb\u8bbe\u5907\u4e4b\u95f4\u7684\u4f20\u8f93 \u4ee5\u592a\u7f51\u534f\u8bae\u5c06\u4e00\u4e32\u4e8c\u8fdb\u5236\u6570\u8fdb\u884c\u4e86\u5206\u6bb5/\u5206\u7ec4.\u6b64\u534f\u8bae\u89c4\u5b9a\u4e86\u7535\u4fe1\u53f7\u591a\u5c11\u4f4d\u4e00\u7ec4,\u6bcf\u7ec4\u4ec0\u4e48\u610f\u601d. ( \u8fd9\u662f\u7ad9\u5728\u89e3\u5305\u7684\u89d2\u5ea6\u8bf4\u7684 .. <\u6570\u636e\u4f9d\u6b21\u5c01\u5305 -- \u6bd4\u7279\u6d41\u4f20\u8f93 -- \u6570\u636e\u4f9d\u6b21\u89e3\u5305>) \u4ee5\u592a\u7f51\u6570\u636e\u5e27\u7684\u683c\u5f0f\u5982\u4e0b : \u6ce8\u610f\u54e6,\u8fd8\u4f1a\u7ed9\u8fd9\u4e2a\u6570\u636e\u5e27\u7684\u9996\u5c3e\u6dfb\u52a0 \u5e27\u9996\u90e8 \u548c \u5e27\u5c3e\u90e8 ,\u8868\u660e\u4ece\u54ea\u5f00\u59cb\u4ece\u54ea\u7ed3\u675f. \u52a0\u4e0a\u540e\u624d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u6570\u636e\u5e27\uff01 \u76ee\u7684\u5730\u5740 MAC \u6e90\u5730\u5740 MAC \u7c7b\u578b \u5e27\u6570\u636e (\u5927\u6982\u7387\u662fIP\u6570\u636e\u62a5) CRC 6 (\u5b57\u8282) 6 2 46~1500 4 \u7c7b\u578b: \u8868\u793a\u5e27\u6570\u636e\u662f\u4ec0\u4e48\u534f\u8bae\u7684\u6570\u636e 0800 IP\u6570\u636e\u5305;0806 ARP\u8bf7\u6c42/\u5e94\u7b54 1> Ethernet\u5c06\u4e00\u4e32\u7535\u4fe1\u53f7\u6784\u6210\u4e86\u4e00\u4e2a\u6570\u636e\u5305 \u79f0\u4f5c ' \u6570\u636e\u5e27 '. 2> Ethernet\u89c4\u5b9a \u6570\u636e\u5e27 = \u62a5\u5934head + \u6570\u636edata head(\u56fa\u5b9a18\u4e2a\u5b57\u8282) = \u6e90\u5730\u5740(6) + \u76ee\u7684\u5730\u5740 (6) + \u6570\u636e\u63cf\u8ff0\u4fe1\u606f(6 \u7c7b\u578b+CRC) data(\u6700\u77ed46\u5b57\u8282,\u6700\u957f1500\u5b57\u8282): \u6570\u636e\u5305\u7684\u5177\u4f53\u5185\u5bb9. \u201c\u6700\u5927\u4f20\u8f93\u5355\u5143MTU\u201d so,\u6570\u636e\u5e27\u6700\u77ed64\u5b57\u8282,\u6700\u957f1518\u5b57\u8282,\u8d85\u8fc7\u6700\u5927\u9650\u5236\u5c31\u5206\u7247(\u5206\u5272\u6210\u51e0\u4e2a\u6570\u636e\u5e27)\u53d1\u9001 3> Ethernet\u89c4\u5b9a\u63a5\u5165\u4e92\u8054\u7f51\u7684\u8bbe\u5907\u90fd\u5fc5\u987b\u5177\u5907(\u4ee5\u592a)\u7f51\u5361,\u7f51\u5361\u4e0a\u6709\u4e00\u4e2amac\u5730\u5740,\u5168\u4e16\u754c\u552f\u4e00 \u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740\u90fd\u662f\u5177\u6709\u552f\u4e00\u6027\u7684mac\u5730\u5740/\u7f51\u5361\u5730\u5740 eg: 00-16-EA-AE-3C-40 Ps: mac\u5730\u5740/\u7269\u7406\u5730\u5740/\u786c\u4ef6\u5730\u5740\u662f\u70e7\u5f55\u5728\u7f51\u5361\u4e0a\u7684\u786c\u4ef6\u8bbe\u5907\u552f\u4e00\u6807\u8bc6. \u957f\u5ea6\u4e3a48\u4f4d\u4e8c\u8fdb\u5236,\u901a\u5e38\u753112\u4f4d16\u8fdb\u5236\u6570\u8868\u793a(\u524d\u516d\u4f4d\u662f\u5382\u5546\u7f16\u53f7,\u540e\u516d\u4f4d\u662f\u6d41\u6c34\u7ebf\u53f7) 4> Ethernet\u4ee5\u592a\u7f51\u534f\u8bae\u91c7\u7528\u7684\u662f\u57fa\u4e8emac\u5730\u5740\u7684 \u5e7f\u64ad \u901a\u4fe1\u65b9\u5f0f. -- \u6709\u53e5\u8c1a\u8bed: \u8ba1\u7b97\u673a\u7684\u901a\u4fe1\u57fa\u672c\u5168\u9760\u543c Ethernet\u7684\u5e7f\u64ad \u00b6 \u6ce8\u610f:\u4ee5\u4e0b\u7684\u9610\u8ff0\u662f\u5728\u53ea\u6709\u6570\u636e\u94fe\u8def\u5c42\u548c\u7269\u7406\u5c42\u65f6\u5c40\u57df\u7f51\u5185\u4e3b\u673a\u4e4b\u95f4\u7684\u901a\u4fe1,\u52a0\u5165\u7f51\u7edc\u5c42\u5c31\u53c8\u4e0d\u4e00\u6837\u5566. \u9700\u6c42,\u4e3b\u673aA\u5411\u4e3b\u673aB\u53d1\u9001\u6570\u636e:(\u7406\u4e00\u7406\u5e7f\u64ad\u7684\u6d41\u7a0b) 1> \u4e3b\u673aA\u5c06\u6570\u636e\u5e27\u7ed9\u4ea4\u6362\u673a,\u4ea4\u6362\u673a\u6839\u636e\u6570\u636e\u5e27\u7684\u62a5\u5934\u4fe1\u606f \\ \u4f1a\u5148\u5c06\u62a5\u5934\u91cc\u7684\u6e90mac\u5730\u5740(\u4e3b\u673aA\u7684mac\u5730\u5740)\u548c\u4e3b\u673aA\u8fde\u63a5\u5230\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u53f7 \\ \u8bb0\u5f55\u5230mac\u5730\u5740\u8868\u4e2d(\u8868\u4e2d\u6709\u7684\u8bdd\u4e0d\u4f1a\u91cd\u590d\u8bb0\u5f55); 2> \u4ea4\u6362\u673a\u518d\u53d6\u51fa\u91cc\u9762\u7684\u76ee\u7684mac\u5730\u5740,\u5bf9\u7167mac\u5730\u5740\u8868(mac\u5730\u5740\u4e0e\u7269\u7406\u63a5\u53e3\u4e4b\u95f4\u7684\u6620\u5c04)\u627e\u5230\u4e3b\u673aB.. 3> \u901a\u8fc7\u8be5\u63a5\u53e3\u5c06\u6570\u636e\u5e27\u4f20\u9012\u7ed9\u4e86B.. 4> \u82e5mac\u5730\u5740\u8868\u91cc\u6ca1\u6709\u76ee\u7684\u5730\u5740(\u4e3b\u673aB\u7684mac\u5730\u5740),\u90a3\u4e48\u4ea4\u6362\u673a\u5c31\u4f1a\u8fdb\u884c\u5e7f\u64ad \u5c06\u6b64\u6570\u636e\u5e27(\u4ee5\u592a\u7f51\u5305)\u53d1\u7ed9\u7f51\u7edc\u91cc\u7684\u6240\u6709\u4e3b\u673a \u4e3b\u673a\u62c6\u5f00\u62a5\u5934\u53d1\u73b0\u76ee\u7684\u5730\u5740\u4e0d\u662f\u81ea\u5df1\u7684mac\u5730\u5740,\u5c31\u4f1a\u5c06\u6b64\u6570\u636e\u5305\u4e22\u5f03\u6389 \u662f\u81ea\u5df1\u7684mac\u5730\u5740\u5c31\u4f1a\u54cd\u5e94(\u5373B\u56de\u5305\u7ed9A,\u4f1a\u7ecf\u8fc7\u4ea4\u6362\u673a),\u4ea4\u6362\u673a\u4f1a\u8bb0\u5f55\u5728mac\u5730\u5740\u8868\u4e2d.. 5> \u901a\u8fc7\u4e0d\u65ad\u7684\u901a\u4fe1,mac\u5730\u5740\u8868\u4f1a\u4e0d\u65ad\u7684\u5b8c\u5584.. -- \u4ea4\u6362\u673a\u7684\u529f\u80fd\u4e4b\u4e00:mac\u5730\u5740\u5b66\u4e60 \u6709\u6548\u7684\u51cf\u8f7b\u4e86\u5e7f\u64ad\u7684\u6b21\u6570 Q: \u6709\u4e86mac\u5730\u5740\u5c31\u80fd\u5b9e\u73b0\u5168\u4e16\u754c\u8ba1\u7b97\u673a\u4e4b\u95f4\u76f8\u4e92\u901a\u4fe1\u5417\uff1f \u4e00\u4e2a\u5c40\u57df\u7f51\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df \u7406\u8bba\u4e0a\u6709\u4e86mac\u5730\u5740\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5168\u4e16\u754c\u8ba1\u7b97\u673a\u4e4b\u95f4\u7684\u901a\u4fe1,\u5168\u4e16\u754c\u7684\u8ba1\u7b97\u673a\u901a\u8fc7\u7269\u7406\u8fde\u63a5\u4ecb\u8d28\u8fdb\u884c\u8fde\u63a5. (\u4e00\u53f0\u62e5\u670970\u4ebf\u4e2a\u63a5\u53e3\u7684\u4ea4\u6362\u673a)\u4f7f\u5168\u4e16\u754c\u7684\u8ba1\u7b97\u673a\u90fd\u5904\u4e8e\u4e00\u4e2a\u7f51\u7edc\u91cc\u9762,\u4efb\u610f\u4e24\u53f0\u4e3b\u673a\u4e4b\u95f4\u90fd\u53ef\u4ee5\u901a\u4fe1. \u5206\u6790\u8fd9\u4e2a\u7406\u8bba\u4e3a\u4f55\u662f\u4e0d\u73b0\u5b9e\u7684: 1> \u4e0d\u53ef\u80fd\u9020\u51fa\u4e00\u4e2a70\u4ebf\u4e2a\u63a5\u53e3\u7684\u4ea4\u6362\u673a\u5c06\u6240\u6709\u8ba1\u7b97\u673a\u90fd\u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185.. 2> \u54ea\u6015\u9020\u51fa\u4e86\u8fd9\u6837\u7684\u4ea4\u6362\u673a,\u543c\u4e00\u6b21,\u6570\u636e\u5305\u5c31\u8981\u590d\u5236(70\u4ebf-1)\u4efd;\u800c\u4e14\u540c\u4e00\u65f6\u95f4,\u5f88\u591a\u5f88\u591a\u53f0\u8ba1\u7b97\u673a\u90fd\u5728\u543c.. \u6570\u636e\u91cf\u592a\u5927\u4e86,\u4ea4\u6362\u673a\u5f88\u84dd\u7684\u5566,\u625b\u4e0d\u4f4f\u7684.mac\u5730\u5740\u8868\u4e5f\u5f97\u5f88\u5927\u5f88\u5927..\u5e7f\u64ad\u98ce\u66b4\u5728\u8fd9\u9762\u524d\u5c31\u662f\u5c0f\u5c0f\u5c0f\u5f1f\u5f1f. \u73b0\u5b9e\u4e2d: 1> \u8ba1\u7b97\u673aABC..\u8fde\u5230\u4ea4\u6362\u673ax\u4e0a\u6784\u6210\u4e86\u4e00\u4e2a\u5c40\u57df\u7f51,\u8ba1\u7b97\u673aDEF..\u8fde\u5230\u4ea4\u6362\u673ay\u4e0a\u6784\u6210\u4e86\u53e6\u4e00\u4e2a\u5c40\u57df\u7f51; \u5f53\u7136\u4ea4\u6362\u673a\u4e0e\u4ea4\u6362\u673a\u53ef\u4ee5\u518d\u8fde\u63a5\u7ec4\u6210\u4e00\u4e2a\u5927\u4e00\u70b9\u7684\u5c40\u57df\u7f51.. 2> \u5728\u5c40\u57df\u7f51\u91cc\u7684\u8ba1\u7b97\u673a\u4e4b\u95f4\u901a\u4fe1\u7528\u5e7f\u64ad,\u9760\u4ee5\u592a\u7f51\u534f\u8bae\u7684\u543c 3> \u4e92\u8054\u7f51\u5c31\u662f\u7531\u8fd9\u4e00\u4e2a\u4e2a\u5f7c\u6b64<\u9694\u79bb>\u7684\u5c0f\u7684\u5c40\u57df\u7f51\u7ec4\u6210\u7684.\u4e00\u4e2a\u5c40\u57df\u7f51\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df. \u4ee5\u592a\u7f51\u5305\u53ea\u80fd\u5728\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\u53d1\u9001,\u8de8\u5e7f\u64ad\u57df\u901a\u4fe1\u7684\u8bdd,\u53ea\u80fd\u901a\u8fc7\u8def\u7531\u8f6c\u53d1.. Ps:\u8def\u7531\u5668\u4e00\u8fb9\u8fde\u63a5\u7684\u662f\u5c40\u57df\u7f51,\u4e00\u8fb9\u4f1a\u8fde\u63a5\u5230\u4e09\u5927\u8fd0\u8425\u5546\u5efa\u8bbe\u7684\u516c\u7f51 (\u91cc\u9762\u6709\u5404\u79cd\u5404\u6837\u7684\u7f51\u7edc\u8bbe\u5907 \u516c\u7f51\u76f8\u5f53\u4e8e\u4e00\u6761\u516c\u5171\u7684\u9ad8\u901f\u516c\u8def).. Q:\u5c40\u57df\u7f51\u91cc\u7684\u901a\u4fe1\u7528\u5e7f\u64ad,\u90a3\u4e48,\u8de8\u5c40\u57df\u7f51\u901a\u4fe1\u5462\uff1f A:\u901a\u4fe1\u5206\u4e3a\u4e24\u7c7b -- \u5c40\u57df\u7f51\u5185 & \u8de8\u5c40\u57df\u7f51 1> \u5728\u4e00\u4e2a\u5c40\u57df\u7f51(LAN)\u5185,\u9760\u7684\u662f\u76ee\u6807mac\u5730\u5740\u627e\u5230\u5bf9\u65b9\u5728\u54ea\u91cc!\u5373\u5728LAN\u5185,\u53ea\u8981\u76ee\u6807MAC\u5730\u5740\u662f\u8c01,\u6570\u636e\u5305\u5c31\u9001\u7ed9\u8c01! mac\u5730\u5740\u53ea\u80fd\u6807\u8bc6\u4e3b\u673a\u5728\u5c40\u57df\u7f51\u7684\u54ea\u91cc.. \u6ce8\u610f\u54e6!mac\u5730\u5740\u51fa\u4e0d\u6765\u5c40\u57df\u7f51,\u53ea\u80fd\u5728\u5c40\u57df\u7f51\u5185\u90e8\u7528..(\uffe3\u25bd\uffe3) \u4e00\u51faLAN\u7f51,\u5c31\u88ab\u780d\u6389. 2> \u82e5\u8de8\u5c40\u57df\u7f51,mac\u5730\u5740\u5c31\u5fc3\u6709\u529b\u800c\u529b\u4e0d\u8db3\u5566. \u5bf9\u76ee\u6807\u4e3b\u673a\u6240\u5728\u7684\u5c40\u57df\u7f51/\u7f51\u6bb5/\u5b50\u7f51\u8fdb\u884c\u6807\u8bc6\u9700\u8981IP\u5730\u5740.(\u6362\u53e5\u8bdd\u6765\u8bf4,IP\u5730\u5740\u662f\u6765\u6807\u8bc6\u4e3b\u673a\u662f\u5904\u4e8e\u54ea\u4e2a\u5c40\u57df\u7f51\u7684) \u518d\u5177\u4f53\u6765\u8bf4,\u5c31\u8981\u6d89\u53ca\u5230\u7f51\u7edc\u5c42\u7684IP\u534f\u8bae\u3001ARP\u534f\u8bae..\u540e\u6587\u4f1a\u6709\u8be6\u7ec6\u7684\u9610\u8ff0.. \u8865\u5145:\u4ea4\u6362\u673a\u7684\u524d\u8eab \u00b6 [\u8865\u5145\u77e5\u8bc6:\u4ea4\u6362\u673a\u7684\u524d\u8eab] \u53c2\u8003\u94fe\u63a5 -- https://mp.weixin.qq.com/s/jiPMUk6zUdOY6eKxAjNDbQ 1> AB\u4e24\u53f0\u7535\u8111\u5404\u5f00\u4e00\u4e2a\u7f51\u53e3\u901a\u8fc7\u7f51\u7ebf\u8fde\u63a5\u901a\u4fe1,\u4ee5\u6b64\u7c7b\u63a8,n\u53f0\u7535\u8111\u76f8\u4e92\u4e24\u4e24\u8fde\u63a5\u9700\u8981n(n-1)/2\u6839\u7f51\u7ebf. \u4f46\u4e00\u53f0\u7535\u8111\u4e5f\u4e0d\u4f1a\u6709\u90a3\u4e48\u591a\u7f51\u53e3. \u800c\u4e14\u7f51\u7ebf\u592a\u957f\u7684\u8bdd,\u8fd8\u8981\u8003\u8651\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7535\u4fe1\u53f7\u7684\u8870\u51cf.. 2> <\u7269\u7406\u5c42>\u7684\u96c6\u7ebf\u5668\u8fd9\u4e00\u4e2d\u95f4\u8bbe\u5907\u7f13\u89e3\u4e86\u8fd9\u4e00\u95ee\u9898. \u4f46A\u53d1\u7ed9D\u7684\u6570\u636e\u8981\u53d1\u7ed9\u96c6\u7ebf\u5668\u4e2d\u7684\u6240\u6709\u4e3b\u673a,\u5b83\u4eec\u4f1a\u6839\u636e\u6570\u636e\u5e27\u4e2d\u7684\u6e90mac\u5730\u5740\u548c\u76ee\u7684mac\u5730\u5740\u8fdb\u884c\u5224\u65ad, \u662f\u81ea\u5df1\u5c31\u63a5\u53d7,\u5426\u5219\u5c31\u5c06\u6570\u636e\u5305\u4e22\u5f03.. \u6570\u636e\u4e0d\u5b89\u5168\u3001\u6d6a\u8d39\u7f51\u7edc\u8d44\u6e90. 3> <\u6570\u636e\u94fe\u8def\u5c42>\u7684\u4ea4\u6362\u673a\u53ef\u4ee5\u5c06\u6570\u636e\u5305\u53ea\u53d1\u7ed9\u76ee\u7684mac\u5730\u5740\u6307\u5b9a\u7684\u90a3\u53f0\u4e3b\u673a. \u5b83\u7684\u5185\u90e8\u6709\u4e00\u5f20mac\u5730\u5740\u8868(mac\u5730\u5740\u4e0e\u4ea4\u6362\u673a\u7aef\u53e3\u7684\u6620\u5c04). \u8868\u4e2d\u82e5\u65e0\u6b64\u6620\u5c04,\u4f1a\u5c06\u6b64\u6570\u636e\u5305\u8fdb\u884c\u5e7f\u64ad\u53d1\u7ed9\u4ea4\u6362\u673a\u7684\u6240\u6709\u4e3b\u673a,\u6839\u636e\u54cd\u5e94\u8bb0\u5f55\u5230mac\u5730\u5740\u8868\u4e2d. \u8be5\u5c0f\u8303\u56f4\u7684\u7f51\u7edc(\u4ee5\u592a\u7f51)\u4e2d\u7684\u673a\u5668\u4e0d\u65ad\u901a\u4fe1,\u8868\u8fdb\u884c\u4e86\u5b8c\u5584\uff01 \u673a\u5668\u8d8a\u6765\u8d8a\u591a,\u4ea4\u6362\u673a\u4e0e\u4ea4\u6362\u673a\u76f8\u4e92\u8fde\u63a5\u53ef\u4ee5\u6682\u65f6\u89e3\u51b3\u7aef\u53e3\u4e0d\u591f\u7528\u7684\u95ee\u9898,\u4f46mac\u5730\u5740\u8868\u4e5f\u4f1a\u8d8a\u6765\u8d8a\u5927. (\u6ce8\u610f\u56fe\u4e2d\u90a3\u6839\u7ea2\u8272\u7684\u7ebf,\u6700\u7ec8\u5728MAC\u5730\u5740\u8868\u4e2d\u53ef\u4e0d\u662f\u4e00\u6761\u8bb0\u5f55,\u800c\u662f\u8981\u628aEFGH\u8fd9\u56db\u53f0\u673a\u5668\u4e0e\u8be5\u7aef\u53e3(\u7aef\u53e36)\u7684\u6620\u5c04\u5168\u90e8\u8bb0\u5f55\u5728\u8868\u4e2d) \u6700\u7ec8,\u4e24\u4e2a\u4ea4\u6362\u673a\u5c06\u5206\u522b\u8bb0\u5f55 A ~ H \u6240\u6709\u673a\u5668\u7684\u6620\u5c04\u8bb0\u5f55. \u5de6\u8fb9\u7684\u4ea4\u6362\u673a | MAC \u5730\u5740 | \u7aef\u53e3 | | :---------------: | :--: | | bb-bb-bb-bb-bb-bb | 1 | | cc-cc-cc-cc-cc-cc | 3 | | aa-aa-aa-aa-aa-aa | 4 | | dd-dd-dd-dd-dd-dd | 5 | | ee-ee-ee-ee-ee-ee | 6 | | ff-ff-ff-ff-ff-ff | 6 | | gg-gg-gg-gg-gg-gg | 6 | | hh-hh-hh-hh-hh-hh | 6 | \u53f3\u8fb9\u7684\u4ea4\u6362\u673a | MAC \u5730\u5740 | \u7aef\u53e3 | | :---------------: | :--: | | bb-bb-bb-bb-bb-bb | 1 | | cc-cc-cc-cc-cc-cc | 1 | | aa-aa-aa-aa-aa-aa | 1 | | dd-dd-dd-dd-dd-dd | 1 | | ee-ee-ee-ee-ee-ee | 2 | | ff-ff-ff-ff-ff-ff | 3 | | gg-gg-gg-gg-gg-gg | 4 | | hh-hh-hh-hh-hh-hh | 6 | \u8fd9\u5728\u53ea\u67098\u53f0\u7535\u8111\u7684\u65f6\u5019\u8fd8\u597d,\u751a\u81f3\u5728\u53ea\u6709\u51e0\u767e\u53f0\u7535\u8111\u7684\u65f6\u5019\u90fd\u8fd8\u597d,\u6240\u4ee5\u8fd9\u79cd\u4ea4\u6362\u673a\u7684\u8bbe\u8ba1\u65b9\u5f0f,\u5df2\u7ecf\u8db3\u8db3\u652f\u6491\u4e00\u9635\u5b50\u4e86. \u4f46\u5f88\u9057\u61be,\u4eba\u662f\u8d2a\u5a6a\u7684\u52a8\u7269,\u5f88\u5feb,\u7535\u8111\u7684\u6570\u91cf\u5c31\u53d1\u5c55\u5230\u51e0\u5343\u3001\u51e0\u4e07\u3001\u51e0\u5341\u4e07.\u4ea4\u6362\u673a\u5df2\u7ecf\u65e0\u6cd5\u8bb0\u5f55\u5982\u6b64\u5e9e\u5927\u7684\u6620\u5c04\u5173\u7cfb\u4e86!!! \u95ee\u9898\u7684\u6839\u672c\u5728\u4e8e,\u8fde\u51fa\u53bb\u7684\u90a3\u6839\u7ea2\u8272\u7684\u7f51\u7ebf,\u540e\u9762\u4e0d\u77e5\u9053\u6709\u591a\u5c11\u4e2a\u8bbe\u5907\u4e0d\u65ad\u5730\u8fde\u63a5\u8fdb\u6765,\u4ece\u800c\u4f7f\u5f97mac\u5730\u5740\u8868\u8d8a\u6765\u8d8a\u5927. [\u627f\u4e0a(\u6570\u636e\u94fe\u63a5\u5c42)\u542f\u4e0b(\u7f51\u7edc\u5c42)] Q: \u6211\u4eec\u53ef\u4e0d\u53ef\u4ee5\u8ba9\u90a3\u6839\u7ea2\u8272\u7684\u7f51\u7ebf,\u63a5\u5165\u4e00\u4e2a\u65b0\u7684\u8bbe\u5907,\u8fd9\u4e2a\u8bbe\u5907\u5c31\u8ddf\u7535\u8111\u4e00\u6837\u6709\u81ea\u5df1\u72ec\u7acb\u7684 MAC \u5730\u5740 \u800c\u4e14\u540c\u65f6\u8fd8\u80fd\u5e2e\u6211\u4eec\u628a\u6570\u636e\u5305\u505a\u4e00\u6b21\u8f6c\u53d1\u5462\uff1f A: \u8fd9\u4e2a\u8bbe\u5907\u5c31\u662f\u8def\u7531\u5668,\u5b83\u7684\u529f\u80fd\u5c31\u662f,\u4f5c\u4e3a\u4e00\u53f0\u72ec\u7acb\u7684\u62e5\u6709 MAC \u5730\u5740\u7684\u8bbe\u5907,\u5e76\u4e14\u53ef\u4ee5\u5e2e\u6211\u628a\u6570\u636e\u5305\u505a\u4e00\u6b21\u8f6c\u53d1 \u6211\u4eec\u628a\u5b83\u5b9a\u5728\u4e86\u7f51\u7edc\u5c42. \u6ce8\u610f: \u8def\u7531\u5668\u7684\u6bcf\u4e00\u4e2a\u7aef\u53e3,\u90fd\u6709\u72ec\u7acb\u7684MAC\u5730\u5740","title":"\u7f51\u7edc\u63a5\u53e3\u5c42"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/#_1","text":"\u628a\u6570\u636e\u5168\u90e8\u8f6c\u6362\u6210\u7535\u4fe1\u53f7/\u6bd4\u7279\u4f4d 010111010. \u7269\u7406\u5c42\u8fde\u63a5\u4e0d\u540c\u7684\u7f51\u7edc\u8bbe\u5907(\u5149\u7ea4\u3001\u6d77\u5e95\u7535\u7f06\u7b49)\u4f20\u8f9301011\u7684\u9ad8\u4f4e\u7535\u5e73\u4fe1\u53f7. \u6ce8\u610f : \u5355\u7eaf\u7684\u4e8c\u8fdb\u5236\u657001011\u662f\u6ca1\u6709\u610f\u4e49\u7684 \u53ea\u9700\u8981\u4e86\u89e3\u7684\u77e5\u8bc6\u70b9: \u5149\u7ea4\u3001\u6d77\u5e95\u7535\u7f06\u3001\u53cc\u7ede\u7ebf\u90fd\u662f\u7269\u7406\u5c42\u5e38\u89c1\u7684\u4f20\u8f93\u4ecb\u8d28. \u8fd9\u6570\u636e\u7535\u8def\u4e00\u822c\u6709 \u4e24\u4e2a\u4fe1\u9053 (\u5f80\u4e00\u4e2a\u65b9\u5411\u4f20\u8f93\u4fe1\u606f\u7684\u5a92\u4f53), \u5206\u522b\u7528\u4e8e\u53d1\u9001\u548c\u63a5\u6536; \u884d\u751f\u51fa\u4e86 \u5168\u53cc\u5de5\u901a\u4fe1\u4fe1\u9053\u3001\u534a\u53cc\u5de5\u3001\u5355\u5de5; \u4e3a\u4e86\u63d0\u9ad8\u4fe1\u9053\u7684\u5229\u7528\u7387, \u53ef\u4ee5\u4f7f\u7528\u5206\u7528-\u590d\u7528\u7684\u6280\u672f.","title":"\u7269\u7406\u5c42"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/#_2","text":"","title":"\u6570\u636e\u94fe\u8def\u5c42"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/#_3","text":"\u6570\u636e\u94fe\u8def\u5c42\u4e09\u4e2a\u91cd\u8981\u529f\u80fd: \u5c01\u88c5\u6210\u5e27(\u5e27\u9996\u90e8+\u5e27\u6570\u636e+\u5e27\u5c3e\u90e8)\u3001\u900f\u660e\u4f20\u8f93\u3001\u5dee\u9519\u68c0\u6d4b 1> \u5c01\u88c5\u6210\u5e27 : \u5b8c\u6574\u7684\u6570\u636e\u5e27 = \u5e27\u9996\u90e8+\u5e27\u6570\u636e(\u4ee5\u592a\u7f51\u6570\u636e\u5e27)+\u5e27\u5c3e\u90e8 2> \u900f\u660e\u4f20\u8f93 : \u5e27\u9996\u5c3e\u90e8\u90fd\u662f\u7279\u5b9a\u7684\u63a7\u5236\u5b57\u7b26(\u6bd4\u7279\u6d41), \u82e5\u5728\u5e27\u6570\u636e\u4e2d\u51fa\u73b0\u4e86,\u9700\u8981\u8f6c\u4e49 3> \u5dee\u9519\u68c0\u6d4b : A. \u5947\u5076\u6821\u9a8c\u6cd5(\u76f8\u52a0\u82e5\u5947\u6570\u6dfb\u52a0\u6821\u9a8c\u4f4d1,\u82e5\u5076\u6570\u6dfb\u52a0\u6821\u9a8c\u4f4d0),\u540c\u65f6\u9519\u4e24\u4e2a\u5c31\u62c9\u8de8 B. \u5faa\u73af\u5197\u4f59\u68c0\u9a8c\u7801 CRC \uff01\u591a\u9879\u5f0f \u5f02\u6216\u64cd\u4f5c(\u5f02\u4e3a1 \u540c\u4e3a0) \u4e3e\u6817: \u5047\u8bbe\u6709\u6570\u636e1101011011\u9700\u8981\u4f20\u8f93, \u91c7\u7528CRC\u7684\u751f\u6210\u591a\u9879\u5f0f\u4e3aP(X)=X^4+X+1, \u8bf7\u8ba1\u7b97\u6dfb\u52a0\u4e86CRC\u6821\u9a8c\u7801\u4e4b\u540e\u7684\u6570\u636e. \u89e3: \u591a\u9879\u5f0f\u4f4d\u4e32\u4e3a --> 10011, \u6a21\u4e8c\u9664\u6cd5\u5f97\u5230\u4f59\u65701110, \u6240\u4ee5\u5f97\u5230\u7ed3\u679c11010110111110 \u6ce8\u610f: \u7269\u7406\u5c42\u53ea\u7ba1\u6bd4\u7279\u6d41\u7684\u4f20\u8f93, \u65e0\u6cd5\u63a7\u5236\u662f\u5426\u51fa\u9519 \u6570\u636e\u94fe\u8def\u5c42\u53ea\u8fdb\u884c\u6570\u636e\u7684\u68c0\u6d4b, \u4e0d\u8fdb\u884c\u7ea0\u6b63\u6709\u9519\u4f1a\u88ab\u4e22\u5f03","title":"\u4e09\u5927\u529f\u80fd(\u4e86\u89e3)"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/#_4","text":"Ethernet \u4ee5\u592a\u7f51\u534f\u8bae \u89c4\u5b9a\u4e86\u6570\u636e\u5e27\u5728\u6570\u636e\u94fe\u8def\u5c42\u4e2d\u7684\u4f20\u8f93\u6807\u51c6.. \u4ee5\u592a\u7f51\u534f\u8bae\u6ce8\u610f\u4e09\u70b9: \u5c40\u57df\u7f51\u6280\u672f \u3001 \u5e94\u7528\u4e8e\u6570\u636e\u94fe\u8def\u5c42 \u3001 \u5b9e\u73b0\u4e86\u6570\u636e\u5e27\u5728\u76f8\u90bb\u8bbe\u5907\u4e4b\u95f4\u7684\u4f20\u8f93 \u4ee5\u592a\u7f51\u534f\u8bae\u5c06\u4e00\u4e32\u4e8c\u8fdb\u5236\u6570\u8fdb\u884c\u4e86\u5206\u6bb5/\u5206\u7ec4.\u6b64\u534f\u8bae\u89c4\u5b9a\u4e86\u7535\u4fe1\u53f7\u591a\u5c11\u4f4d\u4e00\u7ec4,\u6bcf\u7ec4\u4ec0\u4e48\u610f\u601d. ( \u8fd9\u662f\u7ad9\u5728\u89e3\u5305\u7684\u89d2\u5ea6\u8bf4\u7684 .. <\u6570\u636e\u4f9d\u6b21\u5c01\u5305 -- \u6bd4\u7279\u6d41\u4f20\u8f93 -- \u6570\u636e\u4f9d\u6b21\u89e3\u5305>) \u4ee5\u592a\u7f51\u6570\u636e\u5e27\u7684\u683c\u5f0f\u5982\u4e0b : \u6ce8\u610f\u54e6,\u8fd8\u4f1a\u7ed9\u8fd9\u4e2a\u6570\u636e\u5e27\u7684\u9996\u5c3e\u6dfb\u52a0 \u5e27\u9996\u90e8 \u548c \u5e27\u5c3e\u90e8 ,\u8868\u660e\u4ece\u54ea\u5f00\u59cb\u4ece\u54ea\u7ed3\u675f. \u52a0\u4e0a\u540e\u624d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u6570\u636e\u5e27\uff01 \u76ee\u7684\u5730\u5740 MAC \u6e90\u5730\u5740 MAC \u7c7b\u578b \u5e27\u6570\u636e (\u5927\u6982\u7387\u662fIP\u6570\u636e\u62a5) CRC 6 (\u5b57\u8282) 6 2 46~1500 4 \u7c7b\u578b: \u8868\u793a\u5e27\u6570\u636e\u662f\u4ec0\u4e48\u534f\u8bae\u7684\u6570\u636e 0800 IP\u6570\u636e\u5305;0806 ARP\u8bf7\u6c42/\u5e94\u7b54 1> Ethernet\u5c06\u4e00\u4e32\u7535\u4fe1\u53f7\u6784\u6210\u4e86\u4e00\u4e2a\u6570\u636e\u5305 \u79f0\u4f5c ' \u6570\u636e\u5e27 '. 2> Ethernet\u89c4\u5b9a \u6570\u636e\u5e27 = \u62a5\u5934head + \u6570\u636edata head(\u56fa\u5b9a18\u4e2a\u5b57\u8282) = \u6e90\u5730\u5740(6) + \u76ee\u7684\u5730\u5740 (6) + \u6570\u636e\u63cf\u8ff0\u4fe1\u606f(6 \u7c7b\u578b+CRC) data(\u6700\u77ed46\u5b57\u8282,\u6700\u957f1500\u5b57\u8282): \u6570\u636e\u5305\u7684\u5177\u4f53\u5185\u5bb9. \u201c\u6700\u5927\u4f20\u8f93\u5355\u5143MTU\u201d so,\u6570\u636e\u5e27\u6700\u77ed64\u5b57\u8282,\u6700\u957f1518\u5b57\u8282,\u8d85\u8fc7\u6700\u5927\u9650\u5236\u5c31\u5206\u7247(\u5206\u5272\u6210\u51e0\u4e2a\u6570\u636e\u5e27)\u53d1\u9001 3> Ethernet\u89c4\u5b9a\u63a5\u5165\u4e92\u8054\u7f51\u7684\u8bbe\u5907\u90fd\u5fc5\u987b\u5177\u5907(\u4ee5\u592a)\u7f51\u5361,\u7f51\u5361\u4e0a\u6709\u4e00\u4e2amac\u5730\u5740,\u5168\u4e16\u754c\u552f\u4e00 \u6e90\u5730\u5740\u548c\u76ee\u7684\u5730\u5740\u90fd\u662f\u5177\u6709\u552f\u4e00\u6027\u7684mac\u5730\u5740/\u7f51\u5361\u5730\u5740 eg: 00-16-EA-AE-3C-40 Ps: mac\u5730\u5740/\u7269\u7406\u5730\u5740/\u786c\u4ef6\u5730\u5740\u662f\u70e7\u5f55\u5728\u7f51\u5361\u4e0a\u7684\u786c\u4ef6\u8bbe\u5907\u552f\u4e00\u6807\u8bc6. \u957f\u5ea6\u4e3a48\u4f4d\u4e8c\u8fdb\u5236,\u901a\u5e38\u753112\u4f4d16\u8fdb\u5236\u6570\u8868\u793a(\u524d\u516d\u4f4d\u662f\u5382\u5546\u7f16\u53f7,\u540e\u516d\u4f4d\u662f\u6d41\u6c34\u7ebf\u53f7) 4> Ethernet\u4ee5\u592a\u7f51\u534f\u8bae\u91c7\u7528\u7684\u662f\u57fa\u4e8emac\u5730\u5740\u7684 \u5e7f\u64ad \u901a\u4fe1\u65b9\u5f0f. -- \u6709\u53e5\u8c1a\u8bed: \u8ba1\u7b97\u673a\u7684\u901a\u4fe1\u57fa\u672c\u5168\u9760\u543c","title":"\u4ee5\u592a\u7f51\u534f\u8bae"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/#ethernet","text":"\u6ce8\u610f:\u4ee5\u4e0b\u7684\u9610\u8ff0\u662f\u5728\u53ea\u6709\u6570\u636e\u94fe\u8def\u5c42\u548c\u7269\u7406\u5c42\u65f6\u5c40\u57df\u7f51\u5185\u4e3b\u673a\u4e4b\u95f4\u7684\u901a\u4fe1,\u52a0\u5165\u7f51\u7edc\u5c42\u5c31\u53c8\u4e0d\u4e00\u6837\u5566. \u9700\u6c42,\u4e3b\u673aA\u5411\u4e3b\u673aB\u53d1\u9001\u6570\u636e:(\u7406\u4e00\u7406\u5e7f\u64ad\u7684\u6d41\u7a0b) 1> \u4e3b\u673aA\u5c06\u6570\u636e\u5e27\u7ed9\u4ea4\u6362\u673a,\u4ea4\u6362\u673a\u6839\u636e\u6570\u636e\u5e27\u7684\u62a5\u5934\u4fe1\u606f \\ \u4f1a\u5148\u5c06\u62a5\u5934\u91cc\u7684\u6e90mac\u5730\u5740(\u4e3b\u673aA\u7684mac\u5730\u5740)\u548c\u4e3b\u673aA\u8fde\u63a5\u5230\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u53f7 \\ \u8bb0\u5f55\u5230mac\u5730\u5740\u8868\u4e2d(\u8868\u4e2d\u6709\u7684\u8bdd\u4e0d\u4f1a\u91cd\u590d\u8bb0\u5f55); 2> \u4ea4\u6362\u673a\u518d\u53d6\u51fa\u91cc\u9762\u7684\u76ee\u7684mac\u5730\u5740,\u5bf9\u7167mac\u5730\u5740\u8868(mac\u5730\u5740\u4e0e\u7269\u7406\u63a5\u53e3\u4e4b\u95f4\u7684\u6620\u5c04)\u627e\u5230\u4e3b\u673aB.. 3> \u901a\u8fc7\u8be5\u63a5\u53e3\u5c06\u6570\u636e\u5e27\u4f20\u9012\u7ed9\u4e86B.. 4> \u82e5mac\u5730\u5740\u8868\u91cc\u6ca1\u6709\u76ee\u7684\u5730\u5740(\u4e3b\u673aB\u7684mac\u5730\u5740),\u90a3\u4e48\u4ea4\u6362\u673a\u5c31\u4f1a\u8fdb\u884c\u5e7f\u64ad \u5c06\u6b64\u6570\u636e\u5e27(\u4ee5\u592a\u7f51\u5305)\u53d1\u7ed9\u7f51\u7edc\u91cc\u7684\u6240\u6709\u4e3b\u673a \u4e3b\u673a\u62c6\u5f00\u62a5\u5934\u53d1\u73b0\u76ee\u7684\u5730\u5740\u4e0d\u662f\u81ea\u5df1\u7684mac\u5730\u5740,\u5c31\u4f1a\u5c06\u6b64\u6570\u636e\u5305\u4e22\u5f03\u6389 \u662f\u81ea\u5df1\u7684mac\u5730\u5740\u5c31\u4f1a\u54cd\u5e94(\u5373B\u56de\u5305\u7ed9A,\u4f1a\u7ecf\u8fc7\u4ea4\u6362\u673a),\u4ea4\u6362\u673a\u4f1a\u8bb0\u5f55\u5728mac\u5730\u5740\u8868\u4e2d.. 5> \u901a\u8fc7\u4e0d\u65ad\u7684\u901a\u4fe1,mac\u5730\u5740\u8868\u4f1a\u4e0d\u65ad\u7684\u5b8c\u5584.. -- \u4ea4\u6362\u673a\u7684\u529f\u80fd\u4e4b\u4e00:mac\u5730\u5740\u5b66\u4e60 \u6709\u6548\u7684\u51cf\u8f7b\u4e86\u5e7f\u64ad\u7684\u6b21\u6570 Q: \u6709\u4e86mac\u5730\u5740\u5c31\u80fd\u5b9e\u73b0\u5168\u4e16\u754c\u8ba1\u7b97\u673a\u4e4b\u95f4\u76f8\u4e92\u901a\u4fe1\u5417\uff1f \u4e00\u4e2a\u5c40\u57df\u7f51\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df \u7406\u8bba\u4e0a\u6709\u4e86mac\u5730\u5740\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5168\u4e16\u754c\u8ba1\u7b97\u673a\u4e4b\u95f4\u7684\u901a\u4fe1,\u5168\u4e16\u754c\u7684\u8ba1\u7b97\u673a\u901a\u8fc7\u7269\u7406\u8fde\u63a5\u4ecb\u8d28\u8fdb\u884c\u8fde\u63a5. (\u4e00\u53f0\u62e5\u670970\u4ebf\u4e2a\u63a5\u53e3\u7684\u4ea4\u6362\u673a)\u4f7f\u5168\u4e16\u754c\u7684\u8ba1\u7b97\u673a\u90fd\u5904\u4e8e\u4e00\u4e2a\u7f51\u7edc\u91cc\u9762,\u4efb\u610f\u4e24\u53f0\u4e3b\u673a\u4e4b\u95f4\u90fd\u53ef\u4ee5\u901a\u4fe1. \u5206\u6790\u8fd9\u4e2a\u7406\u8bba\u4e3a\u4f55\u662f\u4e0d\u73b0\u5b9e\u7684: 1> \u4e0d\u53ef\u80fd\u9020\u51fa\u4e00\u4e2a70\u4ebf\u4e2a\u63a5\u53e3\u7684\u4ea4\u6362\u673a\u5c06\u6240\u6709\u8ba1\u7b97\u673a\u90fd\u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185.. 2> \u54ea\u6015\u9020\u51fa\u4e86\u8fd9\u6837\u7684\u4ea4\u6362\u673a,\u543c\u4e00\u6b21,\u6570\u636e\u5305\u5c31\u8981\u590d\u5236(70\u4ebf-1)\u4efd;\u800c\u4e14\u540c\u4e00\u65f6\u95f4,\u5f88\u591a\u5f88\u591a\u53f0\u8ba1\u7b97\u673a\u90fd\u5728\u543c.. \u6570\u636e\u91cf\u592a\u5927\u4e86,\u4ea4\u6362\u673a\u5f88\u84dd\u7684\u5566,\u625b\u4e0d\u4f4f\u7684.mac\u5730\u5740\u8868\u4e5f\u5f97\u5f88\u5927\u5f88\u5927..\u5e7f\u64ad\u98ce\u66b4\u5728\u8fd9\u9762\u524d\u5c31\u662f\u5c0f\u5c0f\u5c0f\u5f1f\u5f1f. \u73b0\u5b9e\u4e2d: 1> \u8ba1\u7b97\u673aABC..\u8fde\u5230\u4ea4\u6362\u673ax\u4e0a\u6784\u6210\u4e86\u4e00\u4e2a\u5c40\u57df\u7f51,\u8ba1\u7b97\u673aDEF..\u8fde\u5230\u4ea4\u6362\u673ay\u4e0a\u6784\u6210\u4e86\u53e6\u4e00\u4e2a\u5c40\u57df\u7f51; \u5f53\u7136\u4ea4\u6362\u673a\u4e0e\u4ea4\u6362\u673a\u53ef\u4ee5\u518d\u8fde\u63a5\u7ec4\u6210\u4e00\u4e2a\u5927\u4e00\u70b9\u7684\u5c40\u57df\u7f51.. 2> \u5728\u5c40\u57df\u7f51\u91cc\u7684\u8ba1\u7b97\u673a\u4e4b\u95f4\u901a\u4fe1\u7528\u5e7f\u64ad,\u9760\u4ee5\u592a\u7f51\u534f\u8bae\u7684\u543c 3> \u4e92\u8054\u7f51\u5c31\u662f\u7531\u8fd9\u4e00\u4e2a\u4e2a\u5f7c\u6b64<\u9694\u79bb>\u7684\u5c0f\u7684\u5c40\u57df\u7f51\u7ec4\u6210\u7684.\u4e00\u4e2a\u5c40\u57df\u7f51\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df. \u4ee5\u592a\u7f51\u5305\u53ea\u80fd\u5728\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\u53d1\u9001,\u8de8\u5e7f\u64ad\u57df\u901a\u4fe1\u7684\u8bdd,\u53ea\u80fd\u901a\u8fc7\u8def\u7531\u8f6c\u53d1.. Ps:\u8def\u7531\u5668\u4e00\u8fb9\u8fde\u63a5\u7684\u662f\u5c40\u57df\u7f51,\u4e00\u8fb9\u4f1a\u8fde\u63a5\u5230\u4e09\u5927\u8fd0\u8425\u5546\u5efa\u8bbe\u7684\u516c\u7f51 (\u91cc\u9762\u6709\u5404\u79cd\u5404\u6837\u7684\u7f51\u7edc\u8bbe\u5907 \u516c\u7f51\u76f8\u5f53\u4e8e\u4e00\u6761\u516c\u5171\u7684\u9ad8\u901f\u516c\u8def).. Q:\u5c40\u57df\u7f51\u91cc\u7684\u901a\u4fe1\u7528\u5e7f\u64ad,\u90a3\u4e48,\u8de8\u5c40\u57df\u7f51\u901a\u4fe1\u5462\uff1f A:\u901a\u4fe1\u5206\u4e3a\u4e24\u7c7b -- \u5c40\u57df\u7f51\u5185 & \u8de8\u5c40\u57df\u7f51 1> \u5728\u4e00\u4e2a\u5c40\u57df\u7f51(LAN)\u5185,\u9760\u7684\u662f\u76ee\u6807mac\u5730\u5740\u627e\u5230\u5bf9\u65b9\u5728\u54ea\u91cc!\u5373\u5728LAN\u5185,\u53ea\u8981\u76ee\u6807MAC\u5730\u5740\u662f\u8c01,\u6570\u636e\u5305\u5c31\u9001\u7ed9\u8c01! mac\u5730\u5740\u53ea\u80fd\u6807\u8bc6\u4e3b\u673a\u5728\u5c40\u57df\u7f51\u7684\u54ea\u91cc.. \u6ce8\u610f\u54e6!mac\u5730\u5740\u51fa\u4e0d\u6765\u5c40\u57df\u7f51,\u53ea\u80fd\u5728\u5c40\u57df\u7f51\u5185\u90e8\u7528..(\uffe3\u25bd\uffe3) \u4e00\u51faLAN\u7f51,\u5c31\u88ab\u780d\u6389. 2> \u82e5\u8de8\u5c40\u57df\u7f51,mac\u5730\u5740\u5c31\u5fc3\u6709\u529b\u800c\u529b\u4e0d\u8db3\u5566. \u5bf9\u76ee\u6807\u4e3b\u673a\u6240\u5728\u7684\u5c40\u57df\u7f51/\u7f51\u6bb5/\u5b50\u7f51\u8fdb\u884c\u6807\u8bc6\u9700\u8981IP\u5730\u5740.(\u6362\u53e5\u8bdd\u6765\u8bf4,IP\u5730\u5740\u662f\u6765\u6807\u8bc6\u4e3b\u673a\u662f\u5904\u4e8e\u54ea\u4e2a\u5c40\u57df\u7f51\u7684) \u518d\u5177\u4f53\u6765\u8bf4,\u5c31\u8981\u6d89\u53ca\u5230\u7f51\u7edc\u5c42\u7684IP\u534f\u8bae\u3001ARP\u534f\u8bae..\u540e\u6587\u4f1a\u6709\u8be6\u7ec6\u7684\u9610\u8ff0..","title":"Ethernet\u7684\u5e7f\u64ad"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/4_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%B1%82/#_5","text":"[\u8865\u5145\u77e5\u8bc6:\u4ea4\u6362\u673a\u7684\u524d\u8eab] \u53c2\u8003\u94fe\u63a5 -- https://mp.weixin.qq.com/s/jiPMUk6zUdOY6eKxAjNDbQ 1> AB\u4e24\u53f0\u7535\u8111\u5404\u5f00\u4e00\u4e2a\u7f51\u53e3\u901a\u8fc7\u7f51\u7ebf\u8fde\u63a5\u901a\u4fe1,\u4ee5\u6b64\u7c7b\u63a8,n\u53f0\u7535\u8111\u76f8\u4e92\u4e24\u4e24\u8fde\u63a5\u9700\u8981n(n-1)/2\u6839\u7f51\u7ebf. \u4f46\u4e00\u53f0\u7535\u8111\u4e5f\u4e0d\u4f1a\u6709\u90a3\u4e48\u591a\u7f51\u53e3. \u800c\u4e14\u7f51\u7ebf\u592a\u957f\u7684\u8bdd,\u8fd8\u8981\u8003\u8651\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7535\u4fe1\u53f7\u7684\u8870\u51cf.. 2> <\u7269\u7406\u5c42>\u7684\u96c6\u7ebf\u5668\u8fd9\u4e00\u4e2d\u95f4\u8bbe\u5907\u7f13\u89e3\u4e86\u8fd9\u4e00\u95ee\u9898. \u4f46A\u53d1\u7ed9D\u7684\u6570\u636e\u8981\u53d1\u7ed9\u96c6\u7ebf\u5668\u4e2d\u7684\u6240\u6709\u4e3b\u673a,\u5b83\u4eec\u4f1a\u6839\u636e\u6570\u636e\u5e27\u4e2d\u7684\u6e90mac\u5730\u5740\u548c\u76ee\u7684mac\u5730\u5740\u8fdb\u884c\u5224\u65ad, \u662f\u81ea\u5df1\u5c31\u63a5\u53d7,\u5426\u5219\u5c31\u5c06\u6570\u636e\u5305\u4e22\u5f03.. \u6570\u636e\u4e0d\u5b89\u5168\u3001\u6d6a\u8d39\u7f51\u7edc\u8d44\u6e90. 3> <\u6570\u636e\u94fe\u8def\u5c42>\u7684\u4ea4\u6362\u673a\u53ef\u4ee5\u5c06\u6570\u636e\u5305\u53ea\u53d1\u7ed9\u76ee\u7684mac\u5730\u5740\u6307\u5b9a\u7684\u90a3\u53f0\u4e3b\u673a. \u5b83\u7684\u5185\u90e8\u6709\u4e00\u5f20mac\u5730\u5740\u8868(mac\u5730\u5740\u4e0e\u4ea4\u6362\u673a\u7aef\u53e3\u7684\u6620\u5c04). \u8868\u4e2d\u82e5\u65e0\u6b64\u6620\u5c04,\u4f1a\u5c06\u6b64\u6570\u636e\u5305\u8fdb\u884c\u5e7f\u64ad\u53d1\u7ed9\u4ea4\u6362\u673a\u7684\u6240\u6709\u4e3b\u673a,\u6839\u636e\u54cd\u5e94\u8bb0\u5f55\u5230mac\u5730\u5740\u8868\u4e2d. \u8be5\u5c0f\u8303\u56f4\u7684\u7f51\u7edc(\u4ee5\u592a\u7f51)\u4e2d\u7684\u673a\u5668\u4e0d\u65ad\u901a\u4fe1,\u8868\u8fdb\u884c\u4e86\u5b8c\u5584\uff01 \u673a\u5668\u8d8a\u6765\u8d8a\u591a,\u4ea4\u6362\u673a\u4e0e\u4ea4\u6362\u673a\u76f8\u4e92\u8fde\u63a5\u53ef\u4ee5\u6682\u65f6\u89e3\u51b3\u7aef\u53e3\u4e0d\u591f\u7528\u7684\u95ee\u9898,\u4f46mac\u5730\u5740\u8868\u4e5f\u4f1a\u8d8a\u6765\u8d8a\u5927. (\u6ce8\u610f\u56fe\u4e2d\u90a3\u6839\u7ea2\u8272\u7684\u7ebf,\u6700\u7ec8\u5728MAC\u5730\u5740\u8868\u4e2d\u53ef\u4e0d\u662f\u4e00\u6761\u8bb0\u5f55,\u800c\u662f\u8981\u628aEFGH\u8fd9\u56db\u53f0\u673a\u5668\u4e0e\u8be5\u7aef\u53e3(\u7aef\u53e36)\u7684\u6620\u5c04\u5168\u90e8\u8bb0\u5f55\u5728\u8868\u4e2d) \u6700\u7ec8,\u4e24\u4e2a\u4ea4\u6362\u673a\u5c06\u5206\u522b\u8bb0\u5f55 A ~ H \u6240\u6709\u673a\u5668\u7684\u6620\u5c04\u8bb0\u5f55. \u5de6\u8fb9\u7684\u4ea4\u6362\u673a | MAC \u5730\u5740 | \u7aef\u53e3 | | :---------------: | :--: | | bb-bb-bb-bb-bb-bb | 1 | | cc-cc-cc-cc-cc-cc | 3 | | aa-aa-aa-aa-aa-aa | 4 | | dd-dd-dd-dd-dd-dd | 5 | | ee-ee-ee-ee-ee-ee | 6 | | ff-ff-ff-ff-ff-ff | 6 | | gg-gg-gg-gg-gg-gg | 6 | | hh-hh-hh-hh-hh-hh | 6 | \u53f3\u8fb9\u7684\u4ea4\u6362\u673a | MAC \u5730\u5740 | \u7aef\u53e3 | | :---------------: | :--: | | bb-bb-bb-bb-bb-bb | 1 | | cc-cc-cc-cc-cc-cc | 1 | | aa-aa-aa-aa-aa-aa | 1 | | dd-dd-dd-dd-dd-dd | 1 | | ee-ee-ee-ee-ee-ee | 2 | | ff-ff-ff-ff-ff-ff | 3 | | gg-gg-gg-gg-gg-gg | 4 | | hh-hh-hh-hh-hh-hh | 6 | \u8fd9\u5728\u53ea\u67098\u53f0\u7535\u8111\u7684\u65f6\u5019\u8fd8\u597d,\u751a\u81f3\u5728\u53ea\u6709\u51e0\u767e\u53f0\u7535\u8111\u7684\u65f6\u5019\u90fd\u8fd8\u597d,\u6240\u4ee5\u8fd9\u79cd\u4ea4\u6362\u673a\u7684\u8bbe\u8ba1\u65b9\u5f0f,\u5df2\u7ecf\u8db3\u8db3\u652f\u6491\u4e00\u9635\u5b50\u4e86. \u4f46\u5f88\u9057\u61be,\u4eba\u662f\u8d2a\u5a6a\u7684\u52a8\u7269,\u5f88\u5feb,\u7535\u8111\u7684\u6570\u91cf\u5c31\u53d1\u5c55\u5230\u51e0\u5343\u3001\u51e0\u4e07\u3001\u51e0\u5341\u4e07.\u4ea4\u6362\u673a\u5df2\u7ecf\u65e0\u6cd5\u8bb0\u5f55\u5982\u6b64\u5e9e\u5927\u7684\u6620\u5c04\u5173\u7cfb\u4e86!!! \u95ee\u9898\u7684\u6839\u672c\u5728\u4e8e,\u8fde\u51fa\u53bb\u7684\u90a3\u6839\u7ea2\u8272\u7684\u7f51\u7ebf,\u540e\u9762\u4e0d\u77e5\u9053\u6709\u591a\u5c11\u4e2a\u8bbe\u5907\u4e0d\u65ad\u5730\u8fde\u63a5\u8fdb\u6765,\u4ece\u800c\u4f7f\u5f97mac\u5730\u5740\u8868\u8d8a\u6765\u8d8a\u5927. [\u627f\u4e0a(\u6570\u636e\u94fe\u63a5\u5c42)\u542f\u4e0b(\u7f51\u7edc\u5c42)] Q: \u6211\u4eec\u53ef\u4e0d\u53ef\u4ee5\u8ba9\u90a3\u6839\u7ea2\u8272\u7684\u7f51\u7ebf,\u63a5\u5165\u4e00\u4e2a\u65b0\u7684\u8bbe\u5907,\u8fd9\u4e2a\u8bbe\u5907\u5c31\u8ddf\u7535\u8111\u4e00\u6837\u6709\u81ea\u5df1\u72ec\u7acb\u7684 MAC \u5730\u5740 \u800c\u4e14\u540c\u65f6\u8fd8\u80fd\u5e2e\u6211\u4eec\u628a\u6570\u636e\u5305\u505a\u4e00\u6b21\u8f6c\u53d1\u5462\uff1f A: \u8fd9\u4e2a\u8bbe\u5907\u5c31\u662f\u8def\u7531\u5668,\u5b83\u7684\u529f\u80fd\u5c31\u662f,\u4f5c\u4e3a\u4e00\u53f0\u72ec\u7acb\u7684\u62e5\u6709 MAC \u5730\u5740\u7684\u8bbe\u5907,\u5e76\u4e14\u53ef\u4ee5\u5e2e\u6211\u628a\u6570\u636e\u5305\u505a\u4e00\u6b21\u8f6c\u53d1 \u6211\u4eec\u628a\u5b83\u5b9a\u5728\u4e86\u7f51\u7edc\u5c42. \u6ce8\u610f: \u8def\u7531\u5668\u7684\u6bcf\u4e00\u4e2a\u7aef\u53e3,\u90fd\u6709\u72ec\u7acb\u7684MAC\u5730\u5740","title":"\u8865\u5145:\u4ea4\u6362\u673a\u7684\u524d\u8eab"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/","text":"\u5f15\u8a00 \u00b6 IP\u5730\u5740+mac\u5730\u5740\u53ef\u4ee5\u6807\u8bc6\u5168\u4e16\u754c\u8303\u56f4\u5185\u552f\u4e00\u4e00\u53f0\u8ba1\u7b97\u673a. IP\u5730\u5740\u627e\u5230\u5bf9\u65b9\u4e3b\u673a\u5904\u4e8e\u54ea\u4e2a\u5c40\u57df\u7f51,mac\u5730\u5740\u627e\u5230\u5bf9\u65b9\u4e3b\u673a\u5904\u4e8e\u8be5\u7f51\u7edc\u7684\u54ea\u91cc.. \u56e0\u4e3a\u6709ARP\u534f\u8bae\u7684\u5b58\u5728, ARP\u4f1a\u5c06ip\u5730\u5740\u8f6c\u6362\u6210mac\u5730\u5740 (\u8981\u4e48\u662f\u5c40\u57df\u7f51\u5185\u4e00\u53f0\u8ba1\u7b97\u673a\u7684mac\u5730\u5740,\u8981\u4e48\u662f\u7f51\u5173\u7684mac\u5730\u5740,\u4e0d\u80fd\u4e5f\u4e0d\u4f1a\u662f\u5728\u516c\u7f51\u4e2d\u7684\u8bbe\u5907\u7684mac\u5730\u5740) \u7f51\u7edc\u5c42(IP\u534f\u8bae)\u672c\u8eab\u6ca1\u6709\u4f20\u8f93\u5305\u7684\u529f\u80fd,\u5305\u7684\u5b9e\u9645\u4f20\u8f93\u662f\u59d4\u6258\u7ed9\u6570\u636e\u94fe\u8def\u5c42(\u4ee5\u592a\u7f51\u4e2d\u7684\u4ea4\u6362\u673a)\u6765\u5b9e\u73b0\u7684!! [\u8865\u5145:n\u8fdb\u5236\u8f6c\u5341\u8fdb\u5236] 123\uff08n\u4e3a10,8,16\uff09 --> 1*n ^ 2 + 2*n ^ 1 + 3*n ^ 0 '1\u7684\u540e\u9762\u67092\u4f4d\u6570,2\u7684\u540e\u9762\u67091\u4f4d\u6570,3\u540e\u9762\u67090\u4f4d\u6570' 101 (n\u4e3a2) --> 1*2 ^ 2 + 0*2 ^ 1 + 1*2 ^ 0 = 5 Ps: \u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5c55 -- \u96642\u53d6\u4f59\u6cd5 \u6c42\u4e8c\u8fdb\u5236\u6570 01111111 \u8f6c\u6210\u5341\u8fdb\u5236, \u6709\u4e2a\u5c0f\u7a8d\u95e8\uff01 01111111\u5148\u52a01,\u56e0\u4e3a\u4e8c\u8fdb\u5236\u9022\u4e8c\u8fdb\u4e00,\u539f\u4e8c\u8fdb\u5236\u6570\u53d8\u6210\u4e8610000000\u53732 ^ 7=128 \u6240\u4ee501111111 = 2 ^ 7-1 = 127 \u6572\u9ed1\u677f! \u5148\u7b80\u5355\u4e86\u89e3\u4e00\u4e9b\u7f51\u7edc\u5c42\u7684\u4e13\u4e1a\u540d\u8bcd... Q: \u89e3\u91ca\u4e0b IP\u5730\u5740\u3001\u7f51\u6bb5\u3001\u5c40\u57df\u7f51\u3001\u5b50\u7f51\u3001\u5b50\u7f51\u63a9\u7801\u3001\u9ed8\u8ba4\u7f51\u5173\u3001ARP \u53c2\u8003\u94fe\u63a5: https://blog.csdn.net/qq _ 43450715/article/details/120031497 \u7528\u81ea\u5df1\u7684\u8bdd\u7b3c\u7edf\u89e3\u91ca: 1> IP\u5730\u5740 \u7531\u7f51\u7edc\u53f7+\u4e3b\u673a\u53f7\u7ec4\u6210. 2> \u82e5\u67d0\u4e00\u7f51\u6bb5\u5185\u4e3b\u673a\u6570\u91cf\u592a\u591a,\u5e7f\u64ad\u57df\u592a\u5927\u5c31\u4f1a\u5f71\u54cd\u4f20\u64ad\u6548\u7387.\u6240\u4ee5\u4f1a\u5bf9IP\u5212\u5206\u5b50\u7f51. eg: 192.168.1.0/27\u8fd9\u4e2ac\u7c7b\u7f51\u7edc,\u7f51\u7edc\u53f7\u5411\u4e3b\u673a\u53f7\u501f\u4e8627-24=3\u4f4d,\u5373\u53ef\u4ea7\u751f2 ^ 3-2\u4e2a\u5b50\u7f51; \u6bcf\u4e2a\u5b50\u7f51\u90fd\u662f\u4e00\u4e2a\u7f51\u6bb5(\u6bcf\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u53f7\u662f\u4e0d\u4e00\u6837\u7684) 3> \u672a\u5212\u5206\u5b50\u7f51\u65f6\u5019,\u53ef\u4ee5\u5927\u80c6\u7684\u8bf4\u8fd9\u91cc\u7f51\u6bb5/\u5b50\u7f51/\u5c40\u57df\u7f51\u4e00\u4e2a\u610f\u601d.\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u7f51\u7edc. \u5212\u5206\u5b50\u7f51\u540e,\u51c6\u786e\u70b9\u8bf4: \u4e00\u4e2a\u7f51\u7edc = \u4e00\u4e2a(\u5927)\u7f51\u6bb5 = \u591a\u4e2a\u5b50\u7f51/\u591a\u4e2a(\u5c0f)\u7f51\u6bb5/\u591a\u4e2a\u5c40\u57df\u7f51, \u4f46\u901a\u5e38\u4e3a\u4e86\u7701\u4e8b,\u6df7\u7740\u53eb.\u6ca1\u6709\u505a\u8fd9\u4e48\u51c6\u786e\u7684\u533a\u5206.. 4> IP\u5730\u5740\u4e0e\u5b50\u7f51\u63a9\u7801\u8fdb\u884c\u4e0e\u8fd0\u7b97\u5f97\u5230\u5b50\u7f51\u5730\u5740,\u2f64\u6765\u786e\u5b9a\u2f6c\u6807\u4e3b\u673a\u7684IP\u662f\u5426\u4e0e\u6e90\u4e3b\u673a\u5728\u540c\u2f00\u4e2a\u2f79\u7edc/\u7f51\u6bb5\u5185. 5> ARP\u534f\u8bae\u53ef\u4ee5\u5c06IP\u5730\u5740\u8f6c\u6362\u6210MAC\u5730\u5740 6> \u6bcf\u4e2a\u4e3b\u673a\u4f1a\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5173\u8868\u660e\u8def\u7531\u5668\u7684\u4f4d\u7f6e. \u6ce8\u610f\u54e6!\u5c5e\u4e8e\u540c\u4e00\u7f51\u6bb5/\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u901a\u4fe1,\u4e0d\u540c\u7f51\u6bb5\u7684\u4e3b\u673a\u8981\u901a\u8fc7\u8def\u7531\u5668(\u7f51\u5173)\u624d\u80fd\u901a\u4fe1. \u4e5f\u5c31\u662f\u8bf4\u5c40\u57df\u7f51\u4e00\u822c\u6307\u4e8c\u5c42\u8bbe\u5907(\u6570\u636e\u94fe\u8def\u5c42\u7684\u4ea4\u6362\u673a)\u53ef\u8fbe\u7684\u7f51\u7edc IP\u534f\u8bae \u00b6 IP\u534f\u8bae\u662f\u89c4\u5b9a\u7f51\u7edc\u5730\u5740\u7684\u534f\u8bae,\u5b9a\u4e49\u7684\u5730\u5740\u79f0\u4e3aIP\u5730\u5740. IP\u534f\u8bae\u7684\u7ec4\u6210\u5c31\u4e0d\u5c55\u5f00\u6765\u5177\u4f53\u9610\u8ff0\u4e86.. \u53ea\u9700\u8981\u77e5\u9053IP\u534f\u8bae\u91cc\u9762\u670932\u4f4d\u7684\u6e90IP\u5730\u5740\u548c32\u4f4d\u7684\u76ee\u7684IP\u5730\u5740\u5c31\u884c!! 1> \u4f9d\u7167IP\u534f\u8bae\u5728\u7f51\u7edc\u91cc\u4f20\u8f93\u7684\u6570\u636e,\u79f0\u4e3a 'IP\u6570\u636e\u62a5/\u6570\u636e\u5305' 2> IP\u6570\u636e\u62a5 = head + data head\u91cc\u9762\u653e\u6709<\u6e90IP\u5730\u5740>\u548c<\u76ee\u6807IP\u5730\u5740> \u63d0\u4e00\u5634: IP\u5730\u5740\u7684\u901a\u4fe1 \u5728\u516c\u7f51\u91cc -- \u91c7\u7528\u7684\u662f \u8def\u7531\u534f\u8bae.. (\u4e0d\u505a\u8fc7\u591a\u9610\u8ff0,\u77e5\u9053\u5c31\u884c) \u4ece\u7f51\u7edc\u5c42\u4e0b\u6765\u7684\u6570\u636e\u5230\u6570\u636e\u94fe\u8def\u5c42\u5c01\u88c5\u6210\u5e27: \u5e27\u9996\u90e8 \u6e90mac\u5730\u5740 \u76ee\u7684mac\u5730\u5740 \u6e90IP\u5730\u5740 \u76ee\u7684IP\u5730\u5740 IP\u6570\u636e\u62a5\u6570\u636e \u5e27\u5c3e\u90e8 Ps: \u5e27\u6570\u636e = IP\u6570\u636e\u62a5 = IP\u62a5\u5934 + IP\u6570\u636e\u62a5\u6570\u636e = \u6e90IP\u5730\u5740 + \u76ee\u7684IP\u5730\u5740 + IP\u6570\u636e\u62a5\u6570\u636e IP\u5730\u5740 \u00b6 \u5148\u8bf4\u5728\u524d\u9762, IP\u5730\u5740\u6709\u4e24\u5927\u4f5c\u7528: 1> arp\u534f\u8bae\u4f1a\u628aip\u5730\u5740\u89e3\u6790\u6210mac\u5730\u5740; 2> \u6807\u8bc6\u5b50\u7f51/\u5c40\u57df\u7f51\u5730\u5740 IP\u5730\u5740\u7684\u7ec4\u6210 \u00b6 IPV4\u7248\u672c\u7684IP\u5730\u5740\u53604\u4e2a\u5b57\u8282,\u753132\u4f4d\u4e8c\u8fdb\u5236\u6570\u7ec4\u6210,\u901a\u5e38\u7528\u70b9\u5206\u5341\u8fdb\u5236\u6570\u8868\u793a.\u6bcf8\u4f4d\u4e3a\u4e00\u7ec4.. IP\u5730\u5740 = \u7f51\u7edc\u53f7Network + \u4e3b\u673a\u53f7Host Ps: \u7f51\u7edc\u53f7\u6807\u8bc6\u8fd9\u53f0\u8ba1\u7b97\u673a\u5728\u54ea\u4e2a\u5c40\u57df\u7f51\u5185;\u4e3b\u673a\u53f7\u6807\u8bc6\u8be5\u8ba1\u7b97\u673a\u662f\u5c5e\u4e8e\u5c40\u57df\u7f51\u7684\u54ea\u53f0\u673a\u5668.. IP\u5730\u5740\u7684\u8303\u56f4 00000000.00000000.00000000.00000000 ==> 0.0.0.0 11111111.11111111.11111111.11111111 ==> 255.255.255.255 \u4f8b\u5982: 10101100.00010000.00001010.000000100 ==> 172.16.10.4 IP\u5730\u5740\u7684\u5206\u7c7b \u00b6 2^32\u4e2aIP\u5730\u5740\u5c06\u7f51\u7edc\u53f7\u548c\u4e3b\u673a\u53f7\u56fa\u5b9a\u4e0b\u6765\u540e,\u5206\u4e3a\u4e865\u7c7b \u62ff\u5230\u4e00\u4e2aIP\u5730\u5740,\u53ea\u9700\u8981\u770bIP\u5730\u5740\u7684\u7b2c\u4e00\u7ec4\u5341\u8fdb\u5236\u6570, \u5c31\u80fd\u5224\u65adIP\u5730\u5740\u662f\u5c5e\u4e8e\u54ea\u4e00\u7c7b\u7684!! \u7ea6\u5b9a\u524d1\u30012\u30013\u4e2a8\u4f4d\u7ec4\u5206\u522b\u4e3aA\u3001B\u3001C\u7c7bIP\u5730\u5740\u7684\u7f51\u7edc\u53f7!(\u4e5f\u5c31\u7ea6\u5b9a\u4e86\u5b50\u7f51\u63a9\u7801) D\u7c7b\u7ec4\u64ad\u5730\u5740;E\u7c7b\u7814\u7a76\u5730\u5740. \u8fd95\u7c7bIP\u5730\u5740\u90fd\u4ee5\u56fa\u5b9a\u7684\u4e8c\u8fdb\u5236\u6570\u5f00\u5934,\u5206\u522b\u662f 0\u300110\u3001110\u30011110\u300111110. \u7f51\u7edc\u7c7b\u522b \u6700\u5927\u53ef\u6307\u6d3e\u7684\u7f51\u7edc\u6570 \u7b2c\u4e00\u4e2a\u7f51\u7edc\u53f7 \u6700\u540e\u4e00\u4e2a\u7f51\u7edc\u53f7 \u6bcf\u4e2a\u7f51\u7edc\u7684\u4e3b\u673a\u6570 A 0 2^7 - 2 = 126 1 126 2^24-2 = 16777214 B 10 2^14 - 1 = 16383 128.1 191.255 2^16-2 = 65534 C 110 2^21 - 1 = 2097151 192.0.1 223.255.255 2^8-2 = 254 \u89e3\u6790: IP\u5730\u5740\u5206\u7c7b\u540e,\u8def\u7531\u5668\u4ec5\u6839\u636e\u76ee\u7684\u4e3b\u673a\u6240\u5728\u7684\u5b50\u7f51\u8fdb\u884c\u8f6c\u53d1(\u4e0d\u8003\u8651\u4e3b\u673a\u53f7),\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u8def\u7531\u8868\u6240\u5360\u7684\u5b58\u50a8\u7a7a\u95f4\u4ee5\u53ca\u67e5\u627e\u8def\u7531\u8868\u7684\u65f6\u95f4\uff01\uff01\uff01 1> A\u81f3C\u7c7b\u7f51\u7edc\u652f\u6301\u7684\u7f51\u7edc\u6570(\u5c40\u57df\u7f51\u4e2a\u6570)\u4f9d\u6b21\u589e\u591a,\u6bcf\u4e2a\u5c40\u57df\u7f51\u6240\u542b\u7684\u4e3b\u673a\u6570\u4f9d\u6b21\u51cf\u5c11. 2> A\u7c7b 127 .0.0.0\u548c 0 .0.0.0 \u8fd9\u4e24\u4e2a\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u4f7f\u7528; B\u7c7b 128.0 .0.0 \u8fd9\u4e2a\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u4f7f\u7528; C\u7c7b 192.0.0 .0 \u8fd9\u4e2a\u7684\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u4f7f\u7528; 3> \u6bcf\u4e2a\u5c40\u57df\u7f51/\u7f51\u6bb5\u90fd\u9700\u8981\u51cf\u53bb\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\u8fd9\u4e24\u4e2aIP\u5730\u5740..\u5b83\u4e24\u4e0d\u80fd\u4f5c\u4e3a\u4e3b\u673a\u7684IP.. 4> A\u81f3C\u7c7b\u7f51\u7edc\u4e2d\u8fd8\u5305\u542b\u7684\u6709\u53ea\u80fd\u5728\u5c40\u57df\u7f51\u5185\u4f7f\u7528\u7684\u79c1\u6709\u5730\u5740... [\u4e00\u4e9b\u7279\u6b8a\u7684ip\u5730\u5740] 1> \u7f51\u7edc\u5730\u5740: \u7f51\u7edc\u53f7\u4fdd\u7559,\u4e3b\u673a\u53f7\u5168\u4e3a0 \u7528\u4e8e\u6807\u8bc6\u7f51\u7edc\u7684 2> \u5e7f\u64ad\u5730\u5740: \u7f51\u7edc\u53f7\u4fdd\u7559,\u4e3b\u673a\u53f7\u5168\u4e3a1 -- \u4f1a\u5728\u8be5\u7f51\u6bb5/\u5b50\u7f51\u8fdb\u884c\u5e7f\u64ad 3> \u5168\u7f51\u5e7f\u64ad\u5730\u5740(IPV4\u6700\u5927\u7684\u5730\u5740): 255.255.255.255 \u4f1a\u5728\u6574\u4e2a\u7f51\u7edc(\u8be5\u7f51\u7edc\u5212\u5206\u7684\u6240\u6709\u5b50\u7f51)\u91cc\u8fdb\u884c\u5e7f\u64ad; \u5404\u8def\u7531\u5668\u5747\u4e0d\u8f6c\u53d1 4> 0.0.0.0(IPV4\u6700\u5c0f\u7684\u5730\u5740): \u6307\u5df2\u7ecf\u4e0d\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684ip\u5730\u5740,\u4e0d\u77e5\u9053\u672c\u673aIP\u65f6,\u53ef\u4ee5\u7528\u5b83\uff01 5> \u56de\u73af\u5730\u5740: \u6570\u5b57127\u7528\u4e8e\u7ed9\u7cfb\u7edf\u505a\u8bca\u65ad\u7528.. 127.0.0.1 -- \u7528\u4e8e\u672c\u5730\u8f6f\u4ef6\u73af\u56de\u6d4b\u8bd5 \u6570\u636e\u5305\u5230\u7f51\u5361\u4e86,\u6ca1\u6709\u5f80\u4ea4\u6362\u673a\u8d70,\u539f\u8def\u8fd4\u56de,\u81ea\u5df1\u53d1\u7ed9\u81ea\u5df1 \u5bf9\u4e8e\u6bcf\u4e00\u53f0linux\u4e3b\u673a,\u90fd\u6709\u672c\u5730\u56de\u73af\u7f51\u5361,\u6b64\u7f51\u5361\u4e0a\u914d\u7f6e\u7684IP\u5730\u5740\u5c31\u662f127.0.0.1 \u76f8\u5f53\u4e8e\u4e00\u53f0\u8ba1\u7b97\u673a\u5373\u5f53\u5ba2\u6237\u7aef\u4e5f\u5f53\u670d\u52a1\u7aef,\u7528\u4e8e\u4fdd\u8bc1\u8f6f\u4ef6\u672c\u8eab\u7684\u5f00\u53d1\u6ca1\u95ee\u9898, \u6392\u9664\u7f51\u7edc\u7684\u56e0\u7d20 6> \u79c1\u6709\u5730\u5740(\u5185\u7f51\u5730\u5740) :\u53ea\u80fd\u5728\u5c40\u57df\u7f51\u5185\u4f7f\u7528!!!!! \u516c\u7f51\u4e0a\u662f\u6ca1\u6709\u8fd9\u4e9bIP\u5730\u5740\u7684.. \u79c1\u6709\u5730\u5740 \u00b6 IP\u5730\u5740 = \u516c\u7f51\u5730\u5740 + \u79c1\u6709\u5730\u5740 \u79c1\u6709\u5730\u5740\u7c7b\u522b \u6240\u6709\u7684\u79c1\u6709IP\u5730\u5740 (\u95ed\u533a\u95f4) \u79c1\u6709\u7f51\u7edc\u5730\u5740 \uff08\u95ed\u533a\u95f4\uff09 \u5e94\u7528\u573a\u666f A 10.(0 255).(0 255).(0~255) 10.0.0.0/8 --- --- --- B 172.(16 31).(0 255).(0~255) 172.(16\uff5e31).0.0/12 \u5546\u7528\u670d\u52a1\u5668\u96c6\u7fa4\u5316\u4f5c\u4e1a C 192.168.(0 255).(0 255) 192.168.(0~255).0/16 \u529e\u516c\u5ba4 Ps: \u53ef\u4ee5\u7b97\u561b,172.(16\uff5e31).0.0/12 \u7f51\u7edc\u53f7\u4f4d12\u4f4d, \u7b2c\u4e8c\u4e2a8\u4f4d\u7ec4\u524d4\u4f4d\u6700\u5927\u4e3a'1111',\u8f6c\u621010\u8fdb\u5236\u4e3a31 B\u7c7b\u79c1\u6709\u5730\u5740 -- 2^4 = 16\u4e2a\u8fde\u7eed\u7684B\u7c7b\u7f51\u7edc; C\u7c7b\u79c1\u6709\u5730\u5740 -- 2^8 = 256\u4e2a\u8fde\u7eed\u7684C\u7c7b\u7f51\u7edc.. NAT \u00b6 \u7f51\u5173\u90fd\u5177\u5907NAPT\u529f\u80fd,\u80fd\u591f\u53ea\u901a\u8fc7\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\u5c31\u80fd\u8ba9N\u53f0\u4e3b\u673a\u4e0e\u5916\u754c\u901a\u4fe1. NAPT,\u5b83\u76f8\u5bf9\u4e8e\u4f20\u7edf\u7684NAT,\u591a\u4e86\u7aef\u53e3\u53f7\u7528\u4e8e\u627e\u5230\u79c1\u6709\u7f51\u7edc\u91cc\u7684\u76ee\u7684\u4e3b\u673a.. \u82b1\u94b1\u529e\u5bbd\u5e26\u5b9e\u9645\u4e0a\u662f\u8981\u4e86\u4e00\u4e2a\u5728\u516c\u7f51\u91cc\u7684\u5730\u5740, \u5149\u732b = \u4ea4\u6362\u673a + \u8def\u7531\u5668.. \u65b9\u5411 \u65e7\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7 \u65b0\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7 \u51fa 192.168.0.3:30000 172.38.1.5:40001 (\u516c\u7f51) \u51fa 192.168.0.4:30000 172.38.1.5:40002 (\u516c\u7f51) \u5165 172.38.1.5:40001 (\u516c\u7f51) 192.168.0.3:30000 \u5165 172.38.1.5:40002 (\u516c\u7f51) 192.168.0.4:30000 \u79c1\u6709\u5730\u5740\u4e0d\u540c\u7aef\u53e3\u53f7\u76f8\u540c, \u8868\u660e\u79c1\u7f51\u5185\u4e0d\u540c\u4e3b\u673a\u4e0a\u7684\u540c\u4e00\u8f6f\u4ef6\u53d1\u8d77\u7684\u901a\u4fe1,\u5230\u4e86\u7f51\u5173\u8fd9,\u8fdb\u884cNAPT\u8f6c\u6362,\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a\u516c\u7f51IP,\u4f46\u5206\u914d\u7684\u662f\u4e0d\u540c\u7684\u7aef\u53e3\u53f7.. \u4ed4\u7ec6\u60f3\u60f3,\u8fd9\u662f\u4e3a\u4e86\u4e00\u4e00\u5bf9\u5e94.. \u5177\u4f53\u6765\u8bf4,\u5047\u8bbe\u5bb6\u91cc\u7684\u4e24\u53f0\u7535\u8111,\u8ba1\u7b97\u673aA\u548c\u8ba1\u7b97\u673aB\u79c1\u6709\u5730\u5740\u5206\u522b\u662f192.168.0.3\u548c192.168.0.4, \u8ba1\u7b97\u673aA\u548c\u8ba1\u7b97\u673aB\u4e0a\u7684QQ\u8f6f\u4ef6\u90fd\u8981\u53d1\u9001\u4e00\u4e2a\u804a\u5929\u4fe1\u606f\u51fa\u53bb, \u6570\u636e\u5305\u5230\u4e86\u7f51\u5173\u8fd9,\u9700\u8981\u8fdb\u884c\u8f6c\u6362: 192.168.0.3:30000 \u8f6c\u6362\u6210 172.38.1.5:40001 192.168.0.4:30000 \u8f6c\u6362\u6210 172.38.1.5:40002 \u63a5\u7740,\u8ba1\u7b97\u673aA\u548cB\u4e0a\u7684QQ\u8f6f\u4ef6\u9700\u8981\u63a5\u53d7\u804a\u5929\u4fe1\u606f, \u54cd\u5e94\u7684\u6570\u636e\u5305\u6839\u636e\u8def\u7531\u5668\u7684\u6620\u5c04\u8868\u8fdb\u884cIP\u548c\u7aef\u53e3\u7684\u8f6c\u6362: 172.38.1.5:40001 \u8f6c\u6362\u6210 192.168.0.3:30000 172.38.1.5:40002 \u8f6c\u6362\u6210 192.168.0.4:30000 \u53ef\u4ee5\u8fd9\u6837\u7406\u89e3, 40001\u300140002\u5206\u522b\u4ee3\u8868\u4e86\u8ba1\u7b97\u673aA\u548c\u8ba1\u7b97\u673aB,30000\u4ee3\u8868\u7684\u662f\u8ba1\u7b97\u673a\u4e0a\u7684QQ\u8f6f\u4ef6... \u5b50\u7f51\u63a9\u7801 \u00b6 \u5982\u4f55\u786e\u5b9aIP\u5730\u5740\u54ea\u4e9b\u90e8\u5206\u662f\u7f51\u7edc\u53f7\u5462\uff1f\u5c31\u8981\u7528\u5230\u5b50\u7f51\u63a9\u7801\uff01\uff01 \u5b50\u7f51\u63a9\u7801(netmask): \u7528\u6765\u6807\u8bc6\u4e00\u4e2aip\u5730\u5740\u7684\u7f51\u7edc\u53f7\u4e2a\u6570 \u4ece\u5de6\u5230\u53f3\u8fde\u7eed\u76841,\u8fde\u7eed\u76840. \u53ea\u8981\u5c5e\u4e8e\u7f51\u7edc\u53f7,\u5b50\u7f51\u63a9\u7801\u5c31\u6807\u8bb0\u4e3a1; \u53ef\u4ee5\u7b80\u5199 -- eg 172.16.10.2/ 24 (24\u4ee3\u8868IP\u5730\u5740\u7684\u524d24\u4f4d\u662f\u7f51\u7edc\u53f7) \u5355\u72ec\u7684IP\u5730\u5740\u6ca1\u6709\u610f\u4e49,\u8981\u4e0e\u5b50\u7f51\u63a9\u7801\u4e00\u8d77\u5de5\u4f5c : IP\u5730\u5740 + \u5b50\u7f51\u63a9\u7801 --> \u6807\u8bc6\u67d0\u4e2a\u5c40\u57df\u7f51\u7684\u4f4d\u7f6e Ps: \u5373\u5b50\u7f51\u63a9\u7801\u544a\u8bc9\u4e86\u6211\u4eecIP\u5730\u5740\u7684\u7f51\u7edc\u53f7..\u6216\u8005\u662f\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6211\u4eec\u80fd\u77e5\u9053\u7f51\u7edc\u5730\u5740(IP\u6240\u5904\u7684\u5c40\u57df\u7f51).. \u901a\u5e38\u4e3a\u4e86\u65b9\u4fbf\u53ea\u4f1a\u8bf4IP\u5730\u5740,\u81ea\u5df1\u8981\u660e\u767d\u8fd8\u6709\u5b50\u7f51\u63a9\u7801! \u7f51\u7edc\u5730\u5740 \u00b6 \u4e8c\u8fdb\u5236\u7684IP\u5730\u5740\u4e0e\u4e8c\u8fdb\u5236\u7684\u5b50\u7f51\u63a9\u7801\u505a\u6309\u4f4d\u4e0e\u8fd0\u7b97\u5f97\u5230\u7f51\u7edc\u5730\u5740/\u5b50\u7f51\u5730\u5740 -- \u540c1\u4e3a1,\u5426\u5219\u4e3a0 \u4f8b1> \u6c42IP\u5730\u5740172.16.10.4/24\u7684\u5b50\u7f51\u5730\u5740 10101100.00010000.00001010.00000100 ==> 172.16.10.4 11111111.11111111.11111111.00000000 ==> 255.255.255.0 10101100.00010000.00001010.00000000 ==> 172.16.10.0 \u4f8b2> \u6c42IP\u5730\u5740172.16.10.5/24\u7684\u5b50\u7f51\u5730\u5740 10101100.00010000.00001010.00000101 ==> 172.16.10.5 11111111.11111111.11111111.00000000 ==> 255.255.255.0 10101100.00010000.00001010.00000000 ==> 172.16.10.0 \u5b50\u7f51\u5730\u5740\u76f8\u540c,\u4ee3\u8868\u5904\u4e8e\u540c\u4e00\u4e2aLAN(\u5c40\u57df\u7f51)\u4e2d, So, 172.16.10.4/24 \u4e0e 172.16.10.5/24 \u662f\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5/\u5c40\u57df\u7f51.\u5b83\u4e24\u901a\u4fe1\u9760mac\u5730\u5740\u5c31\u884c. \u5b50\u7f51\u5212\u5206(\u4e86\u89e3) \u00b6 \u501f\u4e3b\u673a\u4f4d\u7ed9\u7f51\u7edc\u4f4d\u4f7f\u7528,\u4e5f\u5c31\u662f\u5b50\u7f51\u63a9\u7801\u8fde\u7eed1\u7684\u4e2a\u6570\u4f1a\u589e\u591a.. \u901a\u5e38\u4f1a\u5728\u5185\u7f51\u4e2d\u7528\u79c1\u6709\u5730\u5740\u8fdb\u884c\u5b50\u7f51\u5212\u5206... \u672a\u5212\u5206\u5b50\u7f51 \u00b6 172.16.10.2/16\u8fd9\u4e2aIP\u6240\u5904\u7684\u7f51\u7edc\u662f\u4e00\u4e2aB\u7c7b\u7f51\u7edc.(\u56e0\u4e3a\u6b64IP\u662fB\u7c7b\u4e14\u5b50\u7f51\u63a9\u7801\u662f16\u4f4d,\u6240\u4ee5\u6b64\u7f51\u7edc\u672a\u5212\u5206\u5b50\u7f51) 1> \u5728\u6b64\u7f51\u7edc\u91cc\u6240\u6709\u4e3b\u673a\u7684: \u5b50\u7f51\u63a9\u7801 -- 255.255.0.0 \u7f51\u7edc\u53f7 -- 172.16. \u7f51\u7edc\u5730\u5740 -- 172.16.0.0 (\u7f51\u7edc\u53f7+\u4e3b\u673a\u53f7\u51680) \u5e7f\u64ad\u5730\u5740 -- 172.16.255.255 (\u7f51\u7edc\u53f7+\u4e3b\u673a\u53f7\u51681) 2> \u6b64\u7f51\u7edc\u53ef\u7528\u4e3b\u673aIP -- <172.16.0.1 \uff5e 172.16.255.254> \u51712^(8+8)-2=65534\u4e2a\u53ef\u7528\u4e3b\u673a. \u5373\u4e3b\u673a\u5730\u5740,\u53ef\u5206\u914d\u7ed9\u7f51\u7edc\u4e2d\u7ec8\u7aef\u8bbe\u5907\u7684\u5730\u5740,\u4ecb\u4e8e\u7f51\u7edc\u5730\u5740\u4e0e\u5e7f\u64ad\u5730\u5740\u4e4b\u95f4 3> 172.16.10.2/24 \u8fd9\u4e2aIP\u7684\u4e3b\u673a\u53f7 -- 10.2 \u5212\u5206\u5b50\u7f51 \u00b6 \u5212\u5206\u6210\u591a\u4e2a\u5b50\u7f51\u540e, \u6bcf\u4e2a\u5b50\u7f51\u5206\u914d\u4e00\u4e2a\u72ec\u7acb\u7684\u5e7f\u64ad\u57df, \u80fd\u8282\u7ea6\u5730\u5740\u3001\u7f13\u89e3\u5185\u7f51\u5e7f\u64ad\u8d1f\u62c5. 172.16.0.0/16 \u5c06\u8fd9\u4e2aB\u7c7b\u7f51\u7edc\u5730\u5740\u5207\u5272\u6210\u4e00\u4e2a\u4e2a\u5c0f\u7684\u7f51\u6bb5/\u5c40\u57df\u7f51.\u5982\u4f55\u8fdb\u884c\u5b50\u7f51\u5212\u5206\u5462\uff1f 172.16.0.0/17 \u5411\u4e3b\u673a\u53f7\u501f\u4e00\u4f4d \u501f\u7684\u8fd9\u4e00\u4f4d\u79f0\u4e3a\u5b50\u7f51\u4f4d(\u53ef\u4e3a 0 \u4ea6\u53ef\u4e3a 1) 1> \u82e5\u5b50\u7f51\u4f4d\u4e3a0: \u5b50\u7f51\u5730\u5740/\u7f51\u7edc\u5730\u5740: 172.16.0.0/17 \u5b50\u7f51\u63a9\u7801: 255.255.128.0 \u5e7f\u64ad\u5730\u5740(\u5269\u4e0b15\u4e2a\u4e3b\u673a\u4f4d\u5168\u4e3a1): 172.16.127.255 \u4e3b\u673a: 172.16.0.1~172.16.127.254 \u5171128*254\u4e2a 1> \u82e5\u5b50\u7f51\u4f4d\u4e3a1: \u5b50\u7f51\u5730\u5740/\u7f51\u7edc\u5730\u5740: 172.16.128.0/17 \u5b50\u7f51\u63a9\u7801: 255.255.128.0 \u5e7f\u64ad\u5730\u5740(\u5269\u4e0b15\u4e2a\u4e3b\u673a\u4f4d\u5168\u4e3a1): 172.16.255.255 \u4e3b\u673a: 172.16.128.1~172.16.255.254 \u5171(255-128+1)*254\u4e2a \u4e24\u4e2a\u516c\u5f0f 1> 2^m = \u5411\u4e3b\u673a\u4f4d\u501f\u4f4d\u540e\u4ea7\u751f\u7684\u5b50\u7f51\u4e2a\u6570 (m\u4e3a\u6240\u501f\u4f4d\u6570) Ps: \u901a\u5e38\u81f3\u5c11\u4f1a\u501f\u4e24\u4f4d,\u56e0\u4e3a\u5212\u5206\u5b50\u7f51\u540e,\u5904\u4e8e\u5934\u548c\u5c3e\u7684\u5b50\u7f51\u62ff\u6765\u7528\u662f\u6ca1\u95ee\u9898\u7684,\u4f46\u5927\u5bb6\u7ea6\u5b9a\u4e0d\u4f1a\u7528.. 2> 2^n \u2013 2 = \u5411\u4e3b\u673a\u4f4d\u501f\u4f4d\u540e\u4ea7\u751f\u7684\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u53ef\u7528\u4e3b\u673aIP\u6570 (n\u4e3a\u539f\u4e3b\u673a\u4f4d\u7684\u4e2a\u6570\u51cf\u53bb\u88ab\u501f\u4f4d\u7684\u4e2a\u6570\u540e\u7684\u5269\u4f59\u4f4d\u6570) \u51cf2\u662f\u56e0\u4e3a\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u7684\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\u4e0d\u80fd\u7528 \u7ec3\u4e60 \u00b6 \u2605\u95ee: 192.168.1.64/27\u80fd\u5426\u5206\u914d\u7ed9PC\u4f7f\u7528\uff1f \u9996\u5148\u53ef\u4ee5\u770b\u51fa\u662f\u5c06192.168.1.0/24 \u8fd9\u4e2aC\u7c7b\u7f51\u7edc\u505a\u4e86\u4e00\u4e2a\u5b50\u7f51\u5212\u5206,\u501f\u4e863\u4f4d,\u53d8\u6210\u4e86192.168.1.0/27, \u4ea7\u751f\u4e862^3 = 8\u4e2a\u5b50\u7f51,\u540c\u65f6\u6bcf\u4e2a\u5b50\u7f51\u67092^5-2=30\u4e2a\u53ef\u7528IP. 192.168.1. 000 _ _ _ \u7f51\u7edc\u5730\u5740: 192.168.1.0 / 27 \u5e7f\u64ad\u5730\u5740\uff1a192.168.1.31 192.168.1. 001 _ _ _ 192.168.1.32 / 27 63 192.168.1. 010 _ _ _ 192.168.1.64 / 27 95 192.168.1. 011 _ _ _ 192.168.1.96 / 27 127 192.168.1. 100 _ _ _ 192.168.1.128 / 27 159 \u2026 \u2026 \u2026 \u4ee5\u4e0a\u8fd9\u4e2a\u65b9\u6cd5\u592a\u7b28\uff01\uff01\u6709\u806a\u660e\u4e00\u70b9\u7684\u529e\u6cd5. \u8fd9\u6837\u601d\u8003 \u501f\u4e863\u4f4d,\u90a3\u4e488\u4e2a\u5b50\u7f51,\u6bcf\u4e2a\u5b50\u7f51\u90fd\u670932\u4e2a\u4e3b\u673aIP(\u4e0d\u7ba1\u90a3\u4e24\u4e2a\u662f\u5426\u770b\u53ef\u7528),\u4e5f\u5c31\u662f\u8bf4\u6bcf\u4e2a\u5b50\u7f51\u5757\u7684\u5927\u5c0f\u4e3a32\u4e2a. \u6240\u4ee5 \u5f80\u540e\u52a032, \u5c31\u662f\u6bcf\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740; \u77e5\u9053\u4e86\u76f8\u90bb\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740, \u518d\u770b\u770b\u5e7f\u64ad\u5730\u5740\u7684\u6982\u5ff5, \u5e7f\u64ad\u5730\u5740\u4f7f\u7528\u7684\u662f\u8be5\u7f51\u7edc\u8303\u56f4\u5185\u6700\u5927\u5730\u5740, \u6240\u4ee5\u770b\u4e0b\u4e00\u4e2a\u76f8\u90bb\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u518d\u51cf\u4e00\u5c31\u884c\u5566\uff01 VLAN(\u4e86\u89e3) \u00b6 \u4e8c\u5c42\u9694\u79bb\u4e0e\u4e09\u5c42\u9694\u79bb \u00b6 \u9694\u79bb\u662f\u6307\u5c5e\u4e8e\u4e0d\u540c\u7684\u5c40\u57df\u7f51 \u4e8c\u5c42\u9694\u79bb: \u4e24\u53f0\u8ba1\u7b97\u673a\u63a5\u5165\u4e0d\u540c\u7684\u4ea4\u6362\u673a \u4e09\u5c42\u9694\u79bb: \u5b50\u7f51\u5730\u5740\u4e0d\u540c \u5047\u8bbe\u4e00\u4e2a\u6559\u5ba4ABCD\u56db\u53f0\u8ba1\u7b97\u673a\u90fd\u63a5\u5165\u540c\u4e00\u4e2a\u4ea4\u6362\u673a. 1> \u90a3\u4e48\u8fd9\u4e2a\u6559\u5ba4\u7684\u56db\u53f0\u8ba1\u7b97\u673a\u5728\u4e8c\u5c42\u662f\u8fde\u901a\u7684,\u4f46\u4e0d\u80fd\u8bf4\u8fd9\u56db\u53f0\u8ba1\u7b97\u673a\u90fd\u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51; 2> \u82e5\u8fdb\u884c\u4e86\u5b50\u7f51\u5212\u5206,\u90a3\u4e48\u5904\u4e8e\u4e0d\u540c\u5b50\u7f51\u7684\u8ba1\u7b97\u673a\u5b9e\u73b0\u4e86\u4e09\u5c42\u9694\u79bb; arp\u8ba1\u7b97\u7684\u65f6\u5019\u53ef\u4e0d\u4f1a\u7ba1\u8fd9\u4e9b\u8ba1\u7b97\u673a\u662f\u5426\u8fde\u5728\u540c\u4e00\u4e2a\u4ea4\u6362\u673a,\u5b83\u53ea\u7ba1\u76f8\u4e92\u901a\u4fe1\u7684\u8ba1\u7b97\u673a\u7f51\u7edc\u5730\u5740\u662f\u5426\u76f8\u540c. A: 192.168.1.1/25 B: 192.168.1.2/25 -- \u5b50\u7f51\u4f4d\u4e3a0 C: 192.168.1.129/25 D: 192.168.1.130/25 -- \u5b50\u7f51\u4f4d\u4e3a1 \u6570\u636e\u5305\u7684\u8d70\u5411: \u8ba1\u7b97\u673aA - \u6559\u5ba4\u4ea4\u6362\u673a - \u6559\u5ba4\u8def\u7531\u5668 - \u6559\u5ba4\u4ea4\u6362\u673a - \u8ba1\u7b97\u673aD 3> \u4e8c\u5c42\u8fde\u901a,\u4e09\u5c42\u662f\u9694\u79bb\u7684. \u8fd9\u79cd\u8bbe\u8ba1\u5f88\u4e0d\u5408\u7406!! \u56e0\u4e3a\u4e8c\u5c42\u8fde\u901a,\u4ea4\u6362\u673a\u8fdb\u884c\u5e7f\u64ad\u65f6(\u4ea4\u6362\u673a\u4f1a\u5728\u4e24\u79cd\u60c5\u51b5\u4e0b\u5e7f\u64ad),\u4e0d\u540c\u5b50\u7f51\u7684\u8ba1\u7b97\u673a\u56e0\u4e3a\u8fde\u5728\u540c\u4e00\u4e2a\u4ea4\u6362\u673a\u4e0a\u90fd\u80fd\u6536\u5230!!! \u4e00\u822c\u60c5\u51b5\u4e0b,\u4e8c\u4e09\u5c42\u5e94\u8be5\u540c\u65f6\u9694\u79bb! 4> \u600e\u4e48\u5b9e\u73b0\u4e8c\u4e09\u5c42\u540c\u65f6\u9694\u79bb\u5462\uff1f \u73b0\u5728\u7684\u4ea4\u6362\u673a\u90fd\u652f\u6301\u5212\u5206\u591a\u4e2avlan(\u865a\u62df\u5c40\u57df\u7f51) .. ,AB\u5212\u5206\u5230\u4e00\u4e2avlan\u91cc,CD\u5212\u5206\u5230\u53e6\u5916\u4e00\u4e2avlan\u91cc,\u8fd9\u6837\u7684\u8bdd,\u7b2c\u4e00\u4e2avlan\u7684\u5e7f\u64ad\u4e0d\u80fd\u8513\u5ef6\u5230\u7b2c\u4e8c\u4e2avlan\u91cc\u9762!!! 192.168.1.0 \u8fd9\u4e2a\u7f51\u7edc\u5730\u5740\u8fdb\u884c\u5b50\u7f51\u5212\u5206,\u6839\u636e\u771f\u5b9e\u9700\u6c42\u5212\u5206\u51fa\u591a\u4e2a\u5b50\u7f51,\u6bcf\u4e2a\u5b50\u7f51\u90fd\u652f\u6301\u591a\u53f0\u4e3b\u673a.. \u518d\u7ed3\u5408\u4ea4\u6362\u673a\u7684vlan.. \u5b9e\u73b0\u4e8c\u4e09\u5c42\u540c\u65f6\u9694\u79bb. \u7efc\u4e0a: \u4e8c\u5c42\u8fde\u901a,\u4e09\u5c42\u662f\u53ef\u4ee5\u9694\u79bb\u7684,\u5373\u4e24\u53f0\u8ba1\u7b97\u673a\u63a5\u5165\u540c\u4e00\u4e2a\u4ea4\u6362\u673a,\u4e0d\u4e00\u5b9a\u5728\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185... \u4e0d\u5408\u7406; \u4e8c\u5c42\u9694\u79bb\u5e94\u8be5\u4e0e\u4e09\u5c42\u9694\u79bb\u4fdd\u6301\u4e00\u81f4; vlan\u7b80\u4ecb \u00b6 \u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/p/6710751.html 1> \u5e26vlan\u7684\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u5206\u4e3a\u4e24\u7c7b: (\u7ed3\u5408\u8fd9\u4e24\u4e2a\u7aef\u53e3\u53ef\u4ee5\u5b9e\u73b0\u8de8\u4ea4\u6362\u673a\u5212\u5206vlan) Access port -- \u4e3b\u8981\u7528\u4e8e\u8fde\u63a5\u7535\u8111 \u8fd9\u4e9b\u7aef\u53e3\u4f1a\u88ab\u6253\u4e0aVLAN Tag(\u4ea4\u6362\u673a\u624d\u80fd\u77e5\u9053\u8ba1\u7b97\u673a\u5c5e\u4e8e\u54ea\u4e00\u4e2avlan) Trunk por -- \u4e3b\u8981\u5c06\u4ea4\u6362\u673a\u4e0e\u4ea4\u6362\u673a\u8fdb\u884c\u4e00\u4e2a\u4e32\u8fde.. 2> vlan\u7684\u4e0d\u8db3\u4e4b\u4e00: \u5b83\u6700\u591a\u53ea\u652f\u6301 4096 \u4e2a VLAN \u7f51\u7edc(\u8fd8\u8981\u9664\u53bb\u51e0\u4e2a\u9884\u7559\u7684), \u5bf9\u4e8e\u5927\u578b\u6570\u636e\u4e2d\u5fc3\u7684\u6765\u8bf4,\u8fd9\u4e2a\u6570\u91cf\u662f\u8fdc\u8fdc\u4e0d\u591f. \u4ea4\u6362\u673a\u505a\u96c6\u7fa4\u63d0\u5347\u6027\u80fd,\u9632\u6b62\u5355\u70b9\u6545\u969c.\u7ad9\u5728\u7269\u7406\u5c42\u9762\u662f\u4e24\u53f0\u4ea4\u6362\u673a,\u7ad9\u5728\u903b\u8f91\u5c42\u9762\u662f\u4e00\u53f0\u8d85\u7ea7\u4ea4\u6362\u673a. \u5728\u7269\u7406\u5c42\u9762,\u4e00\u53f0\u670d\u52a1\u5668\u9700\u8981\u6709\u4e24\u6839\u7ebf\u5206\u522b\u8fde\u63a5\u5230\u8fd9\u4e24\u4e2a\u4ea4\u6362\u673a\u540c\u4e00\u4e2a\u7aef\u53e3(eg 10\u53f7\u7aef\u53e3).. \u589e\u52a0\u6027\u80fd,\u9632\u6b62\u5355\u70b9\u6545\u969c(\u6709\u65f6\u95f4\u89e3\u51b3\u95ee\u9898) \u6240\u4ee5\u5728 \u903b\u8f91\u5c42\u9762\u7aef\u53e3\u6570\u662f\u6ca1\u6709\u589e\u52a0\u7684 !!! ARP\u534f\u8bae \u00b6 [\u627f\u4e0a\u542f\u4e0b] \u8ba1\u7b97\u673aA\u5982\u4f55\u786e\u5b9a\u4e0e\u8ba1\u7b97\u673aB\u662f\u5426\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185? \u7b97IP\u6240\u5904\u7684\u5b50\u7f51/\u7f51\u7edc\u5730\u5740. 1> \u82e5\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185,\u5982\u4f55\u901a\u4fe1\uff1f \u901a\u8fc7\u6570\u636e\u94fe\u8def\u5c42\u7684\u5b66\u4e60,\u6211\u4eec\u77e5\u9053\u8be5\u7528\u4ee5\u592a\u7f51\u534f\u8bae,\u57fa\u4e8emac\u5730\u5740\u901a\u8fc7\u6570\u636e\u94fe\u8def\u5c42\u7684\u4e8c\u5c42\u4ea4\u6362\u673a\u8fdb\u884c\u5e7f\u64ad 2> \u82e5\u8de8\u5c40\u57df\u7f51,\u5982\u4f55\u901a\u4fe1\uff1f \u63d0\u4e00\u5634,\u8fd9\u6d89\u53ca\u5230\u516c\u7f51\u7684\u8def\u7531\u534f\u8bae\u5566.(\u4e0d\u8fc7\u591a\u6df1\u7a76). \u4f46\u5c40\u57df\u7f51\u5230\u516c\u7f51\u7684\u8fc7\u7a0b\u8fd8\u662f\u9700\u8981\u4e86\u89e3\u7684.. \u5267\u900f : \u4e0d\u7ba1\u662f\u5426\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185,\u4ea4\u6362\u673a\u90fd\u9700\u8981\u4e8b\u5148\u5c06ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305\u8fdb\u884c\u5e7f\u64ad!!! \u7ec6\u8282 : \u6570\u636e\u94fe\u8def\u5c42\u7684<\u6570\u636e\u5e27>\u91cc\u7684\u76ee\u7684mac\u5730\u5740\u662f\u901a\u8fc7ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305\u5e7f\u64ad\u540e\u5f97\u5230\u7684!!! IP\u6570\u636e\u5305\u7684\u8d70\u5411 \u00b6 1> \u901a\u4fe1\u7b2c\u4e00\u6b65\u5148\u62ff\u5230\u76ee\u6807\u4e3b\u673a\u7684IP\u5730\u5740 2> \u5224\u65ad\u51fa\u76ee\u6807\u4e3b\u673a\u4e0e\u81ea\u5df1(\u6e90\u4e3b\u673a)\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u91cc. \u25cb \u82e5\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u91cc,\u6570\u636e\u5305\u7684\u8d70\u5411: \u6e90\u4e3b\u673a ---> \u672c\u5730\u4ea4\u6362\u673a ---> \u76ee\u6807\u4e3b\u673a \u25cb \u82e5\u4e0d\u5728,\u6570\u636e\u5305\u7684\u8d70\u5411: \u6e90\u4e3b\u673a ---> \u672c\u5730\u4ea4\u6362\u673a ---> \u672c\u5730\u8def\u7531\u5668 ---> \u516c\u7f51 (\u8fd0\u8425\u5546\u7684\u4e00\u7cfb\u5217\u7684\u7f51\u7edc\u8bbe\u5907) ---> / \u76ee\u6807\u8def\u7531\u5668 ---> \u76ee\u6807\u4ea4\u6362\u673a ---> \u76ee\u6807\u4e3b\u673a Ps: \u672c\u5730\u8def\u7531\u5668\u7b97\u4e0d\u7b97\u5c40\u57df\u7f51\u91cc\u7684\u8bbe\u5907?\u7b97!\u56e0\u4e3a\u5b83\u8fde\u5230\u4e86\u4ea4\u6362\u673a\u4e0a. ARP\u7684\u5e7f\u64ad\u5305 \u00b6 \u6e90\u4e3b\u673aA IP -- 172.16.10.10/24 \u76ee\u6807\u4e3b\u673aB IP -- 172.16.10.11/24 \u76ee\u6807\u4e3b\u673aC IP -- 101.200.10.22/24 \u8981\u6653\u5f97 : \u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6709\u81ea\u5df1\u7684MAC\u5730\u5740\u3001\u4f1a\u63d0\u524d\u8bbe\u7f6e\u81ea\u5df1\u7684IP\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u548c\u9ed8\u8ba4\u7f51\u5173\u7684IP\u5730\u5740.. \u6ce8\u610f\u54e6!\u6bcf\u53f0\u7535\u8111\u91cc\u90fd\u6709\u4e2aARP\u7f13\u5b58\u8868(IP\u5730\u5740\u4e0emac\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u8868),\u4e00\u5f00\u59cb\u7684\u65f6\u5019\u8fd9\u4e2a\u8868\u662f\u7a7a\u7684,\u901a\u8fc7\u5927\u5bb6\u4e0d\u65ad\u5e7f\u64ad arp \u8bf7\u6c42,\u6700\u7ec8\u6240\u6709\u7535\u8111\u91cc\u9762\u7684arp \u7f13\u5b58\u8868\u90fd\u4f1a\u66f4\u65b0\u5b8c\u6574... step1: \u62ff\u5230\u76ee\u6807\u4e3b\u673a\u7684IP\u4e0e\u5b50\u7f51\u63a9\u7801 step2: arp\u534f\u8bae\u4f1a\u7b97\u51fa\u672c\u673a\u548c\u76ee\u6807\u4e3b\u673a\u7684\u7f51\u7edc\u5730\u5740/\u5b50\u7f51\u5730\u5740. step3: \u5224\u65ad\u6e90\u7684\u5b50\u7f51\u5730\u5740\u4e0e\u76ee\u6807\u7684\u5b50\u7f51\u5730\u5740\u662f\u5426\u4e00\u6837. \u5148\u8981\u660e\u786e,\u8fd9\u91cc\u53d1\u7684\u5e7f\u64ad\u5305\u4e0d\u662f\u771f\u6b63\u901a\u4fe1\u7684\u6570\u636e,\u800c\u662f\u901a\u8fc7ARP\u534f\u8bae\u5f97\u5230\u76ee\u6807\u4e3b\u673a\u6216\u7f51\u5173\u7684MAC\u5730\u5740. 1> A\u4e0eB \u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51, \u90a3\u4e48 \u901a\u4fe1\u5c31\u662f\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5185\u901a\u4fe1,\u9760\u7684\u662fmac\u5730\u5740\u5b9a\u4f4d\u5230\u5bf9\u65b9\u5728\u54ea\u91cc. A\u5982\u4f55\u5f97\u5230B\u7684mac\u5730\u5740\u5462\uff1f \u25b3 A\u53d1\u9001ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305. \u25b3 \u4ea4\u6362\u673a\u62ff\u5230\u8fd9\u4e2a\u5e7f\u64ad\u5305,\u770b\u5230\u76ee\u6807MAC\u662f FF:FF:FF:FF:FF:FF ,\u4f1a\u5c06\u6b64\u5e7f\u64ad\u5305\u8fdb\u884c\u5e7f\u64ad \u25b3 \u6b64\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u4f1a\u62c6\u5f00\u5e7f\u64ad\u5305\u770b\u76ee\u6807IP\u662f\u4e0d\u662f\u81ea\u5df1,\u662f\u7684\u8bdd\u5c31\u4f1a\u5e26\u4e0a\u81ea\u5df1\u7684mac\u5730\u5740\u56de\u5305.. \u8fd9\u6837A\u5c31\u80fd\u5f97\u5230B\u7684mac\u5730\u5740.. \u4e3b\u673aA\u7684ARP\u7f13\u5b58\u8868\u4e5f\u5f97\u5230\u4e86\u66f4\u65b0.. A\u518d\u91cd\u65b0\u5c01\u88c5\u53d1\u8d77\u771f\u6b63\u7684\u901a\u4fe1.. \u771f\u6b63\u7684\u901a\u4fe1\u6570\u636e: mac(A) mac(B) IP(A) IP(B) \u6570\u636e\u90e8\u5206 2> A\u4e0eC \u662f\u8de8\u5c40\u57df\u7f51\u4f20\u8f93, \u90a3\u4e48 \u901a\u4fe1\u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5185\u901a\u4fe1,\u9760\u8def\u7531\u5668\u628a\u6570\u636e\u5305\u8f6c\u53d1\u51fa\u53bb A\u4e0b\u4e00\u6b65\u9700\u8981\u5f97\u5230\u6240\u5904\u5c40\u57df\u7f51\u7684\u9ed8\u8ba4\u7f51\u5173\u7684mac\u5730\u5740!(A\u662f\u77e5\u9053/\u8bbe\u7f6e\u4e86\u9ed8\u8ba4\u7f51\u5173\u7684IP\u5730\u5740\u7684) \u25b3 A\u540c\u6837\u4f1a\u53d1\u9001ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305.\u4ea4\u6362\u673a\u62ff\u5230\u8fd9\u4e2a\u5e7f\u64ad\u5305\u540c\u6837\u4e5f\u4f1a\u8fdb\u884c\u5e7f\u64ad. \u25b3 \u4f46\u53ea\u6709\u8def\u7531\u5668\u4f1a\u54cd\u5e94,\u4e8e\u662f\u4e4eA\u62ff\u5230\u4e86\u5c40\u57df\u7f51\u91cc\u7f51\u5173/\u8def\u7531\u5668\u7684mac\u5730\u5740.. \u771f\u6b63\u7684\u901a\u4fe1\u6570\u636e: mac(A) mac(\u7f51\u5173) IP(A) IP(C) \u6570\u636e\u90e8\u5206 \u6570\u636e\u5305\u901a\u8fc7\u8def\u7531\u5668\u5230\u4e86\u516c\u7f51,\u5728\u516c\u7f51\u4e2d\u9700\u8981\u6839\u636e\u8def\u7531\u8868 hop-by-hop!! \u5e7f\u64ad\u5305\u7684\u683c\u5f0f\u5982\u4e0b : \u6e90MAC \u76ee\u6807MAC \u6e90IP \u76ee\u6807IP \u6570\u636e\u90e8\u5206 \u6e90\u4e3b\u673aA mac A FF:FF:FF:FF:FF:FF 172.16.10.10/24 B\u4e3b\u673a\u7684IP or \u7f51\u5173\u7684IP \u6570\u636e Ps: FF-FF-FF-FF-FF-FF \u662f\u7528\u4e8e\u5e7f\u64ad\u7684mac\u5730\u5740 \u5e7f\u64ad\u5305\u7684\u76ee\u6807IP\u662f\u8c01,\u5c31\u5728\u8ddf\u8c01\u8981mac\u5730\u5740 \u4ea4\u6362\u673a\u53ea\u6709\u5728\u4e24\u79cd\u60c5\u51b5\u624d\u628a\u5305\u8fdb\u884c\u5e7f\u64ad,\u62c6\u5305\u65f6\u53d1\u73b0: 1> \u76ee\u6807mac\u662f: FF:FF:FF:FF:FF:FF 2> \u76ee\u6807mac\u4e0d\u5b58\u5728\u4e8emac\u5730\u5740\u8868\u4e2d \u4e3a\u5565\u8bf4IP\u5730\u5740\u4e0d\u53ef\u6216\u7f3a: 1> ARP\u534f\u8bae\u9700\u8981. \u4ee5\u592a\u7f51\u534f\u8bae\u91cc\u7684\u76ee\u7684mac\u5730\u5740\u8d77\u521d\u662f\u4e0d\u77e5\u9053\u7684,\u9700\u8981\u4e8b\u5148\u901a\u8fc7ARP\u534f\u8bae\u5f97\u5230. 2> \u5904\u4e8e\u7f51\u7edc\u5c42\u7684\u8def\u7531\u5668\u4f5c\u4e3a\u4e00\u53f0\u6bcf\u4e2a\u7aef\u53e3\u90fd\u62e5\u6709\u72ec\u7acb\u7684MAC\u5730\u5740\u7684\u8bbe\u5907,\u53ef\u4ee5\u628a\u6570\u636e\u5305\u505a\u4e00\u6b21\u8f6c\u53d1. \u7f51\u7edc\u5c42\u6574\u4e2a\u6d41\u7a0b \u00b6 A\u7ed9F\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305! \u7f51\u7edc\u62d3\u6251\u56fe\u4e2d,\u8def\u7531\u56681\u4e0e\u8def\u7531\u56682\u8fdb\u884c\u4e86\u8fde\u63a5..\u8def\u7531\u56681\u7684\u8def\u7531\u8868\u5982\u4e0b: Ps:\u8def\u7531\u8868\u662f\u6839\u636e\u5f88\u591a\u8def\u7531\u7b97\u6cd5/\u57fa\u4e8eip\u5730\u5740\u7684\u8def\u7531\u534f\u8bae\u5f97\u6765\u7684,\u4e0d\u662f\u6211\u4eec\u7814\u7a76\u7684\u8303\u56f4.. | \u76ee\u7684\u5730\u5740 | \u4e0b\u4e00\u8df3 | \u7aef\u53e3 | | :--------------: | :-----------: | :--: | | 192.168.0.0/24 | | 0 | | 192.168.1.0/24 | | 1 | | 192.168.2.0/24 | 192.168.100.5 | | | 192.168.100.0/24 | | 2 | \u82e5\u8def\u7531\u5668\u8f6c\u53d1\u7684\u6570\u636e\u5305\u91cc\u76ee\u7684IP\u5730\u5740\u662f192.168.1.0/24\u8fd9\u4e2a\u5b50\u7f51\u91cc\u7684,\u5219\u901a\u8fc71\u53f7\u7aef\u53e3\u8fdb\u884c\u8f6c\u53d1. \u82e5\u5339\u914d\u5230\u7684\u662f\u4e0b\u4e00\u8df3,\u5219\u9700\u8981\u518d\u6b21\u5339\u914d\u8def\u7531\u8868,\u627e\u5230\u5176\u7aef\u53e3.. 1> \u9996\u5148\u6839\u636eA\u4e0eF\u5404\u81ea\u7684IP\u548c\u5b50\u7f51\u63a9\u7801\u4e0e\u8fd0\u7b97\u5f97\u5230\u7f51\u7edc\u5730\u5740\u5206\u522b\u4e3a 192.168.0.0, 192.168.2.0 \u5f97\u77e5AF\u5904\u4e8e\u4e0d\u540c\u7684\u5c40\u57df\u7f51. \u4e8e\u662f\u4e4eA\u4f1a\u5148\u5c06\u6570\u636e\u5305\u53d1\u7ed9\u9ed8\u8ba4\u7f51\u5173/\u8def\u7531\u56681(192.168.0.254) \u518d\u7ec6\u5316\u8fd9\u4e00\u8fc7\u7a0b,\u4e3b\u673aA\u91cc\u662f\u8bbe\u7f6e\u7684\u6709\u9ed8\u8ba4\u7f51\u5173\u7684IP\u5730\u5740\u7684. \u25cb \u4e3b\u673aA\u4f1a\u901a\u8fc7\u4ea4\u6362\u673a1\u5bf9arp\u5e7f\u64ad\u5305\u8fdb\u884c\u5e7f\u64ad.. \u25cb \u4e3b\u673aA\u62ff\u5230\u4ea4\u6362\u673a1\u8fde\u63a5\u5230\u8def\u7531\u56681\u4e0a\u7684\u90a3\u4e2a\u7aef\u53e3\u7684mac\u5730\u5740(ABAB).. \u5e76\u66f4\u65b0\u4e3b\u673aA\u7684arp\u7f13\u5b58\u8868 \u25cb \u4e3b\u673aA\u5c06\u6e90MAC\u5730\u5740(AAAA)\u4e0e\u7f51\u5173MAC\u5730\u5740(ABAB)\u5c01\u88c5\u5728\u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8; \u5c06\u6e90IP\u5730\u5740(192.168.0.1)\u548c\u76ee\u7684IP\u5730\u5740(192.168.2.2)\u5c01\u88c5\u5728\u7f51\u7edc\u5c42\u5934\u90e8,\u7136\u540e\u53d1\u5305.. \u5e7f\u64ad\u5305\u7684\u683c\u5f0f: AAAA FF:FF:FF:FF:FF:FF IP(A) IP(\u9ed8\u8ba4\u7f51\u5173) \u6570\u636e \u6570\u636e\u5305\u7684\u683c\u5f0f: MAC(\u4e3b\u673aA) MAC(\u9ed8\u8ba4\u7f51\u5173) IP(A) IP(F) \u6570\u636e\u90e8\u5206 \u6ce8\u610f:\u6570\u636e\u5305\u91cc\u7684\u6e90IP\u548c\u76ee\u7684IP\u5728\u6574\u4e2a\u8fc7\u7a0b\u662f\u4e0d\u4f1a\u53d8\u7684!!! 2> \u4ea4\u6362\u673a1\u62ff\u5230\u6570\u636e\u5305\u540e,\u62c6\u5305\u53d1\u73b0\u76ee\u7684MAC\u5730\u5740\u662fABAB,\u67e5\u8be2MAC\u5730\u5740\u8868,\u4ece\u5bf9\u5e94\u7684\u4ea4\u6362\u673a\u7aef\u53e3\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u7ed9\u4e86\u8def\u7531\u56681. 3> \u6570\u636e\u5305\u5230\u4e86\u8def\u7531\u56681\u8fd9,\u62c6\u5305\u53d1\u73b0\u76ee\u7684mac\u5c31\u662f\u81ea\u5df1\u7684,\u6536\u4e0b\u4e86\u6570\u636e\u5305 \u8def\u7531\u5668\u7ee7\u7eed\u62c6\u5305\u53d1\u73b0\u76ee\u6807IP\u5730\u5740\u662f192.168.2.2,\u6b64IP\u5904\u4e8e192.168.2.0/24\u8fd9\u4e2a\u5b50\u7f51/\u5c40\u57df\u7f51\u4e0b, \u8def\u7531\u56681\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868,\u53d1\u73b0\u4e0b\u4e00\u8df3\u7684\u5730\u5740\u662f192.168.100.5,\u6b64IP\u5904\u4e8e192.168.100.0/24\u7f51\u6bb5, \u518d\u6b21\u5339\u914d\u81ea\u5df1\u7684\u8def\u7531\u8868,\u5339\u914d\u5230\u7684\u7aef\u53e3\u4e3a2.. arp\u5e7f\u64ad\u540e\u5f97\u5230192.168.100.5\u7684mac\u5730\u5740\u4e3aD2D2 \u91cd\u65b0\u5c01\u88c5\u6570\u636e\u5305. \u6570\u636e\u5305\u7684\u683c\u5f0f: D1D1 D2D2 IP(A) IP(F) \u6570\u636e\u90e8\u5206 4> \u6570\u636e\u5305\u5230\u4e86\u8def\u7531\u56682\u8fd9,\u62c6\u5305\u53d1\u73b0\u76ee\u7684mac\u5c31\u662f\u81ea\u5df1\u7684,\u6536\u4e0b\u4e86\u6570\u636e\u5305 \u8def\u7531\u56682\u7ee7\u7eed\u62c6\u5305,\u770b\u5230\u5176\u76ee\u7684\u5730\u5740\u662f192.168.2.2,\u8def\u7531\u56682\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868,\u5339\u914d\u5230\u7aef\u53e3\u53f7\u4e3a1. \u8def\u7531\u56682\u67e5\u8be2\u81ea\u5df1\u7684ARP\u7f13\u5b58\u8868,\u67e5\u8be2\u5230192.168.2.2\u5bf9\u5e94\u7684mac\u662fFFFF(\u82e5ARP\u7f13\u5b58\u8868\u4e2d\u6ca1\u6709\u5219\u4f9d\u65e7\u9700\u8981arp\u5e7f\u64ad). \u5c06mac\u5730\u5740\u5c01\u88c5\u5728\u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8,\u5e76\u4ece1\u53f7\u7aef\u53e3\u628a\u6570\u636e\u5305\u53d1\u51fa\u53bb \u6570\u636e\u5305\u7684\u683c\u5f0f: EFEF FFFF IP(A) IP(F) \u6570\u636e\u90e8\u5206 5> \u4ea4\u6362\u673a3\u6536\u5230\u4e86\u6570\u636e\u5305,\u53d1\u73b0\u76ee\u7684MAC\u5730\u5740\u4e3aFFFF,\u67e5\u8be2\u81ea\u5df1\u7684MAC\u5730\u5740\u8868,\u5c06\u6570\u636e\u5305\u4ece\u5bf9\u5e94\u7684\u4ea4\u6362\u673a6\u53f7\u7aef\u53e3\u53d1\u4e86\u51fa\u53bb. 6> \u6570\u636e\u5305\u5230\u4e86F\u8fd9\u91cc,F\u62c6\u5305\u53d1\u73b0\u76ee\u7684mac\u5730\u5740\u5c31\u662f\u81ea\u5df1,\u4e8e\u662f\u6536\u4e0b\u4e86\u8fd9\u4e2a\u5305. \u53ef\u4ee5\u53d1\u73b0\u53d1\u9001\u7684\u771f\u6b63\u6570\u636e,\u6570\u636e\u5305\u7684\u6e90IP\u548c\u76ee\u6807IP\u662f\u4e0d\u53d8\u7684\uff01\uff01\uff01 \u7f51\u7edc\u5c42(IP\u534f\u8bae)\u672c\u8eab\u6ca1\u6709\u4f20\u8f93\u5305\u7684\u529f\u80fd,\u5305\u7684\u5b9e\u9645\u4f20\u8f93\u662f\u59d4\u6258\u7ed9\u6570\u636e\u94fe\u8def\u5c42(\u4ee5\u592a\u7f51\u4e2d\u7684\u4ea4\u6362\u673a)\u6765\u5b9e\u73b0\u7684!! \u6ce8\u610f\u54e6: \u6e90mac\u548c\u76ee\u7684mac\u6bcf\u6b21\u90fd\u4f1a\u66f4\u6362.. mac\u5730\u5740\u8868\u3001\u4ea4\u6362\u673a\u5e7f\u64ad\u3001\u8def\u7531\u8868\u3001ARP\u5e7f\u64ad \u7ad9\u5728\u4e0d\u540c\u7684\u89c6\u89d2\u89c2\u5bdf,\u5f97\u5230\u4e9b\u8bb8\u89c4\u5219: [ \u7535\u8111\u89c6\u89d2 ] \u9996\u5148\u6211\u8981\u77e5\u9053\u6211\u7684 IP \u4ee5\u53ca\u5bf9\u65b9\u7684 IP \u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u5224\u65ad\u6211\u4eec\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51 \u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5c31\u901a\u8fc7 arp \u83b7\u53d6\u5bf9\u65b9 mac\u5740\u76f4\u63a5\u6254\u51fa\u53bb \u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5c31\u901a\u8fc7 arp \u83b7\u53d6\u9ed8\u8ba4\u7f51\u5173\u7684 mac \u5730\u5740\u76f4\u63a5\u6254\u51fa\u53bb [ \u4ea4\u6362\u673a\u89c6\u89d2 ] \u6211\u6536\u5230\u7684\u6570\u636e\u5305\u5fc5\u987b\u6709\u76ee\u6807 MAC \u5730\u5740 \u901a\u8fc7 MAC \u5730\u5740\u8868\u67e5\u6620\u5c04\u5173\u7cfb \u67e5\u5230\u4e86\u5c31\u6309\u7167\u6620\u5c04\u5173\u7cfb\u4ece\u6211\u7684\u6307\u5b9a\u7aef\u53e3\u53d1\u51fa\u53bb \u67e5\u4e0d\u5230\u5c31\u6240\u6709\u7aef\u53e3\u90fd\u53d1\u51fa\u53bb [ \u8def\u7531\u5668\u89c6\u89d2 ] \u6211\u6536\u5230\u7684\u6570\u636e\u5305\u5fc5\u987b\u6709\u76ee\u6807 IP \u5730\u5740 \u901a\u8fc7\u8def\u7531\u8868\u67e5\u6620\u5c04\u5173\u7cfb \u67e5\u5230\u4e86\u5c31\u6309\u7167\u6620\u5c04\u5173\u7cfb\u4ece\u6211\u7684\u6307\u5b9a\u7aef\u53e3\u53d1\u51fa\u53bb \u67e5\u4e0d\u5230\u5219\u8fd4\u56de\u4e00\u4e2a\u8def\u7531\u4e0d\u53ef\u8fbe\u7684\u6570\u636e\u5305","title":"\u7f51\u7edc\u5c42"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_1","text":"IP\u5730\u5740+mac\u5730\u5740\u53ef\u4ee5\u6807\u8bc6\u5168\u4e16\u754c\u8303\u56f4\u5185\u552f\u4e00\u4e00\u53f0\u8ba1\u7b97\u673a. IP\u5730\u5740\u627e\u5230\u5bf9\u65b9\u4e3b\u673a\u5904\u4e8e\u54ea\u4e2a\u5c40\u57df\u7f51,mac\u5730\u5740\u627e\u5230\u5bf9\u65b9\u4e3b\u673a\u5904\u4e8e\u8be5\u7f51\u7edc\u7684\u54ea\u91cc.. \u56e0\u4e3a\u6709ARP\u534f\u8bae\u7684\u5b58\u5728, ARP\u4f1a\u5c06ip\u5730\u5740\u8f6c\u6362\u6210mac\u5730\u5740 (\u8981\u4e48\u662f\u5c40\u57df\u7f51\u5185\u4e00\u53f0\u8ba1\u7b97\u673a\u7684mac\u5730\u5740,\u8981\u4e48\u662f\u7f51\u5173\u7684mac\u5730\u5740,\u4e0d\u80fd\u4e5f\u4e0d\u4f1a\u662f\u5728\u516c\u7f51\u4e2d\u7684\u8bbe\u5907\u7684mac\u5730\u5740) \u7f51\u7edc\u5c42(IP\u534f\u8bae)\u672c\u8eab\u6ca1\u6709\u4f20\u8f93\u5305\u7684\u529f\u80fd,\u5305\u7684\u5b9e\u9645\u4f20\u8f93\u662f\u59d4\u6258\u7ed9\u6570\u636e\u94fe\u8def\u5c42(\u4ee5\u592a\u7f51\u4e2d\u7684\u4ea4\u6362\u673a)\u6765\u5b9e\u73b0\u7684!! [\u8865\u5145:n\u8fdb\u5236\u8f6c\u5341\u8fdb\u5236] 123\uff08n\u4e3a10,8,16\uff09 --> 1*n ^ 2 + 2*n ^ 1 + 3*n ^ 0 '1\u7684\u540e\u9762\u67092\u4f4d\u6570,2\u7684\u540e\u9762\u67091\u4f4d\u6570,3\u540e\u9762\u67090\u4f4d\u6570' 101 (n\u4e3a2) --> 1*2 ^ 2 + 0*2 ^ 1 + 1*2 ^ 0 = 5 Ps: \u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5c55 -- \u96642\u53d6\u4f59\u6cd5 \u6c42\u4e8c\u8fdb\u5236\u6570 01111111 \u8f6c\u6210\u5341\u8fdb\u5236, \u6709\u4e2a\u5c0f\u7a8d\u95e8\uff01 01111111\u5148\u52a01,\u56e0\u4e3a\u4e8c\u8fdb\u5236\u9022\u4e8c\u8fdb\u4e00,\u539f\u4e8c\u8fdb\u5236\u6570\u53d8\u6210\u4e8610000000\u53732 ^ 7=128 \u6240\u4ee501111111 = 2 ^ 7-1 = 127 \u6572\u9ed1\u677f! \u5148\u7b80\u5355\u4e86\u89e3\u4e00\u4e9b\u7f51\u7edc\u5c42\u7684\u4e13\u4e1a\u540d\u8bcd... Q: \u89e3\u91ca\u4e0b IP\u5730\u5740\u3001\u7f51\u6bb5\u3001\u5c40\u57df\u7f51\u3001\u5b50\u7f51\u3001\u5b50\u7f51\u63a9\u7801\u3001\u9ed8\u8ba4\u7f51\u5173\u3001ARP \u53c2\u8003\u94fe\u63a5: https://blog.csdn.net/qq _ 43450715/article/details/120031497 \u7528\u81ea\u5df1\u7684\u8bdd\u7b3c\u7edf\u89e3\u91ca: 1> IP\u5730\u5740 \u7531\u7f51\u7edc\u53f7+\u4e3b\u673a\u53f7\u7ec4\u6210. 2> \u82e5\u67d0\u4e00\u7f51\u6bb5\u5185\u4e3b\u673a\u6570\u91cf\u592a\u591a,\u5e7f\u64ad\u57df\u592a\u5927\u5c31\u4f1a\u5f71\u54cd\u4f20\u64ad\u6548\u7387.\u6240\u4ee5\u4f1a\u5bf9IP\u5212\u5206\u5b50\u7f51. eg: 192.168.1.0/27\u8fd9\u4e2ac\u7c7b\u7f51\u7edc,\u7f51\u7edc\u53f7\u5411\u4e3b\u673a\u53f7\u501f\u4e8627-24=3\u4f4d,\u5373\u53ef\u4ea7\u751f2 ^ 3-2\u4e2a\u5b50\u7f51; \u6bcf\u4e2a\u5b50\u7f51\u90fd\u662f\u4e00\u4e2a\u7f51\u6bb5(\u6bcf\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u53f7\u662f\u4e0d\u4e00\u6837\u7684) 3> \u672a\u5212\u5206\u5b50\u7f51\u65f6\u5019,\u53ef\u4ee5\u5927\u80c6\u7684\u8bf4\u8fd9\u91cc\u7f51\u6bb5/\u5b50\u7f51/\u5c40\u57df\u7f51\u4e00\u4e2a\u610f\u601d.\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u7f51\u7edc. \u5212\u5206\u5b50\u7f51\u540e,\u51c6\u786e\u70b9\u8bf4: \u4e00\u4e2a\u7f51\u7edc = \u4e00\u4e2a(\u5927)\u7f51\u6bb5 = \u591a\u4e2a\u5b50\u7f51/\u591a\u4e2a(\u5c0f)\u7f51\u6bb5/\u591a\u4e2a\u5c40\u57df\u7f51, \u4f46\u901a\u5e38\u4e3a\u4e86\u7701\u4e8b,\u6df7\u7740\u53eb.\u6ca1\u6709\u505a\u8fd9\u4e48\u51c6\u786e\u7684\u533a\u5206.. 4> IP\u5730\u5740\u4e0e\u5b50\u7f51\u63a9\u7801\u8fdb\u884c\u4e0e\u8fd0\u7b97\u5f97\u5230\u5b50\u7f51\u5730\u5740,\u2f64\u6765\u786e\u5b9a\u2f6c\u6807\u4e3b\u673a\u7684IP\u662f\u5426\u4e0e\u6e90\u4e3b\u673a\u5728\u540c\u2f00\u4e2a\u2f79\u7edc/\u7f51\u6bb5\u5185. 5> ARP\u534f\u8bae\u53ef\u4ee5\u5c06IP\u5730\u5740\u8f6c\u6362\u6210MAC\u5730\u5740 6> \u6bcf\u4e2a\u4e3b\u673a\u4f1a\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5173\u8868\u660e\u8def\u7531\u5668\u7684\u4f4d\u7f6e. \u6ce8\u610f\u54e6!\u5c5e\u4e8e\u540c\u4e00\u7f51\u6bb5/\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u901a\u4fe1,\u4e0d\u540c\u7f51\u6bb5\u7684\u4e3b\u673a\u8981\u901a\u8fc7\u8def\u7531\u5668(\u7f51\u5173)\u624d\u80fd\u901a\u4fe1. \u4e5f\u5c31\u662f\u8bf4\u5c40\u57df\u7f51\u4e00\u822c\u6307\u4e8c\u5c42\u8bbe\u5907(\u6570\u636e\u94fe\u8def\u5c42\u7684\u4ea4\u6362\u673a)\u53ef\u8fbe\u7684\u7f51\u7edc","title":"\u5f15\u8a00"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#ip","text":"IP\u534f\u8bae\u662f\u89c4\u5b9a\u7f51\u7edc\u5730\u5740\u7684\u534f\u8bae,\u5b9a\u4e49\u7684\u5730\u5740\u79f0\u4e3aIP\u5730\u5740. IP\u534f\u8bae\u7684\u7ec4\u6210\u5c31\u4e0d\u5c55\u5f00\u6765\u5177\u4f53\u9610\u8ff0\u4e86.. \u53ea\u9700\u8981\u77e5\u9053IP\u534f\u8bae\u91cc\u9762\u670932\u4f4d\u7684\u6e90IP\u5730\u5740\u548c32\u4f4d\u7684\u76ee\u7684IP\u5730\u5740\u5c31\u884c!! 1> \u4f9d\u7167IP\u534f\u8bae\u5728\u7f51\u7edc\u91cc\u4f20\u8f93\u7684\u6570\u636e,\u79f0\u4e3a 'IP\u6570\u636e\u62a5/\u6570\u636e\u5305' 2> IP\u6570\u636e\u62a5 = head + data head\u91cc\u9762\u653e\u6709<\u6e90IP\u5730\u5740>\u548c<\u76ee\u6807IP\u5730\u5740> \u63d0\u4e00\u5634: IP\u5730\u5740\u7684\u901a\u4fe1 \u5728\u516c\u7f51\u91cc -- \u91c7\u7528\u7684\u662f \u8def\u7531\u534f\u8bae.. (\u4e0d\u505a\u8fc7\u591a\u9610\u8ff0,\u77e5\u9053\u5c31\u884c) \u4ece\u7f51\u7edc\u5c42\u4e0b\u6765\u7684\u6570\u636e\u5230\u6570\u636e\u94fe\u8def\u5c42\u5c01\u88c5\u6210\u5e27: \u5e27\u9996\u90e8 \u6e90mac\u5730\u5740 \u76ee\u7684mac\u5730\u5740 \u6e90IP\u5730\u5740 \u76ee\u7684IP\u5730\u5740 IP\u6570\u636e\u62a5\u6570\u636e \u5e27\u5c3e\u90e8 Ps: \u5e27\u6570\u636e = IP\u6570\u636e\u62a5 = IP\u62a5\u5934 + IP\u6570\u636e\u62a5\u6570\u636e = \u6e90IP\u5730\u5740 + \u76ee\u7684IP\u5730\u5740 + IP\u6570\u636e\u62a5\u6570\u636e","title":"IP\u534f\u8bae"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#ip_1","text":"\u5148\u8bf4\u5728\u524d\u9762, IP\u5730\u5740\u6709\u4e24\u5927\u4f5c\u7528: 1> arp\u534f\u8bae\u4f1a\u628aip\u5730\u5740\u89e3\u6790\u6210mac\u5730\u5740; 2> \u6807\u8bc6\u5b50\u7f51/\u5c40\u57df\u7f51\u5730\u5740","title":"IP\u5730\u5740"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#ip_2","text":"IPV4\u7248\u672c\u7684IP\u5730\u5740\u53604\u4e2a\u5b57\u8282,\u753132\u4f4d\u4e8c\u8fdb\u5236\u6570\u7ec4\u6210,\u901a\u5e38\u7528\u70b9\u5206\u5341\u8fdb\u5236\u6570\u8868\u793a.\u6bcf8\u4f4d\u4e3a\u4e00\u7ec4.. IP\u5730\u5740 = \u7f51\u7edc\u53f7Network + \u4e3b\u673a\u53f7Host Ps: \u7f51\u7edc\u53f7\u6807\u8bc6\u8fd9\u53f0\u8ba1\u7b97\u673a\u5728\u54ea\u4e2a\u5c40\u57df\u7f51\u5185;\u4e3b\u673a\u53f7\u6807\u8bc6\u8be5\u8ba1\u7b97\u673a\u662f\u5c5e\u4e8e\u5c40\u57df\u7f51\u7684\u54ea\u53f0\u673a\u5668.. IP\u5730\u5740\u7684\u8303\u56f4 00000000.00000000.00000000.00000000 ==> 0.0.0.0 11111111.11111111.11111111.11111111 ==> 255.255.255.255 \u4f8b\u5982: 10101100.00010000.00001010.000000100 ==> 172.16.10.4","title":"IP\u5730\u5740\u7684\u7ec4\u6210"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#ip_3","text":"2^32\u4e2aIP\u5730\u5740\u5c06\u7f51\u7edc\u53f7\u548c\u4e3b\u673a\u53f7\u56fa\u5b9a\u4e0b\u6765\u540e,\u5206\u4e3a\u4e865\u7c7b \u62ff\u5230\u4e00\u4e2aIP\u5730\u5740,\u53ea\u9700\u8981\u770bIP\u5730\u5740\u7684\u7b2c\u4e00\u7ec4\u5341\u8fdb\u5236\u6570, \u5c31\u80fd\u5224\u65adIP\u5730\u5740\u662f\u5c5e\u4e8e\u54ea\u4e00\u7c7b\u7684!! \u7ea6\u5b9a\u524d1\u30012\u30013\u4e2a8\u4f4d\u7ec4\u5206\u522b\u4e3aA\u3001B\u3001C\u7c7bIP\u5730\u5740\u7684\u7f51\u7edc\u53f7!(\u4e5f\u5c31\u7ea6\u5b9a\u4e86\u5b50\u7f51\u63a9\u7801) D\u7c7b\u7ec4\u64ad\u5730\u5740;E\u7c7b\u7814\u7a76\u5730\u5740. \u8fd95\u7c7bIP\u5730\u5740\u90fd\u4ee5\u56fa\u5b9a\u7684\u4e8c\u8fdb\u5236\u6570\u5f00\u5934,\u5206\u522b\u662f 0\u300110\u3001110\u30011110\u300111110. \u7f51\u7edc\u7c7b\u522b \u6700\u5927\u53ef\u6307\u6d3e\u7684\u7f51\u7edc\u6570 \u7b2c\u4e00\u4e2a\u7f51\u7edc\u53f7 \u6700\u540e\u4e00\u4e2a\u7f51\u7edc\u53f7 \u6bcf\u4e2a\u7f51\u7edc\u7684\u4e3b\u673a\u6570 A 0 2^7 - 2 = 126 1 126 2^24-2 = 16777214 B 10 2^14 - 1 = 16383 128.1 191.255 2^16-2 = 65534 C 110 2^21 - 1 = 2097151 192.0.1 223.255.255 2^8-2 = 254 \u89e3\u6790: IP\u5730\u5740\u5206\u7c7b\u540e,\u8def\u7531\u5668\u4ec5\u6839\u636e\u76ee\u7684\u4e3b\u673a\u6240\u5728\u7684\u5b50\u7f51\u8fdb\u884c\u8f6c\u53d1(\u4e0d\u8003\u8651\u4e3b\u673a\u53f7),\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u8def\u7531\u8868\u6240\u5360\u7684\u5b58\u50a8\u7a7a\u95f4\u4ee5\u53ca\u67e5\u627e\u8def\u7531\u8868\u7684\u65f6\u95f4\uff01\uff01\uff01 1> A\u81f3C\u7c7b\u7f51\u7edc\u652f\u6301\u7684\u7f51\u7edc\u6570(\u5c40\u57df\u7f51\u4e2a\u6570)\u4f9d\u6b21\u589e\u591a,\u6bcf\u4e2a\u5c40\u57df\u7f51\u6240\u542b\u7684\u4e3b\u673a\u6570\u4f9d\u6b21\u51cf\u5c11. 2> A\u7c7b 127 .0.0.0\u548c 0 .0.0.0 \u8fd9\u4e24\u4e2a\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u4f7f\u7528; B\u7c7b 128.0 .0.0 \u8fd9\u4e2a\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u4f7f\u7528; C\u7c7b 192.0.0 .0 \u8fd9\u4e2a\u7684\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u4f7f\u7528; 3> \u6bcf\u4e2a\u5c40\u57df\u7f51/\u7f51\u6bb5\u90fd\u9700\u8981\u51cf\u53bb\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\u8fd9\u4e24\u4e2aIP\u5730\u5740..\u5b83\u4e24\u4e0d\u80fd\u4f5c\u4e3a\u4e3b\u673a\u7684IP.. 4> A\u81f3C\u7c7b\u7f51\u7edc\u4e2d\u8fd8\u5305\u542b\u7684\u6709\u53ea\u80fd\u5728\u5c40\u57df\u7f51\u5185\u4f7f\u7528\u7684\u79c1\u6709\u5730\u5740... [\u4e00\u4e9b\u7279\u6b8a\u7684ip\u5730\u5740] 1> \u7f51\u7edc\u5730\u5740: \u7f51\u7edc\u53f7\u4fdd\u7559,\u4e3b\u673a\u53f7\u5168\u4e3a0 \u7528\u4e8e\u6807\u8bc6\u7f51\u7edc\u7684 2> \u5e7f\u64ad\u5730\u5740: \u7f51\u7edc\u53f7\u4fdd\u7559,\u4e3b\u673a\u53f7\u5168\u4e3a1 -- \u4f1a\u5728\u8be5\u7f51\u6bb5/\u5b50\u7f51\u8fdb\u884c\u5e7f\u64ad 3> \u5168\u7f51\u5e7f\u64ad\u5730\u5740(IPV4\u6700\u5927\u7684\u5730\u5740): 255.255.255.255 \u4f1a\u5728\u6574\u4e2a\u7f51\u7edc(\u8be5\u7f51\u7edc\u5212\u5206\u7684\u6240\u6709\u5b50\u7f51)\u91cc\u8fdb\u884c\u5e7f\u64ad; \u5404\u8def\u7531\u5668\u5747\u4e0d\u8f6c\u53d1 4> 0.0.0.0(IPV4\u6700\u5c0f\u7684\u5730\u5740): \u6307\u5df2\u7ecf\u4e0d\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684ip\u5730\u5740,\u4e0d\u77e5\u9053\u672c\u673aIP\u65f6,\u53ef\u4ee5\u7528\u5b83\uff01 5> \u56de\u73af\u5730\u5740: \u6570\u5b57127\u7528\u4e8e\u7ed9\u7cfb\u7edf\u505a\u8bca\u65ad\u7528.. 127.0.0.1 -- \u7528\u4e8e\u672c\u5730\u8f6f\u4ef6\u73af\u56de\u6d4b\u8bd5 \u6570\u636e\u5305\u5230\u7f51\u5361\u4e86,\u6ca1\u6709\u5f80\u4ea4\u6362\u673a\u8d70,\u539f\u8def\u8fd4\u56de,\u81ea\u5df1\u53d1\u7ed9\u81ea\u5df1 \u5bf9\u4e8e\u6bcf\u4e00\u53f0linux\u4e3b\u673a,\u90fd\u6709\u672c\u5730\u56de\u73af\u7f51\u5361,\u6b64\u7f51\u5361\u4e0a\u914d\u7f6e\u7684IP\u5730\u5740\u5c31\u662f127.0.0.1 \u76f8\u5f53\u4e8e\u4e00\u53f0\u8ba1\u7b97\u673a\u5373\u5f53\u5ba2\u6237\u7aef\u4e5f\u5f53\u670d\u52a1\u7aef,\u7528\u4e8e\u4fdd\u8bc1\u8f6f\u4ef6\u672c\u8eab\u7684\u5f00\u53d1\u6ca1\u95ee\u9898, \u6392\u9664\u7f51\u7edc\u7684\u56e0\u7d20 6> \u79c1\u6709\u5730\u5740(\u5185\u7f51\u5730\u5740) :\u53ea\u80fd\u5728\u5c40\u57df\u7f51\u5185\u4f7f\u7528!!!!! \u516c\u7f51\u4e0a\u662f\u6ca1\u6709\u8fd9\u4e9bIP\u5730\u5740\u7684..","title":"IP\u5730\u5740\u7684\u5206\u7c7b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_2","text":"IP\u5730\u5740 = \u516c\u7f51\u5730\u5740 + \u79c1\u6709\u5730\u5740 \u79c1\u6709\u5730\u5740\u7c7b\u522b \u6240\u6709\u7684\u79c1\u6709IP\u5730\u5740 (\u95ed\u533a\u95f4) \u79c1\u6709\u7f51\u7edc\u5730\u5740 \uff08\u95ed\u533a\u95f4\uff09 \u5e94\u7528\u573a\u666f A 10.(0 255).(0 255).(0~255) 10.0.0.0/8 --- --- --- B 172.(16 31).(0 255).(0~255) 172.(16\uff5e31).0.0/12 \u5546\u7528\u670d\u52a1\u5668\u96c6\u7fa4\u5316\u4f5c\u4e1a C 192.168.(0 255).(0 255) 192.168.(0~255).0/16 \u529e\u516c\u5ba4 Ps: \u53ef\u4ee5\u7b97\u561b,172.(16\uff5e31).0.0/12 \u7f51\u7edc\u53f7\u4f4d12\u4f4d, \u7b2c\u4e8c\u4e2a8\u4f4d\u7ec4\u524d4\u4f4d\u6700\u5927\u4e3a'1111',\u8f6c\u621010\u8fdb\u5236\u4e3a31 B\u7c7b\u79c1\u6709\u5730\u5740 -- 2^4 = 16\u4e2a\u8fde\u7eed\u7684B\u7c7b\u7f51\u7edc; C\u7c7b\u79c1\u6709\u5730\u5740 -- 2^8 = 256\u4e2a\u8fde\u7eed\u7684C\u7c7b\u7f51\u7edc..","title":"\u79c1\u6709\u5730\u5740"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#nat","text":"\u7f51\u5173\u90fd\u5177\u5907NAPT\u529f\u80fd,\u80fd\u591f\u53ea\u901a\u8fc7\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\u5c31\u80fd\u8ba9N\u53f0\u4e3b\u673a\u4e0e\u5916\u754c\u901a\u4fe1. NAPT,\u5b83\u76f8\u5bf9\u4e8e\u4f20\u7edf\u7684NAT,\u591a\u4e86\u7aef\u53e3\u53f7\u7528\u4e8e\u627e\u5230\u79c1\u6709\u7f51\u7edc\u91cc\u7684\u76ee\u7684\u4e3b\u673a.. \u82b1\u94b1\u529e\u5bbd\u5e26\u5b9e\u9645\u4e0a\u662f\u8981\u4e86\u4e00\u4e2a\u5728\u516c\u7f51\u91cc\u7684\u5730\u5740, \u5149\u732b = \u4ea4\u6362\u673a + \u8def\u7531\u5668.. \u65b9\u5411 \u65e7\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7 \u65b0\u7684IP\u5730\u5740\u548c\u7aef\u53e3\u53f7 \u51fa 192.168.0.3:30000 172.38.1.5:40001 (\u516c\u7f51) \u51fa 192.168.0.4:30000 172.38.1.5:40002 (\u516c\u7f51) \u5165 172.38.1.5:40001 (\u516c\u7f51) 192.168.0.3:30000 \u5165 172.38.1.5:40002 (\u516c\u7f51) 192.168.0.4:30000 \u79c1\u6709\u5730\u5740\u4e0d\u540c\u7aef\u53e3\u53f7\u76f8\u540c, \u8868\u660e\u79c1\u7f51\u5185\u4e0d\u540c\u4e3b\u673a\u4e0a\u7684\u540c\u4e00\u8f6f\u4ef6\u53d1\u8d77\u7684\u901a\u4fe1,\u5230\u4e86\u7f51\u5173\u8fd9,\u8fdb\u884cNAPT\u8f6c\u6362,\u4f7f\u7528\u7684\u662f\u540c\u4e00\u4e2a\u516c\u7f51IP,\u4f46\u5206\u914d\u7684\u662f\u4e0d\u540c\u7684\u7aef\u53e3\u53f7.. \u4ed4\u7ec6\u60f3\u60f3,\u8fd9\u662f\u4e3a\u4e86\u4e00\u4e00\u5bf9\u5e94.. \u5177\u4f53\u6765\u8bf4,\u5047\u8bbe\u5bb6\u91cc\u7684\u4e24\u53f0\u7535\u8111,\u8ba1\u7b97\u673aA\u548c\u8ba1\u7b97\u673aB\u79c1\u6709\u5730\u5740\u5206\u522b\u662f192.168.0.3\u548c192.168.0.4, \u8ba1\u7b97\u673aA\u548c\u8ba1\u7b97\u673aB\u4e0a\u7684QQ\u8f6f\u4ef6\u90fd\u8981\u53d1\u9001\u4e00\u4e2a\u804a\u5929\u4fe1\u606f\u51fa\u53bb, \u6570\u636e\u5305\u5230\u4e86\u7f51\u5173\u8fd9,\u9700\u8981\u8fdb\u884c\u8f6c\u6362: 192.168.0.3:30000 \u8f6c\u6362\u6210 172.38.1.5:40001 192.168.0.4:30000 \u8f6c\u6362\u6210 172.38.1.5:40002 \u63a5\u7740,\u8ba1\u7b97\u673aA\u548cB\u4e0a\u7684QQ\u8f6f\u4ef6\u9700\u8981\u63a5\u53d7\u804a\u5929\u4fe1\u606f, \u54cd\u5e94\u7684\u6570\u636e\u5305\u6839\u636e\u8def\u7531\u5668\u7684\u6620\u5c04\u8868\u8fdb\u884cIP\u548c\u7aef\u53e3\u7684\u8f6c\u6362: 172.38.1.5:40001 \u8f6c\u6362\u6210 192.168.0.3:30000 172.38.1.5:40002 \u8f6c\u6362\u6210 192.168.0.4:30000 \u53ef\u4ee5\u8fd9\u6837\u7406\u89e3, 40001\u300140002\u5206\u522b\u4ee3\u8868\u4e86\u8ba1\u7b97\u673aA\u548c\u8ba1\u7b97\u673aB,30000\u4ee3\u8868\u7684\u662f\u8ba1\u7b97\u673a\u4e0a\u7684QQ\u8f6f\u4ef6...","title":"NAT"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_3","text":"\u5982\u4f55\u786e\u5b9aIP\u5730\u5740\u54ea\u4e9b\u90e8\u5206\u662f\u7f51\u7edc\u53f7\u5462\uff1f\u5c31\u8981\u7528\u5230\u5b50\u7f51\u63a9\u7801\uff01\uff01 \u5b50\u7f51\u63a9\u7801(netmask): \u7528\u6765\u6807\u8bc6\u4e00\u4e2aip\u5730\u5740\u7684\u7f51\u7edc\u53f7\u4e2a\u6570 \u4ece\u5de6\u5230\u53f3\u8fde\u7eed\u76841,\u8fde\u7eed\u76840. \u53ea\u8981\u5c5e\u4e8e\u7f51\u7edc\u53f7,\u5b50\u7f51\u63a9\u7801\u5c31\u6807\u8bb0\u4e3a1; \u53ef\u4ee5\u7b80\u5199 -- eg 172.16.10.2/ 24 (24\u4ee3\u8868IP\u5730\u5740\u7684\u524d24\u4f4d\u662f\u7f51\u7edc\u53f7) \u5355\u72ec\u7684IP\u5730\u5740\u6ca1\u6709\u610f\u4e49,\u8981\u4e0e\u5b50\u7f51\u63a9\u7801\u4e00\u8d77\u5de5\u4f5c : IP\u5730\u5740 + \u5b50\u7f51\u63a9\u7801 --> \u6807\u8bc6\u67d0\u4e2a\u5c40\u57df\u7f51\u7684\u4f4d\u7f6e Ps: \u5373\u5b50\u7f51\u63a9\u7801\u544a\u8bc9\u4e86\u6211\u4eecIP\u5730\u5740\u7684\u7f51\u7edc\u53f7..\u6216\u8005\u662f\u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u6211\u4eec\u80fd\u77e5\u9053\u7f51\u7edc\u5730\u5740(IP\u6240\u5904\u7684\u5c40\u57df\u7f51).. \u901a\u5e38\u4e3a\u4e86\u65b9\u4fbf\u53ea\u4f1a\u8bf4IP\u5730\u5740,\u81ea\u5df1\u8981\u660e\u767d\u8fd8\u6709\u5b50\u7f51\u63a9\u7801!","title":"\u5b50\u7f51\u63a9\u7801"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_4","text":"\u4e8c\u8fdb\u5236\u7684IP\u5730\u5740\u4e0e\u4e8c\u8fdb\u5236\u7684\u5b50\u7f51\u63a9\u7801\u505a\u6309\u4f4d\u4e0e\u8fd0\u7b97\u5f97\u5230\u7f51\u7edc\u5730\u5740/\u5b50\u7f51\u5730\u5740 -- \u540c1\u4e3a1,\u5426\u5219\u4e3a0 \u4f8b1> \u6c42IP\u5730\u5740172.16.10.4/24\u7684\u5b50\u7f51\u5730\u5740 10101100.00010000.00001010.00000100 ==> 172.16.10.4 11111111.11111111.11111111.00000000 ==> 255.255.255.0 10101100.00010000.00001010.00000000 ==> 172.16.10.0 \u4f8b2> \u6c42IP\u5730\u5740172.16.10.5/24\u7684\u5b50\u7f51\u5730\u5740 10101100.00010000.00001010.00000101 ==> 172.16.10.5 11111111.11111111.11111111.00000000 ==> 255.255.255.0 10101100.00010000.00001010.00000000 ==> 172.16.10.0 \u5b50\u7f51\u5730\u5740\u76f8\u540c,\u4ee3\u8868\u5904\u4e8e\u540c\u4e00\u4e2aLAN(\u5c40\u57df\u7f51)\u4e2d, So, 172.16.10.4/24 \u4e0e 172.16.10.5/24 \u662f\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5/\u5c40\u57df\u7f51.\u5b83\u4e24\u901a\u4fe1\u9760mac\u5730\u5740\u5c31\u884c.","title":"\u7f51\u7edc\u5730\u5740"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_5","text":"\u501f\u4e3b\u673a\u4f4d\u7ed9\u7f51\u7edc\u4f4d\u4f7f\u7528,\u4e5f\u5c31\u662f\u5b50\u7f51\u63a9\u7801\u8fde\u7eed1\u7684\u4e2a\u6570\u4f1a\u589e\u591a.. \u901a\u5e38\u4f1a\u5728\u5185\u7f51\u4e2d\u7528\u79c1\u6709\u5730\u5740\u8fdb\u884c\u5b50\u7f51\u5212\u5206...","title":"\u5b50\u7f51\u5212\u5206(\u4e86\u89e3)"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_6","text":"172.16.10.2/16\u8fd9\u4e2aIP\u6240\u5904\u7684\u7f51\u7edc\u662f\u4e00\u4e2aB\u7c7b\u7f51\u7edc.(\u56e0\u4e3a\u6b64IP\u662fB\u7c7b\u4e14\u5b50\u7f51\u63a9\u7801\u662f16\u4f4d,\u6240\u4ee5\u6b64\u7f51\u7edc\u672a\u5212\u5206\u5b50\u7f51) 1> \u5728\u6b64\u7f51\u7edc\u91cc\u6240\u6709\u4e3b\u673a\u7684: \u5b50\u7f51\u63a9\u7801 -- 255.255.0.0 \u7f51\u7edc\u53f7 -- 172.16. \u7f51\u7edc\u5730\u5740 -- 172.16.0.0 (\u7f51\u7edc\u53f7+\u4e3b\u673a\u53f7\u51680) \u5e7f\u64ad\u5730\u5740 -- 172.16.255.255 (\u7f51\u7edc\u53f7+\u4e3b\u673a\u53f7\u51681) 2> \u6b64\u7f51\u7edc\u53ef\u7528\u4e3b\u673aIP -- <172.16.0.1 \uff5e 172.16.255.254> \u51712^(8+8)-2=65534\u4e2a\u53ef\u7528\u4e3b\u673a. \u5373\u4e3b\u673a\u5730\u5740,\u53ef\u5206\u914d\u7ed9\u7f51\u7edc\u4e2d\u7ec8\u7aef\u8bbe\u5907\u7684\u5730\u5740,\u4ecb\u4e8e\u7f51\u7edc\u5730\u5740\u4e0e\u5e7f\u64ad\u5730\u5740\u4e4b\u95f4 3> 172.16.10.2/24 \u8fd9\u4e2aIP\u7684\u4e3b\u673a\u53f7 -- 10.2","title":"\u672a\u5212\u5206\u5b50\u7f51"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_7","text":"\u5212\u5206\u6210\u591a\u4e2a\u5b50\u7f51\u540e, \u6bcf\u4e2a\u5b50\u7f51\u5206\u914d\u4e00\u4e2a\u72ec\u7acb\u7684\u5e7f\u64ad\u57df, \u80fd\u8282\u7ea6\u5730\u5740\u3001\u7f13\u89e3\u5185\u7f51\u5e7f\u64ad\u8d1f\u62c5. 172.16.0.0/16 \u5c06\u8fd9\u4e2aB\u7c7b\u7f51\u7edc\u5730\u5740\u5207\u5272\u6210\u4e00\u4e2a\u4e2a\u5c0f\u7684\u7f51\u6bb5/\u5c40\u57df\u7f51.\u5982\u4f55\u8fdb\u884c\u5b50\u7f51\u5212\u5206\u5462\uff1f 172.16.0.0/17 \u5411\u4e3b\u673a\u53f7\u501f\u4e00\u4f4d \u501f\u7684\u8fd9\u4e00\u4f4d\u79f0\u4e3a\u5b50\u7f51\u4f4d(\u53ef\u4e3a 0 \u4ea6\u53ef\u4e3a 1) 1> \u82e5\u5b50\u7f51\u4f4d\u4e3a0: \u5b50\u7f51\u5730\u5740/\u7f51\u7edc\u5730\u5740: 172.16.0.0/17 \u5b50\u7f51\u63a9\u7801: 255.255.128.0 \u5e7f\u64ad\u5730\u5740(\u5269\u4e0b15\u4e2a\u4e3b\u673a\u4f4d\u5168\u4e3a1): 172.16.127.255 \u4e3b\u673a: 172.16.0.1~172.16.127.254 \u5171128*254\u4e2a 1> \u82e5\u5b50\u7f51\u4f4d\u4e3a1: \u5b50\u7f51\u5730\u5740/\u7f51\u7edc\u5730\u5740: 172.16.128.0/17 \u5b50\u7f51\u63a9\u7801: 255.255.128.0 \u5e7f\u64ad\u5730\u5740(\u5269\u4e0b15\u4e2a\u4e3b\u673a\u4f4d\u5168\u4e3a1): 172.16.255.255 \u4e3b\u673a: 172.16.128.1~172.16.255.254 \u5171(255-128+1)*254\u4e2a \u4e24\u4e2a\u516c\u5f0f 1> 2^m = \u5411\u4e3b\u673a\u4f4d\u501f\u4f4d\u540e\u4ea7\u751f\u7684\u5b50\u7f51\u4e2a\u6570 (m\u4e3a\u6240\u501f\u4f4d\u6570) Ps: \u901a\u5e38\u81f3\u5c11\u4f1a\u501f\u4e24\u4f4d,\u56e0\u4e3a\u5212\u5206\u5b50\u7f51\u540e,\u5904\u4e8e\u5934\u548c\u5c3e\u7684\u5b50\u7f51\u62ff\u6765\u7528\u662f\u6ca1\u95ee\u9898\u7684,\u4f46\u5927\u5bb6\u7ea6\u5b9a\u4e0d\u4f1a\u7528.. 2> 2^n \u2013 2 = \u5411\u4e3b\u673a\u4f4d\u501f\u4f4d\u540e\u4ea7\u751f\u7684\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u53ef\u7528\u4e3b\u673aIP\u6570 (n\u4e3a\u539f\u4e3b\u673a\u4f4d\u7684\u4e2a\u6570\u51cf\u53bb\u88ab\u501f\u4f4d\u7684\u4e2a\u6570\u540e\u7684\u5269\u4f59\u4f4d\u6570) \u51cf2\u662f\u56e0\u4e3a\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u7684\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\u4e0d\u80fd\u7528","title":"\u5212\u5206\u5b50\u7f51"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_8","text":"\u2605\u95ee: 192.168.1.64/27\u80fd\u5426\u5206\u914d\u7ed9PC\u4f7f\u7528\uff1f \u9996\u5148\u53ef\u4ee5\u770b\u51fa\u662f\u5c06192.168.1.0/24 \u8fd9\u4e2aC\u7c7b\u7f51\u7edc\u505a\u4e86\u4e00\u4e2a\u5b50\u7f51\u5212\u5206,\u501f\u4e863\u4f4d,\u53d8\u6210\u4e86192.168.1.0/27, \u4ea7\u751f\u4e862^3 = 8\u4e2a\u5b50\u7f51,\u540c\u65f6\u6bcf\u4e2a\u5b50\u7f51\u67092^5-2=30\u4e2a\u53ef\u7528IP. 192.168.1. 000 _ _ _ \u7f51\u7edc\u5730\u5740: 192.168.1.0 / 27 \u5e7f\u64ad\u5730\u5740\uff1a192.168.1.31 192.168.1. 001 _ _ _ 192.168.1.32 / 27 63 192.168.1. 010 _ _ _ 192.168.1.64 / 27 95 192.168.1. 011 _ _ _ 192.168.1.96 / 27 127 192.168.1. 100 _ _ _ 192.168.1.128 / 27 159 \u2026 \u2026 \u2026 \u4ee5\u4e0a\u8fd9\u4e2a\u65b9\u6cd5\u592a\u7b28\uff01\uff01\u6709\u806a\u660e\u4e00\u70b9\u7684\u529e\u6cd5. \u8fd9\u6837\u601d\u8003 \u501f\u4e863\u4f4d,\u90a3\u4e488\u4e2a\u5b50\u7f51,\u6bcf\u4e2a\u5b50\u7f51\u90fd\u670932\u4e2a\u4e3b\u673aIP(\u4e0d\u7ba1\u90a3\u4e24\u4e2a\u662f\u5426\u770b\u53ef\u7528),\u4e5f\u5c31\u662f\u8bf4\u6bcf\u4e2a\u5b50\u7f51\u5757\u7684\u5927\u5c0f\u4e3a32\u4e2a. \u6240\u4ee5 \u5f80\u540e\u52a032, \u5c31\u662f\u6bcf\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740; \u77e5\u9053\u4e86\u76f8\u90bb\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740, \u518d\u770b\u770b\u5e7f\u64ad\u5730\u5740\u7684\u6982\u5ff5, \u5e7f\u64ad\u5730\u5740\u4f7f\u7528\u7684\u662f\u8be5\u7f51\u7edc\u8303\u56f4\u5185\u6700\u5927\u5730\u5740, \u6240\u4ee5\u770b\u4e0b\u4e00\u4e2a\u76f8\u90bb\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u518d\u51cf\u4e00\u5c31\u884c\u5566\uff01","title":"\u7ec3\u4e60"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#vlan","text":"","title":"VLAN(\u4e86\u89e3)"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_9","text":"\u9694\u79bb\u662f\u6307\u5c5e\u4e8e\u4e0d\u540c\u7684\u5c40\u57df\u7f51 \u4e8c\u5c42\u9694\u79bb: \u4e24\u53f0\u8ba1\u7b97\u673a\u63a5\u5165\u4e0d\u540c\u7684\u4ea4\u6362\u673a \u4e09\u5c42\u9694\u79bb: \u5b50\u7f51\u5730\u5740\u4e0d\u540c \u5047\u8bbe\u4e00\u4e2a\u6559\u5ba4ABCD\u56db\u53f0\u8ba1\u7b97\u673a\u90fd\u63a5\u5165\u540c\u4e00\u4e2a\u4ea4\u6362\u673a. 1> \u90a3\u4e48\u8fd9\u4e2a\u6559\u5ba4\u7684\u56db\u53f0\u8ba1\u7b97\u673a\u5728\u4e8c\u5c42\u662f\u8fde\u901a\u7684,\u4f46\u4e0d\u80fd\u8bf4\u8fd9\u56db\u53f0\u8ba1\u7b97\u673a\u90fd\u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51; 2> \u82e5\u8fdb\u884c\u4e86\u5b50\u7f51\u5212\u5206,\u90a3\u4e48\u5904\u4e8e\u4e0d\u540c\u5b50\u7f51\u7684\u8ba1\u7b97\u673a\u5b9e\u73b0\u4e86\u4e09\u5c42\u9694\u79bb; arp\u8ba1\u7b97\u7684\u65f6\u5019\u53ef\u4e0d\u4f1a\u7ba1\u8fd9\u4e9b\u8ba1\u7b97\u673a\u662f\u5426\u8fde\u5728\u540c\u4e00\u4e2a\u4ea4\u6362\u673a,\u5b83\u53ea\u7ba1\u76f8\u4e92\u901a\u4fe1\u7684\u8ba1\u7b97\u673a\u7f51\u7edc\u5730\u5740\u662f\u5426\u76f8\u540c. A: 192.168.1.1/25 B: 192.168.1.2/25 -- \u5b50\u7f51\u4f4d\u4e3a0 C: 192.168.1.129/25 D: 192.168.1.130/25 -- \u5b50\u7f51\u4f4d\u4e3a1 \u6570\u636e\u5305\u7684\u8d70\u5411: \u8ba1\u7b97\u673aA - \u6559\u5ba4\u4ea4\u6362\u673a - \u6559\u5ba4\u8def\u7531\u5668 - \u6559\u5ba4\u4ea4\u6362\u673a - \u8ba1\u7b97\u673aD 3> \u4e8c\u5c42\u8fde\u901a,\u4e09\u5c42\u662f\u9694\u79bb\u7684. \u8fd9\u79cd\u8bbe\u8ba1\u5f88\u4e0d\u5408\u7406!! \u56e0\u4e3a\u4e8c\u5c42\u8fde\u901a,\u4ea4\u6362\u673a\u8fdb\u884c\u5e7f\u64ad\u65f6(\u4ea4\u6362\u673a\u4f1a\u5728\u4e24\u79cd\u60c5\u51b5\u4e0b\u5e7f\u64ad),\u4e0d\u540c\u5b50\u7f51\u7684\u8ba1\u7b97\u673a\u56e0\u4e3a\u8fde\u5728\u540c\u4e00\u4e2a\u4ea4\u6362\u673a\u4e0a\u90fd\u80fd\u6536\u5230!!! \u4e00\u822c\u60c5\u51b5\u4e0b,\u4e8c\u4e09\u5c42\u5e94\u8be5\u540c\u65f6\u9694\u79bb! 4> \u600e\u4e48\u5b9e\u73b0\u4e8c\u4e09\u5c42\u540c\u65f6\u9694\u79bb\u5462\uff1f \u73b0\u5728\u7684\u4ea4\u6362\u673a\u90fd\u652f\u6301\u5212\u5206\u591a\u4e2avlan(\u865a\u62df\u5c40\u57df\u7f51) .. ,AB\u5212\u5206\u5230\u4e00\u4e2avlan\u91cc,CD\u5212\u5206\u5230\u53e6\u5916\u4e00\u4e2avlan\u91cc,\u8fd9\u6837\u7684\u8bdd,\u7b2c\u4e00\u4e2avlan\u7684\u5e7f\u64ad\u4e0d\u80fd\u8513\u5ef6\u5230\u7b2c\u4e8c\u4e2avlan\u91cc\u9762!!! 192.168.1.0 \u8fd9\u4e2a\u7f51\u7edc\u5730\u5740\u8fdb\u884c\u5b50\u7f51\u5212\u5206,\u6839\u636e\u771f\u5b9e\u9700\u6c42\u5212\u5206\u51fa\u591a\u4e2a\u5b50\u7f51,\u6bcf\u4e2a\u5b50\u7f51\u90fd\u652f\u6301\u591a\u53f0\u4e3b\u673a.. \u518d\u7ed3\u5408\u4ea4\u6362\u673a\u7684vlan.. \u5b9e\u73b0\u4e8c\u4e09\u5c42\u540c\u65f6\u9694\u79bb. \u7efc\u4e0a: \u4e8c\u5c42\u8fde\u901a,\u4e09\u5c42\u662f\u53ef\u4ee5\u9694\u79bb\u7684,\u5373\u4e24\u53f0\u8ba1\u7b97\u673a\u63a5\u5165\u540c\u4e00\u4e2a\u4ea4\u6362\u673a,\u4e0d\u4e00\u5b9a\u5728\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185... \u4e0d\u5408\u7406; \u4e8c\u5c42\u9694\u79bb\u5e94\u8be5\u4e0e\u4e09\u5c42\u9694\u79bb\u4fdd\u6301\u4e00\u81f4;","title":"\u4e8c\u5c42\u9694\u79bb\u4e0e\u4e09\u5c42\u9694\u79bb"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#vlan_1","text":"\u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/p/6710751.html 1> \u5e26vlan\u7684\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u5206\u4e3a\u4e24\u7c7b: (\u7ed3\u5408\u8fd9\u4e24\u4e2a\u7aef\u53e3\u53ef\u4ee5\u5b9e\u73b0\u8de8\u4ea4\u6362\u673a\u5212\u5206vlan) Access port -- \u4e3b\u8981\u7528\u4e8e\u8fde\u63a5\u7535\u8111 \u8fd9\u4e9b\u7aef\u53e3\u4f1a\u88ab\u6253\u4e0aVLAN Tag(\u4ea4\u6362\u673a\u624d\u80fd\u77e5\u9053\u8ba1\u7b97\u673a\u5c5e\u4e8e\u54ea\u4e00\u4e2avlan) Trunk por -- \u4e3b\u8981\u5c06\u4ea4\u6362\u673a\u4e0e\u4ea4\u6362\u673a\u8fdb\u884c\u4e00\u4e2a\u4e32\u8fde.. 2> vlan\u7684\u4e0d\u8db3\u4e4b\u4e00: \u5b83\u6700\u591a\u53ea\u652f\u6301 4096 \u4e2a VLAN \u7f51\u7edc(\u8fd8\u8981\u9664\u53bb\u51e0\u4e2a\u9884\u7559\u7684), \u5bf9\u4e8e\u5927\u578b\u6570\u636e\u4e2d\u5fc3\u7684\u6765\u8bf4,\u8fd9\u4e2a\u6570\u91cf\u662f\u8fdc\u8fdc\u4e0d\u591f. \u4ea4\u6362\u673a\u505a\u96c6\u7fa4\u63d0\u5347\u6027\u80fd,\u9632\u6b62\u5355\u70b9\u6545\u969c.\u7ad9\u5728\u7269\u7406\u5c42\u9762\u662f\u4e24\u53f0\u4ea4\u6362\u673a,\u7ad9\u5728\u903b\u8f91\u5c42\u9762\u662f\u4e00\u53f0\u8d85\u7ea7\u4ea4\u6362\u673a. \u5728\u7269\u7406\u5c42\u9762,\u4e00\u53f0\u670d\u52a1\u5668\u9700\u8981\u6709\u4e24\u6839\u7ebf\u5206\u522b\u8fde\u63a5\u5230\u8fd9\u4e24\u4e2a\u4ea4\u6362\u673a\u540c\u4e00\u4e2a\u7aef\u53e3(eg 10\u53f7\u7aef\u53e3).. \u589e\u52a0\u6027\u80fd,\u9632\u6b62\u5355\u70b9\u6545\u969c(\u6709\u65f6\u95f4\u89e3\u51b3\u95ee\u9898) \u6240\u4ee5\u5728 \u903b\u8f91\u5c42\u9762\u7aef\u53e3\u6570\u662f\u6ca1\u6709\u589e\u52a0\u7684 !!!","title":"vlan\u7b80\u4ecb"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#arp","text":"[\u627f\u4e0a\u542f\u4e0b] \u8ba1\u7b97\u673aA\u5982\u4f55\u786e\u5b9a\u4e0e\u8ba1\u7b97\u673aB\u662f\u5426\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185? \u7b97IP\u6240\u5904\u7684\u5b50\u7f51/\u7f51\u7edc\u5730\u5740. 1> \u82e5\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185,\u5982\u4f55\u901a\u4fe1\uff1f \u901a\u8fc7\u6570\u636e\u94fe\u8def\u5c42\u7684\u5b66\u4e60,\u6211\u4eec\u77e5\u9053\u8be5\u7528\u4ee5\u592a\u7f51\u534f\u8bae,\u57fa\u4e8emac\u5730\u5740\u901a\u8fc7\u6570\u636e\u94fe\u8def\u5c42\u7684\u4e8c\u5c42\u4ea4\u6362\u673a\u8fdb\u884c\u5e7f\u64ad 2> \u82e5\u8de8\u5c40\u57df\u7f51,\u5982\u4f55\u901a\u4fe1\uff1f \u63d0\u4e00\u5634,\u8fd9\u6d89\u53ca\u5230\u516c\u7f51\u7684\u8def\u7531\u534f\u8bae\u5566.(\u4e0d\u8fc7\u591a\u6df1\u7a76). \u4f46\u5c40\u57df\u7f51\u5230\u516c\u7f51\u7684\u8fc7\u7a0b\u8fd8\u662f\u9700\u8981\u4e86\u89e3\u7684.. \u5267\u900f : \u4e0d\u7ba1\u662f\u5426\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185,\u4ea4\u6362\u673a\u90fd\u9700\u8981\u4e8b\u5148\u5c06ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305\u8fdb\u884c\u5e7f\u64ad!!! \u7ec6\u8282 : \u6570\u636e\u94fe\u8def\u5c42\u7684<\u6570\u636e\u5e27>\u91cc\u7684\u76ee\u7684mac\u5730\u5740\u662f\u901a\u8fc7ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305\u5e7f\u64ad\u540e\u5f97\u5230\u7684!!!","title":"ARP\u534f\u8bae"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#ip_4","text":"1> \u901a\u4fe1\u7b2c\u4e00\u6b65\u5148\u62ff\u5230\u76ee\u6807\u4e3b\u673a\u7684IP\u5730\u5740 2> \u5224\u65ad\u51fa\u76ee\u6807\u4e3b\u673a\u4e0e\u81ea\u5df1(\u6e90\u4e3b\u673a)\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u91cc. \u25cb \u82e5\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u91cc,\u6570\u636e\u5305\u7684\u8d70\u5411: \u6e90\u4e3b\u673a ---> \u672c\u5730\u4ea4\u6362\u673a ---> \u76ee\u6807\u4e3b\u673a \u25cb \u82e5\u4e0d\u5728,\u6570\u636e\u5305\u7684\u8d70\u5411: \u6e90\u4e3b\u673a ---> \u672c\u5730\u4ea4\u6362\u673a ---> \u672c\u5730\u8def\u7531\u5668 ---> \u516c\u7f51 (\u8fd0\u8425\u5546\u7684\u4e00\u7cfb\u5217\u7684\u7f51\u7edc\u8bbe\u5907) ---> / \u76ee\u6807\u8def\u7531\u5668 ---> \u76ee\u6807\u4ea4\u6362\u673a ---> \u76ee\u6807\u4e3b\u673a Ps: \u672c\u5730\u8def\u7531\u5668\u7b97\u4e0d\u7b97\u5c40\u57df\u7f51\u91cc\u7684\u8bbe\u5907?\u7b97!\u56e0\u4e3a\u5b83\u8fde\u5230\u4e86\u4ea4\u6362\u673a\u4e0a.","title":"IP\u6570\u636e\u5305\u7684\u8d70\u5411"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#arp_1","text":"\u6e90\u4e3b\u673aA IP -- 172.16.10.10/24 \u76ee\u6807\u4e3b\u673aB IP -- 172.16.10.11/24 \u76ee\u6807\u4e3b\u673aC IP -- 101.200.10.22/24 \u8981\u6653\u5f97 : \u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6709\u81ea\u5df1\u7684MAC\u5730\u5740\u3001\u4f1a\u63d0\u524d\u8bbe\u7f6e\u81ea\u5df1\u7684IP\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u548c\u9ed8\u8ba4\u7f51\u5173\u7684IP\u5730\u5740.. \u6ce8\u610f\u54e6!\u6bcf\u53f0\u7535\u8111\u91cc\u90fd\u6709\u4e2aARP\u7f13\u5b58\u8868(IP\u5730\u5740\u4e0emac\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u8868),\u4e00\u5f00\u59cb\u7684\u65f6\u5019\u8fd9\u4e2a\u8868\u662f\u7a7a\u7684,\u901a\u8fc7\u5927\u5bb6\u4e0d\u65ad\u5e7f\u64ad arp \u8bf7\u6c42,\u6700\u7ec8\u6240\u6709\u7535\u8111\u91cc\u9762\u7684arp \u7f13\u5b58\u8868\u90fd\u4f1a\u66f4\u65b0\u5b8c\u6574... step1: \u62ff\u5230\u76ee\u6807\u4e3b\u673a\u7684IP\u4e0e\u5b50\u7f51\u63a9\u7801 step2: arp\u534f\u8bae\u4f1a\u7b97\u51fa\u672c\u673a\u548c\u76ee\u6807\u4e3b\u673a\u7684\u7f51\u7edc\u5730\u5740/\u5b50\u7f51\u5730\u5740. step3: \u5224\u65ad\u6e90\u7684\u5b50\u7f51\u5730\u5740\u4e0e\u76ee\u6807\u7684\u5b50\u7f51\u5730\u5740\u662f\u5426\u4e00\u6837. \u5148\u8981\u660e\u786e,\u8fd9\u91cc\u53d1\u7684\u5e7f\u64ad\u5305\u4e0d\u662f\u771f\u6b63\u901a\u4fe1\u7684\u6570\u636e,\u800c\u662f\u901a\u8fc7ARP\u534f\u8bae\u5f97\u5230\u76ee\u6807\u4e3b\u673a\u6216\u7f51\u5173\u7684MAC\u5730\u5740. 1> A\u4e0eB \u5904\u4e8e\u540c\u4e00\u4e2a\u5c40\u57df\u7f51, \u90a3\u4e48 \u901a\u4fe1\u5c31\u662f\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5185\u901a\u4fe1,\u9760\u7684\u662fmac\u5730\u5740\u5b9a\u4f4d\u5230\u5bf9\u65b9\u5728\u54ea\u91cc. A\u5982\u4f55\u5f97\u5230B\u7684mac\u5730\u5740\u5462\uff1f \u25b3 A\u53d1\u9001ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305. \u25b3 \u4ea4\u6362\u673a\u62ff\u5230\u8fd9\u4e2a\u5e7f\u64ad\u5305,\u770b\u5230\u76ee\u6807MAC\u662f FF:FF:FF:FF:FF:FF ,\u4f1a\u5c06\u6b64\u5e7f\u64ad\u5305\u8fdb\u884c\u5e7f\u64ad \u25b3 \u6b64\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u4f1a\u62c6\u5f00\u5e7f\u64ad\u5305\u770b\u76ee\u6807IP\u662f\u4e0d\u662f\u81ea\u5df1,\u662f\u7684\u8bdd\u5c31\u4f1a\u5e26\u4e0a\u81ea\u5df1\u7684mac\u5730\u5740\u56de\u5305.. \u8fd9\u6837A\u5c31\u80fd\u5f97\u5230B\u7684mac\u5730\u5740.. \u4e3b\u673aA\u7684ARP\u7f13\u5b58\u8868\u4e5f\u5f97\u5230\u4e86\u66f4\u65b0.. A\u518d\u91cd\u65b0\u5c01\u88c5\u53d1\u8d77\u771f\u6b63\u7684\u901a\u4fe1.. \u771f\u6b63\u7684\u901a\u4fe1\u6570\u636e: mac(A) mac(B) IP(A) IP(B) \u6570\u636e\u90e8\u5206 2> A\u4e0eC \u662f\u8de8\u5c40\u57df\u7f51\u4f20\u8f93, \u90a3\u4e48 \u901a\u4fe1\u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5185\u901a\u4fe1,\u9760\u8def\u7531\u5668\u628a\u6570\u636e\u5305\u8f6c\u53d1\u51fa\u53bb A\u4e0b\u4e00\u6b65\u9700\u8981\u5f97\u5230\u6240\u5904\u5c40\u57df\u7f51\u7684\u9ed8\u8ba4\u7f51\u5173\u7684mac\u5730\u5740!(A\u662f\u77e5\u9053/\u8bbe\u7f6e\u4e86\u9ed8\u8ba4\u7f51\u5173\u7684IP\u5730\u5740\u7684) \u25b3 A\u540c\u6837\u4f1a\u53d1\u9001ARP\u534f\u8bae\u7684\u5e7f\u64ad\u5305.\u4ea4\u6362\u673a\u62ff\u5230\u8fd9\u4e2a\u5e7f\u64ad\u5305\u540c\u6837\u4e5f\u4f1a\u8fdb\u884c\u5e7f\u64ad. \u25b3 \u4f46\u53ea\u6709\u8def\u7531\u5668\u4f1a\u54cd\u5e94,\u4e8e\u662f\u4e4eA\u62ff\u5230\u4e86\u5c40\u57df\u7f51\u91cc\u7f51\u5173/\u8def\u7531\u5668\u7684mac\u5730\u5740.. \u771f\u6b63\u7684\u901a\u4fe1\u6570\u636e: mac(A) mac(\u7f51\u5173) IP(A) IP(C) \u6570\u636e\u90e8\u5206 \u6570\u636e\u5305\u901a\u8fc7\u8def\u7531\u5668\u5230\u4e86\u516c\u7f51,\u5728\u516c\u7f51\u4e2d\u9700\u8981\u6839\u636e\u8def\u7531\u8868 hop-by-hop!! \u5e7f\u64ad\u5305\u7684\u683c\u5f0f\u5982\u4e0b : \u6e90MAC \u76ee\u6807MAC \u6e90IP \u76ee\u6807IP \u6570\u636e\u90e8\u5206 \u6e90\u4e3b\u673aA mac A FF:FF:FF:FF:FF:FF 172.16.10.10/24 B\u4e3b\u673a\u7684IP or \u7f51\u5173\u7684IP \u6570\u636e Ps: FF-FF-FF-FF-FF-FF \u662f\u7528\u4e8e\u5e7f\u64ad\u7684mac\u5730\u5740 \u5e7f\u64ad\u5305\u7684\u76ee\u6807IP\u662f\u8c01,\u5c31\u5728\u8ddf\u8c01\u8981mac\u5730\u5740 \u4ea4\u6362\u673a\u53ea\u6709\u5728\u4e24\u79cd\u60c5\u51b5\u624d\u628a\u5305\u8fdb\u884c\u5e7f\u64ad,\u62c6\u5305\u65f6\u53d1\u73b0: 1> \u76ee\u6807mac\u662f: FF:FF:FF:FF:FF:FF 2> \u76ee\u6807mac\u4e0d\u5b58\u5728\u4e8emac\u5730\u5740\u8868\u4e2d \u4e3a\u5565\u8bf4IP\u5730\u5740\u4e0d\u53ef\u6216\u7f3a: 1> ARP\u534f\u8bae\u9700\u8981. \u4ee5\u592a\u7f51\u534f\u8bae\u91cc\u7684\u76ee\u7684mac\u5730\u5740\u8d77\u521d\u662f\u4e0d\u77e5\u9053\u7684,\u9700\u8981\u4e8b\u5148\u901a\u8fc7ARP\u534f\u8bae\u5f97\u5230. 2> \u5904\u4e8e\u7f51\u7edc\u5c42\u7684\u8def\u7531\u5668\u4f5c\u4e3a\u4e00\u53f0\u6bcf\u4e2a\u7aef\u53e3\u90fd\u62e5\u6709\u72ec\u7acb\u7684MAC\u5730\u5740\u7684\u8bbe\u5907,\u53ef\u4ee5\u628a\u6570\u636e\u5305\u505a\u4e00\u6b21\u8f6c\u53d1.","title":"ARP\u7684\u5e7f\u64ad\u5305"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/5_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E7%BD%91%E7%BB%9C%E5%B1%82/#_10","text":"A\u7ed9F\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u5305! \u7f51\u7edc\u62d3\u6251\u56fe\u4e2d,\u8def\u7531\u56681\u4e0e\u8def\u7531\u56682\u8fdb\u884c\u4e86\u8fde\u63a5..\u8def\u7531\u56681\u7684\u8def\u7531\u8868\u5982\u4e0b: Ps:\u8def\u7531\u8868\u662f\u6839\u636e\u5f88\u591a\u8def\u7531\u7b97\u6cd5/\u57fa\u4e8eip\u5730\u5740\u7684\u8def\u7531\u534f\u8bae\u5f97\u6765\u7684,\u4e0d\u662f\u6211\u4eec\u7814\u7a76\u7684\u8303\u56f4.. | \u76ee\u7684\u5730\u5740 | \u4e0b\u4e00\u8df3 | \u7aef\u53e3 | | :--------------: | :-----------: | :--: | | 192.168.0.0/24 | | 0 | | 192.168.1.0/24 | | 1 | | 192.168.2.0/24 | 192.168.100.5 | | | 192.168.100.0/24 | | 2 | \u82e5\u8def\u7531\u5668\u8f6c\u53d1\u7684\u6570\u636e\u5305\u91cc\u76ee\u7684IP\u5730\u5740\u662f192.168.1.0/24\u8fd9\u4e2a\u5b50\u7f51\u91cc\u7684,\u5219\u901a\u8fc71\u53f7\u7aef\u53e3\u8fdb\u884c\u8f6c\u53d1. \u82e5\u5339\u914d\u5230\u7684\u662f\u4e0b\u4e00\u8df3,\u5219\u9700\u8981\u518d\u6b21\u5339\u914d\u8def\u7531\u8868,\u627e\u5230\u5176\u7aef\u53e3.. 1> \u9996\u5148\u6839\u636eA\u4e0eF\u5404\u81ea\u7684IP\u548c\u5b50\u7f51\u63a9\u7801\u4e0e\u8fd0\u7b97\u5f97\u5230\u7f51\u7edc\u5730\u5740\u5206\u522b\u4e3a 192.168.0.0, 192.168.2.0 \u5f97\u77e5AF\u5904\u4e8e\u4e0d\u540c\u7684\u5c40\u57df\u7f51. \u4e8e\u662f\u4e4eA\u4f1a\u5148\u5c06\u6570\u636e\u5305\u53d1\u7ed9\u9ed8\u8ba4\u7f51\u5173/\u8def\u7531\u56681(192.168.0.254) \u518d\u7ec6\u5316\u8fd9\u4e00\u8fc7\u7a0b,\u4e3b\u673aA\u91cc\u662f\u8bbe\u7f6e\u7684\u6709\u9ed8\u8ba4\u7f51\u5173\u7684IP\u5730\u5740\u7684. \u25cb \u4e3b\u673aA\u4f1a\u901a\u8fc7\u4ea4\u6362\u673a1\u5bf9arp\u5e7f\u64ad\u5305\u8fdb\u884c\u5e7f\u64ad.. \u25cb \u4e3b\u673aA\u62ff\u5230\u4ea4\u6362\u673a1\u8fde\u63a5\u5230\u8def\u7531\u56681\u4e0a\u7684\u90a3\u4e2a\u7aef\u53e3\u7684mac\u5730\u5740(ABAB).. \u5e76\u66f4\u65b0\u4e3b\u673aA\u7684arp\u7f13\u5b58\u8868 \u25cb \u4e3b\u673aA\u5c06\u6e90MAC\u5730\u5740(AAAA)\u4e0e\u7f51\u5173MAC\u5730\u5740(ABAB)\u5c01\u88c5\u5728\u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8; \u5c06\u6e90IP\u5730\u5740(192.168.0.1)\u548c\u76ee\u7684IP\u5730\u5740(192.168.2.2)\u5c01\u88c5\u5728\u7f51\u7edc\u5c42\u5934\u90e8,\u7136\u540e\u53d1\u5305.. \u5e7f\u64ad\u5305\u7684\u683c\u5f0f: AAAA FF:FF:FF:FF:FF:FF IP(A) IP(\u9ed8\u8ba4\u7f51\u5173) \u6570\u636e \u6570\u636e\u5305\u7684\u683c\u5f0f: MAC(\u4e3b\u673aA) MAC(\u9ed8\u8ba4\u7f51\u5173) IP(A) IP(F) \u6570\u636e\u90e8\u5206 \u6ce8\u610f:\u6570\u636e\u5305\u91cc\u7684\u6e90IP\u548c\u76ee\u7684IP\u5728\u6574\u4e2a\u8fc7\u7a0b\u662f\u4e0d\u4f1a\u53d8\u7684!!! 2> \u4ea4\u6362\u673a1\u62ff\u5230\u6570\u636e\u5305\u540e,\u62c6\u5305\u53d1\u73b0\u76ee\u7684MAC\u5730\u5740\u662fABAB,\u67e5\u8be2MAC\u5730\u5740\u8868,\u4ece\u5bf9\u5e94\u7684\u4ea4\u6362\u673a\u7aef\u53e3\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u7ed9\u4e86\u8def\u7531\u56681. 3> \u6570\u636e\u5305\u5230\u4e86\u8def\u7531\u56681\u8fd9,\u62c6\u5305\u53d1\u73b0\u76ee\u7684mac\u5c31\u662f\u81ea\u5df1\u7684,\u6536\u4e0b\u4e86\u6570\u636e\u5305 \u8def\u7531\u5668\u7ee7\u7eed\u62c6\u5305\u53d1\u73b0\u76ee\u6807IP\u5730\u5740\u662f192.168.2.2,\u6b64IP\u5904\u4e8e192.168.2.0/24\u8fd9\u4e2a\u5b50\u7f51/\u5c40\u57df\u7f51\u4e0b, \u8def\u7531\u56681\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868,\u53d1\u73b0\u4e0b\u4e00\u8df3\u7684\u5730\u5740\u662f192.168.100.5,\u6b64IP\u5904\u4e8e192.168.100.0/24\u7f51\u6bb5, \u518d\u6b21\u5339\u914d\u81ea\u5df1\u7684\u8def\u7531\u8868,\u5339\u914d\u5230\u7684\u7aef\u53e3\u4e3a2.. arp\u5e7f\u64ad\u540e\u5f97\u5230192.168.100.5\u7684mac\u5730\u5740\u4e3aD2D2 \u91cd\u65b0\u5c01\u88c5\u6570\u636e\u5305. \u6570\u636e\u5305\u7684\u683c\u5f0f: D1D1 D2D2 IP(A) IP(F) \u6570\u636e\u90e8\u5206 4> \u6570\u636e\u5305\u5230\u4e86\u8def\u7531\u56682\u8fd9,\u62c6\u5305\u53d1\u73b0\u76ee\u7684mac\u5c31\u662f\u81ea\u5df1\u7684,\u6536\u4e0b\u4e86\u6570\u636e\u5305 \u8def\u7531\u56682\u7ee7\u7eed\u62c6\u5305,\u770b\u5230\u5176\u76ee\u7684\u5730\u5740\u662f192.168.2.2,\u8def\u7531\u56682\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868,\u5339\u914d\u5230\u7aef\u53e3\u53f7\u4e3a1. \u8def\u7531\u56682\u67e5\u8be2\u81ea\u5df1\u7684ARP\u7f13\u5b58\u8868,\u67e5\u8be2\u5230192.168.2.2\u5bf9\u5e94\u7684mac\u662fFFFF(\u82e5ARP\u7f13\u5b58\u8868\u4e2d\u6ca1\u6709\u5219\u4f9d\u65e7\u9700\u8981arp\u5e7f\u64ad). \u5c06mac\u5730\u5740\u5c01\u88c5\u5728\u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8,\u5e76\u4ece1\u53f7\u7aef\u53e3\u628a\u6570\u636e\u5305\u53d1\u51fa\u53bb \u6570\u636e\u5305\u7684\u683c\u5f0f: EFEF FFFF IP(A) IP(F) \u6570\u636e\u90e8\u5206 5> \u4ea4\u6362\u673a3\u6536\u5230\u4e86\u6570\u636e\u5305,\u53d1\u73b0\u76ee\u7684MAC\u5730\u5740\u4e3aFFFF,\u67e5\u8be2\u81ea\u5df1\u7684MAC\u5730\u5740\u8868,\u5c06\u6570\u636e\u5305\u4ece\u5bf9\u5e94\u7684\u4ea4\u6362\u673a6\u53f7\u7aef\u53e3\u53d1\u4e86\u51fa\u53bb. 6> \u6570\u636e\u5305\u5230\u4e86F\u8fd9\u91cc,F\u62c6\u5305\u53d1\u73b0\u76ee\u7684mac\u5730\u5740\u5c31\u662f\u81ea\u5df1,\u4e8e\u662f\u6536\u4e0b\u4e86\u8fd9\u4e2a\u5305. \u53ef\u4ee5\u53d1\u73b0\u53d1\u9001\u7684\u771f\u6b63\u6570\u636e,\u6570\u636e\u5305\u7684\u6e90IP\u548c\u76ee\u6807IP\u662f\u4e0d\u53d8\u7684\uff01\uff01\uff01 \u7f51\u7edc\u5c42(IP\u534f\u8bae)\u672c\u8eab\u6ca1\u6709\u4f20\u8f93\u5305\u7684\u529f\u80fd,\u5305\u7684\u5b9e\u9645\u4f20\u8f93\u662f\u59d4\u6258\u7ed9\u6570\u636e\u94fe\u8def\u5c42(\u4ee5\u592a\u7f51\u4e2d\u7684\u4ea4\u6362\u673a)\u6765\u5b9e\u73b0\u7684!! \u6ce8\u610f\u54e6: \u6e90mac\u548c\u76ee\u7684mac\u6bcf\u6b21\u90fd\u4f1a\u66f4\u6362.. mac\u5730\u5740\u8868\u3001\u4ea4\u6362\u673a\u5e7f\u64ad\u3001\u8def\u7531\u8868\u3001ARP\u5e7f\u64ad \u7ad9\u5728\u4e0d\u540c\u7684\u89c6\u89d2\u89c2\u5bdf,\u5f97\u5230\u4e9b\u8bb8\u89c4\u5219: [ \u7535\u8111\u89c6\u89d2 ] \u9996\u5148\u6211\u8981\u77e5\u9053\u6211\u7684 IP \u4ee5\u53ca\u5bf9\u65b9\u7684 IP \u901a\u8fc7\u5b50\u7f51\u63a9\u7801\u5224\u65ad\u6211\u4eec\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5b50\u7f51 \u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5c31\u901a\u8fc7 arp \u83b7\u53d6\u5bf9\u65b9 mac\u5740\u76f4\u63a5\u6254\u51fa\u53bb \u4e0d\u5728\u540c\u4e00\u4e2a\u5b50\u7f51\u5c31\u901a\u8fc7 arp \u83b7\u53d6\u9ed8\u8ba4\u7f51\u5173\u7684 mac \u5730\u5740\u76f4\u63a5\u6254\u51fa\u53bb [ \u4ea4\u6362\u673a\u89c6\u89d2 ] \u6211\u6536\u5230\u7684\u6570\u636e\u5305\u5fc5\u987b\u6709\u76ee\u6807 MAC \u5730\u5740 \u901a\u8fc7 MAC \u5730\u5740\u8868\u67e5\u6620\u5c04\u5173\u7cfb \u67e5\u5230\u4e86\u5c31\u6309\u7167\u6620\u5c04\u5173\u7cfb\u4ece\u6211\u7684\u6307\u5b9a\u7aef\u53e3\u53d1\u51fa\u53bb \u67e5\u4e0d\u5230\u5c31\u6240\u6709\u7aef\u53e3\u90fd\u53d1\u51fa\u53bb [ \u8def\u7531\u5668\u89c6\u89d2 ] \u6211\u6536\u5230\u7684\u6570\u636e\u5305\u5fc5\u987b\u6709\u76ee\u6807 IP \u5730\u5740 \u901a\u8fc7\u8def\u7531\u8868\u67e5\u6620\u5c04\u5173\u7cfb \u67e5\u5230\u4e86\u5c31\u6309\u7167\u6620\u5c04\u5173\u7cfb\u4ece\u6211\u7684\u6307\u5b9a\u7aef\u53e3\u53d1\u51fa\u53bb \u67e5\u4e0d\u5230\u5219\u8fd4\u56de\u4e00\u4e2a\u8def\u7531\u4e0d\u53ef\u8fbe\u7684\u6570\u636e\u5305","title":"\u7f51\u7edc\u5c42\u6574\u4e2a\u6d41\u7a0b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/","text":"\u5f15\u8a00 \u00b6 IP+MAC+port \u6807\u8bc6\u4e00\u4e2a\u5168\u4e16\u754c\u8303\u56f4\u5185\u72ec\u4e00\u65e0\u4e8c\u7684\u57fa\u4e8e\u7f51\u7edc\u901a\u4fe1\u7684\u8f6f\u4ef6.. \u53c2\u8003\u94fe\u63a5: https://mp.weixin.qq.com/s/Uf42QEL6WUSHOwJ403FwOA [\u4f20\u8f93\u5c42\u7684\u7531\u6765] \u7f51\u7edc\u5c42\u7684IP\u5730\u5740\u5e2e\u6211\u4eec\u533a\u5206\u5b50\u7f51,\u4ee5\u592a\u7f51\u5c42\u7684MAC\u5e2e\u6211\u4eec\u627e\u5230\u4e3b\u673a.. \u6211\u4eec\u901a\u8fc7IP\u548cMAC\u627e\u5230\u4e86\u4e00\u53f0\u7279\u5b9a\u7684\u4e3b\u673a,\u90a3\u5982\u4f55\u6807\u8bc6\u8fd9\u53f0\u4e3b\u673a\u4e0a\u7279\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f? \u7b54\u6848\u5c31\u662f\u7aef\u53e3.. \u7aef\u53e3\u5373\u5e94\u7528\u7a0b\u5e8f\u4e0e\u7f51\u5361\u5173\u8054\u7684\u7f16\u53f7... [\u4f20\u8f93\u5c42\u529f\u80fd] \u5efa\u7acb \u7aef \u53e3\u5230 \u7aef \u53e3\u7684\u901a\u4fe1 \u7aef\u53e3\u8303\u56f40-65535 , 0-1023\u4e3a\u7cfb\u7edf\u5360\u7528\u7aef\u53e3,\u7aef\u53e3\u5360\u7528\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u8d44\u6e90 \u7aef\u53e3\u6253\u4e2a\u6bd4\u65b9\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edf\u5f00\u7684\u4e00\u4e2a\u4e2a\u7684\u5c0f\u7a97\u53e3,\u5e94\u7528\u8f6f\u4ef6\u6570\u636e\u901a\u8fc7\u8fd9\u4e9b\u5c0f\u7a97\u53e3\u518d\u5230\u7f51\u5361. [\u4f20\u8f93\u5c42\u7684\u6570\u636e] 1> \u4f9d\u7167tcp&udp\u534f\u8bae\u5728\u4f20\u8f93\u5c42\u7684\u6784\u5efa\u7684\u6570\u636e,\u79f0\u4e3a '\u6570\u636e\u6bb5' 2> \u6570\u636e\u6bb5 = head + data head \u91cc\u653e <\u6e90\u7aef\u53e3> \u548c <\u76ee\u6807\u7aef\u53e3> \u7aef\u53e3\u5728\u672c\u673a\u552f\u4e00\u5373\u53ef! UDP \u534f\u8bae \u00b6 UDP\u534f\u8bae -- \u65e0\u8fde\u63a5\u3001\u4e0d\u53ef\u9760\u7684\u7528\u6237\u62a5\u6587\u534f\u8bae.. \u5728\u53d1\u9001\u6570\u636e\u65f6,\u4e0d\u9700\u8981\u5efa\u7acb\u8fde\u63a5,\u62ff\u5230IP\u548c\u7aef\u53e3\u76f4\u63a5\u53d1\u8fc7\u53bb\u4e86..\u53d1\u5b8c\u540e\u6570\u636e\u5c31\u5220\u6389\u4e86. \u5e94\u7528\u573a\u666f: \u67e5\u8be2\u7c7b\u7684\u64cd\u4f5c(eg dhcp\u67e5\u8be2) \u96c6\u7fa4\u7684\u65f6\u95f4\u540c\u6b65 QQ\u804a\u5929 Q: \u524d\u4e09\u5c42\u534f\u8bae\u53ea\u80fd\u628a\u6570\u636e\u5305\u4ece\u4e00\u4e2a\u4e3b\u673a\u642c\u5230\u53e6\u5916\u4e00\u53f0\u4e3b\u673a,\u4f46\u662f,\u5230\u4e86\u76ee\u7684\u5730\u4ee5\u540e, \u6570\u636e\u5305\u5177\u4f53\u4ea4\u7ed9\u54ea\u4e2a\u7a0b\u5e8f(\u8fdb\u7a0b)\u5462\uff1f A: \u9700\u8981\u628a\u901a\u4fe1\u7684\u8fdb\u7a0b\u533a\u5206\u5f00\u6765,\u4e8e\u662f\u5c31\u7ed9\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a\u6570\u5b57\u7f16\u53f7: \u7aef\u53e3\u53f7 So,\u73b0\u76ee\u524d,\u7ecf\u8fc7\u524d\u56db\u5c42(\u4f20\u8f93\u5c42\uff5e\u6570\u636e\u94fe\u8def\u5c42 \u4ece\u4e0a\u5230\u4e0b),\u5e94\u7528\u6570\u636e\u88ab\u5c01\u88c5\u6210\u4e86\u8fd9\u6837: \u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8 \u7f51\u7edc\u5c42\u5934\u90e8 \u4f20\u8f93\u5c42\u5934\u90e8 \u6570\u636e\u90e8\u5206 \u6e90MAC \u76ee\u7684MAC \u6e90IP \u76ee\u7684IP \u6e90\u7aef\u53e3\u53f7 \u76ee\u7684\u7aef\u53e3\u53f7 \u6570\u636e\u90e8\u5206 \u8fd9\u6837\u5b50,\u6211\u4eec\u5c06\u4e3b\u673a\u5230\u4e3b\u673a\u7684\u901a\u4fe1,\u5347\u7ea7\u6210\u4e86\u8fdb\u7a0b\u548c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1.. \u7ecf\u8fc7\u4e0a\u8ff0\u7684\u8fc7\u7a0b,\u6211\u4eec\u5728\u4e0d\u77e5\u4e0d\u89c9\u4e2d\u5c31\u5df2\u7ecf\u5b9e\u73b0\u4e86 UDP \u534f\u8bae \uff01 (\u5f53\u7136 UDP \u534f\u8bae\u4e2d\u4e0d\u5149\u6709\u6e90\u7aef\u53e3\u548c\u76ee\u6807\u7aef\u53e3,\u8fd8\u6709\u6570\u636e\u5305\u957f\u5ea6\u548c\u6821\u9a8c\u503c,\u6211\u4eec\u6682\u4e14\u7565\u8fc7) [\u5f15\u51faTCP\u534f\u8bae] \u7528UDP\u534f\u8baeA\u540cB\u80fd\u5b9e\u73b0\u901a\u4fe1,\u4f46\u8fd9\u4e2a\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u5b58\u5728\u5f88\u591a\u95ee\u9898!!!\u6ca1\u6709\u90a3\u4e48\u7b80\u5355!! \u4e22\u5305\u95ee\u9898\u3001\u6548\u7387\u95ee\u9898\u3001\u987a\u5e8f\u95ee\u9898\u3001\u6d41\u91cf\u95ee\u9898\u3001\u62e5\u585e\u95ee\u9898\u3001\u8fde\u63a5\u95ee\u9898... \u8fd9\u4e9b\u95ee\u9898TCP\u534f\u8bae\u624d\u80fd\u89e3\u51b3!!! TCP\u534f\u8bae \u00b6 TCP\u534f\u8bae -- \u9762\u5411\u8fde\u63a5\u7684\u3001\u53ef\u9760\u7684\u3001\u57fa\u4e8e\u5b57\u8282\u6d41\u7684\u4f20\u8f93\u63a7\u5236\u534f\u8bae netstat -an \u5e94\u7528\u573a\u666f: \u4e0e\u7528\u6237\u6253\u4ea4\u9053\u7684\u5e94\u7528\u7a0b\u5e8f \u53ef\u9760\u4ea4\u4e92 \u00b6 \u2606 [\u4e22\u5305\u95ee\u9898] \u00b6 \u7531\u4e8e\u7f51\u7edc\u7684\u4e0d\u53ef\u9760,A\u4f20\u7ed9B\u7684\u6570\u636e\u5305\u53ef\u80fd\u5728\u534a\u8def\u4e22\u5931.. \u4e0d\u96be\u60f3\u5230,\u5bf9\u4e8e\u4e22\u5305\u95ee\u9898,B\u5e94\u8be5\u544a\u8bc9A\u6570\u636e\u5305\u6ca1\u6536\u5230,A\u518d\u91cd;\u6216\u8005B\u544a\u8bc9A\u4e00\u58f0\u6570\u636e\u5305\u6536\u5230\u4e86. \u505c\u6b62\u7b49\u5f85\u534f\u8bae A\u6bcf\u53d1\u4e00\u4e2a\u5305,\u90fd\u5fc5\u987b\u6536\u5230\u6765\u81eaB\u7684\u786e\u8ba4( \u56de\u4e00\u4e2aACK\u5305 )\u540e,\u518d\u53d1\u4e0b\u4e00\u4e2a; \u5426\u5219\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u786e\u8ba4,\u5c31\u91cd\u4f20\u8fd9\u4e2a\u5305. \u8fd9\u6837\u4ee5\u6765,TCP\u534f\u8bae\u7684\u901a\u4fe1\u8fc7\u7a0b\u6709\u4e86\u4e00\u4e2a\u65b0\u7279\u5f81 -- \u53ef\u9760\u4ea4\u4e92 . \u2606 [\u6548\u7387\u95ee\u9898] \u00b6 \u505c\u6b62\u7b49\u5f85\u89e3\u51b3\u4e86\u4e22\u5305\u95ee\u9898,\u53ef\u9760\u662f\u53ef\u9760,\u4f46\u6548\u7387\u592a\u6162\u4e86.. \u4e8e\u662f\u4e4e,\u6211\u4eec\u63d0\u51fa\u5047\u8bbe,\u7528 \u6d41\u6c34\u7ebf \u7684\u5f62\u5f0f,A\u8fde\u7eed\u53d1\u51e0\u4e2a\u6570\u636e\u5305\u7ed9B,B\u518d\u6309\u6536\u5230\u7684\u987a\u5e8f\u4f9d\u6b21ACK\u786e\u8ba4.. (\u524d\u63d0,A\u53d1\u51fa\u53bb\u7684\u5305\u6309\u7167\u53d1\u9001\u7684\u5148\u540e\u4f9d\u6b21\u5230\u8fbeB,\u624d\u80fd\u4fdd\u8bc1B\u4f9d\u6b21\u56de\u5e94\u7684ACK\u5bf9\u5e94\u7684\u4e0a..) \u770b\u4f3c\u6210\u7acb,\u4f46\u5b9e\u5219\u50bb\u767d\u751c\u4e86.\u7f51\u7edc\u662f\u590d\u6742\u7684,\u4e0d\u53ef\u9760\u7684. A\u53d1\u51fa\u53bb\u7684\u6570\u636e\u5305,\u53ef\u662f\u4f1a\u8d70 \u4e0d\u540c\u7684\u8def\u5f84 (\u8017\u65f6\u4e0d\u540c) \u5230\u8fbeB. \u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5,\u7b2c2\u4e2a\u53d1\u51fa\u53bb\u7684\u5305\u4f1a\u5728\u7b2c5\u4e2a\u53d1\u51fa\u53bb\u7684\u5305\u5230\u8fbeB\u540e\u624d\u5230\u8fbeB.. \u4e5f\u5c31\u662f\u8bf4,\u5728\u6d41\u6c34\u7ebf\u4e2d\u6709\u591a\u4e2a\u6570\u636e\u5305\u548cACK\u5305\u5728\u4e71\u5e8f\u6d41\u52a8,\u4ed6\u4eec\u4e4b\u95f4\u5bf9\u5e94\u5173\u7cfb\u4e71\u6389\u5566!! \u2606 [\u987a\u5e8f\u95ee\u9898] \u00b6 A\u5728\u53d1\u9001\u7684\u6570\u636e\u5305\u4e2d\u589e\u52a0\u4e00\u4e2a \u5e8f\u53f7(seq), \u540c\u65f6B\u8981\u5728 ACK\u5305 \u4e0a\u589e\u52a0\u4e00\u4e2a \u786e\u8ba4\u53f7(ack) . \u8fd9\u6837\u4e0d\u4f46\u89e3\u51b3\u4e86\u505c\u6b62\u7b49\u5f85\u534f\u8bae\u7684\u6548\u7387\u95ee\u9898,\u4e5f\u901a\u8fc7\u6807\u5e8f\u53f7\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u987a\u5e8f\u95ee\u9898. \u73b0\u5b9e\u4e2d,\u4e3a\u4e86\u51cf\u5c11\u7f51\u7edcIO,B\u4f1a\u91c7\u7528 \u7d2f\u8ba1\u786e\u8ba4/\u7d2f\u8ba1\u5e94\u7b54 \u7684\u65b9\u5f0f\u7ed9A\u56de\u590d\u786e\u8ba4\u53f7(ack). \u4e3e\u4e2a\u6817\u5b50: A\u8fde\u7eed\u53d1\u9001\u4e86\u5e26\u67091,2,3\u5e8f\u53f7(seq)\u7684\u6570\u636e\u5305\u7ed9B, B\u6536\u5230\u4e86\u8fd9\u4e09\u4e2a\u6570\u636e\u5305,\u5c06\u56de\u5e94\u4e86\u4e00\u4e2a\u5e26\u6709\u786e\u8ba4\u53f7(ack=4)\u7684ACK\u5305\u7ed9A; \u4ee3\u8868A\u53d1\u9001\u7684\u5e8f\u53f7\u5c0f\u4e8e4\u7684\u6570\u636e\u5305\u90fd\u6536\u5230\u4e86..\u4e5f\u540c\u65f6\u544a\u8bc9A\u4e0b\u4e00\u4e2a\u6570\u636e\u5305\u5e94\u8be5\u53d1\u7684\u5e8f\u53f7\u662f4. Ps: ack\u53f7\u662f\u6536\u5230\u7684\u6700\u540e\u4e00\u4e2a\u6570\u636e\u5305\u7684\u5e8f\u53f7seq+1. So,\u7ea0\u6b63\u4e0b,\u4e0b\u56fe\u4e2dB\u56de\u590dA\u7684ACK\u5305\u7684\u786e\u8ba4\u53f7\u5e94\u8be5\u4e3a4.. \u6ed1\u52a8\u7a97\u53e3\u673a\u5236 \u00b6 TCP\u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0\u4f9d\u6258\u4e8e -- \u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\u6ed1\u52a8\u7a97\u53e3 \u89c6\u9891\u94fe\u63a5: https://www.bilibili.com/video/BV194411h71z !!!!!! Ps: \u56fe\u4e2d\u4e00\u4e2a\u4e2a\u5c0f\u6846\u4ee3\u8868\u4e00\u4e2a\u4e2a\u5b57\u8282, \u6536\u5230\u7684\u6700\u540e\u4e00\u4e2a\u786e\u8ba4\u53f7\u662f3.. \u7a97\u53e3\u4e0a\u8fb9\u754c\u6307\u7684\u662f\u6ed1\u52a8\u7a97\u53e3\u7684\u524d\u6cbf. \u4e09\u6b21\u63e1\u624b \u00b6 \u4e09\u6b21\u63e1\u624b -- \u51c6\u786e\u70b9\u5e94\u8be5\u662f\u4e09\u62a5\u6587\u63e1\u624b,\u5373\u4e00\u6b21\u63e1\u624b\u8fc7\u7a0b\u4e2d\u4ea4\u6362\u4e86\u4e09\u4e2a\u62a5\u6587,\u5e76\u4e0d\u662f\u8fdb\u884c\u4e86\u4e09\u6b21\u63e1\u624b! TCP\u901a\u4fe1\u4e4b\u524d\u5fc5\u987b\u5efa\u7acb\u53cc\u5411\u901a\u8def , \u8fd9\u4e2a\u8fde\u63a5\u662f\u865a\u62df\u7684, \u662f\u7531 A \u548c B \u5171\u540c\u7ef4\u62a4\u7684, \u5728\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u6839\u672c\u5c31\u4e0d\u77e5\u9053\u8fde\u63a5\u8fd9\u56de\u4e8b\u513f\uff01 TCP\u534f\u8bae\u5728 \"\u901a\u4fe1\u4e4b\u524d\" \u5fc5\u987b\u5efa\u7acb\u53cc\u5411\u8fde\u63a5 ,\u901a\u5e38\u90fd\u662f\u5ba2\u6237\u7aef\u4e3b\u52a8\u8fde\u63a5\u670d\u52a1\u7aef, \u6240\u4ee5\u5fc5\u987b\u5148\u542f\u52a8\u670d\u52a1\u7aef. Ps:UDP\u534f\u8bae\u4e0d\u9700\u8981\u5148\u542f\u52a8\u670d\u52a1\u7aef. \u5ba2\u6237\u7aef : \u4e3b\u52a8\u53d1\u8d77\u8fde\u63a5\u5efa\u7acb\u7684\u5e94\u7528\u8fdb\u7a0b \u670d\u52a1\u7aef : \u88ab\u52a8\u7b49\u5f85\u8fde\u63a5\u5efa\u7acb\u7684\u5e94\u7528\u8fdb\u7a0b Ps: \u4e24\u6761\u7ebf\u662f\u65f6\u95f4\u7ebf! \u4ee3\u8868\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5efa\u597d\u8fde\u63a5\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4.. \u2606 [\u8bf4\u660e] \u00b6 \u7ed3\u5408\u524d\u9762\u7684TCP\u534f\u8bae\u7684\u7ec4\u6210\u56fe. SYN -- \u540c\u6b65\u4f4d,\u8868\u660e\u53d1\u9001\u7684\u662f\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5 ACK -- \u786e\u8ba4\u4f4d,\u8868\u660e\u53d1\u9001\u7684\u662f\u8fde\u63a5\u786e\u8ba4\u62a5\u6587\u6bb5 seq -- \u5e8f\u53f7. TCP\u662f\u9762\u5411\u5b57\u8282\u6d41\u7684,\u5728TCP\u8fde\u63a5\u4e2d\u4f20\u9001\u7684\u5b57\u8282\u6d41\u7684\u6bcf\u4e00\u4e2a\u5b57\u8282\u90fd\u6309\u987a\u5e8f\u7f16\u53f7 ack -- \u786e\u8ba4\u53f7,\u662f\u671f\u671b\u6536\u5230\u5bf9\u65b9\u4e0b\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u5b57\u8282\u7684\u5e8f\u53f7 \u2606 [\u8fde\u63a5\u6b65\u9aa4] \u00b6 1> \u4e00\u5f00\u59cb,B\u4f1a\u5904\u4e8eLISTEN(\u76d1\u542c)\u72b6\u6001,\u7b49\u5f85\u67d0\u4e9b\u5ba2\u6237\u7684\u8fde\u63a5\u8bf7\u6c42. 2> A\u53d1\u9001\u5b8cSYN\u8fde\u63a5\u62a5\u6587\u6bb5\u540e,\u8fdb\u5165SYN-SENT(\u540c\u6b65\u5df2\u53d1\u9001)\u72b6\u6001. 3> B\u6536\u5230A\u53d1\u9001\u7684SYN\u540e,\u82e5\u540c\u610f\u5efa\u7acb\u8fde\u63a5,\u4f1a\u5411A\u53d1\u9001ACK\u786e\u8ba4\u62a5\u6587\u6bb5.\u8fdb\u5165SYN_RCVD(\u540c\u6b65\u6536\u5230)\u72b6\u6001. \u53ea\u4e0d\u8fc7\u5728\u8fd9\u4e2a\u786e\u8ba4\u62a5\u6587\u6bb5\u4e2d,\u4e0d\u4ec5\u5c06ACK\u7f6e\u4e3a1,\u8fd8\u4f1a\u5c06SYN\u7f6e\u4e3a1,\u76f8\u5f53\u4e8e\u628a\u5411B\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\u7684\u6d3b\u4e00\u8d77\u5e72\u4e86.. \u4e5f\u53ef\u4ee5\u7b80\u8bf4\u53d1\u9001\u7684\u662fACK+SYN\u62a5\u6587\u6bb5.. \u6ce8\u610f: ack = x+1 \u8868\u793aB\u5df2\u7ecf\u63a5\u6536\u5230A\u53d1\u9001\u8fc7\u6765\u7684\u5e8f\u53f7\u4e3ax\u7684\u62a5\u6587. 4> A\u6536\u5230B\u7684\u786e\u8ba4\u540e,\u8fd8\u8981\u5411B\u7ed9\u51fa\u786e\u8ba4.A\u8fdb\u5165ESTAB_LISHED(\u5df2\u7ecf\u5efa\u7acb\u8fde\u63a5)\u72b6\u6001. \u6ce8\u610f: \u8fd9\u91cc\u7684 seq = x+1 ,\u662f\u56e0\u4e3aA\u6536\u5230\u7684B\u7684\u786e\u8ba4\u62a5\u6587\u4e2d ack = x+1 -- \u671f\u671b\u6536\u5230\u7684\u4e0b\u4e00\u4e2a\u62a5\u6587\u7684\u5e8f\u53f7\u662f\u4ee5x+1\u5f00\u59cb\u7684. 5> B\u6536\u5230A\u7684\u786e\u8ba4\u540e,B\u8fdb\u5165ESTAB_LISHED\u72b6\u6001. \u6b64\u523bA\u4e0eB\u7684\u53cc\u5411\u9053\u8def\u624d\u771f\u6b63\u7684\u6253\u901a! \u6ce8\u610f\u54e6! SYN_RCVD \u4e5f\u53eb\u505a \u534a\u8fde\u63a5 \u72b6\u6001 \u6572\u9ed1\u677f! B\u5411A\u53d1\u9001\u7684\u62a5\u6587\u5b9e\u9645\u4e0a\u53ef\u4ee5\u62c6\u6210\u4e24\u4e2a\u62a5\u6587\u6bb5,\u53ef\u4ee5\u5148\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u62a5\u6587\u6bb5(ACK=1 ack=x+1),\u518d\u53d1\u9001\u4e00\u4e2a\u540c\u6b65\u62a5\u6587\u6bb5(SYN=1,seq=y). \u8fd9\u6837\u56db\u62a5\u6587\u63e1\u624b\u7684\u6548\u679c\u8ddf\u4e09\u62a5\u6587\u63e1\u624b\u7684\u6548\u679c\u662f\u4e00\u6837\u7684! Q:\u8bb2\u9053\u7406,A\u5411B\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\u540e,B\u540c\u610f\u4e86,\u90a3\u4e48AB\u4e4b\u95f4\u7684\u901a\u8def\u5c31\u5efa\u7acb\u4e86.\u90a3\u4e3a\u4ec0\u4e48A\u6700\u540e\u8fd8\u8981\u5411B\u53d1\u9001\u4e00\u6b21\u786e\u8ba4\uff1f A: \u5047\u8bbeA\u4e0d\u53d1\u9001\u6700\u540e\u90a3\u6b21\u8bf7\u6c42.\u8fd9\u662f\u524d\u63d0.A\u5411B\u53d1\u9001\u7684\u8fde\u63a5\u8bf7\u6c42\u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\u672a\u80fd\u53ca\u65f6\u5230\u8fbeB. \u4e8e\u662f\u4e4e,A\u91cd\u65b0\u53d1\u9001\u4e86\u4e00\u6b21\u8fde\u63a5\u8bf7\u6c42,\u800c\u540eA\u6536\u5230\u4e86B\u7684\u786e\u8ba4,\u8fde\u63a5\u5efa\u7acb. AB\u4e4b\u95f4\u6570\u636e\u4f20\u8f93\u5b8c\u6bd5\u540e,\u8fde\u63a5\u91ca\u653e..\u597d\u5de7\u4e0d\u5de7,A\u5411B\u53d1\u9001\u7684\u7b2c\u4e00\u6b21\u8fde\u63a5\u8bf7\u6c42\u5e76\u6ca1\u6709\u4e22\u5931,\u5728\u8fde\u63a5\u91ca\u653e\u540e\u5230\u8fbe\u4e86B. B\u5c31\u4f1a\u8ba4\u4e3aA\u53d1\u9001\u4e86\u4e00\u6b21\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42.\u5e76\u4e00\u76f4\u7b49\u5f85A\u53d1\u6765\u6570\u636e..B\u7684\u8bb8\u591a\u8d44\u6e90\u5c31\u8fd9\u6837\u6d6a\u8d39\u6389\u4e86.. A\u6700\u540e\u5411B\u53d1\u9001\u4e00\u6b21\u786e\u8ba4\u5c31\u80fd\u6709\u6548\u7684\u907f\u514d\u8fd9\u79cd\u60c5\u51b5!! client\u4e0d\u4f1a\u5411server\u7684\u786e\u8ba4\u53d1\u51fa\u786e\u8ba4. server\u7531\u4e8e\u6536\u4e0d\u5230\u786e\u8ba4,\u5c31\u77e5\u9053client\u5e76\u6ca1\u6709\u8981\u6c42\u5efa\u7acb\u8fde\u63a5!! \u2606 [\u534a\u8fde\u63a5\u6c60] \u00b6 \u534a\u8fde\u63a5\u6c60\u5360\u7528\u670d\u52a1\u5668\u56fa\u5b9a\u5185\u5b58\u7684\u5927\u5c0f \u591a\u4e2a\u5ba2\u6237\u7aef\u540c\u65f6\u5411\u4e00\u4e2a\u670d\u52a1\u7aef\u53d1\u9001SYN\u8bf7\u6c42\u8fde\u63a5,\u8fd9\u4e9b\u8fde\u63a5\u5230\u4e86\u670d\u52a1\u7aef\u4f1a\u5148\u4f9d\u6b21\u653e\u5230\u534a\u8fde\u63a5\u6c60\u91cc\u9762.. \u5728\u4e0d\u65ad\u653e\u7684\u540c\u65f6 , \u670d\u52a1\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u6839\u636e\u961f\u5217\u5148\u8fdb\u5148\u51fa\u7684\u539f\u5219 \u4e0d\u65ad\u7684\u53d6 \u534a\u8fde\u63a5\u6c60\u91cc\u7684\u8bf7\u6c42.. \u5728\u73b0\u5b9e\u5f53\u4e2d,\u6253\u5f00\u67d0\u4e00\u4e2a\u7f51\u9875,\u82e5\u539f\u5730\u8f6c\u5708,\u8868\u793a\u8bf7\u6c42\u5df2\u7ecf\u5728\u534a\u8fde\u63a5\u6c60\u91cc\u4e86,\u8981\u7b49\u4e00\u5c0f\u4f1a; \u82e5\u76f4\u63a5\u62d2\u7edd\u4e86\u8bf7\u6c42,\u8bbf\u95ee\u4e0d\u4e0a,\u5219\u8bc1\u660e\u6c60\u5b50\u5df2\u7ecf\u6ee1\u4e86,\u8bf7\u6c42\u5728\u6c60\u5b50\u5916\u9762.. \u6240\u4ee5\u5728\u9ad8\u5e76\u53d1\u7684\u573a\u666f\u4e0b,\u6211\u4eec\u4f1a\u8fdb\u884c\u4e00\u4e2a\u4f18\u5316: \u5c06\u534a\u8fde\u63a5\u6c60\u589e\u5927. \u8c03\u591a\u5927\u6ca1\u4e2a\u6807\u51c6,\u56e0\u4e3a\u534a\u8fde\u63a5\u6c60\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u53d8\u5927\u4e86,\u76f8\u5e94\u7684\u5176\u4ed6\u8fdb\u7a0b\u5b58\u53d6\u6570\u636e\u53ef\u7528\u7684\u7a7a\u95f4\u5c31\u5c11\u4e86.. \u6572\u9ed1\u677f! \u6700\u672c\u8d28\u7684\u4f18\u5316, \u52a0\u5185\u5b58\u6761 \u662f\u8f6f\u4ef6\u4f18\u5316\u7684N\u500d. \u2606 [syn\u6d2a\u6c34\u653b\u51fb] \u00b6 \u670d\u52a1\u5668\u5904\u4e8eLISTEN\u548cESTABLISHED\u72b6\u6001\u90fd\u662f\u6b63\u5e38\u7684,\u524d\u8005\u8868\u793a\u6b63\u5728\u76d1\u542c,\u540e\u8005\u8868\u793a\u670d\u52a1\u5668\u6b63\u5728\u670d\u52a1\u591a\u4e2a\u5ba2\u6237\u7aef. \u82e5\u53d1\u73b0\u670d\u52a1\u5668\u6709\u5927\u91cf\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u8bf7\u6c42\u8fde\u63a5\u5904\u4e8eSYN_RCVD\u72b6\u6001,\u5c31\u4e0d\u6b63\u5e38\u5566...\u8868\u660e\u64cd\u4f5c\u7cfb\u7edf\u5fd9\u4e0d\u8fc7\u6765\u4e86. why\uff1f\u56e0\u4e3a\u8fde\u63a5\u5efa\u7acb\u662f\u5f88\u5feb\u5f88\u5feb... \u5ba2\u6237\u7aef\u7684SYN_SENT\u72b6\u6001\u548c\u670d\u52a1\u5668\u7684SYN_RCVD\u72b6\u6001\u662f\u5f88\u96be\u6355\u6349\u7684\u5230. syn\u6d2a\u6c34\u653b\u51fb\u5c31\u4f1a\u9020\u6210\u670d\u52a1\u5668\u5927\u91cfSYN_RCVD\u72b6\u6001\u51fa\u73b0.. \u5b83\u4f1a\u6a21\u62df\u5927\u91cf\u7684\u5047\u7684\u5ba2\u6237\u7aef\u671d\u670d\u52a1\u7aef\u53d1SYN\u8fde\u63a5\u8bf7\u6c42,\u53d1\u5b8c\u540e\u5ba2\u6237\u7aef\u5c31\u6d88\u5931\u4e86; \u670d\u52a1\u7aef\u6536\u5230\u540e, TCP\u662f\u597d\u4eba\u534f\u8bae\u561b ,\u4e0d\u4f1a\u9a8c\u8bc1\u5ba2\u6237\u7aef\u7684\u8eab\u4efd,\u4f1a\u76f4\u63a5\u56de\u590d\u786e\u8ba4\u4fe1\u606f,\u4f46\u5ba2\u6237\u7aef\u5df2\u7ecf\u6d88\u5931\u4e86,\u662f\u4e0d\u4f1a\u56de\u590d\u6700\u540e\u7684\u786e\u8ba4\u7684,\u4f46\u670d\u52a1\u7aef\u4e0d\u77e5\u9053\u554a,\u670d\u52a1\u7aef\u4f1a\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u91cd\u590d\u56de\u4e00\u6b21,\u5c1d\u8bd5\u51e0\u6b21\u540e\u53d1\u73b0\u5ba2\u6237\u7aef\u8fd8\u662f\u6ca1\u6709\u56de\u590d\u6700\u540e\u7684\u786e\u8ba4\u4fe1\u606f,\u90a3\u4e48\u670d\u52a1\u7aef\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u662f\u4e2a\u5ba2\u6237\u7aef\u51fa\u73b0\u4e86\u4ec0\u4e48\u5f02\u5e38...\u8fde\u63a5\u5c31\u53d6\u6d88\u5566. \u4f46\u5728\u8fd9\u671f\u95f4,\u8981\u5360\u7528\u670d\u52a1\u7aef\u7684\u8d44\u6e90\u561b... \u4e5f\u8bb8\u4f60\u4f1a\u8bf4,TCP\u4e3a\u5565\u4e0d\u80fd\u9a8c\u8bc1\u8eab\u4efd\u540e\u518d\u5f00\u59cb\u5efa\u7acb\u8fde\u63a5\u5462\uff1f\u56e0\u4e3aTCP\u662f\u4e00\u4e2a\u5e95\u5c42\u7684\u534f\u8bae,\u8bbe\u8ba1\u590d\u6742\u4e00\u70b9,\u5efa\u7acb\u8fde\u63a5\u7684\u901f\u5ea6\u5c31\u4f1a\u964d\u4e0b\u6765,\u6574\u4e2a\u4e92\u8054\u7f51\u901a\u4fe1\u6548\u7387\u90fd\u4f1a\u88ab\u62c9\u4e0b\u6765.. \u6240\u4ee5\u5b89\u5168\u6027\u7684\u95ee\u9898\u5f80\u5f80\u4f1a\u5728\u5e94\u7528\u5c42,\u5e94\u7528\u7a0b\u5e8f\u91cc\u89e3\u51b3.. \u518d\u5520\u5520\u55d1,\u670d\u52a1\u5668\u901a\u5e38\u5b58\u653e\u5728\u673a\u623f\u91cc,\u670d\u52a1\u5668\u5916\u9762\u662f\u4ea4\u6362\u673a,\u4ea4\u6362\u673a\u5916\u9762\u662f\u8def\u7531,\u518d\u5f80\u5916\u662f\u5404\u79cd\u7f51\u7edc\u8bbe\u5907.. syn\u6d2a\u6c34\u653b\u51fb\u5f80\u5f80\u662f\u5916\u7f51\u653b\u51fb,\u653b\u51fb\u7684\u6d41\u91cf\u82e5\u5f88\u5927\u5f88\u5927,\u8fd8\u6ca1\u5230\u670d\u52a1\u5668\u5c31\u628a\u5916\u9762\u7684\u4ea4\u6362\u673a\u7ed9\u5e72\u8db4\u4e0b\u4e86..\u90a3\u4e48\u4e0d\u7ba1\u589e\u5927\u670d\u52a1\u5668\u7684\u534a\u8fde\u63a5\u6c60\u5230\u591a\u5927,\u670d\u52a1\u5668\u7684\u6027\u80fd\u6709\u591a\u725b\u4e5f\u6ca1\u6709\u7528.. \u7528\u6b63\u89c4\u7684\u673a\u623f,\u4f7f\u7528\u963f\u91cc\u4e91\u817e\u8baf\u4e91\u7684\u670d\u52a1\u5668,\u5b83\u4eec\u4f1a\u5e2e\u5fd9\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898.. \u56db\u6b21\u6325\u624b \u00b6 \u56db\u62a5\u6587\u63e1\u624b. C\u4e0eS\u8c01\u5148\u53d1\u5b8c\u6570\u636e,\u8c01\u5c31\u5148\u4e3b\u52a8\u53d1\u8d77\u65ad\u5f00\u8fde\u63a5.\u8fd9\u91cc\u5047\u8bbe\u5ba2\u6237\u7aefA\u5148\u53d1\u5b8c\u6570\u636e \u4e00\u53f0\u673a\u5668\u65e2\u662f\u67d0\u4e2a\u8f6f\u4ef6\u7684\u5ba2\u6237\u7aef\u4e5f\u8fd0\u884c\u7740\u67d0\u4e2a\u8f6f\u4ef6\u7684\u670d\u52a1\u7aef.\u6240\u4ee5\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ef\u4ee5\u540c\u65f6\u770b\u5230C\u4e0eS\u7684\u72b6\u6001. 1> A\u4f1a\u5411\u670d\u52a1\u7aefB\u53d1\u9001FIN\u8fde\u63a5\u91ca\u653e\u62a5\u6587\u6bb5.A\u8fdb\u5165FIN_WAIT_1(\u7ec8\u6b62\u7b49\u5f851)\u72b6\u6001,\u7b49\u5f85B\u7684\u786e\u8ba4. 2> B\u6536\u5230A\u53d1\u9001\u6765\u7684FIN=1\u62a5\u6587\u540e,\u7acb\u5373\u53d1\u9001ACK\u786e\u8ba4\u62a5\u6587.B\u8fdb\u5165CLOSE_WAIT(\u5173\u95ed\u7b49\u5f85)\u72b6\u6001. 3> A\u6536\u5230\u6765\u81eaB\u7684\u786e\u8ba4\u540e,A\u8fdb\u5165FIN_WAIT_2(\u7ec8\u6b62\u7b49\u5f852)\u72b6\u6001. 4> \u7b49\u5f85\u4e00\u4f1a,\u670d\u52a1\u7aefB\u4e5f\u53d1\u5b8c\u6570\u636e\u540e,B\u4f1a\u5411A\u53d1\u9001FIN\u8fde\u63a5\u91ca\u653e\u62a5\u6587\u6bb5.B\u8fdb\u5165LAST_ACK(\u6700\u540e\u786e\u8ba4)\u72b6\u6001. 5> A\u6536\u5230B\u53d1\u9001\u6765\u7684FIN=1\u62a5\u6587\u540e,A\u8fdb\u5165TIME_WAIT(\u65f6\u95f4\u7b49\u5f85)\u72b6\u6001. 6> A\u5411B\u53d1\u9001ACK=1\u7684\u786e\u8ba4\u62a5\u6587\u540e,\u5fc5\u987b\u5904\u4e8eTIME_WAIT\u7b49\u5f852MSL\u7684\u65f6\u95f4\u540e,A\u624d\u4f1a\u8fdb\u5165CLOSE\u72b6\u6001. \u5177\u4f53\u6765\u8bf4\u662f\u4e3a\u4e86\u907f\u514d\u4e24\u79cd\u60c5\u51b5. \u7b2c\u4e00\u79cd,B\u957f\u65f6\u95f4\u6ca1\u6709\u6536\u5230\u6700\u540e\u4e00\u6b21\u786e\u8ba4,B\u4f1a\u518d\u6b21\u5411A\u53d1\u9001FIN\u62a5\u6587,A\u4f1a\u91cd\u4f20\u6700\u540e\u4e00\u6b21\u7684ACK\u62a5\u6587 \u4e3a\u4e86B\u80fd\u51c6\u786e\u65e0\u8bef\u7684\u6536\u5230\u6700\u540e\u4e00\u6b21\u7684ACK\u786e\u8ba4\u62a5\u6587. \u7b2c\u4e8c\u79cd,\u9632\u6b62\"\u5df2\u7ecf\u5931\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5\"\u51fa\u73b0\u5728\u672c\u8fde\u63a5\u4e2d.A\u5728\u53d1\u9001\u5b8c\u6700\u540e\u4e00\u4e2aACK\u62a5\u6587\u6bb5\u540e, \u518d\u7ecf\u8fc72MSL\u7684\u65f6\u95f4,\u5c31\u53ef\u4ee5\u4f7f\u672c\u8fde\u63a5\u6301\u7eed\u7684\u65f6\u95f4\u5185\u6240\u4ea7\u751f\u7684\u6240\u6709\u62a5\u6587\u6bb5\u90fd\u4ece\u7f51\u7edc\u4e2d\u6d88\u5931. \u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u4e0b\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u4e2d\u4e0d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u65e7\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5.. 7> B\u53ea\u8981\u6536\u5230\u6765\u81eaA\u7684\u786e\u8ba4\u540e,\u670d\u52a1\u7aefB\u76f4\u63a5\u5173\u6389\u4e86\u8fd9\u4e2a\u8fde\u63a5..B\u8fdb\u5165CLOSE\u72b6\u6001.. \u53ef\u4ee5\u53d1\u73b0,B\u8fdb\u5165CLOSE\u72b6\u6001\u4f1a\u6bd4A\u65e9\u4e00\u4e9b!! Ps: MSL\u901a\u5e38\u4e3a2min; \u6572\u9ed1\u677f! \u9488\u5bf9\u65ad\u8fde\u63a5,\u4e2d\u95f4\u7684\u4e24\u6b21\u4e3a\u5565\u4e0d\u80fd\u5408\u4e8c\u4e3a\u4e00? S\u8981\u7b49\u6570\u636e\u5168\u90e8\u53d1\u7ed9C\u540e,\u624d\u4f1a\u53d1\u9001FIN\u62a5\u6587\u6bb5. qTCP\u534f\u8bae\u7684\u91cd\u70b9: [\u53ef\u9760\u6027] \u4e0d\u662f\u8bf4\u5efa\u7acb\u4e86\u53cc\u5411\u901a\u8def\u5c31\u53ef\u9760,\u800c\u662fA\u53d1\u9001\u7684\u6570\u636e\u662f\u62f7\u8d1d\u4e00\u4efd\u6cbf\u7740\u7f51\u7edc\u53d1\u9001\u7ed9B,\u5f85B\u63a5\u6536\u5230\u540e,\u4f1a\u56de\u4e2aACK\u7ed9A,\u610f\u5473\u7740B\u544a\u8bc9A\u6536\u5230\u6570\u636e\u5566,A\u624d\u4f1a\u5c06\u8fd9\u4efd\u6570\u636e\u5728\u5185\u5b58\u4e2d\u5220\u9664\u6389.. \u82e5\u7b49\u4e00\u6bb5\u65f6\u5019,A\u6ca1\u6709\u5f97\u5230ACK\u786e\u5b9a,\u4f1a\u91cd\u4f20.. \u5c1d\u8bd5\u51e0\u6b21\u540e\u90fd\u6ca1\u5f97\u5230,A\u5c31\u4f1a\u8ba4\u4e3aB\u574f\u4e86..\u4e0d\u4f1a\u518d\u53d1\u4e86. TCP\u8fd9\u79cd\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\u6027\u7684\u65b9\u5f0f,\u5bf9\u4f20\u8f93\u901f\u7387\u6ca1\u6709\u5f71\u54cd,\u4f46\u5bf9\u8d44\u6e90\u662f\u6d6a\u8d39\u4e86..\u56e0\u4e3aA\u5728\u7b49\u5f85B\u56de\u590dACK\u7684\u671f\u95f4,\u6570\u636e\u4e00\u76f4\u5728\u5185\u5b58\u91cc\u653e\u7740..\u727a\u7272\u7a7a\u95f4\u6765\u6362\u53d6\u53ef\u9760\u6027. [\u4e09\u8fde\u56db\u6325 \u5404\u79cd\u72b6\u6001] \u5efa\u7acb\u8fde\u63a5\u662f\u4e09\u6b21,\u65ad\u8fde\u63a5\u662f\u56db\u6b21,\u56e0\u4e3a\u524d\u8005\u6ca1\u6709\u6570\u636e\u5728\u4f20,\u540e\u8005\u6709\u6570\u636e\u5728\u4f20!! \u5efa\u8fde\u63a5\u901a\u5e38\u662fs\u5148\u542f\u52a8\u540e,C\u5bf9S\u53d1\u8d77\u8fde\u63a5;\u65ad\u8fde\u63a5\u5c31\u6ca1\u51c6\u4e86,C\u4e0eS\u8c01\u5148\u53d1\u5b8c\u8c01\u5148\u65ad. \u4e3a\u5565\u9700\u8981\u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5,\u56db\u6b21\u6325\u624b\u65ad\u5f00\u8fde\u63a5. https://blog.csdn.net/LO _ YUN/article/details/115541563","title":"\u4f20\u8f93\u5c42"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_1","text":"IP+MAC+port \u6807\u8bc6\u4e00\u4e2a\u5168\u4e16\u754c\u8303\u56f4\u5185\u72ec\u4e00\u65e0\u4e8c\u7684\u57fa\u4e8e\u7f51\u7edc\u901a\u4fe1\u7684\u8f6f\u4ef6.. \u53c2\u8003\u94fe\u63a5: https://mp.weixin.qq.com/s/Uf42QEL6WUSHOwJ403FwOA [\u4f20\u8f93\u5c42\u7684\u7531\u6765] \u7f51\u7edc\u5c42\u7684IP\u5730\u5740\u5e2e\u6211\u4eec\u533a\u5206\u5b50\u7f51,\u4ee5\u592a\u7f51\u5c42\u7684MAC\u5e2e\u6211\u4eec\u627e\u5230\u4e3b\u673a.. \u6211\u4eec\u901a\u8fc7IP\u548cMAC\u627e\u5230\u4e86\u4e00\u53f0\u7279\u5b9a\u7684\u4e3b\u673a,\u90a3\u5982\u4f55\u6807\u8bc6\u8fd9\u53f0\u4e3b\u673a\u4e0a\u7279\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f? \u7b54\u6848\u5c31\u662f\u7aef\u53e3.. \u7aef\u53e3\u5373\u5e94\u7528\u7a0b\u5e8f\u4e0e\u7f51\u5361\u5173\u8054\u7684\u7f16\u53f7... [\u4f20\u8f93\u5c42\u529f\u80fd] \u5efa\u7acb \u7aef \u53e3\u5230 \u7aef \u53e3\u7684\u901a\u4fe1 \u7aef\u53e3\u8303\u56f40-65535 , 0-1023\u4e3a\u7cfb\u7edf\u5360\u7528\u7aef\u53e3,\u7aef\u53e3\u5360\u7528\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u8d44\u6e90 \u7aef\u53e3\u6253\u4e2a\u6bd4\u65b9\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edf\u5f00\u7684\u4e00\u4e2a\u4e2a\u7684\u5c0f\u7a97\u53e3,\u5e94\u7528\u8f6f\u4ef6\u6570\u636e\u901a\u8fc7\u8fd9\u4e9b\u5c0f\u7a97\u53e3\u518d\u5230\u7f51\u5361. [\u4f20\u8f93\u5c42\u7684\u6570\u636e] 1> \u4f9d\u7167tcp&udp\u534f\u8bae\u5728\u4f20\u8f93\u5c42\u7684\u6784\u5efa\u7684\u6570\u636e,\u79f0\u4e3a '\u6570\u636e\u6bb5' 2> \u6570\u636e\u6bb5 = head + data head \u91cc\u653e <\u6e90\u7aef\u53e3> \u548c <\u76ee\u6807\u7aef\u53e3> \u7aef\u53e3\u5728\u672c\u673a\u552f\u4e00\u5373\u53ef!","title":"\u5f15\u8a00"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#udp","text":"UDP\u534f\u8bae -- \u65e0\u8fde\u63a5\u3001\u4e0d\u53ef\u9760\u7684\u7528\u6237\u62a5\u6587\u534f\u8bae.. \u5728\u53d1\u9001\u6570\u636e\u65f6,\u4e0d\u9700\u8981\u5efa\u7acb\u8fde\u63a5,\u62ff\u5230IP\u548c\u7aef\u53e3\u76f4\u63a5\u53d1\u8fc7\u53bb\u4e86..\u53d1\u5b8c\u540e\u6570\u636e\u5c31\u5220\u6389\u4e86. \u5e94\u7528\u573a\u666f: \u67e5\u8be2\u7c7b\u7684\u64cd\u4f5c(eg dhcp\u67e5\u8be2) \u96c6\u7fa4\u7684\u65f6\u95f4\u540c\u6b65 QQ\u804a\u5929 Q: \u524d\u4e09\u5c42\u534f\u8bae\u53ea\u80fd\u628a\u6570\u636e\u5305\u4ece\u4e00\u4e2a\u4e3b\u673a\u642c\u5230\u53e6\u5916\u4e00\u53f0\u4e3b\u673a,\u4f46\u662f,\u5230\u4e86\u76ee\u7684\u5730\u4ee5\u540e, \u6570\u636e\u5305\u5177\u4f53\u4ea4\u7ed9\u54ea\u4e2a\u7a0b\u5e8f(\u8fdb\u7a0b)\u5462\uff1f A: \u9700\u8981\u628a\u901a\u4fe1\u7684\u8fdb\u7a0b\u533a\u5206\u5f00\u6765,\u4e8e\u662f\u5c31\u7ed9\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a\u6570\u5b57\u7f16\u53f7: \u7aef\u53e3\u53f7 So,\u73b0\u76ee\u524d,\u7ecf\u8fc7\u524d\u56db\u5c42(\u4f20\u8f93\u5c42\uff5e\u6570\u636e\u94fe\u8def\u5c42 \u4ece\u4e0a\u5230\u4e0b),\u5e94\u7528\u6570\u636e\u88ab\u5c01\u88c5\u6210\u4e86\u8fd9\u6837: \u6570\u636e\u94fe\u8def\u5c42\u5934\u90e8 \u7f51\u7edc\u5c42\u5934\u90e8 \u4f20\u8f93\u5c42\u5934\u90e8 \u6570\u636e\u90e8\u5206 \u6e90MAC \u76ee\u7684MAC \u6e90IP \u76ee\u7684IP \u6e90\u7aef\u53e3\u53f7 \u76ee\u7684\u7aef\u53e3\u53f7 \u6570\u636e\u90e8\u5206 \u8fd9\u6837\u5b50,\u6211\u4eec\u5c06\u4e3b\u673a\u5230\u4e3b\u673a\u7684\u901a\u4fe1,\u5347\u7ea7\u6210\u4e86\u8fdb\u7a0b\u548c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u901a\u4fe1.. \u7ecf\u8fc7\u4e0a\u8ff0\u7684\u8fc7\u7a0b,\u6211\u4eec\u5728\u4e0d\u77e5\u4e0d\u89c9\u4e2d\u5c31\u5df2\u7ecf\u5b9e\u73b0\u4e86 UDP \u534f\u8bae \uff01 (\u5f53\u7136 UDP \u534f\u8bae\u4e2d\u4e0d\u5149\u6709\u6e90\u7aef\u53e3\u548c\u76ee\u6807\u7aef\u53e3,\u8fd8\u6709\u6570\u636e\u5305\u957f\u5ea6\u548c\u6821\u9a8c\u503c,\u6211\u4eec\u6682\u4e14\u7565\u8fc7) [\u5f15\u51faTCP\u534f\u8bae] \u7528UDP\u534f\u8baeA\u540cB\u80fd\u5b9e\u73b0\u901a\u4fe1,\u4f46\u8fd9\u4e2a\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u5b58\u5728\u5f88\u591a\u95ee\u9898!!!\u6ca1\u6709\u90a3\u4e48\u7b80\u5355!! \u4e22\u5305\u95ee\u9898\u3001\u6548\u7387\u95ee\u9898\u3001\u987a\u5e8f\u95ee\u9898\u3001\u6d41\u91cf\u95ee\u9898\u3001\u62e5\u585e\u95ee\u9898\u3001\u8fde\u63a5\u95ee\u9898... \u8fd9\u4e9b\u95ee\u9898TCP\u534f\u8bae\u624d\u80fd\u89e3\u51b3!!!","title":"UDP \u534f\u8bae"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#tcp","text":"TCP\u534f\u8bae -- \u9762\u5411\u8fde\u63a5\u7684\u3001\u53ef\u9760\u7684\u3001\u57fa\u4e8e\u5b57\u8282\u6d41\u7684\u4f20\u8f93\u63a7\u5236\u534f\u8bae netstat -an \u5e94\u7528\u573a\u666f: \u4e0e\u7528\u6237\u6253\u4ea4\u9053\u7684\u5e94\u7528\u7a0b\u5e8f","title":"TCP\u534f\u8bae"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_2","text":"","title":"\u53ef\u9760\u4ea4\u4e92"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_3","text":"\u7531\u4e8e\u7f51\u7edc\u7684\u4e0d\u53ef\u9760,A\u4f20\u7ed9B\u7684\u6570\u636e\u5305\u53ef\u80fd\u5728\u534a\u8def\u4e22\u5931.. \u4e0d\u96be\u60f3\u5230,\u5bf9\u4e8e\u4e22\u5305\u95ee\u9898,B\u5e94\u8be5\u544a\u8bc9A\u6570\u636e\u5305\u6ca1\u6536\u5230,A\u518d\u91cd;\u6216\u8005B\u544a\u8bc9A\u4e00\u58f0\u6570\u636e\u5305\u6536\u5230\u4e86. \u505c\u6b62\u7b49\u5f85\u534f\u8bae A\u6bcf\u53d1\u4e00\u4e2a\u5305,\u90fd\u5fc5\u987b\u6536\u5230\u6765\u81eaB\u7684\u786e\u8ba4( \u56de\u4e00\u4e2aACK\u5305 )\u540e,\u518d\u53d1\u4e0b\u4e00\u4e2a; \u5426\u5219\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u786e\u8ba4,\u5c31\u91cd\u4f20\u8fd9\u4e2a\u5305. \u8fd9\u6837\u4ee5\u6765,TCP\u534f\u8bae\u7684\u901a\u4fe1\u8fc7\u7a0b\u6709\u4e86\u4e00\u4e2a\u65b0\u7279\u5f81 -- \u53ef\u9760\u4ea4\u4e92 .","title":"\u2606 [\u4e22\u5305\u95ee\u9898]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_4","text":"\u505c\u6b62\u7b49\u5f85\u89e3\u51b3\u4e86\u4e22\u5305\u95ee\u9898,\u53ef\u9760\u662f\u53ef\u9760,\u4f46\u6548\u7387\u592a\u6162\u4e86.. \u4e8e\u662f\u4e4e,\u6211\u4eec\u63d0\u51fa\u5047\u8bbe,\u7528 \u6d41\u6c34\u7ebf \u7684\u5f62\u5f0f,A\u8fde\u7eed\u53d1\u51e0\u4e2a\u6570\u636e\u5305\u7ed9B,B\u518d\u6309\u6536\u5230\u7684\u987a\u5e8f\u4f9d\u6b21ACK\u786e\u8ba4.. (\u524d\u63d0,A\u53d1\u51fa\u53bb\u7684\u5305\u6309\u7167\u53d1\u9001\u7684\u5148\u540e\u4f9d\u6b21\u5230\u8fbeB,\u624d\u80fd\u4fdd\u8bc1B\u4f9d\u6b21\u56de\u5e94\u7684ACK\u5bf9\u5e94\u7684\u4e0a..) \u770b\u4f3c\u6210\u7acb,\u4f46\u5b9e\u5219\u50bb\u767d\u751c\u4e86.\u7f51\u7edc\u662f\u590d\u6742\u7684,\u4e0d\u53ef\u9760\u7684. A\u53d1\u51fa\u53bb\u7684\u6570\u636e\u5305,\u53ef\u662f\u4f1a\u8d70 \u4e0d\u540c\u7684\u8def\u5f84 (\u8017\u65f6\u4e0d\u540c) \u5230\u8fbeB. \u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5,\u7b2c2\u4e2a\u53d1\u51fa\u53bb\u7684\u5305\u4f1a\u5728\u7b2c5\u4e2a\u53d1\u51fa\u53bb\u7684\u5305\u5230\u8fbeB\u540e\u624d\u5230\u8fbeB.. \u4e5f\u5c31\u662f\u8bf4,\u5728\u6d41\u6c34\u7ebf\u4e2d\u6709\u591a\u4e2a\u6570\u636e\u5305\u548cACK\u5305\u5728\u4e71\u5e8f\u6d41\u52a8,\u4ed6\u4eec\u4e4b\u95f4\u5bf9\u5e94\u5173\u7cfb\u4e71\u6389\u5566!!","title":"\u2606 [\u6548\u7387\u95ee\u9898]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_5","text":"A\u5728\u53d1\u9001\u7684\u6570\u636e\u5305\u4e2d\u589e\u52a0\u4e00\u4e2a \u5e8f\u53f7(seq), \u540c\u65f6B\u8981\u5728 ACK\u5305 \u4e0a\u589e\u52a0\u4e00\u4e2a \u786e\u8ba4\u53f7(ack) . \u8fd9\u6837\u4e0d\u4f46\u89e3\u51b3\u4e86\u505c\u6b62\u7b49\u5f85\u534f\u8bae\u7684\u6548\u7387\u95ee\u9898,\u4e5f\u901a\u8fc7\u6807\u5e8f\u53f7\u7684\u65b9\u5f0f\u89e3\u51b3\u4e86\u987a\u5e8f\u95ee\u9898. \u73b0\u5b9e\u4e2d,\u4e3a\u4e86\u51cf\u5c11\u7f51\u7edcIO,B\u4f1a\u91c7\u7528 \u7d2f\u8ba1\u786e\u8ba4/\u7d2f\u8ba1\u5e94\u7b54 \u7684\u65b9\u5f0f\u7ed9A\u56de\u590d\u786e\u8ba4\u53f7(ack). \u4e3e\u4e2a\u6817\u5b50: A\u8fde\u7eed\u53d1\u9001\u4e86\u5e26\u67091,2,3\u5e8f\u53f7(seq)\u7684\u6570\u636e\u5305\u7ed9B, B\u6536\u5230\u4e86\u8fd9\u4e09\u4e2a\u6570\u636e\u5305,\u5c06\u56de\u5e94\u4e86\u4e00\u4e2a\u5e26\u6709\u786e\u8ba4\u53f7(ack=4)\u7684ACK\u5305\u7ed9A; \u4ee3\u8868A\u53d1\u9001\u7684\u5e8f\u53f7\u5c0f\u4e8e4\u7684\u6570\u636e\u5305\u90fd\u6536\u5230\u4e86..\u4e5f\u540c\u65f6\u544a\u8bc9A\u4e0b\u4e00\u4e2a\u6570\u636e\u5305\u5e94\u8be5\u53d1\u7684\u5e8f\u53f7\u662f4. Ps: ack\u53f7\u662f\u6536\u5230\u7684\u6700\u540e\u4e00\u4e2a\u6570\u636e\u5305\u7684\u5e8f\u53f7seq+1. So,\u7ea0\u6b63\u4e0b,\u4e0b\u56fe\u4e2dB\u56de\u590dA\u7684ACK\u5305\u7684\u786e\u8ba4\u53f7\u5e94\u8be5\u4e3a4..","title":"\u2606 [\u987a\u5e8f\u95ee\u9898]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_6","text":"TCP\u53ef\u9760\u4f20\u8f93\u7684\u5b9e\u73b0\u4f9d\u6258\u4e8e -- \u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\u6ed1\u52a8\u7a97\u53e3 \u89c6\u9891\u94fe\u63a5: https://www.bilibili.com/video/BV194411h71z !!!!!! Ps: \u56fe\u4e2d\u4e00\u4e2a\u4e2a\u5c0f\u6846\u4ee3\u8868\u4e00\u4e2a\u4e2a\u5b57\u8282, \u6536\u5230\u7684\u6700\u540e\u4e00\u4e2a\u786e\u8ba4\u53f7\u662f3.. \u7a97\u53e3\u4e0a\u8fb9\u754c\u6307\u7684\u662f\u6ed1\u52a8\u7a97\u53e3\u7684\u524d\u6cbf.","title":"\u6ed1\u52a8\u7a97\u53e3\u673a\u5236"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_7","text":"\u4e09\u6b21\u63e1\u624b -- \u51c6\u786e\u70b9\u5e94\u8be5\u662f\u4e09\u62a5\u6587\u63e1\u624b,\u5373\u4e00\u6b21\u63e1\u624b\u8fc7\u7a0b\u4e2d\u4ea4\u6362\u4e86\u4e09\u4e2a\u62a5\u6587,\u5e76\u4e0d\u662f\u8fdb\u884c\u4e86\u4e09\u6b21\u63e1\u624b! TCP\u901a\u4fe1\u4e4b\u524d\u5fc5\u987b\u5efa\u7acb\u53cc\u5411\u901a\u8def , \u8fd9\u4e2a\u8fde\u63a5\u662f\u865a\u62df\u7684, \u662f\u7531 A \u548c B \u5171\u540c\u7ef4\u62a4\u7684, \u5728\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u6839\u672c\u5c31\u4e0d\u77e5\u9053\u8fde\u63a5\u8fd9\u56de\u4e8b\u513f\uff01 TCP\u534f\u8bae\u5728 \"\u901a\u4fe1\u4e4b\u524d\" \u5fc5\u987b\u5efa\u7acb\u53cc\u5411\u8fde\u63a5 ,\u901a\u5e38\u90fd\u662f\u5ba2\u6237\u7aef\u4e3b\u52a8\u8fde\u63a5\u670d\u52a1\u7aef, \u6240\u4ee5\u5fc5\u987b\u5148\u542f\u52a8\u670d\u52a1\u7aef. Ps:UDP\u534f\u8bae\u4e0d\u9700\u8981\u5148\u542f\u52a8\u670d\u52a1\u7aef. \u5ba2\u6237\u7aef : \u4e3b\u52a8\u53d1\u8d77\u8fde\u63a5\u5efa\u7acb\u7684\u5e94\u7528\u8fdb\u7a0b \u670d\u52a1\u7aef : \u88ab\u52a8\u7b49\u5f85\u8fde\u63a5\u5efa\u7acb\u7684\u5e94\u7528\u8fdb\u7a0b Ps: \u4e24\u6761\u7ebf\u662f\u65f6\u95f4\u7ebf! \u4ee3\u8868\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u5efa\u597d\u8fde\u63a5\u9700\u8981\u82b1\u8d39\u7684\u65f6\u95f4..","title":"\u4e09\u6b21\u63e1\u624b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_8","text":"\u7ed3\u5408\u524d\u9762\u7684TCP\u534f\u8bae\u7684\u7ec4\u6210\u56fe. SYN -- \u540c\u6b65\u4f4d,\u8868\u660e\u53d1\u9001\u7684\u662f\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5 ACK -- \u786e\u8ba4\u4f4d,\u8868\u660e\u53d1\u9001\u7684\u662f\u8fde\u63a5\u786e\u8ba4\u62a5\u6587\u6bb5 seq -- \u5e8f\u53f7. TCP\u662f\u9762\u5411\u5b57\u8282\u6d41\u7684,\u5728TCP\u8fde\u63a5\u4e2d\u4f20\u9001\u7684\u5b57\u8282\u6d41\u7684\u6bcf\u4e00\u4e2a\u5b57\u8282\u90fd\u6309\u987a\u5e8f\u7f16\u53f7 ack -- \u786e\u8ba4\u53f7,\u662f\u671f\u671b\u6536\u5230\u5bf9\u65b9\u4e0b\u4e00\u4e2a\u62a5\u6587\u6bb5\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u5b57\u8282\u7684\u5e8f\u53f7","title":"\u2606 [\u8bf4\u660e]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_9","text":"1> \u4e00\u5f00\u59cb,B\u4f1a\u5904\u4e8eLISTEN(\u76d1\u542c)\u72b6\u6001,\u7b49\u5f85\u67d0\u4e9b\u5ba2\u6237\u7684\u8fde\u63a5\u8bf7\u6c42. 2> A\u53d1\u9001\u5b8cSYN\u8fde\u63a5\u62a5\u6587\u6bb5\u540e,\u8fdb\u5165SYN-SENT(\u540c\u6b65\u5df2\u53d1\u9001)\u72b6\u6001. 3> B\u6536\u5230A\u53d1\u9001\u7684SYN\u540e,\u82e5\u540c\u610f\u5efa\u7acb\u8fde\u63a5,\u4f1a\u5411A\u53d1\u9001ACK\u786e\u8ba4\u62a5\u6587\u6bb5.\u8fdb\u5165SYN_RCVD(\u540c\u6b65\u6536\u5230)\u72b6\u6001. \u53ea\u4e0d\u8fc7\u5728\u8fd9\u4e2a\u786e\u8ba4\u62a5\u6587\u6bb5\u4e2d,\u4e0d\u4ec5\u5c06ACK\u7f6e\u4e3a1,\u8fd8\u4f1a\u5c06SYN\u7f6e\u4e3a1,\u76f8\u5f53\u4e8e\u628a\u5411B\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\u7684\u6d3b\u4e00\u8d77\u5e72\u4e86.. \u4e5f\u53ef\u4ee5\u7b80\u8bf4\u53d1\u9001\u7684\u662fACK+SYN\u62a5\u6587\u6bb5.. \u6ce8\u610f: ack = x+1 \u8868\u793aB\u5df2\u7ecf\u63a5\u6536\u5230A\u53d1\u9001\u8fc7\u6765\u7684\u5e8f\u53f7\u4e3ax\u7684\u62a5\u6587. 4> A\u6536\u5230B\u7684\u786e\u8ba4\u540e,\u8fd8\u8981\u5411B\u7ed9\u51fa\u786e\u8ba4.A\u8fdb\u5165ESTAB_LISHED(\u5df2\u7ecf\u5efa\u7acb\u8fde\u63a5)\u72b6\u6001. \u6ce8\u610f: \u8fd9\u91cc\u7684 seq = x+1 ,\u662f\u56e0\u4e3aA\u6536\u5230\u7684B\u7684\u786e\u8ba4\u62a5\u6587\u4e2d ack = x+1 -- \u671f\u671b\u6536\u5230\u7684\u4e0b\u4e00\u4e2a\u62a5\u6587\u7684\u5e8f\u53f7\u662f\u4ee5x+1\u5f00\u59cb\u7684. 5> B\u6536\u5230A\u7684\u786e\u8ba4\u540e,B\u8fdb\u5165ESTAB_LISHED\u72b6\u6001. \u6b64\u523bA\u4e0eB\u7684\u53cc\u5411\u9053\u8def\u624d\u771f\u6b63\u7684\u6253\u901a! \u6ce8\u610f\u54e6! SYN_RCVD \u4e5f\u53eb\u505a \u534a\u8fde\u63a5 \u72b6\u6001 \u6572\u9ed1\u677f! B\u5411A\u53d1\u9001\u7684\u62a5\u6587\u5b9e\u9645\u4e0a\u53ef\u4ee5\u62c6\u6210\u4e24\u4e2a\u62a5\u6587\u6bb5,\u53ef\u4ee5\u5148\u53d1\u9001\u4e00\u4e2a\u786e\u8ba4\u62a5\u6587\u6bb5(ACK=1 ack=x+1),\u518d\u53d1\u9001\u4e00\u4e2a\u540c\u6b65\u62a5\u6587\u6bb5(SYN=1,seq=y). \u8fd9\u6837\u56db\u62a5\u6587\u63e1\u624b\u7684\u6548\u679c\u8ddf\u4e09\u62a5\u6587\u63e1\u624b\u7684\u6548\u679c\u662f\u4e00\u6837\u7684! Q:\u8bb2\u9053\u7406,A\u5411B\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\u540e,B\u540c\u610f\u4e86,\u90a3\u4e48AB\u4e4b\u95f4\u7684\u901a\u8def\u5c31\u5efa\u7acb\u4e86.\u90a3\u4e3a\u4ec0\u4e48A\u6700\u540e\u8fd8\u8981\u5411B\u53d1\u9001\u4e00\u6b21\u786e\u8ba4\uff1f A: \u5047\u8bbeA\u4e0d\u53d1\u9001\u6700\u540e\u90a3\u6b21\u8bf7\u6c42.\u8fd9\u662f\u524d\u63d0.A\u5411B\u53d1\u9001\u7684\u8fde\u63a5\u8bf7\u6c42\u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\u672a\u80fd\u53ca\u65f6\u5230\u8fbeB. \u4e8e\u662f\u4e4e,A\u91cd\u65b0\u53d1\u9001\u4e86\u4e00\u6b21\u8fde\u63a5\u8bf7\u6c42,\u800c\u540eA\u6536\u5230\u4e86B\u7684\u786e\u8ba4,\u8fde\u63a5\u5efa\u7acb. AB\u4e4b\u95f4\u6570\u636e\u4f20\u8f93\u5b8c\u6bd5\u540e,\u8fde\u63a5\u91ca\u653e..\u597d\u5de7\u4e0d\u5de7,A\u5411B\u53d1\u9001\u7684\u7b2c\u4e00\u6b21\u8fde\u63a5\u8bf7\u6c42\u5e76\u6ca1\u6709\u4e22\u5931,\u5728\u8fde\u63a5\u91ca\u653e\u540e\u5230\u8fbe\u4e86B. B\u5c31\u4f1a\u8ba4\u4e3aA\u53d1\u9001\u4e86\u4e00\u6b21\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42.\u5e76\u4e00\u76f4\u7b49\u5f85A\u53d1\u6765\u6570\u636e..B\u7684\u8bb8\u591a\u8d44\u6e90\u5c31\u8fd9\u6837\u6d6a\u8d39\u6389\u4e86.. A\u6700\u540e\u5411B\u53d1\u9001\u4e00\u6b21\u786e\u8ba4\u5c31\u80fd\u6709\u6548\u7684\u907f\u514d\u8fd9\u79cd\u60c5\u51b5!! client\u4e0d\u4f1a\u5411server\u7684\u786e\u8ba4\u53d1\u51fa\u786e\u8ba4. server\u7531\u4e8e\u6536\u4e0d\u5230\u786e\u8ba4,\u5c31\u77e5\u9053client\u5e76\u6ca1\u6709\u8981\u6c42\u5efa\u7acb\u8fde\u63a5!!","title":"\u2606 [\u8fde\u63a5\u6b65\u9aa4]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_10","text":"\u534a\u8fde\u63a5\u6c60\u5360\u7528\u670d\u52a1\u5668\u56fa\u5b9a\u5185\u5b58\u7684\u5927\u5c0f \u591a\u4e2a\u5ba2\u6237\u7aef\u540c\u65f6\u5411\u4e00\u4e2a\u670d\u52a1\u7aef\u53d1\u9001SYN\u8bf7\u6c42\u8fde\u63a5,\u8fd9\u4e9b\u8fde\u63a5\u5230\u4e86\u670d\u52a1\u7aef\u4f1a\u5148\u4f9d\u6b21\u653e\u5230\u534a\u8fde\u63a5\u6c60\u91cc\u9762.. \u5728\u4e0d\u65ad\u653e\u7684\u540c\u65f6 , \u670d\u52a1\u5668\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u6839\u636e\u961f\u5217\u5148\u8fdb\u5148\u51fa\u7684\u539f\u5219 \u4e0d\u65ad\u7684\u53d6 \u534a\u8fde\u63a5\u6c60\u91cc\u7684\u8bf7\u6c42.. \u5728\u73b0\u5b9e\u5f53\u4e2d,\u6253\u5f00\u67d0\u4e00\u4e2a\u7f51\u9875,\u82e5\u539f\u5730\u8f6c\u5708,\u8868\u793a\u8bf7\u6c42\u5df2\u7ecf\u5728\u534a\u8fde\u63a5\u6c60\u91cc\u4e86,\u8981\u7b49\u4e00\u5c0f\u4f1a; \u82e5\u76f4\u63a5\u62d2\u7edd\u4e86\u8bf7\u6c42,\u8bbf\u95ee\u4e0d\u4e0a,\u5219\u8bc1\u660e\u6c60\u5b50\u5df2\u7ecf\u6ee1\u4e86,\u8bf7\u6c42\u5728\u6c60\u5b50\u5916\u9762.. \u6240\u4ee5\u5728\u9ad8\u5e76\u53d1\u7684\u573a\u666f\u4e0b,\u6211\u4eec\u4f1a\u8fdb\u884c\u4e00\u4e2a\u4f18\u5316: \u5c06\u534a\u8fde\u63a5\u6c60\u589e\u5927. \u8c03\u591a\u5927\u6ca1\u4e2a\u6807\u51c6,\u56e0\u4e3a\u534a\u8fde\u63a5\u6c60\u5360\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u53d8\u5927\u4e86,\u76f8\u5e94\u7684\u5176\u4ed6\u8fdb\u7a0b\u5b58\u53d6\u6570\u636e\u53ef\u7528\u7684\u7a7a\u95f4\u5c31\u5c11\u4e86.. \u6572\u9ed1\u677f! \u6700\u672c\u8d28\u7684\u4f18\u5316, \u52a0\u5185\u5b58\u6761 \u662f\u8f6f\u4ef6\u4f18\u5316\u7684N\u500d.","title":"\u2606 [\u534a\u8fde\u63a5\u6c60]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#syn","text":"\u670d\u52a1\u5668\u5904\u4e8eLISTEN\u548cESTABLISHED\u72b6\u6001\u90fd\u662f\u6b63\u5e38\u7684,\u524d\u8005\u8868\u793a\u6b63\u5728\u76d1\u542c,\u540e\u8005\u8868\u793a\u670d\u52a1\u5668\u6b63\u5728\u670d\u52a1\u591a\u4e2a\u5ba2\u6237\u7aef. \u82e5\u53d1\u73b0\u670d\u52a1\u5668\u6709\u5927\u91cf\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u8bf7\u6c42\u8fde\u63a5\u5904\u4e8eSYN_RCVD\u72b6\u6001,\u5c31\u4e0d\u6b63\u5e38\u5566...\u8868\u660e\u64cd\u4f5c\u7cfb\u7edf\u5fd9\u4e0d\u8fc7\u6765\u4e86. why\uff1f\u56e0\u4e3a\u8fde\u63a5\u5efa\u7acb\u662f\u5f88\u5feb\u5f88\u5feb... \u5ba2\u6237\u7aef\u7684SYN_SENT\u72b6\u6001\u548c\u670d\u52a1\u5668\u7684SYN_RCVD\u72b6\u6001\u662f\u5f88\u96be\u6355\u6349\u7684\u5230. syn\u6d2a\u6c34\u653b\u51fb\u5c31\u4f1a\u9020\u6210\u670d\u52a1\u5668\u5927\u91cfSYN_RCVD\u72b6\u6001\u51fa\u73b0.. \u5b83\u4f1a\u6a21\u62df\u5927\u91cf\u7684\u5047\u7684\u5ba2\u6237\u7aef\u671d\u670d\u52a1\u7aef\u53d1SYN\u8fde\u63a5\u8bf7\u6c42,\u53d1\u5b8c\u540e\u5ba2\u6237\u7aef\u5c31\u6d88\u5931\u4e86; \u670d\u52a1\u7aef\u6536\u5230\u540e, TCP\u662f\u597d\u4eba\u534f\u8bae\u561b ,\u4e0d\u4f1a\u9a8c\u8bc1\u5ba2\u6237\u7aef\u7684\u8eab\u4efd,\u4f1a\u76f4\u63a5\u56de\u590d\u786e\u8ba4\u4fe1\u606f,\u4f46\u5ba2\u6237\u7aef\u5df2\u7ecf\u6d88\u5931\u4e86,\u662f\u4e0d\u4f1a\u56de\u590d\u6700\u540e\u7684\u786e\u8ba4\u7684,\u4f46\u670d\u52a1\u7aef\u4e0d\u77e5\u9053\u554a,\u670d\u52a1\u7aef\u4f1a\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u91cd\u590d\u56de\u4e00\u6b21,\u5c1d\u8bd5\u51e0\u6b21\u540e\u53d1\u73b0\u5ba2\u6237\u7aef\u8fd8\u662f\u6ca1\u6709\u56de\u590d\u6700\u540e\u7684\u786e\u8ba4\u4fe1\u606f,\u90a3\u4e48\u670d\u52a1\u7aef\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u662f\u4e2a\u5ba2\u6237\u7aef\u51fa\u73b0\u4e86\u4ec0\u4e48\u5f02\u5e38...\u8fde\u63a5\u5c31\u53d6\u6d88\u5566. \u4f46\u5728\u8fd9\u671f\u95f4,\u8981\u5360\u7528\u670d\u52a1\u7aef\u7684\u8d44\u6e90\u561b... \u4e5f\u8bb8\u4f60\u4f1a\u8bf4,TCP\u4e3a\u5565\u4e0d\u80fd\u9a8c\u8bc1\u8eab\u4efd\u540e\u518d\u5f00\u59cb\u5efa\u7acb\u8fde\u63a5\u5462\uff1f\u56e0\u4e3aTCP\u662f\u4e00\u4e2a\u5e95\u5c42\u7684\u534f\u8bae,\u8bbe\u8ba1\u590d\u6742\u4e00\u70b9,\u5efa\u7acb\u8fde\u63a5\u7684\u901f\u5ea6\u5c31\u4f1a\u964d\u4e0b\u6765,\u6574\u4e2a\u4e92\u8054\u7f51\u901a\u4fe1\u6548\u7387\u90fd\u4f1a\u88ab\u62c9\u4e0b\u6765.. \u6240\u4ee5\u5b89\u5168\u6027\u7684\u95ee\u9898\u5f80\u5f80\u4f1a\u5728\u5e94\u7528\u5c42,\u5e94\u7528\u7a0b\u5e8f\u91cc\u89e3\u51b3.. \u518d\u5520\u5520\u55d1,\u670d\u52a1\u5668\u901a\u5e38\u5b58\u653e\u5728\u673a\u623f\u91cc,\u670d\u52a1\u5668\u5916\u9762\u662f\u4ea4\u6362\u673a,\u4ea4\u6362\u673a\u5916\u9762\u662f\u8def\u7531,\u518d\u5f80\u5916\u662f\u5404\u79cd\u7f51\u7edc\u8bbe\u5907.. syn\u6d2a\u6c34\u653b\u51fb\u5f80\u5f80\u662f\u5916\u7f51\u653b\u51fb,\u653b\u51fb\u7684\u6d41\u91cf\u82e5\u5f88\u5927\u5f88\u5927,\u8fd8\u6ca1\u5230\u670d\u52a1\u5668\u5c31\u628a\u5916\u9762\u7684\u4ea4\u6362\u673a\u7ed9\u5e72\u8db4\u4e0b\u4e86..\u90a3\u4e48\u4e0d\u7ba1\u589e\u5927\u670d\u52a1\u5668\u7684\u534a\u8fde\u63a5\u6c60\u5230\u591a\u5927,\u670d\u52a1\u5668\u7684\u6027\u80fd\u6709\u591a\u725b\u4e5f\u6ca1\u6709\u7528.. \u7528\u6b63\u89c4\u7684\u673a\u623f,\u4f7f\u7528\u963f\u91cc\u4e91\u817e\u8baf\u4e91\u7684\u670d\u52a1\u5668,\u5b83\u4eec\u4f1a\u5e2e\u5fd9\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898..","title":"\u2606 [syn\u6d2a\u6c34\u653b\u51fb]"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/6_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E4%BC%A0%E8%BE%93%E5%B1%82/#_11","text":"\u56db\u62a5\u6587\u63e1\u624b. C\u4e0eS\u8c01\u5148\u53d1\u5b8c\u6570\u636e,\u8c01\u5c31\u5148\u4e3b\u52a8\u53d1\u8d77\u65ad\u5f00\u8fde\u63a5.\u8fd9\u91cc\u5047\u8bbe\u5ba2\u6237\u7aefA\u5148\u53d1\u5b8c\u6570\u636e \u4e00\u53f0\u673a\u5668\u65e2\u662f\u67d0\u4e2a\u8f6f\u4ef6\u7684\u5ba2\u6237\u7aef\u4e5f\u8fd0\u884c\u7740\u67d0\u4e2a\u8f6f\u4ef6\u7684\u670d\u52a1\u7aef.\u6240\u4ee5\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ef\u4ee5\u540c\u65f6\u770b\u5230C\u4e0eS\u7684\u72b6\u6001. 1> A\u4f1a\u5411\u670d\u52a1\u7aefB\u53d1\u9001FIN\u8fde\u63a5\u91ca\u653e\u62a5\u6587\u6bb5.A\u8fdb\u5165FIN_WAIT_1(\u7ec8\u6b62\u7b49\u5f851)\u72b6\u6001,\u7b49\u5f85B\u7684\u786e\u8ba4. 2> B\u6536\u5230A\u53d1\u9001\u6765\u7684FIN=1\u62a5\u6587\u540e,\u7acb\u5373\u53d1\u9001ACK\u786e\u8ba4\u62a5\u6587.B\u8fdb\u5165CLOSE_WAIT(\u5173\u95ed\u7b49\u5f85)\u72b6\u6001. 3> A\u6536\u5230\u6765\u81eaB\u7684\u786e\u8ba4\u540e,A\u8fdb\u5165FIN_WAIT_2(\u7ec8\u6b62\u7b49\u5f852)\u72b6\u6001. 4> \u7b49\u5f85\u4e00\u4f1a,\u670d\u52a1\u7aefB\u4e5f\u53d1\u5b8c\u6570\u636e\u540e,B\u4f1a\u5411A\u53d1\u9001FIN\u8fde\u63a5\u91ca\u653e\u62a5\u6587\u6bb5.B\u8fdb\u5165LAST_ACK(\u6700\u540e\u786e\u8ba4)\u72b6\u6001. 5> A\u6536\u5230B\u53d1\u9001\u6765\u7684FIN=1\u62a5\u6587\u540e,A\u8fdb\u5165TIME_WAIT(\u65f6\u95f4\u7b49\u5f85)\u72b6\u6001. 6> A\u5411B\u53d1\u9001ACK=1\u7684\u786e\u8ba4\u62a5\u6587\u540e,\u5fc5\u987b\u5904\u4e8eTIME_WAIT\u7b49\u5f852MSL\u7684\u65f6\u95f4\u540e,A\u624d\u4f1a\u8fdb\u5165CLOSE\u72b6\u6001. \u5177\u4f53\u6765\u8bf4\u662f\u4e3a\u4e86\u907f\u514d\u4e24\u79cd\u60c5\u51b5. \u7b2c\u4e00\u79cd,B\u957f\u65f6\u95f4\u6ca1\u6709\u6536\u5230\u6700\u540e\u4e00\u6b21\u786e\u8ba4,B\u4f1a\u518d\u6b21\u5411A\u53d1\u9001FIN\u62a5\u6587,A\u4f1a\u91cd\u4f20\u6700\u540e\u4e00\u6b21\u7684ACK\u62a5\u6587 \u4e3a\u4e86B\u80fd\u51c6\u786e\u65e0\u8bef\u7684\u6536\u5230\u6700\u540e\u4e00\u6b21\u7684ACK\u786e\u8ba4\u62a5\u6587. \u7b2c\u4e8c\u79cd,\u9632\u6b62\"\u5df2\u7ecf\u5931\u6548\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5\"\u51fa\u73b0\u5728\u672c\u8fde\u63a5\u4e2d.A\u5728\u53d1\u9001\u5b8c\u6700\u540e\u4e00\u4e2aACK\u62a5\u6587\u6bb5\u540e, \u518d\u7ecf\u8fc72MSL\u7684\u65f6\u95f4,\u5c31\u53ef\u4ee5\u4f7f\u672c\u8fde\u63a5\u6301\u7eed\u7684\u65f6\u95f4\u5185\u6240\u4ea7\u751f\u7684\u6240\u6709\u62a5\u6587\u6bb5\u90fd\u4ece\u7f51\u7edc\u4e2d\u6d88\u5931. \u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u4e0b\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u4e2d\u4e0d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u65e7\u7684\u8fde\u63a5\u8bf7\u6c42\u62a5\u6587\u6bb5.. 7> B\u53ea\u8981\u6536\u5230\u6765\u81eaA\u7684\u786e\u8ba4\u540e,\u670d\u52a1\u7aefB\u76f4\u63a5\u5173\u6389\u4e86\u8fd9\u4e2a\u8fde\u63a5..B\u8fdb\u5165CLOSE\u72b6\u6001.. \u53ef\u4ee5\u53d1\u73b0,B\u8fdb\u5165CLOSE\u72b6\u6001\u4f1a\u6bd4A\u65e9\u4e00\u4e9b!! Ps: MSL\u901a\u5e38\u4e3a2min; \u6572\u9ed1\u677f! \u9488\u5bf9\u65ad\u8fde\u63a5,\u4e2d\u95f4\u7684\u4e24\u6b21\u4e3a\u5565\u4e0d\u80fd\u5408\u4e8c\u4e3a\u4e00? S\u8981\u7b49\u6570\u636e\u5168\u90e8\u53d1\u7ed9C\u540e,\u624d\u4f1a\u53d1\u9001FIN\u62a5\u6587\u6bb5. qTCP\u534f\u8bae\u7684\u91cd\u70b9: [\u53ef\u9760\u6027] \u4e0d\u662f\u8bf4\u5efa\u7acb\u4e86\u53cc\u5411\u901a\u8def\u5c31\u53ef\u9760,\u800c\u662fA\u53d1\u9001\u7684\u6570\u636e\u662f\u62f7\u8d1d\u4e00\u4efd\u6cbf\u7740\u7f51\u7edc\u53d1\u9001\u7ed9B,\u5f85B\u63a5\u6536\u5230\u540e,\u4f1a\u56de\u4e2aACK\u7ed9A,\u610f\u5473\u7740B\u544a\u8bc9A\u6536\u5230\u6570\u636e\u5566,A\u624d\u4f1a\u5c06\u8fd9\u4efd\u6570\u636e\u5728\u5185\u5b58\u4e2d\u5220\u9664\u6389.. \u82e5\u7b49\u4e00\u6bb5\u65f6\u5019,A\u6ca1\u6709\u5f97\u5230ACK\u786e\u5b9a,\u4f1a\u91cd\u4f20.. \u5c1d\u8bd5\u51e0\u6b21\u540e\u90fd\u6ca1\u5f97\u5230,A\u5c31\u4f1a\u8ba4\u4e3aB\u574f\u4e86..\u4e0d\u4f1a\u518d\u53d1\u4e86. TCP\u8fd9\u79cd\u4fdd\u8bc1\u6570\u636e\u53ef\u9760\u6027\u7684\u65b9\u5f0f,\u5bf9\u4f20\u8f93\u901f\u7387\u6ca1\u6709\u5f71\u54cd,\u4f46\u5bf9\u8d44\u6e90\u662f\u6d6a\u8d39\u4e86..\u56e0\u4e3aA\u5728\u7b49\u5f85B\u56de\u590dACK\u7684\u671f\u95f4,\u6570\u636e\u4e00\u76f4\u5728\u5185\u5b58\u91cc\u653e\u7740..\u727a\u7272\u7a7a\u95f4\u6765\u6362\u53d6\u53ef\u9760\u6027. [\u4e09\u8fde\u56db\u6325 \u5404\u79cd\u72b6\u6001] \u5efa\u7acb\u8fde\u63a5\u662f\u4e09\u6b21,\u65ad\u8fde\u63a5\u662f\u56db\u6b21,\u56e0\u4e3a\u524d\u8005\u6ca1\u6709\u6570\u636e\u5728\u4f20,\u540e\u8005\u6709\u6570\u636e\u5728\u4f20!! \u5efa\u8fde\u63a5\u901a\u5e38\u662fs\u5148\u542f\u52a8\u540e,C\u5bf9S\u53d1\u8d77\u8fde\u63a5;\u65ad\u8fde\u63a5\u5c31\u6ca1\u51c6\u4e86,C\u4e0eS\u8c01\u5148\u53d1\u5b8c\u8c01\u5148\u65ad. \u4e3a\u5565\u9700\u8981\u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5,\u56db\u6b21\u6325\u624b\u65ad\u5f00\u8fde\u63a5. https://blog.csdn.net/LO _ YUN/article/details/115541563","title":"\u56db\u6b21\u6325\u624b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/","text":"DHCP \u00b6 dhcp\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7528\u4e8e\u5206\u914dIP\u5730\u5740\u7684\u5957\u63a5\u5b57\u7a0b\u5e8f \u56db\u8981\u7d20 \u00b6 \u60f3\u5b9e\u73b0\u7f51\u7edc\u901a\u4fe1, \u6bcf\u53f0\u4e3b\u673a\u9700\u5177\u5907\u7684 \u56db\u8981\u7d20 \u25cb \u672c\u673a\u7684IP\u5730\u5740 \u25cb \u5b50\u7f51\u63a9\u7801 \u25cb \u7f51\u5173\u7684IP\u5730\u5740 \u25cb DNS\u7684IP\u5730\u5740 (\u4e0d\u662f\u5fc5\u987b\u7684,\u4e0d\u7528\u57df\u540d,\u76f4\u63a5\u7528IP\u5730\u5740\u5c31\u884c) DNS -- \u57df\u540d\u89e3\u6790,\u5c06\u57df\u540d\u8f6c\u6362\u6210\u5bf9\u5e94\u7684IP\u5730\u5740.. DNS\u7684IP\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a,\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5c06DNS\u7684IP\u5730\u5740\u8bbe\u7f6e\u6210\u7f51\u5173/\u8def\u7531\u5668\u7684IP\u5730\u5740.\u82e5\u662f\u540e\u8005,\u5728\u6d4f\u89c8\u5668\u4e0a\u8f93\u5165\u57df\u540d\u540e,\u6d4f\u89c8\u5668\u4f1a\u5148\u5c06\u8fd9\u4e2a\u57df\u540d\u5148\u9001\u5230\u7f51\u5173,\u7f51\u5173\u4f1a\u5e2e\u5fd9\u5411DNS\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42,\u628a\u57df\u540d\u8f6c\u6210IP\u5730\u5740\u540e\u518d\u53bb\u901a\u4fe1. \u6572\u9ed1\u677f!!!\u2606\u6d4f\u89c8\u5668\u89c4\u5b9a\u7528\u6237\u8f93\u5165\u7684\u7f51\u5740\u4e0d\u6572\u7aef\u53e3,\u9ed8\u8ba4\u7aef\u53e3\u53f7\u662f80 !! IP+\u7aef\u53e3 -- \u8054\u5408\u552f\u4e00\u5c31\u884c\u4e86\u5457. \u83b7\u53d6\u65b9\u5f0f \u00b6 \u83b7\u53d6\u56db\u8981\u7d20\u7684\u5730\u5740,\u6709\u4e24\u79cd\u65b9\u5f0f: 1> \u624b\u52a8\u914d\u7f6e -- \u9759\u6001\u83b7\u53d6 (\u53ef\u80fd\u4f1a\u51b2\u7a81 \u5728\u8bbe\u7f6e\u524d\u5148ping\u4e00\u4e0b,ping\u901a\u4e86\u4ee3\u8868\u6b64IP\u88ab\u5360\u7528\u4e86) 2> dhcp -- \u52a8\u6001\u83b7\u53d6 \"\u83b7\u53d6\u540e\u4e0d\u662f\u4e0d\u53d8\u7684 \u662f\u6709 \u79df\u7ea6\u65f6\u95f4 \u7684 \u8fc7\u65f6\u4f1a\u91cd\u65b0\u83b7\u53d6\" \u52a8\u6001\u83b7\u53d6\u8fc7\u7a0b \u00b6 \u6bcf\u53f0\u4e3b\u673a\u90fd\u4f1a\u9ed8\u8ba4\u5b89\u88c5\u4e00\u4e2adhcp client\u8f6f\u4ef6.\u6bcf\u4e2a\u8def\u7531\u5668\u4f1a\u9ed8\u8ba4\u5b89\u88c5dhcp server\u8f6f\u4ef6. \u4e3b\u673a\u4e00\u5f00\u673a,dhcp client\u8f6f\u4ef6\u5c31\u4f1a\u9ed8\u8ba4\u542f\u52a8 (\u5f53\u7136,\u524d\u63d0\u662f\u4e3b\u673a\u6709\u7f51\u7edc\u80fd\u5f80\u5916\u901a\u4fe1) dhcp\u62a5\u5934\u683c\u5f0f : \u4ee5\u592a\u7f51\u5934 IP\u5934 UDP\u5934 DHCP\u6570\u636e\u5305 1> \u6700\u524d\u9762\u7684\"\u4ee5\u592a\u7f51\u6807\u5934\", \u8bbe\u7f6e\u53d1\u51fa\u65b9(\u672c\u673a)\u7684MAC\u5730\u5740\u548c\u63a5\u6536\u65b9(DHCP\u670d\u52a1\u7aef)\u7684MAC\u5730\u5740. \u524d\u8005\u5c31\u662f\u672c\u673a\u70e7\u5f55\u5728\u7f51\u5361\u4e0a\u7684MAC\u5730\u5740,\u540e\u8005\u8fd9\u65f6\u4e0d\u77e5\u9053,\u5c31\u586b\u5165\u4e00\u4e2a\u5e7f\u64ad\u5730\u5740: FF-FF-FF-FF-FF-FF. 2> \u540e\u9762\u7684\"IP\u6807\u5934\",\u8bbe\u7f6e\u53d1\u51fa\u65b9\u7684IP\u5730\u5740\u548c\u63a5\u6536\u65b9\u7684IP\u5730\u5740. \u672c\u673a\u5bf9\u4e8e\u8fd9\u4e24\u8005\u90fd\u4e0d\u77e5\u9053. \u4e8e\u662f,\u53d1\u51fa\u65b9\u7684IP\u5730\u5740\u5c31\u8bbe\u4e3a0.0.0.0, \u63a5\u6536\u65b9\u7684IP\u5730\u5740\u8bbe\u4e3a255.255.255.255 3> \u6700\u540e\u7684\"UDP\u6807\u5934\",\u8bbe\u7f6e\u53d1\u51fa\u65b9\u7684\u7aef\u53e3\u548c\u63a5\u6536\u65b9\u7684\u7aef\u53e3. \u8fd9\u4e00\u90e8\u5206\u662fDHCP\u534f\u8bae\u89c4\u5b9a\u597d\u7684, \u53d1\u51fa\u65b9\u662f68\u7aef\u53e3, \u63a5\u6536\u65b9\u662f67\u7aef\u53e3\u3002 MAC(\u672c\u673a) FF-FF-FF-FF-FF-FF 0.0.0.0 255.255.255.255 68 67 DHCP\u6570\u636e\u5305 \u8fd9\u4e2a\u6570\u636e\u5305\u6784\u9020\u5b8c\u6210\u540e, \u5c31\u53ef\u4ee5\u53d1\u51fa\u4e86. \u4ee5\u592a\u7f51\u662f\u5e7f\u64ad\u7684\u5f62\u5f0f\u53d1\u9001,\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u7684\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6536\u5230\u4e86\u8fd9\u4e2a\u5305. \u56e0\u4e3a\u63a5\u6536\u65b9\u7684MAC\u5730\u5740\u662fFF-FF-FF-FF-FF-FF, \u770b\u4e0d\u51fa\u662f\u53d1\u7ed9\u8c01\u7684, \u6240\u4ee5\u6bcf\u53f0\u6536\u5230\u8fd9\u4e2a\u5305\u7684\u8ba1\u7b97\u673a, \u8fd8\u5fc5\u987b\u5206\u6790\u8fd9\u4e2a\u5305\u7684IP\u5730\u5740, \u624d\u80fd\u786e\u5b9a\u662f\u4e0d\u662f\u53d1\u7ed9\u81ea\u5df1\u7684. \u5f53\u770b\u5230\u53d1\u51fa\u65b9IP\u5730\u5740\u662f0.0.0.0,\u63a5\u6536\u65b9IP\u662f255.255.255.255, \u4e8e\u662fDHCP\u670d\u52a1\u5668\u77e5\u9053\"\u8fd9\u4e2a\u5305\u662f\u53d1\u7ed9\u6211\u7684\", \u800c\u5176\u4ed6\u8ba1\u7b97\u673a\u5c31\u53ef\u4ee5\u4e22\u5f03\u8fd9\u4e2a\u5305. \u63a5\u4e0b\u6765,DHCP\u670d\u52a1\u5668\u8bfb\u51fa\u8fd9\u4e2a\u5305\u7684\u6570\u636e\u5185\u5bb9,\u5206\u914d\u597dIP\u5730\u5740,\u53d1\u9001\u56de\u53bb\u4e00\u4e2a\"DHCP\u54cd\u5e94\"\u6570\u636e\u5305. \u8fd9\u4e2a\u54cd\u5e94\u5305\u7684\u7ed3\u6784\u4e5f\u662f\u7c7b\u4f3c\u7684,\u4ee5\u592a\u7f51\u62a5\u5934\u7684MAC\u5730\u5740\u662f\u53cc\u65b9\u7684\u70e7\u5f55\u5728\u7f51\u5361\u4e0a\u7684\u5730\u5740,IP\u62a5\u5934\u7684IP\u5730\u5740\u662fDHCP\u670d\u52a1\u5668\u7684IP\u5730\u5740(\u53d1\u51fa\u65b9)\u548c255.255.255.255(\u63a5\u6536\u65b9), UDP\u6807\u5934\u7684\u7aef\u53e3\u662f67(\u53d1\u51fa\u65b9)\u548c68(\u63a5\u6536\u65b9),\u5206\u914d\u7ed9\u8bf7\u6c42\u7aef\u7684IP\u5730\u5740\u548c\u672c\u7f51\u7edc\u7684\u5177\u4f53\u53c2\u6570\u5219\u5305\u542b\u5728Data\u90e8\u5206. \u65b0\u52a0\u5165\u7684\u8ba1\u7b97\u673a\u6536\u5230\u8fd9\u4e2a\u54cd\u5e94\u5305,\u4e8e\u662f\u5c31\u77e5\u9053\u4e86\u81ea\u5df1\u7684IP\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u3001\u7f51\u5173\u5730\u5740\u3001DNS\u670d\u52a1\u5668\u7b49\u7b49\u53c2\u6570. DNS \u00b6 dns - domain name server \u57df\u540d\u89e3\u6790\u670d\u52a1, \u8d1f\u8d23\u628a\u57df\u540d\u89e3\u6790\u6210IP\u5730\u5740 \u53c2\u8003\u6587\u6863: https://www.cnblogs.com/linhaifeng/articles/5937962.html#_label14 \u4f7f\u7528\u7684\u963f\u91cc\u4e91\u670d\u52a1\u5668\u9ed8\u8ba4\u5c31\u6709\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740;\u7533\u8bf7\u57df\u540d;\u6dfb\u52a0\u89e3\u6790\u8bb0\u5f55\u5c06\u57df\u540d\u8ddfIP\u5730\u5740\u5173\u8054\u5230\u4e00\u8d77;\u6700\u540e\u8fdb\u884c\u5907\u6848. \u5168\u7403\u4e00\u5171\u670913\u53f0\u6839\u670d\u52a1\u5668.13\u53f0\u662f\u540c\u6b65\u7684. \u5e95\u5c42\u662f\u57fa\u4e8eUDP\u534f\u8bae\u7684 ,\u6bcf\u4e00\u6b21\u6700\u5927512bit,13\u5df2\u7ecf\u662f\u6781\u9650\u4e86. 13\u53f0\u6ca1\u6709\u4e00\u53f0\u5728\u4e2d\u56fd,So,\u56fd\u5185\u6709\u5927\u91cf\u7684\u7f13\u5b58DNS\u670d\u52a1\u5668.Hhh. DNS\u7684\u89e3\u6790\u6d41\u7a0b Ps: \u4e00\u65e6\u9012\u5f52\u670d\u52a1\u5668\u62ff\u5230\u89e3\u6790\u8bb0\u5f55\u4ee5\u540e, \u5c31\u4f1a\u5728\u672c\u5730\u8fdb\u884c\u7f13\u5b58 , \u5982\u679c\u4e0b\u6b21\u5ba2\u6237\u7aef\u518d\u8bf7\u6c42\u672c\u5730\u7684\u9012\u5f52\u57df\u540d\u670d\u52a1\u5668\u76f8\u540c\u57df\u540d\u7684\u65f6\u5019, \u5c31\u4e0d\u4f1a\u518d\u8fd9\u6837\u4e00\u5c42\u4e00\u5c42\u67e5\u4e86, \u56e0\u4e3a\u672c\u5730\u670d\u52a1\u5668\u91cc\u9762\u5df2\u7ecf\u6709\u7f13\u5b58\u4e86(\u8fbe\u5230\u4e86\u52a0\u901f\u7684\u6548\u679c)\uff01\u8981\u77e5\u9053\u7f13\u5b58\u662f\u6709TTL\u7684\u751f\u547d\u5468\u671f\u7684,\u9700\u8981\u5b9a\u65f6\u66f4\u65b0. DNS\u9664\u4e86\u9012\u5f52\u67e5\u627e,\u8fd8\u6709\u8fed\u4ee3\u67e5\u627e..\u7565. DNS\u7684\u67e5\u627e\u987a\u5e8f DNS\u7684\u89e3\u6790\u901f\u5ea6\u4e5f\u662f\u7f51\u901f\u7684\u4e00\u90e8\u5206,\u6240\u4ee5\u4e3a\u4e86\u52a0\u901f\u5176\u67e5\u8be2,\u5f15\u5165\u4e86\u7f13\u5b58! \u6d4f\u89c8\u5668DNS\u7f13\u5b58->\u672c\u5730\u7cfb\u7edfDNS\u7f13\u5b58->\u672c\u5730\u8ba1\u7b97\u673aHOSTS\u6587\u4ef6->ISP DNS\u7f13\u5b58->\u9012\u5f52or\u8fed\u4ee3\u641c\u7d22 Ps: \u7f13\u5b58\u90fd\u662f\u5185\u5b58\u6570\u636e,HOSTS\u6587\u4ef6\u662f\u786c\u76d8\u6570\u636e. \u8ba1\u7b97\u673aHOSTS\u6587\u4ef6\u8def\u5f84: linux - /etc/hosts Windows - C: \\Windows\\System 32 \\drivers\\etc eg: \u5728\u6587\u4ef6\u4e2d\u6dfb\u52a0 1.1.1.1 www.baidu.com \u90a3\u4e48ping www.baidu.com\u663e\u793a\u7684ip\u5c31\u662f1.1.1.1 DNS\u7684\u67e5\u627e\u987a\u5e8f\u662f\u5408\u7406\u7684,\u901f\u5ea6\u5bf9\u6bd4: \u5185\u5b58>\u786c\u76d8>\u7f51\u7edcIO\u5ef6\u8fdf windows\u4e0a\u67e5\u770b\u6240\u6709\u7684IP\u914d\u7f6e\u4fe1\u606f: ipconfig -all \u67e5\u770bwindows\u64cd\u4f5c\u7cfb\u7edfDNS\u7684\u7f13\u5b58: ipconfig /displaydns \u6e05\u9664windows\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684DNS\u7f13\u5b58: ipconfig /flushdns \u6e05\u9664\u6d4f\u89c8\u5668\u7684dns\u7f13\u5b58,\u5728\u76f8\u5e94\u6d4f\u89c8\u5668\u91cc\u8f93\u5165: \u8c37\u6b4c -- chrome://net-internals/#dns \u70b9\u51fbclear host cache \u7f51\u7edc\u62d3\u6251\u56fe \u00b6 \u5047\u8bbe\u6709\u4e24\u95f4\u5927\u6559\u5ba4,\u6559\u5ba41\u5904\u4e8e\u7f51\u6bb5172.168.1.0,\u6559\u5ba42\u5904\u4e8e\u7f51\u6bb5192.169.13.0; \u6559\u5ba41\u4e2d\u7684\u4e3b\u673aA\u8981\u8bbf\u95ee\u963f\u91cc\u5df4\u5df4\u7684\u670d\u52a1\u5668...\u8bbf\u95ee\u7684\u662f\u963f\u91cc\u5df4\u5df4\u670d\u52a1\u5668\u7684\u516c\u7f51IP,\u518d\u6620\u5c04\u6210\u79c1\u6709IP. Ps1: \u4e24\u95f4\u6559\u5ba4\u4e0d\u9700\u89812\u4e2a\u8def\u7531,\u5171\u7528\u540c\u4e00\u4e2a\u8def\u7531\u5668\u5c31\u884c,\u56e0\u4e3a\u4e00\u4e2a\u8def\u7531\u53ef\u4ee5\u5e2e\u5fd9\u8f6c\u53d1\u591a\u4e2a\u7f51\u6bb5..(\u4e0d\u540c\u7684\u7f51\u6bb5\u5b58\u5728\u4e8e\u4e00\u4e2a\u8def\u7531\u8868\u4e2d) Ps2: \u6ce8\u610f\u54e6!\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u4e0d\u4f1a\u66b4\u9732\u5728\u516c\u7f51\u5f53\u4e2d..\u91cc\u9762\u7684\u4e3b\u673a\u53ea\u6709\u8bbf\u95ee\u522b\u4e2a\u7684\u547d.\u60f3\u8981\u9006\u5929\u6539\u547d\u8ba9\u522b\u4e2a\u8bbf\u95ee\u5b83,\u5f97\u6709\u4e2a\u516c\u7f51IP..","title":"\u8865\u5145"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/#dhcp","text":"dhcp\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7528\u4e8e\u5206\u914dIP\u5730\u5740\u7684\u5957\u63a5\u5b57\u7a0b\u5e8f","title":"DHCP"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/#_1","text":"\u60f3\u5b9e\u73b0\u7f51\u7edc\u901a\u4fe1, \u6bcf\u53f0\u4e3b\u673a\u9700\u5177\u5907\u7684 \u56db\u8981\u7d20 \u25cb \u672c\u673a\u7684IP\u5730\u5740 \u25cb \u5b50\u7f51\u63a9\u7801 \u25cb \u7f51\u5173\u7684IP\u5730\u5740 \u25cb DNS\u7684IP\u5730\u5740 (\u4e0d\u662f\u5fc5\u987b\u7684,\u4e0d\u7528\u57df\u540d,\u76f4\u63a5\u7528IP\u5730\u5740\u5c31\u884c) DNS -- \u57df\u540d\u89e3\u6790,\u5c06\u57df\u540d\u8f6c\u6362\u6210\u5bf9\u5e94\u7684IP\u5730\u5740.. DNS\u7684IP\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a,\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u5c06DNS\u7684IP\u5730\u5740\u8bbe\u7f6e\u6210\u7f51\u5173/\u8def\u7531\u5668\u7684IP\u5730\u5740.\u82e5\u662f\u540e\u8005,\u5728\u6d4f\u89c8\u5668\u4e0a\u8f93\u5165\u57df\u540d\u540e,\u6d4f\u89c8\u5668\u4f1a\u5148\u5c06\u8fd9\u4e2a\u57df\u540d\u5148\u9001\u5230\u7f51\u5173,\u7f51\u5173\u4f1a\u5e2e\u5fd9\u5411DNS\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42,\u628a\u57df\u540d\u8f6c\u6210IP\u5730\u5740\u540e\u518d\u53bb\u901a\u4fe1. \u6572\u9ed1\u677f!!!\u2606\u6d4f\u89c8\u5668\u89c4\u5b9a\u7528\u6237\u8f93\u5165\u7684\u7f51\u5740\u4e0d\u6572\u7aef\u53e3,\u9ed8\u8ba4\u7aef\u53e3\u53f7\u662f80 !! IP+\u7aef\u53e3 -- \u8054\u5408\u552f\u4e00\u5c31\u884c\u4e86\u5457.","title":"\u56db\u8981\u7d20"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/#_2","text":"\u83b7\u53d6\u56db\u8981\u7d20\u7684\u5730\u5740,\u6709\u4e24\u79cd\u65b9\u5f0f: 1> \u624b\u52a8\u914d\u7f6e -- \u9759\u6001\u83b7\u53d6 (\u53ef\u80fd\u4f1a\u51b2\u7a81 \u5728\u8bbe\u7f6e\u524d\u5148ping\u4e00\u4e0b,ping\u901a\u4e86\u4ee3\u8868\u6b64IP\u88ab\u5360\u7528\u4e86) 2> dhcp -- \u52a8\u6001\u83b7\u53d6 \"\u83b7\u53d6\u540e\u4e0d\u662f\u4e0d\u53d8\u7684 \u662f\u6709 \u79df\u7ea6\u65f6\u95f4 \u7684 \u8fc7\u65f6\u4f1a\u91cd\u65b0\u83b7\u53d6\"","title":"\u83b7\u53d6\u65b9\u5f0f"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/#_3","text":"\u6bcf\u53f0\u4e3b\u673a\u90fd\u4f1a\u9ed8\u8ba4\u5b89\u88c5\u4e00\u4e2adhcp client\u8f6f\u4ef6.\u6bcf\u4e2a\u8def\u7531\u5668\u4f1a\u9ed8\u8ba4\u5b89\u88c5dhcp server\u8f6f\u4ef6. \u4e3b\u673a\u4e00\u5f00\u673a,dhcp client\u8f6f\u4ef6\u5c31\u4f1a\u9ed8\u8ba4\u542f\u52a8 (\u5f53\u7136,\u524d\u63d0\u662f\u4e3b\u673a\u6709\u7f51\u7edc\u80fd\u5f80\u5916\u901a\u4fe1) dhcp\u62a5\u5934\u683c\u5f0f : \u4ee5\u592a\u7f51\u5934 IP\u5934 UDP\u5934 DHCP\u6570\u636e\u5305 1> \u6700\u524d\u9762\u7684\"\u4ee5\u592a\u7f51\u6807\u5934\", \u8bbe\u7f6e\u53d1\u51fa\u65b9(\u672c\u673a)\u7684MAC\u5730\u5740\u548c\u63a5\u6536\u65b9(DHCP\u670d\u52a1\u7aef)\u7684MAC\u5730\u5740. \u524d\u8005\u5c31\u662f\u672c\u673a\u70e7\u5f55\u5728\u7f51\u5361\u4e0a\u7684MAC\u5730\u5740,\u540e\u8005\u8fd9\u65f6\u4e0d\u77e5\u9053,\u5c31\u586b\u5165\u4e00\u4e2a\u5e7f\u64ad\u5730\u5740: FF-FF-FF-FF-FF-FF. 2> \u540e\u9762\u7684\"IP\u6807\u5934\",\u8bbe\u7f6e\u53d1\u51fa\u65b9\u7684IP\u5730\u5740\u548c\u63a5\u6536\u65b9\u7684IP\u5730\u5740. \u672c\u673a\u5bf9\u4e8e\u8fd9\u4e24\u8005\u90fd\u4e0d\u77e5\u9053. \u4e8e\u662f,\u53d1\u51fa\u65b9\u7684IP\u5730\u5740\u5c31\u8bbe\u4e3a0.0.0.0, \u63a5\u6536\u65b9\u7684IP\u5730\u5740\u8bbe\u4e3a255.255.255.255 3> \u6700\u540e\u7684\"UDP\u6807\u5934\",\u8bbe\u7f6e\u53d1\u51fa\u65b9\u7684\u7aef\u53e3\u548c\u63a5\u6536\u65b9\u7684\u7aef\u53e3. \u8fd9\u4e00\u90e8\u5206\u662fDHCP\u534f\u8bae\u89c4\u5b9a\u597d\u7684, \u53d1\u51fa\u65b9\u662f68\u7aef\u53e3, \u63a5\u6536\u65b9\u662f67\u7aef\u53e3\u3002 MAC(\u672c\u673a) FF-FF-FF-FF-FF-FF 0.0.0.0 255.255.255.255 68 67 DHCP\u6570\u636e\u5305 \u8fd9\u4e2a\u6570\u636e\u5305\u6784\u9020\u5b8c\u6210\u540e, \u5c31\u53ef\u4ee5\u53d1\u51fa\u4e86. \u4ee5\u592a\u7f51\u662f\u5e7f\u64ad\u7684\u5f62\u5f0f\u53d1\u9001,\u540c\u4e00\u4e2a\u5b50\u7f51\u7edc\u7684\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6536\u5230\u4e86\u8fd9\u4e2a\u5305. \u56e0\u4e3a\u63a5\u6536\u65b9\u7684MAC\u5730\u5740\u662fFF-FF-FF-FF-FF-FF, \u770b\u4e0d\u51fa\u662f\u53d1\u7ed9\u8c01\u7684, \u6240\u4ee5\u6bcf\u53f0\u6536\u5230\u8fd9\u4e2a\u5305\u7684\u8ba1\u7b97\u673a, \u8fd8\u5fc5\u987b\u5206\u6790\u8fd9\u4e2a\u5305\u7684IP\u5730\u5740, \u624d\u80fd\u786e\u5b9a\u662f\u4e0d\u662f\u53d1\u7ed9\u81ea\u5df1\u7684. \u5f53\u770b\u5230\u53d1\u51fa\u65b9IP\u5730\u5740\u662f0.0.0.0,\u63a5\u6536\u65b9IP\u662f255.255.255.255, \u4e8e\u662fDHCP\u670d\u52a1\u5668\u77e5\u9053\"\u8fd9\u4e2a\u5305\u662f\u53d1\u7ed9\u6211\u7684\", \u800c\u5176\u4ed6\u8ba1\u7b97\u673a\u5c31\u53ef\u4ee5\u4e22\u5f03\u8fd9\u4e2a\u5305. \u63a5\u4e0b\u6765,DHCP\u670d\u52a1\u5668\u8bfb\u51fa\u8fd9\u4e2a\u5305\u7684\u6570\u636e\u5185\u5bb9,\u5206\u914d\u597dIP\u5730\u5740,\u53d1\u9001\u56de\u53bb\u4e00\u4e2a\"DHCP\u54cd\u5e94\"\u6570\u636e\u5305. \u8fd9\u4e2a\u54cd\u5e94\u5305\u7684\u7ed3\u6784\u4e5f\u662f\u7c7b\u4f3c\u7684,\u4ee5\u592a\u7f51\u62a5\u5934\u7684MAC\u5730\u5740\u662f\u53cc\u65b9\u7684\u70e7\u5f55\u5728\u7f51\u5361\u4e0a\u7684\u5730\u5740,IP\u62a5\u5934\u7684IP\u5730\u5740\u662fDHCP\u670d\u52a1\u5668\u7684IP\u5730\u5740(\u53d1\u51fa\u65b9)\u548c255.255.255.255(\u63a5\u6536\u65b9), UDP\u6807\u5934\u7684\u7aef\u53e3\u662f67(\u53d1\u51fa\u65b9)\u548c68(\u63a5\u6536\u65b9),\u5206\u914d\u7ed9\u8bf7\u6c42\u7aef\u7684IP\u5730\u5740\u548c\u672c\u7f51\u7edc\u7684\u5177\u4f53\u53c2\u6570\u5219\u5305\u542b\u5728Data\u90e8\u5206. \u65b0\u52a0\u5165\u7684\u8ba1\u7b97\u673a\u6536\u5230\u8fd9\u4e2a\u54cd\u5e94\u5305,\u4e8e\u662f\u5c31\u77e5\u9053\u4e86\u81ea\u5df1\u7684IP\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u3001\u7f51\u5173\u5730\u5740\u3001DNS\u670d\u52a1\u5668\u7b49\u7b49\u53c2\u6570.","title":"\u52a8\u6001\u83b7\u53d6\u8fc7\u7a0b"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/#dns","text":"dns - domain name server \u57df\u540d\u89e3\u6790\u670d\u52a1, \u8d1f\u8d23\u628a\u57df\u540d\u89e3\u6790\u6210IP\u5730\u5740 \u53c2\u8003\u6587\u6863: https://www.cnblogs.com/linhaifeng/articles/5937962.html#_label14 \u4f7f\u7528\u7684\u963f\u91cc\u4e91\u670d\u52a1\u5668\u9ed8\u8ba4\u5c31\u6709\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740;\u7533\u8bf7\u57df\u540d;\u6dfb\u52a0\u89e3\u6790\u8bb0\u5f55\u5c06\u57df\u540d\u8ddfIP\u5730\u5740\u5173\u8054\u5230\u4e00\u8d77;\u6700\u540e\u8fdb\u884c\u5907\u6848. \u5168\u7403\u4e00\u5171\u670913\u53f0\u6839\u670d\u52a1\u5668.13\u53f0\u662f\u540c\u6b65\u7684. \u5e95\u5c42\u662f\u57fa\u4e8eUDP\u534f\u8bae\u7684 ,\u6bcf\u4e00\u6b21\u6700\u5927512bit,13\u5df2\u7ecf\u662f\u6781\u9650\u4e86. 13\u53f0\u6ca1\u6709\u4e00\u53f0\u5728\u4e2d\u56fd,So,\u56fd\u5185\u6709\u5927\u91cf\u7684\u7f13\u5b58DNS\u670d\u52a1\u5668.Hhh. DNS\u7684\u89e3\u6790\u6d41\u7a0b Ps: \u4e00\u65e6\u9012\u5f52\u670d\u52a1\u5668\u62ff\u5230\u89e3\u6790\u8bb0\u5f55\u4ee5\u540e, \u5c31\u4f1a\u5728\u672c\u5730\u8fdb\u884c\u7f13\u5b58 , \u5982\u679c\u4e0b\u6b21\u5ba2\u6237\u7aef\u518d\u8bf7\u6c42\u672c\u5730\u7684\u9012\u5f52\u57df\u540d\u670d\u52a1\u5668\u76f8\u540c\u57df\u540d\u7684\u65f6\u5019, \u5c31\u4e0d\u4f1a\u518d\u8fd9\u6837\u4e00\u5c42\u4e00\u5c42\u67e5\u4e86, \u56e0\u4e3a\u672c\u5730\u670d\u52a1\u5668\u91cc\u9762\u5df2\u7ecf\u6709\u7f13\u5b58\u4e86(\u8fbe\u5230\u4e86\u52a0\u901f\u7684\u6548\u679c)\uff01\u8981\u77e5\u9053\u7f13\u5b58\u662f\u6709TTL\u7684\u751f\u547d\u5468\u671f\u7684,\u9700\u8981\u5b9a\u65f6\u66f4\u65b0. DNS\u9664\u4e86\u9012\u5f52\u67e5\u627e,\u8fd8\u6709\u8fed\u4ee3\u67e5\u627e..\u7565. DNS\u7684\u67e5\u627e\u987a\u5e8f DNS\u7684\u89e3\u6790\u901f\u5ea6\u4e5f\u662f\u7f51\u901f\u7684\u4e00\u90e8\u5206,\u6240\u4ee5\u4e3a\u4e86\u52a0\u901f\u5176\u67e5\u8be2,\u5f15\u5165\u4e86\u7f13\u5b58! \u6d4f\u89c8\u5668DNS\u7f13\u5b58->\u672c\u5730\u7cfb\u7edfDNS\u7f13\u5b58->\u672c\u5730\u8ba1\u7b97\u673aHOSTS\u6587\u4ef6->ISP DNS\u7f13\u5b58->\u9012\u5f52or\u8fed\u4ee3\u641c\u7d22 Ps: \u7f13\u5b58\u90fd\u662f\u5185\u5b58\u6570\u636e,HOSTS\u6587\u4ef6\u662f\u786c\u76d8\u6570\u636e. \u8ba1\u7b97\u673aHOSTS\u6587\u4ef6\u8def\u5f84: linux - /etc/hosts Windows - C: \\Windows\\System 32 \\drivers\\etc eg: \u5728\u6587\u4ef6\u4e2d\u6dfb\u52a0 1.1.1.1 www.baidu.com \u90a3\u4e48ping www.baidu.com\u663e\u793a\u7684ip\u5c31\u662f1.1.1.1 DNS\u7684\u67e5\u627e\u987a\u5e8f\u662f\u5408\u7406\u7684,\u901f\u5ea6\u5bf9\u6bd4: \u5185\u5b58>\u786c\u76d8>\u7f51\u7edcIO\u5ef6\u8fdf windows\u4e0a\u67e5\u770b\u6240\u6709\u7684IP\u914d\u7f6e\u4fe1\u606f: ipconfig -all \u67e5\u770bwindows\u64cd\u4f5c\u7cfb\u7edfDNS\u7684\u7f13\u5b58: ipconfig /displaydns \u6e05\u9664windows\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684DNS\u7f13\u5b58: ipconfig /flushdns \u6e05\u9664\u6d4f\u89c8\u5668\u7684dns\u7f13\u5b58,\u5728\u76f8\u5e94\u6d4f\u89c8\u5668\u91cc\u8f93\u5165: \u8c37\u6b4c -- chrome://net-internals/#dns \u70b9\u51fbclear host cache","title":"DNS"},{"location":"0_%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/7_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%A1%A5%E5%85%85/#_4","text":"\u5047\u8bbe\u6709\u4e24\u95f4\u5927\u6559\u5ba4,\u6559\u5ba41\u5904\u4e8e\u7f51\u6bb5172.168.1.0,\u6559\u5ba42\u5904\u4e8e\u7f51\u6bb5192.169.13.0; \u6559\u5ba41\u4e2d\u7684\u4e3b\u673aA\u8981\u8bbf\u95ee\u963f\u91cc\u5df4\u5df4\u7684\u670d\u52a1\u5668...\u8bbf\u95ee\u7684\u662f\u963f\u91cc\u5df4\u5df4\u670d\u52a1\u5668\u7684\u516c\u7f51IP,\u518d\u6620\u5c04\u6210\u79c1\u6709IP. Ps1: \u4e24\u95f4\u6559\u5ba4\u4e0d\u9700\u89812\u4e2a\u8def\u7531,\u5171\u7528\u540c\u4e00\u4e2a\u8def\u7531\u5668\u5c31\u884c,\u56e0\u4e3a\u4e00\u4e2a\u8def\u7531\u53ef\u4ee5\u5e2e\u5fd9\u8f6c\u53d1\u591a\u4e2a\u7f51\u6bb5..(\u4e0d\u540c\u7684\u7f51\u6bb5\u5b58\u5728\u4e8e\u4e00\u4e2a\u8def\u7531\u8868\u4e2d) Ps2: \u6ce8\u610f\u54e6!\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u5c40\u57df\u7f51\u7684\u4e3b\u673a\u4e0d\u4f1a\u66b4\u9732\u5728\u516c\u7f51\u5f53\u4e2d..\u91cc\u9762\u7684\u4e3b\u673a\u53ea\u6709\u8bbf\u95ee\u522b\u4e2a\u7684\u547d.\u60f3\u8981\u9006\u5929\u6539\u547d\u8ba9\u522b\u4e2a\u8bbf\u95ee\u5b83,\u5f97\u6709\u4e2a\u516c\u7f51IP..","title":"\u7f51\u7edc\u62d3\u6251\u56fe"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/","text":"\u7a0b\u5e8f = \u6570\u636e\u7ed3\u6784 + \u7b97\u6cd5 1 , \"123\" \u7b49\u6570\u636e\u7528\u5217\u8868 \u3001 \u5b57\u5178\u7b49\u6570\u636e\u7ed3\u6784\u5b58\u653e\u8d77\u6765 . \u4f46\u90fd\u662f\u9759\u6001\u7684 , \u7528\u51fd\u6570\u7b49\u5199\u6210\u7b97\u6cd5\u8ba9\u8fd9\u4e9b\u6570\u636e\u6d3b\u8dc3\u8d77\u6765 . \u590d\u6742\u5ea6 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6\u662f\u7528\u6765\u4f30\u8ba1\u7b97\u6cd5\u8fd0\u884c\u65f6\u95f4\u7684\u4e00\u4e2a\u5f0f\u5b50.(\u5355\u4f4d). n = 64 while n > 1 : print ( n ) n = n // 2 \"\"\" 2^6 = 64 --> log2^64=6 --> \u5219\u65f6\u95f4\u590d\u6742\u5ea6\u8bb0\u4e3a O(log2^n) \u6216\u8005 O(log^n) \u2605 \u5f53\u7b97\u6cd5\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u5faa\u73af\u6298\u534a\u7684\u65f6\u5019,\u65f6\u95f4\u590d\u6742\u5ea6\u5f0f\u5b50\u4e2d\u4f1a\u51fa\u73b0logn. (\u6bcf\u6b21\u5faa\u73af\u8fed\u4ee3 \u8ba9\u95ee\u9898\u7684\u89c4\u6a21\u7f29\u5c0f\u4e00\u534a) \"\"\" \u5e38\u89c1\u7684\u65f6\u95f4\u590d\u6742\u5ea6 (\u590d\u6742\u5ea6\u4ece\u4f4e\u5230\u9ad8,\u6548\u7387\u4ece\u9ad8\u5230\u4f4e) Ps: \u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u8fd9\u6837\u7684,\u73b0\u5b9e\u4e2d\u8fd8\u8981\u8003\u8651\u673a\u5668\u548c\u95ee\u9898\u7684\u89c4\u6a21! O(1) < O(logn) < O(n) < O(nlogn) < O(n^2) < O(n^2logn) < O(n^3) \u5176\u5b83: O(n!) O(2^n) O(n^n) \u5206\u6790: O(n) \u548c O(nlogn),\u540c\u65f6\u7ea6\u53bb\u4e00\u4e2an,\u5c31\u662fO(1) \u548c O(logn) \u56e0\u4e3aO(1) < O(logn),So,O(n) < O(nlogn),\u5176\u4f59\u540c\u7406. \u5982\u4f55\u7b80\u5355\u5feb\u901f\u5730\u5224\u65ad\u7b97\u6cd5\u590d\u6742\u5ea6?? \u25b2 \u5feb\u901f\u5224\u65ad\u7b97\u6cd5\u590d\u6742\u5ea6 ( \u9002\u7528\u4e8e\u7edd\u5927\u591a\u6570\u7b80\u5355\u60c5\u51b5 ) 1 > \u786e\u5b9a\u95ee\u9898\u89c4\u6a21 2 > \u662f\u5426\u6709\u5faa\u73af\u51cf\u534a\u8fc7\u7a0b -- logn 3 > \u82e5\u6709k\u5c42\u5173\u4e8en\u7684\u5faa\u73af -- n ^ k \u25b2 \u590d\u6742\u8fc7\u7a0b , \u6839\u636e\u7b97\u6cd5\u6267\u884c\u8fc7\u7a0b\u5224\u65ad \u7a7a\u95f4\u590d\u6742\u5ea6 \u00b6 \u7a7a\u95f4\u590d\u6742\u5ea6\u662f\u7528\u6765\u8bc4\u4f30\u7b97\u6cd5\u5185\u5b58\u5360\u7528\u5927\u5c0f\u7684\u5f0f\u5b50 \u7a7a\u95f4\u590d\u6742\u5ea6\u7684\u8868\u793a\u65b9\u6cd5\u4e0e\u65f6\u95f4\u590d\u6742\u5ea6\u5b8c\u5168\u4e00\u6837 \u7b97\u6cd5\u4f7f\u7528\u4e86\u51e0\u4e2a\u53d8\u91cf O ( 1 ) \u7b97\u6cd5\u4f7f\u7528\u4e86\u957f\u5ea6\u4e3an\u7684\u4e00\u7ef4\u5217\u8868 O ( n ) \u7b97\u6cd5\u4f7f\u7528\u4e86m\u884cn\u5217\u7684\u4e8c\u7ef4\u5217\u8868 O ( mn ) \u6211\u4eec\u66f4\u770b\u91cd\u7528\u6237\u7b49\u5f85\u7684\u65f6\u95f4 , \u901a\u5e38\u4f1a\u7528 \"\u7a7a\u95f4\u6362\u65f6\u95f4\" eg : \u5206\u5e03\u5f0f\u8ba1\u7b97 \u9012\u5f52 \u00b6 \u9012\u5f52\u7684\u4e24\u4e2a\u7279\u70b9: \u8c03\u7528\u81ea\u8eab \u3001 \u7ed3\u675f\u6761\u4ef6 \u9012\u5f52\u56de\u987e \u00b6 \"\"\" \u5206\u6790: func1\u6ca1\u6709\u7ed3\u675f\u6761\u4ef6 func2\u770b\u4f3c\u6709\u7ed3\u675f\u6761\u4ef6,\u4f46\u4e0d\u4f1a\u7ed3\u675f\u7684. func3\u3001func4\u662f\u9012\u5f52! \u82e5x=3.\u5206\u522b\u8c03\u7528fun3(x)\u3001func4(x).\u8f93\u51fa\u7ed3\u679c\u5206\u522b\u4e3a: func3(3) -- 3 2 1 func4(3) -- 1 2 3 \"\"\" def func1 ( x ): print ( x ) func1 ( x - 1 ) def func2 ( x ): if x > 0 : print ( x ) func2 ( x + 1 ) def func3 ( x ): if x > 0 : print ( x ) func3 ( x - 1 ) def func4 ( x ): if x > 0 : func4 ( x - 1 ) print ( x ) Ps: \u56fe\u4e2d\u5927\u6846\u8868\u793a\u51fd\u6570\u7684\u6267\u884c,\u91cc\u9762\u7684\u84dd\u8272\u5c0f\u6846\u8868\u793aprint\u8bed\u53e5.. \u6c49\u8bfa\u5854\u95ee\u9898 \u00b6 \u6709\u4e09\u6839\u6746(\u7f16\u53f7A\u3001B\u3001C), \u5728A\u6746\u81ea\u4e0b\u800c\u4e0a\u3001\u7531\u5927\u5230\u5c0f\u6309\u987a\u5e8f\u653e\u7f6e64\u4e2a\u91d1\u76d8. \u6e38\u620f\u7684\u76ee\u6807: \u628aA\u6746\u4e0a\u7684\u91d1\u76d8\u5168\u90e8\u79fb\u5230C\u6746\u4e0a, \u5e76\u4ecd\u4fdd\u6301\u539f\u6709\u987a\u5e8f\u53e0\u597d. \u64cd\u4f5c\u89c4\u5219: \u6bcf\u6b21\u53ea\u80fd\u79fb\u52a8\u4e00\u4e2a\u76d8\u5b50; \u5728\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u4e09\u6839\u6746\u4e0a\u90fd\u59cb\u7ec8\u4fdd\u6301\u5927\u76d8\u5728\u4e0b, \u5c0f\u76d8\u5728\u4e0a; \u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u76d8\u5b50\u53ef\u4ee5\u7f6e\u4e8eA\u3001B\u3001C\u4efb\u4e00\u6746\u4e0a. \u5206\u6790 : > n = 2 \u65f6 1. \u628a\u5c0f\u5706\u76d8\u4eceA\u79fb\u52a8\u5230B 2. \u628a\u5927\u5706\u76d8\u4eceA\u79fb\u52a8\u5230C 3. \u628a\u5c0f\u5706\u76d8\u4eceB\u79fb\u52a8\u5230C > n\u4e2a\u76d8\u5b50\u65f6 , \u53ef\u4ee5\u5c06\u5176\u770b\u4f5c\u662f\u4e24\u4e2a\u6574\u4f53 , \u7b2cn\u4e2a\u76d8\u5b50\u4e3a\u4e00\u4e2a\u6574\u4f53 \u3001 \u5176\u4f59\u7684n - 1 \u4e2a\u76d8\u5b50\u4e3a\u4e00\u4e2a\u6574\u4f53 , \u4f7f\u5f97\u95ee\u9898\u7684\u89c4\u6a21\u51cf1 . 1. \u628an - 1 \u4e2a\u76d8\u5b50\u7ecf\u8fc7C\u79fb\u52a8\u5230B 2. \u628a\u7b2cn\u4e2a\u76d8\u5b50\u79fb\u52a8\u5230C 3. \u628an - 1 \u4e2a\u76d8\u5b50\u4eceB\u7ecf\u8fc7A\u79fb\u52a8\u5230C \u5047\u8bbe\u79fb\u52a8n\u4e2a\u76d8\u5b50 , \u9700\u8981h ( n ) \u6b65 . \u90a3\u4e48\u6839\u636e\u4e0a\u9762\u79fb\u52a8n\u4e2a\u76d8\u5b50\u65f6\u5019\u7684\u6b65\u9aa4 , h ( n ) = h ( n - 1 ) + 1 + h ( n - 1 ) = 2 h ( n - 1 ) + 1 \u4e5f\u5c31\u662f f ( x ) = 2 f ( x - 1 ) + 1 , \u8be5\u6570\u636e\u6a21\u578b\u8d70\u52bf\u7c7b\u4f3c\u4e8e 2 ^ n So , 2 ^ 64 = 18446744073709551616 \u5047\u8bbe\u6bcf\u79d2\u79fb\u52a8\u4e00\u4e2a\u76d8\u5b50 , \u5927\u6982\u9700\u89815800\u4ebf\u5e74 . Wow \uff5e \u4ee3\u7801\u5b9e\u73b0: # n,a,b,c\u8868\u660e\u5c06n\u4e2a\u76d8\u5b50\u4ecea\u7ecf\u8fc7b\u79fb\u52a8\u5230c # \u56db\u4e2a\u53c2\u6570:\u591a\u5c11\u4e2a\u76d8\u5b50,\u4ece\u54ea\u91cc\u3001\u7ecf\u8fc7\u54ea\u91cc\u3001\u5230\u54ea\u91cc def hanoi ( n , a , b , c ): if n > 0 : hanoi ( n - 1 , a , c , b ) print ( f \"moving from { a } to { c } \" ) hanoi ( n - 1 , b , a , c ) hanoi ( 3 , 'A' , 'B' , 'C' ) \"\"\" moving from A to C moving from A to B moving from C to B moving from A to C moving from B to A moving from B to C moving from A to C \"\"\" \u67e5\u627e \u00b6 \u5728\u4e00\u4e9b\u6570\u636e\u5143\u7d20\u4e2d,\u901a\u8fc7\u4e00\u5b9a\u7684\u65b9\u6cd5\u627e\u51fa\u4e0e\u7ed9\u5b9a\u5173\u952e\u5b57\u76f8\u540c\u7684\u6570\u636e\u5143\u7d20\u7684\u8fc7\u7a0b. \u9488\u5bf9\u6709\u5e8f\u5217\u8868,\u4e8c\u5206\u67e5\u627e\u7684\u6548\u7387\u8981\u6bd4\u7ebf\u6027\u67e5\u627e\u7684\u6548\u7387\u9ad8! \u987a\u5e8f\u67e5\u627e \u00b6 \u987a\u5e8f\u67e5\u627e(Linear Search): \u4e5f\u53eb\u7ebf\u6027\u67e5\u627e, \u4ece\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb,\u987a\u5e8f\u8fdb\u884c\u641c\u7d22,\u76f4\u5230\u627e\u5230\u5143\u7d20\u6216\u641c\u7d22\u5230\u5217\u8868\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e3a\u6b62. \u65f6\u95f4\u590d\u6742\u5ea6 O(n) \u5217\u8868\u67e5\u627e(\u7ebf\u6027\u8868\u67e5\u627e): \u4ece\u5217\u8868\u4e2d\u67e5\u627e\u6307\u5b9a\u5143\u7d20 \u8f93\u5165 - \u5217\u8868\u3001\u5f85\u67e5\u627e\u5143\u7d20 \u8f93\u51fa - \u5143\u7d20\u4e0b\u8868 (\u672a\u627e\u5230\u5143\u7d20\u65f6,\u4e00\u822c\u8fd4\u56deNone\u6216-1) \u5185\u7f6e\u7684\u5217\u8868\u67e5\u627e\u51fd\u6570: index() -- \u5b83\u7684\u672c\u8d28\u662f\u7ebf\u6027\u67e5\u627e!! def linear_search ( li , target ): for ind , val in enumerate ( li ): if val == target : return ind return None print ( linear_search ([ 1 , 4 , 6 , 4 ], 4 )) # 1 \"\"\" \u5206\u6790:\u8be5\u95ee\u9898\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\u591a\u5c11? \u95ee\u9898\u89c4\u6a21\u662f\u5217\u8868\u7684\u957f\u5ea6n;\u6ca1\u6709\u5faa\u73af\u51cf\u534a\u8fc7\u7a0b;\u6709\u4e00\u5c42\u5faa\u73af. So,\u8be5\u7a0b\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n) \"\"\" \u4e8c\u5206\u67e5\u627e \u00b6 \u4e8c\u5206\u67e5\u627e(Binary Search): \u4e5f\u53eb\u6298\u534a\u67e5\u627e. \u4ece\u6709\u5e8f\u5217\u8868\u7684 \u521d\u59cb \u5019\u9009\u533a li[0:n] \u5f00\u59cb, \u901a\u8fc7\u5bf9 \u5f85\u67e5\u627e\u7684\u503c \u4e0e \u5019\u9009\u533a \u4e2d\u95f4\u503c\u7684\u6bd4\u8f83,\u53ef\u4ee5\u4f7f\u5019\u9009\u533a\u51cf\u5c11\u4e00\u534a. \u65f6\u95f4\u590d\u6742\u5ea6 O(logn) Ps: \u5019\u9009\u533a\u7684\u610f\u601d\u5c31\u662f\u5728\u8be5\u533a\u57df\u91cc\u67e5\u627e\u5f85\u67e5\u627e\u7684\u503c.. - \u4ece\u5217\u8868my_list = [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 ] \u4e2d\u67e5\u627e\u5143\u7d203 !! \u7528left\u548cright\u4e24\u4e2a\u53d8\u91cf\u6765\u7ef4\u62a4\u5019\u9009\u533a . \u5b83\u4eec\u7684\u503c\u6307\u4ee3\u5143\u7d20\u7684\u4e0b\u6807 . \u25b2 \u521d\u59cb\u72b6\u6001 . \u6b64\u65f6 , left = 0 \u3001 right = len ( my_list ) - 1 \u5373right = 8 \u3001 \u5217\u8868\u4e2d\u95f4\u5143\u7d20\u7684\u4e0b\u6807 / \u4f4d\u7f6emid = ( left + right ) // 2 \u5373mid = 4 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left \"mid\" right \u8fdb\u4e00\u6b65\u5206\u6790 : my_list [ mid ] = 5 > 3 \u8bf4\u660e , \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u5de6\u8fb9 , \u5373my_list [ left : mid ] \u4e4b\u95f4 Ps : \u5217\u8868\u5207\u7247\u662f\u987e\u5934\u4e0d\u987e\u5c3e\u7684 . \u56e0\u800c\u6ca1\u6709mid - 1 \u5728\u5de6\u8fb9\u5e94\u4fdd\u8bc1\u5217\u8868\u5207\u7247\u5305\u542bleft\u4f4d\u7f6e\u6240\u5728\u7684\u5143\u7d20 So , \u5c06right\u79fb\u52a8\u5230\u4e0b\u8ff0\u4f4d\u7f6e , \u6b64\u65f6right = mid - 1 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left right \u25b2 \u66f4\u65b0mid mid = ( 0 + 3 ) // 2 = 1 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left \"mid\" right \u8fdb\u4e00\u6b65\u5206\u6790 : my_list [ mid ] = 2 < 3 \u8bf4\u660e , \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u53f3\u8fb9 , my_list [ mid + 1 : right + 1 ] \u4e4b\u95f4 ( \u6216\u8005\u8fd9\u6837\u5199my_list [ mid + 1 :]) Ps : \u5217\u8868\u5207\u7247\u662f\u987e\u5934\u4e0d\u987e\u5c3e\u7684 . \u5728\u53f3\u8fb9\u5e94\u4fdd\u8bc1\u5217\u8868\u5207\u7247\u5305\u542bright\u4f4d\u7f6e\u6240\u5728\u7684\u5143\u7d20 , \u6240\u4ee5\u8fd9\u91cc\u5207\u7247\u4e2dright + 1 So , \u5c06left\u79fb\u52a8\u5230\u4e0b\u8ff0\u4f4d\u7f6e , \u6b64\u65f6left = mid + 1 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left right \u25b2 \u66f4\u65b0mid mid = ( 2 + 3 ) // 2 = 2 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f left right \u2b06\ufe0f mid \u8fdb\u4e00\u6b65\u5206\u6790 : my_list [ mid ] = 3 So , \u7ed3\u679c\u4e3a2 . \u601d\u8003\u4e0b , \u67e5\u4e0d\u5230\u7684\u60c5\u51b5 , \u662f\u5982\u4f55\u7ed3\u675f\u7b97\u6cd5\u7684\u5462 . \u5047\u5982 , my_list [ 2 ] \u7684\u503c\u4e0d\u662f3 , \u662f4 .. 1 2 4 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f left right \u2b06\ufe0f \"mid\" \u6309\u7167\u524d\u9762\u7684\u903b\u8f91 , \u63a5\u7740\u5224\u65ad , 4 > 3 \u8bc1\u660e\u67e5\u627e\u7684\u503c\u5728mid\u7684\u5de6\u8fb9 , \u5219right = mid - 1 1 2 4 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f right left \u6b64\u65f6right\u7684\u503c\u5c0f\u4e8eleft , \u8bc1\u660e\u627e\u4e0d\u5230 , \u7b97\u6cd5\u7ed3\u675f !! \u4ee3\u7801\u5b9e\u73b0: def binary_search ( li , val ): left = 0 right = len ( li ) - 1 while left <= right : mid = ( left + right ) // 2 if li [ mid ] == val : return mid elif li [ mid ] > val : # \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u5de6\u4fa7 right = mid - 1 else : # li[mid] < val \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u53f3\u4fa7 left = mid + 1 return None li = [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 ] print ( binary_search ( li , 3 )) Ps: \u8fd8\u6709\u79cd\u65b9\u6cd5\u662f\u7528 \u9012\u5f52 \u6765\u5b9e\u73b0.\u5728python\u9762\u5411\u5bf9\u8c61/06_\u51fd\u6570\u8fdb\u9636.md \u91cc\u6709\u9012\u5f52\u4e8c\u5206\u6cd5\u7684\u5b9e\u73b0! \u6548\u7387\u9a8c\u8bc1 \u00b6 import time def cal_time ( func ): def wrapper ( * args , ** kwargs ): t1 = time . time () result = func ( * args , ** kwargs ) t2 = time . time () print ( f \" { func . __name__ } running time: { t2 - t1 } secs.\" ) return result return wrapper @cal_time def linear_search ( li , target ): pass @cal_time def binary_search ( li , val ): pass li = list ( range ( 10000 )) linear_search ( li , 2345 ) binary_search ( li , 2345 ) \"\"\" linear_search running time:0.00041604042053222656 secs. binary_search running time:1.6927719116210938e-05 secs. # e-05 \u79d1\u5b66\u8bb0\u6570\u6cd5 \"\"\" # \u6ce8:\u8ba1\u7b97\u673a\u4e00\u822c\u4e00\u79d2\u7684\u8fd0\u7b97\u6b21\u6570\u662f 10^7 = 1\u5343\u4e07\u6b21; # \u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n^2)\u7684\u7a0b\u5e8f,\u82e5n\u7b49\u4e8e10000,\u5219\u5927\u6982\u9700\u898110000*10000/10000000=10S\u5de6\u53f3\u7684\u8fd0\u7b97\u65f6\u95f4!!","title":"\u67e5\u627e"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_1","text":"","title":"\u590d\u6742\u5ea6"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_2","text":"\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u7528\u6765\u4f30\u8ba1\u7b97\u6cd5\u8fd0\u884c\u65f6\u95f4\u7684\u4e00\u4e2a\u5f0f\u5b50.(\u5355\u4f4d). n = 64 while n > 1 : print ( n ) n = n // 2 \"\"\" 2^6 = 64 --> log2^64=6 --> \u5219\u65f6\u95f4\u590d\u6742\u5ea6\u8bb0\u4e3a O(log2^n) \u6216\u8005 O(log^n) \u2605 \u5f53\u7b97\u6cd5\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u5faa\u73af\u6298\u534a\u7684\u65f6\u5019,\u65f6\u95f4\u590d\u6742\u5ea6\u5f0f\u5b50\u4e2d\u4f1a\u51fa\u73b0logn. (\u6bcf\u6b21\u5faa\u73af\u8fed\u4ee3 \u8ba9\u95ee\u9898\u7684\u89c4\u6a21\u7f29\u5c0f\u4e00\u534a) \"\"\" \u5e38\u89c1\u7684\u65f6\u95f4\u590d\u6742\u5ea6 (\u590d\u6742\u5ea6\u4ece\u4f4e\u5230\u9ad8,\u6548\u7387\u4ece\u9ad8\u5230\u4f4e) Ps: \u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u8fd9\u6837\u7684,\u73b0\u5b9e\u4e2d\u8fd8\u8981\u8003\u8651\u673a\u5668\u548c\u95ee\u9898\u7684\u89c4\u6a21! O(1) < O(logn) < O(n) < O(nlogn) < O(n^2) < O(n^2logn) < O(n^3) \u5176\u5b83: O(n!) O(2^n) O(n^n) \u5206\u6790: O(n) \u548c O(nlogn),\u540c\u65f6\u7ea6\u53bb\u4e00\u4e2an,\u5c31\u662fO(1) \u548c O(logn) \u56e0\u4e3aO(1) < O(logn),So,O(n) < O(nlogn),\u5176\u4f59\u540c\u7406. \u5982\u4f55\u7b80\u5355\u5feb\u901f\u5730\u5224\u65ad\u7b97\u6cd5\u590d\u6742\u5ea6?? \u25b2 \u5feb\u901f\u5224\u65ad\u7b97\u6cd5\u590d\u6742\u5ea6 ( \u9002\u7528\u4e8e\u7edd\u5927\u591a\u6570\u7b80\u5355\u60c5\u51b5 ) 1 > \u786e\u5b9a\u95ee\u9898\u89c4\u6a21 2 > \u662f\u5426\u6709\u5faa\u73af\u51cf\u534a\u8fc7\u7a0b -- logn 3 > \u82e5\u6709k\u5c42\u5173\u4e8en\u7684\u5faa\u73af -- n ^ k \u25b2 \u590d\u6742\u8fc7\u7a0b , \u6839\u636e\u7b97\u6cd5\u6267\u884c\u8fc7\u7a0b\u5224\u65ad","title":"\u65f6\u95f4\u590d\u6742\u5ea6"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_3","text":"\u7a7a\u95f4\u590d\u6742\u5ea6\u662f\u7528\u6765\u8bc4\u4f30\u7b97\u6cd5\u5185\u5b58\u5360\u7528\u5927\u5c0f\u7684\u5f0f\u5b50 \u7a7a\u95f4\u590d\u6742\u5ea6\u7684\u8868\u793a\u65b9\u6cd5\u4e0e\u65f6\u95f4\u590d\u6742\u5ea6\u5b8c\u5168\u4e00\u6837 \u7b97\u6cd5\u4f7f\u7528\u4e86\u51e0\u4e2a\u53d8\u91cf O ( 1 ) \u7b97\u6cd5\u4f7f\u7528\u4e86\u957f\u5ea6\u4e3an\u7684\u4e00\u7ef4\u5217\u8868 O ( n ) \u7b97\u6cd5\u4f7f\u7528\u4e86m\u884cn\u5217\u7684\u4e8c\u7ef4\u5217\u8868 O ( mn ) \u6211\u4eec\u66f4\u770b\u91cd\u7528\u6237\u7b49\u5f85\u7684\u65f6\u95f4 , \u901a\u5e38\u4f1a\u7528 \"\u7a7a\u95f4\u6362\u65f6\u95f4\" eg : \u5206\u5e03\u5f0f\u8ba1\u7b97","title":"\u7a7a\u95f4\u590d\u6742\u5ea6"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_4","text":"\u9012\u5f52\u7684\u4e24\u4e2a\u7279\u70b9: \u8c03\u7528\u81ea\u8eab \u3001 \u7ed3\u675f\u6761\u4ef6","title":"\u9012\u5f52"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_5","text":"\"\"\" \u5206\u6790: func1\u6ca1\u6709\u7ed3\u675f\u6761\u4ef6 func2\u770b\u4f3c\u6709\u7ed3\u675f\u6761\u4ef6,\u4f46\u4e0d\u4f1a\u7ed3\u675f\u7684. func3\u3001func4\u662f\u9012\u5f52! \u82e5x=3.\u5206\u522b\u8c03\u7528fun3(x)\u3001func4(x).\u8f93\u51fa\u7ed3\u679c\u5206\u522b\u4e3a: func3(3) -- 3 2 1 func4(3) -- 1 2 3 \"\"\" def func1 ( x ): print ( x ) func1 ( x - 1 ) def func2 ( x ): if x > 0 : print ( x ) func2 ( x + 1 ) def func3 ( x ): if x > 0 : print ( x ) func3 ( x - 1 ) def func4 ( x ): if x > 0 : func4 ( x - 1 ) print ( x ) Ps: \u56fe\u4e2d\u5927\u6846\u8868\u793a\u51fd\u6570\u7684\u6267\u884c,\u91cc\u9762\u7684\u84dd\u8272\u5c0f\u6846\u8868\u793aprint\u8bed\u53e5..","title":"\u9012\u5f52\u56de\u987e"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_6","text":"\u6709\u4e09\u6839\u6746(\u7f16\u53f7A\u3001B\u3001C), \u5728A\u6746\u81ea\u4e0b\u800c\u4e0a\u3001\u7531\u5927\u5230\u5c0f\u6309\u987a\u5e8f\u653e\u7f6e64\u4e2a\u91d1\u76d8. \u6e38\u620f\u7684\u76ee\u6807: \u628aA\u6746\u4e0a\u7684\u91d1\u76d8\u5168\u90e8\u79fb\u5230C\u6746\u4e0a, \u5e76\u4ecd\u4fdd\u6301\u539f\u6709\u987a\u5e8f\u53e0\u597d. \u64cd\u4f5c\u89c4\u5219: \u6bcf\u6b21\u53ea\u80fd\u79fb\u52a8\u4e00\u4e2a\u76d8\u5b50; \u5728\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u4e09\u6839\u6746\u4e0a\u90fd\u59cb\u7ec8\u4fdd\u6301\u5927\u76d8\u5728\u4e0b, \u5c0f\u76d8\u5728\u4e0a; \u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u76d8\u5b50\u53ef\u4ee5\u7f6e\u4e8eA\u3001B\u3001C\u4efb\u4e00\u6746\u4e0a. \u5206\u6790 : > n = 2 \u65f6 1. \u628a\u5c0f\u5706\u76d8\u4eceA\u79fb\u52a8\u5230B 2. \u628a\u5927\u5706\u76d8\u4eceA\u79fb\u52a8\u5230C 3. \u628a\u5c0f\u5706\u76d8\u4eceB\u79fb\u52a8\u5230C > n\u4e2a\u76d8\u5b50\u65f6 , \u53ef\u4ee5\u5c06\u5176\u770b\u4f5c\u662f\u4e24\u4e2a\u6574\u4f53 , \u7b2cn\u4e2a\u76d8\u5b50\u4e3a\u4e00\u4e2a\u6574\u4f53 \u3001 \u5176\u4f59\u7684n - 1 \u4e2a\u76d8\u5b50\u4e3a\u4e00\u4e2a\u6574\u4f53 , \u4f7f\u5f97\u95ee\u9898\u7684\u89c4\u6a21\u51cf1 . 1. \u628an - 1 \u4e2a\u76d8\u5b50\u7ecf\u8fc7C\u79fb\u52a8\u5230B 2. \u628a\u7b2cn\u4e2a\u76d8\u5b50\u79fb\u52a8\u5230C 3. \u628an - 1 \u4e2a\u76d8\u5b50\u4eceB\u7ecf\u8fc7A\u79fb\u52a8\u5230C \u5047\u8bbe\u79fb\u52a8n\u4e2a\u76d8\u5b50 , \u9700\u8981h ( n ) \u6b65 . \u90a3\u4e48\u6839\u636e\u4e0a\u9762\u79fb\u52a8n\u4e2a\u76d8\u5b50\u65f6\u5019\u7684\u6b65\u9aa4 , h ( n ) = h ( n - 1 ) + 1 + h ( n - 1 ) = 2 h ( n - 1 ) + 1 \u4e5f\u5c31\u662f f ( x ) = 2 f ( x - 1 ) + 1 , \u8be5\u6570\u636e\u6a21\u578b\u8d70\u52bf\u7c7b\u4f3c\u4e8e 2 ^ n So , 2 ^ 64 = 18446744073709551616 \u5047\u8bbe\u6bcf\u79d2\u79fb\u52a8\u4e00\u4e2a\u76d8\u5b50 , \u5927\u6982\u9700\u89815800\u4ebf\u5e74 . Wow \uff5e \u4ee3\u7801\u5b9e\u73b0: # n,a,b,c\u8868\u660e\u5c06n\u4e2a\u76d8\u5b50\u4ecea\u7ecf\u8fc7b\u79fb\u52a8\u5230c # \u56db\u4e2a\u53c2\u6570:\u591a\u5c11\u4e2a\u76d8\u5b50,\u4ece\u54ea\u91cc\u3001\u7ecf\u8fc7\u54ea\u91cc\u3001\u5230\u54ea\u91cc def hanoi ( n , a , b , c ): if n > 0 : hanoi ( n - 1 , a , c , b ) print ( f \"moving from { a } to { c } \" ) hanoi ( n - 1 , b , a , c ) hanoi ( 3 , 'A' , 'B' , 'C' ) \"\"\" moving from A to C moving from A to B moving from C to B moving from A to C moving from B to A moving from B to C moving from A to C \"\"\"","title":"\u6c49\u8bfa\u5854\u95ee\u9898"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_7","text":"\u5728\u4e00\u4e9b\u6570\u636e\u5143\u7d20\u4e2d,\u901a\u8fc7\u4e00\u5b9a\u7684\u65b9\u6cd5\u627e\u51fa\u4e0e\u7ed9\u5b9a\u5173\u952e\u5b57\u76f8\u540c\u7684\u6570\u636e\u5143\u7d20\u7684\u8fc7\u7a0b. \u9488\u5bf9\u6709\u5e8f\u5217\u8868,\u4e8c\u5206\u67e5\u627e\u7684\u6548\u7387\u8981\u6bd4\u7ebf\u6027\u67e5\u627e\u7684\u6548\u7387\u9ad8!","title":"\u67e5\u627e"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_8","text":"\u987a\u5e8f\u67e5\u627e(Linear Search): \u4e5f\u53eb\u7ebf\u6027\u67e5\u627e, \u4ece\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb,\u987a\u5e8f\u8fdb\u884c\u641c\u7d22,\u76f4\u5230\u627e\u5230\u5143\u7d20\u6216\u641c\u7d22\u5230\u5217\u8868\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u4e3a\u6b62. \u65f6\u95f4\u590d\u6742\u5ea6 O(n) \u5217\u8868\u67e5\u627e(\u7ebf\u6027\u8868\u67e5\u627e): \u4ece\u5217\u8868\u4e2d\u67e5\u627e\u6307\u5b9a\u5143\u7d20 \u8f93\u5165 - \u5217\u8868\u3001\u5f85\u67e5\u627e\u5143\u7d20 \u8f93\u51fa - \u5143\u7d20\u4e0b\u8868 (\u672a\u627e\u5230\u5143\u7d20\u65f6,\u4e00\u822c\u8fd4\u56deNone\u6216-1) \u5185\u7f6e\u7684\u5217\u8868\u67e5\u627e\u51fd\u6570: index() -- \u5b83\u7684\u672c\u8d28\u662f\u7ebf\u6027\u67e5\u627e!! def linear_search ( li , target ): for ind , val in enumerate ( li ): if val == target : return ind return None print ( linear_search ([ 1 , 4 , 6 , 4 ], 4 )) # 1 \"\"\" \u5206\u6790:\u8be5\u95ee\u9898\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\u591a\u5c11? \u95ee\u9898\u89c4\u6a21\u662f\u5217\u8868\u7684\u957f\u5ea6n;\u6ca1\u6709\u5faa\u73af\u51cf\u534a\u8fc7\u7a0b;\u6709\u4e00\u5c42\u5faa\u73af. So,\u8be5\u7a0b\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n) \"\"\"","title":"\u987a\u5e8f\u67e5\u627e"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_9","text":"\u4e8c\u5206\u67e5\u627e(Binary Search): \u4e5f\u53eb\u6298\u534a\u67e5\u627e. \u4ece\u6709\u5e8f\u5217\u8868\u7684 \u521d\u59cb \u5019\u9009\u533a li[0:n] \u5f00\u59cb, \u901a\u8fc7\u5bf9 \u5f85\u67e5\u627e\u7684\u503c \u4e0e \u5019\u9009\u533a \u4e2d\u95f4\u503c\u7684\u6bd4\u8f83,\u53ef\u4ee5\u4f7f\u5019\u9009\u533a\u51cf\u5c11\u4e00\u534a. \u65f6\u95f4\u590d\u6742\u5ea6 O(logn) Ps: \u5019\u9009\u533a\u7684\u610f\u601d\u5c31\u662f\u5728\u8be5\u533a\u57df\u91cc\u67e5\u627e\u5f85\u67e5\u627e\u7684\u503c.. - \u4ece\u5217\u8868my_list = [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 ] \u4e2d\u67e5\u627e\u5143\u7d203 !! \u7528left\u548cright\u4e24\u4e2a\u53d8\u91cf\u6765\u7ef4\u62a4\u5019\u9009\u533a . \u5b83\u4eec\u7684\u503c\u6307\u4ee3\u5143\u7d20\u7684\u4e0b\u6807 . \u25b2 \u521d\u59cb\u72b6\u6001 . \u6b64\u65f6 , left = 0 \u3001 right = len ( my_list ) - 1 \u5373right = 8 \u3001 \u5217\u8868\u4e2d\u95f4\u5143\u7d20\u7684\u4e0b\u6807 / \u4f4d\u7f6emid = ( left + right ) // 2 \u5373mid = 4 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left \"mid\" right \u8fdb\u4e00\u6b65\u5206\u6790 : my_list [ mid ] = 5 > 3 \u8bf4\u660e , \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u5de6\u8fb9 , \u5373my_list [ left : mid ] \u4e4b\u95f4 Ps : \u5217\u8868\u5207\u7247\u662f\u987e\u5934\u4e0d\u987e\u5c3e\u7684 . \u56e0\u800c\u6ca1\u6709mid - 1 \u5728\u5de6\u8fb9\u5e94\u4fdd\u8bc1\u5217\u8868\u5207\u7247\u5305\u542bleft\u4f4d\u7f6e\u6240\u5728\u7684\u5143\u7d20 So , \u5c06right\u79fb\u52a8\u5230\u4e0b\u8ff0\u4f4d\u7f6e , \u6b64\u65f6right = mid - 1 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left right \u25b2 \u66f4\u65b0mid mid = ( 0 + 3 ) // 2 = 1 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left \"mid\" right \u8fdb\u4e00\u6b65\u5206\u6790 : my_list [ mid ] = 2 < 3 \u8bf4\u660e , \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u53f3\u8fb9 , my_list [ mid + 1 : right + 1 ] \u4e4b\u95f4 ( \u6216\u8005\u8fd9\u6837\u5199my_list [ mid + 1 :]) Ps : \u5217\u8868\u5207\u7247\u662f\u987e\u5934\u4e0d\u987e\u5c3e\u7684 . \u5728\u53f3\u8fb9\u5e94\u4fdd\u8bc1\u5217\u8868\u5207\u7247\u5305\u542bright\u4f4d\u7f6e\u6240\u5728\u7684\u5143\u7d20 , \u6240\u4ee5\u8fd9\u91cc\u5207\u7247\u4e2dright + 1 So , \u5c06left\u79fb\u52a8\u5230\u4e0b\u8ff0\u4f4d\u7f6e , \u6b64\u65f6left = mid + 1 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f \u2b06\ufe0f left right \u25b2 \u66f4\u65b0mid mid = ( 2 + 3 ) // 2 = 2 1 2 3 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f left right \u2b06\ufe0f mid \u8fdb\u4e00\u6b65\u5206\u6790 : my_list [ mid ] = 3 So , \u7ed3\u679c\u4e3a2 . \u601d\u8003\u4e0b , \u67e5\u4e0d\u5230\u7684\u60c5\u51b5 , \u662f\u5982\u4f55\u7ed3\u675f\u7b97\u6cd5\u7684\u5462 . \u5047\u5982 , my_list [ 2 ] \u7684\u503c\u4e0d\u662f3 , \u662f4 .. 1 2 4 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f left right \u2b06\ufe0f \"mid\" \u6309\u7167\u524d\u9762\u7684\u903b\u8f91 , \u63a5\u7740\u5224\u65ad , 4 > 3 \u8bc1\u660e\u67e5\u627e\u7684\u503c\u5728mid\u7684\u5de6\u8fb9 , \u5219right = mid - 1 1 2 4 4 5 6 7 8 9 \u2b06\ufe0f \u2b06\ufe0f right left \u6b64\u65f6right\u7684\u503c\u5c0f\u4e8eleft , \u8bc1\u660e\u627e\u4e0d\u5230 , \u7b97\u6cd5\u7ed3\u675f !! \u4ee3\u7801\u5b9e\u73b0: def binary_search ( li , val ): left = 0 right = len ( li ) - 1 while left <= right : mid = ( left + right ) // 2 if li [ mid ] == val : return mid elif li [ mid ] > val : # \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u5de6\u4fa7 right = mid - 1 else : # li[mid] < val \u5f85\u67e5\u627e\u7684\u503c\u5728mid\u7684\u53f3\u4fa7 left = mid + 1 return None li = [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 ] print ( binary_search ( li , 3 )) Ps: \u8fd8\u6709\u79cd\u65b9\u6cd5\u662f\u7528 \u9012\u5f52 \u6765\u5b9e\u73b0.\u5728python\u9762\u5411\u5bf9\u8c61/06_\u51fd\u6570\u8fdb\u9636.md \u91cc\u6709\u9012\u5f52\u4e8c\u5206\u6cd5\u7684\u5b9e\u73b0!","title":"\u4e8c\u5206\u67e5\u627e"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/0_%E9%80%92%E5%BD%92_%E6%9F%A5%E6%89%BE/#_10","text":"import time def cal_time ( func ): def wrapper ( * args , ** kwargs ): t1 = time . time () result = func ( * args , ** kwargs ) t2 = time . time () print ( f \" { func . __name__ } running time: { t2 - t1 } secs.\" ) return result return wrapper @cal_time def linear_search ( li , target ): pass @cal_time def binary_search ( li , val ): pass li = list ( range ( 10000 )) linear_search ( li , 2345 ) binary_search ( li , 2345 ) \"\"\" linear_search running time:0.00041604042053222656 secs. binary_search running time:1.6927719116210938e-05 secs. # e-05 \u79d1\u5b66\u8bb0\u6570\u6cd5 \"\"\" # \u6ce8:\u8ba1\u7b97\u673a\u4e00\u822c\u4e00\u79d2\u7684\u8fd0\u7b97\u6b21\u6570\u662f 10^7 = 1\u5343\u4e07\u6b21; # \u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n^2)\u7684\u7a0b\u5e8f,\u82e5n\u7b49\u4e8e10000,\u5219\u5927\u6982\u9700\u898110000*10000/10000000=10S\u5de6\u53f3\u7684\u8fd0\u7b97\u65f6\u95f4!!","title":"\u6548\u7387\u9a8c\u8bc1"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/","text":"\u6392\u5e8f \u00b6 \u6392\u5e8f: \u5c06\u4e00\u7ec4\"\u65e0\u5e8f\"\u7684\u8bb0\u5f55\u5e8f\u5217\u8c03\u6574\u4e3a\"\u6709\u5e8f\"\u7684\u8bb0\u5f55\u5e8f\u5217. \u5217\u8868\u6392\u5e8f: \u5c06\u65e0\u5e8f\u5217\u8868\u53d8\u4e3a\u6709\u5e8f\u5217\u8868. \u8f93\u5165 - \u5217\u8868 \u8f93\u51fa - \u6709\u5e8f\u5217\u8868 \u5347\u5e8f\u548c\u964d\u5e8f \u5185\u7f6e\u6392\u5e8f\u51fd\u6570: sort() \u5e38\u89c1\u7684\u6392\u5e8f\u7b97\u6cd5: \u5192\u6ce1\u6392\u5e8f \u3001 \u9009\u62e9\u6392\u5e8f \u3001\u63d2\u5165\u6392\u5e8f ; \u5feb\u901f\u6392\u5e8f \u3001 \u5806\u6392\u5e8f \u3001 \u5f52\u5e76\u6392\u5e8f ; \u5e0c\u5c14\u6392\u5e8f \u3001 \u8ba1\u6570\u6392\u5e8f \u3001\u6876\u6392\u5e8f\u3001 \u57fa\u6570\u6392\u5e8f lowB\u4e09\u4eba\u7ec4\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3aO(n^2),\u4e14\u90fd\u662f\u539f\u5730\u6392\u5e8f. \u5192\u6ce1\u6392\u5e8f \u00b6 \u5192\u6ce1\u6392\u5e8f (Bubble Sort) \u5217\u8868\u6bcf\u4e24\u4e2a\u76f8\u90bb\u7684\u6570, \u5982\u679c\u524d\u9762\u6bd4\u540e\u9762\u5927, \u5219\u4ea4\u6362\u8fd9\u4e24\u4e2a\u6570. \u4e00\u8d9f\u6392\u5e8f\u5b8c\u6210\u540e, \u65e0\u5e8f\u533a(\u6ca1\u6709\u6392\u597d\u5e8f\u7684)\u51cf\u5c11\u4e00\u4e2a\u6570, \u6709\u5e8f\u533a(\u5df2\u7ecf\u6392\u597d\u5e8f\u7684)\u589e\u4e00\u4e2a\u6570. \u5468\u800c\u590d\u59cb, \u91cd\u590d\u5bf9\u65e0\u5e8f\u533a\u7684\u5192\u6ce1\u8fc7\u7a0b.. def bubble_sort ( li ): for i in range ( len ( li ) - 1 ): flag = False for j in range ( len ( li ) - i - 1 ): if li [ j ] > li [ j + 1 ]: # \u5927\u4e8e'>'\u662f\u5347\u5e8f;\u5c0f\u4e8e'<'\u662f\u964d\u5e8f li [ j + 1 ], li [ j ] = li [ j ], li [ j + 1 ] flag = True if not flag : return \u65f6\u95f4\u590d\u6742\u5ea6: O(n^2) \u5192\u6ce1\u6392\u5e8f\u662f\u539f\u5730\u6392\u5e8f, \u4e0d\u9700\u8981\u65b0\u7684\u5217\u8868, \u5c31\u5728\u672c\u6765\u7684\u5217\u8868\u4e0a\u901a\u8fc7\u4ea4\u6362\u5b9e\u73b0\u6392\u5e8f. \u6240\u8c13\u7684\u5192\u6ce1\u5c31\u662f\u6d6e\u5230\u9876\u7aef. \"\"\" \u5047\u5982\u5217\u8868\u670910\u4e2a\u6570,\u6309\u7406\u8bf4\u9700\u8981\u5192\u6ce110\u8d9f,\u4f46\u5f53\u65e0\u5e8f\u533a\u53ea\u6709\u4e00\u4e2a\u6570\u65f6,\u5c31\u4e0d\u7528\u5192\u6ce1\u5566.So,\u5171\u9700\u8981\u5192\u6ce19\u8d9f. range()\u51fd\u6570\u4ece0\u5f00\u59cb,\u987e\u5934\u4e0d\u987e\u5c3e.. \u4ece\u7b2c0\u8d9f\u5f00\u59cb..\u5230\u7b2c8\u8d9f,\u51719\u8d9f. \u6240\u4ee5\u8981\u5192\u6ce1\u591a\u5c11\u8d9f,\u7b49\u540c\u4e8erange(len(li)-1) \u5047\u5982\u5217\u8868\u517110\u4e2a\u6570 \u7b2ci\u8d9f \u65e0\u5e8f\u533a\u6570\u636e\u6570\u76eelen(li)-i \u6307\u9488\u4f4d\u7f6e \u662f\u5426\u4ea4\u6362\u4f1a\u5224\u65adlen(li)-i-1 0 10 0..-..8 -> range(9) \u4ee3\u8868\u4f1a\u5224\u65ad9\u6b21 1 9 0..-..7 -> range(8) ... ... ... 7 3 0..-..1 -> range(2) ... ... ... 8 2 0 -> range(1) \u2605 \u82e5\u4e00\u8d9f\u5192\u6ce1\u91cc\u6ca1\u6709\u53d1\u751f\u4efb\u4f55\u4ea4\u6362,\u5c31\u53ef\u4ee5\u8be5\u5217\u8868\u5df2\u7ecf\u6392\u597d\u5e8f\u5566!! -- \u52a0\u4e00\u4e2a\u6807\u5fd7\u4f4dflag \"\"\" \u4ee3\u7801\u5b9e\u73b0 import random def bubble_sort ( li ): for i in range ( len ( li ) - 1 ): # \u7b2ci\u8d9f. flag = False # \u7b2ci\u8d9f\u9700\u8981\u5224\u65ad\u4ea4\u6362\u591a\u5c11\u6b21 for j in range ( len ( li ) - i - 1 ): # j\u662f\u6307\u9488\u4f4d\u7f6e if li [ j ] > li [ j + 1 ]: # \u5224\u65ad\u4ea4\u6362 \u5927\u4e8e'>'\u662f\u5347\u5e8f;\u5c0f\u4e8e'<'\u662f\u964d\u5e8f li [ j + 1 ], li [ j ] = li [ j ], li [ j + 1 ] flag = True if not flag : return li = [ random . randint ( 0 , 10 ) for i in range ( 10 )] print ( li ) # [3, 9, 10, 6, 9, 8, 3, 2, 5, 3] bubble_sort ( li ) print ( li ) # [2, 3, 3, 3, 5, 6, 8, 9, 9, 10] \u9009\u62e9\u6392\u5e8f \u00b6 \u9009\u62e9\u6392\u5e8f (select sort) \u4e00\u8d9f\u6392\u5e8f\u8bb0\u5f55\u6700\u5c0f\u7684\u6570, \u653e\u5230\u7b2c\u4e00\u4e2a\u4f4d\u7f6e/\u65e0\u5e8f\u533a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e; \u518d\u4e00\u8d9f\u6392\u5e8f\u8bb0\u5f55\u5217\u8868\u65e0\u5e8f\u533a\u6700\u5c0f\u7684\u6570, \u653e\u5230\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e/\u65e0\u5e8f\u533a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e ... \u4ee5\u6b64\u7c7b\u63a8. \u7b97\u6cd5\u5b9e\u73b0\u5173\u952e\u70b9: \u65e0\u5e8f\u533a\u7684\u8303\u56f4\u3001\u65e0\u5e8f\u533a\u6700\u5c0f\u6570\u7684\u4f4d\u7f6e. def sort_simple ( li ): for i in range ( len ( li ) - 1 ): min_loc = i for j in range ( i , len ( li )): if li [ j ] < li [ min_loc ]: # \u5c0f\u4e8e\u662f\u5347\u5e8f;\u82e5\u662f\u5927\u4e8e,\u5219\u4e3a\u964d\u5e8f min_loc = j li [ i ], li [ min_loc ] = li [ min_loc ], li [ i ] return li \u65f6\u95f4\u590d\u6742\u5ea6: O(n^2) \u6b8b\u7f3a\u7248 \u00b6 \u65f6\u95f4\u590d\u6742\u5ea6 O(n^2); \u7528\u4e86\u4e24\u5217\u8868,\u6d6a\u8d39\u5185\u5b58.. import random def select_sort_simple ( li ): li_new = [] for _ in range ( len ( li )): # 0(n) min_val = min ( li ) # O(n) li_new . append ( min_val ) li . remove ( min_val ) # O(n) \u904d\u5386,\u627e\u5230\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u5143\u7d20\u5220\u9664,\u540e\u9762\u7684\u5143\u7d20\u5f80\u524d\u79fb return li_new li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) print ( select_sort_simple ( li )) \"\"\" [19, 1, 14, 17, 3, 9, 17, 7, 5, 14] [1, 3, 5, 7, 9, 14, 14, 17, 17, 19] \"\"\" # \u6ce8:\u4e0d\u5e94\u8be5\u5728for\u5faa\u73af\u4e2d\u4fee\u6539\u88ab\u8fed\u4ee3\u7684\u5bf9\u8c61.. # for val in li:li.remove(val) -> \u904d\u5386li,val\u7684\u503c\u662fli[0]\u3001li[1]..\u8fd9\u6837\u6765\u7684.li\u5728\u53d1\u751f\u53d8\u5316. \u5b8c\u7f8e\u7248 \u00b6 \u4e0d\u60f3\u5f00\u8f9f\u65b0\u7684\u5217\u8868,\u4f46\u60f3\u628a\u4ece\u65e0\u5e8f\u533a\u9009\u51fa\u6765\u6700\u5c0f\u7684\u6570\u653e\u5230\u67d0\u4e2a\u5730\u65b9.. \u67d0\u4e2a\u5730\u65b9? \u4e0e\u65e0\u5e8f\u533a\u7684 \u7b2c\u4e00\u4e2a\u4f4d\u7f6e/\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e \u8fdb\u884c\u4ea4\u6362. \u8fd9\u91cc\u6211\u4eec\u4ee5 \u653e\u5230\u65e0\u5e8f\u533a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e \u4e3a\u4f8b. \u65e0\u5e8f\u533a\u7684\u8303\u56f4 -> \u7b2c0\u8d9f 0\u5230\u6700\u540e;\u7b2c1\u8d9f 1\u5230\u6700\u540e;...;\u7b2ci\u8d9f i\u5230\u6700\u540e. import random def sort_simple ( li ): for i in range ( len ( li ) - 1 ): # \u4e0e\u5192\u6ce1\u4e00\u6837,\u7b2ci\u8d9f min_loc = i # \u521d\u59cb\u5316 \u5c06\u65e0\u5e8f\u533a\u7684\u7b2c0\u4e2a\u4f4d\u7f6e/\u6700\u5de6\u8fb9\u7684\u4f4d\u7f6e \u8bbe\u7f6e\u4e3a\u65e0\u5e8f\u533a\u6700\u5c0f\u5143\u7d20\u7684\u4f4d\u7f6e # \u8be5for\u5faa\u73af\u5b8c\u6bd5\u540e,min_loc\u5c31\u662f\u65e0\u5e8f\u533a\u6700\u5c0f\u7684\u90a3\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 # \u4f18\u5316:\u53ef\u4ee5range(i+1, len(li)) \u5077\u4e86\u4e00\u6b21\u61d2. for j in range ( i , len ( li )): # \u904d\u5386\u65e0\u5e8f\u533a,j\u662f\u65e0\u5e8f\u533a\u5143\u7d20\u7684\u4e0b\u6807 if li [ j ] < li [ min_loc ]: # \u5c0f\u4e8e\u662f\u5347\u5e8f;\u82e5\u662f\u5927\u4e8e,\u5219\u4e3a\u964d\u5e8f min_loc = j # \u5c06\u65e0\u5e8f\u533a\u6700\u5c0f\u7684\u90a3\u4e2a\u5143\u7d20\u4e0e\u65e0\u5e8f\u533a\u6700\u5de6\u8fb9\u7684\u5143\u7d20\u8fdb\u884c\u4ea4\u6362 li [ i ], li [ min_loc ] = li [ min_loc ], li [ i ] return li li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) print ( sort_simple ( li )) \"\"\" [5, 5, 11, 8, 6, 0, 9, 3, 18, 6] [0, 3, 5, 5, 6, 6, 8, 9, 11, 18] \"\"\" \u63d2\u5165\u6392\u5e8f \u00b6 \u7c7b\u4f3c\u4e8e\u6253\u724c. \u521d\u59cb\u7684\u65f6, \u624b\u91cc(\u6709\u5e8f\u533a)\u53ea\u6709\u4e00\u5f20\u724c ; \u6bcf\u6b21(\u4ece\u65e0\u5e8f\u533a)\u6478\u4e00\u5f20\u724c,\u63d2\u5165\u5230\u624b\u91cc\u5df2\u6709\u724c\u7684\u6b63\u786e\u4f4d\u7f6e. \u7b80\u5355\u6765\u8bf4,\u5c31\u662f: \u6bd4\u8f83\u540e,\u82e5\u7b26\u5408\u6761\u4ef6,\u4f1a\u4f9d\u6b21\u5c06\u6709\u5e8f\u533a\u91cc\u7684\u6392\u5f80\u540e\u632a\u52a8,\u76f4\u5230\u6761\u4ef6\u4e0d\u6210\u7acb,\u6b64\u65f6\u5c06\u6478\u5230\u7684\u724c\u63d2\u5165\u6709\u5e8f\u533a\u632a\u52a8\u540e\u7a7a\u51fa\u7684\u90a3\u4e2a\u4f4d\u7f6e. def insert_sort ( li ): for i in range ( 1 , len ( li )): j = i - 1 temp = li [ i ] while j >= 0 and li [ j ] > temp : # li[j] > temp\u5927\u4e8e\u5347\u5e8f;\u82e5\u662f\u5c0f\u4e8e,\u964d\u5e8f li [ j + 1 ] = li [ j ] j -= 1 li [ j + 1 ] = temp return li # while\u5faa\u73af\u53ef\u6539\u6210for\u5faa\u73af??\u662f\u53ef\u4ee5\u7684.\u53ef\u4ee5\u501f\u9274\u540e\u9762\u6876\u6392\u5e8f\u90a3,\u4fdd\u6301\u6bcf\u4e2a\u6876\u662f\u6709\u5e8f\u7684,\u7528\u7684\u5c31\u662f\u63d2\u5165. \u65f6\u95f4\u590d\u6742\u5ea6: O(n^2) \"\"\" \u6ce8:j\u4e0b\u6807\u4f4d\u7f6e\u7684\u724c\u5fc5\u5b9a\u662f\u624b\u91cc\u7684\u724c. 4 5 7 6 --> \u4e00\u822c\u60c5\u51b5 4 5 7 \u662f\u624b\u91cc\u7684\u724c ; 6 \u662f\u6478\u5230\u7684\u724c j = 2 7 < 6 , 7\u5f80\u53f3\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e,\u76f4\u63a5\u8986\u76d6\u63896\u4f4d\u7f6e\u7684\u6570,\u6478\u5230\u7684\u724c\u4f1a\u63d0\u524d\u5b58\u50a8\u8d77\u6765 \u73b0\u5728\u5c31\u662f 4 5 \"\u7a7a\" 7 j = j -1 = 1 5 < 6 , 5\u539f\u5730\u4e0d\u52a8.. 6 \u8fd9\u5f20\u6478\u5230\u7684\u724c \u63d2\u5165\u5230 \"\u7a7a\" \u7684\u4f4d\u7f6e, \u5373 j+1 \u7684\u4f4d\u7f6e, \u63d2\u5165\u6210\u529f. 4 5 6 7 3 --> \u6781\u7aef\u60c5\u51b5 4 5 6 7 \u662f\u624b\u91cc\u7684\u724c ; 3 \u662f\u6478\u5230\u7684\u724c \u540c\u7406,7 6 5 4 \u90fd\u6bd43\u5927, \u4f1a\u4f9d\u6b21\u5f80\u53f3\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e. \u73b0\u5728\u5c31\u662f \"\u7a7a\" 4 5 6 7, \u6b64\u65f6 j = -1 3 \u8fd9\u5f20\u6478\u5230\u7684\u724c \u63d2\u5165\u5230 \"\u7a7a\" \u7684\u4f4d\u7f6e, \u5373 j+1=-1+1=0 \u7684\u4f4d\u7f6e, \u63d2\u5165\u6210\u529f. \"\"\" \u4ee3\u7801\u5b9e\u73b0 import random def insert_sort ( li ): # \u4ece\u4e0b\u68071\u5f00\u59cb,\u662f\u56e0\u4e3a\u521d\u59cb\u7684\u65f6\u5019,\u624b\u91cc\u6709\u4e00\u5f20\u4e0b\u6807\u4e3a0\u7684\u724c for i in range ( 1 , len ( li )): # i\u8868\u793a\u6478\u5230\u7684\u724c\u7684\u4e0b\u6807 j = i - 1 # j\u6307\u7684\u662f\u624b\u91cc\u7684\u6700\u540e\u4e00\u5f20\u724c\u7684\u4e0b\u6807 # \u5b9e\u73b0\u5347\u5e8f\u6392,\u82e5\u624b\u4e2d\u7684\u724c\u8981\u6bd4\u6478\u5230\u7684\u724c\u5927,\u624b\u4e2d\u7684\u724c\u8981\u5f80\u540e\u632a,\u4f1a\u8986\u76d6\u6389\u6478\u5230\u7684\u724c,\u6240\u4ee5\u9700\u8981\u5c06\u6478\u5230\u7684\u724c\u7684\u503c\u5b58\u50a8\u8d77\u6765 temp = li [ i ] # while\u5faa\u73af\u627e\u63d2\u5165\u7684\u4f4d\u7f6e while j >= 0 and li [ j ] > temp : # \u5927\u4e8e\u5347\u5e8f;\u82e5\u662f\u5c0f\u4e8e,\u964d\u5e8f # while\u5faa\u73af\u5f00\u59cb\u65f6 li[j+1] \u8868\u660e\u6478\u5230\u724c; li[j] \u8868\u660e\u624b\u91cc\u6700\u540e\u4e00\u5f20\u724c # \u82e5\u624b\u91cc\u6700\u540e\u4e00\u5f20\u724cli[j]\u5927\u4e8e\u6478\u5230\u7684\u724cli[j+1],\u5c06\u624b\u4e2d\u6700\u540e\u4e00\u5f20\u724c\u901a\u8fc7\u8d4b\u503c\u7684\u65b9\u5f0f\u5f80\u540e\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e # \u4e0d\u7528\u62c5\u5fc3,\u6478\u5230\u7684\u724c\u7684\u503c\u5df2\u7ecf\u5b58\u50a8\u8d77\u6765\u4e86 # \u4e0d\u65ad\u6bd4\u8f83,\u6781\u7aef\u60c5\u51b5\u5c31\u662f: # \u5f53j=-1\u65f6\u8868\u660e \u624b\u4e2d\u7684\u724c\u90fd\u5f80 \u540e/\u53f3 \u79fb\u52a8\u4e86\u4e00\u4e2a\u4f4d\u7f6e # \u6b64\u65f6,\u53ea\u9700\u8981\u5c06\u6478\u5230\u7684\u724c\u63d2\u5165\u5230 \u7b2c j+1=-1+1=0 \u4e2a\u4f4d\u7f6e. li [ j + 1 ] = li [ j ] j -= 1 # j\u7684\u7bad\u5934\u5f80\u5de6\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e,\u4fbf\u4e8e\u7ee7\u7eed\u6bd4\u8f83\u624b\u91cc\u7684\u724c li [ j + 1 ] = temp # \u63d2\u5165\u6478\u5230\u7684\u724c return li li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) # [0, 14, 18, 19, 10, 6, 7, 15, 16, 17] print ( insert_sort ( li )) # [0, 6, 7, 10, 14, 15, 16, 17, 18, 19]","title":"LowB\u4e09\u4eba\u7ec4"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/#_1","text":"\u6392\u5e8f: \u5c06\u4e00\u7ec4\"\u65e0\u5e8f\"\u7684\u8bb0\u5f55\u5e8f\u5217\u8c03\u6574\u4e3a\"\u6709\u5e8f\"\u7684\u8bb0\u5f55\u5e8f\u5217. \u5217\u8868\u6392\u5e8f: \u5c06\u65e0\u5e8f\u5217\u8868\u53d8\u4e3a\u6709\u5e8f\u5217\u8868. \u8f93\u5165 - \u5217\u8868 \u8f93\u51fa - \u6709\u5e8f\u5217\u8868 \u5347\u5e8f\u548c\u964d\u5e8f \u5185\u7f6e\u6392\u5e8f\u51fd\u6570: sort() \u5e38\u89c1\u7684\u6392\u5e8f\u7b97\u6cd5: \u5192\u6ce1\u6392\u5e8f \u3001 \u9009\u62e9\u6392\u5e8f \u3001\u63d2\u5165\u6392\u5e8f ; \u5feb\u901f\u6392\u5e8f \u3001 \u5806\u6392\u5e8f \u3001 \u5f52\u5e76\u6392\u5e8f ; \u5e0c\u5c14\u6392\u5e8f \u3001 \u8ba1\u6570\u6392\u5e8f \u3001\u6876\u6392\u5e8f\u3001 \u57fa\u6570\u6392\u5e8f lowB\u4e09\u4eba\u7ec4\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3aO(n^2),\u4e14\u90fd\u662f\u539f\u5730\u6392\u5e8f.","title":"\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/#_2","text":"\u5192\u6ce1\u6392\u5e8f (Bubble Sort) \u5217\u8868\u6bcf\u4e24\u4e2a\u76f8\u90bb\u7684\u6570, \u5982\u679c\u524d\u9762\u6bd4\u540e\u9762\u5927, \u5219\u4ea4\u6362\u8fd9\u4e24\u4e2a\u6570. \u4e00\u8d9f\u6392\u5e8f\u5b8c\u6210\u540e, \u65e0\u5e8f\u533a(\u6ca1\u6709\u6392\u597d\u5e8f\u7684)\u51cf\u5c11\u4e00\u4e2a\u6570, \u6709\u5e8f\u533a(\u5df2\u7ecf\u6392\u597d\u5e8f\u7684)\u589e\u4e00\u4e2a\u6570. \u5468\u800c\u590d\u59cb, \u91cd\u590d\u5bf9\u65e0\u5e8f\u533a\u7684\u5192\u6ce1\u8fc7\u7a0b.. def bubble_sort ( li ): for i in range ( len ( li ) - 1 ): flag = False for j in range ( len ( li ) - i - 1 ): if li [ j ] > li [ j + 1 ]: # \u5927\u4e8e'>'\u662f\u5347\u5e8f;\u5c0f\u4e8e'<'\u662f\u964d\u5e8f li [ j + 1 ], li [ j ] = li [ j ], li [ j + 1 ] flag = True if not flag : return \u65f6\u95f4\u590d\u6742\u5ea6: O(n^2) \u5192\u6ce1\u6392\u5e8f\u662f\u539f\u5730\u6392\u5e8f, \u4e0d\u9700\u8981\u65b0\u7684\u5217\u8868, \u5c31\u5728\u672c\u6765\u7684\u5217\u8868\u4e0a\u901a\u8fc7\u4ea4\u6362\u5b9e\u73b0\u6392\u5e8f. \u6240\u8c13\u7684\u5192\u6ce1\u5c31\u662f\u6d6e\u5230\u9876\u7aef. \"\"\" \u5047\u5982\u5217\u8868\u670910\u4e2a\u6570,\u6309\u7406\u8bf4\u9700\u8981\u5192\u6ce110\u8d9f,\u4f46\u5f53\u65e0\u5e8f\u533a\u53ea\u6709\u4e00\u4e2a\u6570\u65f6,\u5c31\u4e0d\u7528\u5192\u6ce1\u5566.So,\u5171\u9700\u8981\u5192\u6ce19\u8d9f. range()\u51fd\u6570\u4ece0\u5f00\u59cb,\u987e\u5934\u4e0d\u987e\u5c3e.. \u4ece\u7b2c0\u8d9f\u5f00\u59cb..\u5230\u7b2c8\u8d9f,\u51719\u8d9f. \u6240\u4ee5\u8981\u5192\u6ce1\u591a\u5c11\u8d9f,\u7b49\u540c\u4e8erange(len(li)-1) \u5047\u5982\u5217\u8868\u517110\u4e2a\u6570 \u7b2ci\u8d9f \u65e0\u5e8f\u533a\u6570\u636e\u6570\u76eelen(li)-i \u6307\u9488\u4f4d\u7f6e \u662f\u5426\u4ea4\u6362\u4f1a\u5224\u65adlen(li)-i-1 0 10 0..-..8 -> range(9) \u4ee3\u8868\u4f1a\u5224\u65ad9\u6b21 1 9 0..-..7 -> range(8) ... ... ... 7 3 0..-..1 -> range(2) ... ... ... 8 2 0 -> range(1) \u2605 \u82e5\u4e00\u8d9f\u5192\u6ce1\u91cc\u6ca1\u6709\u53d1\u751f\u4efb\u4f55\u4ea4\u6362,\u5c31\u53ef\u4ee5\u8be5\u5217\u8868\u5df2\u7ecf\u6392\u597d\u5e8f\u5566!! -- \u52a0\u4e00\u4e2a\u6807\u5fd7\u4f4dflag \"\"\" \u4ee3\u7801\u5b9e\u73b0 import random def bubble_sort ( li ): for i in range ( len ( li ) - 1 ): # \u7b2ci\u8d9f. flag = False # \u7b2ci\u8d9f\u9700\u8981\u5224\u65ad\u4ea4\u6362\u591a\u5c11\u6b21 for j in range ( len ( li ) - i - 1 ): # j\u662f\u6307\u9488\u4f4d\u7f6e if li [ j ] > li [ j + 1 ]: # \u5224\u65ad\u4ea4\u6362 \u5927\u4e8e'>'\u662f\u5347\u5e8f;\u5c0f\u4e8e'<'\u662f\u964d\u5e8f li [ j + 1 ], li [ j ] = li [ j ], li [ j + 1 ] flag = True if not flag : return li = [ random . randint ( 0 , 10 ) for i in range ( 10 )] print ( li ) # [3, 9, 10, 6, 9, 8, 3, 2, 5, 3] bubble_sort ( li ) print ( li ) # [2, 3, 3, 3, 5, 6, 8, 9, 9, 10]","title":"\u5192\u6ce1\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/#_3","text":"\u9009\u62e9\u6392\u5e8f (select sort) \u4e00\u8d9f\u6392\u5e8f\u8bb0\u5f55\u6700\u5c0f\u7684\u6570, \u653e\u5230\u7b2c\u4e00\u4e2a\u4f4d\u7f6e/\u65e0\u5e8f\u533a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e; \u518d\u4e00\u8d9f\u6392\u5e8f\u8bb0\u5f55\u5217\u8868\u65e0\u5e8f\u533a\u6700\u5c0f\u7684\u6570, \u653e\u5230\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e/\u65e0\u5e8f\u533a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e ... \u4ee5\u6b64\u7c7b\u63a8. \u7b97\u6cd5\u5b9e\u73b0\u5173\u952e\u70b9: \u65e0\u5e8f\u533a\u7684\u8303\u56f4\u3001\u65e0\u5e8f\u533a\u6700\u5c0f\u6570\u7684\u4f4d\u7f6e. def sort_simple ( li ): for i in range ( len ( li ) - 1 ): min_loc = i for j in range ( i , len ( li )): if li [ j ] < li [ min_loc ]: # \u5c0f\u4e8e\u662f\u5347\u5e8f;\u82e5\u662f\u5927\u4e8e,\u5219\u4e3a\u964d\u5e8f min_loc = j li [ i ], li [ min_loc ] = li [ min_loc ], li [ i ] return li \u65f6\u95f4\u590d\u6742\u5ea6: O(n^2)","title":"\u9009\u62e9\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/#_4","text":"\u65f6\u95f4\u590d\u6742\u5ea6 O(n^2); \u7528\u4e86\u4e24\u5217\u8868,\u6d6a\u8d39\u5185\u5b58.. import random def select_sort_simple ( li ): li_new = [] for _ in range ( len ( li )): # 0(n) min_val = min ( li ) # O(n) li_new . append ( min_val ) li . remove ( min_val ) # O(n) \u904d\u5386,\u627e\u5230\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u5143\u7d20\u5220\u9664,\u540e\u9762\u7684\u5143\u7d20\u5f80\u524d\u79fb return li_new li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) print ( select_sort_simple ( li )) \"\"\" [19, 1, 14, 17, 3, 9, 17, 7, 5, 14] [1, 3, 5, 7, 9, 14, 14, 17, 17, 19] \"\"\" # \u6ce8:\u4e0d\u5e94\u8be5\u5728for\u5faa\u73af\u4e2d\u4fee\u6539\u88ab\u8fed\u4ee3\u7684\u5bf9\u8c61.. # for val in li:li.remove(val) -> \u904d\u5386li,val\u7684\u503c\u662fli[0]\u3001li[1]..\u8fd9\u6837\u6765\u7684.li\u5728\u53d1\u751f\u53d8\u5316.","title":"\u6b8b\u7f3a\u7248"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/#_5","text":"\u4e0d\u60f3\u5f00\u8f9f\u65b0\u7684\u5217\u8868,\u4f46\u60f3\u628a\u4ece\u65e0\u5e8f\u533a\u9009\u51fa\u6765\u6700\u5c0f\u7684\u6570\u653e\u5230\u67d0\u4e2a\u5730\u65b9.. \u67d0\u4e2a\u5730\u65b9? \u4e0e\u65e0\u5e8f\u533a\u7684 \u7b2c\u4e00\u4e2a\u4f4d\u7f6e/\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e \u8fdb\u884c\u4ea4\u6362. \u8fd9\u91cc\u6211\u4eec\u4ee5 \u653e\u5230\u65e0\u5e8f\u533a\u7b2c\u4e00\u4e2a\u4f4d\u7f6e \u4e3a\u4f8b. \u65e0\u5e8f\u533a\u7684\u8303\u56f4 -> \u7b2c0\u8d9f 0\u5230\u6700\u540e;\u7b2c1\u8d9f 1\u5230\u6700\u540e;...;\u7b2ci\u8d9f i\u5230\u6700\u540e. import random def sort_simple ( li ): for i in range ( len ( li ) - 1 ): # \u4e0e\u5192\u6ce1\u4e00\u6837,\u7b2ci\u8d9f min_loc = i # \u521d\u59cb\u5316 \u5c06\u65e0\u5e8f\u533a\u7684\u7b2c0\u4e2a\u4f4d\u7f6e/\u6700\u5de6\u8fb9\u7684\u4f4d\u7f6e \u8bbe\u7f6e\u4e3a\u65e0\u5e8f\u533a\u6700\u5c0f\u5143\u7d20\u7684\u4f4d\u7f6e # \u8be5for\u5faa\u73af\u5b8c\u6bd5\u540e,min_loc\u5c31\u662f\u65e0\u5e8f\u533a\u6700\u5c0f\u7684\u90a3\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 # \u4f18\u5316:\u53ef\u4ee5range(i+1, len(li)) \u5077\u4e86\u4e00\u6b21\u61d2. for j in range ( i , len ( li )): # \u904d\u5386\u65e0\u5e8f\u533a,j\u662f\u65e0\u5e8f\u533a\u5143\u7d20\u7684\u4e0b\u6807 if li [ j ] < li [ min_loc ]: # \u5c0f\u4e8e\u662f\u5347\u5e8f;\u82e5\u662f\u5927\u4e8e,\u5219\u4e3a\u964d\u5e8f min_loc = j # \u5c06\u65e0\u5e8f\u533a\u6700\u5c0f\u7684\u90a3\u4e2a\u5143\u7d20\u4e0e\u65e0\u5e8f\u533a\u6700\u5de6\u8fb9\u7684\u5143\u7d20\u8fdb\u884c\u4ea4\u6362 li [ i ], li [ min_loc ] = li [ min_loc ], li [ i ] return li li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) print ( sort_simple ( li )) \"\"\" [5, 5, 11, 8, 6, 0, 9, 3, 18, 6] [0, 3, 5, 5, 6, 6, 8, 9, 11, 18] \"\"\"","title":"\u5b8c\u7f8e\u7248"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/1_LowB%E4%B8%89%E4%BA%BA%E7%BB%84/#_6","text":"\u7c7b\u4f3c\u4e8e\u6253\u724c. \u521d\u59cb\u7684\u65f6, \u624b\u91cc(\u6709\u5e8f\u533a)\u53ea\u6709\u4e00\u5f20\u724c ; \u6bcf\u6b21(\u4ece\u65e0\u5e8f\u533a)\u6478\u4e00\u5f20\u724c,\u63d2\u5165\u5230\u624b\u91cc\u5df2\u6709\u724c\u7684\u6b63\u786e\u4f4d\u7f6e. \u7b80\u5355\u6765\u8bf4,\u5c31\u662f: \u6bd4\u8f83\u540e,\u82e5\u7b26\u5408\u6761\u4ef6,\u4f1a\u4f9d\u6b21\u5c06\u6709\u5e8f\u533a\u91cc\u7684\u6392\u5f80\u540e\u632a\u52a8,\u76f4\u5230\u6761\u4ef6\u4e0d\u6210\u7acb,\u6b64\u65f6\u5c06\u6478\u5230\u7684\u724c\u63d2\u5165\u6709\u5e8f\u533a\u632a\u52a8\u540e\u7a7a\u51fa\u7684\u90a3\u4e2a\u4f4d\u7f6e. def insert_sort ( li ): for i in range ( 1 , len ( li )): j = i - 1 temp = li [ i ] while j >= 0 and li [ j ] > temp : # li[j] > temp\u5927\u4e8e\u5347\u5e8f;\u82e5\u662f\u5c0f\u4e8e,\u964d\u5e8f li [ j + 1 ] = li [ j ] j -= 1 li [ j + 1 ] = temp return li # while\u5faa\u73af\u53ef\u6539\u6210for\u5faa\u73af??\u662f\u53ef\u4ee5\u7684.\u53ef\u4ee5\u501f\u9274\u540e\u9762\u6876\u6392\u5e8f\u90a3,\u4fdd\u6301\u6bcf\u4e2a\u6876\u662f\u6709\u5e8f\u7684,\u7528\u7684\u5c31\u662f\u63d2\u5165. \u65f6\u95f4\u590d\u6742\u5ea6: O(n^2) \"\"\" \u6ce8:j\u4e0b\u6807\u4f4d\u7f6e\u7684\u724c\u5fc5\u5b9a\u662f\u624b\u91cc\u7684\u724c. 4 5 7 6 --> \u4e00\u822c\u60c5\u51b5 4 5 7 \u662f\u624b\u91cc\u7684\u724c ; 6 \u662f\u6478\u5230\u7684\u724c j = 2 7 < 6 , 7\u5f80\u53f3\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e,\u76f4\u63a5\u8986\u76d6\u63896\u4f4d\u7f6e\u7684\u6570,\u6478\u5230\u7684\u724c\u4f1a\u63d0\u524d\u5b58\u50a8\u8d77\u6765 \u73b0\u5728\u5c31\u662f 4 5 \"\u7a7a\" 7 j = j -1 = 1 5 < 6 , 5\u539f\u5730\u4e0d\u52a8.. 6 \u8fd9\u5f20\u6478\u5230\u7684\u724c \u63d2\u5165\u5230 \"\u7a7a\" \u7684\u4f4d\u7f6e, \u5373 j+1 \u7684\u4f4d\u7f6e, \u63d2\u5165\u6210\u529f. 4 5 6 7 3 --> \u6781\u7aef\u60c5\u51b5 4 5 6 7 \u662f\u624b\u91cc\u7684\u724c ; 3 \u662f\u6478\u5230\u7684\u724c \u540c\u7406,7 6 5 4 \u90fd\u6bd43\u5927, \u4f1a\u4f9d\u6b21\u5f80\u53f3\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e. \u73b0\u5728\u5c31\u662f \"\u7a7a\" 4 5 6 7, \u6b64\u65f6 j = -1 3 \u8fd9\u5f20\u6478\u5230\u7684\u724c \u63d2\u5165\u5230 \"\u7a7a\" \u7684\u4f4d\u7f6e, \u5373 j+1=-1+1=0 \u7684\u4f4d\u7f6e, \u63d2\u5165\u6210\u529f. \"\"\" \u4ee3\u7801\u5b9e\u73b0 import random def insert_sort ( li ): # \u4ece\u4e0b\u68071\u5f00\u59cb,\u662f\u56e0\u4e3a\u521d\u59cb\u7684\u65f6\u5019,\u624b\u91cc\u6709\u4e00\u5f20\u4e0b\u6807\u4e3a0\u7684\u724c for i in range ( 1 , len ( li )): # i\u8868\u793a\u6478\u5230\u7684\u724c\u7684\u4e0b\u6807 j = i - 1 # j\u6307\u7684\u662f\u624b\u91cc\u7684\u6700\u540e\u4e00\u5f20\u724c\u7684\u4e0b\u6807 # \u5b9e\u73b0\u5347\u5e8f\u6392,\u82e5\u624b\u4e2d\u7684\u724c\u8981\u6bd4\u6478\u5230\u7684\u724c\u5927,\u624b\u4e2d\u7684\u724c\u8981\u5f80\u540e\u632a,\u4f1a\u8986\u76d6\u6389\u6478\u5230\u7684\u724c,\u6240\u4ee5\u9700\u8981\u5c06\u6478\u5230\u7684\u724c\u7684\u503c\u5b58\u50a8\u8d77\u6765 temp = li [ i ] # while\u5faa\u73af\u627e\u63d2\u5165\u7684\u4f4d\u7f6e while j >= 0 and li [ j ] > temp : # \u5927\u4e8e\u5347\u5e8f;\u82e5\u662f\u5c0f\u4e8e,\u964d\u5e8f # while\u5faa\u73af\u5f00\u59cb\u65f6 li[j+1] \u8868\u660e\u6478\u5230\u724c; li[j] \u8868\u660e\u624b\u91cc\u6700\u540e\u4e00\u5f20\u724c # \u82e5\u624b\u91cc\u6700\u540e\u4e00\u5f20\u724cli[j]\u5927\u4e8e\u6478\u5230\u7684\u724cli[j+1],\u5c06\u624b\u4e2d\u6700\u540e\u4e00\u5f20\u724c\u901a\u8fc7\u8d4b\u503c\u7684\u65b9\u5f0f\u5f80\u540e\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e # \u4e0d\u7528\u62c5\u5fc3,\u6478\u5230\u7684\u724c\u7684\u503c\u5df2\u7ecf\u5b58\u50a8\u8d77\u6765\u4e86 # \u4e0d\u65ad\u6bd4\u8f83,\u6781\u7aef\u60c5\u51b5\u5c31\u662f: # \u5f53j=-1\u65f6\u8868\u660e \u624b\u4e2d\u7684\u724c\u90fd\u5f80 \u540e/\u53f3 \u79fb\u52a8\u4e86\u4e00\u4e2a\u4f4d\u7f6e # \u6b64\u65f6,\u53ea\u9700\u8981\u5c06\u6478\u5230\u7684\u724c\u63d2\u5165\u5230 \u7b2c j+1=-1+1=0 \u4e2a\u4f4d\u7f6e. li [ j + 1 ] = li [ j ] j -= 1 # j\u7684\u7bad\u5934\u5f80\u5de6\u79fb\u52a8\u4e00\u4e2a\u4f4d\u7f6e,\u4fbf\u4e8e\u7ee7\u7eed\u6bd4\u8f83\u624b\u91cc\u7684\u724c li [ j + 1 ] = temp # \u63d2\u5165\u6478\u5230\u7684\u724c return li li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) # [0, 14, 18, 19, 10, 6, 7, 15, 16, 17] print ( insert_sort ( li )) # [0, 6, 7, 10, 14, 15, 16, 17, 18, 19]","title":"\u63d2\u5165\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/","text":"\u5feb\u901f\u6392\u5e8f \u00b6 \u5feb\u901f\u6392\u5e8f: \u5feb \u5feb\u901f\u6392\u5e8f\u601d\u8def: 1> \u53d6\u4e00\u4e2a\u5143\u7d20p (\u7b2c\u4e00\u4e2a\u5143\u7d20), \u4f7f\u5143\u7d20p \u5f52\u4f4d ; 2> \u5217\u8868\u88abp\u5206\u4e3a\u4e24\u90e8\u5206, \u5de6\u8fb9\u90fd\u6bd4p\u5c0f, \u53f3\u8fb9\u90fd\u6bd4p\u5927. 3> \u9012\u5f52\u5b8c\u6210\u6392\u5e8f. def partition ( li , left , right ): temp = li [ left ] while left < right : # -- \u8fd9\u5185\u5c42\u7684\u4e24\u4e2a\u5faa\u73af >= <= \u662f\u5347\u5e8f; <= >= \u662f\u964d\u5e8f. while left < right and li [ right ] >= temp : right -= 1 li [ left ] = li [ right ] while left < right and li [ left ] <= temp : left += 1 li [ right ] = li [ left ] li [ left ] = temp return left def quick_sort ( data , left , right ): if left < right : mid = partition ( data , left , right ) quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) \u65f6\u95f4\u590d\u6742\u5ea6: O(nlogn) \u5feb\u6392\u6846\u67b6 \u00b6 # \u6ce8:\u6574\u4e2a\u6392\u5e8f\u8fc7\u7a0b,data\u6307\u7684\u90fd\u662f\u6574\u4e2a\u5927\u5217\u8868.\u4e0d\u5207\u7247\u662f\u56e0\u4e3a\u5207\u7247\u9700\u8981\u8017\u8d39\u65f6\u95f4. # data\u662f\u6574\u4e2a\u5217\u8868\u3001left\u548cright\u53ef\u8868\u793a\u6574\u4e2a\u5927\u5217\u8868\u7684\u4e00\u90e8\u5206,\u8868\u793a\u8303\u56f4 def quick_sort ( data , left , right ): # left < right \u8868\u660e\u5217\u8868\u8fd9\u4e2a\u533a\u57df\u81f3\u5c11\u6709\u4e24\u4e2a\u5143\u7d20;left=right \u6709\u4e00\u4e2a\u5143\u7d20; # So,\u5bf9\u81f3\u5c11\u6709\u4e24\u4e2a\u5143\u7d20\u7684\u5217\u8868\u8fdb\u884c\u9012\u5f52!! if left < right : # \u5047\u8bbe\"\u5f52\u4f4d\"\u7684\u5b9e\u73b0\u51fd\u6570\u662fpartition # \u521a\u5f00\u59cb,left\u6307\u5411\u4e0b\u6807\u4e3a0\u7684\u4f4d\u7f6e,right\u6307\u5411\u4e0b\u6807\u4e3alen(data)-1\u7684\u4f4d\u7f6e # \u8fd4\u56demid: \u5f52\u4f4d\u4f4d\u7f6e\u7684\u4e0b\u6807,\u5217\u8868\u5c31\u4f1a\u88ab\u5206\u4e3a\u5de6\u53f3\u4e24\u90e8\u5206,\u6bcf\u4e2a\u90e8\u5206\u518d\u8fdb\u884c\u5feb\u901f\u6392\u5e8f mid = partition ( data , left , right ) # \u5f52\u4f4d\u540e,left\u548cright\u6307\u5411\u7684\u662f\u9700\u8981\u9012\u5f52\u7684\u5217\u8868\u7684\u5934\u548c\u5c3e \u9012\u5f52\u91cc\u4e5f\u4f1a\u5f52\u4f4d,\u5f52\u4f4d\u540e\u540c\u7406. quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) return li \u5f52\u4f4d\u539f\u7406 \u00b6 \u90a3\u4e48\u95ee\u9898\u6765\u5566, partition\u51fd\u6570\u5982\u4f55\u5b9e\u73b0\u5462? \u4e0b\u9762\u662f\u5f52\u4f4d\u7684\u8fc7\u7a0b\u8be6\u89e3. ` 5 ` 7 4 6 3 1 2 9 8 -- \"\u5f52\u4f4d\" --> 2 1 4 3 ` 5 ` 6 7 9 8 \u6700\u7ec8\u5f97\u8fbe\u5230 ` 5 ` \u5de6\u8fb9\u7684\u6570\u90fd\u6bd45\u5c0f , ` 5 ` \u53f3\u8fb9\u7684\u6570\u5b57\u90fd\u6bd45\u5927\u7684\u6548\u679c !! \u5148\u62ff\u4e00\u4e2a\u53d8\u91cf\u5c06 ` 5 ` \u5b58\u50a8\u8d77\u6765 \u5de6\u8fb9\u5c31\u7559\u51fa\u4e86\u4e00\u4e2a\u4f4d\u7f6e , \u5de6\u8fb9\u7684\u4f4d\u7f6e\u662f\u7559\u7ed9\u6bd45\u5c0f\u7684\u6570\u5b57\u51c6\u5907\u7684 ! 7 4 6 3 1 2 9 8 \u2b06\ufe0f \u2b06\ufe0f left right \u4ece\u54ea\u91cc\u5f00\u59cb\u627e\u5462 ? \u4ece\u53f3\u8fb9\u5f00\u59cb\u627e . 8 9 \u90fd\u6bd45\u5927 , 2 \u6bd45\u5c0f , 2 \u653e\u5230\u4e86\u5de6\u8fb9\u7684\u7a7a\u4f4d\u4e0a ! \u53f3\u8fb9\u5c31\u7559\u51fa\u4e86\u4e00\u4e2a\u4f4d\u7f6e , \u53f3\u8fb9\u7684\u4f4d\u7f6e\u662f\u7559\u7ed9\u6bd45\u5927\u7684\u6570\u5b57\u51c6\u5907\u7684 ! 2 7 4 6 3 1 9 8 \u2b06\ufe0f \u2b06\ufe0f left right \u4ece\u54ea\u91cc\u5f00\u59cb\u627e\u5462 ? \u4ece\u5de6\u8fb9\u5f00\u59cb\u627e .7 \u6bd45\u5927 , 7 \u5c31\u653e\u5230\u4e86\u53f3\u8fb9\u7684\u7a7a\u4f4d\u4e0a ! \u6b64\u65f6\u5de6\u8fb9\u53c8\u7559\u51fa\u4e86\u4e00\u4e2a\u4f4d\u7f6e . \u4ee5\u6b64\u7c7b\u63a8 . 2 4 6 3 1 7 9 8 \u2b06\ufe0f \u2b06\ufe0f left right -- right\u79fb\u52301\u7684\u4f4d\u7f6e , 1 \u9700\u8981\u586b\u8865\u5de6\u8fb9\u7a7a\u7f3a \u5373right\u4f4d\u7f6e\u4e0a\u76841\u653e\u5230left\u4f4d\u7f6e\u4e0a\u7684\u7a7a\u7f3a 2 4 6 3 1 7 9 8 - \u79fb \u2b06\ufe0f \u2b06\ufe0f left right 2 1 4 6 3 7 9 8 - \u8865 \u2b06\ufe0f \u2b06\ufe0f left right -- left\u79fb\u52306\u7684\u4f4d\u7f6e , 6 \u9700\u8981\u586b\u8865\u53f3\u8fb9\u7a7a\u7f3a 2 1 4 6 3 7 9 8 - \u79fb \u2b06\ufe0f \u2b06\ufe0f left right 2 1 4 3 6 7 9 8 - \u8865 \u2b06\ufe0f \u2b06\ufe0f left right -- right\u79fb\u52a8\u52303\u7684\u4f4d\u7f6e , 3 \u9700\u8981\u586b\u8865\u5de6\u8fb9\u7a7a\u7f3a 2 1 4 3 6 7 9 8 - \u79fb \u2b06\ufe0f \u2b06\ufe0f left right 2 1 4 3 6 7 9 8 - \u8865 \u2b06\ufe0f \u2b06\ufe0f left right ok , \u53f3\u8fb9\u7a7a\u7f3a\u4e0b\u6765\u4e86 . left\u9700\u8981\u53f3\u79fb , \u627e\u6bd45\u5927\u7684\u6570 . \u4f46left\u53f3\u79fb , left\u548cright\u91cd\u5408\u5566 !! \u6b64\u6b21 \"\u5f52\u4f4d\" \u7ed3\u675f , \u4e00\u5f00\u59cb\u7528\u53d8\u91cf\u5b58\u50a8\u7684 ` 5 ` \u653e\u5230left\u548cright\u91cd\u5408\u7684\u4f4d\u7f6e !! 2 1 4 3 ` 5 ` 6 7 9 8 \u2b06\ufe0f right left \u5f52\u4f4d\u4ee3\u7801\u5b9e\u73b0 \u00b6 partition \u51fd\u6570\u770b\u4f3c\u6709\u4e24\u4e2awhile\u5faa\u73af, \u4f46\u5b9e\u9645\u4e0a\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n) def partition ( li , left , right ): # \u6ce8:\u8fd9\u91cc\u4e0d\u8981\u5199li[0],\u56e0\u4e3a\u8fdb\u884c\u5f52\u4f4d\u7684\u5217\u8868\u53ef\u80fd\u662f\u5927\u5217\u8868\u7684\u4e00\u90e8\u5206. temp = li [ left ] print ( \"temp:\" , temp ) while left < right : # \u5f53left=right\u65f6,\u4ee3\u8868\u5f52\u4f4d\u5230\u4e86\u4e2d\u95f4\u4f4d\u7f6e,\u5faa\u73af\u624d\u4f1a\u7ed3\u675f. # \u4e00\u65e6\u5f53li[right] < temp \u65f6\u8df3\u51fa\u5faa\u73af # \u4e34\u754c\u60c5\u51b5,\u56e0\u4e3a\u5faa\u73af\u4f53\u5185,\u6bcf\u6b21\u5faa\u73afright\u90fd\u8981\u51cf1,\u5f53right\u51cf\u5230\u8ddfleft\u4e00\u6837\u65f6 \u4e5f\u9700\u8df3\u51fa\u5faa\u73af # eg: 3 4 7 5 9 10 --> temp\u7b49\u4e8e3,right\u4e00\u5f00\u59cb\u7b49\u4e8en-1=5 while left < right and li [ right ] >= temp : # \u4ece\u53f3\u8fb9\u5f00\u59cb\u627e\u6bd4temp\u5c0f\u7684\u6570 right -= 1 # right\u5f80\u5de6\u8d70\u4e00\u6b65 li [ left ] = li [ right ] # \u628a\u53f3\u8fb9\u7684\u6570\u653e\u5230\u4e86\u5de6\u8fb9\u7684\u7a7a\u4f4d\u4e0a left\u548cright\u78b0\u4e0a\u4e86\u4e5f\u6ca1\u5173\u7cfb print ( '\u5728\u53f3\u8fb9\u627e\u8865\u5de6:' , li ) # \u4e00\u65e6\u5f53li[left] > temp \u65f6\u8df3\u51fa\u5faa\u73af # \u6b64\u5904\u7684left<right\u6709\u4e24\u4e2a\u4f5c\u7528: # 1> \u5f53\u4e0a\u9762\u90a3\u4e2a\u5faa\u73af\u7684left=right\u540e,\u6b64\u5904\u7684\u5faa\u73af\u4e0d\u4f1a\u6267\u884c # 2> \u6b64\u5904\u7684\u5faa\u73af\u4e2d,left=right\u4e86,\u9000\u51fa\u6b64\u5904\u7684\u5faa\u73af while left < right and li [ left ] <= temp : # \u4ece\u5de6\u8fb9\u5f00\u59cb\u627e\u6bd4temp\u5927\u7684\u6570 left += 1 # left\u5f80\u53f3\u8d70\u4e00\u6b65 li [ right ] = li [ left ] # \u628a\u5de6\u8fb9\u7684\u6570\u653e\u5230\u4e86\u53f3\u8fb9\u7684\u7a7a\u4f4d\u4e0a left\u548cright\u78b0\u4e0a\u4e86\u4e5f\u6ca1\u5173\u7cfb print ( '\u5728\u5de6\u8fb9\u627e\u8865\u53f3:' , li ) # \u5faa\u73af\u7ed3\u675f,left\u548cright\u76f8\u7b49,\u5904\u4e8e\u5f52\u4f4d\u4f4d\u7f6e. li [ left ] = temp return left def quick_sort ( data , left , right ): if left < right : mid = partition ( data , left , right ) quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) return li if __name__ == '__main__' : li = [ 5 , 7 , 4 , 6 , 3 , 1 , 2 , 9 , 8 ] partition ( li , 0 , len ( li ) - 1 ) print ( '\u5f52\u4f4d\u7ed3\u679c\u5982\u4e0b:' , li ) \"\"\" temp: 5 # -- \"\" \u79fb\u5230/\u8d4b\u503c/\u8986\u76d6 `` \u7684\u4f4d\u7f6e. \u5728\u53f3\u8fb9\u627e\u8865\u5de6: [`2`, 7, 4, 6, 3, 1, \"2\", 9, 8] \u5728\u5de6\u8fb9\u627e\u8865\u53f3: [2, \"7\", 4, 6, 3, 1, `7`, 9, 8] \u5728\u53f3\u8fb9\u627e\u8865\u5de6: [2, `1`, 4, 6, 3, \"1\", 7, 9, 8] \u5728\u5de6\u8fb9\u627e\u8865\u53f3: [2, 1, 4, \"6\", 3, `6`, 7, 9, 8] \u5728\u53f3\u8fb9\u627e\u8865\u5de6: [2, 1, 4, `3`, \"3\", 6, 7, 9, 8] \u5728\u5de6\u8fb9\u627e\u8865\u53f3: [2, 1, 4, 3, `\"3\"`, 6, 7, 9, 8] \u5f52\u4f4d\u7ed3\u679c\u5982\u4e0b: [2, 1, 4, 3, 5, 6, 7, 9, 8] # -- \u7136\u540e\u9012\u5f52,\u5bf95\u5de6\u8fb9\u7684[2,1,4,3]\u548c\u53f3\u8fb9\u7684[6,7,9,8]\u8fdb\u884c\u5f52\u4f4d; \"\"\" \u5feb\u6392\u4ee3\u7801\u5b9e\u73b0 \u00b6 import random def partition ( li , left , right ): temp = li [ left ] while left < right : # -- \u8fd9\u5185\u5c42\u7684\u4e24\u4e2a\u5faa\u73af >= <= \u662f\u5347\u5e8f; <= >= \u662f\u964d\u5e8f. while left < right and li [ right ] >= temp : right -= 1 li [ left ] = li [ right ] while left < right and li [ left ] <= temp : left += 1 li [ right ] = li [ left ] li [ left ] = temp return left def quick_sort ( data , left , right ): if left < right : mid = partition ( data , left , right ) quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) quick_sort ( li , 0 , len ( li ) - 1 ) print ( li ) \"\"\" [19, 20, 18, 14, 18, 9, 10, 1, 13, 8] [1, 8, 9, 10, 13, 14, 18, 18, 19, 20] \u8865\u5145 # \u6ce8:\u82e5\u60f3\u6d4b\u8bd5\u8be5\u5feb\u6392\u82b1\u8d39\u7684\u65f6\u95f4 \u76f4\u63a5\u5728quick_sort\u4e0a\u52a0\u88c5\u9970\u5668\u4f1a\u5bfc\u81f4\u6253\u5370\u5f88\u591a\u6b21,\u56e0\u4e3aquick_sort\u662f\u4e00\u4e2a\u9012\u5f52\u51fd\u6570 # \u89e3\u51b3\u529e\u6cd5:\u5957\u4e00\u4e2a\u9a6c\u7532 def _quick_sort ( data , left , right ): pass @cal_time def quick_sort ( li ): _quick_sort ( li , 0 , len ( li ) - 1 ) \u5feb\u6392\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u4e25\u8c28\u7684\u6570\u5b66\u63a8\u5bfc 16 \u4e2a\u6570 8 8 4 4 4 4 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 \u5047\u8bbe\u670916\u4e2a\u6570 , \u5f52\u4f4d\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ) \u7b2c\u4e00\u5c42 2 \u6b21\u5f52\u4f4d , \u4e3aO ( 8 ) + O ( 8 ) = O ( 16 ) \u7b2c\u4e8c\u5c42 4 \u6b21\u5f52\u4f4d , \u4e3aO ( 4 ) + O ( 4 ) + O ( 4 ) + O ( 4 ) = O ( 16 ) \u7b2c\u4e09\u5c42 \u3001 \u7b2c\u56db\u5c42\u540c\u7406 , \u6bcf\u5c42\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3aO ( n ) \u4e00\u5171\u6709\u591a\u5c11\u5c42\u5462 ? 2 ^ x = 16 x\u4e3a4 --> O ( logn ) \u5373\u5c42\u6570\u7684\u65f6\u95f4\u590d\u6742\u5ea6 * \u6bcf\u4e00\u5c42\u5f52\u4f4d\u7684\u65f6\u95f4\u590d\u6742\u5ea6 = O ( n ) * O ( logn ) = O ( nlogn ) \u5feb\u6392\u7684\u95ee\u9898 \u00b6 1 > \u5feb\u6392\u662f\u9012\u5f52\u7684 , \u4f1a\u6d88\u8017\u76f8\u5f53\u4e00\u90e8\u5206\u7cfb\u7edf\u8d44\u6e90 2 > \u5feb\u6392\u6709\u4e00\u4e2a\u6700\u574f\u60c5\u51b5\u7684\u51fa\u73b0 eg : li = [ 9 , 8 , 7 , 6 , 5 , 4 , 3 , 2 , 1 ] 9 8 7 6 5 4 3 2 1 \u2b06\ufe0f \u2b06\ufe0f left right 9 \u62ff\u51fa\u6765 , \u4eceright\u6307\u9488\u5f00\u59cb , 1 < 9 , \u4f1a\u53d8\u6210 1 8 7 6 5 4 3 2 1 , \u7136\u540e\u4eceleft\u6307\u9488\u5f00\u59cb , 8 \u3001 7 \u3001 6 \u3001 5 \u3001 4 \u3001 3 \u3001 2 \u90fd\u6bd49\u5c0f .. left\u548cright\u78b0\u5230\u4e86\u4e00\u6b21 So , \u6b64\u6b21\u5f52\u4f4d\u7684\u7ed3\u679c\u662f 1 8 7 6 5 4 3 2 9 9 \u53f3\u8fb9\u6ca1\u6709\u503c , \u90a3\u5c31\u5bf99\u5de6\u8fb9\u7684 1 8 7 6 5 4 3 2 \u8fdb\u884c\u5f52\u4f4d 1 \u62ff\u51fa\u6765 , right\u5f80\u5de6\u79fb , \u53d1\u73b0\u6240\u7ecf\u8fc7\u7684\u6570\u90fd\u6bd41\u5927 , left\u548cright\u91cd\u5408 , 1 \u53c8\u88ab\u5199\u56de\u6765\u5566 So , \u6b64\u6b21\u5f52\u4f4d\u7684\u7ed3\u679c\u662f 1 8 7 6 5 4 3 2 1 \u5de6\u8fb9\u8fb9\u6ca1\u6709\u503c , \u90a3\u5c31\u5bf91\u53f3\u8fb9\u7684 8 7 6 5 4 3 2 \u8fdb\u884c\u5f52\u4f4d ... ... \u4ee5\u6b64\u7c7b\u63a8 \u53ef\u4ee5\u53d1\u73b0 , \u5feb\u6392\u7684\u6700\u574f\u60c5\u51b5 , \u6bcf\u6b21\u5f52\u4f4d\u7684\u7ed3\u679c\u53ea\u4f1a \u5c11\u4e00\u4e2a\u6570 / \u6392\u597d\u4e00\u4e2a\u6570 , \u6240\u4ee5\u5feb\u6392\u7684\u6700\u574f\u60c5\u51b5 \u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ^ 2 ) \u4f46\u8fd9\u79cd\u6700\u574f\u60c5\u51b5 , \u51fa\u73b0\u7684\u6982\u7387\u5f88\u5c0f . \u6709\u79cd\u4e0d\u662f\u4f18\u5316\u7684\u4f18\u5316\u65b9\u6cd5 -- \u968f\u673a\u5316\u7684\u5feb\u6392 : \u5728\u4e0a\u8ff0\u7684\u8bb2\u89e3\u4e2d , \u5feb\u6392\u53d6\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u5f52\u4f4d , \u90fd\u662f\u53d6\u7684\u7b2c\u4e00\u4e2a\u6570 \u90a3\u662f\u5426\u53ef\u4ee5\u968f\u673a\u627e\u4e00\u4e2a\u503c ? \u90a3\u4e48\u6211\u4eec\u6dfb\u52a0\u4e00\u6b65 , \u5c06\u968f\u673a\u627e\u7684\u6570\u8ddf\u7b2c\u4e00\u4e2a\u6570\u4ea4\u6362\u4e00\u4e0b .. \u5176\u4f59\u7684\u6b65\u9aa4\u4e0d\u53d8 . \u53ea\u80fd\u8bf4\u8be5\u4f18\u5316\u51cf\u5c11\u4e86\u6700\u574f\u60c5\u51b5\u7684\u51fa\u73b0 . \u5806\u6392\u5e8f \u00b6 def sift ( li , low , high ): i = low j = 2 * i + 1 temp = li [ low ] while j <= high : # \u82e5\u5c06sift()\u4e2dwhile\u5faa\u73af\u91cc li[j + 1] > li[j] \u3001li[j] > temp \u90fd\u6539\u6210\u5c0f\u4e8e,\u5efa\u7acb\u7684\u5c31\u662f\u5c0f\u6839\u5806. # \u5c0f\u6839\u5806\u8fdb\u884c\u5806\u6392\u5e8f\u540e\u662f\u964d\u5e8f;\u5927\u6839\u5806\u8fdb\u884c\u5806\u6392\u5e8f\u540e\u662f\u5347\u5e8f. if j + 1 <= high and li [ j + 1 ] > li [ j ]: j = j + 1 if li [ j ] > temp : li [ i ] = li [ j ] i = j j = i * 2 + 1 else : break li [ i ] = temp def heap_sort ( li ): n = len ( li ) for i in range (( n - 2 ) // 2 , - 1 , - 1 ): sift ( li , i , n - 1 ) for i in range ( n - 1 , - 1 , - 1 ): li [ 0 ], li [ i ] = li [ i ], li [ 0 ] sift ( li , 0 , i - 1 ) \u65f6\u95f4\u590d\u6742\u5ea6: O(nlogn) Ps: \u5feb\u6392\u548c\u5806\u6392\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e00\u6837, \u4f46\u771f\u5b9e\u60c5\u51b5\u4e0b,\u5feb\u6392\u8981\u6bd4\u5806\u6392\u5feb\u4e00\u70b9.. \u57fa\u7840\u77e5\u8bc6 \u00b6 \u5806\u6392\u5e8f\u524d\u4f20 -- \u6811\u4e0e\u4e8c\u53c9\u6811 \u6811\u7684\u6982\u5ff5 \u00b6 \u6811\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784 \u6bd4\u5982:\u76ee\u5f55\u7ed3\u6784 \u6811\u662f\u4e00\u79cd\u53ef\u4ee5\u9012\u5f52\u5b9a\u4e49\u7684\u6570\u636e\u7ed3\u6784 \u6811\u662f\u7531n\u4e2a\u8282\u70b9\u7ec4\u6210\u7684\u96c6\u5408: \u5982\u679cn=0, \u90a3\u8fd9\u662f\u4e00\u68f5\u7a7a\u6811; \u5982\u679cn>0, \u90a3\u5b58\u5728\u4e00\u4e2a\u8282\u70b9\u4f5c\u4e3a\u6811\u7684\u6839\u8282\u70b9,\u5176\u5b83\u8282\u70b9\u53ef\u4ee5\u5206\u4e3am\u4e2a\u96c6\u5408,\u6bcf\u4e2a\u96c6\u5408\u7684\u672c\u8eab\u53c8\u662f\u4e00\u68f5\u6811. \u6839\u8282\u70b9 -- A \u53f6\u5b50\u7ed3\u70b9 -- B C H I P Q K L M N \u6811\u7684\u6df1\u5ea6 / \u9ad8\u5ea6 -- 4 \u5373\u770b\u6700\u6df1\u6709\u591a\u5c11\u5c42 \u8282\u70b9\u7684\u5ea6 -- E\u8282\u70b9\u5f80\u4e0b\u5206\u4e86\u4e24\u4e2a\u53c9 , \u5176\u5ea6\u4e3a2 ; F\u8282\u70b9\u5f80\u4e0b\u5206\u4e86\u4e09\u4e2a\u53c9 , \u5176\u5ea6\u4e3a3 \u6811\u7684\u5ea6 -- 6 A\u8282\u70b9\u7684\u5ea6\u4e3a6 , \u662f\u8be5\u6811\u4e2d\u8282\u70b9\u7684\u5ea6\u7684\u6700\u5927\u503c \u5b69\u5b50\u8282\u70b9 / \u7236\u8282\u70b9 -- E\u662fI\u7684\u7236\u8282\u70b9 , I\u662fE\u7684\u5b69\u5b50\u8282\u70b9 \u5b50\u6811 -- \u6574\u4f53\u662f\u4e00\u68f5\u6811 ; B\u662f\u4e00\u68f5\u6811 ; E I J P Q\u662f\u4e00\u68f5\u6811 ; I\u662f\u4e00\u68f5\u6811 ; J P Q\u662f\u4e00\u68f5\u6811 . \u5b8c\u5168\u4e8c\u53c9\u6811 \u00b6 \u6ce8: \u5806\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u5b8c\u5168\u4e8c\u53c9\u6811. \u4e8c\u53c9\u6811: \u5ea6\u4e0d\u8d85\u8fc72\u7684\u6811 \u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u6709\u4e24\u4e2a\u5b69\u5b50\u8282\u70b9 \u4e24\u4e2a\u5b69\u5b50\u8282\u70b9\u88ab\u533a\u5206\u4e3a\u5de6\u5b69\u5b50\u8282\u70b9\u548c\u53f3\u5b69\u5b50\u8282\u70b9 \u6ee1\u4e8c\u53c9\u6811: \u4e00\u4e2a\u4e8c\u53c9\u6811,\u82e5\u6bcf\u4e00\u5c42\u7684\u8282\u70b9\u6570\u90fd\u8fbe\u5230\u6700\u5927\u503c2, \u5219\u8fd9\u4e2a\u4e8c\u53c9\u6811\u5c31\u662f\u6ee1\u4e8c\u53c9\u6811.. \u5b8c\u5168\u4e8c\u53c9\u6811: \u53f6\u5b50\u8282\u70b9\u53ea\u80fd\u51fa\u73b0\u5728\u6700\u4e0b\u5c42\u548c\u6b21\u4e0b\u5c42, \u5e76\u4e14\u6700\u4e0b\u9762\u4e00\u5c42\u7684\u8282\u70b9\u90fd\u96c6\u4e2d\u5728\u8be5\u5c42\u6700\u5de6\u8fb9\u7684\u82e5\u5e72\u4f4d\u7f6e\u7684\u4e8c\u53c9\u6811.. \u8bf4\u4eba\u8bdd,(\u25d0\u203f\u25d1) \ufeff\u5c31\u662f\u6700\u4e0b\u9762\u4e00\u5c42\u53ef\u4ee5\u4e0d\u6ee1,\u4f46\u5fc5\u987b\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u6392\u8fc7\u6765!! \u7236\u5b50\u4e92\u627e \u00b6 \u5373\u8ba1\u7b97\u673a\u5982\u4f55\u5b58\u50a8\u4e8c\u53c9\u6811. \u6709\u4e24\u79cd\u65b9\u5f0f. 1> \u94fe\u5f0f\u5b58\u50a8\u65b9\u5f0f 2> \u987a\u5e8f\u5b58\u50a8\u65b9\u5f0f -- \u7528\u5217\u8868\u6765\u5b58 Ps: \u8fd9\u91cc\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u987a\u5e8f\u5b58\u50a8\u65b9\u5f0f, \u94fe\u5f0f\u5b58\u50a8\u5728\u540e\u7eed\u8bb2\u8ff0\u94fe\u8868\u76f8\u5173\u77e5\u8bc6\u70b9\u4f1a\u8be6\u7ec6\u9610\u8ff0!! \u56fe\u4e2d\u5c06\u4e00\u9897 \u5b8c\u5168\u4e8c\u53c9\u6811 \u6309\u987a\u5e8f\u5b58\u50a8\u5230\u4e86\u4e00\u4e2a\u5217\u8868\u4e2d.. Q: \u7236\u8282\u70b9\u4e0e\u5de6\u5b69\u5b50\u8282\u70b9\u7684\u7f16\u53f7\u4e0b\u6807\u6709\u4ec0\u4e48\u5173\u7cfb? A: \u82e5i\u8868\u793a\u7236\u8282\u70b9\u7684\u4e0b\u6807,\u90a3\u4e48\u8be5\u7236\u8282\u70b9\u7684\u5de6\u5b69\u5b50\u8282\u70b9\u7684\u4e0b\u6807\u662f --> 2i+1 \u7236\u8282\u70b9 & \u5de6\u5b69\u5b50\u8282\u70b9 9 & 8 8 & 6 7 & 0 6 & 2 5 & 3 \u5728\u5217\u8868\u4e2d\u5bf9\u5e94\u4e0b\u6807 0 - 1 1 - 3 2 - 5 3 - 7 3 - 9 Q: \u7236\u8282\u70b9\u4e0e\u53f3\u5b69\u5b50\u8282\u70b9\u7684\u7f16\u53f7\u4e0b\u6807\u6709\u4ec0\u4e48\u5173\u7cfb? A: \u82e5i\u8868\u793a\u7236\u8282\u70b9\u7684\u4e0b\u6807,\u90a3\u4e48\u8be5\u7236\u8282\u70b9\u7684\u53f3\u5b69\u5b50\u8282\u70b9\u7684\u4e0b\u6807\u662f --> 2i+2 \u7236\u8282\u70b9 & \u53f3\u5b69\u5b50\u8282\u70b9 9 & 7 8 & 5 7 & 1 6 & 4 \u5728\u5217\u8868\u4e2d\u5bf9\u5e94\u4e0b\u6807 0 - 2 1 - 4 2 - 6 3 - 8 \u82e5\u77e5\u9053\u4efb\u610f\u5b50\u8282\u70b9( \u4e0d\u7ba1\u662f\u5de6\u5b69\u5b50\u8282\u70b9\u8fd8\u662f\u53f3\u5b69\u5b50\u8282\u70b9 )\u5728\u5217\u8868\u4e2d\u7684\u4e0b\u6807,\u90a3\u4e48\u8be5\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9\u7684\u4e0b\u6807\u4e3a (i-1)//2 \u6ce8: \u6574\u9664 \u5927\u5c0f\u5806 \u00b6 \u5806: \u5806\u7684\u903b\u8f91\u7ed3\u6784\u4e3a\u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811, \u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u7ed3\u6784. \u5927\u6839\u5806: \u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811, \u6ee1\u8db3\u4efb\u610f\u8282\u70b9\u90fd\u6bd4\u5176\u5b69\u5b50\u8282\u70b9\u5927; -- \u7236\u4eb2\u6bd4\u5b69\u5b50\u90fd\u5927 \u5c0f\u6839\u5806: \u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811, \u6ee1\u8db3\u4efb\u610f\u8282\u70b9\u90fd\u6bd4\u5176\u5b69\u5b50\u8282\u70b9\u5c0f. -- \u7236\u4eb2\u6bd4\u5b69\u5b50\u90fd\u5c0f \u6ce8: \u5806\u6392\u5e8f\u4f7f\u7528\u5927\u6839\u5806\u6392\u51fa\u6765\u7684\u662f\u589e\u5e8f\u7684!! \u5806\u7684\u5411\u4e0b\u8c03\u6574\u6027 \u00b6 \u5047\u8bbe\u6839\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u90fd\u662f\u5806, \u4f46\u6839\u8282\u70b9\u4e0d\u6ee1\u8db3\u5806\u7684\u6027\u8d28! \u53ef\u4ee5\u901a\u8fc7\u4e00\u6b21\u5411\u4e0b\u7684\u8c03\u6574\u6765\u5c06\u5176\u53d8\u6210\u4e00\u4e2a\u5806. \u8fd9\u68f5\u6811\u7684\u662f\u5b8c\u5168\u4e8c\u53c9\u6811 , \u4f46\u4e0d\u6ee1\u8db3\u5806\u7684\u6027\u8d28 . \u4e0d\u662f\u5927\u6839\u5806 \u3001 \u4e5f\u4e0d\u662f\u5c0f\u6839\u5806 . \u629b\u5f002\u8fd9\u4e2a\u6839\u8282\u70b9 , \u5b83\u7684\u5de6\u5b50\u6811 9 8 5 6 4 3 \u662f\u5927\u6839\u5806 , \u53f3\u5b50\u6811 7 0 1 \u4e5f\u662f\u5927\u6839\u5806 . \u90a3\u4e48\u53ef\u901a\u8fc7\u5411\u4e0b\u8c03\u6574\u5c06\u8fd9\u6574\u9897\u6811\u53d8\u6210\u4e00\u4e2a\u5927\u6839\u5806 . 2 < 9 2 < 7 9 > 7 9 \u4f5c\u4e3a\u6839\u8282\u70b9 2 < 8 2 < 5 8 > 5 8 \u9876\u4e0a\u53bb 2 < 6 2 < 4 6 > 4 6 \u9876\u4e0a\u53bb \u6700\u540e , 2 \u653e\u4e0a\u53bb\u4e86 , \u6b64\u5904\u6210\u4e3a\u4e86\u4e00\u4e2a\u53f6\u5b50\u7ed3\u70b9 . \u4e3e\u4e00\u53cd\u4e09 : \u82e5\u6839\u8282\u70b9\u662f\u6570\u5b577 , \u4e0d\u662f\u6570\u5b572 . \u90a3\u4e48\u5411\u4e0b\u8c03\u6574\u540e\u7684\u5927\u6839\u5806 9 8 7 7 5 0 1 6 4 3 , \u6839\u8282\u70b9\u5411\u4e0b\u8c03\u6574\u5230\u7684\u4f4d\u7f6e\u662f\u5012\u6570\u7b2c\u4e8c\u5c42 . \u5806\u6392\u5e8f\u8fc7\u7a0b \u00b6 step1: \"\u519c\u6751\u5305\u56f4\u57ce\u5e02\" - \u5efa\u7acb\u5806. step2: \u5f00\u59cb\u6328\u4e2a\u6392\u5e8f. 1> \u5f97\u5230\u5806\u9876\u5143\u7d20, \u4e3a\u6700\u5927\u5143\u7d20. 2> \u53bb\u6389\u5806\u9876, \u5c06\u5806\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u653e\u5230\u5806\u9876, \u901a\u8fc7\u4e00\u6b21 \u5806\u7684\u5411\u4e0b\u8c03\u6574 \u91cd\u65b0\u4f7f\u5806\u6709\u5e8f. 3> \u5806\u9876\u5143\u7d20\u4e3a\u7b2c\u4e8c\u5927\u5143\u7d20. 4> \u91cd\u590d 2> , \u76f4\u5230\u5806\u53d8\u7a7a. # -- \u5411\u4e0b\u8c03\u6574\u7684\u8fc7\u7a0b!sift\u51fd\u6570\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn),\u5b83\u6700\u591a\u8d70\u6811\u7684\u9ad8\u5ea6\u90a3\u4e48\u591a\u5c42,\u662f\u6298\u534a\u7684\u8fc7\u7a0b. # \u56de\u987e\u4e0b\u54e6,\u5806\u7684\u5411\u4e0b\u8c03\u6574\u662f\u6839\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u90fd\u662f\u5806,\u4f46\u6839\u8282\u70b9\u4e0d\u6ee1\u8db3\u5806\u7684\u6027\u8d28 def sift ( li , low , high ): \"\"\"\u53c2\u6570 li: \u5217\u8868 low: \u5806\u7684\u6839\u8282\u70b9/\u5806\u9876\u5143\u7d20\u7684\u4f4d\u7f6e high: \u5806\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 - \u2605\u7528\u4e8e\u5224\u65ad\u6709\u6ca1\u6709\u8d8a\u754c! \"\"\" i = low # i\u521d\u59cb\u5316\u4e3a\u6839\u8282\u70b9\u7684\u4f4d\u7f6e j = 2 * i + 1 # j\u521d\u59cb\u5316\u4e3a\u5de6\u5b69\u5b50\u7684\u4f4d\u7f6e temp = li [ low ] # \u628a\u5806\u9876\u5143\u7d20\u5b58\u8d77\u6765 # \u7b80\u5355\u9610\u8ff0\u5faa\u73af\u7684\u8fc7\u7a0b: # \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u5c06\u6839\u8282\u70b9\u7684\u5143\u7d20\u62ff\u5f00, \u7a7a\u4e86\u4e2a\u4f4d\u7f6e.\u9700\u8981\u4e0b\u4e00\u5c42\u6bd4\u8f83\u5927\u7684\u6570\u9876\u4e0a\u6765. # \u4e0b\u4e00\u5c42\u7684\u5143\u7d20\u9876\u4e0a\u6765\u540e, \u53c8\u7a7a\u4e86\u4e2a\u4f4d\u7f6e.\u9700\u8981\u770b\u4e0b\u4e00\u5c42\u8f83\u5927\u7684\u5b69\u5b50\u4e0e\u6682\u5b58\u7684\u6839\u8282\u70b9\u5143\u7d20\u6bd4\u8f83,\u5927\u70b9\u7684\u5f25\u8865\u4e0a\u53bb. # \u4ee5\u6b64\u7c7b\u63a8.. # \u9000\u51fa\u5faa\u73af\u7684\u6761\u4ef6: # \u60c5\u51b51:\u82e5i\u7684\u5b69\u5b50j\u7684\u4f4d\u7f6e\u5927\u4e8e\u5806\u6700\u540e\u5143\u7d20\u7684\u4e0b\u6807,\u90a3\u8bc1\u660ei\u5143\u7d20\u662f\u53f6\u5b50\u8282\u70b9,\u5b83\u6ca1\u6709\u5b69\u5b50.\u9000\u51fa\u5faa\u73af. # \u4e5f\u5c31\u662f\u8bf4,\u770bj\u7684\u4f4d\u7f6e\u6709\u65e0\u8d8a\u754c.\u82e5\u6ca1\u6709\u8d8a\u754c,\u5faa\u73af\u7ee7\u7eed. # \u60c5\u51b52:\u5728\u5faa\u73af\u7684\u8fc7\u7a0b\u4e2d,\u6682\u5b58\u7684\u6839\u8282\u70b9\u5143\u7d20\u627e\u5230\u4e86\u5408\u9002\u7684\u4f4d\u7f6e.\u9000\u51fa\u5faa\u73af. # \u9000\u51fa\u5faa\u73af\u540e: # \u5c06\u6682\u5b58\u7684\u6839\u8282\u70b9\u5143\u7d20\u653e\u5230\u5408\u9002\u7684\u4f4d\u7f6e # while\u5faa\u73af\u6b63\u5e38\u6267\u884c\u5b8c - \u67d0\u4e00\u7ea7\u7684\u9886\u5bfc\u4f4d\u7f6e\u4e0a; while\u5faa\u73af\u9047\u5230break\u9000\u51fa - \u53f6\u5b50\u8282\u70b9. while j <= high : # \u53f3\u5b69\u5b50\u5b58\u5728\u4e14\u53f3\u5b69\u5b50\u6bd4\u5de6\u5b69\u5b50\u5927,j\u6307\u5411\u53f3\u5b69\u5b50 if j + 1 <= high and li [ j + 1 ] > li [ j ]: j = j + 1 if li [ j ] > temp : li [ i ] = li [ j ] # \u8f83\u5927\u7684\u5b69\u5b50\u8282\u70b9\u9876\u4e0a\u53bb\u5566 # \u56e0\u4e3a\u5b69\u5b50\u8282\u70b9\u9876\u4e0a\u53bb\u4e86,i\u5f97\u6307\u5411\u65b0\u7684\u7a7a\u4f4d\u7f6e,\u6240\u4ee5\u8fd9\u91cc\u9700\u8981\u66f4\u65b0\u4e0bi\u548cj i = j j = i * 2 + 1 else : # li[j] <= temp temp\u627e\u5230\u4e86\u5408\u9002\u7684\u4f4d\u7f6e,\u9000\u51fa\u5faa\u73af # ps:\u5176\u5b9e\u6211\u5bf9\u4e8eli[j]=temp\u7684\u60c5\u51b5\u5b58\u5728\u7591\u60d1,\u4eba\u4e3a\u53ef\u4ee5\u6784\u9020\u8fd9\u79cd\u60c5\u51b5,\u5806\u6392\u5e8f\u8fc7\u7a0b\u4e2d\u4f1a\u51fa\u73b0\u8be5\u60c5\u51b5\u5417? # \u6bd4\u5982\u6211\u53ef\u4ee5\u4eba\u4e3a\u6784\u9020\u8fd9\u6837\u4e00\u9897\u6811[8, 9, 7, 8, 5, 0, 1, 6, 4, 3],\u5411\u4e0b\u8c03\u6574. # \u5176\u8c03\u6574\u7ed3\u679c\u662f[9, 8, 7, 8, 5, 0, 1, 6, 4, 3]. break # print('\u8fc7\u7a0b\u4e2d:', li) # \u9000\u51fa\u5faa\u73af,temp\u653e\u5230\u4e86\u5408\u9002\u7684\u4f4d\u7f6e li [ i ] = temp def heap_sort ( li ): # \u6211\u4eec\u6653\u5f97 \u901a\u8fc7\u5b69\u5b50\u8282\u70b9\u7684\u4e0b\u6807i\u80fd\u63a8\u5bfc\u51fa\u7236\u8282\u70b9\u7684\u4e0b\u6807 --> (i-1)//2 # \u6211\u4eec\u4e5f\u77e5\u9053,\u6700\u540e\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u7684\u4e0b\u6807\u4e3an-1 <n\u4e3a\u5217\u8868\u5143\u7d20\u7684\u4e2a\u6570/\u6811\u7684\u8282\u70b9\u4e2a\u6570> # \u90a3\u4e48\u6c42\u6811\u4e2d\u6700\u540e\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u7684\u4e0b\u6807 --> (n-1-1)//2 \u5373 n//2 -1 n = len ( li ) # \"\u519c\u6751\u5305\u56f4\u57ce\u5e02\" # \u4f9d\u6b21<\u4ece\u6700\u540e\u4e00\u4e2a\u5230\u7b2c\u4e00\u4e2a>\u5bf9\u6811\u4e2d\u6bcf\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u4f5c\u4e3a\u6839\u8282\u70b9\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u8fdb\u884c\u5411\u4e0b\u8c03\u6574,\u5c06\u5176\u53d8\u6210\u4e00\u4e2a\u5806 # \u25b2 \u8be5for\u7ed3\u675f\u540e,\u5efa\u5806\u5b8c\u6210!! # -- \u25ce \u82e5\u5c06sift()\u4e2dwhile\u5faa\u73af\u91cc li[j + 1] > li[j] \u3001li[j] > temp \u90fd\u6539\u6210\u5c0f\u4e8e,\u5efa\u7acb\u7684\u5c31\u662f\u5c0f\u6839\u5806. for i in range (( n - 2 ) // 2 , - 1 , - 1 ): # \u6ce8\u610f,\u5148\u660e\u786e\u6b64\u5904sift\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570,\u662f\u7528\u6765\u5224\u65ad\u6709\u65e0\u8d8a\u754c\u7684! # \u601d\u8def1: # \u5f88\u6b63\u5e38\u7684,\u6211\u4eec\u4f1a\u60f3\u7740\u6c42\u4ece\u5927\u6811\u91cc\u5256\u79bb\u51fa\u7684\u6bcf\u4e2a\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 # \u8be5\u4e0b\u6807\u4f5c\u4e3asift\u51fd\u6570\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u7684\u503c,\u6211\u4eec\u5047\u8bbe\u4e3ax # \u601d\u8def2: # \u518d\u6362\u4e2a\u601d\u8def,\u7528\u6700\u540e\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u4e0b\u6807 n-1 # \u5206\u6790\u6bd4\u8f83: # \u6c42\u5f97\u4e0b\u6807\u4e3ai\u7684\u8282\u70b9\u7684\u5de6\u5b69\u5b50\u8282\u70b9\u4e0b\u6807 j = 2*i + 1 # So, [\u82e5\u8d8a\u754c] j>x \u3001j>n-1 \u3001n-1>x --> j > n-1 > x # \u2605 \u5173\u952e\u5728\u4e8e \u8d8a\u754c\u65f6, j > n - 1 # \u8fd9\u91cc\u4ee5n-1\u4f5c\u4e3a\u6bcf\u68f5\u5b8c\u5168\u4e8c\u53c9\u6811\u6709\u65e0\u8d8a\u754c\u7684\u5224\u65ad\u6761\u4ef6,\u4e5f\u8bb8\u4f60\u4f1a\u95ee,\u4e07\u4e00,\u8d8a\u754c\u65f6,j\u5904\u4e8ex\u548cn-1\u4e4b\u95f4\u5462? # >: \u4f60\u653e\u4e00\u4e07\u4e2a\u5fc3,\u56e0\u4e3a\u6574\u9897\u5927\u6811\u662f\u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811!!\u8d8a\u754c\u65f6\u5019,j\u4e00\u5b9a\u5927\u4e8en-1!!! sift ( li , i , n - 1 ) # print(f\"\u5012\u6570\u7b2c{i+1}\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u6784\u5efa\u5806\u7684\u7ed3\u679c:\", li) # \u25b2 \u5efa\u5806\u5b8c\u6210\u540e, \u5f00\u59cb\u6328\u4e2a\u6392\u5e8f. # \u2605 \u5728\u8be5\u5faa\u73af\u8fc7\u7a0b\u4e2d,i\u4e00\u76f4\u6307\u5411\u5f53\u524d\u5806\u4e2d\u8981\u4e0e\u6839\u8282\u70b9\u5143\u7d20\u4ea4\u6362\u7684\u90a3\u4e00\u4e2a\u5143\u7d20!!! for i in range ( n - 1 , - 1 , - 1 ): li [ 0 ], li [ i ] = li [ i ], li [ 0 ] # \u90fd\u662f\u5bf9\u6574\u4e2a\u5806\u7684\u8c03\u6574!! # \u6ce8:\u8fd9\u91cc\u5806\u7684\u5411\u4e0b\u8c03\u6574,\u8981\u6392\u9664\u6389\u4ea4\u6362\u4e0b\u6765\u7684\u90a3\u4e2a\u5806\u9876\u5143\u7d20.. So,\u8fd9\u91ccsift\u7684\u53c2\u6570high\u7684\u503c\u662fi-1 sift ( li , 0 , i - 1 ) # \u5f53i=0\u65f6,sift\u51fd\u6570\u5185\u90e8\u4e5f\u662f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u7684,\u65e0\u9700\u52a0\u5224\u65ad. # print(f\"\u6392\u5e8f\u8fc7\u7a0b\", li) if __name__ == '__main__' : import random li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) heap_sort ( li ) print ( li ) \"\"\" [15, 7, 18, 12, 6, 7, 16, 6, 17, 9] [6, 6, 7, 7, 9, 12, 15, 16, 17, 18] \"\"\" \u5806\u6392\u5e8f\u5185\u7f6e\u6a21\u5757 \u00b6 Python\u5185\u7f6e\u6a21\u5757 -- heapq \u5e38\u7528\u51fd\u6570: heapify(x) heappush(heap, item) heappop(heap) import heapq # q\u6307\u7684\u662fqueue \u4f18\u5148\u961f\u5217 import random li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( \"\u521d\u59cb\u503c:\" , li ) heapq . heapify ( li ) # \u5efa\u5806,\u9ed8\u8ba4\u662f\u5c0f\u5806 print ( \"\u5efa\u5806\u540e:\" , li ) li_sort = [] for _ in range ( len ( li )): li_sort . append ( heapq . heappop ( li )) print ( \"\u6392\u5e8f\u540e:\" , li_sort ) \"\"\" \u521d\u59cb\u503c: [15, 2, 9, 15, 5, 3, 12, 19, 6, 13] \u5efa\u5806\u540e: [2, 5, 3, 6, 13, 9, 12, 19, 15, 15] \u6392\u5e8f\u540e: [2, 3, 5, 6, 9, 12, 13, 15, 15, 19] \"\"\" topk\u95ee\u9898!! \u00b6 \u73b0\u5728\u6709n\u4e2a\u6570, \u4f60\u8981\u8bbe\u8ba1\u7b97\u6cd5\u5f97\u5230\u524dk\u5927\u7684\u6570. (k<n) \u89e3\u51b3\u601d\u8def: O(nlogn) ; O(nk) ; O(nlogk) >> \u601d\u8def\u4e00 \u5feb\u901f\u6392\u5e8f\u540e\u5207\u7247 -- O ( nlogn + k ) \u56db\u820d\u4e94\u5165 O ( nlogn ) >> \u601d\u8def\u4e8c \u4f7f\u7528lowB\u4e09\u4eba\u7ec4 -- O ( nk ) \u5192\u6ce1\u6392\u5e8f\u548c\u9009\u62e9\u6392\u5e8f\u6709\u4e00\u4e2a\u7279\u70b9 , \u5faa\u73af\u4e00\u6b21\u5c31\u80fd\u5f97\u5230\u4e00\u4e2a \u6700\u5927 / \u6700\u5c0f \u7684\u6570 , \u5faa\u73afk\u6b21\u5373\u53ef . \u63d2\u5165\u6392\u5e8f , \u7ef4\u62a4\u4e00\u4e2a\u957f\u5ea6\u4e3ak\u7684\u5217\u8868 , \u6765\u4e00\u4e2a\u5c31\u653e\u8fdb\u53bb , \u4f46\u8981\u6839\u636e\u63d2\u5165\u6392\u5e8f\u7684\u89c4\u5219\u4fdd\u8bc1\u5217\u8868\u4e2d\u7684\u5143\u7d20\u662f\u6392\u5e8f\u597d . \u7ef4\u62a4\u7684\u5217\u8868\u91cc\u6709k\u4e2a\u5143\u7d20\u540e , \u7ee7\u7eed\u63d2\u5165 , \u9700\u8981\u5224\u65ad . \u82e5\u6bd4\u7ef4\u62a4\u7684\u5217\u8868\u4e2d\u7b2ck\u5927\u7684\u6570\u5927 , \u5c31\u63d2\u8fdb\u53bb . \u63d2\u5230\u5408\u9002\u7684\u4f4d\u7f6e ( \u4fdd\u8bc1\u7ef4\u62a4\u7684\u5217\u8868\u6709\u5e8f ), \u88ab\u6324\u51fa\u6765\u7684\u5143\u7d20\u820d\u5f03\u6389 . \u5373\u8bd5\u56fe\u63d2\u5165n\u4e2a\u6570 , \u4f46\u5217\u8868\u957f\u5ea6\u6709\u9650 , \u4e3ak , \u82e5\u80fd\u63d2\u5165 , \u63d2\u5165\u65f6\u6700\u574f\u60c5\u51b5\u9700\u8981\u904d\u5386\u4e00\u904d\u7ef4\u62a4\u7684\u5217\u8868 , \u4fdd\u8bc1\u91cc\u9762\u7684k\u4e2a\u5143\u7d20\u6709\u5e8f . \u6700\u574f\u65f6 , n\u4e2a\u6570\u90fd\u8981\u63d2\u8fdb\u53bb , \u63d2\u5165\u7684\u4f4d\u7f6e\u90fd\u8981\u5c06\u7ef4\u62a4\u7684\u5217\u8868\u904d\u5386\u4e00\u904d . So , O ( nk ) \u8ddf\u601d\u8def\u4e00\u76f8\u6bd4 , \u601d\u8def\u4e8c\u66f4\u597d , \u56e0\u4e3a\u601d\u8def\u4e8c\u4e0d\u4f1a\u628a\u6240\u6709\u7684\u90fd\u6392\u4e00\u904d . \u601d\u8def\u4e00\u548c\u601d\u8def\u4e8c\u8c01\u66f4\u5feb , \u53d6\u51b3\u4e8e k\u548clogn\u7684\u5927\u5c0f . >> \u601d\u8def\u4e09 \u4f7f\u7528\u5806\u6392\u5e8f -- O ( nlogk ) step1 > \u53d6\u5217\u8868\u524dk\u4e2a\u6570\u5efa\u7acb\u4e00\u4e2a\u5c0f\u6839\u5806 . \u5806\u9876\u5c31\u662f\u76ee\u524d\u7b2ck\u4e2a\u5927\u7684\u6570 step2 > \u4f9d\u6b21\u5f80\u540e\u904d\u5386\u539f\u5217\u8868 , \u5bf9\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20 . \u82e5\u5c0f\u4e8e\u5806\u9876 , \u5219\u5ffd\u7565\u8be5\u5143\u7d20 ; \u82e5\u5927\u4e8e\u5806\u9876 , \u5219\u5c06\u5806\u9876\u66f4\u6362\u4e3a\u8be5\u5143\u7d20 , \u5e76\u4e14\u5bf9\u5806\u8fdb\u884c\u4e00\u6b21\u8c03\u6574 . step3 > \u904d\u5386\u5217\u8868\u6240\u6709\u5143\u7d20\u540e , \u5012\u5e8f\u5f39\u51fa\u5806\u9876 . \u7b80\u5355\u7406\u89e3 , \u6700\u574f\u60c5\u51b5\u5c31\u662f\u8fdb\u884c\u4e86n\u6b21\u5411\u4e0b\u8c03\u6574 , \u8fd9\u91cc\u5bf9k\u4e2a\u5143\u7d20\u5411\u4e0b\u8c03\u6574 , \u5176\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( logk ), \u8fdb\u884cn\u6b21 , \u5c31\u662fO ( nlogk ) \u6700\u540e\u5bf9k\u4e2a\u5143\u7d20\u7684\u5c0f\u6839\u5806\u8fdb\u884c\u6392\u5e8f , \u53ef\u4ee5\u56db\u820d\u4e94\u5165\u5ffd\u7565\u4e0d\u8ba1 . \u4ee3\u7801\u5b9e\u73b0: def sift ( li , low , high ): i = low j = 2 * i + 1 temp = li [ low ] while j <= high : if j + 1 <= high and li [ j + 1 ] < li [ j ]: j = j + 1 if li [ j ] < temp : li [ i ] = li [ j ] i = j j = i * 2 + 1 else : break li [ i ] = temp def topk ( li , k ): heap = li [ 0 : k ] # \u53d6\u51fa\u5217\u8868\u7684\u524dk\u4e2a\u503c # step1: \u5bf9\u53d6\u51fa\u6765\u7684k\u4e2a\u503c\u5efa\u5806 for i in range (( k - 2 ) // 2 , - 1 , - 1 ): sift ( heap , i , k - 1 ) # step2: \u904d\u5386\u5217\u8868\u4e2d\u5269\u4f59\u7684\u6240\u6709\u5143\u7d20 for i in range ( k , len ( li )): # \u6bd4\u8f83\u5217\u8868\u4e2d\u5269\u4e0b\u7684\u5143\u7d20\u4e0e\u5c0f\u6839\u5806\u5806\u9876\u5143\u7d20\u7684\u5927\u5c0f if li [ i ] > heap [ 0 ]: # \u82e5\u6bd4\u5806\u9876\u5927 heap [ 0 ] = li [ i ] # \u8986\u76d6 sift ( heap , 0 , k - 1 ) # \u505a\u8c03\u6574 # step3: \u6328\u4e2a\u8f93\u51fa for i in range ( k - 1 , - 1 , - 1 ): heap [ 0 ], heap [ i ] = heap [ i ], heap [ 0 ] sift ( heap , 0 , i - 1 ) return heap li = [ 6 , 8 , 1 , 9 , 3 , 0 , 7 , 2 , 4 , 5 ] print ( topk ( li , 5 )) # [9, 8, 7, 6, 5] \u5f52\u5e76\u6392\u5e8f \u00b6 def merge ( li , low , mid , high ): i = low j = mid + 1 temp = [] while i <= mid and j <= high : # li[i] < li[j]\u662f\u5347\u5e8f;li[i] > li[j]\u662f\u964d\u5e8f. if li [ i ] < li [ j ]: temp . append ( li [ i ]) i += 1 else : temp . append ( li [ j ]) j += 1 while i <= mid : temp . append ( li [ i ]) i += 1 while j <= high : temp . append ( li [ j ]) j += 1 li [ low : high + 1 ] = temp def merge_sort ( li , low , high ): if low < high : mid = ( low + high ) // 2 merge_sort ( li , low , mid ) merge_sort ( li , mid + 1 , high ) merge ( li , low , mid , high ) \u65f6\u95f4\u590d\u6742\u5ea6: O(nlogn) \u8fd8\u9700\u8981O(n)\u7684\u7a7a\u95f4, \u6700\u5927\u65f6, \u9700\u8981\u4e00\u4e2a\u6392\u5e8f\u5217\u8868\u957f\u5ea6\u7684\u5217\u8868\u8fdb\u884c\u8f85\u52a9!! \u5373\u7a7a\u95f4\u590d\u6742\u5ea6 O(n) Python\u5185\u7f6e\u51fd\u6570sort\u7684\u5e95\u5c42\u662f \u57fa\u4e8e\u5f52\u5e76\u6392\u5e8f\u7ed3\u5408\u63d2\u5165\u6392\u5e8f\u5e76\u505a\u4e86\u4e00\u4e9b\u4f18\u5316 \u5b9e\u73b0\u7684!! -- Tim\u6392\u5e8f\u7b97\u6cd5 \u5f52\u5e76\u64cd\u4f5c \u00b6 \u5047\u8bbe\u73b0\u5728\u7684\u5217\u8868\u5206\u4e24\u6bb5\u6709\u5e8f, \u5982\u4f55\u5c06\u5176\u5408\u6210\u4e3a\u4e00\u4e2a\u6709\u5e8f\u5217\u8868? -- \u8fd9\u79cd\u64cd\u4f5c\u79f0\u4e3a\u4e00\u6b21\u5f52\u5e76!! eg: [2,5,7, 1,3] \u4ee3\u7801\u5b9e\u73b0\u5f52\u5e76\u64cd\u4f5c. # \u5f52\u5e76\u7684\u524d\u63d0\u662f\u4e00\u4e2a\u5217\u8868\u5305\u542b\u5de6\u53f3\u4e24\u90e8\u5206\u6709\u5e8f\u7684\u5217\u8868 def merge ( li , low , mid , high ): i = low j = mid + 1 temp = [] # -- \u8be5while\u5faa\u73af\u6267\u884c\u5b8c,\u5de6\u53f3\u80af\u5b9a\u6709\u4e00\u8fb9\u6ca1\u6709\u6570\u5566! while i <= mid and j <= high : # \u4fdd\u8bc1\u5de6\u53f3\u4e24\u8fb9\u90fd\u6709\u6570 if li [ i ] < li [ j ]: temp . append ( li [ i ]) i += 1 else : temp . append ( li [ j ]) j += 1 # -- \u4e0b\u65b9\u7684\u4e24\u4e2awhile,\u53ea\u4f1a\u6709\u4e00\u4e2a\u6267\u884c! # \u82e5\u5de6\u8fb9\u8fd8\u6709\u6570,\u5c06\u5de6\u8fb9\u7684\u6570\u4f9d\u6b21\u6dfb\u52a0\u5230\u4e34\u65f6\u5217\u8868temp\u4e2d while i <= mid : temp . append ( li [ i ]) i += 1 # \u82e5\u53f3\u8fb9\u8fd8\u6709\u6570,\u5c06\u53f3\u8fb9\u7684\u6570\u4f9d\u6b21\u6dfb\u52a0\u5230\u4e34\u65f6\u5217\u8868temp\u4e2d while j <= high : temp . append ( li [ j ]) j += 1 # -- \u5c06temp\u5217\u8868\u91cc\u7684\u503c\u5199\u56de\u5230li\u5217\u8868\u4e2d li [ low : high + 1 ] = temp # \u5229\u7528\u5207\u7247,\u5207\u7247\u53ef\u4ee5\u5f80\u56de\u5199 if __name__ == '__main__' : li = [ 2 , 5 , 7 , 1 , 3 ] merge ( li , 0 , 2 , 4 ) print ( li ) # [1, 2, 3, 5, 7] \u9012\u5f52\u4f7f\u7528\u5f52\u5e76 \u00b6 \u5206\u89e3: \u5c06\u5217\u8868\u8d8a\u5206\u8d8a\u5c0f, \u76f4\u81f3\u5206\u6210\u4e00\u4e2a\u5143\u7d20. \u7ec8\u6b62\u6761\u4ef6: \u4e00\u4e2a\u5143\u7d20\u662f\u6709\u5e8f\u7684. \u5408\u5e76: \u5c06\u4e24\u4e2a\u6709\u5e8f\u5217\u8868\u5f52\u5e76, \u5217\u8868\u8d8a\u6765\u8d8a\u5927. \u6bcf\u6b21\u5f52\u5e76\u64cd\u4f5c,\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(n),\u53ef\u4ee5\u7406\u89e3\u6210\u5de6\u8fb9\u7684i\u8d70\u5b8c,\u53f3\u8fb9\u7684j\u8d70\u5b8c,\u76f8\u5f53\u4e8e\u5c06\u6574\u4e2a\u5217\u8868\u8d70\u4e86\u4e00\u904d.. \u800c\u8981\u8fdb\u884c\u591a\u5c11\u6b21\u5f52\u5e76\u64cd\u4f5c\u5462? \u6839\u636e\u56fe\u793a, \u53ef\u4ee5\u770b\u5230\u67092*logn\u6b21,\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn), \u4e8c\u53c9\u6298\u534a\u4e86\u561b. So, \u5f52\u5e76\u6392\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(nlogn). # \u5f52\u5e76\u64cd\u4f5c def merge ( li , low , mid , high ): i = low j = mid + 1 temp = [] while i <= mid and j <= high : if li [ i ] < li [ j ]: temp . append ( li [ i ]) i += 1 else : temp . append ( li [ j ]) j += 1 while i <= mid : temp . append ( li [ i ]) i += 1 while j <= high : temp . append ( li [ j ]) j += 1 li [ low : high + 1 ] = temp def merge_sort ( li , low , high ): # \u601d\u60f3: \u8ddf\u6c49\u8bfa\u5854\u7684\u5b9e\u73b0\u601d\u60f3\u4e00\u6837,\u4e0d\u8981\u7ba1\u4e2d\u95f4\u5177\u4f53\u600e\u4e48\u5b9e\u73b0\u7684.\u4fdd\u8bc1\u6709\u4e00\u4e2a\u9012\u5f52\u7ed3\u675f\u6761\u4ef6\u5373\u53ef. # \u6709\u4e00\u4e2a\u5217\u8868\u5728\u8fd9,\u5206\u4e09\u6b65\u8d70,\u5c06\u5176\u5de6\u8fb9\u6392\u597d\u5e8f,\u5c06\u5176\u53f3\u8fb9\u6392\u597d\u5e8f.\u5de6\u53f3\u4e24\u8fb9\u505a\u5f52\u5e76. # Os:\u5199\u8d77\u6765\u5f88\u7b80\u5355,\u4f46\u771f\u7684\u4e0d\u597d\u7406\u89e3(\u3064\u0414`)\u30ce # -- low < high \u6ee1\u8db3\u8be5\u6761\u4ef6\u65f6,\u4f1a\u6709\u5c06\u5217\u8868\u957f\u5ea6\u6298\u534a,\u7136\u540e\u9012\u5f52 \u9012\u5f52\u7684\u7ec8\u6b62\u6761\u4ef6low=high \u5373\u5217\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20. # \u5217\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u65f6\u5019,\u5217\u8868\u80af\u5b9a\u662f\u6709\u5e8f\u7684. \u610f\u5473\u7740\u5206\u89e3\u5b8c\u6210. \u5f00\u59cb\u5408\u5e76!! if low < high : mid = ( low + high ) // 2 merge_sort ( li , low , mid ) merge_sort ( li , mid + 1 , high ) merge ( li , low , mid , high ) if __name__ == '__main__' : li = [ 10 , 4 , 6 , 3 , 8 , 2 , 5 , 7 ] merge_sort ( li , 0 , len ( li ) - 1 ) print ( li ) # [2, 3, 4, 5, 6, 7, 8, 10] NB\u4e09\u4eba\u7ec4\u5c0f\u7ed3 \u00b6 \u4e09\u79cd\u6392\u5e8f\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f O(nlogn), \u6bd4lowB\u4e09\u4eba\u7ec4\u90fd\u8981\u5feb.. \u4e00\u822c\u60c5\u51b5\u4e0b, \u5c31\u8fd0\u884c\u65f6\u95f4\u800c\u8a00: \u5feb\u901f\u6392\u5e8f < \u5f52\u5e76\u6392\u5e8f < \u5806\u6392\u5e8f \u4e3a\u5565\u65f6\u95f4\u590d\u6742\u5ea6\u4e00\u6837, \u8fd0\u884c\u6709\u5feb\u6162\u4e4b\u5206, \u56e0\u4e3a\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u91cc\u5e38\u91cf\u7ed9\u7701\u7565\u4e86.. \u4e09\u79cd\u6392\u5e8f\u7b97\u6cd5\u7684\u7f3a\u70b9: \u5feb\u901f\u6392\u5e8f - \u6781\u7aef\u60c5\u51b5\u4e0b,\u6392\u5e8f\u6548\u7387\u4f4e. \u5012\u5e8f\u7684\u5217\u8868\u9700\u8981\u6b63\u5411\u6392\u5e8f\u65f6,\u4f7f\u7528\u5feb\u6392\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u8fbe\u5230n^2 \u5f52\u5e76\u6392\u5e8f - \u9700\u8981\u989d\u5916\u7684\u5185\u5b58\u5f00\u9500. \u4e0d\u662f\u539f\u5730\u6392\u5e8f\u7684. \u5806\u6392\u5e8f - \u5728\u8fd9\u4e09\u4e2a\u6392\u5e8f\u7b97\u6cd5\u4e2d\u76f8\u5bf9\u8f83\u6162. \u6392\u5e8f\u7b97\u6cd5 \u6700\u574f \u5e73\u5747 \u6700\u597d \u7a7a\u95f4\u590d\u6742\u5ea6 \u7a33\u5b9a\u6027 \u4ee3\u7801\u5b9e\u73b0\u96be\u6613 \u5192\u6ce1 O(n^2) O(n^2) O(n) O(1) \u7a33\u5b9a \u7b80\u5355 \u9009\u62e9 O(n^2) O(n^2) O(n^2) O(1) \u4e0d\u7a33\u5b9a \u7b80\u5355 \u63d2\u5165 O(n^2) O(n^2) O(n^2) O(1) \u7a33\u5b9a \u7b80\u5355 \u5feb\u901f O(n^2) O(nlogn) O(nlogn) \u5e73\u5747 O(logn) \u6700\u574f O(n) \u4e0d\u7a33\u5b9a \u8f83\u96be \u5806 O(nlogn) O(nlogn) O(nlogn) O(1) \u4e0d\u7a33\u5b9a \u5f88\u96be \u5f52\u5e76 O(nlogn) O(nlogn) O(nlogn) O(n) \u7a33\u5b9a \u8f83\u96be \u65f6\u95f4\u590d\u6742\u5ea6 , \u53ef\u4ee5\u5206\u4e3a \u6700\u574f\u60c5\u51b5 \u3001 \u5e73\u5747\u60c5\u51b5 \u3001 \u6700\u597d\u60c5\u51b5 \u5192\u6ce1\u6392\u5e8f , \u6700\u597d\u60c5\u51b5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ) -- \u5df2\u7ecf\u6392\u597d\u5e8f\u7684\u5217\u8868\u8fdb\u884c\u6392\u5e8f , \u4e00\u8d9f\u4e4b\u4e2d\u4e0d\u4f1a\u53d1\u751f\u4ea4\u6362 , \u53ea\u9700\u904d\u5386\u4e00\u904d . \u5feb\u901f\u6392\u5e8f , \u6700\u574f\u60c5\u51b5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ^ 2 ) -- \u5012\u5e8f\u7684\u5217\u8868\u4f7f\u7528\u5feb\u6392\u8fdb\u884c\u6392\u5e8f . \u6ce8 : \u5feb\u901f\u6392\u5e8f\u8fd8\u6709\u4e00\u4e2a\u7a7a\u95f4\u590d\u6742\u5ea6 . \u5feb\u6392\u4e0d\u662f\u539f\u5730\u6392\u5e8f\u7684\u5417 \uff1f \u6211\u4eec\u8bf4 , \u4e00\u4e2a\u7b97\u6cd5\u9700\u8981\u989d\u5916\u5f00\u8f9f\u4e00\u4e2a\u5217\u8868 , \u5219\u8be5\u7b97\u6cd5\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ); \u5f00\u8f9f\u4e00\u4e2an * n\u7684\u4e8c\u7ef4\u5217\u8868 , \u90a3\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ^ 2 ) . \u8fd8\u6709\u4e00\u79cd\u60c5\u51b5\u9700\u8981\u7528\u5230\u7a7a\u95f4 , \u662f\u9012\u5f52 !! \u9012\u5f52\u9700\u8981\u7cfb\u7edf\u5360\u7528\u7684\u7a7a\u95f4 . why ? beacuse \u9012\u5f52\u4e2d , \u51fd\u6570\u9700\u8981\u4e00\u5c42\u4e00\u5c42\u7684\u5f80\u4e0b\u8d70 , \u8d70\u5230\u4e0b\u4e00\u5c42\u65f6\u8981\u5b58\u653e\u4e0a\u4e00\u5c42\u51fd\u6570\u7684\u4f4d\u7f6e . \u6bcf\u8d70\u4e00\u5c42\u9700\u8981\u6d88\u8017O ( 1 ) \u7684\u7a7a\u95f4\u590d\u6742\u5ea6 . \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u4e00\u4e2a\u7cfb\u7edf\u8bb0\u5f55\u9012\u5f52\u8fc7\u7a0b\u4e2d\u6bcf\u4e00\u5c42\u51fd\u6570\u4f4d\u7f6e\u7684\u5217\u8868 . \u5bf9\u5feb\u6392\u800c\u8a00 , \u6211\u4eec\u63a8\u5bfc\u8fc7 , \u8981\u9012\u5f52\u8d70logn\u5c42 , So , \u5feb\u6392\u5e73\u5747\u60c5\u51b5\u4e0b\u8981\u6d88\u8017O ( logn ) \u7684\u7a7a\u95f4\u590d\u6742\u5ea6 ! \u5f53\u5feb\u6392\u5904\u4e8e\u6700\u574f\u7684\u65f6\u95f4\u590d\u6742\u5ea6O ( n ^ 2 ) \u65f6 , \u8981\u8d70n\u5c42 , So , \u5feb\u6392\u6700\u574f\u60c5\u51b5\u4e0b\u8981\u6d88\u8017O ( logn ) \u7684\u7a7a\u95f4\u590d\u6742\u5ea6 ! \u5bf9\u5f52\u5e76\u800c\u8a00 , \u8be5\u7b97\u6cd5\u7684\u5b9e\u73b0\u5df2\u7ecf\u683c\u5916\u5f00\u4e86\u4e00\u4e2a\u5217\u8868\u5566O ( n ) . \u5176\u9012\u5f52\u9700\u8981\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO ( logn ) . O ( n ) + O ( logn ) logn\u88ab\u7701\u7565\u5566 ! \u2605 \u6392\u5e8f\u7684\u7a33\u5b9a\u6027\u662f\u5f88\u91cd\u8981\u7684 !! -- \u5f53\u4e24\u4e2a\u5143\u7d20\u503c\u4e00\u6837\u7684\u65f6\u5019 , \u4fdd\u8bc1\u5b83\u4eec\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8 ! \u6bd4\u5982 , \u5bf9 [ 3 , 2 , 1 , 2 , 4 ] \u6392\u5e8f , \u7a33\u5b9a\u7684\u6392\u5e8f\u80fd\u4fdd\u8bc1\u6392\u5e8f\u540e\u539f\u5217\u8868\u4e2d\u7b2c\u4e00\u4e2a2\u4f9d\u65e7\u5728\u539f\u5217\u8868\u7684\u7b2c\u4e8c\u4e2a2\u7684\u524d\u9762 .. \u6709\u6240\u8c13\u5417 ? \u6709 . \u6bd4\u5982\u5bf9\u5b57\u5178\u7684\u6392\u5e8f . { \"name\" : 'a' , \"age\" : 18 } { \"name\" : 'b' , \"age\" : 20 } { \"name\" : 'a' , \"age\" : 25 } \u6309\u7167\u952e ` name ` \u8fdb\u884c\u6392\u5e8f . \u7a33\u5b9a\u7684\u6392\u5e8f , \u6392\u5e8f\u540e , \u80fd\u4fdd\u8bc1 { \"name\" : 'a' , \"age\" : 18 } \u4f9d\u65e7\u5728 { \"name\" : 'a' , \"age\" : 25 } \u524d\u9762 !!! \u4e0d\u7a33\u5b9a\u7684\u6392\u5e8f\u4e0d\u80fd\u4fdd\u8bc1\u8fd9\u4e00\u70b9 . \u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u6392\u5e8f\u7b97\u6cd5\u662f\u5426\u7a33\u5b9a : \u6709\u987a\u5e8f\u7684\u6328\u4e2a\u6362\u7684 , \u7a33\u5b9a ; -- \u5982\u4f55\u4fdd\u8bc1\u7684\u5462 ? \u9047\u5230\u503c\u4e00\u6837 , \u4e0d\u6362\u5c31\u884c . \u4e0d\u6328\u4e2a\u6362 , \u98de\u7740\u6362\u7684 , \u4e0d\u7a33\u5b9a . -- \u4fdd\u8bc1\u4e0d\u4e86 , \u8df3\u7740\u6362 , \u4e2d\u95f4\u53ef\u80fd\u4f1a\u6709\u4e00\u6837\u7684 . eg :[ 2 , 3 , 2 , 1 , 4 ] \u7b2c\u4e00\u4e2a2\u548c1\u4ea4\u6362 , \u4e24\u4e2a2\u7684\u76f8\u5bf9\u4f4d\u7f6e\u5c31\u53d8\u4e86 . Python\u7684sort\u5e95\u5c42\u7b97\u6cd5\u662f\u7a33\u5b9a\u7684 !!!","title":"NB\u4e09\u4eba\u7ec4"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_1","text":"\u5feb\u901f\u6392\u5e8f: \u5feb \u5feb\u901f\u6392\u5e8f\u601d\u8def: 1> \u53d6\u4e00\u4e2a\u5143\u7d20p (\u7b2c\u4e00\u4e2a\u5143\u7d20), \u4f7f\u5143\u7d20p \u5f52\u4f4d ; 2> \u5217\u8868\u88abp\u5206\u4e3a\u4e24\u90e8\u5206, \u5de6\u8fb9\u90fd\u6bd4p\u5c0f, \u53f3\u8fb9\u90fd\u6bd4p\u5927. 3> \u9012\u5f52\u5b8c\u6210\u6392\u5e8f. def partition ( li , left , right ): temp = li [ left ] while left < right : # -- \u8fd9\u5185\u5c42\u7684\u4e24\u4e2a\u5faa\u73af >= <= \u662f\u5347\u5e8f; <= >= \u662f\u964d\u5e8f. while left < right and li [ right ] >= temp : right -= 1 li [ left ] = li [ right ] while left < right and li [ left ] <= temp : left += 1 li [ right ] = li [ left ] li [ left ] = temp return left def quick_sort ( data , left , right ): if left < right : mid = partition ( data , left , right ) quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) \u65f6\u95f4\u590d\u6742\u5ea6: O(nlogn)","title":"\u5feb\u901f\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_2","text":"# \u6ce8:\u6574\u4e2a\u6392\u5e8f\u8fc7\u7a0b,data\u6307\u7684\u90fd\u662f\u6574\u4e2a\u5927\u5217\u8868.\u4e0d\u5207\u7247\u662f\u56e0\u4e3a\u5207\u7247\u9700\u8981\u8017\u8d39\u65f6\u95f4. # data\u662f\u6574\u4e2a\u5217\u8868\u3001left\u548cright\u53ef\u8868\u793a\u6574\u4e2a\u5927\u5217\u8868\u7684\u4e00\u90e8\u5206,\u8868\u793a\u8303\u56f4 def quick_sort ( data , left , right ): # left < right \u8868\u660e\u5217\u8868\u8fd9\u4e2a\u533a\u57df\u81f3\u5c11\u6709\u4e24\u4e2a\u5143\u7d20;left=right \u6709\u4e00\u4e2a\u5143\u7d20; # So,\u5bf9\u81f3\u5c11\u6709\u4e24\u4e2a\u5143\u7d20\u7684\u5217\u8868\u8fdb\u884c\u9012\u5f52!! if left < right : # \u5047\u8bbe\"\u5f52\u4f4d\"\u7684\u5b9e\u73b0\u51fd\u6570\u662fpartition # \u521a\u5f00\u59cb,left\u6307\u5411\u4e0b\u6807\u4e3a0\u7684\u4f4d\u7f6e,right\u6307\u5411\u4e0b\u6807\u4e3alen(data)-1\u7684\u4f4d\u7f6e # \u8fd4\u56demid: \u5f52\u4f4d\u4f4d\u7f6e\u7684\u4e0b\u6807,\u5217\u8868\u5c31\u4f1a\u88ab\u5206\u4e3a\u5de6\u53f3\u4e24\u90e8\u5206,\u6bcf\u4e2a\u90e8\u5206\u518d\u8fdb\u884c\u5feb\u901f\u6392\u5e8f mid = partition ( data , left , right ) # \u5f52\u4f4d\u540e,left\u548cright\u6307\u5411\u7684\u662f\u9700\u8981\u9012\u5f52\u7684\u5217\u8868\u7684\u5934\u548c\u5c3e \u9012\u5f52\u91cc\u4e5f\u4f1a\u5f52\u4f4d,\u5f52\u4f4d\u540e\u540c\u7406. quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) return li","title":"\u5feb\u6392\u6846\u67b6"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_3","text":"\u90a3\u4e48\u95ee\u9898\u6765\u5566, partition\u51fd\u6570\u5982\u4f55\u5b9e\u73b0\u5462? \u4e0b\u9762\u662f\u5f52\u4f4d\u7684\u8fc7\u7a0b\u8be6\u89e3. ` 5 ` 7 4 6 3 1 2 9 8 -- \"\u5f52\u4f4d\" --> 2 1 4 3 ` 5 ` 6 7 9 8 \u6700\u7ec8\u5f97\u8fbe\u5230 ` 5 ` \u5de6\u8fb9\u7684\u6570\u90fd\u6bd45\u5c0f , ` 5 ` \u53f3\u8fb9\u7684\u6570\u5b57\u90fd\u6bd45\u5927\u7684\u6548\u679c !! \u5148\u62ff\u4e00\u4e2a\u53d8\u91cf\u5c06 ` 5 ` \u5b58\u50a8\u8d77\u6765 \u5de6\u8fb9\u5c31\u7559\u51fa\u4e86\u4e00\u4e2a\u4f4d\u7f6e , \u5de6\u8fb9\u7684\u4f4d\u7f6e\u662f\u7559\u7ed9\u6bd45\u5c0f\u7684\u6570\u5b57\u51c6\u5907\u7684 ! 7 4 6 3 1 2 9 8 \u2b06\ufe0f \u2b06\ufe0f left right \u4ece\u54ea\u91cc\u5f00\u59cb\u627e\u5462 ? \u4ece\u53f3\u8fb9\u5f00\u59cb\u627e . 8 9 \u90fd\u6bd45\u5927 , 2 \u6bd45\u5c0f , 2 \u653e\u5230\u4e86\u5de6\u8fb9\u7684\u7a7a\u4f4d\u4e0a ! \u53f3\u8fb9\u5c31\u7559\u51fa\u4e86\u4e00\u4e2a\u4f4d\u7f6e , \u53f3\u8fb9\u7684\u4f4d\u7f6e\u662f\u7559\u7ed9\u6bd45\u5927\u7684\u6570\u5b57\u51c6\u5907\u7684 ! 2 7 4 6 3 1 9 8 \u2b06\ufe0f \u2b06\ufe0f left right \u4ece\u54ea\u91cc\u5f00\u59cb\u627e\u5462 ? \u4ece\u5de6\u8fb9\u5f00\u59cb\u627e .7 \u6bd45\u5927 , 7 \u5c31\u653e\u5230\u4e86\u53f3\u8fb9\u7684\u7a7a\u4f4d\u4e0a ! \u6b64\u65f6\u5de6\u8fb9\u53c8\u7559\u51fa\u4e86\u4e00\u4e2a\u4f4d\u7f6e . \u4ee5\u6b64\u7c7b\u63a8 . 2 4 6 3 1 7 9 8 \u2b06\ufe0f \u2b06\ufe0f left right -- right\u79fb\u52301\u7684\u4f4d\u7f6e , 1 \u9700\u8981\u586b\u8865\u5de6\u8fb9\u7a7a\u7f3a \u5373right\u4f4d\u7f6e\u4e0a\u76841\u653e\u5230left\u4f4d\u7f6e\u4e0a\u7684\u7a7a\u7f3a 2 4 6 3 1 7 9 8 - \u79fb \u2b06\ufe0f \u2b06\ufe0f left right 2 1 4 6 3 7 9 8 - \u8865 \u2b06\ufe0f \u2b06\ufe0f left right -- left\u79fb\u52306\u7684\u4f4d\u7f6e , 6 \u9700\u8981\u586b\u8865\u53f3\u8fb9\u7a7a\u7f3a 2 1 4 6 3 7 9 8 - \u79fb \u2b06\ufe0f \u2b06\ufe0f left right 2 1 4 3 6 7 9 8 - \u8865 \u2b06\ufe0f \u2b06\ufe0f left right -- right\u79fb\u52a8\u52303\u7684\u4f4d\u7f6e , 3 \u9700\u8981\u586b\u8865\u5de6\u8fb9\u7a7a\u7f3a 2 1 4 3 6 7 9 8 - \u79fb \u2b06\ufe0f \u2b06\ufe0f left right 2 1 4 3 6 7 9 8 - \u8865 \u2b06\ufe0f \u2b06\ufe0f left right ok , \u53f3\u8fb9\u7a7a\u7f3a\u4e0b\u6765\u4e86 . left\u9700\u8981\u53f3\u79fb , \u627e\u6bd45\u5927\u7684\u6570 . \u4f46left\u53f3\u79fb , left\u548cright\u91cd\u5408\u5566 !! \u6b64\u6b21 \"\u5f52\u4f4d\" \u7ed3\u675f , \u4e00\u5f00\u59cb\u7528\u53d8\u91cf\u5b58\u50a8\u7684 ` 5 ` \u653e\u5230left\u548cright\u91cd\u5408\u7684\u4f4d\u7f6e !! 2 1 4 3 ` 5 ` 6 7 9 8 \u2b06\ufe0f right left","title":"\u5f52\u4f4d\u539f\u7406"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_4","text":"partition \u51fd\u6570\u770b\u4f3c\u6709\u4e24\u4e2awhile\u5faa\u73af, \u4f46\u5b9e\u9645\u4e0a\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n) def partition ( li , left , right ): # \u6ce8:\u8fd9\u91cc\u4e0d\u8981\u5199li[0],\u56e0\u4e3a\u8fdb\u884c\u5f52\u4f4d\u7684\u5217\u8868\u53ef\u80fd\u662f\u5927\u5217\u8868\u7684\u4e00\u90e8\u5206. temp = li [ left ] print ( \"temp:\" , temp ) while left < right : # \u5f53left=right\u65f6,\u4ee3\u8868\u5f52\u4f4d\u5230\u4e86\u4e2d\u95f4\u4f4d\u7f6e,\u5faa\u73af\u624d\u4f1a\u7ed3\u675f. # \u4e00\u65e6\u5f53li[right] < temp \u65f6\u8df3\u51fa\u5faa\u73af # \u4e34\u754c\u60c5\u51b5,\u56e0\u4e3a\u5faa\u73af\u4f53\u5185,\u6bcf\u6b21\u5faa\u73afright\u90fd\u8981\u51cf1,\u5f53right\u51cf\u5230\u8ddfleft\u4e00\u6837\u65f6 \u4e5f\u9700\u8df3\u51fa\u5faa\u73af # eg: 3 4 7 5 9 10 --> temp\u7b49\u4e8e3,right\u4e00\u5f00\u59cb\u7b49\u4e8en-1=5 while left < right and li [ right ] >= temp : # \u4ece\u53f3\u8fb9\u5f00\u59cb\u627e\u6bd4temp\u5c0f\u7684\u6570 right -= 1 # right\u5f80\u5de6\u8d70\u4e00\u6b65 li [ left ] = li [ right ] # \u628a\u53f3\u8fb9\u7684\u6570\u653e\u5230\u4e86\u5de6\u8fb9\u7684\u7a7a\u4f4d\u4e0a left\u548cright\u78b0\u4e0a\u4e86\u4e5f\u6ca1\u5173\u7cfb print ( '\u5728\u53f3\u8fb9\u627e\u8865\u5de6:' , li ) # \u4e00\u65e6\u5f53li[left] > temp \u65f6\u8df3\u51fa\u5faa\u73af # \u6b64\u5904\u7684left<right\u6709\u4e24\u4e2a\u4f5c\u7528: # 1> \u5f53\u4e0a\u9762\u90a3\u4e2a\u5faa\u73af\u7684left=right\u540e,\u6b64\u5904\u7684\u5faa\u73af\u4e0d\u4f1a\u6267\u884c # 2> \u6b64\u5904\u7684\u5faa\u73af\u4e2d,left=right\u4e86,\u9000\u51fa\u6b64\u5904\u7684\u5faa\u73af while left < right and li [ left ] <= temp : # \u4ece\u5de6\u8fb9\u5f00\u59cb\u627e\u6bd4temp\u5927\u7684\u6570 left += 1 # left\u5f80\u53f3\u8d70\u4e00\u6b65 li [ right ] = li [ left ] # \u628a\u5de6\u8fb9\u7684\u6570\u653e\u5230\u4e86\u53f3\u8fb9\u7684\u7a7a\u4f4d\u4e0a left\u548cright\u78b0\u4e0a\u4e86\u4e5f\u6ca1\u5173\u7cfb print ( '\u5728\u5de6\u8fb9\u627e\u8865\u53f3:' , li ) # \u5faa\u73af\u7ed3\u675f,left\u548cright\u76f8\u7b49,\u5904\u4e8e\u5f52\u4f4d\u4f4d\u7f6e. li [ left ] = temp return left def quick_sort ( data , left , right ): if left < right : mid = partition ( data , left , right ) quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) return li if __name__ == '__main__' : li = [ 5 , 7 , 4 , 6 , 3 , 1 , 2 , 9 , 8 ] partition ( li , 0 , len ( li ) - 1 ) print ( '\u5f52\u4f4d\u7ed3\u679c\u5982\u4e0b:' , li ) \"\"\" temp: 5 # -- \"\" \u79fb\u5230/\u8d4b\u503c/\u8986\u76d6 `` \u7684\u4f4d\u7f6e. \u5728\u53f3\u8fb9\u627e\u8865\u5de6: [`2`, 7, 4, 6, 3, 1, \"2\", 9, 8] \u5728\u5de6\u8fb9\u627e\u8865\u53f3: [2, \"7\", 4, 6, 3, 1, `7`, 9, 8] \u5728\u53f3\u8fb9\u627e\u8865\u5de6: [2, `1`, 4, 6, 3, \"1\", 7, 9, 8] \u5728\u5de6\u8fb9\u627e\u8865\u53f3: [2, 1, 4, \"6\", 3, `6`, 7, 9, 8] \u5728\u53f3\u8fb9\u627e\u8865\u5de6: [2, 1, 4, `3`, \"3\", 6, 7, 9, 8] \u5728\u5de6\u8fb9\u627e\u8865\u53f3: [2, 1, 4, 3, `\"3\"`, 6, 7, 9, 8] \u5f52\u4f4d\u7ed3\u679c\u5982\u4e0b: [2, 1, 4, 3, 5, 6, 7, 9, 8] # -- \u7136\u540e\u9012\u5f52,\u5bf95\u5de6\u8fb9\u7684[2,1,4,3]\u548c\u53f3\u8fb9\u7684[6,7,9,8]\u8fdb\u884c\u5f52\u4f4d; \"\"\"","title":"\u5f52\u4f4d\u4ee3\u7801\u5b9e\u73b0"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_5","text":"import random def partition ( li , left , right ): temp = li [ left ] while left < right : # -- \u8fd9\u5185\u5c42\u7684\u4e24\u4e2a\u5faa\u73af >= <= \u662f\u5347\u5e8f; <= >= \u662f\u964d\u5e8f. while left < right and li [ right ] >= temp : right -= 1 li [ left ] = li [ right ] while left < right and li [ left ] <= temp : left += 1 li [ right ] = li [ left ] li [ left ] = temp return left def quick_sort ( data , left , right ): if left < right : mid = partition ( data , left , right ) quick_sort ( data , left , mid - 1 ) quick_sort ( data , mid + 1 , right ) li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) quick_sort ( li , 0 , len ( li ) - 1 ) print ( li ) \"\"\" [19, 20, 18, 14, 18, 9, 10, 1, 13, 8] [1, 8, 9, 10, 13, 14, 18, 18, 19, 20] \u8865\u5145 # \u6ce8:\u82e5\u60f3\u6d4b\u8bd5\u8be5\u5feb\u6392\u82b1\u8d39\u7684\u65f6\u95f4 \u76f4\u63a5\u5728quick_sort\u4e0a\u52a0\u88c5\u9970\u5668\u4f1a\u5bfc\u81f4\u6253\u5370\u5f88\u591a\u6b21,\u56e0\u4e3aquick_sort\u662f\u4e00\u4e2a\u9012\u5f52\u51fd\u6570 # \u89e3\u51b3\u529e\u6cd5:\u5957\u4e00\u4e2a\u9a6c\u7532 def _quick_sort ( data , left , right ): pass @cal_time def quick_sort ( li ): _quick_sort ( li , 0 , len ( li ) - 1 ) \u5feb\u6392\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u4e25\u8c28\u7684\u6570\u5b66\u63a8\u5bfc 16 \u4e2a\u6570 8 8 4 4 4 4 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 \u5047\u8bbe\u670916\u4e2a\u6570 , \u5f52\u4f4d\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ) \u7b2c\u4e00\u5c42 2 \u6b21\u5f52\u4f4d , \u4e3aO ( 8 ) + O ( 8 ) = O ( 16 ) \u7b2c\u4e8c\u5c42 4 \u6b21\u5f52\u4f4d , \u4e3aO ( 4 ) + O ( 4 ) + O ( 4 ) + O ( 4 ) = O ( 16 ) \u7b2c\u4e09\u5c42 \u3001 \u7b2c\u56db\u5c42\u540c\u7406 , \u6bcf\u5c42\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3aO ( n ) \u4e00\u5171\u6709\u591a\u5c11\u5c42\u5462 ? 2 ^ x = 16 x\u4e3a4 --> O ( logn ) \u5373\u5c42\u6570\u7684\u65f6\u95f4\u590d\u6742\u5ea6 * \u6bcf\u4e00\u5c42\u5f52\u4f4d\u7684\u65f6\u95f4\u590d\u6742\u5ea6 = O ( n ) * O ( logn ) = O ( nlogn )","title":"\u5feb\u6392\u4ee3\u7801\u5b9e\u73b0"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_6","text":"1 > \u5feb\u6392\u662f\u9012\u5f52\u7684 , \u4f1a\u6d88\u8017\u76f8\u5f53\u4e00\u90e8\u5206\u7cfb\u7edf\u8d44\u6e90 2 > \u5feb\u6392\u6709\u4e00\u4e2a\u6700\u574f\u60c5\u51b5\u7684\u51fa\u73b0 eg : li = [ 9 , 8 , 7 , 6 , 5 , 4 , 3 , 2 , 1 ] 9 8 7 6 5 4 3 2 1 \u2b06\ufe0f \u2b06\ufe0f left right 9 \u62ff\u51fa\u6765 , \u4eceright\u6307\u9488\u5f00\u59cb , 1 < 9 , \u4f1a\u53d8\u6210 1 8 7 6 5 4 3 2 1 , \u7136\u540e\u4eceleft\u6307\u9488\u5f00\u59cb , 8 \u3001 7 \u3001 6 \u3001 5 \u3001 4 \u3001 3 \u3001 2 \u90fd\u6bd49\u5c0f .. left\u548cright\u78b0\u5230\u4e86\u4e00\u6b21 So , \u6b64\u6b21\u5f52\u4f4d\u7684\u7ed3\u679c\u662f 1 8 7 6 5 4 3 2 9 9 \u53f3\u8fb9\u6ca1\u6709\u503c , \u90a3\u5c31\u5bf99\u5de6\u8fb9\u7684 1 8 7 6 5 4 3 2 \u8fdb\u884c\u5f52\u4f4d 1 \u62ff\u51fa\u6765 , right\u5f80\u5de6\u79fb , \u53d1\u73b0\u6240\u7ecf\u8fc7\u7684\u6570\u90fd\u6bd41\u5927 , left\u548cright\u91cd\u5408 , 1 \u53c8\u88ab\u5199\u56de\u6765\u5566 So , \u6b64\u6b21\u5f52\u4f4d\u7684\u7ed3\u679c\u662f 1 8 7 6 5 4 3 2 1 \u5de6\u8fb9\u8fb9\u6ca1\u6709\u503c , \u90a3\u5c31\u5bf91\u53f3\u8fb9\u7684 8 7 6 5 4 3 2 \u8fdb\u884c\u5f52\u4f4d ... ... \u4ee5\u6b64\u7c7b\u63a8 \u53ef\u4ee5\u53d1\u73b0 , \u5feb\u6392\u7684\u6700\u574f\u60c5\u51b5 , \u6bcf\u6b21\u5f52\u4f4d\u7684\u7ed3\u679c\u53ea\u4f1a \u5c11\u4e00\u4e2a\u6570 / \u6392\u597d\u4e00\u4e2a\u6570 , \u6240\u4ee5\u5feb\u6392\u7684\u6700\u574f\u60c5\u51b5 \u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ^ 2 ) \u4f46\u8fd9\u79cd\u6700\u574f\u60c5\u51b5 , \u51fa\u73b0\u7684\u6982\u7387\u5f88\u5c0f . \u6709\u79cd\u4e0d\u662f\u4f18\u5316\u7684\u4f18\u5316\u65b9\u6cd5 -- \u968f\u673a\u5316\u7684\u5feb\u6392 : \u5728\u4e0a\u8ff0\u7684\u8bb2\u89e3\u4e2d , \u5feb\u6392\u53d6\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u5f52\u4f4d , \u90fd\u662f\u53d6\u7684\u7b2c\u4e00\u4e2a\u6570 \u90a3\u662f\u5426\u53ef\u4ee5\u968f\u673a\u627e\u4e00\u4e2a\u503c ? \u90a3\u4e48\u6211\u4eec\u6dfb\u52a0\u4e00\u6b65 , \u5c06\u968f\u673a\u627e\u7684\u6570\u8ddf\u7b2c\u4e00\u4e2a\u6570\u4ea4\u6362\u4e00\u4e0b .. \u5176\u4f59\u7684\u6b65\u9aa4\u4e0d\u53d8 . \u53ea\u80fd\u8bf4\u8be5\u4f18\u5316\u51cf\u5c11\u4e86\u6700\u574f\u60c5\u51b5\u7684\u51fa\u73b0 .","title":"\u5feb\u6392\u7684\u95ee\u9898"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_7","text":"def sift ( li , low , high ): i = low j = 2 * i + 1 temp = li [ low ] while j <= high : # \u82e5\u5c06sift()\u4e2dwhile\u5faa\u73af\u91cc li[j + 1] > li[j] \u3001li[j] > temp \u90fd\u6539\u6210\u5c0f\u4e8e,\u5efa\u7acb\u7684\u5c31\u662f\u5c0f\u6839\u5806. # \u5c0f\u6839\u5806\u8fdb\u884c\u5806\u6392\u5e8f\u540e\u662f\u964d\u5e8f;\u5927\u6839\u5806\u8fdb\u884c\u5806\u6392\u5e8f\u540e\u662f\u5347\u5e8f. if j + 1 <= high and li [ j + 1 ] > li [ j ]: j = j + 1 if li [ j ] > temp : li [ i ] = li [ j ] i = j j = i * 2 + 1 else : break li [ i ] = temp def heap_sort ( li ): n = len ( li ) for i in range (( n - 2 ) // 2 , - 1 , - 1 ): sift ( li , i , n - 1 ) for i in range ( n - 1 , - 1 , - 1 ): li [ 0 ], li [ i ] = li [ i ], li [ 0 ] sift ( li , 0 , i - 1 ) \u65f6\u95f4\u590d\u6742\u5ea6: O(nlogn) Ps: \u5feb\u6392\u548c\u5806\u6392\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e00\u6837, \u4f46\u771f\u5b9e\u60c5\u51b5\u4e0b,\u5feb\u6392\u8981\u6bd4\u5806\u6392\u5feb\u4e00\u70b9..","title":"\u5806\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_8","text":"\u5806\u6392\u5e8f\u524d\u4f20 -- \u6811\u4e0e\u4e8c\u53c9\u6811","title":"\u57fa\u7840\u77e5\u8bc6"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_9","text":"\u6811\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784 \u6bd4\u5982:\u76ee\u5f55\u7ed3\u6784 \u6811\u662f\u4e00\u79cd\u53ef\u4ee5\u9012\u5f52\u5b9a\u4e49\u7684\u6570\u636e\u7ed3\u6784 \u6811\u662f\u7531n\u4e2a\u8282\u70b9\u7ec4\u6210\u7684\u96c6\u5408: \u5982\u679cn=0, \u90a3\u8fd9\u662f\u4e00\u68f5\u7a7a\u6811; \u5982\u679cn>0, \u90a3\u5b58\u5728\u4e00\u4e2a\u8282\u70b9\u4f5c\u4e3a\u6811\u7684\u6839\u8282\u70b9,\u5176\u5b83\u8282\u70b9\u53ef\u4ee5\u5206\u4e3am\u4e2a\u96c6\u5408,\u6bcf\u4e2a\u96c6\u5408\u7684\u672c\u8eab\u53c8\u662f\u4e00\u68f5\u6811. \u6839\u8282\u70b9 -- A \u53f6\u5b50\u7ed3\u70b9 -- B C H I P Q K L M N \u6811\u7684\u6df1\u5ea6 / \u9ad8\u5ea6 -- 4 \u5373\u770b\u6700\u6df1\u6709\u591a\u5c11\u5c42 \u8282\u70b9\u7684\u5ea6 -- E\u8282\u70b9\u5f80\u4e0b\u5206\u4e86\u4e24\u4e2a\u53c9 , \u5176\u5ea6\u4e3a2 ; F\u8282\u70b9\u5f80\u4e0b\u5206\u4e86\u4e09\u4e2a\u53c9 , \u5176\u5ea6\u4e3a3 \u6811\u7684\u5ea6 -- 6 A\u8282\u70b9\u7684\u5ea6\u4e3a6 , \u662f\u8be5\u6811\u4e2d\u8282\u70b9\u7684\u5ea6\u7684\u6700\u5927\u503c \u5b69\u5b50\u8282\u70b9 / \u7236\u8282\u70b9 -- E\u662fI\u7684\u7236\u8282\u70b9 , I\u662fE\u7684\u5b69\u5b50\u8282\u70b9 \u5b50\u6811 -- \u6574\u4f53\u662f\u4e00\u68f5\u6811 ; B\u662f\u4e00\u68f5\u6811 ; E I J P Q\u662f\u4e00\u68f5\u6811 ; I\u662f\u4e00\u68f5\u6811 ; J P Q\u662f\u4e00\u68f5\u6811 .","title":"\u6811\u7684\u6982\u5ff5"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_10","text":"\u6ce8: \u5806\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u5b8c\u5168\u4e8c\u53c9\u6811. \u4e8c\u53c9\u6811: \u5ea6\u4e0d\u8d85\u8fc72\u7684\u6811 \u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u6709\u4e24\u4e2a\u5b69\u5b50\u8282\u70b9 \u4e24\u4e2a\u5b69\u5b50\u8282\u70b9\u88ab\u533a\u5206\u4e3a\u5de6\u5b69\u5b50\u8282\u70b9\u548c\u53f3\u5b69\u5b50\u8282\u70b9 \u6ee1\u4e8c\u53c9\u6811: \u4e00\u4e2a\u4e8c\u53c9\u6811,\u82e5\u6bcf\u4e00\u5c42\u7684\u8282\u70b9\u6570\u90fd\u8fbe\u5230\u6700\u5927\u503c2, \u5219\u8fd9\u4e2a\u4e8c\u53c9\u6811\u5c31\u662f\u6ee1\u4e8c\u53c9\u6811.. \u5b8c\u5168\u4e8c\u53c9\u6811: \u53f6\u5b50\u8282\u70b9\u53ea\u80fd\u51fa\u73b0\u5728\u6700\u4e0b\u5c42\u548c\u6b21\u4e0b\u5c42, \u5e76\u4e14\u6700\u4e0b\u9762\u4e00\u5c42\u7684\u8282\u70b9\u90fd\u96c6\u4e2d\u5728\u8be5\u5c42\u6700\u5de6\u8fb9\u7684\u82e5\u5e72\u4f4d\u7f6e\u7684\u4e8c\u53c9\u6811.. \u8bf4\u4eba\u8bdd,(\u25d0\u203f\u25d1) \ufeff\u5c31\u662f\u6700\u4e0b\u9762\u4e00\u5c42\u53ef\u4ee5\u4e0d\u6ee1,\u4f46\u5fc5\u987b\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u6392\u8fc7\u6765!!","title":"\u5b8c\u5168\u4e8c\u53c9\u6811"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_11","text":"\u5373\u8ba1\u7b97\u673a\u5982\u4f55\u5b58\u50a8\u4e8c\u53c9\u6811. \u6709\u4e24\u79cd\u65b9\u5f0f. 1> \u94fe\u5f0f\u5b58\u50a8\u65b9\u5f0f 2> \u987a\u5e8f\u5b58\u50a8\u65b9\u5f0f -- \u7528\u5217\u8868\u6765\u5b58 Ps: \u8fd9\u91cc\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u987a\u5e8f\u5b58\u50a8\u65b9\u5f0f, \u94fe\u5f0f\u5b58\u50a8\u5728\u540e\u7eed\u8bb2\u8ff0\u94fe\u8868\u76f8\u5173\u77e5\u8bc6\u70b9\u4f1a\u8be6\u7ec6\u9610\u8ff0!! \u56fe\u4e2d\u5c06\u4e00\u9897 \u5b8c\u5168\u4e8c\u53c9\u6811 \u6309\u987a\u5e8f\u5b58\u50a8\u5230\u4e86\u4e00\u4e2a\u5217\u8868\u4e2d.. Q: \u7236\u8282\u70b9\u4e0e\u5de6\u5b69\u5b50\u8282\u70b9\u7684\u7f16\u53f7\u4e0b\u6807\u6709\u4ec0\u4e48\u5173\u7cfb? A: \u82e5i\u8868\u793a\u7236\u8282\u70b9\u7684\u4e0b\u6807,\u90a3\u4e48\u8be5\u7236\u8282\u70b9\u7684\u5de6\u5b69\u5b50\u8282\u70b9\u7684\u4e0b\u6807\u662f --> 2i+1 \u7236\u8282\u70b9 & \u5de6\u5b69\u5b50\u8282\u70b9 9 & 8 8 & 6 7 & 0 6 & 2 5 & 3 \u5728\u5217\u8868\u4e2d\u5bf9\u5e94\u4e0b\u6807 0 - 1 1 - 3 2 - 5 3 - 7 3 - 9 Q: \u7236\u8282\u70b9\u4e0e\u53f3\u5b69\u5b50\u8282\u70b9\u7684\u7f16\u53f7\u4e0b\u6807\u6709\u4ec0\u4e48\u5173\u7cfb? A: \u82e5i\u8868\u793a\u7236\u8282\u70b9\u7684\u4e0b\u6807,\u90a3\u4e48\u8be5\u7236\u8282\u70b9\u7684\u53f3\u5b69\u5b50\u8282\u70b9\u7684\u4e0b\u6807\u662f --> 2i+2 \u7236\u8282\u70b9 & \u53f3\u5b69\u5b50\u8282\u70b9 9 & 7 8 & 5 7 & 1 6 & 4 \u5728\u5217\u8868\u4e2d\u5bf9\u5e94\u4e0b\u6807 0 - 2 1 - 4 2 - 6 3 - 8 \u82e5\u77e5\u9053\u4efb\u610f\u5b50\u8282\u70b9( \u4e0d\u7ba1\u662f\u5de6\u5b69\u5b50\u8282\u70b9\u8fd8\u662f\u53f3\u5b69\u5b50\u8282\u70b9 )\u5728\u5217\u8868\u4e2d\u7684\u4e0b\u6807,\u90a3\u4e48\u8be5\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9\u7684\u4e0b\u6807\u4e3a (i-1)//2 \u6ce8: \u6574\u9664","title":"\u7236\u5b50\u4e92\u627e"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_12","text":"\u5806: \u5806\u7684\u903b\u8f91\u7ed3\u6784\u4e3a\u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811, \u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u7ed3\u6784. \u5927\u6839\u5806: \u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811, \u6ee1\u8db3\u4efb\u610f\u8282\u70b9\u90fd\u6bd4\u5176\u5b69\u5b50\u8282\u70b9\u5927; -- \u7236\u4eb2\u6bd4\u5b69\u5b50\u90fd\u5927 \u5c0f\u6839\u5806: \u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811, \u6ee1\u8db3\u4efb\u610f\u8282\u70b9\u90fd\u6bd4\u5176\u5b69\u5b50\u8282\u70b9\u5c0f. -- \u7236\u4eb2\u6bd4\u5b69\u5b50\u90fd\u5c0f \u6ce8: \u5806\u6392\u5e8f\u4f7f\u7528\u5927\u6839\u5806\u6392\u51fa\u6765\u7684\u662f\u589e\u5e8f\u7684!!","title":"\u5927\u5c0f\u5806"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_13","text":"\u5047\u8bbe\u6839\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u90fd\u662f\u5806, \u4f46\u6839\u8282\u70b9\u4e0d\u6ee1\u8db3\u5806\u7684\u6027\u8d28! \u53ef\u4ee5\u901a\u8fc7\u4e00\u6b21\u5411\u4e0b\u7684\u8c03\u6574\u6765\u5c06\u5176\u53d8\u6210\u4e00\u4e2a\u5806. \u8fd9\u68f5\u6811\u7684\u662f\u5b8c\u5168\u4e8c\u53c9\u6811 , \u4f46\u4e0d\u6ee1\u8db3\u5806\u7684\u6027\u8d28 . \u4e0d\u662f\u5927\u6839\u5806 \u3001 \u4e5f\u4e0d\u662f\u5c0f\u6839\u5806 . \u629b\u5f002\u8fd9\u4e2a\u6839\u8282\u70b9 , \u5b83\u7684\u5de6\u5b50\u6811 9 8 5 6 4 3 \u662f\u5927\u6839\u5806 , \u53f3\u5b50\u6811 7 0 1 \u4e5f\u662f\u5927\u6839\u5806 . \u90a3\u4e48\u53ef\u901a\u8fc7\u5411\u4e0b\u8c03\u6574\u5c06\u8fd9\u6574\u9897\u6811\u53d8\u6210\u4e00\u4e2a\u5927\u6839\u5806 . 2 < 9 2 < 7 9 > 7 9 \u4f5c\u4e3a\u6839\u8282\u70b9 2 < 8 2 < 5 8 > 5 8 \u9876\u4e0a\u53bb 2 < 6 2 < 4 6 > 4 6 \u9876\u4e0a\u53bb \u6700\u540e , 2 \u653e\u4e0a\u53bb\u4e86 , \u6b64\u5904\u6210\u4e3a\u4e86\u4e00\u4e2a\u53f6\u5b50\u7ed3\u70b9 . \u4e3e\u4e00\u53cd\u4e09 : \u82e5\u6839\u8282\u70b9\u662f\u6570\u5b577 , \u4e0d\u662f\u6570\u5b572 . \u90a3\u4e48\u5411\u4e0b\u8c03\u6574\u540e\u7684\u5927\u6839\u5806 9 8 7 7 5 0 1 6 4 3 , \u6839\u8282\u70b9\u5411\u4e0b\u8c03\u6574\u5230\u7684\u4f4d\u7f6e\u662f\u5012\u6570\u7b2c\u4e8c\u5c42 .","title":"\u5806\u7684\u5411\u4e0b\u8c03\u6574\u6027"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_14","text":"step1: \"\u519c\u6751\u5305\u56f4\u57ce\u5e02\" - \u5efa\u7acb\u5806. step2: \u5f00\u59cb\u6328\u4e2a\u6392\u5e8f. 1> \u5f97\u5230\u5806\u9876\u5143\u7d20, \u4e3a\u6700\u5927\u5143\u7d20. 2> \u53bb\u6389\u5806\u9876, \u5c06\u5806\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u653e\u5230\u5806\u9876, \u901a\u8fc7\u4e00\u6b21 \u5806\u7684\u5411\u4e0b\u8c03\u6574 \u91cd\u65b0\u4f7f\u5806\u6709\u5e8f. 3> \u5806\u9876\u5143\u7d20\u4e3a\u7b2c\u4e8c\u5927\u5143\u7d20. 4> \u91cd\u590d 2> , \u76f4\u5230\u5806\u53d8\u7a7a. # -- \u5411\u4e0b\u8c03\u6574\u7684\u8fc7\u7a0b!sift\u51fd\u6570\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn),\u5b83\u6700\u591a\u8d70\u6811\u7684\u9ad8\u5ea6\u90a3\u4e48\u591a\u5c42,\u662f\u6298\u534a\u7684\u8fc7\u7a0b. # \u56de\u987e\u4e0b\u54e6,\u5806\u7684\u5411\u4e0b\u8c03\u6574\u662f\u6839\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u90fd\u662f\u5806,\u4f46\u6839\u8282\u70b9\u4e0d\u6ee1\u8db3\u5806\u7684\u6027\u8d28 def sift ( li , low , high ): \"\"\"\u53c2\u6570 li: \u5217\u8868 low: \u5806\u7684\u6839\u8282\u70b9/\u5806\u9876\u5143\u7d20\u7684\u4f4d\u7f6e high: \u5806\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 - \u2605\u7528\u4e8e\u5224\u65ad\u6709\u6ca1\u6709\u8d8a\u754c! \"\"\" i = low # i\u521d\u59cb\u5316\u4e3a\u6839\u8282\u70b9\u7684\u4f4d\u7f6e j = 2 * i + 1 # j\u521d\u59cb\u5316\u4e3a\u5de6\u5b69\u5b50\u7684\u4f4d\u7f6e temp = li [ low ] # \u628a\u5806\u9876\u5143\u7d20\u5b58\u8d77\u6765 # \u7b80\u5355\u9610\u8ff0\u5faa\u73af\u7684\u8fc7\u7a0b: # \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u5c06\u6839\u8282\u70b9\u7684\u5143\u7d20\u62ff\u5f00, \u7a7a\u4e86\u4e2a\u4f4d\u7f6e.\u9700\u8981\u4e0b\u4e00\u5c42\u6bd4\u8f83\u5927\u7684\u6570\u9876\u4e0a\u6765. # \u4e0b\u4e00\u5c42\u7684\u5143\u7d20\u9876\u4e0a\u6765\u540e, \u53c8\u7a7a\u4e86\u4e2a\u4f4d\u7f6e.\u9700\u8981\u770b\u4e0b\u4e00\u5c42\u8f83\u5927\u7684\u5b69\u5b50\u4e0e\u6682\u5b58\u7684\u6839\u8282\u70b9\u5143\u7d20\u6bd4\u8f83,\u5927\u70b9\u7684\u5f25\u8865\u4e0a\u53bb. # \u4ee5\u6b64\u7c7b\u63a8.. # \u9000\u51fa\u5faa\u73af\u7684\u6761\u4ef6: # \u60c5\u51b51:\u82e5i\u7684\u5b69\u5b50j\u7684\u4f4d\u7f6e\u5927\u4e8e\u5806\u6700\u540e\u5143\u7d20\u7684\u4e0b\u6807,\u90a3\u8bc1\u660ei\u5143\u7d20\u662f\u53f6\u5b50\u8282\u70b9,\u5b83\u6ca1\u6709\u5b69\u5b50.\u9000\u51fa\u5faa\u73af. # \u4e5f\u5c31\u662f\u8bf4,\u770bj\u7684\u4f4d\u7f6e\u6709\u65e0\u8d8a\u754c.\u82e5\u6ca1\u6709\u8d8a\u754c,\u5faa\u73af\u7ee7\u7eed. # \u60c5\u51b52:\u5728\u5faa\u73af\u7684\u8fc7\u7a0b\u4e2d,\u6682\u5b58\u7684\u6839\u8282\u70b9\u5143\u7d20\u627e\u5230\u4e86\u5408\u9002\u7684\u4f4d\u7f6e.\u9000\u51fa\u5faa\u73af. # \u9000\u51fa\u5faa\u73af\u540e: # \u5c06\u6682\u5b58\u7684\u6839\u8282\u70b9\u5143\u7d20\u653e\u5230\u5408\u9002\u7684\u4f4d\u7f6e # while\u5faa\u73af\u6b63\u5e38\u6267\u884c\u5b8c - \u67d0\u4e00\u7ea7\u7684\u9886\u5bfc\u4f4d\u7f6e\u4e0a; while\u5faa\u73af\u9047\u5230break\u9000\u51fa - \u53f6\u5b50\u8282\u70b9. while j <= high : # \u53f3\u5b69\u5b50\u5b58\u5728\u4e14\u53f3\u5b69\u5b50\u6bd4\u5de6\u5b69\u5b50\u5927,j\u6307\u5411\u53f3\u5b69\u5b50 if j + 1 <= high and li [ j + 1 ] > li [ j ]: j = j + 1 if li [ j ] > temp : li [ i ] = li [ j ] # \u8f83\u5927\u7684\u5b69\u5b50\u8282\u70b9\u9876\u4e0a\u53bb\u5566 # \u56e0\u4e3a\u5b69\u5b50\u8282\u70b9\u9876\u4e0a\u53bb\u4e86,i\u5f97\u6307\u5411\u65b0\u7684\u7a7a\u4f4d\u7f6e,\u6240\u4ee5\u8fd9\u91cc\u9700\u8981\u66f4\u65b0\u4e0bi\u548cj i = j j = i * 2 + 1 else : # li[j] <= temp temp\u627e\u5230\u4e86\u5408\u9002\u7684\u4f4d\u7f6e,\u9000\u51fa\u5faa\u73af # ps:\u5176\u5b9e\u6211\u5bf9\u4e8eli[j]=temp\u7684\u60c5\u51b5\u5b58\u5728\u7591\u60d1,\u4eba\u4e3a\u53ef\u4ee5\u6784\u9020\u8fd9\u79cd\u60c5\u51b5,\u5806\u6392\u5e8f\u8fc7\u7a0b\u4e2d\u4f1a\u51fa\u73b0\u8be5\u60c5\u51b5\u5417? # \u6bd4\u5982\u6211\u53ef\u4ee5\u4eba\u4e3a\u6784\u9020\u8fd9\u6837\u4e00\u9897\u6811[8, 9, 7, 8, 5, 0, 1, 6, 4, 3],\u5411\u4e0b\u8c03\u6574. # \u5176\u8c03\u6574\u7ed3\u679c\u662f[9, 8, 7, 8, 5, 0, 1, 6, 4, 3]. break # print('\u8fc7\u7a0b\u4e2d:', li) # \u9000\u51fa\u5faa\u73af,temp\u653e\u5230\u4e86\u5408\u9002\u7684\u4f4d\u7f6e li [ i ] = temp def heap_sort ( li ): # \u6211\u4eec\u6653\u5f97 \u901a\u8fc7\u5b69\u5b50\u8282\u70b9\u7684\u4e0b\u6807i\u80fd\u63a8\u5bfc\u51fa\u7236\u8282\u70b9\u7684\u4e0b\u6807 --> (i-1)//2 # \u6211\u4eec\u4e5f\u77e5\u9053,\u6700\u540e\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u7684\u4e0b\u6807\u4e3an-1 <n\u4e3a\u5217\u8868\u5143\u7d20\u7684\u4e2a\u6570/\u6811\u7684\u8282\u70b9\u4e2a\u6570> # \u90a3\u4e48\u6c42\u6811\u4e2d\u6700\u540e\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u7684\u4e0b\u6807 --> (n-1-1)//2 \u5373 n//2 -1 n = len ( li ) # \"\u519c\u6751\u5305\u56f4\u57ce\u5e02\" # \u4f9d\u6b21<\u4ece\u6700\u540e\u4e00\u4e2a\u5230\u7b2c\u4e00\u4e2a>\u5bf9\u6811\u4e2d\u6bcf\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u4f5c\u4e3a\u6839\u8282\u70b9\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u8fdb\u884c\u5411\u4e0b\u8c03\u6574,\u5c06\u5176\u53d8\u6210\u4e00\u4e2a\u5806 # \u25b2 \u8be5for\u7ed3\u675f\u540e,\u5efa\u5806\u5b8c\u6210!! # -- \u25ce \u82e5\u5c06sift()\u4e2dwhile\u5faa\u73af\u91cc li[j + 1] > li[j] \u3001li[j] > temp \u90fd\u6539\u6210\u5c0f\u4e8e,\u5efa\u7acb\u7684\u5c31\u662f\u5c0f\u6839\u5806. for i in range (( n - 2 ) // 2 , - 1 , - 1 ): # \u6ce8\u610f,\u5148\u660e\u786e\u6b64\u5904sift\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570,\u662f\u7528\u6765\u5224\u65ad\u6709\u65e0\u8d8a\u754c\u7684! # \u601d\u8def1: # \u5f88\u6b63\u5e38\u7684,\u6211\u4eec\u4f1a\u60f3\u7740\u6c42\u4ece\u5927\u6811\u91cc\u5256\u79bb\u51fa\u7684\u6bcf\u4e2a\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 # \u8be5\u4e0b\u6807\u4f5c\u4e3asift\u51fd\u6570\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u7684\u503c,\u6211\u4eec\u5047\u8bbe\u4e3ax # \u601d\u8def2: # \u518d\u6362\u4e2a\u601d\u8def,\u7528\u6700\u540e\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u4e0b\u6807 n-1 # \u5206\u6790\u6bd4\u8f83: # \u6c42\u5f97\u4e0b\u6807\u4e3ai\u7684\u8282\u70b9\u7684\u5de6\u5b69\u5b50\u8282\u70b9\u4e0b\u6807 j = 2*i + 1 # So, [\u82e5\u8d8a\u754c] j>x \u3001j>n-1 \u3001n-1>x --> j > n-1 > x # \u2605 \u5173\u952e\u5728\u4e8e \u8d8a\u754c\u65f6, j > n - 1 # \u8fd9\u91cc\u4ee5n-1\u4f5c\u4e3a\u6bcf\u68f5\u5b8c\u5168\u4e8c\u53c9\u6811\u6709\u65e0\u8d8a\u754c\u7684\u5224\u65ad\u6761\u4ef6,\u4e5f\u8bb8\u4f60\u4f1a\u95ee,\u4e07\u4e00,\u8d8a\u754c\u65f6,j\u5904\u4e8ex\u548cn-1\u4e4b\u95f4\u5462? # >: \u4f60\u653e\u4e00\u4e07\u4e2a\u5fc3,\u56e0\u4e3a\u6574\u9897\u5927\u6811\u662f\u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811!!\u8d8a\u754c\u65f6\u5019,j\u4e00\u5b9a\u5927\u4e8en-1!!! sift ( li , i , n - 1 ) # print(f\"\u5012\u6570\u7b2c{i+1}\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u6784\u5efa\u5806\u7684\u7ed3\u679c:\", li) # \u25b2 \u5efa\u5806\u5b8c\u6210\u540e, \u5f00\u59cb\u6328\u4e2a\u6392\u5e8f. # \u2605 \u5728\u8be5\u5faa\u73af\u8fc7\u7a0b\u4e2d,i\u4e00\u76f4\u6307\u5411\u5f53\u524d\u5806\u4e2d\u8981\u4e0e\u6839\u8282\u70b9\u5143\u7d20\u4ea4\u6362\u7684\u90a3\u4e00\u4e2a\u5143\u7d20!!! for i in range ( n - 1 , - 1 , - 1 ): li [ 0 ], li [ i ] = li [ i ], li [ 0 ] # \u90fd\u662f\u5bf9\u6574\u4e2a\u5806\u7684\u8c03\u6574!! # \u6ce8:\u8fd9\u91cc\u5806\u7684\u5411\u4e0b\u8c03\u6574,\u8981\u6392\u9664\u6389\u4ea4\u6362\u4e0b\u6765\u7684\u90a3\u4e2a\u5806\u9876\u5143\u7d20.. So,\u8fd9\u91ccsift\u7684\u53c2\u6570high\u7684\u503c\u662fi-1 sift ( li , 0 , i - 1 ) # \u5f53i=0\u65f6,sift\u51fd\u6570\u5185\u90e8\u4e5f\u662f\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u7684,\u65e0\u9700\u52a0\u5224\u65ad. # print(f\"\u6392\u5e8f\u8fc7\u7a0b\", li) if __name__ == '__main__' : import random li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( li ) heap_sort ( li ) print ( li ) \"\"\" [15, 7, 18, 12, 6, 7, 16, 6, 17, 9] [6, 6, 7, 7, 9, 12, 15, 16, 17, 18] \"\"\"","title":"\u5806\u6392\u5e8f\u8fc7\u7a0b"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_15","text":"Python\u5185\u7f6e\u6a21\u5757 -- heapq \u5e38\u7528\u51fd\u6570: heapify(x) heappush(heap, item) heappop(heap) import heapq # q\u6307\u7684\u662fqueue \u4f18\u5148\u961f\u5217 import random li = [ random . randint ( 0 , 20 ) for _ in range ( 10 )] print ( \"\u521d\u59cb\u503c:\" , li ) heapq . heapify ( li ) # \u5efa\u5806,\u9ed8\u8ba4\u662f\u5c0f\u5806 print ( \"\u5efa\u5806\u540e:\" , li ) li_sort = [] for _ in range ( len ( li )): li_sort . append ( heapq . heappop ( li )) print ( \"\u6392\u5e8f\u540e:\" , li_sort ) \"\"\" \u521d\u59cb\u503c: [15, 2, 9, 15, 5, 3, 12, 19, 6, 13] \u5efa\u5806\u540e: [2, 5, 3, 6, 13, 9, 12, 19, 15, 15] \u6392\u5e8f\u540e: [2, 3, 5, 6, 9, 12, 13, 15, 15, 19] \"\"\"","title":"\u5806\u6392\u5e8f\u5185\u7f6e\u6a21\u5757"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#topk","text":"\u73b0\u5728\u6709n\u4e2a\u6570, \u4f60\u8981\u8bbe\u8ba1\u7b97\u6cd5\u5f97\u5230\u524dk\u5927\u7684\u6570. (k<n) \u89e3\u51b3\u601d\u8def: O(nlogn) ; O(nk) ; O(nlogk) >> \u601d\u8def\u4e00 \u5feb\u901f\u6392\u5e8f\u540e\u5207\u7247 -- O ( nlogn + k ) \u56db\u820d\u4e94\u5165 O ( nlogn ) >> \u601d\u8def\u4e8c \u4f7f\u7528lowB\u4e09\u4eba\u7ec4 -- O ( nk ) \u5192\u6ce1\u6392\u5e8f\u548c\u9009\u62e9\u6392\u5e8f\u6709\u4e00\u4e2a\u7279\u70b9 , \u5faa\u73af\u4e00\u6b21\u5c31\u80fd\u5f97\u5230\u4e00\u4e2a \u6700\u5927 / \u6700\u5c0f \u7684\u6570 , \u5faa\u73afk\u6b21\u5373\u53ef . \u63d2\u5165\u6392\u5e8f , \u7ef4\u62a4\u4e00\u4e2a\u957f\u5ea6\u4e3ak\u7684\u5217\u8868 , \u6765\u4e00\u4e2a\u5c31\u653e\u8fdb\u53bb , \u4f46\u8981\u6839\u636e\u63d2\u5165\u6392\u5e8f\u7684\u89c4\u5219\u4fdd\u8bc1\u5217\u8868\u4e2d\u7684\u5143\u7d20\u662f\u6392\u5e8f\u597d . \u7ef4\u62a4\u7684\u5217\u8868\u91cc\u6709k\u4e2a\u5143\u7d20\u540e , \u7ee7\u7eed\u63d2\u5165 , \u9700\u8981\u5224\u65ad . \u82e5\u6bd4\u7ef4\u62a4\u7684\u5217\u8868\u4e2d\u7b2ck\u5927\u7684\u6570\u5927 , \u5c31\u63d2\u8fdb\u53bb . \u63d2\u5230\u5408\u9002\u7684\u4f4d\u7f6e ( \u4fdd\u8bc1\u7ef4\u62a4\u7684\u5217\u8868\u6709\u5e8f ), \u88ab\u6324\u51fa\u6765\u7684\u5143\u7d20\u820d\u5f03\u6389 . \u5373\u8bd5\u56fe\u63d2\u5165n\u4e2a\u6570 , \u4f46\u5217\u8868\u957f\u5ea6\u6709\u9650 , \u4e3ak , \u82e5\u80fd\u63d2\u5165 , \u63d2\u5165\u65f6\u6700\u574f\u60c5\u51b5\u9700\u8981\u904d\u5386\u4e00\u904d\u7ef4\u62a4\u7684\u5217\u8868 , \u4fdd\u8bc1\u91cc\u9762\u7684k\u4e2a\u5143\u7d20\u6709\u5e8f . \u6700\u574f\u65f6 , n\u4e2a\u6570\u90fd\u8981\u63d2\u8fdb\u53bb , \u63d2\u5165\u7684\u4f4d\u7f6e\u90fd\u8981\u5c06\u7ef4\u62a4\u7684\u5217\u8868\u904d\u5386\u4e00\u904d . So , O ( nk ) \u8ddf\u601d\u8def\u4e00\u76f8\u6bd4 , \u601d\u8def\u4e8c\u66f4\u597d , \u56e0\u4e3a\u601d\u8def\u4e8c\u4e0d\u4f1a\u628a\u6240\u6709\u7684\u90fd\u6392\u4e00\u904d . \u601d\u8def\u4e00\u548c\u601d\u8def\u4e8c\u8c01\u66f4\u5feb , \u53d6\u51b3\u4e8e k\u548clogn\u7684\u5927\u5c0f . >> \u601d\u8def\u4e09 \u4f7f\u7528\u5806\u6392\u5e8f -- O ( nlogk ) step1 > \u53d6\u5217\u8868\u524dk\u4e2a\u6570\u5efa\u7acb\u4e00\u4e2a\u5c0f\u6839\u5806 . \u5806\u9876\u5c31\u662f\u76ee\u524d\u7b2ck\u4e2a\u5927\u7684\u6570 step2 > \u4f9d\u6b21\u5f80\u540e\u904d\u5386\u539f\u5217\u8868 , \u5bf9\u4e8e\u5217\u8868\u4e2d\u7684\u5143\u7d20 . \u82e5\u5c0f\u4e8e\u5806\u9876 , \u5219\u5ffd\u7565\u8be5\u5143\u7d20 ; \u82e5\u5927\u4e8e\u5806\u9876 , \u5219\u5c06\u5806\u9876\u66f4\u6362\u4e3a\u8be5\u5143\u7d20 , \u5e76\u4e14\u5bf9\u5806\u8fdb\u884c\u4e00\u6b21\u8c03\u6574 . step3 > \u904d\u5386\u5217\u8868\u6240\u6709\u5143\u7d20\u540e , \u5012\u5e8f\u5f39\u51fa\u5806\u9876 . \u7b80\u5355\u7406\u89e3 , \u6700\u574f\u60c5\u51b5\u5c31\u662f\u8fdb\u884c\u4e86n\u6b21\u5411\u4e0b\u8c03\u6574 , \u8fd9\u91cc\u5bf9k\u4e2a\u5143\u7d20\u5411\u4e0b\u8c03\u6574 , \u5176\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( logk ), \u8fdb\u884cn\u6b21 , \u5c31\u662fO ( nlogk ) \u6700\u540e\u5bf9k\u4e2a\u5143\u7d20\u7684\u5c0f\u6839\u5806\u8fdb\u884c\u6392\u5e8f , \u53ef\u4ee5\u56db\u820d\u4e94\u5165\u5ffd\u7565\u4e0d\u8ba1 . \u4ee3\u7801\u5b9e\u73b0: def sift ( li , low , high ): i = low j = 2 * i + 1 temp = li [ low ] while j <= high : if j + 1 <= high and li [ j + 1 ] < li [ j ]: j = j + 1 if li [ j ] < temp : li [ i ] = li [ j ] i = j j = i * 2 + 1 else : break li [ i ] = temp def topk ( li , k ): heap = li [ 0 : k ] # \u53d6\u51fa\u5217\u8868\u7684\u524dk\u4e2a\u503c # step1: \u5bf9\u53d6\u51fa\u6765\u7684k\u4e2a\u503c\u5efa\u5806 for i in range (( k - 2 ) // 2 , - 1 , - 1 ): sift ( heap , i , k - 1 ) # step2: \u904d\u5386\u5217\u8868\u4e2d\u5269\u4f59\u7684\u6240\u6709\u5143\u7d20 for i in range ( k , len ( li )): # \u6bd4\u8f83\u5217\u8868\u4e2d\u5269\u4e0b\u7684\u5143\u7d20\u4e0e\u5c0f\u6839\u5806\u5806\u9876\u5143\u7d20\u7684\u5927\u5c0f if li [ i ] > heap [ 0 ]: # \u82e5\u6bd4\u5806\u9876\u5927 heap [ 0 ] = li [ i ] # \u8986\u76d6 sift ( heap , 0 , k - 1 ) # \u505a\u8c03\u6574 # step3: \u6328\u4e2a\u8f93\u51fa for i in range ( k - 1 , - 1 , - 1 ): heap [ 0 ], heap [ i ] = heap [ i ], heap [ 0 ] sift ( heap , 0 , i - 1 ) return heap li = [ 6 , 8 , 1 , 9 , 3 , 0 , 7 , 2 , 4 , 5 ] print ( topk ( li , 5 )) # [9, 8, 7, 6, 5]","title":"topk\u95ee\u9898!!"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_16","text":"def merge ( li , low , mid , high ): i = low j = mid + 1 temp = [] while i <= mid and j <= high : # li[i] < li[j]\u662f\u5347\u5e8f;li[i] > li[j]\u662f\u964d\u5e8f. if li [ i ] < li [ j ]: temp . append ( li [ i ]) i += 1 else : temp . append ( li [ j ]) j += 1 while i <= mid : temp . append ( li [ i ]) i += 1 while j <= high : temp . append ( li [ j ]) j += 1 li [ low : high + 1 ] = temp def merge_sort ( li , low , high ): if low < high : mid = ( low + high ) // 2 merge_sort ( li , low , mid ) merge_sort ( li , mid + 1 , high ) merge ( li , low , mid , high ) \u65f6\u95f4\u590d\u6742\u5ea6: O(nlogn) \u8fd8\u9700\u8981O(n)\u7684\u7a7a\u95f4, \u6700\u5927\u65f6, \u9700\u8981\u4e00\u4e2a\u6392\u5e8f\u5217\u8868\u957f\u5ea6\u7684\u5217\u8868\u8fdb\u884c\u8f85\u52a9!! \u5373\u7a7a\u95f4\u590d\u6742\u5ea6 O(n) Python\u5185\u7f6e\u51fd\u6570sort\u7684\u5e95\u5c42\u662f \u57fa\u4e8e\u5f52\u5e76\u6392\u5e8f\u7ed3\u5408\u63d2\u5165\u6392\u5e8f\u5e76\u505a\u4e86\u4e00\u4e9b\u4f18\u5316 \u5b9e\u73b0\u7684!! -- Tim\u6392\u5e8f\u7b97\u6cd5","title":"\u5f52\u5e76\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_17","text":"\u5047\u8bbe\u73b0\u5728\u7684\u5217\u8868\u5206\u4e24\u6bb5\u6709\u5e8f, \u5982\u4f55\u5c06\u5176\u5408\u6210\u4e3a\u4e00\u4e2a\u6709\u5e8f\u5217\u8868? -- \u8fd9\u79cd\u64cd\u4f5c\u79f0\u4e3a\u4e00\u6b21\u5f52\u5e76!! eg: [2,5,7, 1,3] \u4ee3\u7801\u5b9e\u73b0\u5f52\u5e76\u64cd\u4f5c. # \u5f52\u5e76\u7684\u524d\u63d0\u662f\u4e00\u4e2a\u5217\u8868\u5305\u542b\u5de6\u53f3\u4e24\u90e8\u5206\u6709\u5e8f\u7684\u5217\u8868 def merge ( li , low , mid , high ): i = low j = mid + 1 temp = [] # -- \u8be5while\u5faa\u73af\u6267\u884c\u5b8c,\u5de6\u53f3\u80af\u5b9a\u6709\u4e00\u8fb9\u6ca1\u6709\u6570\u5566! while i <= mid and j <= high : # \u4fdd\u8bc1\u5de6\u53f3\u4e24\u8fb9\u90fd\u6709\u6570 if li [ i ] < li [ j ]: temp . append ( li [ i ]) i += 1 else : temp . append ( li [ j ]) j += 1 # -- \u4e0b\u65b9\u7684\u4e24\u4e2awhile,\u53ea\u4f1a\u6709\u4e00\u4e2a\u6267\u884c! # \u82e5\u5de6\u8fb9\u8fd8\u6709\u6570,\u5c06\u5de6\u8fb9\u7684\u6570\u4f9d\u6b21\u6dfb\u52a0\u5230\u4e34\u65f6\u5217\u8868temp\u4e2d while i <= mid : temp . append ( li [ i ]) i += 1 # \u82e5\u53f3\u8fb9\u8fd8\u6709\u6570,\u5c06\u53f3\u8fb9\u7684\u6570\u4f9d\u6b21\u6dfb\u52a0\u5230\u4e34\u65f6\u5217\u8868temp\u4e2d while j <= high : temp . append ( li [ j ]) j += 1 # -- \u5c06temp\u5217\u8868\u91cc\u7684\u503c\u5199\u56de\u5230li\u5217\u8868\u4e2d li [ low : high + 1 ] = temp # \u5229\u7528\u5207\u7247,\u5207\u7247\u53ef\u4ee5\u5f80\u56de\u5199 if __name__ == '__main__' : li = [ 2 , 5 , 7 , 1 , 3 ] merge ( li , 0 , 2 , 4 ) print ( li ) # [1, 2, 3, 5, 7]","title":"\u5f52\u5e76\u64cd\u4f5c"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#_18","text":"\u5206\u89e3: \u5c06\u5217\u8868\u8d8a\u5206\u8d8a\u5c0f, \u76f4\u81f3\u5206\u6210\u4e00\u4e2a\u5143\u7d20. \u7ec8\u6b62\u6761\u4ef6: \u4e00\u4e2a\u5143\u7d20\u662f\u6709\u5e8f\u7684. \u5408\u5e76: \u5c06\u4e24\u4e2a\u6709\u5e8f\u5217\u8868\u5f52\u5e76, \u5217\u8868\u8d8a\u6765\u8d8a\u5927. \u6bcf\u6b21\u5f52\u5e76\u64cd\u4f5c,\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(n),\u53ef\u4ee5\u7406\u89e3\u6210\u5de6\u8fb9\u7684i\u8d70\u5b8c,\u53f3\u8fb9\u7684j\u8d70\u5b8c,\u76f8\u5f53\u4e8e\u5c06\u6574\u4e2a\u5217\u8868\u8d70\u4e86\u4e00\u904d.. \u800c\u8981\u8fdb\u884c\u591a\u5c11\u6b21\u5f52\u5e76\u64cd\u4f5c\u5462? \u6839\u636e\u56fe\u793a, \u53ef\u4ee5\u770b\u5230\u67092*logn\u6b21,\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn), \u4e8c\u53c9\u6298\u534a\u4e86\u561b. So, \u5f52\u5e76\u6392\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(nlogn). # \u5f52\u5e76\u64cd\u4f5c def merge ( li , low , mid , high ): i = low j = mid + 1 temp = [] while i <= mid and j <= high : if li [ i ] < li [ j ]: temp . append ( li [ i ]) i += 1 else : temp . append ( li [ j ]) j += 1 while i <= mid : temp . append ( li [ i ]) i += 1 while j <= high : temp . append ( li [ j ]) j += 1 li [ low : high + 1 ] = temp def merge_sort ( li , low , high ): # \u601d\u60f3: \u8ddf\u6c49\u8bfa\u5854\u7684\u5b9e\u73b0\u601d\u60f3\u4e00\u6837,\u4e0d\u8981\u7ba1\u4e2d\u95f4\u5177\u4f53\u600e\u4e48\u5b9e\u73b0\u7684.\u4fdd\u8bc1\u6709\u4e00\u4e2a\u9012\u5f52\u7ed3\u675f\u6761\u4ef6\u5373\u53ef. # \u6709\u4e00\u4e2a\u5217\u8868\u5728\u8fd9,\u5206\u4e09\u6b65\u8d70,\u5c06\u5176\u5de6\u8fb9\u6392\u597d\u5e8f,\u5c06\u5176\u53f3\u8fb9\u6392\u597d\u5e8f.\u5de6\u53f3\u4e24\u8fb9\u505a\u5f52\u5e76. # Os:\u5199\u8d77\u6765\u5f88\u7b80\u5355,\u4f46\u771f\u7684\u4e0d\u597d\u7406\u89e3(\u3064\u0414`)\u30ce # -- low < high \u6ee1\u8db3\u8be5\u6761\u4ef6\u65f6,\u4f1a\u6709\u5c06\u5217\u8868\u957f\u5ea6\u6298\u534a,\u7136\u540e\u9012\u5f52 \u9012\u5f52\u7684\u7ec8\u6b62\u6761\u4ef6low=high \u5373\u5217\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20. # \u5217\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u65f6\u5019,\u5217\u8868\u80af\u5b9a\u662f\u6709\u5e8f\u7684. \u610f\u5473\u7740\u5206\u89e3\u5b8c\u6210. \u5f00\u59cb\u5408\u5e76!! if low < high : mid = ( low + high ) // 2 merge_sort ( li , low , mid ) merge_sort ( li , mid + 1 , high ) merge ( li , low , mid , high ) if __name__ == '__main__' : li = [ 10 , 4 , 6 , 3 , 8 , 2 , 5 , 7 ] merge_sort ( li , 0 , len ( li ) - 1 ) print ( li ) # [2, 3, 4, 5, 6, 7, 8, 10]","title":"\u9012\u5f52\u4f7f\u7528\u5f52\u5e76"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/2_NB%E4%B8%89%E4%BA%BA%E7%BB%84/#nb","text":"\u4e09\u79cd\u6392\u5e8f\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f O(nlogn), \u6bd4lowB\u4e09\u4eba\u7ec4\u90fd\u8981\u5feb.. \u4e00\u822c\u60c5\u51b5\u4e0b, \u5c31\u8fd0\u884c\u65f6\u95f4\u800c\u8a00: \u5feb\u901f\u6392\u5e8f < \u5f52\u5e76\u6392\u5e8f < \u5806\u6392\u5e8f \u4e3a\u5565\u65f6\u95f4\u590d\u6742\u5ea6\u4e00\u6837, \u8fd0\u884c\u6709\u5feb\u6162\u4e4b\u5206, \u56e0\u4e3a\u5c06\u65f6\u95f4\u590d\u6742\u5ea6\u91cc\u5e38\u91cf\u7ed9\u7701\u7565\u4e86.. \u4e09\u79cd\u6392\u5e8f\u7b97\u6cd5\u7684\u7f3a\u70b9: \u5feb\u901f\u6392\u5e8f - \u6781\u7aef\u60c5\u51b5\u4e0b,\u6392\u5e8f\u6548\u7387\u4f4e. \u5012\u5e8f\u7684\u5217\u8868\u9700\u8981\u6b63\u5411\u6392\u5e8f\u65f6,\u4f7f\u7528\u5feb\u6392\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u8fbe\u5230n^2 \u5f52\u5e76\u6392\u5e8f - \u9700\u8981\u989d\u5916\u7684\u5185\u5b58\u5f00\u9500. \u4e0d\u662f\u539f\u5730\u6392\u5e8f\u7684. \u5806\u6392\u5e8f - \u5728\u8fd9\u4e09\u4e2a\u6392\u5e8f\u7b97\u6cd5\u4e2d\u76f8\u5bf9\u8f83\u6162. \u6392\u5e8f\u7b97\u6cd5 \u6700\u574f \u5e73\u5747 \u6700\u597d \u7a7a\u95f4\u590d\u6742\u5ea6 \u7a33\u5b9a\u6027 \u4ee3\u7801\u5b9e\u73b0\u96be\u6613 \u5192\u6ce1 O(n^2) O(n^2) O(n) O(1) \u7a33\u5b9a \u7b80\u5355 \u9009\u62e9 O(n^2) O(n^2) O(n^2) O(1) \u4e0d\u7a33\u5b9a \u7b80\u5355 \u63d2\u5165 O(n^2) O(n^2) O(n^2) O(1) \u7a33\u5b9a \u7b80\u5355 \u5feb\u901f O(n^2) O(nlogn) O(nlogn) \u5e73\u5747 O(logn) \u6700\u574f O(n) \u4e0d\u7a33\u5b9a \u8f83\u96be \u5806 O(nlogn) O(nlogn) O(nlogn) O(1) \u4e0d\u7a33\u5b9a \u5f88\u96be \u5f52\u5e76 O(nlogn) O(nlogn) O(nlogn) O(n) \u7a33\u5b9a \u8f83\u96be \u65f6\u95f4\u590d\u6742\u5ea6 , \u53ef\u4ee5\u5206\u4e3a \u6700\u574f\u60c5\u51b5 \u3001 \u5e73\u5747\u60c5\u51b5 \u3001 \u6700\u597d\u60c5\u51b5 \u5192\u6ce1\u6392\u5e8f , \u6700\u597d\u60c5\u51b5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ) -- \u5df2\u7ecf\u6392\u597d\u5e8f\u7684\u5217\u8868\u8fdb\u884c\u6392\u5e8f , \u4e00\u8d9f\u4e4b\u4e2d\u4e0d\u4f1a\u53d1\u751f\u4ea4\u6362 , \u53ea\u9700\u904d\u5386\u4e00\u904d . \u5feb\u901f\u6392\u5e8f , \u6700\u574f\u60c5\u51b5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ^ 2 ) -- \u5012\u5e8f\u7684\u5217\u8868\u4f7f\u7528\u5feb\u6392\u8fdb\u884c\u6392\u5e8f . \u6ce8 : \u5feb\u901f\u6392\u5e8f\u8fd8\u6709\u4e00\u4e2a\u7a7a\u95f4\u590d\u6742\u5ea6 . \u5feb\u6392\u4e0d\u662f\u539f\u5730\u6392\u5e8f\u7684\u5417 \uff1f \u6211\u4eec\u8bf4 , \u4e00\u4e2a\u7b97\u6cd5\u9700\u8981\u989d\u5916\u5f00\u8f9f\u4e00\u4e2a\u5217\u8868 , \u5219\u8be5\u7b97\u6cd5\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ); \u5f00\u8f9f\u4e00\u4e2an * n\u7684\u4e8c\u7ef4\u5217\u8868 , \u90a3\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO ( n ^ 2 ) . \u8fd8\u6709\u4e00\u79cd\u60c5\u51b5\u9700\u8981\u7528\u5230\u7a7a\u95f4 , \u662f\u9012\u5f52 !! \u9012\u5f52\u9700\u8981\u7cfb\u7edf\u5360\u7528\u7684\u7a7a\u95f4 . why ? beacuse \u9012\u5f52\u4e2d , \u51fd\u6570\u9700\u8981\u4e00\u5c42\u4e00\u5c42\u7684\u5f80\u4e0b\u8d70 , \u8d70\u5230\u4e0b\u4e00\u5c42\u65f6\u8981\u5b58\u653e\u4e0a\u4e00\u5c42\u51fd\u6570\u7684\u4f4d\u7f6e . \u6bcf\u8d70\u4e00\u5c42\u9700\u8981\u6d88\u8017O ( 1 ) \u7684\u7a7a\u95f4\u590d\u6742\u5ea6 . \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u4e00\u4e2a\u7cfb\u7edf\u8bb0\u5f55\u9012\u5f52\u8fc7\u7a0b\u4e2d\u6bcf\u4e00\u5c42\u51fd\u6570\u4f4d\u7f6e\u7684\u5217\u8868 . \u5bf9\u5feb\u6392\u800c\u8a00 , \u6211\u4eec\u63a8\u5bfc\u8fc7 , \u8981\u9012\u5f52\u8d70logn\u5c42 , So , \u5feb\u6392\u5e73\u5747\u60c5\u51b5\u4e0b\u8981\u6d88\u8017O ( logn ) \u7684\u7a7a\u95f4\u590d\u6742\u5ea6 ! \u5f53\u5feb\u6392\u5904\u4e8e\u6700\u574f\u7684\u65f6\u95f4\u590d\u6742\u5ea6O ( n ^ 2 ) \u65f6 , \u8981\u8d70n\u5c42 , So , \u5feb\u6392\u6700\u574f\u60c5\u51b5\u4e0b\u8981\u6d88\u8017O ( logn ) \u7684\u7a7a\u95f4\u590d\u6742\u5ea6 ! \u5bf9\u5f52\u5e76\u800c\u8a00 , \u8be5\u7b97\u6cd5\u7684\u5b9e\u73b0\u5df2\u7ecf\u683c\u5916\u5f00\u4e86\u4e00\u4e2a\u5217\u8868\u5566O ( n ) . \u5176\u9012\u5f52\u9700\u8981\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO ( logn ) . O ( n ) + O ( logn ) logn\u88ab\u7701\u7565\u5566 ! \u2605 \u6392\u5e8f\u7684\u7a33\u5b9a\u6027\u662f\u5f88\u91cd\u8981\u7684 !! -- \u5f53\u4e24\u4e2a\u5143\u7d20\u503c\u4e00\u6837\u7684\u65f6\u5019 , \u4fdd\u8bc1\u5b83\u4eec\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8 ! \u6bd4\u5982 , \u5bf9 [ 3 , 2 , 1 , 2 , 4 ] \u6392\u5e8f , \u7a33\u5b9a\u7684\u6392\u5e8f\u80fd\u4fdd\u8bc1\u6392\u5e8f\u540e\u539f\u5217\u8868\u4e2d\u7b2c\u4e00\u4e2a2\u4f9d\u65e7\u5728\u539f\u5217\u8868\u7684\u7b2c\u4e8c\u4e2a2\u7684\u524d\u9762 .. \u6709\u6240\u8c13\u5417 ? \u6709 . \u6bd4\u5982\u5bf9\u5b57\u5178\u7684\u6392\u5e8f . { \"name\" : 'a' , \"age\" : 18 } { \"name\" : 'b' , \"age\" : 20 } { \"name\" : 'a' , \"age\" : 25 } \u6309\u7167\u952e ` name ` \u8fdb\u884c\u6392\u5e8f . \u7a33\u5b9a\u7684\u6392\u5e8f , \u6392\u5e8f\u540e , \u80fd\u4fdd\u8bc1 { \"name\" : 'a' , \"age\" : 18 } \u4f9d\u65e7\u5728 { \"name\" : 'a' , \"age\" : 25 } \u524d\u9762 !!! \u4e0d\u7a33\u5b9a\u7684\u6392\u5e8f\u4e0d\u80fd\u4fdd\u8bc1\u8fd9\u4e00\u70b9 . \u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u6392\u5e8f\u7b97\u6cd5\u662f\u5426\u7a33\u5b9a : \u6709\u987a\u5e8f\u7684\u6328\u4e2a\u6362\u7684 , \u7a33\u5b9a ; -- \u5982\u4f55\u4fdd\u8bc1\u7684\u5462 ? \u9047\u5230\u503c\u4e00\u6837 , \u4e0d\u6362\u5c31\u884c . \u4e0d\u6328\u4e2a\u6362 , \u98de\u7740\u6362\u7684 , \u4e0d\u7a33\u5b9a . -- \u4fdd\u8bc1\u4e0d\u4e86 , \u8df3\u7740\u6362 , \u4e2d\u95f4\u53ef\u80fd\u4f1a\u6709\u4e00\u6837\u7684 . eg :[ 2 , 3 , 2 , 1 , 4 ] \u7b2c\u4e00\u4e2a2\u548c1\u4ea4\u6362 , \u4e24\u4e2a2\u7684\u76f8\u5bf9\u4f4d\u7f6e\u5c31\u53d8\u4e86 . Python\u7684sort\u5e95\u5c42\u7b97\u6cd5\u662f\u7a33\u5b9a\u7684 !!!","title":"NB\u4e09\u4eba\u7ec4\u5c0f\u7ed3"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/","text":"\u5e0c\u5c14\u6392\u5e8f \u00b6 \u5e0c\u5c14\u6392\u5e8f\u662f\u63d2\u5165\u6392\u5e8f\u53d8\u5f62\u8fc7\u6765\u7684. def insert_sort_gap ( li , gap ): for i in range ( gap , len ( li )): j = i - gap temp = li [ i ] while j >= 0 and li [ j ] > temp : # li[j] > temp\u5927\u4e8e\u5347\u5e8f;\u5c0f\u4e8e\u964d\u5e8f li [ j + gap ] = li [ j ] j -= gap li [ j + gap ] = temp return li def shell_sort ( li ): d = len ( li ) // 2 while d >= 1 : insert_sort_gap ( li , d ) d //= 2 \u65f6\u95f4\u590d\u6742\u5ea6: gap\u4e0d\u540c\u590d\u6742\u5ea6\u4e0d\u540c. \u5e0c\u5c14\u6392\u5e8f(Shell Sort)\u662f\u4e00\u79cd\u5206\u7ec4\u63d2\u5165\u6392\u5e8f\u7b97\u6cd5. \u9996\u5148\u53d6\u4e00\u4e2a\u6574\u6570d1= n//2, \u5c06\u5143\u7d20\u5206\u4e3ad1\u4e2a\u7ec4, \u6bcf\u7ec4\u76f8\u90bb\u5143\u7d20\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e3ad1. \u5728\u5404\u7ec4\u5185\u76f4\u63a5\u8fdb\u884c\u63d2\u5165\u6392\u5e8f. \u53d6\u7b2c\u4e8c\u4e2a\u6574\u6570d2= d1//2, \u91cd\u590d\u4e0a\u8ff0\u5206\u7ec4\u6392\u5e8f\u8fc7\u7a0b, \u76f4\u5230di=1. \u5373\u6240\u6709\u5143\u7d20\u5728\u540c\u4e00\u7ec4\u5185\u8fdb\u884c\u63d2\u5165\u6392\u5e8f. \u5e0c\u5c14\u6392\u5e8f\u6bcf\u8d9f\u5e76\u4e0d\u4f7f\u67d0\u4e9b\u5143\u7d20\u6709\u5e8f, \u800c\u662f\u4f7f\u6574\u4f53\u6570\u636e\u8d8a\u6765\u8d8a\u63a5\u8fd1\u6709\u5e8f; \u6700\u540e\u4e00\u8d9f\u6392\u5e8f\u4f7f\u5f97\u6240\u6709\u6570\u636e\u6709\u5e8f. \u53ef\u4ee5\u7528\u6570\u5b66\u8bc1\u660e,\u6bcf\u8d9f\u7ed3\u675f\u540e,\u5217\u8868\u9006\u5e8f\u7684\u6570\u8d8a\u6765\u8d8a\u5c11,\u5373\u8d8a\u6765\u8d8a\u63a5\u8fd1\u6709\u5e8f. \u7528\u4ee3\u7801\u5b9e\u73b0\u5e0c\u5c14\u6392\u5e8f \"\"\"# -- \u63d2\u5165\u6392\u5e8f def insert_sort(li): for i in range(1, len(li)): j = i - 1 temp = li[i] while j >= 0 and li[j] > temp: # \u5927\u4e8e\u5347\u5e8f;\u82e5\u662f\u5c0f\u4e8e,\u964d\u5e8f li[j + 1] = li[j] j -= 1 li[j + 1] = temp return li \"\"\" # -- \u5206\u7ec4\u540e,\u6bcf\u4e00\u7ec4\u5185\u90e8\u8fdb\u884c\u4e86\u63d2\u5165\u6392\u5e8f def insert_sort_gap ( li , gap ): for i in range ( gap , len ( li )): j = i - gap temp = li [ i ] while j >= 0 and li [ j ] > temp : li [ j + gap ] = li [ j ] j -= gap li [ j + gap ] = temp return li # -- \u8fdb\u884c\u5e0c\u5c14\u6392\u5e8f def shell_sort ( li ): d = len ( li ) // 2 while d >= 1 : insert_sort_gap ( li , d ) d //= 2 if __name__ == '__main__' : li = list ( range ( 100 )) import random random . shuffle ( li ) shell_sort ( li ) print ( li ) # -- \u5b9e\u9a8c\u4e86\u4e0b,10000\u4e2a\u6570,\u63d2\u6392\u4f1a\u82b1\u8d396s;\u5e0c\u5c14\u6392\u5e8f\u53ea\u9700\u89810.06\u79d2.\u4f46\u5e0c\u5c14\u6392\u5e8f\u8fd8\u662f\u6bd4NB\u4e09\u4eba\u7ec4\u91cc\u6700\u6162\u7684\u5806\u6392\u5e8f\u6162. \u5e0c\u5c14\u6392\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u9009\u53d6\u7684gap\u5e8f\u5217\u6709\u5173!! grap\u5e8f\u5217\u4e0d\u540c,\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u540c.\u5c31\u4e0d\u5177\u4f53\u8ba8\u8bba\u5566.\u5f88\u590d\u6742. \u6b64\u5904\u7684gap, \u4e5f\u5c31\u662fd \u6211\u4eec\u7528\u7684\u662f\u5217\u8868\u957f\u5ea6 n//2 n//4 n//8 ... \u8ba1\u6570\u6392\u5e8f \u00b6 \u9700\u6c42: \u5bf9\u5217\u8868\u8fdb\u884c\u6392\u5e8f, \u5df2\u77e5\u5217\u8868\u7684\u6570\u7684\u8303\u56f4\u90fd\u57280\u5230100\u4e4b\u95f4. \u8bbe\u8ba1\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)\u7684\u7b97\u6cd5!! \u6ce8: \u4e4b\u524d\u8bb2\u5230\u7684\u6392\u5e8f\u90fd\u5c5e\u4e8e\u662f\u6bd4\u8f83\u6392\u5e8f.. \u53ef\u4ee5\u7528\u6570\u5b66\u8bc1\u660e,\u6bd4\u8f83\u6392\u5e8f\u6700\u5feb\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fnlogn. So, \u8ba1\u6570\u6392\u5e8f\u4e0d\u662f\u7528\u6bd4\u8f83\u7684\u65b9\u6cd5\u5b9e\u73b0\u7684. \u65f6\u95f4\u590d\u6742\u5ea6: O(n) -- \u6709\u5f88\u591a\u9650\u5236. \u9700\u8981\u77e5\u9053\u8303\u56f4,\u8303\u56f4\u5927\u7684\u8bdd\u5e9f\u7a7a\u95f4.\u4e0d\u80fd\u5bf9\u5c0f\u6570\u8fdb\u884c\u8ba1\u6570. \u4ee3\u7801\u5b9e\u73b0 # max_count\u53c2\u6570:\u6307\u5217\u8868\u4e2d\u6700\u5927\u7684\u6570\u662f\u591a\u5c11. def count_sort ( li , max_count = 100 ): # \u5047\u8bbe\u5217\u8868\u7684\u6700\u5927\u6570\u4e3a100,0-100\u662f101\u4e2a\u6570\u5b57.range\u51fd\u6570\u987e\u5934\u4e0d\u987e\u5c3e. count = [ 0 for _ in range ( max_count + 1 )] # \u7edf\u8ba1 for val in li : count [ val ] += 1 # \u6e05\u7a7a li . clear () # \u5199\u56de for index , value in enumerate ( count ): # \u6709value\u4e2aindex. \u82e5\u662f0\u4e2aindex,li\u662f\u4e0d\u4f1aappend\u7684. for _ in range ( value ): li . append ( index ) if __name__ == '__main__' : import random li = [ random . randint ( 0 , 100 ) for _ in range ( 15 )] print ( li ) count_sort ( li , max_count = 100 ) print ( li ) \u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790: count[val] += 1 \u6267\u884cn\u6b21, li.append(index) \u6267\u884cn\u6b21.. So,\u4e3a2n. \u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n). -- \u4e3e\u4e00\u53cd\u4e09 -- \u82e5\u4e0d\u662f\u5bf9\u6570\u5b57\u8fdb\u884c\u8ba1\u6570\u6392\u5e8f , \u800c\u662f\u5bf9\u5b57\u5178\u5462 ? { \"name\" : 'a' , \"age\" : 18 } { \"name\" : 'b' , \"age\" : 18 } { \"name\" : 'c' , \"age\" : 16 } { \"name\" : 'd' , \"age\" : 25 } \u6bd4\u5982\u8bf4\u5bf9\u5e74\u9f84\u8fdb\u884c\u6392\u5e8f .. \u6211\u4eec\u5f97\u77e5\u5e74\u9f84\u7684\u8303\u56f4\u662f0 - 100 \u90a3\u4e48\u521d\u59cb\u5316\u7684\u5217\u8868\u7684\u4e0b\u6807\u4ee3\u8868\u5e74\u9f84 , \u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5e94\u8be5\u662f\u4e00\u4e2a\u5217\u8868 , \u9047\u5230\u5e74\u9f84\u76f8\u540c\u7684\u5b57\u5178 , \u5c31append\u8be5\u5b57\u5178\u5bf9\u8c61\u8fdb\u53bb !! \u800c\u4e0d\u662f\u50cf\u6570\u5b57\u4e00\u6837\u8ba1\u6570\u4e86 . \u6876\u6392\u5e8f \u00b6 \u5728\u8ba1\u6570\u6392\u5e8f\u4e2d, \u5982\u679c\u5143\u7d20\u7684\u8303\u56f4\u6bd4\u8f83\u5927 (\u6bd4\u59821\u52301\u4ebf\u4e4b\u95f4) \u5982\u4f55\u6539\u8fdb\u7b97\u6cd5? \u6876\u6392\u5e8f (Bucket Sort): \u9996\u5148\u5c06\u5143\u7d20\u5206\u5e03\u5728\u4e0d\u540c\u6876\u4e2d, \u518d\u5bf9\u6bcf\u4e2a\u6876\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f! \u65f6\u95f4\u590d\u6742\u5ea6: O(nk) \u4ee3\u7801\u5b9e\u73b0 # n:\u591a\u5c11\u4e2a\u6876; max_num:\u5217\u8868\u4e2d\u6700\u5927\u7684\u6570 def bucket_sort ( li , n = 100 , max_num = 10000 ): buckets = [[] for _ in range ( n )] # \u521b\u5efa\u4e86n\u4e2a\u7a7a\u6876,\u6876\u7684\u7f16\u53f7\u4ece0\u5230n-1 for var in li : # -- \u6c42\u5217\u8868\u4e2d\u7684\u6570\u653e\u5230\u54ea\u4e2a\u6876\u91cc # `max_num//n` \u6bcf\u4e2a\u6876\u91cc\u591a\u5c11\u4e2a\u6570 `var // (max_num // n)` var\u653e\u5230\u54ea\u4e2a\u6876\u91cc # \u6709\u4f1a\u8d8a\u754c\u7684\u60c5\u51b5 # max_num=9,n=3 \u5206\u4e3a\u4e86\u7f16\u53f7\u4e3a0,1,2\u7684\u4e09\u4e2a\u6876 \u6bcf\u4e2a\u6876\u91cc\u4e09\u4e2a\u6570 9//3=3,\u6ca1\u6709\u7f16\u53f7\u4e3a3\u7684\u6876 # max_num=9,n=2 \u5206\u4e3a\u4e86\u7f16\u53f7\u4e3a0,1\u7684\u4e09\u4e2a\u6876 \u6bcf\u4e2a\u6876\u91cc\u56db\u4e2a\u6570 9//4=2,8//4=2,\u6ca1\u6709\u7f16\u53f7\u4e3a2\u7684\u6876 # \u89e3\u51b3\u65b9\u6848,\u4f7f\u7528min\u51fd\u6570,\u8d8a\u754c\u7684\u90fd\u653e\u5230\u7f16\u53f7\u6700\u5927\u7684\u90a3\u4e2a\u6876\u91cc! i = min ( var // ( max_num // n ), n - 1 ) # -- \u5c06\u5217\u8868\u4e2d\u7684\u6570\u653e\u5230\u5bf9\u5e94\u7684\u6876\u91cc buckets [ i ] . append ( var ) # \u25b3 \u5f53\u7136\u53ef\u4ee5\u5f85\u5217\u8868\u5143\u7d20\u5168\u90e8\u653e\u5230\u5bf9\u5e94\u7684\u6876\u4e2d\u540e,\u518d\u5bf9\u6bcf\u4e2a\u6876\u5185\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f. # -- \u4fdd\u8bc1\u6876\u5185\u7684\u987a\u5e8f \u8ddf\u63d2\u5165\u6392\u5e8f\u4e00\u4e2a\u9053\u7406.\u6876\u4e2d\u6765\u4e86\u4e00\u4e2a\u5143\u7d20,\u63d2\u5165\u5230\u5408\u9002\u7684\u4f4d\u7f6e! # list(range(10-1,-1,-1)) --> [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 10\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 for j in range ( len ( buckets [ i ]) - 1 , 0 , - 1 ): # \u4ece\u5927\u5230\u5c0f\u62ff\u5230\u4e86\u67d0\u4e2a\u6876\u5185\u5143\u7d20\u7684\u4e0b\u6807 # \u601d\u8003,range(len(buckets[i]) - 1, 0, -1) \u8fd9\u91cc\u4e3a\u5565\u51990\u4e0d\u5199-1 # \u5176\u4e00: \u6876\u5185\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u65f6,\u662f\u8be5\u5143\u7d20\u81ea\u5df1\u8ddf\u81ea\u5df1\u6bd4.\u6ca1\u610f\u4e49. # \u5176\u4e8c: \u5047\u8bbe\u6876\u5185\u5143\u7d20\u662f\u8fd9\u6837\u7684[3,4,5,1] # [3,4,5,1] --> j=3 [3,4,1,5] --> j=2 [3,1,4,5] --> j=1 [1,3,4,5] # \u5f53j=0\u65f6\u5019,\u518d\u4ea4\u6362\u7684\u8bdd,\u5c31\u51fa\u4e8b\u4e86 --> [5,3,4,1] if buckets [ i ][ j ] < buckets [ i ][ j - 1 ]: # \u5c0f\u4e8e,\u6876\u5185\u5143\u7d20\u5347\u5e8f,\u82e5\u5927\u4e8e\u964d\u5e8f buckets [ i ][ j ], buckets [ i ][ j - 1 ] = buckets [ i ][ j - 1 ], buckets [ i ][ j ] else : break # -- \u5217\u8868\u6392\u5e8f\u540e\u7684\u7ed3\u679c sorted_li = [] for buc in buckets : sorted_li . extend ( buc ) return sorted_li if __name__ == '__main__' : import random li = [ random . randint ( 0 , 10000 ) for _ in range ( 100000 )] print ( bucket_sort ( li )[: 100 ]) \"\"\" \u4ee3\u7801\u53ef\u4ee5\u4f18\u5316. \u4e0a\u8ff0\u4ee3\u7801\u4e2d,\u662f\u63d2\u5165\u540e\u7acb\u5373\u5bf9\u6876\u8fdb\u884c\u6392\u5e8f.\u53ef\u4ee5\u8bd5\u8bd5,\u63d2\u5165\u5b8c\u540e,\u518d\u5bf9\u6bcf\u4e2a\u6876\u4f7f\u7528\u5feb\u6392\u7b49\u8fdb\u884c\u6392\u5e8f. \"\"\" \u8ba8\u8bba \u6876\u6392\u5e8f\u7684\u8868\u73b0\u53d6\u51b3\u4e8e\u6570\u636e\u7684\u5206\u5e03, \u4e5f\u5c31\u662f\u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u6570\u636e\u6392\u5e8f\u65f6\u91c7\u53d6\u4e0d\u540c\u7684\u5206\u6876\u7b56\u7565. \u6bd4\u5982\u4e00\u4e07\u4e2a\u6570 , \u5206\u4e3a10\u4e2a\u6876 . \u800c90 % \u7684\u6570\u90fd\u5904\u4e8e9000 - 10000. \u90a3\u4e48\u5927\u591a\u6570\u7684\u6570\u636e\u90fd\u4f1a\u5206\u5230\u6700\u540e\u4e00\u4e2a\u6876\u91cc . \u8fd9\u65f6\u5019 , \u5e94\u8be5\u91c7\u53d6\u4e0d\u540c\u7684\u5206\u6876\u7b56\u7565 , \u6bd4\u5982\u5904\u4e8e0 - 9000 \u7684\u52062\u4e2a\u6876 , \u5904\u4e8e9000 - 10000 \u7684\u52068\u4e2a\u6876 .. \u6ce8 : n\u662f\u5217\u8868\u957f\u5ea6 , m\u662f\u6876\u7684\u4e2a\u6570 , k\u662f\u6839\u636en\u548cm\u7b97\u51fa\u6765\u7684 . \u7b80\u5355\u7406\u89e3 , k\u8868\u793a\u6876\u5e73\u5747\u591a\u957f . \u5177\u4f53\u5c31\u4e0d\u8ba8\u8bba\u4e86 . \u5e73\u5747\u60c5\u51b5\u65f6\u95f4\u590d\u6742\u5ea6 : O ( nk ) \u6700\u574f\u60c5\u51b5\u65f6\u95f4\u590d\u6742\u5ea6 : O ( n ^ 2 k ) \u7a7a\u95f4\u590d\u6742\u5ea6 : O ( n + k ) \u57fa\u6570\u6392\u5e8f \u00b6 \u591a\u5173\u952e\u5b57\u6392\u5e8f: \u5047\u5982\u73b0\u5728\u6709\u4e00\u4e2a\u5458\u5de5\u8868, \u5148\u6309\u7167\u5e74\u9f84\u8fdb\u884c\u6392\u5e8f, \u82e5\u5e74\u9f84\u76f8\u540c, \u518d\u6309\u7167\u85aa\u8d44\u8fdb\u884c\u6392\u5e8f. \u6ce8: \u82e5\u5e74\u9f84\u85aa\u8d44\u90fd\u4e00\u6837,\u6392\u5e8f\u540e\u548c\u6392\u5e8f\u524d\u76f8\u5bf9\u4f4d\u7f6e\u662f\u4e0d\u4f1a\u53d8\u7684.\u8fd9\u5c31\u662f\u7a33\u5b9a\u6027. \u5bf9[3,44,38,5,47,15,36,26,27,2,46,4,19,50,48], \u662f\u5426\u53ef\u770b\u4f5c\u662f\u591a\u5173\u952e\u5b57\u6392\u5e8f? def list_to_buckets ( li , base , iteration ): buckets = [[] for _ in range ( base )] for number in li : digit = ( number // ( base ** iteration )) % base buckets [ digit ] . append ( number ) return buckets def buckets_to_list ( buckets ): return [ x for buc in buckets for x in buc ] def radix_sort ( li , base = 10 ): max_val = max ( li ) it = 0 while base ** it <= max_val : li = buckets_to_list ( list_to_buckets ( li , base , it )) it += 1 return li if __name__ == '__main__' : import random li = list ( range ( 1000 )) random . shuffle ( li ) print ( li ) print ( radix_sort ( li )) \u65f6\u95f4\u590d\u6742\u5ea6: O(kn) k\u6307\u7684\u662f \u5206\u51e0\u6b21\u6876/\u6700\u5927\u7684\u6570\u6709\u591a\u5c11\u4f4d. \u7a7a\u95f4\u590d\u6742\u5ea6: O(n+k) \u8ddf\u6876\u6392\u5e8f\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e00\u6837! \u5206\u6876\u540e\u4f9d\u6b21\u8f93\u51fa,\u518d\u5206\u6876\u518d\u8f93\u51fa.. \u76f4\u5230\u6392\u5e8f\u597d. step1: \u5206\u4e860-9\u5341\u4e2a\u6876. \u9996\u5148\u6309\u7167\u201c\u4e2a\u4f4d\u201d\u5206\u6876, \u6bd4\u5982 36 26 46 \u6309\u7167\u5728\u539f\u5217\u8868\u4e2d\u7684\u987a\u5e8f\u653e\u5230\u4e866\u53f7\u6876\u4e2d. step2: \u4f9d\u6b21\u4ece\u5341\u4e2a\u6876\u4e2d\u5c06\u6570\u5b57\u62ff\u51fa\u6765.. \u5148\u8fdb\u6876\u7684\u5148\u51fa\u6765, \u5148\u8fdb\u5148\u51fa, \u6bd4\u5982 6\u53f7\u6876, 36 26 46 \u4f1a\u4f9d\u6b21 \u62ff\u51fa\u6765/\u8f93\u51fa. step3: \u518d\u6309\u7167\"\u5341\u4f4d\u5206\u6876\", \u6ca1\u6709\u5341\u4f4d\u7684,\u5341\u4f4d\u6570\u75280\u8868\u793a.. \u5206\u5b8c\u540e, \u518d\u4f9d\u6b21 (\u6876\u4f9d\u6b21,\u6876\u4e2d\u5143\u7d20\u4f9d\u6b21/\u5148\u8fdb\u5148\u51fa) \u62ff\u51fa\u5c31\u662f\u6392\u5e8f\u597d\u7684!!! \u4ee3\u7801\u5b9e\u73b0: def radix_sort ( li ): max_num = max ( li ) # max_num\u7684\u4f4d\u6570\u662f\u51e0,\u5c31\u9700\u8981\u5206\u51e0\u6b21\u6876 eg: 876 -> 3; 66 -> 2; 10000 -> 5 # \u6700\u7b80\u5355\u7684\u65b9\u6cd5,\u7528\u5bf9\u6570\u5411\u4e0b\u53d6\u6574.\u53ef\u4ee5\u6c42\u5f97\u5206\u51e0\u6b21\u6876.. # \u8fd9\u91cc\u7528\u4e2awhile\u6765\u5b9e\u73b0. it \u4e3a\u5206\u6876\u7684\u6b21\u6570. \"\"\" it = 0 while 10 ** it <= max_num: it += 1 \"\"\" it = 0 while 10 ** it <= max_num : buckets = [[] for _ in range ( 10 )] # \u6bcf\u6b21\u5206\u6876\u90fd\u8981\u521d\u59cb\u5316\u8fd910\u4e2a\u6876 for var in li : # -- \u6839\u636eit\u7684\u503c\u51b3\u5b9a\u53d6\u54ea\u4f4d\u4e0a\u7684\u6570,\u5e76\u53d6\u51fa\u6765 \u6bd4\u5982\u6570\u4e3a987 # it=0 \u53d6\u4e2a\u4f4d 987%10 # it=1 \u53d6\u5341\u4f4d 987//10%10 # it=2 \u53d6\u767e\u4f4d 987//100%10 digit = ( var // ( 10 ** it )) % 10 # -- \u53d6\u51fa\u6765\u7684\u6570\u51b3\u5b9a\u4e86\u8981\u5206\u5230\u54ea\u4e2a\u6876\u91cc buckets [ digit ] . append ( var ) # for\u5faa\u73af\u7ed3\u675f,\u610f\u5473\u7740\u8fd9\u4e00\u8f6e\u7684\u5206\u6876\u7ed3\u675f,\u63a5\u7740\u9700\u8981\u5c06\u6876\u4e2d\u7684\u6570\u636e\u5199\u56deli\u91cc li . clear () # \u6e05\u7a7a for buc in buckets : li . extend ( buc ) # \u653e\u56de it += 1 if __name__ == '__main__' : import random li = list ( range ( 1000 )) random . shuffle ( li ) print ( li ) radix_sort ( li ) print ( li ) \"\"\" \u8fd9\u4e09\u79cd\u6392\u5e8f\u7b97\u6cd5\u90fd\u5229\u7528\u4e86\u6876\u7684\u6982\u5ff5,\u4f46\u5bf9\u6876\u7684\u4f7f\u7528\u65b9\u6cd5\u4e0a\u6709\u660e\u663e\u5dee\u5f02: \u8ba1\u6570\u6392\u5e8f: \u53ea\u6709\u4e00\u4e2a\u6876,\u53ea\u5b58\u50a8\u5355\u4e00\u952e\u503c; \u6876\u6392\u5e8f: \u6bcf\u4e2a\u6876\u5b58\u50a8\u4e00\u5b9a\u8303\u56f4\u7684\u6570\u503c,\u6876\u5185\u5143\u7d20\u9700\u8981\u6392\u5e8f.\u53ea\u88c5\u4e00\u6b21\u6876. \u57fa\u6570\u6392\u5e8f: \u6839\u636e\u952e\u503c\u7684\u6bcf\u4f4d\u6570\u5b57\u6765\u5206\u914d\u6876.\u4e0d\u9700\u8981\u5bf9\u6876\u5185\u5143\u7d20\u6392\u5e8f.\u88c5\u591a\u6b21\u6876. \u57fa\u6570\u6392\u5e8f O(kn) --> k\u662f\u4ee510\u4e3a\u5e95,n\u7684log \u5feb\u6392 O(nlogn) --> logn\u662f\u4ee52\u4e3a,n\u7684log \u5e73\u5747\u5206\u5e03\u7684\u60c5\u51b5\u4e0b,\u770b\u5728\u54ea\u4e2a\u8303\u56f4\u5185,\u5f00\u59cb\u65f6\u57fa\u6570\u6bd4\u5feb\u6392\u5feb,\u5f80\u540e\u8d8a\u6765\u8d8a\u5927,\u662f\u5feb\u6392\u6bd4\u57fa\u6570\u5feb.\u8ddf\u6570\u5b66\u6709\u5173,\u5c31\u4e0d\u6df1\u7a76\u4e86.(\u3064\u0414`)\u30ce \u800c\u4e14\u57fa\u6570\u6392\u5e8f\u8ddf\u79bb\u6563\u70b9\u6709\u5173,\u4e07\u4e00\u90a3\u4e2a\u6700\u5927\u7684\u6570\u8fdc\u5927\u4e8e\u5176\u5b83\u6570,\u6216\u8005\u5206\u5e03\u4e0d\u5747\u5300??\u5e76\u4e14\u57fa\u6570\u6392\u5e8f\u8fd8\u5f97\u6d88\u8017\u6876.\u90a3\u8fd8\u662f\u5feb\u6392\u597d. \u6269\u5c55: \u5b57\u7b26\u4e32\u5206\u6876,\u53ea\u8003\u8651\u5b57\u6bcd26\u4e2a\u6876,\u8003\u8651ACSII\u7801128\u4e2a\u6876 eg: abcd\u4e0eab\u6bd4\u8f83,\u9700\u8981ab\u5728\u540e\u9762\u52a00 --> abcd ab00 \"\"\"","title":"\u5176\u5b83\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/#_1","text":"\u5e0c\u5c14\u6392\u5e8f\u662f\u63d2\u5165\u6392\u5e8f\u53d8\u5f62\u8fc7\u6765\u7684. def insert_sort_gap ( li , gap ): for i in range ( gap , len ( li )): j = i - gap temp = li [ i ] while j >= 0 and li [ j ] > temp : # li[j] > temp\u5927\u4e8e\u5347\u5e8f;\u5c0f\u4e8e\u964d\u5e8f li [ j + gap ] = li [ j ] j -= gap li [ j + gap ] = temp return li def shell_sort ( li ): d = len ( li ) // 2 while d >= 1 : insert_sort_gap ( li , d ) d //= 2 \u65f6\u95f4\u590d\u6742\u5ea6: gap\u4e0d\u540c\u590d\u6742\u5ea6\u4e0d\u540c. \u5e0c\u5c14\u6392\u5e8f(Shell Sort)\u662f\u4e00\u79cd\u5206\u7ec4\u63d2\u5165\u6392\u5e8f\u7b97\u6cd5. \u9996\u5148\u53d6\u4e00\u4e2a\u6574\u6570d1= n//2, \u5c06\u5143\u7d20\u5206\u4e3ad1\u4e2a\u7ec4, \u6bcf\u7ec4\u76f8\u90bb\u5143\u7d20\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e3ad1. \u5728\u5404\u7ec4\u5185\u76f4\u63a5\u8fdb\u884c\u63d2\u5165\u6392\u5e8f. \u53d6\u7b2c\u4e8c\u4e2a\u6574\u6570d2= d1//2, \u91cd\u590d\u4e0a\u8ff0\u5206\u7ec4\u6392\u5e8f\u8fc7\u7a0b, \u76f4\u5230di=1. \u5373\u6240\u6709\u5143\u7d20\u5728\u540c\u4e00\u7ec4\u5185\u8fdb\u884c\u63d2\u5165\u6392\u5e8f. \u5e0c\u5c14\u6392\u5e8f\u6bcf\u8d9f\u5e76\u4e0d\u4f7f\u67d0\u4e9b\u5143\u7d20\u6709\u5e8f, \u800c\u662f\u4f7f\u6574\u4f53\u6570\u636e\u8d8a\u6765\u8d8a\u63a5\u8fd1\u6709\u5e8f; \u6700\u540e\u4e00\u8d9f\u6392\u5e8f\u4f7f\u5f97\u6240\u6709\u6570\u636e\u6709\u5e8f. \u53ef\u4ee5\u7528\u6570\u5b66\u8bc1\u660e,\u6bcf\u8d9f\u7ed3\u675f\u540e,\u5217\u8868\u9006\u5e8f\u7684\u6570\u8d8a\u6765\u8d8a\u5c11,\u5373\u8d8a\u6765\u8d8a\u63a5\u8fd1\u6709\u5e8f. \u7528\u4ee3\u7801\u5b9e\u73b0\u5e0c\u5c14\u6392\u5e8f \"\"\"# -- \u63d2\u5165\u6392\u5e8f def insert_sort(li): for i in range(1, len(li)): j = i - 1 temp = li[i] while j >= 0 and li[j] > temp: # \u5927\u4e8e\u5347\u5e8f;\u82e5\u662f\u5c0f\u4e8e,\u964d\u5e8f li[j + 1] = li[j] j -= 1 li[j + 1] = temp return li \"\"\" # -- \u5206\u7ec4\u540e,\u6bcf\u4e00\u7ec4\u5185\u90e8\u8fdb\u884c\u4e86\u63d2\u5165\u6392\u5e8f def insert_sort_gap ( li , gap ): for i in range ( gap , len ( li )): j = i - gap temp = li [ i ] while j >= 0 and li [ j ] > temp : li [ j + gap ] = li [ j ] j -= gap li [ j + gap ] = temp return li # -- \u8fdb\u884c\u5e0c\u5c14\u6392\u5e8f def shell_sort ( li ): d = len ( li ) // 2 while d >= 1 : insert_sort_gap ( li , d ) d //= 2 if __name__ == '__main__' : li = list ( range ( 100 )) import random random . shuffle ( li ) shell_sort ( li ) print ( li ) # -- \u5b9e\u9a8c\u4e86\u4e0b,10000\u4e2a\u6570,\u63d2\u6392\u4f1a\u82b1\u8d396s;\u5e0c\u5c14\u6392\u5e8f\u53ea\u9700\u89810.06\u79d2.\u4f46\u5e0c\u5c14\u6392\u5e8f\u8fd8\u662f\u6bd4NB\u4e09\u4eba\u7ec4\u91cc\u6700\u6162\u7684\u5806\u6392\u5e8f\u6162. \u5e0c\u5c14\u6392\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u9009\u53d6\u7684gap\u5e8f\u5217\u6709\u5173!! grap\u5e8f\u5217\u4e0d\u540c,\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u540c.\u5c31\u4e0d\u5177\u4f53\u8ba8\u8bba\u5566.\u5f88\u590d\u6742. \u6b64\u5904\u7684gap, \u4e5f\u5c31\u662fd \u6211\u4eec\u7528\u7684\u662f\u5217\u8868\u957f\u5ea6 n//2 n//4 n//8 ...","title":"\u5e0c\u5c14\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/#_2","text":"\u9700\u6c42: \u5bf9\u5217\u8868\u8fdb\u884c\u6392\u5e8f, \u5df2\u77e5\u5217\u8868\u7684\u6570\u7684\u8303\u56f4\u90fd\u57280\u5230100\u4e4b\u95f4. \u8bbe\u8ba1\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)\u7684\u7b97\u6cd5!! \u6ce8: \u4e4b\u524d\u8bb2\u5230\u7684\u6392\u5e8f\u90fd\u5c5e\u4e8e\u662f\u6bd4\u8f83\u6392\u5e8f.. \u53ef\u4ee5\u7528\u6570\u5b66\u8bc1\u660e,\u6bd4\u8f83\u6392\u5e8f\u6700\u5feb\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fnlogn. So, \u8ba1\u6570\u6392\u5e8f\u4e0d\u662f\u7528\u6bd4\u8f83\u7684\u65b9\u6cd5\u5b9e\u73b0\u7684. \u65f6\u95f4\u590d\u6742\u5ea6: O(n) -- \u6709\u5f88\u591a\u9650\u5236. \u9700\u8981\u77e5\u9053\u8303\u56f4,\u8303\u56f4\u5927\u7684\u8bdd\u5e9f\u7a7a\u95f4.\u4e0d\u80fd\u5bf9\u5c0f\u6570\u8fdb\u884c\u8ba1\u6570. \u4ee3\u7801\u5b9e\u73b0 # max_count\u53c2\u6570:\u6307\u5217\u8868\u4e2d\u6700\u5927\u7684\u6570\u662f\u591a\u5c11. def count_sort ( li , max_count = 100 ): # \u5047\u8bbe\u5217\u8868\u7684\u6700\u5927\u6570\u4e3a100,0-100\u662f101\u4e2a\u6570\u5b57.range\u51fd\u6570\u987e\u5934\u4e0d\u987e\u5c3e. count = [ 0 for _ in range ( max_count + 1 )] # \u7edf\u8ba1 for val in li : count [ val ] += 1 # \u6e05\u7a7a li . clear () # \u5199\u56de for index , value in enumerate ( count ): # \u6709value\u4e2aindex. \u82e5\u662f0\u4e2aindex,li\u662f\u4e0d\u4f1aappend\u7684. for _ in range ( value ): li . append ( index ) if __name__ == '__main__' : import random li = [ random . randint ( 0 , 100 ) for _ in range ( 15 )] print ( li ) count_sort ( li , max_count = 100 ) print ( li ) \u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790: count[val] += 1 \u6267\u884cn\u6b21, li.append(index) \u6267\u884cn\u6b21.. So,\u4e3a2n. \u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n). -- \u4e3e\u4e00\u53cd\u4e09 -- \u82e5\u4e0d\u662f\u5bf9\u6570\u5b57\u8fdb\u884c\u8ba1\u6570\u6392\u5e8f , \u800c\u662f\u5bf9\u5b57\u5178\u5462 ? { \"name\" : 'a' , \"age\" : 18 } { \"name\" : 'b' , \"age\" : 18 } { \"name\" : 'c' , \"age\" : 16 } { \"name\" : 'd' , \"age\" : 25 } \u6bd4\u5982\u8bf4\u5bf9\u5e74\u9f84\u8fdb\u884c\u6392\u5e8f .. \u6211\u4eec\u5f97\u77e5\u5e74\u9f84\u7684\u8303\u56f4\u662f0 - 100 \u90a3\u4e48\u521d\u59cb\u5316\u7684\u5217\u8868\u7684\u4e0b\u6807\u4ee3\u8868\u5e74\u9f84 , \u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5e94\u8be5\u662f\u4e00\u4e2a\u5217\u8868 , \u9047\u5230\u5e74\u9f84\u76f8\u540c\u7684\u5b57\u5178 , \u5c31append\u8be5\u5b57\u5178\u5bf9\u8c61\u8fdb\u53bb !! \u800c\u4e0d\u662f\u50cf\u6570\u5b57\u4e00\u6837\u8ba1\u6570\u4e86 .","title":"\u8ba1\u6570\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/#_3","text":"\u5728\u8ba1\u6570\u6392\u5e8f\u4e2d, \u5982\u679c\u5143\u7d20\u7684\u8303\u56f4\u6bd4\u8f83\u5927 (\u6bd4\u59821\u52301\u4ebf\u4e4b\u95f4) \u5982\u4f55\u6539\u8fdb\u7b97\u6cd5? \u6876\u6392\u5e8f (Bucket Sort): \u9996\u5148\u5c06\u5143\u7d20\u5206\u5e03\u5728\u4e0d\u540c\u6876\u4e2d, \u518d\u5bf9\u6bcf\u4e2a\u6876\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f! \u65f6\u95f4\u590d\u6742\u5ea6: O(nk) \u4ee3\u7801\u5b9e\u73b0 # n:\u591a\u5c11\u4e2a\u6876; max_num:\u5217\u8868\u4e2d\u6700\u5927\u7684\u6570 def bucket_sort ( li , n = 100 , max_num = 10000 ): buckets = [[] for _ in range ( n )] # \u521b\u5efa\u4e86n\u4e2a\u7a7a\u6876,\u6876\u7684\u7f16\u53f7\u4ece0\u5230n-1 for var in li : # -- \u6c42\u5217\u8868\u4e2d\u7684\u6570\u653e\u5230\u54ea\u4e2a\u6876\u91cc # `max_num//n` \u6bcf\u4e2a\u6876\u91cc\u591a\u5c11\u4e2a\u6570 `var // (max_num // n)` var\u653e\u5230\u54ea\u4e2a\u6876\u91cc # \u6709\u4f1a\u8d8a\u754c\u7684\u60c5\u51b5 # max_num=9,n=3 \u5206\u4e3a\u4e86\u7f16\u53f7\u4e3a0,1,2\u7684\u4e09\u4e2a\u6876 \u6bcf\u4e2a\u6876\u91cc\u4e09\u4e2a\u6570 9//3=3,\u6ca1\u6709\u7f16\u53f7\u4e3a3\u7684\u6876 # max_num=9,n=2 \u5206\u4e3a\u4e86\u7f16\u53f7\u4e3a0,1\u7684\u4e09\u4e2a\u6876 \u6bcf\u4e2a\u6876\u91cc\u56db\u4e2a\u6570 9//4=2,8//4=2,\u6ca1\u6709\u7f16\u53f7\u4e3a2\u7684\u6876 # \u89e3\u51b3\u65b9\u6848,\u4f7f\u7528min\u51fd\u6570,\u8d8a\u754c\u7684\u90fd\u653e\u5230\u7f16\u53f7\u6700\u5927\u7684\u90a3\u4e2a\u6876\u91cc! i = min ( var // ( max_num // n ), n - 1 ) # -- \u5c06\u5217\u8868\u4e2d\u7684\u6570\u653e\u5230\u5bf9\u5e94\u7684\u6876\u91cc buckets [ i ] . append ( var ) # \u25b3 \u5f53\u7136\u53ef\u4ee5\u5f85\u5217\u8868\u5143\u7d20\u5168\u90e8\u653e\u5230\u5bf9\u5e94\u7684\u6876\u4e2d\u540e,\u518d\u5bf9\u6bcf\u4e2a\u6876\u5185\u7684\u5143\u7d20\u8fdb\u884c\u6392\u5e8f. # -- \u4fdd\u8bc1\u6876\u5185\u7684\u987a\u5e8f \u8ddf\u63d2\u5165\u6392\u5e8f\u4e00\u4e2a\u9053\u7406.\u6876\u4e2d\u6765\u4e86\u4e00\u4e2a\u5143\u7d20,\u63d2\u5165\u5230\u5408\u9002\u7684\u4f4d\u7f6e! # list(range(10-1,-1,-1)) --> [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 10\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 for j in range ( len ( buckets [ i ]) - 1 , 0 , - 1 ): # \u4ece\u5927\u5230\u5c0f\u62ff\u5230\u4e86\u67d0\u4e2a\u6876\u5185\u5143\u7d20\u7684\u4e0b\u6807 # \u601d\u8003,range(len(buckets[i]) - 1, 0, -1) \u8fd9\u91cc\u4e3a\u5565\u51990\u4e0d\u5199-1 # \u5176\u4e00: \u6876\u5185\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u65f6,\u662f\u8be5\u5143\u7d20\u81ea\u5df1\u8ddf\u81ea\u5df1\u6bd4.\u6ca1\u610f\u4e49. # \u5176\u4e8c: \u5047\u8bbe\u6876\u5185\u5143\u7d20\u662f\u8fd9\u6837\u7684[3,4,5,1] # [3,4,5,1] --> j=3 [3,4,1,5] --> j=2 [3,1,4,5] --> j=1 [1,3,4,5] # \u5f53j=0\u65f6\u5019,\u518d\u4ea4\u6362\u7684\u8bdd,\u5c31\u51fa\u4e8b\u4e86 --> [5,3,4,1] if buckets [ i ][ j ] < buckets [ i ][ j - 1 ]: # \u5c0f\u4e8e,\u6876\u5185\u5143\u7d20\u5347\u5e8f,\u82e5\u5927\u4e8e\u964d\u5e8f buckets [ i ][ j ], buckets [ i ][ j - 1 ] = buckets [ i ][ j - 1 ], buckets [ i ][ j ] else : break # -- \u5217\u8868\u6392\u5e8f\u540e\u7684\u7ed3\u679c sorted_li = [] for buc in buckets : sorted_li . extend ( buc ) return sorted_li if __name__ == '__main__' : import random li = [ random . randint ( 0 , 10000 ) for _ in range ( 100000 )] print ( bucket_sort ( li )[: 100 ]) \"\"\" \u4ee3\u7801\u53ef\u4ee5\u4f18\u5316. \u4e0a\u8ff0\u4ee3\u7801\u4e2d,\u662f\u63d2\u5165\u540e\u7acb\u5373\u5bf9\u6876\u8fdb\u884c\u6392\u5e8f.\u53ef\u4ee5\u8bd5\u8bd5,\u63d2\u5165\u5b8c\u540e,\u518d\u5bf9\u6bcf\u4e2a\u6876\u4f7f\u7528\u5feb\u6392\u7b49\u8fdb\u884c\u6392\u5e8f. \"\"\" \u8ba8\u8bba \u6876\u6392\u5e8f\u7684\u8868\u73b0\u53d6\u51b3\u4e8e\u6570\u636e\u7684\u5206\u5e03, \u4e5f\u5c31\u662f\u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u6570\u636e\u6392\u5e8f\u65f6\u91c7\u53d6\u4e0d\u540c\u7684\u5206\u6876\u7b56\u7565. \u6bd4\u5982\u4e00\u4e07\u4e2a\u6570 , \u5206\u4e3a10\u4e2a\u6876 . \u800c90 % \u7684\u6570\u90fd\u5904\u4e8e9000 - 10000. \u90a3\u4e48\u5927\u591a\u6570\u7684\u6570\u636e\u90fd\u4f1a\u5206\u5230\u6700\u540e\u4e00\u4e2a\u6876\u91cc . \u8fd9\u65f6\u5019 , \u5e94\u8be5\u91c7\u53d6\u4e0d\u540c\u7684\u5206\u6876\u7b56\u7565 , \u6bd4\u5982\u5904\u4e8e0 - 9000 \u7684\u52062\u4e2a\u6876 , \u5904\u4e8e9000 - 10000 \u7684\u52068\u4e2a\u6876 .. \u6ce8 : n\u662f\u5217\u8868\u957f\u5ea6 , m\u662f\u6876\u7684\u4e2a\u6570 , k\u662f\u6839\u636en\u548cm\u7b97\u51fa\u6765\u7684 . \u7b80\u5355\u7406\u89e3 , k\u8868\u793a\u6876\u5e73\u5747\u591a\u957f . \u5177\u4f53\u5c31\u4e0d\u8ba8\u8bba\u4e86 . \u5e73\u5747\u60c5\u51b5\u65f6\u95f4\u590d\u6742\u5ea6 : O ( nk ) \u6700\u574f\u60c5\u51b5\u65f6\u95f4\u590d\u6742\u5ea6 : O ( n ^ 2 k ) \u7a7a\u95f4\u590d\u6742\u5ea6 : O ( n + k )","title":"\u6876\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/3_%E5%85%B6%E5%AE%83%E6%8E%92%E5%BA%8F/#_4","text":"\u591a\u5173\u952e\u5b57\u6392\u5e8f: \u5047\u5982\u73b0\u5728\u6709\u4e00\u4e2a\u5458\u5de5\u8868, \u5148\u6309\u7167\u5e74\u9f84\u8fdb\u884c\u6392\u5e8f, \u82e5\u5e74\u9f84\u76f8\u540c, \u518d\u6309\u7167\u85aa\u8d44\u8fdb\u884c\u6392\u5e8f. \u6ce8: \u82e5\u5e74\u9f84\u85aa\u8d44\u90fd\u4e00\u6837,\u6392\u5e8f\u540e\u548c\u6392\u5e8f\u524d\u76f8\u5bf9\u4f4d\u7f6e\u662f\u4e0d\u4f1a\u53d8\u7684.\u8fd9\u5c31\u662f\u7a33\u5b9a\u6027. \u5bf9[3,44,38,5,47,15,36,26,27,2,46,4,19,50,48], \u662f\u5426\u53ef\u770b\u4f5c\u662f\u591a\u5173\u952e\u5b57\u6392\u5e8f? def list_to_buckets ( li , base , iteration ): buckets = [[] for _ in range ( base )] for number in li : digit = ( number // ( base ** iteration )) % base buckets [ digit ] . append ( number ) return buckets def buckets_to_list ( buckets ): return [ x for buc in buckets for x in buc ] def radix_sort ( li , base = 10 ): max_val = max ( li ) it = 0 while base ** it <= max_val : li = buckets_to_list ( list_to_buckets ( li , base , it )) it += 1 return li if __name__ == '__main__' : import random li = list ( range ( 1000 )) random . shuffle ( li ) print ( li ) print ( radix_sort ( li )) \u65f6\u95f4\u590d\u6742\u5ea6: O(kn) k\u6307\u7684\u662f \u5206\u51e0\u6b21\u6876/\u6700\u5927\u7684\u6570\u6709\u591a\u5c11\u4f4d. \u7a7a\u95f4\u590d\u6742\u5ea6: O(n+k) \u8ddf\u6876\u6392\u5e8f\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e00\u6837! \u5206\u6876\u540e\u4f9d\u6b21\u8f93\u51fa,\u518d\u5206\u6876\u518d\u8f93\u51fa.. \u76f4\u5230\u6392\u5e8f\u597d. step1: \u5206\u4e860-9\u5341\u4e2a\u6876. \u9996\u5148\u6309\u7167\u201c\u4e2a\u4f4d\u201d\u5206\u6876, \u6bd4\u5982 36 26 46 \u6309\u7167\u5728\u539f\u5217\u8868\u4e2d\u7684\u987a\u5e8f\u653e\u5230\u4e866\u53f7\u6876\u4e2d. step2: \u4f9d\u6b21\u4ece\u5341\u4e2a\u6876\u4e2d\u5c06\u6570\u5b57\u62ff\u51fa\u6765.. \u5148\u8fdb\u6876\u7684\u5148\u51fa\u6765, \u5148\u8fdb\u5148\u51fa, \u6bd4\u5982 6\u53f7\u6876, 36 26 46 \u4f1a\u4f9d\u6b21 \u62ff\u51fa\u6765/\u8f93\u51fa. step3: \u518d\u6309\u7167\"\u5341\u4f4d\u5206\u6876\", \u6ca1\u6709\u5341\u4f4d\u7684,\u5341\u4f4d\u6570\u75280\u8868\u793a.. \u5206\u5b8c\u540e, \u518d\u4f9d\u6b21 (\u6876\u4f9d\u6b21,\u6876\u4e2d\u5143\u7d20\u4f9d\u6b21/\u5148\u8fdb\u5148\u51fa) \u62ff\u51fa\u5c31\u662f\u6392\u5e8f\u597d\u7684!!! \u4ee3\u7801\u5b9e\u73b0: def radix_sort ( li ): max_num = max ( li ) # max_num\u7684\u4f4d\u6570\u662f\u51e0,\u5c31\u9700\u8981\u5206\u51e0\u6b21\u6876 eg: 876 -> 3; 66 -> 2; 10000 -> 5 # \u6700\u7b80\u5355\u7684\u65b9\u6cd5,\u7528\u5bf9\u6570\u5411\u4e0b\u53d6\u6574.\u53ef\u4ee5\u6c42\u5f97\u5206\u51e0\u6b21\u6876.. # \u8fd9\u91cc\u7528\u4e2awhile\u6765\u5b9e\u73b0. it \u4e3a\u5206\u6876\u7684\u6b21\u6570. \"\"\" it = 0 while 10 ** it <= max_num: it += 1 \"\"\" it = 0 while 10 ** it <= max_num : buckets = [[] for _ in range ( 10 )] # \u6bcf\u6b21\u5206\u6876\u90fd\u8981\u521d\u59cb\u5316\u8fd910\u4e2a\u6876 for var in li : # -- \u6839\u636eit\u7684\u503c\u51b3\u5b9a\u53d6\u54ea\u4f4d\u4e0a\u7684\u6570,\u5e76\u53d6\u51fa\u6765 \u6bd4\u5982\u6570\u4e3a987 # it=0 \u53d6\u4e2a\u4f4d 987%10 # it=1 \u53d6\u5341\u4f4d 987//10%10 # it=2 \u53d6\u767e\u4f4d 987//100%10 digit = ( var // ( 10 ** it )) % 10 # -- \u53d6\u51fa\u6765\u7684\u6570\u51b3\u5b9a\u4e86\u8981\u5206\u5230\u54ea\u4e2a\u6876\u91cc buckets [ digit ] . append ( var ) # for\u5faa\u73af\u7ed3\u675f,\u610f\u5473\u7740\u8fd9\u4e00\u8f6e\u7684\u5206\u6876\u7ed3\u675f,\u63a5\u7740\u9700\u8981\u5c06\u6876\u4e2d\u7684\u6570\u636e\u5199\u56deli\u91cc li . clear () # \u6e05\u7a7a for buc in buckets : li . extend ( buc ) # \u653e\u56de it += 1 if __name__ == '__main__' : import random li = list ( range ( 1000 )) random . shuffle ( li ) print ( li ) radix_sort ( li ) print ( li ) \"\"\" \u8fd9\u4e09\u79cd\u6392\u5e8f\u7b97\u6cd5\u90fd\u5229\u7528\u4e86\u6876\u7684\u6982\u5ff5,\u4f46\u5bf9\u6876\u7684\u4f7f\u7528\u65b9\u6cd5\u4e0a\u6709\u660e\u663e\u5dee\u5f02: \u8ba1\u6570\u6392\u5e8f: \u53ea\u6709\u4e00\u4e2a\u6876,\u53ea\u5b58\u50a8\u5355\u4e00\u952e\u503c; \u6876\u6392\u5e8f: \u6bcf\u4e2a\u6876\u5b58\u50a8\u4e00\u5b9a\u8303\u56f4\u7684\u6570\u503c,\u6876\u5185\u5143\u7d20\u9700\u8981\u6392\u5e8f.\u53ea\u88c5\u4e00\u6b21\u6876. \u57fa\u6570\u6392\u5e8f: \u6839\u636e\u952e\u503c\u7684\u6bcf\u4f4d\u6570\u5b57\u6765\u5206\u914d\u6876.\u4e0d\u9700\u8981\u5bf9\u6876\u5185\u5143\u7d20\u6392\u5e8f.\u88c5\u591a\u6b21\u6876. \u57fa\u6570\u6392\u5e8f O(kn) --> k\u662f\u4ee510\u4e3a\u5e95,n\u7684log \u5feb\u6392 O(nlogn) --> logn\u662f\u4ee52\u4e3a,n\u7684log \u5e73\u5747\u5206\u5e03\u7684\u60c5\u51b5\u4e0b,\u770b\u5728\u54ea\u4e2a\u8303\u56f4\u5185,\u5f00\u59cb\u65f6\u57fa\u6570\u6bd4\u5feb\u6392\u5feb,\u5f80\u540e\u8d8a\u6765\u8d8a\u5927,\u662f\u5feb\u6392\u6bd4\u57fa\u6570\u5feb.\u8ddf\u6570\u5b66\u6709\u5173,\u5c31\u4e0d\u6df1\u7a76\u4e86.(\u3064\u0414`)\u30ce \u800c\u4e14\u57fa\u6570\u6392\u5e8f\u8ddf\u79bb\u6563\u70b9\u6709\u5173,\u4e07\u4e00\u90a3\u4e2a\u6700\u5927\u7684\u6570\u8fdc\u5927\u4e8e\u5176\u5b83\u6570,\u6216\u8005\u5206\u5e03\u4e0d\u5747\u5300??\u5e76\u4e14\u57fa\u6570\u6392\u5e8f\u8fd8\u5f97\u6d88\u8017\u6876.\u90a3\u8fd8\u662f\u5feb\u6392\u597d. \u6269\u5c55: \u5b57\u7b26\u4e32\u5206\u6876,\u53ea\u8003\u8651\u5b57\u6bcd26\u4e2a\u6876,\u8003\u8651ACSII\u7801128\u4e2a\u6876 eg: abcd\u4e0eab\u6bd4\u8f83,\u9700\u8981ab\u5728\u540e\u9762\u52a00 --> abcd ab00 \"\"\"","title":"\u57fa\u6570\u6392\u5e8f"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/4_%E6%9F%A5%E6%89%BE%E4%B9%A0%E9%A2%98/","text":"\u4e60\u98981 \u00b6 \u7ed9\u4e24\u4e2a\u5b57\u7b26\u4e32s\u548ct, \u5224\u65adt\u662f\u5426\u4e3as\u91cd\u65b0\u6392\u5e8f\u540e\u7ec4\u6210\u7684\u5355\u8bcd. \u4e3e\u4e2a\u6817\u5b50: s = \"anagram\", t = \"nagaram\", return true. s = \"rat\", t = \"car\", return false. # -- \u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u53ef\u80fd\u6bd4O(nlogn)\u5feb def is_anagram_1 ( s , t ): return sorted ( list ( s )) == sorted ( list ( t )) # -- \u65f6\u95f4\u590d\u6742\u5ea6O(n) def is_anagram_2 ( s , t ): dict_1 = {} dict_2 = {} for ch in s : dict_1 [ ch ] = dict_1 . get ( ch , 0 ) + 1 for ch in t : dict_2 [ ch ] = dict_2 . get ( ch , 0 ) + 1 return dict_1 == dict_2 \u4e60\u98982 \u00b6 \u7ed9\u5b9a\u4e00\u4e2am * n\u7684\u4e8c\u7ef4\u5217\u8868, \u67e5\u627e\u4e00\u4e2a\u6570\u662f\u5426\u5b58\u5728. \u5217\u8868\u6709\u4ee5\u4e0b\u7279\u6027: eg [ [1,3,5,7], [10,11,16,20], [23,30,34,50] ] \u6bcf\u4e00\u884c\u7684\u5217\u8868\u4ece\u5de6\u5230\u53f3\u5df2\u7ecf\u6392\u5e8f\u597d. \u6bcf\u4e00\u884c\u7b2c\u4e00\u4e2a\u6570\u6bd4\u4e0a\u4e00\u884c\u6700\u540e\u4e00\u4e2a\u6570\u5927. \u4f7f\u7528\u4e8c\u5206\u6cd5\u7684\u601d\u60f3\u4f1a\u6bd4\u7b2c\u4e00\u79cd\u5feb!! O(logn) < O(n) \"\"\" [ [1, 3, 5, 7], [10, 11, 16, 20], [23, 30, 34, 50] ] \"\"\" # -- \u7ebf\u6027\u67e5\u627e # \u5047\u8bbe\u8be5\u77e9\u9635\u6709m\u884cn\u5217,\u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(mn),\u53d8\u76f8\u7684\u53ef\u4ee5\u770b\u4f5c\u662f\u7ebf\u6027\u67e5\u627e,\u5373\u4e00\u4e2a\u4e00\u4e2a\u7684\u67e5\u627e. def search_matrix_1 ( matrix , target ): for line in matrix : # O(m) if target in line : # O(n) return True else : return False # -- \u4e8c\u5206\u67e5\u627e # \u56e0\u4e3a\u77e9\u9635\u662f\u6709\u5e8f\u7684,\u867d\u8bf4\u662f\u4e8c\u7ef4\u7684,\u4f46\u4f9d\u65e7\u53ef\u4ee5\u8003\u8651\u7528\u4e8c\u5206\u67e5\u627e\u7684\u601d\u60f3\u6765\u89e3\u51b3 # \u65f6\u95f4\u590d\u6742\u5ea6. O(logn) n\u6307\u4e8c\u7ef4\u5217\u8868\u5143\u7d20\u7684\u4e2a\u6570 def search_matrix_2 ( matrix , target ): h = len ( matrix ) # \u77e9\u9635\u6709\u591a\u5c11\u884c if h == 0 : return False # [] \u4e34\u754c\u6761\u4ef6 w = len ( matrix [ 0 ]) # \u77e9\u9635\u6709\u591a\u5c11\u5217 if w == 0 : return False # [[],[],[]] \u4e34\u754c\u6761\u4ef6 left = 0 right = w * h - 1 # -- mid=(left+right)//2. \u4e0d\u80fd\u76f4\u63a5\u5b9a\u4f4d\u5230\u884c\u4e0b\u6807\u548c\u5217\u4e0b\u6807,\u8981\u52a0\u5de5\u4e00\u4e0b \"\"\" 0 1 2 3 4 5 6 7 8 9 10 11 \u6240\u5728\u4f4d\u7f6e\u7684\u4e0b\u6807 \u9664\u4ee54\u5f97\u5230\u81ea\u5df1\u6240\u5728\u884c;\u5bf94\u6c42\u4f59\u5f97\u5230\u81ea\u5df1\u6240\u5728\u5217 \"\"\" while left <= right : mid = ( left + right ) // 2 i = mid // w # \u6240\u5728\u884c j = mid // w # \u6240\u5728\u5217 if matrix [ i ][ j ] == target : return True elif matrix [ i ][ j ] > target : right = mid - 1 else : left = mid + 1 return False \u4e60\u98983 \u00b6 \u7ed9\u5b9a\u4e00\u4e2a\u5217\u8868\u548c\u4e00\u4e2a\u6574\u6570. \u8bbe\u8ba1\u7b97\u6cd5\u627e\u5230\u4e24\u4e2a\u6570\u7684\u4e0b\u6807.\u4f7f\u5f97\u4e24\u4e2a\u6570\u4e4b\u548c\u4e3a\u7ed9\u5b9a\u7684\u6574\u6570. <\u53ef\u4ee5\u4fdd\u8bc1\u6709\u7ed3\u679c\u4e14\u53ea\u6709\u4e00\u4e2a\u7ed3\u679c>. \u4e3e\u4e2a\u6817\u5b50: \u5217\u8868[1,2,5,4]\u4e0e\u76ee\u6807\u6574\u65703, 1+2=3, \u7ed3\u679c\u4e3a (0,1). \u65b9\u5f0f\u4e00: \u4f1a\u91cd\u590d\u76f8\u52a0 def two_sum_1 ( li , target ): n = len ( li ) # \u8fd9\u79cd\u7b97\u6cd5\u4e0d\u597d,\u592a\u6162,\u4f1a\u91cd\u590d\u76f8\u52a0 [3,2,4] 3+2 2+3 for i in range ( n ): for j in range ( n ): # i!=j \u662f\u4e3a\u4e86\u907f\u514d [3,2,4] 3+3=6\u7684\u60c5\u51b5. if i != j : if li [ i ] + li [ j ] == target : return sorted ([ i , j ]) \u65b9\u5f0f\u4e8c: \u76f8\u52a0\u6b21\u6570\u4e0e\u65b9\u6cd5\u4e00\u76f8\u6bd4,\u51cf\u5c11\u4e86\u4e00\u534a def two_sum_2 ( li , target ): n = len ( li ) # [3,2,4] 3+2 3+4 2+4 \u6bcf\u4e2a\u6570\u8ddf\u5728\u540e\u9762\u7684\u6570\u76f8\u52a0(\u5f53\u7136\u8ddf\u524d\u9762\u7684\u4e5f\u53ef\u4ee5) for i in range ( n ): for j in range ( i + 1 , n ): if li [ i ] + li [ j ] == target : return sorted ([ i , j ]) \u65b9\u5f0f\u4e09, \u6dfb\u52a0\u4e86\u4e00\u4e2a\u6761\u4ef6,\u5047\u8bbe\u5217\u8868\u662f\u6709\u5e8f\u7684, \u4f7f\u7528\u4e8c\u5206\u67e5\u627e eg: \u5728[2,6,7,8]\u627e\u76f8\u52a0\u4e3a14\u7684\u4e24\u4e2a\u6570. \u62ff\u52306\u540e,\u901a\u8fc7\u4e8c\u5206\u6cd5\u57286\u4f4d\u7f6e\u540e\u9762\u7684\u6570[7,8]\u4e2d\u627e8 class Solution : def binary_search ( self , li , left , right , val ): # left = 0 # right = len(li) - 1 while left <= right : mid = ( left + right ) // 2 if li [ mid ] == val : return mid elif li [ mid ] > val : right = mid - 1 else : left = mid + 1 return None # \u81ea\u5df1\u52a0\u4e86\u4e00\u4e2a\u6761\u4ef6,\u82e5li\u5217\u8868\u662f\u6709\u5e8f\u7684. def two_sum_3 ( self , li , target ): n = len ( li ) for i in range ( n ): a = li [ i ] b = target - a # self.binary_search(li[i + 1:], b) # \u5207\u7247\u4f1a\u6d88\u8017\u8d44\u6e90,\u4f20left\u548cright\u8fdb\u53bb\u66f4\u597d j = self . binary_search ( li , i + 1 , n - 1 , b ) if j : break return i , j ## -- \u5217\u8868\u662f\u6709\u5e8f\u7684,\u8fd8\u53ef\u4ee5\u8fd9\u6837\u505a,\u4f9d\u65e7\u662f\u4e8c\u5206\u67e5\u627e\u7684\u601d\u60f3 class Solution : def twoSum ( self , nums : List [ int ], target : int ) -> List [ int ]: left = 0 right = len ( nums ) - 1 while left < right : if nums [ left ] + nums [ right ] == target : return [ left , right ] if nums [ left ] + nums [ right ] < target : left += 1 if nums [ left ] + nums [ right ] > target : right -= 1 \u65b9\u5f0f\u56db, \u5217\u8868\u662f\u65e0\u5e8f\u7684,\u4f7f\u7528\u4e8c\u5206\u67e5\u627e. class Solution : def binary_search ( self , li , left , right , val ): while left <= right : mid = ( left + right ) // 2 if li [ mid ][ 0 ] == val : return mid elif li [ mid ][ 0 ] > val : right = mid - 1 else : left = mid + 1 return None def twoSum ( self , li , target ): new_nums = [[ v , i ] for i , v in enumerate ( li )] # \u8bb0\u5f55\u4e0b\u6392\u5e8f\u4e4b\u524d\u6bcf\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 new_nums . sort ( key = lambda x : x [ 0 ]) # sort\u539f\u5730\u6539\u53d8,\u8fd4\u56deNone;sorted\u4e0d\u662f\u539f\u5730\u53d8,\u8fd4\u56de\u6539\u53d8\u540e\u7684\u5217\u8868 n = len ( new_nums ) for i in range ( n ): a = new_nums [ i ][ 0 ] b = target - a j = self . binary_search ( new_nums , i + 1 , n - 1 , b ) if j : break return sorted ([ new_nums [ i ][ 1 ], new_nums [ j ][ 1 ]])","title":"\u67e5\u627e\u4e60\u9898"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/4_%E6%9F%A5%E6%89%BE%E4%B9%A0%E9%A2%98/#1","text":"\u7ed9\u4e24\u4e2a\u5b57\u7b26\u4e32s\u548ct, \u5224\u65adt\u662f\u5426\u4e3as\u91cd\u65b0\u6392\u5e8f\u540e\u7ec4\u6210\u7684\u5355\u8bcd. \u4e3e\u4e2a\u6817\u5b50: s = \"anagram\", t = \"nagaram\", return true. s = \"rat\", t = \"car\", return false. # -- \u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u53ef\u80fd\u6bd4O(nlogn)\u5feb def is_anagram_1 ( s , t ): return sorted ( list ( s )) == sorted ( list ( t )) # -- \u65f6\u95f4\u590d\u6742\u5ea6O(n) def is_anagram_2 ( s , t ): dict_1 = {} dict_2 = {} for ch in s : dict_1 [ ch ] = dict_1 . get ( ch , 0 ) + 1 for ch in t : dict_2 [ ch ] = dict_2 . get ( ch , 0 ) + 1 return dict_1 == dict_2","title":"\u4e60\u98981"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/4_%E6%9F%A5%E6%89%BE%E4%B9%A0%E9%A2%98/#2","text":"\u7ed9\u5b9a\u4e00\u4e2am * n\u7684\u4e8c\u7ef4\u5217\u8868, \u67e5\u627e\u4e00\u4e2a\u6570\u662f\u5426\u5b58\u5728. \u5217\u8868\u6709\u4ee5\u4e0b\u7279\u6027: eg [ [1,3,5,7], [10,11,16,20], [23,30,34,50] ] \u6bcf\u4e00\u884c\u7684\u5217\u8868\u4ece\u5de6\u5230\u53f3\u5df2\u7ecf\u6392\u5e8f\u597d. \u6bcf\u4e00\u884c\u7b2c\u4e00\u4e2a\u6570\u6bd4\u4e0a\u4e00\u884c\u6700\u540e\u4e00\u4e2a\u6570\u5927. \u4f7f\u7528\u4e8c\u5206\u6cd5\u7684\u601d\u60f3\u4f1a\u6bd4\u7b2c\u4e00\u79cd\u5feb!! O(logn) < O(n) \"\"\" [ [1, 3, 5, 7], [10, 11, 16, 20], [23, 30, 34, 50] ] \"\"\" # -- \u7ebf\u6027\u67e5\u627e # \u5047\u8bbe\u8be5\u77e9\u9635\u6709m\u884cn\u5217,\u90a3\u4e48\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(mn),\u53d8\u76f8\u7684\u53ef\u4ee5\u770b\u4f5c\u662f\u7ebf\u6027\u67e5\u627e,\u5373\u4e00\u4e2a\u4e00\u4e2a\u7684\u67e5\u627e. def search_matrix_1 ( matrix , target ): for line in matrix : # O(m) if target in line : # O(n) return True else : return False # -- \u4e8c\u5206\u67e5\u627e # \u56e0\u4e3a\u77e9\u9635\u662f\u6709\u5e8f\u7684,\u867d\u8bf4\u662f\u4e8c\u7ef4\u7684,\u4f46\u4f9d\u65e7\u53ef\u4ee5\u8003\u8651\u7528\u4e8c\u5206\u67e5\u627e\u7684\u601d\u60f3\u6765\u89e3\u51b3 # \u65f6\u95f4\u590d\u6742\u5ea6. O(logn) n\u6307\u4e8c\u7ef4\u5217\u8868\u5143\u7d20\u7684\u4e2a\u6570 def search_matrix_2 ( matrix , target ): h = len ( matrix ) # \u77e9\u9635\u6709\u591a\u5c11\u884c if h == 0 : return False # [] \u4e34\u754c\u6761\u4ef6 w = len ( matrix [ 0 ]) # \u77e9\u9635\u6709\u591a\u5c11\u5217 if w == 0 : return False # [[],[],[]] \u4e34\u754c\u6761\u4ef6 left = 0 right = w * h - 1 # -- mid=(left+right)//2. \u4e0d\u80fd\u76f4\u63a5\u5b9a\u4f4d\u5230\u884c\u4e0b\u6807\u548c\u5217\u4e0b\u6807,\u8981\u52a0\u5de5\u4e00\u4e0b \"\"\" 0 1 2 3 4 5 6 7 8 9 10 11 \u6240\u5728\u4f4d\u7f6e\u7684\u4e0b\u6807 \u9664\u4ee54\u5f97\u5230\u81ea\u5df1\u6240\u5728\u884c;\u5bf94\u6c42\u4f59\u5f97\u5230\u81ea\u5df1\u6240\u5728\u5217 \"\"\" while left <= right : mid = ( left + right ) // 2 i = mid // w # \u6240\u5728\u884c j = mid // w # \u6240\u5728\u5217 if matrix [ i ][ j ] == target : return True elif matrix [ i ][ j ] > target : right = mid - 1 else : left = mid + 1 return False","title":"\u4e60\u98982"},{"location":"13_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/4_%E6%9F%A5%E6%89%BE%E4%B9%A0%E9%A2%98/#3","text":"\u7ed9\u5b9a\u4e00\u4e2a\u5217\u8868\u548c\u4e00\u4e2a\u6574\u6570. \u8bbe\u8ba1\u7b97\u6cd5\u627e\u5230\u4e24\u4e2a\u6570\u7684\u4e0b\u6807.\u4f7f\u5f97\u4e24\u4e2a\u6570\u4e4b\u548c\u4e3a\u7ed9\u5b9a\u7684\u6574\u6570. <\u53ef\u4ee5\u4fdd\u8bc1\u6709\u7ed3\u679c\u4e14\u53ea\u6709\u4e00\u4e2a\u7ed3\u679c>. \u4e3e\u4e2a\u6817\u5b50: \u5217\u8868[1,2,5,4]\u4e0e\u76ee\u6807\u6574\u65703, 1+2=3, \u7ed3\u679c\u4e3a (0,1). \u65b9\u5f0f\u4e00: \u4f1a\u91cd\u590d\u76f8\u52a0 def two_sum_1 ( li , target ): n = len ( li ) # \u8fd9\u79cd\u7b97\u6cd5\u4e0d\u597d,\u592a\u6162,\u4f1a\u91cd\u590d\u76f8\u52a0 [3,2,4] 3+2 2+3 for i in range ( n ): for j in range ( n ): # i!=j \u662f\u4e3a\u4e86\u907f\u514d [3,2,4] 3+3=6\u7684\u60c5\u51b5. if i != j : if li [ i ] + li [ j ] == target : return sorted ([ i , j ]) \u65b9\u5f0f\u4e8c: \u76f8\u52a0\u6b21\u6570\u4e0e\u65b9\u6cd5\u4e00\u76f8\u6bd4,\u51cf\u5c11\u4e86\u4e00\u534a def two_sum_2 ( li , target ): n = len ( li ) # [3,2,4] 3+2 3+4 2+4 \u6bcf\u4e2a\u6570\u8ddf\u5728\u540e\u9762\u7684\u6570\u76f8\u52a0(\u5f53\u7136\u8ddf\u524d\u9762\u7684\u4e5f\u53ef\u4ee5) for i in range ( n ): for j in range ( i + 1 , n ): if li [ i ] + li [ j ] == target : return sorted ([ i , j ]) \u65b9\u5f0f\u4e09, \u6dfb\u52a0\u4e86\u4e00\u4e2a\u6761\u4ef6,\u5047\u8bbe\u5217\u8868\u662f\u6709\u5e8f\u7684, \u4f7f\u7528\u4e8c\u5206\u67e5\u627e eg: \u5728[2,6,7,8]\u627e\u76f8\u52a0\u4e3a14\u7684\u4e24\u4e2a\u6570. \u62ff\u52306\u540e,\u901a\u8fc7\u4e8c\u5206\u6cd5\u57286\u4f4d\u7f6e\u540e\u9762\u7684\u6570[7,8]\u4e2d\u627e8 class Solution : def binary_search ( self , li , left , right , val ): # left = 0 # right = len(li) - 1 while left <= right : mid = ( left + right ) // 2 if li [ mid ] == val : return mid elif li [ mid ] > val : right = mid - 1 else : left = mid + 1 return None # \u81ea\u5df1\u52a0\u4e86\u4e00\u4e2a\u6761\u4ef6,\u82e5li\u5217\u8868\u662f\u6709\u5e8f\u7684. def two_sum_3 ( self , li , target ): n = len ( li ) for i in range ( n ): a = li [ i ] b = target - a # self.binary_search(li[i + 1:], b) # \u5207\u7247\u4f1a\u6d88\u8017\u8d44\u6e90,\u4f20left\u548cright\u8fdb\u53bb\u66f4\u597d j = self . binary_search ( li , i + 1 , n - 1 , b ) if j : break return i , j ## -- \u5217\u8868\u662f\u6709\u5e8f\u7684,\u8fd8\u53ef\u4ee5\u8fd9\u6837\u505a,\u4f9d\u65e7\u662f\u4e8c\u5206\u67e5\u627e\u7684\u601d\u60f3 class Solution : def twoSum ( self , nums : List [ int ], target : int ) -> List [ int ]: left = 0 right = len ( nums ) - 1 while left < right : if nums [ left ] + nums [ right ] == target : return [ left , right ] if nums [ left ] + nums [ right ] < target : left += 1 if nums [ left ] + nums [ right ] > target : right -= 1 \u65b9\u5f0f\u56db, \u5217\u8868\u662f\u65e0\u5e8f\u7684,\u4f7f\u7528\u4e8c\u5206\u67e5\u627e. class Solution : def binary_search ( self , li , left , right , val ): while left <= right : mid = ( left + right ) // 2 if li [ mid ][ 0 ] == val : return mid elif li [ mid ][ 0 ] > val : right = mid - 1 else : left = mid + 1 return None def twoSum ( self , li , target ): new_nums = [[ v , i ] for i , v in enumerate ( li )] # \u8bb0\u5f55\u4e0b\u6392\u5e8f\u4e4b\u524d\u6bcf\u4e2a\u5143\u7d20\u7684\u4e0b\u6807 new_nums . sort ( key = lambda x : x [ 0 ]) # sort\u539f\u5730\u6539\u53d8,\u8fd4\u56deNone;sorted\u4e0d\u662f\u539f\u5730\u53d8,\u8fd4\u56de\u6539\u53d8\u540e\u7684\u5217\u8868 n = len ( new_nums ) for i in range ( n ): a = new_nums [ i ][ 0 ] b = target - a j = self . binary_search ( new_nums , i + 1 , n - 1 , b ) if j : break return sorted ([ new_nums [ i ][ 1 ], new_nums [ j ][ 1 ]])","title":"\u4e60\u98983"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/","text":"vmware \u00b6 vmware\u662f\u865a\u62df\u5316\u8f6f\u4ef6.(\u5b9e\u9a8c\u73af\u5883\u7528,\u6b64\u8f6f\u4ef6\u4e0d\u5fc5\u6df1\u7a76) windows\u5e73\u53f0\u4f7f\u7528\u7684\u8bdd\u4e0b\u8f7d - vmware workstation; mac\u5e73\u53f0\u4f7f\u7528\u7684\u8bdd\u4e0b\u8f7d - vmware fusion. \u4ee5\u4e0b\u662f\u57fa\u4e8evmware workstation\u7684\u4f7f\u7528\u8fdb\u884c\u7684\u9610\u8ff0\u54e6~ \u539f\u7406 \u00b6 vm1,vm2,vm3 \u5e94\u7528\u7a0b\u5e8fvmware \u64cd\u4f5c\u7cfb\u7edf \u8ba1\u7b97\u673a\u786c\u4ef6 Ps: \u4e00\u4e9b\u5feb\u6377\u952e ctrl+r \u91cd\u542f\u8ba1\u7b97\u673a ctrl+alt \u5c06\u9f20\u6807\u4ece\u865a\u62df\u673a\u4e2d\u5207\u6362\u5230\u5bbf\u4e3b\u673a \u5520\u5520\u55d1: \u670d\u52a1\u5668\u4e00\u591a,\u5e94\u8be5\u4f7f\u7528\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0\u7ba1\u7406\u6bcf\u53f0\u670d\u52a1\u5668\u7684IP\u8d26\u6237\u5bc6\u7801,\u800c\u4e0d\u662f\u8bb0\u5f55\u5728excel\u8868\u4e0a. \u8fd0\u7ef4\u5728\u90e8\u7f72\u65f6\u4f1a\u5f88\u75db\u82e6,\u56e0\u4e3a\u8981\u627e\u8f6f\u4ef6\u7684\u4f9d\u8d56\u5305. \u800cgo\u8bed\u8a00\u6709\u4e2a\u4fbf\u5229\u4e4b\u5904,\u5f00\u53d1\u597d\u8f6f\u4ef6\u540e,\u53ef\u4ee5\u5c06\u8f6f\u4ef6\u6240\u6709\u7684\u4f9d\u8d56\u5305\u6253\u5230\u4e00\u8d77\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6.\u90e8\u7f72\u4f1a\u5f88\u65b9\u4fbf. \u7f51\u7edc\u4e09\u79cd\u6a21\u5f0f \u00b6 1> \u4ec5\u4e3b\u673a (\u51e0\u4e4e\u4e0d\u7528) vm\u53ea\u80fd\u4e0e\u5bbf\u4e3b\u673a\u53ca\u5bbf\u4e3b\u673a\u4e0a\u7684\u5176\u4ed6vm\u901a\u4fe1,\u4e0d\u80fd\u4e0e\u5916\u7f51\u901a\u4fe1 \u5bbf\u4e3b\u673a\u4f1a\u4ea7\u6210\u4e00\u4e2a\u865a\u62df\u7f51\u5361VMnet1,\u6240\u4ee5\u7684vm\u90fd\u4f7f\u7528\u8fd9\u4e2a\u865a\u62df\u7f51\u5361,VMnet1\u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a\u4ea4\u6362\u673a. 2> \u6865\u63a5 (\u4e0d\u63a8\u8350) vm\u4e0e\u5bbf\u4e3b\u673a\u5904\u4e8e\u540c\u4e00\u4e2aLAN\u4e2d,\u76f8\u5f53\u4e8e\u5728\u5c40\u57df\u7f51\u4e2d\u65b0\u589e\u4e86\u4e00\u53f0\u4e3b\u673a, vm\u4f1a\u76f4\u63a5\u901a\u8fc7\u5bbf\u4e3b\u673a\u7684\u672c\u5730\u7f51\u5361\u8fdb\u884c\u901a\u4fe1. \u82e5\u4f7f\u7528\u9759\u6001\u914d\u7f6e,LAN\u4e2dIP\u6613\u51b2\u7a81 3> NAT (\u63a8\u8350) \u7f51\u7edc\u5730\u5740\u8f6c\u6362 NAT\u6a21\u5f0f\u7684\u865a\u62df\u673a\u5c31\u662f\u901a\u8fc7\u5bbf\u4e3b\u673a(\u7269\u7406\u8ba1\u7b97\u673a)\u4e0a\u7f51\u548c\u4ea4\u6362\u6570\u636e\u7684 \u5bbf\u4e3b\u673a\u4f1a\u4ea7\u751f\u4e00\u4e2a\u865a\u62df\u7f51\u5361VMnet8\u7ed9vm\u4f7f\u7528,\u5728VMnet1\u57fa\u7840\u4e4b\u4e0aVMnet8\u53ef\u4ee5\u505a\u8def\u7531\u8f6c\u53d1 \u8def\u5f84: vm - VMnet8 - \u865a\u62df\u7684\u8def\u7531 - \u5bbf\u4e3b\u673a\u7684\u672c\u5730\u7f51\u5361 - \u4ea4\u6362\u673a - \u8def\u7531\u5668 - internet vmware\u521b\u5efa\u7684\u865a\u62df\u673a\u9ed8\u8ba4\u4f1a\u4f7f\u7528\u672c\u5730DHCP\u670d\u52a1\u5c06IP\u5730\u5740\u5206\u914d\u7ed9\u865a\u62df\u673a. \u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u8fdb\u884c\u7f51\u7edc\u7684\u914d\u7f6e. \u6ce8\u610f: \u7f51\u5173\u7684IP,\u82e5\u662f\u4e00\u4e2ac\u7c7b\u5730\u5740,\u53bb\u5934\u53bb\u5c3e 1-254\u53ef\u7528,\u4e60\u60ef\u4f1a\u75281\u6216254. \u670d\u52a1\u5668\u96c6\u7fa4\u5316\u4f5c\u4e1a,\u914d\u7f6e\u7684IP\u4e00\u5b9a\u662f\u9759\u6001\u914d\u7f6e,\u56fa\u5b9a\u6b7b\u7684!! centos\u7684\u5b89\u88c5 \u00b6 vmware fusion: https://blog.csdn.net/vbirdbest/article/details/107375067 vmware workstation: https://www.cnblogs.com/linhaifeng/p/13252347.html .iso\u7ed3\u5c3e\u7684\u955c\u50cf\u6587\u4ef6 \u901a\u5e38\u538b\u7f29\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801 \u955c\u50cf\u6587\u4ef6\u5c31\u662f\u4e00\u79cd\u7279\u6b8a\u683c\u5f0f\u7684\u538b\u7f29\u5305 \u666e\u901a\u8d26\u6237\u5bc6\u7801 1998.0307 root\u8d26\u6237\u5bc6\u7801 123456 \u25a1 \u6309\u4f4fF2\u8fdb\u5165BIOS\u754c\u9762 \u4fee\u6539\u542f\u52a8\u9879, Hard Drive(\u672c\u5730\u786c\u76d8)\u7b2c\u4e00\u4f4d,\u5176\u6b21\u662fCD-ROM Drive(CD/DVD\u955c\u50cf\u6587\u4ef6) \u25a1 \u5728\"\u5b89\u88c5\u4fe1\u606f\u6458\u8981\"\u9875\u9762 1> \u8f6f\u4ef6\u5b89\u88c5 -- \u4e00\u822c\u9009\u62e9 \u6700\u5c0f\u5b89\u88c5 2> KDUMP -- \u53d6\u6d88\u52fe\u9009.\u56e0\u4e3a\u6b64\u529f\u80fd\u4f1a\u5360\u7528\u5185\u5b58.(OS\u7684\u5f00\u53d1\u8005\u4f7f\u7528,\u5bf9\u6211\u4eec\u6765\u8bf4\u6ca1\u7528) 3> \u7f51\u7edc\u4e0e\u4e3b\u673a\u540d(N) -- \u6253\u5f00 4> \u5b89\u88c5\u4f4d\u7f6e -- \u9009\u62e9\u201c\u6211\u8981\u914d\u7f6e\u5206\u533a\u201d Ps: \u5bf9vm\u5360\u7528\u7684\u5bbf\u4e3b\u673a\u7684\u90a3\u90e8\u5206\u786c\u76d8\u8fdb\u884c\u5206\u533a,\u4e00\u4e2a\u5206\u533a\u5c31\u662f\u4e00\u4e2a\u6587\u4ef6\u5939\u5bf9\u5e94\u4e00\u5757\u786c\u76d8\u7a7a\u95f4 \u786c\u76d8 -- \u6c34\u6876 \u5206\u533a -- \u6c34\u6876\u7684\u9694\u65ad \u6302\u8f7d\u70b9(eg: / /boot swap) -- \u67d0\u4e00\u4e2a\u5177\u4f53\u7684\u9694\u65ad \u6ce8\u610f\u54e6,/boot\u662f/\u7684\u5b50\u6587\u4ef6\u5939,\u4f46\u662f\u5b83\u4e24\u662f\u4e24\u4e2a\u5206\u533a, \u662f\u9694\u65ad\u4e86\u7684 ! [\u5206\u533a\u65b9\u6848] \u65b9\u6848\u4e00 \u5e38\u89c4\u751f\u4ea7\u573a\u666f: /boot \u76f8\u5f53\u4e8ewindows\u7684C\u76d8,300-500M,\u5efa\u8bae500M swap \u865a\u62df\u5185\u5b58,\u5360\u7528\u7684\u662f\u786c\u76d8\u7a7a\u95f4,1.5-2\u500d\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f(\u6700\u59278G) / \u6839\u5206\u533a \u5269\u4f59\u7a7a\u95f4 \u65b9\u6848\u4e8c \u6570\u636e\u5e93\u53ca\u5b58\u50a8\u89d2\u8272\u7684\u670d\u52a1\u5668,\u5373\u6709\u5927\u91cf\u91cd\u8981\u7684\u6570\u636e\u7684\u4e1a\u52a1: /boot swap /\u6839\u5206\u533a 50-200G,\u53ea\u5b58\u653e\u7cfb\u7edf\u76f8\u5173\u6587\u4ef6,\u7f51\u7ad9\u4e1a\u52a1\u6570\u636e\u4e0d\u653e\u8fd9\u91cc /data \u5269\u4e0b\u7684\u6240\u6709\u786c\u76d8\u7a7a\u95f4 So,\u672c\u65b9\u6848\u5176\u5b9e\u5c31\u662f\u628a\u91cd\u8981\u6570\u636e\u5355\u72ec\u5206\u533a\uff0c\u4fbf\u4e8e\u5907\u4efd\u548c\u7ba1\u7406 \u65b9\u6848\u4e09 \u5927\u578b\u95e8\u6237\u7f51\u7ad9 \u4e0d\u540c\u4e0e\u65b9\u6848\u4e8c\u5728\u4e8e \u65e0/data \u4f1a\u5c06\u5269\u4e0b\u7684\u786c\u76d8\u7a7a\u95f4\u6839\u636e\u9700\u6c42\u518d\u5206 So, \u6b64\u65b9\u6cd5\u66f4\u7075\u6d3b,\u6bd4\u8f83\u9002\u5408\u4e1a\u52a1\u7ebf\u6bd4\u8f83\u591a\u9700\u6c42\u4e0d\u786e\u5b9a\u7684\u5927\u4f01\u4e1a\u4f7f\u7528 \u4e91\u5e73\u53f0\u3001\u4e91\u73af\u5883\u8981\u8003\u8651\u52a8\u6001\u6269\u5bb9\u7684\u9700\u6c42\u4f1a\u4f7f\u7528LVM(\u903b\u8f91\u5377)\u5728\u7ebf\u8c03\u6574\u5206\u533a\u5927\u5c0f(\u6548\u7387\u80af\u5b9a\u4e0d\u5982\u76f4\u63a5\u56fa\u5b9a\u5206\u914d\u597d\u7684) Ps: \u7f51\u4e0a\u8fd8\u6709\u5f88\u591a\u65b9\u6848\u4f1a\u5efa\u7acb\u5f88\u591a\u5206\u533a/var,/swap,/usr\u7b49..\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a!!\u8981\u6709\u5ea6,\u4e0d\u7136\u4f1a\u5f88\u4e71.. \u25a1 \u5b89\u88c5\u597d\u8fdb\u5165\u9875\u9762\u540e,\u5728\u7ec8\u7aef\u5148\u8f93\u5165\u547d\u4ee4\u5b89\u88c5\u4e00\u4e9b\u8f6f\u4ef6\u5305 \u5728root\u8d26\u6237\u4e0b\u6267\u884c! yum -y install tree nmap sysstat lrzsz dos2unix telnet bash-completion bash-completion-extras vim lsof net-tools rsync ntpdate nfs-utils yum\u662fShell \u524d\u7aef\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668 yum\u8fd9\u4e2a\u5e94\u7528\u8f6f\u4ef6/\u5de5\u5177\u53ef\u7528\u4e8e\u53bbcentos\u5b98\u65b9\u4ed3\u5e93\u91cc\u4e0b\u8f7d\u4e00\u4e9b\u5e38\u7528\u7684\u8f6f\u4ef6. yum\u4e00\u5f00\u59cb\u5c31\u5bf9\u5e94\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684yum\u6e90,\u53ef\u81ea\u884c\u914d\u7f6e. yum update \u614e\u91cd!\u4f1a\u66f4\u65b0\u6240\u6709\u7684\u8f6f\u4ef6\u5305.\u4e0d\u8981\u8f7b\u6613\u4f7f\u7528,\u4e00\u822c\u53ea\u5728\u6700\u5f00\u59cb\u5b89\u88c5\u597d\u64cd\u4f5c\u7cfb\u7edf\u65f6\u4f7f\u7528\u4e0b. \u5728\u7ec8\u7aef\u770b\u5230 $ \u8868\u793a\u666e\u901a\u7528\u6237 # \u8868\u793aroot\u7ba1\u7406\u5458\u7528\u6237 \u51fa\u9519 1 : \u4f7f\u7528\u4e0d\u4e86yum\u547d\u4ee4,\u662f\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u4f7f\u7528\u4e00\u4e2ayum ps aux|grep yum kill - 9 487388 ( \u76f8\u5e94\u7684\u8fdb\u7a0b\u53f7 ) \u51fa\u9519 2 : \u4e0b\u8f7d\u4e0d\u4e86,\u53d1\u73b0\u4e0a\u4e0d\u4e86\u7f51,\u4f7f\u7528\u4e0b\u65b9\u8fd9\u6761\u547d\u4ee4\u91cd\u542f\u7f51\u7edc\u670d\u52a1.\u5b83\u5305\u542b\u91cd\u65b0\u6fc0\u6d3b\u7f51\u5361. systemctl restart network \u5b89\u88c5\u597d\u540e,\u53ef\u4ee5\u6253\u4e00\u4e2a\u5feb\u7167,\u7136\u540e\u6267\u884c rm - rf /* \u547d\u4ee4\u73a9\u4e00\u73a9,\u7136\u540e\u518d\u6062\u590d\u5feb\u7167. [ \u8865\u5145:linux\u652f\u6301\u591a\u4e2a\u8054\u673a\u7ec8\u7aef ] \u73b0\u5728\u6765\u770b,\u6ca1\u5565\u7528\u9014.. ctrl + alt + F'n' ( 1 < = n< = 6 ) xshell \u00b6 xshell\u662f\u4e00\u4e2a \u8fdc\u7a0b\u767b\u5f55 \u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f,\u5bf9\u5e94\u670d\u52a1\u7aef\u7a0b\u5e8fopenssh-server (\u8fd0\u884c\u5728linux\u4e0a\u7684\u8f6f\u4ef6 \u9ed8\u8ba4\u662f22\u53f7\u7aef\u53e3 ) ssh root@\u670d\u52a1\u5668\u7684ip systemctl status sshd \u53ef\u67e5\u770b\u670d\u52a1\u7aef\u8f6f\u4ef6\u72b6\u6001. \u5957\u63a5\u5b57\u5ba2\u6237\u7aef \u7f51\u7edc \u5957\u63a5\u5b57\u670d\u52a1\u7aef xshell ---------- openssh-server \u8fdc\u7a0b\u8fde\u63a5 \u00b6 \u6ce8\u610f: \u25b2 xshell\u53ea\u80fd\u7528\u5728windows\u7cfb\u7edf\u4e0a. \u25b2 mac\u7cfb\u7edf\u7684\u672c\u6e90\u5c31\u662flinux.. \u4f46\u51e1\u662flinux\u7cfb\u7edf,\u9ed8\u8ba4\u90fd\u4f1a\u5b89\u88c5\u8f6f\u4ef6openssh-server\u548copenssh-client. \u4e5f\u5c31\u662f\u8bf4,linux\u7cfb\u7edf\u7684\u4e3b\u673a\u53ef\u4ee5\u4f5c\u4e3a\u5ba2\u6237\u7aef\u8fde\u63a5\u522b\u4eba,\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u670d\u52a1\u7aef\u8ba9\u522b\u4eba\u8fde! \u5efa\u8bae\u4f7f\u7528iterm2. Ps: xshell\u7684\u4e0b\u8f7d\u597d\u540e\u521d\u59cb\u7684\u4e00\u70b9\u4f18\u5316. https://www.cnblogs.com/linhaifeng/p/13252347.html windows xshell \u7f13\u51b2\u533a\u7684\u8bbe\u7f6e!(\u63a7\u5236\u5185\u5bb9\u663e\u793a\u884c\u6570) \u4e0a\u4e0b\u7ffb\u9875: shift+PgUP shift+PgDn \u5728\u865a\u62df\u673a\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4: ifconfig \u5728\u8f93\u51fa\u7ed3\u679c\u91cc \u7f51\u5361\u540d:`ens33`\u662fvm\u7684\u672c\u5730\u7f51\u5361;`lo`\u662fvm\u672c\u5730\u56de\u73af\u7684\u7f51\u5361(\u6570\u636e\u8d70\u5230\u7f51\u5361\u53c8\u539f\u8def\u8fd4\u56de,\u7528\u4e8e\u6d4b\u8bd5). (\u7f51\u5361\u540d\u901a\u5e38\u4f1a\u6539\u6210eth0\u4e4b\u7c7b\u7684,\u8868\u793a\u4ee5\u592a\u7f51\u534f\u8bae) `ens33` inet 172.16.150.128 netmask 255.255.255.0 broadcast 172.16.150.255 `lo inet 127.0.0.1 netmask 255.0.0.0 \u67e5\u770b\u5176ip\u5730\u5740,\u8fdb\u884c\u8fdc\u7a0b\u8fde\u63a5.. `ssh root@\u670d\u52a1\u5668\u7684IP` Ps: `ens33`\u7f51\u5361\u91cc\u9762\u6709\u4e2amtu\u5c5e\u6027,\u8868\u793a\u6700\u5927\u4f20\u8f93\u5355\u5143(\u5355\u4f4d\u5b57\u8282) \u4ee3\u8868\u7f51\u5361\u5e26\u5bbd\u7684\u5927\u5c0f. \u82e5\u4e3a1500,\u5219\u662f\u5343\u5146\u7f51\u5361. \u82e5\u662f\u5149\u7ea4\u6a21\u5757\u7684\u8bdd,\u8fd9\u4e2a\u503c\u76f8\u5e94\u8981\u8c03\u5927! \u8fde\u63a5\u6392\u9519 \u00b6 [\u8fdc\u7a0b\u8fde\u63a5\u5931\u8d25\u6392\u9519] \u4e00:\u6d4b\u8bd5\u7f51\u7edc\u662f\u5426\u901a\u7545 ping www.baidu.com route -n \u67e5\u770b\u7f51\u5173\u5730\u5740 ping \u7f51\u5173\u5730\u5740 \u5728vm\u670d\u52a1\u7aef ifconfig\u67e5\u770bip \u5728\u5ba2\u6237\u7aefping 172.16.150.128 (\u6b64IP\u662f\u670d\u52a1\u7aefIP\u5730\u5740) \u82e5ping\u4e0d\u540c,\u68c0\u67e5NAT\u6a21\u5f0f\u4e0bVMnet8\u6240\u5904\u7684\u7f51\u6bb5\u662f\u5426\u6709\u95ee\u9898 \u4e8c:\u9632\u706b\u5899 \u6570\u636e\u5305\u88ab\u9632\u706b\u5899\u8fc7\u6ee4\u4e86\u5bfc\u81f4\u8fde\u63a5\u4e0d\u4e0a vm\u7684\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4: systemctl stop firewalld (\u5173\u95ed\u9632\u706b\u5899) systemctl disable firewalld (\u5f00\u673a\u4e0d\u542f\u52a8\u9632\u706b\u5899) \u4e09:SElinux\u8f6f\u4ef6 \u4f1a\u63d0\u5347linux\u7684\u5b89\u5168\u7ea7\u522b\u5230\u5f88\u9ad8 \u4f46\u5b89\u5168\u6027\u8d8a\u9ad8,\u53ef\u7528\u6027\u8d8a\u4f4e \u5b83\u4f1a\u6321\u4f4f\u5f88\u591a\u8f6f\u4ef6\u7684\u6b63\u5e38\u8fd0\u884c SElinux\u6709\u4e09\u79cd\u72b6\u6001(0 1 2)\u5206\u522b\u5bf9\u5e94 Permissive \u52a0\u8f7d\u4e86\u4e0d\u751f\u6548\u4f46\u7ed9warning\u63d0\u793a\u4fe1\u606f enforcing \u52a0\u8f7d\u4e86\u751f\u6548 disabled \u4e0d\u52a0\u8f7d,\u610f\u5473\u7740\u5185\u6838\u542f\u52a8\u8d77\u6765\u540e,SElinux\u8fd9\u90e8\u5206\u4e0d\u4f1a\u52a0\u8f7d\u8fdb\u5185\u5b58..\u5728\u786c\u76d8\u5f85\u7740. vm\u7684\u7ec8\u7aef\u4f9d\u6b21\u8f93\u5165\u547d\u4ee4: setenforce 0 (\u4e34\u65f6\u5173\u95edSElinux \u914d\u7f6e\u6587\u4ef6\u91cc\u662f\u6ca1\u6709\u4fee\u6539\u7684!) vim /etc/sysconfig/selinux (\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6c38\u4e45\u5173\u95ed) \u5728\u6587\u4ef6\u4e2d\u4fee\u6539 SELINUX=enforcing \u4e3a SELINUX=disabled getenforce \u67e5\u770bSElinux\u5f53\u524d\u72b6\u6001 -- Permissive ps:\u6709\u4e9b\u8f6f\u4ef6\u8ddfOS\u6ca1\u5173\u7cfb,\u6539\u5b8c\u540e\u91cd\u542f\u8f6f\u4ef6\u5373\u53ef;\u6709\u4e9b\u8f6f\u4ef6\u662f\u96c6\u6210\u5728OS\u5185\u6838\u91cc\u7684,\u91cd\u542f\u5c31\u610f\u5473\u7740\u91cd\u542fOS. \u800cSElinux\u662f\u5728OS\u5185\u6838\u91cc\u7684,\u8981\u60f3\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u751f\u6548,\u9700\u8981\u91cd\u542f.\u91cd\u65b0\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5230\u5185\u5b58. \u662f\u5426\u9700\u8981\u91cd\u542f\u751f\u6548\u53d6\u51b3\u4e8e\u6b64\u8f6f\u4ef6\u7684\u5f00\u53d1\u8005\u662f\u5426\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u673a\u5236.\u50cfnginx\u5c31\u4e0d\u7528\u91cd\u542f.. \u91cd\u542f\u540e,getenforce -- disabled Ps: \u4e0a\u8ff0\u4f53\u73b0\u4e86linux\u7684\u4e24\u4e2a\u7279\u70b9. linux\u7684\u6a21\u5757\u5316\u5c31\u662f\u89e3\u8026\u5408\u7684\u601d\u60f3 linux\u4e00\u5207\u7686\u6587\u4ef6,\u6587\u4ef6\u4e5f\u5c31\u662f\u786c\u76d8 \u56db.\u5e94\u5f00\u542f\u670d\u52a1\u7aef\u7684openssh-server\u7a0b\u5e8f \u4ee5\u4e0b\u4e24\u547d\u4ee4\u4e8c\u9009\u4e00. systemctl start sshd systemctl restart network (\u91cd\u542f\u7f51\u7edc\u670d\u52a1,\u5305\u542b\u4e86\u5f00\u542fopenssh-server\u7a0b\u5e8f) CentOS \u00b6 Linux\u542f\u52a8\u6d41\u7a0b \u00b6 \u8be6\u89c1: https://www.cnblogs.com/linhaifeng/p/13274099.html \u5f00\u673a - BIOS - \u4e3b\u5f15\u5bfc\u8bb0\u5f55MBR - GRUB\u5f15\u5bfc\u7a0b\u5e8f - \u52a0\u8f7dLinux\u5185\u6838 - \u8bfb\u53d6\u8fd0\u884c\u7ea7\u522b - \u521d\u59cb\u5316\u7cfb\u7edf - \u542f\u52a8\u670d\u52a1. 1> \u8ba1\u7b97\u673a\u901a\u7535 2> \u542f\u52a8BIOS,\u68c0\u67e5\u542f\u52a8\u9879 3> \u8bfb\u53d6\u542f\u52a8\u76d8\u7b2c\u4e00\u4e2a\u6247\u533a512Bytes\u5230\"\u5185\u5b58\",\u5305\u542b\u7684\u662fMBR(\u4e3b\u5f15\u5bfc\u8bb0\u5f55) \u524d446\u5b57\u8282 grub\u8fd9\u79cdbootloader(\u5f15\u5bfc\u7a0b\u5e8f) \u6253\u4e2a\u6bd4\u65b9:\u64cd\u4f5c\u7cfb\u7edf\u7684\u6392\u5934\u5175 \u4e2d\u95f464\u5b57\u8282 \u5206\u533a\u4fe1\u606f \u6700\u540e2\u5b57\u8282 \u7ed3\u675f\u6807\u5fd7 grub\u542f\u52a8\u540e\u4f1a\u52a0\u8f7d\u5185\u6838\u5230\u5185\u5b58(\u7b80\u5355\u7406\u89e3\u5c31\u662f\u6307\u64cd\u4f5c\u7cfb\u7edf) 4> OS\u542f\u52a8\u8d77\u6765\u540e \u25b3 \u5185\u6838\u7684\u8fd0\u884c\u7ea7\u522b \u7ea7\u522b3\u5e38\u7528 0 -- \u5173\u673a 1 -- \u5355\u7528\u6237\u6a21\u5f0f \u53ef\u7528\u4e8e\u7834\u89e3\u7ba1\u7406\u5458root\u5bc6\u7801 \u4e0d\u9700\u8981\u8f93\u5165\u8d26\u53f7\u548c\u5bc6\u7801,\u767b\u5f55\u8fdb\u6765\u5c31\u662f\u7ba1\u7406\u5458\u8d26\u53f7,root\u6743\u9650 \u4f46\u7981\u6b62\u8fdc\u7a0b\u767b\u5f55,\u610f\u5473\u7740\u5fc5\u987b\u53bb\u673a\u623f,\u5728\u670d\u52a1\u5668\u9762\u524d\u64cd\u4f5c,\u6240\u4ee5\u6b64\u7ea7\u522b\u57fa\u672c\u4e0d\u7528 2 -- \u591a\u7528\u6237\u6a21\u5f0f(\u6ca1\u6709\u7f51\u7edc) 3 -- \u591a\u7528\u6237\u6a21\u5f0f(\u6709\u7f51\u7edc) \u5e38\u7528 4 -- \u7cfb\u7edf\u672a\u4f7f\u7528,\u4fdd\u7559 5 -- \u56fe\u5f62\u754c\u9762\u6a21\u5f0f,\u57283\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e86GUI\u754c\u9762 6 -- \u91cd\u542f centos7: vim /etc/systemd/system/default.target \u25b3 linux\u64cd\u4f5c\u7cfb\u7edf\u8fd0\u884c\u8d77\u6765\u540e\u8fd0\u884c\u7684\u6bcf\u4e00\u4e2a\u7a0b\u5e8f/\u8fdb\u7a0b\u90fd\u6709\u4e2a\u8eab\u4efd\u6807\u8bc6PID\u53f7 centos6\u91cc\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\u53eb\u505a init \u8fdb\u7a0b\u53f7PID\u4e3a0 centos7\u91cc\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f/\u8fdb\u7a0b\u53eb\u505a systemd \u8fdb\u7a0b\u53f7PID\u4e3a1 \u7531systemd\u542f\u52a8OS\u7684\u5176\u4ed6\u8fdb\u7a0b,\u662f\u4e00\u4e2a\u6811\u578b\u7ed3\u6784.systemd\u8fd0\u884c\u5b50\u7a0b\u5e8f,\u5b50\u7a0b\u5e8f\u518d\u8fd0\u884c\u5b50\u7a0b\u5e8f... \u6240\u4ee5systemd\u662fOS\u5176\u4ed6\u8fdb\u7a0b\u7684\u8001\u7956\u5b97!\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u662f\u5b83\u7684\u513f\u5b50. \u5520\u5520\u55d1 \u5728centos7\u4e4b\u524d,\u5176\u5185\u6838\u65e2\u8981\u7ba1\u7406\u786c\u4ef6\u4e5f\u8981\u7ba1\u7406\u4e0a\u5c42\u5e94\u7528\u7a0b\u5e8f. \u5728centos7\u91cc\u5185\u6838\u53ea\u8d1f\u8d23\u786c\u4ef6\u90e8\u5206\u7684\u7ba1\u7406\u5566,\u4e0a\u5c42\u8fd0\u884c\u7684\u8f6f\u4ef6\u7edf\u4e00\u88absystemd\u8f6f\u4ef6\u7ba1\u7406\u8d77\u6765\u5566.\u76f8\u5f53\u4e8e\u67b6\u7a7a\u4e86\u5185\u6838. \u5f53\u7136,centos7\u8fd9\u4e00\u4e3e\u52a8\u5f15\u53d1\u4e86linux\u7684\u4e0d\u6ee1..Hhhh \u7cfb\u7edf\u5bc6\u7801\u7834\u89e3\u4e0e\u5b89\u5168\u52a0\u56fa \u00b6 \u53c2\u8003\u94fe\u63a5: https://zhuanlan.zhihu.com/p/315472061 \u653b \u9632 \u53ef\u4ee5\u7528\u5355\u7528\u6237\u6a21\u5f0f \u4fee\u6539root\u8d26\u6237\u7684\u5bc6\u7801! GRUB\u52a0\u5bc6\u53ef\u4ee5\u9632\u6b62\u5355\u7528\u6237\u6a21\u5f0f\u4e0broot\u5bc6\u7801\u7684\u4fee\u6539! \u5149\u76d8\u4fee\u590d\u6a21\u5f0f\u53ef\u4ee5\u76f4\u63a5\u7ed5\u8fc7\u672c\u5730\u786c\u76d8\u7684\u8ba4\u8bc1\u4fee\u6539root\u5bc6\u7801.\u256e(\u256f\u25bd\u2570)\u256d\u53ef\u6076. \u5f53\u7136,GRUB\u5bc6\u7801\u4e5f\u53ef\u4ee5\u6539. BIOS\u52a0\u5bc6 \u6263\u4e3b\u677f\u7535\u6c60\u8ba9BIOS\u5931\u6548\u540e,\u518d\u7528\u5149\u76d8\u4fee\u590d\u6a21\u5f0f. \u9501\u4f4f\u673a\u67dc..\u7269\u7406\u9632\u5fa1xswl \u5728\u67d0\u4e2a\u542f\u52a8\u76d8\u91cc\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf: \u9009\u62e9linux\u5185\u6838,\u6309e\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f,\u53d1\u73b0ro\u90a3\u4e00\u884c\u6570\u636e\u8ddf\u53c2\u8003\u8d44\u6599\u6709\u4e9b\u51fa\u5165,\u53ef\u80fd\u662f\u5c0f\u7248\u672c\u4e0d\u5bf9\u5e94\u5bfc\u81f4\u7684..\u7565 ctrl+x\u540e\u8fdb\u5165\u5355\u7528\u6237\u6a21\u5f0f,\u8f93\u5165\u547d\u4ee4: \u5207\u6362\u5230\u539f\u59cb\u7cfb\u7edf chroot /sysroot \u4fee\u6539root\u8d26\u6237\u7684\u5bc6\u7801 password root \u8bbe\u7f6eselinux\u72b6\u6001\u4e3adisabled vim etc/sysconfig/selinux (\u4e0d\u8bbe\u7f6e\u7684\u8bdd\u4f1a\u5931\u8d25) grub\u52a0\u5bc6,\u5728\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4 \u8bbe\u7f6e\u5bc6\u7801 grub2-setpassword (\u8d26\u53f7root \u5bc6\u7801123) \u4fee\u6539\u6587\u4ef6 vim /boot/grub2/grub.cfgs \u5220\u9664--unrestricted \u91cd\u542f\u7cfb\u7edf,\u4f1a\u53d1\u73b0,\u5728\u9009\u62e9linux\u5185\u6838\u9875\u9762,\u4e0d\u7ba1\u662f\u52a0\u8f7d\u5185\u6838\u8fd8\u662f\u6309e\u8fdb\u5165\u7f16\u8f91,\u90fd\u4f1a\u53eb\u5148\u8f93\u5165\u7528\u6237\u548c\u5bc6\u7801.. \u5728\u5149\u76d8/U\u76d8\u91cc\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf -- \u5149\u76d8\u4fee\u590d\u6a21\u5f0f \u964d\u7eac\u6253\u51fb \u6ca1\u6709\u8d26\u6237\u5bc6\u7801,\u8fdb\u53bb\u5c31\u662f\u7ba1\u7406\u5458.. \u54ea\u6015\u662f\u88c5\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u542f\u52a8\u76d8\u4e5f\u53ef\u4ee5\u7ba1\u7406,\u53ef\u4ee5\u6539\u672c\u5730\u786c\u76d8\u4e0a\u7684OS root\u8d26\u6237\u7684\u5bc6\u7801.Hhhh \u5149\u76d8\u4fee\u590d\u6a21\u5f0f\u7684\u7b2c\u4e00\u6b65\u662f\u4fee\u6539BIOS\u542f\u52a8\u9879\u7684\u987a\u5e8f! \u7ed9BIOS\u52a0\u5bc6\uff01(\u6211\u8bbe\u7f6e\u7684\u662f111) \u8fd8\u53ef\u4ee5\u6263BIOS\u4e3b\u677f\u7535\u6c60\u8ba9BIOS\u8bbe\u7f6e\u5931\u6548.. \u6240\u4ee5\u5e94\u8be5\u9501\u4f4f\u673a\u67dc. \u6ca1\u6709\u7edd\u5bf9\u7684\u5b89\u5168,\u53ea\u80fd\u89c1\u62db\u62c6\u62db!","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#vmware","text":"vmware\u662f\u865a\u62df\u5316\u8f6f\u4ef6.(\u5b9e\u9a8c\u73af\u5883\u7528,\u6b64\u8f6f\u4ef6\u4e0d\u5fc5\u6df1\u7a76) windows\u5e73\u53f0\u4f7f\u7528\u7684\u8bdd\u4e0b\u8f7d - vmware workstation; mac\u5e73\u53f0\u4f7f\u7528\u7684\u8bdd\u4e0b\u8f7d - vmware fusion. \u4ee5\u4e0b\u662f\u57fa\u4e8evmware workstation\u7684\u4f7f\u7528\u8fdb\u884c\u7684\u9610\u8ff0\u54e6~","title":"vmware"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_1","text":"vm1,vm2,vm3 \u5e94\u7528\u7a0b\u5e8fvmware \u64cd\u4f5c\u7cfb\u7edf \u8ba1\u7b97\u673a\u786c\u4ef6 Ps: \u4e00\u4e9b\u5feb\u6377\u952e ctrl+r \u91cd\u542f\u8ba1\u7b97\u673a ctrl+alt \u5c06\u9f20\u6807\u4ece\u865a\u62df\u673a\u4e2d\u5207\u6362\u5230\u5bbf\u4e3b\u673a \u5520\u5520\u55d1: \u670d\u52a1\u5668\u4e00\u591a,\u5e94\u8be5\u4f7f\u7528\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0\u7ba1\u7406\u6bcf\u53f0\u670d\u52a1\u5668\u7684IP\u8d26\u6237\u5bc6\u7801,\u800c\u4e0d\u662f\u8bb0\u5f55\u5728excel\u8868\u4e0a. \u8fd0\u7ef4\u5728\u90e8\u7f72\u65f6\u4f1a\u5f88\u75db\u82e6,\u56e0\u4e3a\u8981\u627e\u8f6f\u4ef6\u7684\u4f9d\u8d56\u5305. \u800cgo\u8bed\u8a00\u6709\u4e2a\u4fbf\u5229\u4e4b\u5904,\u5f00\u53d1\u597d\u8f6f\u4ef6\u540e,\u53ef\u4ee5\u5c06\u8f6f\u4ef6\u6240\u6709\u7684\u4f9d\u8d56\u5305\u6253\u5230\u4e00\u8d77\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6.\u90e8\u7f72\u4f1a\u5f88\u65b9\u4fbf.","title":"\u539f\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_2","text":"1> \u4ec5\u4e3b\u673a (\u51e0\u4e4e\u4e0d\u7528) vm\u53ea\u80fd\u4e0e\u5bbf\u4e3b\u673a\u53ca\u5bbf\u4e3b\u673a\u4e0a\u7684\u5176\u4ed6vm\u901a\u4fe1,\u4e0d\u80fd\u4e0e\u5916\u7f51\u901a\u4fe1 \u5bbf\u4e3b\u673a\u4f1a\u4ea7\u6210\u4e00\u4e2a\u865a\u62df\u7f51\u5361VMnet1,\u6240\u4ee5\u7684vm\u90fd\u4f7f\u7528\u8fd9\u4e2a\u865a\u62df\u7f51\u5361,VMnet1\u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a\u4ea4\u6362\u673a. 2> \u6865\u63a5 (\u4e0d\u63a8\u8350) vm\u4e0e\u5bbf\u4e3b\u673a\u5904\u4e8e\u540c\u4e00\u4e2aLAN\u4e2d,\u76f8\u5f53\u4e8e\u5728\u5c40\u57df\u7f51\u4e2d\u65b0\u589e\u4e86\u4e00\u53f0\u4e3b\u673a, vm\u4f1a\u76f4\u63a5\u901a\u8fc7\u5bbf\u4e3b\u673a\u7684\u672c\u5730\u7f51\u5361\u8fdb\u884c\u901a\u4fe1. \u82e5\u4f7f\u7528\u9759\u6001\u914d\u7f6e,LAN\u4e2dIP\u6613\u51b2\u7a81 3> NAT (\u63a8\u8350) \u7f51\u7edc\u5730\u5740\u8f6c\u6362 NAT\u6a21\u5f0f\u7684\u865a\u62df\u673a\u5c31\u662f\u901a\u8fc7\u5bbf\u4e3b\u673a(\u7269\u7406\u8ba1\u7b97\u673a)\u4e0a\u7f51\u548c\u4ea4\u6362\u6570\u636e\u7684 \u5bbf\u4e3b\u673a\u4f1a\u4ea7\u751f\u4e00\u4e2a\u865a\u62df\u7f51\u5361VMnet8\u7ed9vm\u4f7f\u7528,\u5728VMnet1\u57fa\u7840\u4e4b\u4e0aVMnet8\u53ef\u4ee5\u505a\u8def\u7531\u8f6c\u53d1 \u8def\u5f84: vm - VMnet8 - \u865a\u62df\u7684\u8def\u7531 - \u5bbf\u4e3b\u673a\u7684\u672c\u5730\u7f51\u5361 - \u4ea4\u6362\u673a - \u8def\u7531\u5668 - internet vmware\u521b\u5efa\u7684\u865a\u62df\u673a\u9ed8\u8ba4\u4f1a\u4f7f\u7528\u672c\u5730DHCP\u670d\u52a1\u5c06IP\u5730\u5740\u5206\u914d\u7ed9\u865a\u62df\u673a. \u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u8fdb\u884c\u7f51\u7edc\u7684\u914d\u7f6e. \u6ce8\u610f: \u7f51\u5173\u7684IP,\u82e5\u662f\u4e00\u4e2ac\u7c7b\u5730\u5740,\u53bb\u5934\u53bb\u5c3e 1-254\u53ef\u7528,\u4e60\u60ef\u4f1a\u75281\u6216254. \u670d\u52a1\u5668\u96c6\u7fa4\u5316\u4f5c\u4e1a,\u914d\u7f6e\u7684IP\u4e00\u5b9a\u662f\u9759\u6001\u914d\u7f6e,\u56fa\u5b9a\u6b7b\u7684!!","title":"\u7f51\u7edc\u4e09\u79cd\u6a21\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#centos","text":"vmware fusion: https://blog.csdn.net/vbirdbest/article/details/107375067 vmware workstation: https://www.cnblogs.com/linhaifeng/p/13252347.html .iso\u7ed3\u5c3e\u7684\u955c\u50cf\u6587\u4ef6 \u901a\u5e38\u538b\u7f29\u7684\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801 \u955c\u50cf\u6587\u4ef6\u5c31\u662f\u4e00\u79cd\u7279\u6b8a\u683c\u5f0f\u7684\u538b\u7f29\u5305 \u666e\u901a\u8d26\u6237\u5bc6\u7801 1998.0307 root\u8d26\u6237\u5bc6\u7801 123456 \u25a1 \u6309\u4f4fF2\u8fdb\u5165BIOS\u754c\u9762 \u4fee\u6539\u542f\u52a8\u9879, Hard Drive(\u672c\u5730\u786c\u76d8)\u7b2c\u4e00\u4f4d,\u5176\u6b21\u662fCD-ROM Drive(CD/DVD\u955c\u50cf\u6587\u4ef6) \u25a1 \u5728\"\u5b89\u88c5\u4fe1\u606f\u6458\u8981\"\u9875\u9762 1> \u8f6f\u4ef6\u5b89\u88c5 -- \u4e00\u822c\u9009\u62e9 \u6700\u5c0f\u5b89\u88c5 2> KDUMP -- \u53d6\u6d88\u52fe\u9009.\u56e0\u4e3a\u6b64\u529f\u80fd\u4f1a\u5360\u7528\u5185\u5b58.(OS\u7684\u5f00\u53d1\u8005\u4f7f\u7528,\u5bf9\u6211\u4eec\u6765\u8bf4\u6ca1\u7528) 3> \u7f51\u7edc\u4e0e\u4e3b\u673a\u540d(N) -- \u6253\u5f00 4> \u5b89\u88c5\u4f4d\u7f6e -- \u9009\u62e9\u201c\u6211\u8981\u914d\u7f6e\u5206\u533a\u201d Ps: \u5bf9vm\u5360\u7528\u7684\u5bbf\u4e3b\u673a\u7684\u90a3\u90e8\u5206\u786c\u76d8\u8fdb\u884c\u5206\u533a,\u4e00\u4e2a\u5206\u533a\u5c31\u662f\u4e00\u4e2a\u6587\u4ef6\u5939\u5bf9\u5e94\u4e00\u5757\u786c\u76d8\u7a7a\u95f4 \u786c\u76d8 -- \u6c34\u6876 \u5206\u533a -- \u6c34\u6876\u7684\u9694\u65ad \u6302\u8f7d\u70b9(eg: / /boot swap) -- \u67d0\u4e00\u4e2a\u5177\u4f53\u7684\u9694\u65ad \u6ce8\u610f\u54e6,/boot\u662f/\u7684\u5b50\u6587\u4ef6\u5939,\u4f46\u662f\u5b83\u4e24\u662f\u4e24\u4e2a\u5206\u533a, \u662f\u9694\u65ad\u4e86\u7684 ! [\u5206\u533a\u65b9\u6848] \u65b9\u6848\u4e00 \u5e38\u89c4\u751f\u4ea7\u573a\u666f: /boot \u76f8\u5f53\u4e8ewindows\u7684C\u76d8,300-500M,\u5efa\u8bae500M swap \u865a\u62df\u5185\u5b58,\u5360\u7528\u7684\u662f\u786c\u76d8\u7a7a\u95f4,1.5-2\u500d\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f(\u6700\u59278G) / \u6839\u5206\u533a \u5269\u4f59\u7a7a\u95f4 \u65b9\u6848\u4e8c \u6570\u636e\u5e93\u53ca\u5b58\u50a8\u89d2\u8272\u7684\u670d\u52a1\u5668,\u5373\u6709\u5927\u91cf\u91cd\u8981\u7684\u6570\u636e\u7684\u4e1a\u52a1: /boot swap /\u6839\u5206\u533a 50-200G,\u53ea\u5b58\u653e\u7cfb\u7edf\u76f8\u5173\u6587\u4ef6,\u7f51\u7ad9\u4e1a\u52a1\u6570\u636e\u4e0d\u653e\u8fd9\u91cc /data \u5269\u4e0b\u7684\u6240\u6709\u786c\u76d8\u7a7a\u95f4 So,\u672c\u65b9\u6848\u5176\u5b9e\u5c31\u662f\u628a\u91cd\u8981\u6570\u636e\u5355\u72ec\u5206\u533a\uff0c\u4fbf\u4e8e\u5907\u4efd\u548c\u7ba1\u7406 \u65b9\u6848\u4e09 \u5927\u578b\u95e8\u6237\u7f51\u7ad9 \u4e0d\u540c\u4e0e\u65b9\u6848\u4e8c\u5728\u4e8e \u65e0/data \u4f1a\u5c06\u5269\u4e0b\u7684\u786c\u76d8\u7a7a\u95f4\u6839\u636e\u9700\u6c42\u518d\u5206 So, \u6b64\u65b9\u6cd5\u66f4\u7075\u6d3b,\u6bd4\u8f83\u9002\u5408\u4e1a\u52a1\u7ebf\u6bd4\u8f83\u591a\u9700\u6c42\u4e0d\u786e\u5b9a\u7684\u5927\u4f01\u4e1a\u4f7f\u7528 \u4e91\u5e73\u53f0\u3001\u4e91\u73af\u5883\u8981\u8003\u8651\u52a8\u6001\u6269\u5bb9\u7684\u9700\u6c42\u4f1a\u4f7f\u7528LVM(\u903b\u8f91\u5377)\u5728\u7ebf\u8c03\u6574\u5206\u533a\u5927\u5c0f(\u6548\u7387\u80af\u5b9a\u4e0d\u5982\u76f4\u63a5\u56fa\u5b9a\u5206\u914d\u597d\u7684) Ps: \u7f51\u4e0a\u8fd8\u6709\u5f88\u591a\u65b9\u6848\u4f1a\u5efa\u7acb\u5f88\u591a\u5206\u533a/var,/swap,/usr\u7b49..\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a!!\u8981\u6709\u5ea6,\u4e0d\u7136\u4f1a\u5f88\u4e71.. \u25a1 \u5b89\u88c5\u597d\u8fdb\u5165\u9875\u9762\u540e,\u5728\u7ec8\u7aef\u5148\u8f93\u5165\u547d\u4ee4\u5b89\u88c5\u4e00\u4e9b\u8f6f\u4ef6\u5305 \u5728root\u8d26\u6237\u4e0b\u6267\u884c! yum -y install tree nmap sysstat lrzsz dos2unix telnet bash-completion bash-completion-extras vim lsof net-tools rsync ntpdate nfs-utils yum\u662fShell \u524d\u7aef\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668 yum\u8fd9\u4e2a\u5e94\u7528\u8f6f\u4ef6/\u5de5\u5177\u53ef\u7528\u4e8e\u53bbcentos\u5b98\u65b9\u4ed3\u5e93\u91cc\u4e0b\u8f7d\u4e00\u4e9b\u5e38\u7528\u7684\u8f6f\u4ef6. yum\u4e00\u5f00\u59cb\u5c31\u5bf9\u5e94\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684yum\u6e90,\u53ef\u81ea\u884c\u914d\u7f6e. yum update \u614e\u91cd!\u4f1a\u66f4\u65b0\u6240\u6709\u7684\u8f6f\u4ef6\u5305.\u4e0d\u8981\u8f7b\u6613\u4f7f\u7528,\u4e00\u822c\u53ea\u5728\u6700\u5f00\u59cb\u5b89\u88c5\u597d\u64cd\u4f5c\u7cfb\u7edf\u65f6\u4f7f\u7528\u4e0b. \u5728\u7ec8\u7aef\u770b\u5230 $ \u8868\u793a\u666e\u901a\u7528\u6237 # \u8868\u793aroot\u7ba1\u7406\u5458\u7528\u6237 \u51fa\u9519 1 : \u4f7f\u7528\u4e0d\u4e86yum\u547d\u4ee4,\u662f\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u4f7f\u7528\u4e00\u4e2ayum ps aux|grep yum kill - 9 487388 ( \u76f8\u5e94\u7684\u8fdb\u7a0b\u53f7 ) \u51fa\u9519 2 : \u4e0b\u8f7d\u4e0d\u4e86,\u53d1\u73b0\u4e0a\u4e0d\u4e86\u7f51,\u4f7f\u7528\u4e0b\u65b9\u8fd9\u6761\u547d\u4ee4\u91cd\u542f\u7f51\u7edc\u670d\u52a1.\u5b83\u5305\u542b\u91cd\u65b0\u6fc0\u6d3b\u7f51\u5361. systemctl restart network \u5b89\u88c5\u597d\u540e,\u53ef\u4ee5\u6253\u4e00\u4e2a\u5feb\u7167,\u7136\u540e\u6267\u884c rm - rf /* \u547d\u4ee4\u73a9\u4e00\u73a9,\u7136\u540e\u518d\u6062\u590d\u5feb\u7167. [ \u8865\u5145:linux\u652f\u6301\u591a\u4e2a\u8054\u673a\u7ec8\u7aef ] \u73b0\u5728\u6765\u770b,\u6ca1\u5565\u7528\u9014.. ctrl + alt + F'n' ( 1 < = n< = 6 )","title":"centos\u7684\u5b89\u88c5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#xshell","text":"xshell\u662f\u4e00\u4e2a \u8fdc\u7a0b\u767b\u5f55 \u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f,\u5bf9\u5e94\u670d\u52a1\u7aef\u7a0b\u5e8fopenssh-server (\u8fd0\u884c\u5728linux\u4e0a\u7684\u8f6f\u4ef6 \u9ed8\u8ba4\u662f22\u53f7\u7aef\u53e3 ) ssh root@\u670d\u52a1\u5668\u7684ip systemctl status sshd \u53ef\u67e5\u770b\u670d\u52a1\u7aef\u8f6f\u4ef6\u72b6\u6001. \u5957\u63a5\u5b57\u5ba2\u6237\u7aef \u7f51\u7edc \u5957\u63a5\u5b57\u670d\u52a1\u7aef xshell ---------- openssh-server","title":"xshell"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_3","text":"\u6ce8\u610f: \u25b2 xshell\u53ea\u80fd\u7528\u5728windows\u7cfb\u7edf\u4e0a. \u25b2 mac\u7cfb\u7edf\u7684\u672c\u6e90\u5c31\u662flinux.. \u4f46\u51e1\u662flinux\u7cfb\u7edf,\u9ed8\u8ba4\u90fd\u4f1a\u5b89\u88c5\u8f6f\u4ef6openssh-server\u548copenssh-client. \u4e5f\u5c31\u662f\u8bf4,linux\u7cfb\u7edf\u7684\u4e3b\u673a\u53ef\u4ee5\u4f5c\u4e3a\u5ba2\u6237\u7aef\u8fde\u63a5\u522b\u4eba,\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u670d\u52a1\u7aef\u8ba9\u522b\u4eba\u8fde! \u5efa\u8bae\u4f7f\u7528iterm2. Ps: xshell\u7684\u4e0b\u8f7d\u597d\u540e\u521d\u59cb\u7684\u4e00\u70b9\u4f18\u5316. https://www.cnblogs.com/linhaifeng/p/13252347.html windows xshell \u7f13\u51b2\u533a\u7684\u8bbe\u7f6e!(\u63a7\u5236\u5185\u5bb9\u663e\u793a\u884c\u6570) \u4e0a\u4e0b\u7ffb\u9875: shift+PgUP shift+PgDn \u5728\u865a\u62df\u673a\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4: ifconfig \u5728\u8f93\u51fa\u7ed3\u679c\u91cc \u7f51\u5361\u540d:`ens33`\u662fvm\u7684\u672c\u5730\u7f51\u5361;`lo`\u662fvm\u672c\u5730\u56de\u73af\u7684\u7f51\u5361(\u6570\u636e\u8d70\u5230\u7f51\u5361\u53c8\u539f\u8def\u8fd4\u56de,\u7528\u4e8e\u6d4b\u8bd5). (\u7f51\u5361\u540d\u901a\u5e38\u4f1a\u6539\u6210eth0\u4e4b\u7c7b\u7684,\u8868\u793a\u4ee5\u592a\u7f51\u534f\u8bae) `ens33` inet 172.16.150.128 netmask 255.255.255.0 broadcast 172.16.150.255 `lo inet 127.0.0.1 netmask 255.0.0.0 \u67e5\u770b\u5176ip\u5730\u5740,\u8fdb\u884c\u8fdc\u7a0b\u8fde\u63a5.. `ssh root@\u670d\u52a1\u5668\u7684IP` Ps: `ens33`\u7f51\u5361\u91cc\u9762\u6709\u4e2amtu\u5c5e\u6027,\u8868\u793a\u6700\u5927\u4f20\u8f93\u5355\u5143(\u5355\u4f4d\u5b57\u8282) \u4ee3\u8868\u7f51\u5361\u5e26\u5bbd\u7684\u5927\u5c0f. \u82e5\u4e3a1500,\u5219\u662f\u5343\u5146\u7f51\u5361. \u82e5\u662f\u5149\u7ea4\u6a21\u5757\u7684\u8bdd,\u8fd9\u4e2a\u503c\u76f8\u5e94\u8981\u8c03\u5927!","title":"\u8fdc\u7a0b\u8fde\u63a5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_4","text":"[\u8fdc\u7a0b\u8fde\u63a5\u5931\u8d25\u6392\u9519] \u4e00:\u6d4b\u8bd5\u7f51\u7edc\u662f\u5426\u901a\u7545 ping www.baidu.com route -n \u67e5\u770b\u7f51\u5173\u5730\u5740 ping \u7f51\u5173\u5730\u5740 \u5728vm\u670d\u52a1\u7aef ifconfig\u67e5\u770bip \u5728\u5ba2\u6237\u7aefping 172.16.150.128 (\u6b64IP\u662f\u670d\u52a1\u7aefIP\u5730\u5740) \u82e5ping\u4e0d\u540c,\u68c0\u67e5NAT\u6a21\u5f0f\u4e0bVMnet8\u6240\u5904\u7684\u7f51\u6bb5\u662f\u5426\u6709\u95ee\u9898 \u4e8c:\u9632\u706b\u5899 \u6570\u636e\u5305\u88ab\u9632\u706b\u5899\u8fc7\u6ee4\u4e86\u5bfc\u81f4\u8fde\u63a5\u4e0d\u4e0a vm\u7684\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4: systemctl stop firewalld (\u5173\u95ed\u9632\u706b\u5899) systemctl disable firewalld (\u5f00\u673a\u4e0d\u542f\u52a8\u9632\u706b\u5899) \u4e09:SElinux\u8f6f\u4ef6 \u4f1a\u63d0\u5347linux\u7684\u5b89\u5168\u7ea7\u522b\u5230\u5f88\u9ad8 \u4f46\u5b89\u5168\u6027\u8d8a\u9ad8,\u53ef\u7528\u6027\u8d8a\u4f4e \u5b83\u4f1a\u6321\u4f4f\u5f88\u591a\u8f6f\u4ef6\u7684\u6b63\u5e38\u8fd0\u884c SElinux\u6709\u4e09\u79cd\u72b6\u6001(0 1 2)\u5206\u522b\u5bf9\u5e94 Permissive \u52a0\u8f7d\u4e86\u4e0d\u751f\u6548\u4f46\u7ed9warning\u63d0\u793a\u4fe1\u606f enforcing \u52a0\u8f7d\u4e86\u751f\u6548 disabled \u4e0d\u52a0\u8f7d,\u610f\u5473\u7740\u5185\u6838\u542f\u52a8\u8d77\u6765\u540e,SElinux\u8fd9\u90e8\u5206\u4e0d\u4f1a\u52a0\u8f7d\u8fdb\u5185\u5b58..\u5728\u786c\u76d8\u5f85\u7740. vm\u7684\u7ec8\u7aef\u4f9d\u6b21\u8f93\u5165\u547d\u4ee4: setenforce 0 (\u4e34\u65f6\u5173\u95edSElinux \u914d\u7f6e\u6587\u4ef6\u91cc\u662f\u6ca1\u6709\u4fee\u6539\u7684!) vim /etc/sysconfig/selinux (\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6c38\u4e45\u5173\u95ed) \u5728\u6587\u4ef6\u4e2d\u4fee\u6539 SELINUX=enforcing \u4e3a SELINUX=disabled getenforce \u67e5\u770bSElinux\u5f53\u524d\u72b6\u6001 -- Permissive ps:\u6709\u4e9b\u8f6f\u4ef6\u8ddfOS\u6ca1\u5173\u7cfb,\u6539\u5b8c\u540e\u91cd\u542f\u8f6f\u4ef6\u5373\u53ef;\u6709\u4e9b\u8f6f\u4ef6\u662f\u96c6\u6210\u5728OS\u5185\u6838\u91cc\u7684,\u91cd\u542f\u5c31\u610f\u5473\u7740\u91cd\u542fOS. \u800cSElinux\u662f\u5728OS\u5185\u6838\u91cc\u7684,\u8981\u60f3\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u751f\u6548,\u9700\u8981\u91cd\u542f.\u91cd\u65b0\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5230\u5185\u5b58. \u662f\u5426\u9700\u8981\u91cd\u542f\u751f\u6548\u53d6\u51b3\u4e8e\u6b64\u8f6f\u4ef6\u7684\u5f00\u53d1\u8005\u662f\u5426\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u673a\u5236.\u50cfnginx\u5c31\u4e0d\u7528\u91cd\u542f.. \u91cd\u542f\u540e,getenforce -- disabled Ps: \u4e0a\u8ff0\u4f53\u73b0\u4e86linux\u7684\u4e24\u4e2a\u7279\u70b9. linux\u7684\u6a21\u5757\u5316\u5c31\u662f\u89e3\u8026\u5408\u7684\u601d\u60f3 linux\u4e00\u5207\u7686\u6587\u4ef6,\u6587\u4ef6\u4e5f\u5c31\u662f\u786c\u76d8 \u56db.\u5e94\u5f00\u542f\u670d\u52a1\u7aef\u7684openssh-server\u7a0b\u5e8f \u4ee5\u4e0b\u4e24\u547d\u4ee4\u4e8c\u9009\u4e00. systemctl start sshd systemctl restart network (\u91cd\u542f\u7f51\u7edc\u670d\u52a1,\u5305\u542b\u4e86\u5f00\u542fopenssh-server\u7a0b\u5e8f)","title":"\u8fde\u63a5\u6392\u9519"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#centos_1","text":"","title":"CentOS"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#linux","text":"\u8be6\u89c1: https://www.cnblogs.com/linhaifeng/p/13274099.html \u5f00\u673a - BIOS - \u4e3b\u5f15\u5bfc\u8bb0\u5f55MBR - GRUB\u5f15\u5bfc\u7a0b\u5e8f - \u52a0\u8f7dLinux\u5185\u6838 - \u8bfb\u53d6\u8fd0\u884c\u7ea7\u522b - \u521d\u59cb\u5316\u7cfb\u7edf - \u542f\u52a8\u670d\u52a1. 1> \u8ba1\u7b97\u673a\u901a\u7535 2> \u542f\u52a8BIOS,\u68c0\u67e5\u542f\u52a8\u9879 3> \u8bfb\u53d6\u542f\u52a8\u76d8\u7b2c\u4e00\u4e2a\u6247\u533a512Bytes\u5230\"\u5185\u5b58\",\u5305\u542b\u7684\u662fMBR(\u4e3b\u5f15\u5bfc\u8bb0\u5f55) \u524d446\u5b57\u8282 grub\u8fd9\u79cdbootloader(\u5f15\u5bfc\u7a0b\u5e8f) \u6253\u4e2a\u6bd4\u65b9:\u64cd\u4f5c\u7cfb\u7edf\u7684\u6392\u5934\u5175 \u4e2d\u95f464\u5b57\u8282 \u5206\u533a\u4fe1\u606f \u6700\u540e2\u5b57\u8282 \u7ed3\u675f\u6807\u5fd7 grub\u542f\u52a8\u540e\u4f1a\u52a0\u8f7d\u5185\u6838\u5230\u5185\u5b58(\u7b80\u5355\u7406\u89e3\u5c31\u662f\u6307\u64cd\u4f5c\u7cfb\u7edf) 4> OS\u542f\u52a8\u8d77\u6765\u540e \u25b3 \u5185\u6838\u7684\u8fd0\u884c\u7ea7\u522b \u7ea7\u522b3\u5e38\u7528 0 -- \u5173\u673a 1 -- \u5355\u7528\u6237\u6a21\u5f0f \u53ef\u7528\u4e8e\u7834\u89e3\u7ba1\u7406\u5458root\u5bc6\u7801 \u4e0d\u9700\u8981\u8f93\u5165\u8d26\u53f7\u548c\u5bc6\u7801,\u767b\u5f55\u8fdb\u6765\u5c31\u662f\u7ba1\u7406\u5458\u8d26\u53f7,root\u6743\u9650 \u4f46\u7981\u6b62\u8fdc\u7a0b\u767b\u5f55,\u610f\u5473\u7740\u5fc5\u987b\u53bb\u673a\u623f,\u5728\u670d\u52a1\u5668\u9762\u524d\u64cd\u4f5c,\u6240\u4ee5\u6b64\u7ea7\u522b\u57fa\u672c\u4e0d\u7528 2 -- \u591a\u7528\u6237\u6a21\u5f0f(\u6ca1\u6709\u7f51\u7edc) 3 -- \u591a\u7528\u6237\u6a21\u5f0f(\u6709\u7f51\u7edc) \u5e38\u7528 4 -- \u7cfb\u7edf\u672a\u4f7f\u7528,\u4fdd\u7559 5 -- \u56fe\u5f62\u754c\u9762\u6a21\u5f0f,\u57283\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e86GUI\u754c\u9762 6 -- \u91cd\u542f centos7: vim /etc/systemd/system/default.target \u25b3 linux\u64cd\u4f5c\u7cfb\u7edf\u8fd0\u884c\u8d77\u6765\u540e\u8fd0\u884c\u7684\u6bcf\u4e00\u4e2a\u7a0b\u5e8f/\u8fdb\u7a0b\u90fd\u6709\u4e2a\u8eab\u4efd\u6807\u8bc6PID\u53f7 centos6\u91cc\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b\u53eb\u505a init \u8fdb\u7a0b\u53f7PID\u4e3a0 centos7\u91cc\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f/\u8fdb\u7a0b\u53eb\u505a systemd \u8fdb\u7a0b\u53f7PID\u4e3a1 \u7531systemd\u542f\u52a8OS\u7684\u5176\u4ed6\u8fdb\u7a0b,\u662f\u4e00\u4e2a\u6811\u578b\u7ed3\u6784.systemd\u8fd0\u884c\u5b50\u7a0b\u5e8f,\u5b50\u7a0b\u5e8f\u518d\u8fd0\u884c\u5b50\u7a0b\u5e8f... \u6240\u4ee5systemd\u662fOS\u5176\u4ed6\u8fdb\u7a0b\u7684\u8001\u7956\u5b97!\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u662f\u5b83\u7684\u513f\u5b50. \u5520\u5520\u55d1 \u5728centos7\u4e4b\u524d,\u5176\u5185\u6838\u65e2\u8981\u7ba1\u7406\u786c\u4ef6\u4e5f\u8981\u7ba1\u7406\u4e0a\u5c42\u5e94\u7528\u7a0b\u5e8f. \u5728centos7\u91cc\u5185\u6838\u53ea\u8d1f\u8d23\u786c\u4ef6\u90e8\u5206\u7684\u7ba1\u7406\u5566,\u4e0a\u5c42\u8fd0\u884c\u7684\u8f6f\u4ef6\u7edf\u4e00\u88absystemd\u8f6f\u4ef6\u7ba1\u7406\u8d77\u6765\u5566.\u76f8\u5f53\u4e8e\u67b6\u7a7a\u4e86\u5185\u6838. \u5f53\u7136,centos7\u8fd9\u4e00\u4e3e\u52a8\u5f15\u53d1\u4e86linux\u7684\u4e0d\u6ee1..Hhhh","title":"Linux\u542f\u52a8\u6d41\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/0_%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_5","text":"\u53c2\u8003\u94fe\u63a5: https://zhuanlan.zhihu.com/p/315472061 \u653b \u9632 \u53ef\u4ee5\u7528\u5355\u7528\u6237\u6a21\u5f0f \u4fee\u6539root\u8d26\u6237\u7684\u5bc6\u7801! GRUB\u52a0\u5bc6\u53ef\u4ee5\u9632\u6b62\u5355\u7528\u6237\u6a21\u5f0f\u4e0broot\u5bc6\u7801\u7684\u4fee\u6539! \u5149\u76d8\u4fee\u590d\u6a21\u5f0f\u53ef\u4ee5\u76f4\u63a5\u7ed5\u8fc7\u672c\u5730\u786c\u76d8\u7684\u8ba4\u8bc1\u4fee\u6539root\u5bc6\u7801.\u256e(\u256f\u25bd\u2570)\u256d\u53ef\u6076. \u5f53\u7136,GRUB\u5bc6\u7801\u4e5f\u53ef\u4ee5\u6539. BIOS\u52a0\u5bc6 \u6263\u4e3b\u677f\u7535\u6c60\u8ba9BIOS\u5931\u6548\u540e,\u518d\u7528\u5149\u76d8\u4fee\u590d\u6a21\u5f0f. \u9501\u4f4f\u673a\u67dc..\u7269\u7406\u9632\u5fa1xswl \u5728\u67d0\u4e2a\u542f\u52a8\u76d8\u91cc\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf: \u9009\u62e9linux\u5185\u6838,\u6309e\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f,\u53d1\u73b0ro\u90a3\u4e00\u884c\u6570\u636e\u8ddf\u53c2\u8003\u8d44\u6599\u6709\u4e9b\u51fa\u5165,\u53ef\u80fd\u662f\u5c0f\u7248\u672c\u4e0d\u5bf9\u5e94\u5bfc\u81f4\u7684..\u7565 ctrl+x\u540e\u8fdb\u5165\u5355\u7528\u6237\u6a21\u5f0f,\u8f93\u5165\u547d\u4ee4: \u5207\u6362\u5230\u539f\u59cb\u7cfb\u7edf chroot /sysroot \u4fee\u6539root\u8d26\u6237\u7684\u5bc6\u7801 password root \u8bbe\u7f6eselinux\u72b6\u6001\u4e3adisabled vim etc/sysconfig/selinux (\u4e0d\u8bbe\u7f6e\u7684\u8bdd\u4f1a\u5931\u8d25) grub\u52a0\u5bc6,\u5728\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4 \u8bbe\u7f6e\u5bc6\u7801 grub2-setpassword (\u8d26\u53f7root \u5bc6\u7801123) \u4fee\u6539\u6587\u4ef6 vim /boot/grub2/grub.cfgs \u5220\u9664--unrestricted \u91cd\u542f\u7cfb\u7edf,\u4f1a\u53d1\u73b0,\u5728\u9009\u62e9linux\u5185\u6838\u9875\u9762,\u4e0d\u7ba1\u662f\u52a0\u8f7d\u5185\u6838\u8fd8\u662f\u6309e\u8fdb\u5165\u7f16\u8f91,\u90fd\u4f1a\u53eb\u5148\u8f93\u5165\u7528\u6237\u548c\u5bc6\u7801.. \u5728\u5149\u76d8/U\u76d8\u91cc\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf -- \u5149\u76d8\u4fee\u590d\u6a21\u5f0f \u964d\u7eac\u6253\u51fb \u6ca1\u6709\u8d26\u6237\u5bc6\u7801,\u8fdb\u53bb\u5c31\u662f\u7ba1\u7406\u5458.. \u54ea\u6015\u662f\u88c5\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u542f\u52a8\u76d8\u4e5f\u53ef\u4ee5\u7ba1\u7406,\u53ef\u4ee5\u6539\u672c\u5730\u786c\u76d8\u4e0a\u7684OS root\u8d26\u6237\u7684\u5bc6\u7801.Hhhh \u5149\u76d8\u4fee\u590d\u6a21\u5f0f\u7684\u7b2c\u4e00\u6b65\u662f\u4fee\u6539BIOS\u542f\u52a8\u9879\u7684\u987a\u5e8f! \u7ed9BIOS\u52a0\u5bc6\uff01(\u6211\u8bbe\u7f6e\u7684\u662f111) \u8fd8\u53ef\u4ee5\u6263BIOS\u4e3b\u677f\u7535\u6c60\u8ba9BIOS\u8bbe\u7f6e\u5931\u6548.. \u6240\u4ee5\u5e94\u8be5\u9501\u4f4f\u673a\u67dc. \u6ca1\u6709\u7edd\u5bf9\u7684\u5b89\u5168,\u53ea\u80fd\u89c1\u62db\u62c6\u62db!","title":"\u7cfb\u7edf\u5bc6\u7801\u7834\u89e3\u4e0e\u5b89\u5168\u52a0\u56fa"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/","text":"\u7f16\u7a0b\u8bed\u8a00 \u00b6 \u7f16\u7a0b\u8bed\u8a00: \u4eba\u7c7b\u4e0e\u8ba1\u7b97\u673a\u6c9f\u901a\u4ee5\u6b64\u63a7\u5236\u8ba1\u7b97\u673a\u7684\u8bed\u8a00.. \u5206\u7c7b \u00b6 \u63a7\u5236\u7535\u8def( \u903b\u8f91\u7535\u8def ) - \u673a\u5668 \u8bed\u8a00( \u4e00\u5806\u4e8c\u8fdb\u5236\u6307\u4ee4 ) - \u6c47\u7f16 \u8bed\u8a00( \u5c06\u4e00\u4e32\u4e32\u4e8c\u8fdb\u5236\u6570\u5bf9\u5e94\u6210\u82f1\u6587\u5355\u8bcd ) - \u9ad8\u7ea7 \u8bed\u8a00 \u673a\u5668\u8bed\u8a00\u8ddf\u6c47\u7f16\u8bed\u8a00\u76f8\u5f53\u4e8e\u76f4\u63a5\u63a7\u5236\u786c\u4ef6; \u6c47\u7f16\u8bed\u8a00\u53ea\u4e0d\u8fc7\u89e3\u51b3\u4e86\u673a\u5668\u8bed\u8a00\u96be\u8bb0\u7684\u95ee\u9898,\u590d\u6742\u5ea6\u8fd8\u662f\u6ca1\u53d8\u7684. \u9ad8\u7ea7\u8bed\u8a00\u9700\u8981\u7ffb\u8bd1\u540e\u624d\u80fd\u8ba9\u8ba1\u7b97\u673a\u7406\u89e3,\u6839\u636e\u7ffb\u8bd1\u7684\u65b9\u5f0f\u4e0d\u540c,\u5206\u4e3a\u4e24\u7c7b: 1> \u89e3\u91ca\u578b(\u89e3\u91ca\u5668\u4f5c\u4e3a\u7ffb\u8bd1\u5de5\u5177): shell\u3001python 2> \u7f16\u8bd1\u578b(\u7f16\u8bd1\u5668\u4f5c\u4e3a\u7ffb\u8bd1\u5de5\u5177): c\u3001go !!\u6700\u6838\u5fc3\u7684\u533a\u522b\u5728\u4e8e\u7b2c\u4e8c\u6b21\u7684\u6267\u884c,\u7b2c\u4e8c\u6b21\u6267\u884c\u65f6,\u89e3\u91ca\u578b\u8bed\u8a00\u662f\u79bb\u4e0d\u5f00\u89e3\u91ca\u5668\u7684,\u6bcf\u6b21\u6267\u884c\u90fd\u9700\u8981\u89e3\u91ca\u5668\u8fdb\u884c\u7ffb\u8bd1; \u800c\u7f16\u8bd1\u578b\u8bed\u8a00\u7ecf\u8fc7\u4e00\u6b21\u7ffb\u8bd1,\u5c06\u8f6f\u4ef6\u7a0b\u5e8f\u7f16\u8bd1\u6210\u4e00\u5806\u53ef\u76f4\u63a5\u88ab\u8ba1\u7b97\u673a\u8bc6\u522b\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4.. \u518d\u6b21\u6267\u884c\u65f6,\u62ff\u7740\u8fd9\u5806\u53ef\u6267\u884c\u6307\u4ee4\u76f4\u63a5\u8fd0\u884c..\u4e0d\u9700\u8981\u518d\u6b21\u7ffb\u8bd1. So,\u72ed\u9698\u7684\u4e0d\u6210\u4f53\u7cfb\u7684\u5355\u4ece\u8bed\u8a00\u5c42\u6b21\u5206\u6790,\u6027\u80fd\u65b9\u9762\u7f16\u8bd1\u578b>\u89e3\u91ca\u578b.. Q: \u7528\u89e3\u91ca\u578b\u8bed\u8a00(python)or\u7f16\u8bd1\u578b\u8bed\u8a00(c)\u5199\u597d\u7684\u8f6f\u4ef6\u5982\u4f55\u5728linux\u4e0a\u8fd0\u884c\uff1f A: \u4e0b\u8f7d\u8f6f\u4ef6\u5305 1> \u5bf9\u4e8e\u7528python\u5199\u7684\u8f6f\u4ef6\u800c\u8a00: \u5728linux\u4e3b\u673a\u4e0a\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684python\u89e3\u91ca\u5668\u4ee5\u53ca\u8f6f\u4ef6\u76f8\u5173\u4f9d\u8d56 <\u6bcf\u6b21\u6267\u884c\u90fd\u9700\u8981python\u89e3\u91ca\u5668\u6267\u884c> 2> \u5bf9\u4e8e\u7528c\u8bed\u8a00\u5199\u597d\u7684\u8f6f\u4ef6\u800c\u8a00: \u5728linux\u4e3b\u673a\u4e0a\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684c\u7f16\u8bd1\u5668\u4ee5\u53ca\u8f6f\u4ef6\u76f8\u5173\u4f9d\u8d56 \u7528\u7f16\u8bd1\u5668\u628a\u6e90\u7801\u5305\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u7684\u547d\u4ee4 <\u7b2c\u4e00\u6b21\u7528\u7f16\u8bd1\u5668\u7f16\u8bd1\u540e,\u5f80\u540e\u7684\u591a\u6b21\u6267\u884c\u5c31\u4f7f\u7528\u7f16\u8bd1\u540e\u7684\u547d\u4ee4\u5373\u53ef> Ps: python\u8bed\u8a00\u4e3b\u6d41\u7684Cpython\u89e3\u91ca\u5668\u662f\u7528c\u8bed\u8a00\u5199\u7684; bash\u89e3\u91ca\u5668\u7edd\u5927\u90e8\u5206\u4e5f\u90fd\u662fc\u8bed\u8a00\u5199\u7684. c\u8bed\u8a00\u662f\u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3\u7684,\u7528c\u5199\u7684Cpython\u89e3\u91ca\u5668\u548cbash\u89e3\u91ca\u5668\u76f8\u5f53\u4e8e\u5c06\u7cfb\u7edf\u63a5\u53e3\u8fdb\u4e00\u6b65\u8fdb\u884c\u4e86\u5c01\u88c5! \u89e3\u91ca\u5668\u7ffb\u8bd1\u6587\u4ef6 \u00b6 Q: \u5728shell\u89e3\u91ca\u5668\u4ea4\u4e92\u6027\u73af\u5883\u4e0b ( \u9ed8\u8ba4\u662fbash ) ,\u8f93\u5165 echo \"hello\" \u53d1\u751f\u4e86\u4ec0\u4e48? A: \u9996\u5148,\u4f1a\u5c06\u6b64\u547d\u4ee4\u4ea4\u7ed9shell\u89e3\u91ca\u5668,shell\u89e3\u91ca\u5668\u518d\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3,\u7cfb\u7edf\u63a5\u53e3\u5728\u8c03\u7528\u5185\u6838,OS\u5185\u6838\u8fdb\u800c\u64cd\u4f5c\u5bf9\u5e94\u7684\u786c\u4ef6. \"\"\" -- a.sh -- echo \" 111 \" echo \" 222 \" echo \" 333 \" \"\"\" ## \u8fd0\u884c\u4e86\u4e24\u4e2a\u7a0b\u5e8f \u4e00\u4e2a\u662fbash;\u53e6\u4e00\u4e2a\u662fa.sh [ root@localhost opt ] # bash a.sh 111 222 \"\"\" -- b.py -- print(\" Hello \") print(\" World \") \"\"\" [ root@localhost opt ] # python b.py Hello world ## bash\u3001python \u90fd\u662f\u89e3\u91ca\u5668 ## \u6ce8\u610f: .sh .py\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6\u540e\u7f00\u6807\u8bc6,\u6587\u4ef6\u547d\u540d\u4e0d\u52a0\u540e\u7f00\u4e5f\u4e0d\u5f71\u54cd\u6574\u4e2a\u8fd0\u884c\u7ed3\u679c.. \u8de8\u5e73\u53f0\u6027 \u00b6 \u6211\u4eec\u5047\u8bbe\u5f00\u53d1\u4eba\u5458\u7528c\u5728windows ( x86-32\u4f4d\u7684cpu ) \u5e73\u53f0\u4e0a\u5f00\u53d1\u4e86\u4e00\u4e2a\u8f6f\u4ef6,\u5f00\u53d1\u5b8c\u6210\u540e\u8fde\u540c\u8f6f\u4ef6\u76f8\u5173\u7684\u4f9d\u8d56\u8fdb\u884c\u7f16\u8bd1,\u5c06\u7f16\u8bd1\u540e\u7684\u4e8c\u8fdb\u5236\u5305\u76f4\u63a5\u7ed9\u4e86\u8fd0\u7ef4\u4eba\u5458,\u4f46\u662f\u8fd0\u7ef4\u4eba\u5458\u90e8\u7f72\u7684\u73af\u5883\u662fx86-64\u4f4d\u7684linux\u7cfb\u7edf.. \u56e0\u4e3a\u5728window\u7cfb\u7edf\u7684\u673a\u5668\u4e0a\u628a\u6e90\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u540e\u7684\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4\u53ea\u9002\u7528\u4e8ewindow\u5e73\u53f0.. \u6240\u4ee5\u8de8\u5e73\u53f0\u90e8\u7f72\u5931\u8d25. \u56e0\u800c\u7528\u7f16\u8bd1\u578b\u8bed\u8a00\u5f00\u53d1\u7684\u8f6f\u4ef6\u901a\u5e38\u662f\u7ed9\u8fd0\u7ef4\u4e00\u4e2a\u6e90\u7801\u5305,\u8fd0\u7ef4\u518d\u6839\u636e\u81ea\u5df1\u6240\u5904\u7684\u5e73\u53f0\u73af\u5883\u4e0b\u8f7d\u76f8\u5173\u7684\u8f6f\u4ef6\u4f9d\u8d56\u8fdb\u884c\u7f16\u8bd1.. \u4e0d\u540c\u5e73\u53f0\u6709\u5bf9\u5e94\u7248\u672c\u7684\u89e3\u91ca\u5668,\u6240\u4ee5\u89e3\u91ca\u578b\u7684\u8de8\u5e73\u53f0\u6027\u5f3a c\u4e0d\u652f\u6301\u8de8\u5e73\u53f0\u7f16\u8bd1 go\u8bed\u8a00,\u652f\u6301\u8de8\u5e73\u53f0\u7f16\u8bd1.. \u4ea4\u53c9\u7f16\u8bd1\uff1f\uff1f\u6307\u5b9a\u5e73\u53f0\u7f16\u8bd1\uff1f python\u7684\u8de8\u5e73\u53f0\u6027\u597d,\u662f\u56e0\u4e3a\u5b98\u65b9\u5728\u591a\u4e2a\u5e73\u53f0\u90fd\u5f00\u53d1\u4e86\u9002\u5e94\u5f53\u524d\u5e73\u53f0\u7684\u591a\u4e2a\u7248\u672c\u7684python\u89e3\u91ca\u5668. \u8f6f\u4ef6\u5305\u5206\u7c7b \u00b6 \u6e90\u7801\u5305 --- \u5b9a\u5236\u5b89\u88c5\u7ec6\u8282 --- \u5b89\u88c5 rpm\u5df2\u7ecf\u5236\u4f5c\u597d\u5b89\u88c5\u7a0b\u5e8f --- \u5b89\u88c5 \u4e8c\u8fdb\u5236\u5305,\u4e0b\u8f7d\u5b8c\u6bd5\u5373\u53ef\u4f7f\u7528,\u65e0\u9700\u5b89\u88c5 \u6e90\u7801\u5305\u7684\u5b89\u88c5\u5f88\u7e41\u7410,\u56e0\u4e3a\u8981\u89e3\u51b3\u4f9d\u8d56\u6027\u7684\u95ee\u9898..\u5e76\u4e14\u5728\u6bcf\u53f0\u673a\u5668\u4e0a\u90fd\u5f97\u7f16\u8bd1\u4e0b. (\u8fd0\u7ef4\u62ff\u5230\u6e90\u7801\u5305,\u8981\u5c06\u5f00\u53d1\u4eba\u5458\u5f00\u53d1\u6240\u5904\u7684\u90a3\u4e00\u5957\u73af\u5883\u91cd\u65b0\u5e03\u7f6e\u4e0b,\u5373\u4e0b\u8f7d\u5404\u79cd\u5404\u6837\u7684\u4f9d\u8d56\u5305,\u8f6f\u4ef6\u624d\u80fd\u6b63\u5e38\u7f16\u8bd1\u6210\u529f\u8fd0\u884c) \u89e3\u51b3\u4f9d\u8d56\u7684\u672c\u8d28\u5c31\u662f\u5728\u7f51\u4e0a\u4e0b\u8f7d\u8f6f\u4ef6\u8fd0\u884c\u6240\u9700\u8981\u7684\u5bf9\u5e94\u7248\u672c\u7684\u5e93.. \u968f\u7740\u8f6f\u4ef6\u7684\u8fed\u4ee3\u5b8c\u5584,\u6240\u9700\u8981\u7684\u4f9d\u8d56\u76f8\u5bf9\u662f\u56fa\u5b9a\u7684,\u5c31\u53ef\u4ee5\u5c06\u6e90\u7801\u5305\u8fdb\u884c\u9884\u7f16\u8bd1(\u5373\u5c06\u6e90\u7801\u5305\u8fde\u540c\u6240\u9700\u7684\u4f9d\u8d56\u5e93\u505a\u6210rpm..) \u5206\u7c7b \u5b89\u88c5 \u7279\u70b9 rpm\u5305 \u9884\u5148\u7f16\u8bd1 \u6253\u5305,\u5b89\u88c5\u7b80\u5355 \u901a\u5e38 \u8f6f\u4ef6\u7684\u7a33\u5b9a\u7248\u672c \u4f1a\u88ab\u5b98\u65b9\u505a\u6210rpm,\u6240\u4ee5\u8f6f\u4ef6\u7248\u672c\u504f\u4f4e \u6e90\u7801\u5305 \u5728\u81ea\u5df1\u5e73\u53f0\u624b\u52a8\u7f16\u8bd1\u6253\u5305,\u5b89\u88c5\u7e41\u7410 \u8f6f\u4ef6\u7248\u672c\u4e30\u5bcc,\u53ef\u9009\u62e9\u6027\u5f3a \u4e8c\u8fdb\u5236\u5305 \u89e3\u538b\u5373\u53ef\u4f7f\u7528,\u5b89\u88c5\u7b80\u5355 \u4e0d\u80fd\u4fee\u6539\u6e90\u4ee3\u7801 \u6302\u8f7d\u955c\u50cf \u00b6 \u4e4b\u6240\u4ee5\u8981\u6302\u8f7d\u955c\u50cf,\u662f\u56e0\u4e3a\u6211\u4eec\u60f3\u8981\u4f7f\u7528\u5b89\u88c5OS\u7684\u955c\u50cf\u6587\u4ef6\u91cc\u9762\u5305\u542b\u7684\u4e00\u5806rpm\u5305... \u5728\u524d\u9762\u5b89\u88c5\u65f6,\u6211\u4eec\u5c06\u8fd9\u955c\u50cf\u653e\u5230\u5149\u9a71\u5149\u76d8 /dev/sr0 \u91cc\u7684. \u955c\u50cf\u6587\u4ef6 \u00b6 \u8981\u60f3\u67e5\u770b\u4f7f\u7528\u955c\u50cf\u5149\u76d8\u91cc\u7684\u5185\u5bb9,\u9700\u8981\u5148\u5c06\u5149\u76d8\u8fdb\u884c\u6302\u8f7d\u5904\u7406,\u8ba9\u5b83\u53d8\u6210\u4e00\u4e2a\u53ef\u7528\u8bbe\u5907. ## CentOS-7-x86_64-DVD-2009.iso \"\"\" !!vm\u865a\u62df\u673a\u5149\u9a71\u91cc\u5173\u8054\u4e00\u4e2a\u955c\u50cf,\u76f8\u5f53\u4e8e\u5728\u771f\u673a\u7684\u5149\u9a71\u91cc\u63d2\u5165\u4e86\u4e00\u4e2a\u5149\u76d8!! \u82e5\u5b9e\u9a8c\u7528\u7684\u662fvm,\u8981\u770b\u4f7f\u7528\u7684\u662f\u54ea\u4e2a\u5149\u9a71,\u56e0\u4e3avm\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2aCD/DVD.. sr0 sr1.. 1> `mount /dev/sr0 /opt/` 2> `mount /dev/cdrom /opt/` \u56e0\u4e3a\u8f6f\u94fe\u63a5 lrwxrwxrwx 1 root root 3 8\u6708 9 19:56 /dev/cdrom -> sr0 3> \u82e5\u6ca1\u6709\u5149\u9a71\u5149\u76d8\u6216\u8005U\u76d8\u542f\u52a8\u76d8,\u5c31\u4e0d\u80fd\u4ee5\u5149\u76d8\u6302\u8f7d\u7684\u65b9\u5f0f\u8fdb\u884c\u6302\u8f7d.. \u89e3\u51b3\u65b9\u6848:\u5c06\u955c\u50cf\u6587\u4ef6\u653e\u5230\u672c\u5730\u786c\u76d8\u91cc\u540e `mount -o loop \u955c\u50cf\u6587\u4ef6\u7684\u8def\u5f84 /opt` Ps:\u8ba9\u670d\u52a1\u5668\u672c\u5730\u786c\u76d8\u91cc\u6709\u4e00\u4e2a\u955c\u50cf\u6587\u4ef6\u7684\u4e24\u79cd\u65b9\u5f0f \u5373\u5982\u4f55\u5f97\u5230\u955c\u50cf\u6587\u4ef6 1> \u5176\u5b83\u673a\u5668\u4e0a\u6709\u4e2a\u73b0\u6210\u7684\u955c\u50cf\u6587\u4ef6,\u7528u\u76d8\u62f7\u8d1d\u8fc7\u6765\u6216\u8005xshell\u4e0a\u4f20\u8fc7\u4e86\u7686\u53ef 2> \u82e5\u6709\u5149\u9a71,\u8fd8\u53ef\u4ee5\u4f7f\u7528dd\u547d\u4ee4,\u5c06\u5149\u76d8\u91cciso\u955c\u50cf\u6587\u4ef6\u7684\u5185\u5bb9\u8f93\u51fa\u5230\u670d\u52a1\u5668\u672c\u5730\u67d0\u4e00\u4e2a\u6587\u4ef6\u4e2d.. `dd if=\u8f93\u5165\u6587\u4ef6\u8def\u5f84 of=\u8f93\u51fa\u6587\u4ef6\u8def\u5f84` \u76f8\u5bf9\u4e8e\u5c06\u8f93\u5165\u6587\u4ef6\u5185\u5bb9\u8bfb\u53d6\u5230\u4e86\u8f93\u51fa\u6587\u4ef6\u4e2d.. `dd if=/dev/sr0 of=/root/centos7.iso` \u6ce8\u610f\uff01\u4e00\u5b9a\u8981\u8003\u8651\u8f93\u51fa\u6587\u4ef6\u8def\u5f84\u6240\u5904\u7684\u6302\u8f7d\u70b9\u5bf9\u5e94\u7684\u6302\u8f7d\u8bbe\u5907/\u786c\u76d8\u5269\u4f59\u7684\u7a7a\u95f4\u662f\u5426\u5145\u8db3.. `df -h`\u67e5\u770b \u6bd4\u5982,\u955c\u50cf\u6587\u4ef64.3G\u3001/root/centos7.iso\u7684\u6302\u8f7d\u70b9\u662f/ \u5bf9\u5e94\u7684\u6587\u4ef6\u7cfb\u7edf\u53ea\u52693.2G,\u5219\u53ea\u4f1a\u5199\u5165\u955c\u50cf3.2G\u5185\u5bb9 \u89e3\u51b3\u65b9\u6848:\u52a0\u4e00\u5757\u786c\u76d8 \u8be6\u60c5\u8bf7\u770b \u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf\u4e2d\u8f6f\u94fe\u63a5\u89e3\u51b3\u78c1\u76d8\u6ee1\u8fd9\u4e00\u90e8\u5206\u5185\u5bb9.. \u89e3\u51b3\u786c\u76d8\u7a7a\u95f4\u4e0d\u591f\u7684\u95ee\u9898\u540e,dd\u547d\u4ee4\u6210\u529f\u540e..\u6267\u884c\u547d\u4ee4.. `mount -o loop /root/centos7.iso /mnt` /opt -- \u5149\u76d8\u91cc\u7684\u5185\u5bb9 \u6302\u8f7d\u7684\u662f\u5149\u76d8 /mnt -- \u955c\u50cf\u6587\u4ef6\u7684\u5185\u5bb9 \u6302\u8f7d\u7684\u662f\u955c\u50cf\u6587\u4ef6 \u56e0\u4e3a\u5149\u76d8\u91cc\u653e\u7740\u7684\u5c31\u662f\u955c\u50cf\u6587\u4ef6,\u6240\u4ee5\u90fd\u4e00\u6837.. \"\"\" [ root@localhost opt ] # mount /dev/sr0 /opt/ mount: /dev/sr0 \u5199\u4fdd\u62a4\uff0c\u5c06\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6302\u8f7d ## \u53ef\u7528df\u547d\u4ee4\u53ef\u5bf9\u6302\u8f7d\u72b6\u6001\u8fdb\u884c\u67e5\u770b [ root@localhost ~ ] # df \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 ... ... ... ... ... ... tmpfs 99564 0 99564 0 % /run/user/1000 /dev/sr0 4600876 4600876 0 100 % /opt \u5378\u8f7d/\u89e3\u9664\u5173\u8054 \u00b6 \"\"\" umount /dev/sr0 \u6307\u5b9a\u6302\u8f7d\u6e90\u8bbe\u5907\u8fdb\u884c\u5378\u8f7d umount /opt \u6307\u5b9a\u6302\u8f7d\u70b9\u8fdb\u884c\u5378\u8f7d \u8fd9\u91cc\u662f\u56e0\u4e3a\u6b63\u5728\u4f7f\u7528,\u6240\u4ee5\u5378\u8f7d\u89e3\u9664\u4e0d\u4e86.. \u7c7b\u4f3c\u4e8ewindows\u4e0b\u5378\u8f7d\u6253\u5f00\u7684\u6587\u4ef6\u5939\u5378\u8f7d\u4e0d\u4e86.. \u89e3\u51b3\u65b9\u6848: \u5207\u6362\u5230\u5176\u5b83\u76ee\u5f55\u4e0b; `umount -l /opt`\u5f3a\u5236\u5378\u8f7d \"\"\" [ root@localhost ~ ] # cd /opt/ [ root@localhost opt ] # umount /opt umount: /opt\uff1a\u76ee\u6807\u5fd9\u3002 ( \u6709\u4e9b\u60c5\u51b5\u4e0b\u901a\u8fc7 lsof ( 8 ) \u6216 fuser ( 1 ) \u53ef\u4ee5 \u627e\u5230\u6709\u5173\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u8fdb\u7a0b\u7684\u6709\u7528\u4fe1\u606f ) [ root@localhost opt ] # umount /dev/sr0 umount: /opt\uff1a\u76ee\u6807\u5fd9\u3002 ( \u6709\u4e9b\u60c5\u51b5\u4e0b\u901a\u8fc7 lsof ( 8 ) \u6216 fuser ( 1 ) \u53ef\u4ee5 \u627e\u5230\u6709\u5173\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u8fdb\u7a0b\u7684\u6709\u7528\u4fe1\u606f ) \u67e5\u770b\u955c\u50cf\u4e2d\u7684rpm\u5305 \u00b6 [ root@localhost opt ] # ls /opt/ CentOS_BuildTag GPL LiveOS RPM-GPG-KEY-CentOS-7 EFI images Packages RPM-GPG-KEY-CentOS-Testing-7 EULA isolinux repodata TRANS.TBL [ root@localhost opt ] # ls /opt/Packages/ 389 -ds-base-1.3.10.2-6.el7.x86_64.rpm 389 -ds-base-libs-1.3.10.2-6.el7.x86_64.rpm abattis-cantarell-fonts-0.0.25-1.el7.noarch.rpm ... ... ... rpm\u5305 \u00b6 RPM \u662fRed-Hat Package Manager(RPM\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668)\u7684\u7f29\u5199 \u901a\u5e38\u8f6f\u4ef6\u7684\u7a33\u5b9a\u7248\u4f1a\u88ab\u5b98\u65b9\u505a\u6210rpm, \u6240\u4ee5\u8f6f\u4ef6\u7248\u672c\u504f\u4f4e \u5728\u4e3b\u6d41\u7684linux\u7cfb\u7edf\u4e0a, \u591a\u6570\u8f6f\u4ef6\u7684\u5b89\u88c5\u3001\u5347\u7ea7\u3001\u79fb\u9664\u4ee5\u53ca\u7ef4\u62a4\u5de5\u4f5c\u90fd\u662f\u4f7f\u7528RPM\u8f6f\u4ef6\u5305\u7ba1\u7406\u7a0b\u5e8f\u6765\u5b8c\u6210\u7684. rpm\u547d\u4ee4 \u548c yum\u547d\u4ee4 \u90fd\u53ef\u4ee5\u7ba1\u7406rpm\u683c\u5f0f\u7684\u8f6f\u4ef6\u5305!!! rpm\u5305\u683c\u5f0f \u00b6 \u4ee5 mysql-connector-odbc-5.2.5-8.el7.x86_64.rpm \u4e3a\u4f8b: \u8f6f\u4ef6\u5305\u540d: mysql-connector-odbc \u7248\u672c\u53f7Version: 5 ( \u5927\u7248\u672c\u53f7\u5927\u6539 ) .2 ( \u5c0f\u7248\u672c\u53f7\u5f80\u5f80\u52a0\u51e0\u4e2a\u5c0f\u529f\u80fd ) .5 ( \u4fee\u8ba2\u7248\u672c\u6539bug ) \u53d1\u5e03\u6b21\u6570: 8 \u9002\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c: .el7 \u8fd9\u91cc\u662f\u6307\u4f01\u4e1a\u7ea7\u7684linux\u7684\u7b2c7\u4e2a\u7248\u672c,\u5373\u5bf9\u5e94centos7\u6216redhot7 \u6709\u7684\u4f1a\u660e\u786e\u5199\u6210el7.centos \u786c\u4ef6\u5e73\u53f0: .x86_64 \u8fd9\u91cc\u662f\u6307\u9002\u7528\u4e8ex86\u67b6\u678464\u4f4d\u7684cpu \u4e5f\u6709\u53ef\u80fd\u9047\u5230 noarch \u4ee3\u8868\u9002\u7528\u4e8e\u4e0d\u540c\u7248\u672c\u7684cpu \u540e\u7f00: .rpm [ root@localhost opt ] # uname -m x86_64 [ root@localhost opt ] # cat /etc/redhat-release CentOS Linux release 7 .9.2009 ( Core ) [ root@localhost opt ] # uname -a Linux localhost.localdomain 3 .10.0-1160.66.1.el7.x86_64 #1 SMP Wed May 18 16:02:34 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux [ root@localhost opt ] # uname -r 3 .10.0-1160.66.1.el7.x86_64 rpm\u5305\u83b7\u53d6 \u00b6 1> \u4ece\u7f51\u7edc\u4e0a\u4e0b\u8f7dRPM\u5305 2> ISO\u955c\u50cf\u5149\u76d8\u91cc\u6709rpm\u5305 rpm\u547d\u4ee4 \u00b6 \u9009\u9879 \u00b6 \u5b89\u88c5: rpm -ivh <RPM\u5305\u540d> \u5378\u8f7d: rpm -e <RPM\u5305\u540d> \u82e5\u8be5\u8f6f\u4ef6\u5305\u88ab\u5176\u5b83\u8f6f\u4ef6\u5305\u6240\u4f9d\u8d56,\u662f\u4e0d\u5141\u8bb8\u5378\u8f7d\u7684.. \u5347\u7ea7: rpm -Uvh <RPM\u5305\u540d> \u672c\u8d28\u5c31\u662f\u5378\u4e86\u4f4e\u7248\u672c\u7684,\u5b89\u88c5\u9ad8\u7248\u672c\u7684.. \u67e5\u8be2: rpm -qa -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u6240\u6709\u5df2\u5b89\u88c5\u7684RPM\u8f6f\u4ef6\u5305 \u56e0\u4e3a\u5df2\u7ecf\u5b89\u88c5,\u6240\u4ee5\u6ca1\u6709.rpm\u540e\u7f00 rpm -qa | grep <RPM\u5305\u540d> or rpm -q <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u662f\u5426\u5b89\u88c5\u67d0\u4e00RPM\u8f6f\u4ef6\u5305 rpm -qi <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u7684\u63cf\u8ff0\u4fe1\u606f rpm -ql <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u4ea7\u751f\u7684\u6240\u6709\u6587\u4ef6 \u200b rpm\u5305\u76f8\u5f53\u4e8e\u4e00\u79cd\u5b9a\u5236\u597d\u7684\u5b89\u88c5\u7a0b\u5e8f,\u5b89\u88c5\u5728\u54ea,\u5b89\u88c5\u4ec0\u4e48\u90fd\u5df2\u7ecf\u8bbe\u7f6e\u597d\u5566,-ql\u770b\u770b\u5b89\u88c5\u4e86\u54ea\u4e9b\u4e1c\u897f \u200b rpm -qc <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u91cc\u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4e0d\u662f\u6240\u6709\u8f6f\u4ef6\u5305\u90fd\u6709\u914d\u7f6e\u6587\u4ef6\u7684 \u200b rpm -qd <RPM\u5305\u540d> -- \u67e5\u8be2\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u4ea7\u751f\u4e86\u54ea\u4e9b\u5e2e\u52a9\u6587\u6863 \u6ce8\u610f\u54e6! \u52a0\u4e0a\u4e2a\u9009\u9879 p -qip -qlp -qcp -qdp \u53ef\u4ee5\u67e5\u770b\u672a\u5b89\u88c5\u7684rpm\u5305\u5bf9\u5e94\u7684\u4fe1\u606f rpm -qf \u6587\u4ef6\u8def\u5f84 -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u6587\u4ef6\u5f52\u5c5e\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305 rpm -qf ` which yum ` # -- \u5c06\u53cd\u5f15\u53f7\u4e2d\u547d\u4ee4\u7684\u7ed3\u679c\u7ed9 rpm -qf \u683c\u5916\u9009\u9879: --nomd5 \u4e0d\u68c0\u9a8c\u8f6f\u4ef6\u5305\u7684\u7b7e\u540d --nodeps \u5b89\u88c5\u548c\u5378\u8f7d\u65f6\u53ef\u80fd\u4f1a\u63d0\u793a\u4f9d\u8d56\u95ee\u9898..\u53ef\u5728\u547d\u4ee4\u6700\u540e\u6dfb\u52a0\u6b64\u9009\u9879\u5ffd\u7565\u4f9d\u8d56,\u76f4\u63a5\u5378\u8f7d\u5b89\u88c5, \u540e\u679c\u81ea\u8d1f .. \u6572\u9ed1\u677f!\u89e3\u51b3\u4f9d\u8d56\u540e\u518d\u5b89\u88c5\u6216\u5378\u8f7d!!!!! \u4f46rpm\u547d\u4ee4\u7684\u5f0a\u7aef\u5728\u4e8e\u5f88\u96be\u5206\u8fa8\u4f9d\u8d56,\u6709\u65f6\u4e0d\u4f1a\u5f88\u660e\u786e\u7684\u544a\u8bc9\u4f60\u4f9d\u8d56\u54ea\u4e2a\u5305,\u53ef\u80fd\u53ea\u4f1a\u63d0\u793a\u4f9d\u8d56\u54ea\u4e2a\u6587\u4ef6..\u53ea\u80fd\u9760\u731c!\u9760\u8c37\u6b4c.. rpm\u89e3\u51b3\u4f9d\u8d56\u95ee\u9898\u5f88\u7e41\u7410.. --force \u82e5\u4f4e\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u7684\u5b58\u5728,\u5b89\u88c5\u9ad8\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u65f6\u4f1a\u63d0\u793a\u51b2\u7a81. \u5728\u5b89\u88c5\u547d\u4ee4\u6700\u540e\u6dfb\u52a0\u6b64\u9009\u9879.. \u53ef\u5ffd\u7565\u51b2\u7a81,\u5f3a\u5236\u5b89\u88c5\u9ad8\u7248\u672c\u8f6f\u4ef6\u5305.. \u8fd9\u6837\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u9ad8\u4f4e\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u5171\u5b58.. \u4e0d\u63a8\u8350\u8fd9\u6837\u505a!!!! \u4f7f\u7528Uvh\u5347\u7ea7\u5b89\u88c5\u662f\u6b63\u89e3. Ps: \u82e5\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u62a5\u9519: curl: (60) Peer's Certificate has expired . \u5c06\u7cfb\u7edf\u65f6\u95f4\u4fee\u6539\u6b63\u786e,\u7136\u540e\u518d\u5b89\u88c5\u5373\u53ef. \u5b9e\u9a8c\u9a8c\u8bc1 \u00b6 \u25b2 \u5b89\u88c5 \"\"\" -i \u5b89\u88c5 -v \u5217\u51fa\u8be6\u7ec6\u4fe1\u606f -h \u8f6f\u4ef6\u5305\u5b89\u88c5\u7684\u65f6\u5019\u5217\u51fa\u54c8\u5e0c\u6807\u8bb0 \"\"\" [ root@localhost ~ ] # rpm -ivh /opt/Packages/httpd-2.4.6-95.el7.centos.x86_64.rpm \u9519\u8bef\uff1a\u4f9d\u8d56\u68c0\u6d4b\u5931\u8d25\uff1a /etc/mime.types \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 httpd-tools = 2 .4.6-95.el7.centos \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 ## \u53ea\u63d0\u793a\u4e86\u6240\u9700\u6587\u4ef6 libapr-1.so.0 ()( 64bit ) \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 libaprutil-1.so.0 ()( 64bit ) \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 [ root@localhost ~ ] # rpm -ivh /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm \u51c6\u5907\u4e2d... ################################# [100%] \u8f6f\u4ef6\u5305 dos2unix-6.0.3-7.el7.x86_64 \u5df2\u7ecf\u5b89\u88c5 \u25b2 \u67e5\u8be2 [ root@localhost ~ ] # rpm -q dos2uni \u672a\u5b89\u88c5\u8f6f\u4ef6\u5305 dos2uni [ root@localhost ~ ] # rpm -q dos2unix dos2unix-6.0.3-7.el7.x86_64 [ root@localhost ~ ] # rpm -qa | grep dos2unix dos2unix-6.0.3-7.el7.x86_64 [ root@localhost ~ ] # rpm -qi dos2unix Name : dos2unix Version : 6 .0.3 Release : 7 .el7 ... ... ... [ root@localhost ~ ] # rpm -ql dos2unix /usr/bin/dos2unix /usr/bin/mac2unix /usr/bin/unix2dos ... ... ... [ root@localhost ~ ] # rpm -qc yum /etc/logrotate.d/yum /etc/yum.conf /etc/yum/version-groups.conf [ root@localhost ~ ] # which rpm /usr/bin/rpm [ root@localhost ~ ] # rpm -qf /usr/bin/rpm rpm-4.11.3-48.el7_9.x86_64 [ root@localhost ~ ] # rpm -qd dos2unix /usr/share/doc/dos2unix-6.0.3/COPYING.txt /usr/share/doc/dos2unix-6.0.3/ChangeLog.txt /usr/share/doc/dos2unix-6.0.3/NEWS.txt /usr/share/doc/dos2unix-6.0.3/README.txt ... ... ... \u25b2 \u5347\u7ea7 \"\"\" \u4f7f\u7528wget\u547d\u4ee4\u4e0b\u8f7d\u4e00\u4e2a\u4f4e\u7248\u672c\u3001\u4e00\u4e2a\u9ad8\u7248\u672c `wget https://mirrors.aliyun.com/zabbix/zabbix/3.0/rhel/7/x86_64/zabbix-agent-3.0.9-1.el7.x86_64.rpm` `wget https://mirrors.aliyun.com/zabbix/zabbix/4.2/rhel/7/x86_64/zabbix-agent-4.2.0-1.el7.x86_64.rpm` \u5148\u5b89\u88c5\u4f4e\u7248\u672c\u7684,\u518d\u5b89\u88c5\u9ad8\u7248\u672c\u7684 \"\"\" [ root@localhost ~ ] # ls | grep zabbix zabbix-agent-3.0.9-1.el7.x86_64.rpm zabbix-agent-4.2.0-1.el7.x86_64.rpm [ root@localhost ~ ] # rpm -ivh zabbix-agent-3.0.9-1.el7.x86_64.rpm \u8b66\u544a\uff1azabbix-agent-3.0.9-1.el7.x86_64.rpm: \u5934V4 DSA/SHA1 Signature, \u5bc6\u94a5 ID 79ea5ed4: NOKEY \u51c6\u5907\u4e2d... ################################# [100%] \u6b63\u5728\u5347\u7ea7/\u5b89\u88c5... 1 :zabbix-agent-3.0.9-1.el7 ################################# [100%] [ root@localhost ~ ] # rpm -q zabbix \u672a\u5b89\u88c5\u8f6f\u4ef6\u5305 zabbix [ root@localhost ~ ] # rpm -q zabbix-agent zabbix-agent-3.0.9-1.el7.x86_64 ## \u56e0\u4e3a\u4f4e\u7248\u672c\u7684\u5b58\u5728 \u4e0d\u8ba9\u6211\u4eec\u5b89\u88c5\u9ad8\u7248\u672c\u7684 \u51b2\u7a81\u4e86. [ root@localhost ~ ] # rpm -ivh zabbix-agent-4.2.0-1.el7.x86_64.rpm \u8b66\u544a\uff1azabbix-agent-4.2.0-1.el7.x86_64.rpm: \u5934V4 RSA/SHA512 Signature, \u5bc6\u94a5 ID a14fe591: NOKEY \u51c6\u5907\u4e2d... ################################# [100%] ... ... ... file /usr/share/man/man8/zabbix_agentd.8.gz from install of zabbix-agent-4.2.0-1.el7.x86_64 conflicts with file from package zabbix-agent-3.0.9-1.el7.x86_64 \"\"\" \u89e3\u51b3\u65b9\u6848: 1> \u5378\u8f7d\u4f4e\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u540e,\u518d\u5b89\u88c5\u9ad8\u7248\u672c\u7684 2> \u5728\u5b89\u88c5\u9ad8\u7248\u672c\u65f6,\u5728\u547d\u4ee4\u6700\u540e\u6dfb\u52a0\u9009\u9879--force \u4e0d\u63a8\u8350\u8fd9\u6837\u505a.. \u4f1a\u5bfc\u81f4\u9ad8\u4f4e\u7248\u672c\u5171\u5b58. 3> \u6b63\u89e3 -- \u4f7f\u7528\u9009\u9879-Uvh \u5347\u7ea7\u5b89\u88c5 \"\"\" [ root@localhost ~ ] # rpm -Uvh zabbix-agent-4.2.0-1.el7.x86_64.rpm \u8b66\u544a\uff1azabbix-agent-4.2.0-1.el7.x86_64.rpm: \u5934V4 RSA/SHA512 Signature, \u5bc6\u94a5 ID a14fe591: NOKEY \u51c6\u5907\u4e2d... ################################# [100%] \u6b63\u5728\u5347\u7ea7/\u5b89\u88c5... 1 :zabbix-agent-4.2.0-1.el7 ################################# [ 50%] \u6b63\u5728\u6e05\u7406/\u5220\u9664... 2 :zabbix-agent-3.0.9-1.el7 ################################# [100%]","title":"\u8f6f\u4ef6\u5305\u7ba1\u7406\u4e4brpm"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_1","text":"\u7f16\u7a0b\u8bed\u8a00: \u4eba\u7c7b\u4e0e\u8ba1\u7b97\u673a\u6c9f\u901a\u4ee5\u6b64\u63a7\u5236\u8ba1\u7b97\u673a\u7684\u8bed\u8a00..","title":"\u7f16\u7a0b\u8bed\u8a00"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_2","text":"\u63a7\u5236\u7535\u8def( \u903b\u8f91\u7535\u8def ) - \u673a\u5668 \u8bed\u8a00( \u4e00\u5806\u4e8c\u8fdb\u5236\u6307\u4ee4 ) - \u6c47\u7f16 \u8bed\u8a00( \u5c06\u4e00\u4e32\u4e32\u4e8c\u8fdb\u5236\u6570\u5bf9\u5e94\u6210\u82f1\u6587\u5355\u8bcd ) - \u9ad8\u7ea7 \u8bed\u8a00 \u673a\u5668\u8bed\u8a00\u8ddf\u6c47\u7f16\u8bed\u8a00\u76f8\u5f53\u4e8e\u76f4\u63a5\u63a7\u5236\u786c\u4ef6; \u6c47\u7f16\u8bed\u8a00\u53ea\u4e0d\u8fc7\u89e3\u51b3\u4e86\u673a\u5668\u8bed\u8a00\u96be\u8bb0\u7684\u95ee\u9898,\u590d\u6742\u5ea6\u8fd8\u662f\u6ca1\u53d8\u7684. \u9ad8\u7ea7\u8bed\u8a00\u9700\u8981\u7ffb\u8bd1\u540e\u624d\u80fd\u8ba9\u8ba1\u7b97\u673a\u7406\u89e3,\u6839\u636e\u7ffb\u8bd1\u7684\u65b9\u5f0f\u4e0d\u540c,\u5206\u4e3a\u4e24\u7c7b: 1> \u89e3\u91ca\u578b(\u89e3\u91ca\u5668\u4f5c\u4e3a\u7ffb\u8bd1\u5de5\u5177): shell\u3001python 2> \u7f16\u8bd1\u578b(\u7f16\u8bd1\u5668\u4f5c\u4e3a\u7ffb\u8bd1\u5de5\u5177): c\u3001go !!\u6700\u6838\u5fc3\u7684\u533a\u522b\u5728\u4e8e\u7b2c\u4e8c\u6b21\u7684\u6267\u884c,\u7b2c\u4e8c\u6b21\u6267\u884c\u65f6,\u89e3\u91ca\u578b\u8bed\u8a00\u662f\u79bb\u4e0d\u5f00\u89e3\u91ca\u5668\u7684,\u6bcf\u6b21\u6267\u884c\u90fd\u9700\u8981\u89e3\u91ca\u5668\u8fdb\u884c\u7ffb\u8bd1; \u800c\u7f16\u8bd1\u578b\u8bed\u8a00\u7ecf\u8fc7\u4e00\u6b21\u7ffb\u8bd1,\u5c06\u8f6f\u4ef6\u7a0b\u5e8f\u7f16\u8bd1\u6210\u4e00\u5806\u53ef\u76f4\u63a5\u88ab\u8ba1\u7b97\u673a\u8bc6\u522b\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4.. \u518d\u6b21\u6267\u884c\u65f6,\u62ff\u7740\u8fd9\u5806\u53ef\u6267\u884c\u6307\u4ee4\u76f4\u63a5\u8fd0\u884c..\u4e0d\u9700\u8981\u518d\u6b21\u7ffb\u8bd1. So,\u72ed\u9698\u7684\u4e0d\u6210\u4f53\u7cfb\u7684\u5355\u4ece\u8bed\u8a00\u5c42\u6b21\u5206\u6790,\u6027\u80fd\u65b9\u9762\u7f16\u8bd1\u578b>\u89e3\u91ca\u578b.. Q: \u7528\u89e3\u91ca\u578b\u8bed\u8a00(python)or\u7f16\u8bd1\u578b\u8bed\u8a00(c)\u5199\u597d\u7684\u8f6f\u4ef6\u5982\u4f55\u5728linux\u4e0a\u8fd0\u884c\uff1f A: \u4e0b\u8f7d\u8f6f\u4ef6\u5305 1> \u5bf9\u4e8e\u7528python\u5199\u7684\u8f6f\u4ef6\u800c\u8a00: \u5728linux\u4e3b\u673a\u4e0a\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684python\u89e3\u91ca\u5668\u4ee5\u53ca\u8f6f\u4ef6\u76f8\u5173\u4f9d\u8d56 <\u6bcf\u6b21\u6267\u884c\u90fd\u9700\u8981python\u89e3\u91ca\u5668\u6267\u884c> 2> \u5bf9\u4e8e\u7528c\u8bed\u8a00\u5199\u597d\u7684\u8f6f\u4ef6\u800c\u8a00: \u5728linux\u4e3b\u673a\u4e0a\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684c\u7f16\u8bd1\u5668\u4ee5\u53ca\u8f6f\u4ef6\u76f8\u5173\u4f9d\u8d56 \u7528\u7f16\u8bd1\u5668\u628a\u6e90\u7801\u5305\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u7684\u547d\u4ee4 <\u7b2c\u4e00\u6b21\u7528\u7f16\u8bd1\u5668\u7f16\u8bd1\u540e,\u5f80\u540e\u7684\u591a\u6b21\u6267\u884c\u5c31\u4f7f\u7528\u7f16\u8bd1\u540e\u7684\u547d\u4ee4\u5373\u53ef> Ps: python\u8bed\u8a00\u4e3b\u6d41\u7684Cpython\u89e3\u91ca\u5668\u662f\u7528c\u8bed\u8a00\u5199\u7684; bash\u89e3\u91ca\u5668\u7edd\u5927\u90e8\u5206\u4e5f\u90fd\u662fc\u8bed\u8a00\u5199\u7684. c\u8bed\u8a00\u662f\u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3\u7684,\u7528c\u5199\u7684Cpython\u89e3\u91ca\u5668\u548cbash\u89e3\u91ca\u5668\u76f8\u5f53\u4e8e\u5c06\u7cfb\u7edf\u63a5\u53e3\u8fdb\u4e00\u6b65\u8fdb\u884c\u4e86\u5c01\u88c5!","title":"\u5206\u7c7b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_3","text":"Q: \u5728shell\u89e3\u91ca\u5668\u4ea4\u4e92\u6027\u73af\u5883\u4e0b ( \u9ed8\u8ba4\u662fbash ) ,\u8f93\u5165 echo \"hello\" \u53d1\u751f\u4e86\u4ec0\u4e48? A: \u9996\u5148,\u4f1a\u5c06\u6b64\u547d\u4ee4\u4ea4\u7ed9shell\u89e3\u91ca\u5668,shell\u89e3\u91ca\u5668\u518d\u8c03\u7528\u7cfb\u7edf\u63a5\u53e3,\u7cfb\u7edf\u63a5\u53e3\u5728\u8c03\u7528\u5185\u6838,OS\u5185\u6838\u8fdb\u800c\u64cd\u4f5c\u5bf9\u5e94\u7684\u786c\u4ef6. \"\"\" -- a.sh -- echo \" 111 \" echo \" 222 \" echo \" 333 \" \"\"\" ## \u8fd0\u884c\u4e86\u4e24\u4e2a\u7a0b\u5e8f \u4e00\u4e2a\u662fbash;\u53e6\u4e00\u4e2a\u662fa.sh [ root@localhost opt ] # bash a.sh 111 222 \"\"\" -- b.py -- print(\" Hello \") print(\" World \") \"\"\" [ root@localhost opt ] # python b.py Hello world ## bash\u3001python \u90fd\u662f\u89e3\u91ca\u5668 ## \u6ce8\u610f: .sh .py\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6\u540e\u7f00\u6807\u8bc6,\u6587\u4ef6\u547d\u540d\u4e0d\u52a0\u540e\u7f00\u4e5f\u4e0d\u5f71\u54cd\u6574\u4e2a\u8fd0\u884c\u7ed3\u679c..","title":"\u89e3\u91ca\u5668\u7ffb\u8bd1\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_4","text":"\u6211\u4eec\u5047\u8bbe\u5f00\u53d1\u4eba\u5458\u7528c\u5728windows ( x86-32\u4f4d\u7684cpu ) \u5e73\u53f0\u4e0a\u5f00\u53d1\u4e86\u4e00\u4e2a\u8f6f\u4ef6,\u5f00\u53d1\u5b8c\u6210\u540e\u8fde\u540c\u8f6f\u4ef6\u76f8\u5173\u7684\u4f9d\u8d56\u8fdb\u884c\u7f16\u8bd1,\u5c06\u7f16\u8bd1\u540e\u7684\u4e8c\u8fdb\u5236\u5305\u76f4\u63a5\u7ed9\u4e86\u8fd0\u7ef4\u4eba\u5458,\u4f46\u662f\u8fd0\u7ef4\u4eba\u5458\u90e8\u7f72\u7684\u73af\u5883\u662fx86-64\u4f4d\u7684linux\u7cfb\u7edf.. \u56e0\u4e3a\u5728window\u7cfb\u7edf\u7684\u673a\u5668\u4e0a\u628a\u6e90\u4ee3\u7801\u8fdb\u884c\u7f16\u8bd1\u540e\u7684\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4\u53ea\u9002\u7528\u4e8ewindow\u5e73\u53f0.. \u6240\u4ee5\u8de8\u5e73\u53f0\u90e8\u7f72\u5931\u8d25. \u56e0\u800c\u7528\u7f16\u8bd1\u578b\u8bed\u8a00\u5f00\u53d1\u7684\u8f6f\u4ef6\u901a\u5e38\u662f\u7ed9\u8fd0\u7ef4\u4e00\u4e2a\u6e90\u7801\u5305,\u8fd0\u7ef4\u518d\u6839\u636e\u81ea\u5df1\u6240\u5904\u7684\u5e73\u53f0\u73af\u5883\u4e0b\u8f7d\u76f8\u5173\u7684\u8f6f\u4ef6\u4f9d\u8d56\u8fdb\u884c\u7f16\u8bd1.. \u4e0d\u540c\u5e73\u53f0\u6709\u5bf9\u5e94\u7248\u672c\u7684\u89e3\u91ca\u5668,\u6240\u4ee5\u89e3\u91ca\u578b\u7684\u8de8\u5e73\u53f0\u6027\u5f3a c\u4e0d\u652f\u6301\u8de8\u5e73\u53f0\u7f16\u8bd1 go\u8bed\u8a00,\u652f\u6301\u8de8\u5e73\u53f0\u7f16\u8bd1.. \u4ea4\u53c9\u7f16\u8bd1\uff1f\uff1f\u6307\u5b9a\u5e73\u53f0\u7f16\u8bd1\uff1f python\u7684\u8de8\u5e73\u53f0\u6027\u597d,\u662f\u56e0\u4e3a\u5b98\u65b9\u5728\u591a\u4e2a\u5e73\u53f0\u90fd\u5f00\u53d1\u4e86\u9002\u5e94\u5f53\u524d\u5e73\u53f0\u7684\u591a\u4e2a\u7248\u672c\u7684python\u89e3\u91ca\u5668.","title":"\u8de8\u5e73\u53f0\u6027"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_5","text":"\u6e90\u7801\u5305 --- \u5b9a\u5236\u5b89\u88c5\u7ec6\u8282 --- \u5b89\u88c5 rpm\u5df2\u7ecf\u5236\u4f5c\u597d\u5b89\u88c5\u7a0b\u5e8f --- \u5b89\u88c5 \u4e8c\u8fdb\u5236\u5305,\u4e0b\u8f7d\u5b8c\u6bd5\u5373\u53ef\u4f7f\u7528,\u65e0\u9700\u5b89\u88c5 \u6e90\u7801\u5305\u7684\u5b89\u88c5\u5f88\u7e41\u7410,\u56e0\u4e3a\u8981\u89e3\u51b3\u4f9d\u8d56\u6027\u7684\u95ee\u9898..\u5e76\u4e14\u5728\u6bcf\u53f0\u673a\u5668\u4e0a\u90fd\u5f97\u7f16\u8bd1\u4e0b. (\u8fd0\u7ef4\u62ff\u5230\u6e90\u7801\u5305,\u8981\u5c06\u5f00\u53d1\u4eba\u5458\u5f00\u53d1\u6240\u5904\u7684\u90a3\u4e00\u5957\u73af\u5883\u91cd\u65b0\u5e03\u7f6e\u4e0b,\u5373\u4e0b\u8f7d\u5404\u79cd\u5404\u6837\u7684\u4f9d\u8d56\u5305,\u8f6f\u4ef6\u624d\u80fd\u6b63\u5e38\u7f16\u8bd1\u6210\u529f\u8fd0\u884c) \u89e3\u51b3\u4f9d\u8d56\u7684\u672c\u8d28\u5c31\u662f\u5728\u7f51\u4e0a\u4e0b\u8f7d\u8f6f\u4ef6\u8fd0\u884c\u6240\u9700\u8981\u7684\u5bf9\u5e94\u7248\u672c\u7684\u5e93.. \u968f\u7740\u8f6f\u4ef6\u7684\u8fed\u4ee3\u5b8c\u5584,\u6240\u9700\u8981\u7684\u4f9d\u8d56\u76f8\u5bf9\u662f\u56fa\u5b9a\u7684,\u5c31\u53ef\u4ee5\u5c06\u6e90\u7801\u5305\u8fdb\u884c\u9884\u7f16\u8bd1(\u5373\u5c06\u6e90\u7801\u5305\u8fde\u540c\u6240\u9700\u7684\u4f9d\u8d56\u5e93\u505a\u6210rpm..) \u5206\u7c7b \u5b89\u88c5 \u7279\u70b9 rpm\u5305 \u9884\u5148\u7f16\u8bd1 \u6253\u5305,\u5b89\u88c5\u7b80\u5355 \u901a\u5e38 \u8f6f\u4ef6\u7684\u7a33\u5b9a\u7248\u672c \u4f1a\u88ab\u5b98\u65b9\u505a\u6210rpm,\u6240\u4ee5\u8f6f\u4ef6\u7248\u672c\u504f\u4f4e \u6e90\u7801\u5305 \u5728\u81ea\u5df1\u5e73\u53f0\u624b\u52a8\u7f16\u8bd1\u6253\u5305,\u5b89\u88c5\u7e41\u7410 \u8f6f\u4ef6\u7248\u672c\u4e30\u5bcc,\u53ef\u9009\u62e9\u6027\u5f3a \u4e8c\u8fdb\u5236\u5305 \u89e3\u538b\u5373\u53ef\u4f7f\u7528,\u5b89\u88c5\u7b80\u5355 \u4e0d\u80fd\u4fee\u6539\u6e90\u4ee3\u7801","title":"\u8f6f\u4ef6\u5305\u5206\u7c7b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_6","text":"\u4e4b\u6240\u4ee5\u8981\u6302\u8f7d\u955c\u50cf,\u662f\u56e0\u4e3a\u6211\u4eec\u60f3\u8981\u4f7f\u7528\u5b89\u88c5OS\u7684\u955c\u50cf\u6587\u4ef6\u91cc\u9762\u5305\u542b\u7684\u4e00\u5806rpm\u5305... \u5728\u524d\u9762\u5b89\u88c5\u65f6,\u6211\u4eec\u5c06\u8fd9\u955c\u50cf\u653e\u5230\u5149\u9a71\u5149\u76d8 /dev/sr0 \u91cc\u7684.","title":"\u6302\u8f7d\u955c\u50cf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_7","text":"\u8981\u60f3\u67e5\u770b\u4f7f\u7528\u955c\u50cf\u5149\u76d8\u91cc\u7684\u5185\u5bb9,\u9700\u8981\u5148\u5c06\u5149\u76d8\u8fdb\u884c\u6302\u8f7d\u5904\u7406,\u8ba9\u5b83\u53d8\u6210\u4e00\u4e2a\u53ef\u7528\u8bbe\u5907. ## CentOS-7-x86_64-DVD-2009.iso \"\"\" !!vm\u865a\u62df\u673a\u5149\u9a71\u91cc\u5173\u8054\u4e00\u4e2a\u955c\u50cf,\u76f8\u5f53\u4e8e\u5728\u771f\u673a\u7684\u5149\u9a71\u91cc\u63d2\u5165\u4e86\u4e00\u4e2a\u5149\u76d8!! \u82e5\u5b9e\u9a8c\u7528\u7684\u662fvm,\u8981\u770b\u4f7f\u7528\u7684\u662f\u54ea\u4e2a\u5149\u9a71,\u56e0\u4e3avm\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2aCD/DVD.. sr0 sr1.. 1> `mount /dev/sr0 /opt/` 2> `mount /dev/cdrom /opt/` \u56e0\u4e3a\u8f6f\u94fe\u63a5 lrwxrwxrwx 1 root root 3 8\u6708 9 19:56 /dev/cdrom -> sr0 3> \u82e5\u6ca1\u6709\u5149\u9a71\u5149\u76d8\u6216\u8005U\u76d8\u542f\u52a8\u76d8,\u5c31\u4e0d\u80fd\u4ee5\u5149\u76d8\u6302\u8f7d\u7684\u65b9\u5f0f\u8fdb\u884c\u6302\u8f7d.. \u89e3\u51b3\u65b9\u6848:\u5c06\u955c\u50cf\u6587\u4ef6\u653e\u5230\u672c\u5730\u786c\u76d8\u91cc\u540e `mount -o loop \u955c\u50cf\u6587\u4ef6\u7684\u8def\u5f84 /opt` Ps:\u8ba9\u670d\u52a1\u5668\u672c\u5730\u786c\u76d8\u91cc\u6709\u4e00\u4e2a\u955c\u50cf\u6587\u4ef6\u7684\u4e24\u79cd\u65b9\u5f0f \u5373\u5982\u4f55\u5f97\u5230\u955c\u50cf\u6587\u4ef6 1> \u5176\u5b83\u673a\u5668\u4e0a\u6709\u4e2a\u73b0\u6210\u7684\u955c\u50cf\u6587\u4ef6,\u7528u\u76d8\u62f7\u8d1d\u8fc7\u6765\u6216\u8005xshell\u4e0a\u4f20\u8fc7\u4e86\u7686\u53ef 2> \u82e5\u6709\u5149\u9a71,\u8fd8\u53ef\u4ee5\u4f7f\u7528dd\u547d\u4ee4,\u5c06\u5149\u76d8\u91cciso\u955c\u50cf\u6587\u4ef6\u7684\u5185\u5bb9\u8f93\u51fa\u5230\u670d\u52a1\u5668\u672c\u5730\u67d0\u4e00\u4e2a\u6587\u4ef6\u4e2d.. `dd if=\u8f93\u5165\u6587\u4ef6\u8def\u5f84 of=\u8f93\u51fa\u6587\u4ef6\u8def\u5f84` \u76f8\u5bf9\u4e8e\u5c06\u8f93\u5165\u6587\u4ef6\u5185\u5bb9\u8bfb\u53d6\u5230\u4e86\u8f93\u51fa\u6587\u4ef6\u4e2d.. `dd if=/dev/sr0 of=/root/centos7.iso` \u6ce8\u610f\uff01\u4e00\u5b9a\u8981\u8003\u8651\u8f93\u51fa\u6587\u4ef6\u8def\u5f84\u6240\u5904\u7684\u6302\u8f7d\u70b9\u5bf9\u5e94\u7684\u6302\u8f7d\u8bbe\u5907/\u786c\u76d8\u5269\u4f59\u7684\u7a7a\u95f4\u662f\u5426\u5145\u8db3.. `df -h`\u67e5\u770b \u6bd4\u5982,\u955c\u50cf\u6587\u4ef64.3G\u3001/root/centos7.iso\u7684\u6302\u8f7d\u70b9\u662f/ \u5bf9\u5e94\u7684\u6587\u4ef6\u7cfb\u7edf\u53ea\u52693.2G,\u5219\u53ea\u4f1a\u5199\u5165\u955c\u50cf3.2G\u5185\u5bb9 \u89e3\u51b3\u65b9\u6848:\u52a0\u4e00\u5757\u786c\u76d8 \u8be6\u60c5\u8bf7\u770b \u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf\u4e2d\u8f6f\u94fe\u63a5\u89e3\u51b3\u78c1\u76d8\u6ee1\u8fd9\u4e00\u90e8\u5206\u5185\u5bb9.. \u89e3\u51b3\u786c\u76d8\u7a7a\u95f4\u4e0d\u591f\u7684\u95ee\u9898\u540e,dd\u547d\u4ee4\u6210\u529f\u540e..\u6267\u884c\u547d\u4ee4.. `mount -o loop /root/centos7.iso /mnt` /opt -- \u5149\u76d8\u91cc\u7684\u5185\u5bb9 \u6302\u8f7d\u7684\u662f\u5149\u76d8 /mnt -- \u955c\u50cf\u6587\u4ef6\u7684\u5185\u5bb9 \u6302\u8f7d\u7684\u662f\u955c\u50cf\u6587\u4ef6 \u56e0\u4e3a\u5149\u76d8\u91cc\u653e\u7740\u7684\u5c31\u662f\u955c\u50cf\u6587\u4ef6,\u6240\u4ee5\u90fd\u4e00\u6837.. \"\"\" [ root@localhost opt ] # mount /dev/sr0 /opt/ mount: /dev/sr0 \u5199\u4fdd\u62a4\uff0c\u5c06\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6302\u8f7d ## \u53ef\u7528df\u547d\u4ee4\u53ef\u5bf9\u6302\u8f7d\u72b6\u6001\u8fdb\u884c\u67e5\u770b [ root@localhost ~ ] # df \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 ... ... ... ... ... ... tmpfs 99564 0 99564 0 % /run/user/1000 /dev/sr0 4600876 4600876 0 100 % /opt","title":"\u955c\u50cf\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_8","text":"\"\"\" umount /dev/sr0 \u6307\u5b9a\u6302\u8f7d\u6e90\u8bbe\u5907\u8fdb\u884c\u5378\u8f7d umount /opt \u6307\u5b9a\u6302\u8f7d\u70b9\u8fdb\u884c\u5378\u8f7d \u8fd9\u91cc\u662f\u56e0\u4e3a\u6b63\u5728\u4f7f\u7528,\u6240\u4ee5\u5378\u8f7d\u89e3\u9664\u4e0d\u4e86.. \u7c7b\u4f3c\u4e8ewindows\u4e0b\u5378\u8f7d\u6253\u5f00\u7684\u6587\u4ef6\u5939\u5378\u8f7d\u4e0d\u4e86.. \u89e3\u51b3\u65b9\u6848: \u5207\u6362\u5230\u5176\u5b83\u76ee\u5f55\u4e0b; `umount -l /opt`\u5f3a\u5236\u5378\u8f7d \"\"\" [ root@localhost ~ ] # cd /opt/ [ root@localhost opt ] # umount /opt umount: /opt\uff1a\u76ee\u6807\u5fd9\u3002 ( \u6709\u4e9b\u60c5\u51b5\u4e0b\u901a\u8fc7 lsof ( 8 ) \u6216 fuser ( 1 ) \u53ef\u4ee5 \u627e\u5230\u6709\u5173\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u8fdb\u7a0b\u7684\u6709\u7528\u4fe1\u606f ) [ root@localhost opt ] # umount /dev/sr0 umount: /opt\uff1a\u76ee\u6807\u5fd9\u3002 ( \u6709\u4e9b\u60c5\u51b5\u4e0b\u901a\u8fc7 lsof ( 8 ) \u6216 fuser ( 1 ) \u53ef\u4ee5 \u627e\u5230\u6709\u5173\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u8fdb\u7a0b\u7684\u6709\u7528\u4fe1\u606f )","title":"\u5378\u8f7d/\u89e3\u9664\u5173\u8054"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#rpm","text":"[ root@localhost opt ] # ls /opt/ CentOS_BuildTag GPL LiveOS RPM-GPG-KEY-CentOS-7 EFI images Packages RPM-GPG-KEY-CentOS-Testing-7 EULA isolinux repodata TRANS.TBL [ root@localhost opt ] # ls /opt/Packages/ 389 -ds-base-1.3.10.2-6.el7.x86_64.rpm 389 -ds-base-libs-1.3.10.2-6.el7.x86_64.rpm abattis-cantarell-fonts-0.0.25-1.el7.noarch.rpm ... ... ...","title":"\u67e5\u770b\u955c\u50cf\u4e2d\u7684rpm\u5305"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#rpm_1","text":"RPM \u662fRed-Hat Package Manager(RPM\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668)\u7684\u7f29\u5199 \u901a\u5e38\u8f6f\u4ef6\u7684\u7a33\u5b9a\u7248\u4f1a\u88ab\u5b98\u65b9\u505a\u6210rpm, \u6240\u4ee5\u8f6f\u4ef6\u7248\u672c\u504f\u4f4e \u5728\u4e3b\u6d41\u7684linux\u7cfb\u7edf\u4e0a, \u591a\u6570\u8f6f\u4ef6\u7684\u5b89\u88c5\u3001\u5347\u7ea7\u3001\u79fb\u9664\u4ee5\u53ca\u7ef4\u62a4\u5de5\u4f5c\u90fd\u662f\u4f7f\u7528RPM\u8f6f\u4ef6\u5305\u7ba1\u7406\u7a0b\u5e8f\u6765\u5b8c\u6210\u7684. rpm\u547d\u4ee4 \u548c yum\u547d\u4ee4 \u90fd\u53ef\u4ee5\u7ba1\u7406rpm\u683c\u5f0f\u7684\u8f6f\u4ef6\u5305!!!","title":"rpm\u5305"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#rpm_2","text":"\u4ee5 mysql-connector-odbc-5.2.5-8.el7.x86_64.rpm \u4e3a\u4f8b: \u8f6f\u4ef6\u5305\u540d: mysql-connector-odbc \u7248\u672c\u53f7Version: 5 ( \u5927\u7248\u672c\u53f7\u5927\u6539 ) .2 ( \u5c0f\u7248\u672c\u53f7\u5f80\u5f80\u52a0\u51e0\u4e2a\u5c0f\u529f\u80fd ) .5 ( \u4fee\u8ba2\u7248\u672c\u6539bug ) \u53d1\u5e03\u6b21\u6570: 8 \u9002\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c: .el7 \u8fd9\u91cc\u662f\u6307\u4f01\u4e1a\u7ea7\u7684linux\u7684\u7b2c7\u4e2a\u7248\u672c,\u5373\u5bf9\u5e94centos7\u6216redhot7 \u6709\u7684\u4f1a\u660e\u786e\u5199\u6210el7.centos \u786c\u4ef6\u5e73\u53f0: .x86_64 \u8fd9\u91cc\u662f\u6307\u9002\u7528\u4e8ex86\u67b6\u678464\u4f4d\u7684cpu \u4e5f\u6709\u53ef\u80fd\u9047\u5230 noarch \u4ee3\u8868\u9002\u7528\u4e8e\u4e0d\u540c\u7248\u672c\u7684cpu \u540e\u7f00: .rpm [ root@localhost opt ] # uname -m x86_64 [ root@localhost opt ] # cat /etc/redhat-release CentOS Linux release 7 .9.2009 ( Core ) [ root@localhost opt ] # uname -a Linux localhost.localdomain 3 .10.0-1160.66.1.el7.x86_64 #1 SMP Wed May 18 16:02:34 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux [ root@localhost opt ] # uname -r 3 .10.0-1160.66.1.el7.x86_64","title":"rpm\u5305\u683c\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#rpm_3","text":"1> \u4ece\u7f51\u7edc\u4e0a\u4e0b\u8f7dRPM\u5305 2> ISO\u955c\u50cf\u5149\u76d8\u91cc\u6709rpm\u5305","title":"rpm\u5305\u83b7\u53d6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#rpm_4","text":"","title":"rpm\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_9","text":"\u5b89\u88c5: rpm -ivh <RPM\u5305\u540d> \u5378\u8f7d: rpm -e <RPM\u5305\u540d> \u82e5\u8be5\u8f6f\u4ef6\u5305\u88ab\u5176\u5b83\u8f6f\u4ef6\u5305\u6240\u4f9d\u8d56,\u662f\u4e0d\u5141\u8bb8\u5378\u8f7d\u7684.. \u5347\u7ea7: rpm -Uvh <RPM\u5305\u540d> \u672c\u8d28\u5c31\u662f\u5378\u4e86\u4f4e\u7248\u672c\u7684,\u5b89\u88c5\u9ad8\u7248\u672c\u7684.. \u67e5\u8be2: rpm -qa -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u6240\u6709\u5df2\u5b89\u88c5\u7684RPM\u8f6f\u4ef6\u5305 \u56e0\u4e3a\u5df2\u7ecf\u5b89\u88c5,\u6240\u4ee5\u6ca1\u6709.rpm\u540e\u7f00 rpm -qa | grep <RPM\u5305\u540d> or rpm -q <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u662f\u5426\u5b89\u88c5\u67d0\u4e00RPM\u8f6f\u4ef6\u5305 rpm -qi <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u7684\u63cf\u8ff0\u4fe1\u606f rpm -ql <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u4ea7\u751f\u7684\u6240\u6709\u6587\u4ef6 \u200b rpm\u5305\u76f8\u5f53\u4e8e\u4e00\u79cd\u5b9a\u5236\u597d\u7684\u5b89\u88c5\u7a0b\u5e8f,\u5b89\u88c5\u5728\u54ea,\u5b89\u88c5\u4ec0\u4e48\u90fd\u5df2\u7ecf\u8bbe\u7f6e\u597d\u5566,-ql\u770b\u770b\u5b89\u88c5\u4e86\u54ea\u4e9b\u4e1c\u897f \u200b rpm -qc <RPM\u5305\u540d> -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u91cc\u6240\u6709\u914d\u7f6e\u6587\u4ef6 \u4e0d\u662f\u6240\u6709\u8f6f\u4ef6\u5305\u90fd\u6709\u914d\u7f6e\u6587\u4ef6\u7684 \u200b rpm -qd <RPM\u5305\u540d> -- \u67e5\u8be2\u67d0\u4e2a\u5df2\u5b89\u88c5\u7684rpm\u5305\u4ea7\u751f\u4e86\u54ea\u4e9b\u5e2e\u52a9\u6587\u6863 \u6ce8\u610f\u54e6! \u52a0\u4e0a\u4e2a\u9009\u9879 p -qip -qlp -qcp -qdp \u53ef\u4ee5\u67e5\u770b\u672a\u5b89\u88c5\u7684rpm\u5305\u5bf9\u5e94\u7684\u4fe1\u606f rpm -qf \u6587\u4ef6\u8def\u5f84 -- \u67e5\u8be2\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u6587\u4ef6\u5f52\u5c5e\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305 rpm -qf ` which yum ` # -- \u5c06\u53cd\u5f15\u53f7\u4e2d\u547d\u4ee4\u7684\u7ed3\u679c\u7ed9 rpm -qf \u683c\u5916\u9009\u9879: --nomd5 \u4e0d\u68c0\u9a8c\u8f6f\u4ef6\u5305\u7684\u7b7e\u540d --nodeps \u5b89\u88c5\u548c\u5378\u8f7d\u65f6\u53ef\u80fd\u4f1a\u63d0\u793a\u4f9d\u8d56\u95ee\u9898..\u53ef\u5728\u547d\u4ee4\u6700\u540e\u6dfb\u52a0\u6b64\u9009\u9879\u5ffd\u7565\u4f9d\u8d56,\u76f4\u63a5\u5378\u8f7d\u5b89\u88c5, \u540e\u679c\u81ea\u8d1f .. \u6572\u9ed1\u677f!\u89e3\u51b3\u4f9d\u8d56\u540e\u518d\u5b89\u88c5\u6216\u5378\u8f7d!!!!! \u4f46rpm\u547d\u4ee4\u7684\u5f0a\u7aef\u5728\u4e8e\u5f88\u96be\u5206\u8fa8\u4f9d\u8d56,\u6709\u65f6\u4e0d\u4f1a\u5f88\u660e\u786e\u7684\u544a\u8bc9\u4f60\u4f9d\u8d56\u54ea\u4e2a\u5305,\u53ef\u80fd\u53ea\u4f1a\u63d0\u793a\u4f9d\u8d56\u54ea\u4e2a\u6587\u4ef6..\u53ea\u80fd\u9760\u731c!\u9760\u8c37\u6b4c.. rpm\u89e3\u51b3\u4f9d\u8d56\u95ee\u9898\u5f88\u7e41\u7410.. --force \u82e5\u4f4e\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u7684\u5b58\u5728,\u5b89\u88c5\u9ad8\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u65f6\u4f1a\u63d0\u793a\u51b2\u7a81. \u5728\u5b89\u88c5\u547d\u4ee4\u6700\u540e\u6dfb\u52a0\u6b64\u9009\u9879.. \u53ef\u5ffd\u7565\u51b2\u7a81,\u5f3a\u5236\u5b89\u88c5\u9ad8\u7248\u672c\u8f6f\u4ef6\u5305.. \u8fd9\u6837\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u9ad8\u4f4e\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u5171\u5b58.. \u4e0d\u63a8\u8350\u8fd9\u6837\u505a!!!! \u4f7f\u7528Uvh\u5347\u7ea7\u5b89\u88c5\u662f\u6b63\u89e3. Ps: \u82e5\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u62a5\u9519: curl: (60) Peer's Certificate has expired . \u5c06\u7cfb\u7edf\u65f6\u95f4\u4fee\u6539\u6b63\u786e,\u7136\u540e\u518d\u5b89\u88c5\u5373\u53ef.","title":"\u9009\u9879"},{"location":"1_linux%E5%9F%BA%E7%A1%80/10_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/#_10","text":"\u25b2 \u5b89\u88c5 \"\"\" -i \u5b89\u88c5 -v \u5217\u51fa\u8be6\u7ec6\u4fe1\u606f -h \u8f6f\u4ef6\u5305\u5b89\u88c5\u7684\u65f6\u5019\u5217\u51fa\u54c8\u5e0c\u6807\u8bb0 \"\"\" [ root@localhost ~ ] # rpm -ivh /opt/Packages/httpd-2.4.6-95.el7.centos.x86_64.rpm \u9519\u8bef\uff1a\u4f9d\u8d56\u68c0\u6d4b\u5931\u8d25\uff1a /etc/mime.types \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 httpd-tools = 2 .4.6-95.el7.centos \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 ## \u53ea\u63d0\u793a\u4e86\u6240\u9700\u6587\u4ef6 libapr-1.so.0 ()( 64bit ) \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 libaprutil-1.so.0 ()( 64bit ) \u88ab httpd-2.4.6-95.el7.centos.x86_64 \u9700\u8981 [ root@localhost ~ ] # rpm -ivh /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm \u51c6\u5907\u4e2d... ################################# [100%] \u8f6f\u4ef6\u5305 dos2unix-6.0.3-7.el7.x86_64 \u5df2\u7ecf\u5b89\u88c5 \u25b2 \u67e5\u8be2 [ root@localhost ~ ] # rpm -q dos2uni \u672a\u5b89\u88c5\u8f6f\u4ef6\u5305 dos2uni [ root@localhost ~ ] # rpm -q dos2unix dos2unix-6.0.3-7.el7.x86_64 [ root@localhost ~ ] # rpm -qa | grep dos2unix dos2unix-6.0.3-7.el7.x86_64 [ root@localhost ~ ] # rpm -qi dos2unix Name : dos2unix Version : 6 .0.3 Release : 7 .el7 ... ... ... [ root@localhost ~ ] # rpm -ql dos2unix /usr/bin/dos2unix /usr/bin/mac2unix /usr/bin/unix2dos ... ... ... [ root@localhost ~ ] # rpm -qc yum /etc/logrotate.d/yum /etc/yum.conf /etc/yum/version-groups.conf [ root@localhost ~ ] # which rpm /usr/bin/rpm [ root@localhost ~ ] # rpm -qf /usr/bin/rpm rpm-4.11.3-48.el7_9.x86_64 [ root@localhost ~ ] # rpm -qd dos2unix /usr/share/doc/dos2unix-6.0.3/COPYING.txt /usr/share/doc/dos2unix-6.0.3/ChangeLog.txt /usr/share/doc/dos2unix-6.0.3/NEWS.txt /usr/share/doc/dos2unix-6.0.3/README.txt ... ... ... \u25b2 \u5347\u7ea7 \"\"\" \u4f7f\u7528wget\u547d\u4ee4\u4e0b\u8f7d\u4e00\u4e2a\u4f4e\u7248\u672c\u3001\u4e00\u4e2a\u9ad8\u7248\u672c `wget https://mirrors.aliyun.com/zabbix/zabbix/3.0/rhel/7/x86_64/zabbix-agent-3.0.9-1.el7.x86_64.rpm` `wget https://mirrors.aliyun.com/zabbix/zabbix/4.2/rhel/7/x86_64/zabbix-agent-4.2.0-1.el7.x86_64.rpm` \u5148\u5b89\u88c5\u4f4e\u7248\u672c\u7684,\u518d\u5b89\u88c5\u9ad8\u7248\u672c\u7684 \"\"\" [ root@localhost ~ ] # ls | grep zabbix zabbix-agent-3.0.9-1.el7.x86_64.rpm zabbix-agent-4.2.0-1.el7.x86_64.rpm [ root@localhost ~ ] # rpm -ivh zabbix-agent-3.0.9-1.el7.x86_64.rpm \u8b66\u544a\uff1azabbix-agent-3.0.9-1.el7.x86_64.rpm: \u5934V4 DSA/SHA1 Signature, \u5bc6\u94a5 ID 79ea5ed4: NOKEY \u51c6\u5907\u4e2d... ################################# [100%] \u6b63\u5728\u5347\u7ea7/\u5b89\u88c5... 1 :zabbix-agent-3.0.9-1.el7 ################################# [100%] [ root@localhost ~ ] # rpm -q zabbix \u672a\u5b89\u88c5\u8f6f\u4ef6\u5305 zabbix [ root@localhost ~ ] # rpm -q zabbix-agent zabbix-agent-3.0.9-1.el7.x86_64 ## \u56e0\u4e3a\u4f4e\u7248\u672c\u7684\u5b58\u5728 \u4e0d\u8ba9\u6211\u4eec\u5b89\u88c5\u9ad8\u7248\u672c\u7684 \u51b2\u7a81\u4e86. [ root@localhost ~ ] # rpm -ivh zabbix-agent-4.2.0-1.el7.x86_64.rpm \u8b66\u544a\uff1azabbix-agent-4.2.0-1.el7.x86_64.rpm: \u5934V4 RSA/SHA512 Signature, \u5bc6\u94a5 ID a14fe591: NOKEY \u51c6\u5907\u4e2d... ################################# [100%] ... ... ... file /usr/share/man/man8/zabbix_agentd.8.gz from install of zabbix-agent-4.2.0-1.el7.x86_64 conflicts with file from package zabbix-agent-3.0.9-1.el7.x86_64 \"\"\" \u89e3\u51b3\u65b9\u6848: 1> \u5378\u8f7d\u4f4e\u7248\u672c\u7684\u8f6f\u4ef6\u5305\u540e,\u518d\u5b89\u88c5\u9ad8\u7248\u672c\u7684 2> \u5728\u5b89\u88c5\u9ad8\u7248\u672c\u65f6,\u5728\u547d\u4ee4\u6700\u540e\u6dfb\u52a0\u9009\u9879--force \u4e0d\u63a8\u8350\u8fd9\u6837\u505a.. \u4f1a\u5bfc\u81f4\u9ad8\u4f4e\u7248\u672c\u5171\u5b58. 3> \u6b63\u89e3 -- \u4f7f\u7528\u9009\u9879-Uvh \u5347\u7ea7\u5b89\u88c5 \"\"\" [ root@localhost ~ ] # rpm -Uvh zabbix-agent-4.2.0-1.el7.x86_64.rpm \u8b66\u544a\uff1azabbix-agent-4.2.0-1.el7.x86_64.rpm: \u5934V4 RSA/SHA512 Signature, \u5bc6\u94a5 ID a14fe591: NOKEY \u51c6\u5907\u4e2d... ################################# [100%] \u6b63\u5728\u5347\u7ea7/\u5b89\u88c5... 1 :zabbix-agent-4.2.0-1.el7 ################################# [ 50%] \u6b63\u5728\u6e05\u7406/\u5220\u9664... 2 :zabbix-agent-3.0.9-1.el7 ################################# [100%]","title":"\u5b9e\u9a8c\u9a8c\u8bc1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/","text":"yum\u547d\u4ee4 \u00b6 \u57fa\u4e8eRPM\u5305\u7ba1\u7406, \u80fd\u591f\u4ece\u6307\u5b9a\u7684\u670d\u52a1\u5668\u81ea\u52a8\u4e0b\u8f7dRPM\u5305\u5e76\u4e14\u5b89\u88c5, \u53ef\u4ee5\u81ea\u52a8\u5904\u7406\u4f9d\u8d56\u6027\u5173\u7cfb, \u5e76\u4e14\u4e00\u6b21\u5b89\u88c5\u6240\u6709\u4f9d\u8d56\u7684\u8f6f\u4ef6\u5305, \u65e0\u987b\u7e41\u7410\u5730\u4e00\u6b21\u6b21\u4e0b\u8f7d\u3001\u5b89\u88c5. yum\u547d\u4ee4\u76f8\u8f83\u4e8erpm\u547d\u4ee4, yum\u53ef\u4ee5\u81ea\u52a8\u89e3\u51b3\u4f9d\u8d56\u6027\u7684\u95ee\u9898 . \u5176\u539f\u7406\u5728\u4e8e: \u4f7f\u7528yum\u5b89\u88c5\u8f6f\u4ef6\u5305\u65f6,\u4f1a\u53bb\u67d0\u4e2a\u4ed3\u5e93\u627e\u8f6f\u4ef6\u5305,\u6b64\u4ed3\u5e93\u5df2\u7ecf\u4e8b\u5148\u5c06\u8be5\u8f6f\u4ef6\u5305\u4ee5\u53ca\u76f8\u5173\u4f9d\u8d56\u5168\u90fd\u51c6\u5907\u597d\u4e86.. \u4ed3\u5e93: \u672c\u8d28\u4e0a\u5c31\u662f\u5b58\u653e\u6240\u6709\u76f8\u5173\u8f6f\u4ef6\u5305\u7684\u4e00\u4e2a\u6587\u4ef6\u5939.. \u8be5\u6587\u4ef6\u5939\u4e0b\u5fc5\u5b9a\u6709\u4e2a\u540d\u4e3a repodata \u7684\u6587\u4ef6\u5939\u8bb0\u5f55\u4e86\u6587\u4ef6\u5939\u6240\u5305\u542b\u8f6f\u4ef6\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb.. ## yum\u547d\u4ee4\u6765\u81ea\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305 [ root@localhost ~ ] # rpm -qf /usr/bin/yum yum-3.4.3-168.el7.centos.noarch ## \u5b89\u88c5yum\u8f6f\u4ef6\u5305\u540e\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6 [ root@localhost ~ ] # rpm -qc yum /etc/logrotate.d/yum /etc/yum.conf /etc/yum/version-groups.conf \u9009\u9879 \u00b6 \u67e5\u8be2\u4ed3\u5e93: yum repolist -- \u67e5\u770b\u53ef\u7528\u4ed3\u5e93 yum repolist all -- \u67e5\u770b\u6240\u6709\u4ed3\u5e93(\u5305\u542b\u542f\u7528\u7684\u4e0e\u7981\u7528\u7684) yum-config-manager --disable \u4ed3\u5e93\u540d -- \u5173\u95ed\u6307\u5b9a\u4ed3\u5e93 yum-config-manager --enable \u4ed3\u5e93\u540d -- \u5f00\u542f\u6307\u5b9a\u4ed3\u5e93 \u200b \u53bb\u6389.repo\u540e\u7f00\u5c31\u662f\u4ed3\u5e93\u540d ls /etc/yum.repos.d/ \u200b \u672c\u8d28\u662f\u5c06 /etc/yum.repos.d/CentOS-Base.repo \u6587\u4ef6\u4e2d\u5bf9\u5e94\u4ed3\u5e93\u7684 enabled \u503c\u8fdb\u884c\u66f4\u6539 \u200b enabled\u9ed8\u8ba4\u503c\u4e3a1 0\u5173\u95ed) 1(\u5f00\u542f) \u67e5\u8be2\u8f6f\u4ef6\u5305: \u200b yum list -- \u5217\u51fa\u6240\u6709\u53ef\u7528\u4ed3\u5e93\u91cc\u7684\u6240\u6709\u8f6f\u4ef6\u5305( \u5305\u62ec \u5df2\u7ecf\u5b89\u88c5\u7684 \u548c \u53ef\u4ee5\u5b89\u88c5\u7684 ) \u200b \u53ef\u7ed3\u5408\u7ba1\u9053\u4e0e\u67e5\u770b\u6587\u4ef6\u7684\u4e00\u4e9b\u547d\u4ee4\u4e00\u8d77\u4f7f\u7528 eg: yum list|less ; yum list|more yum grouplist -- \u5217\u51fa\u6240\u6709\u53ef\u7528\u4ed3\u5e93\u4e2d\u7684\u8f6f\u4ef6\u5305\u7ec4 \u200b eg: \u8f6f\u4ef6\u5305\u7ec4\u4e4b\u4e00\u7684 \u5b89\u5168\u6027\u5de5\u5177 \u91cc\u5c31\u5305\u542b\u4e86\u4e00\u5806\u76f8\u5173\u7684\u8f6f\u4ef6\u5305 \u200b yum provides \u6587\u4ef6\u8def\u5f84 -- \u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7531\u54ea\u4e2a\u8f6f\u4ef6\u5305\u4ea7\u751f\u7684 \u200b \u53ef\u7528\u4e8e\u67e5\u770b\u547d\u4ee4\u6765\u81ea\u54ea\u4e2a\u8f6f\u4ef6\u5305 \u7b49\u540c\u4e8e rpm -qf \u63d0\u4e00\u5634,\u52a0 -y \u9009\u9879 (\u8868\u660eyes) \u53ef\u4ee5\u975e\u4ea4\u4e92\u5f0f\u7684\u8fdb\u884c\u5b89\u88c5\u3001\u5378\u8f7d\u3001\u91cd\u88c5\u3001\u66f4\u65b0.. \u5b89\u88c5: yum install \u8f6f\u4ef6\u5305\u540d -y -- \u5b89\u88c5\u8f6f\u4ef6\u5305 \u82e5\u5df2\u7ecf\u5b89\u88c5\u5566,\u4f1a\u5728\u73b0\u6709\u7684\u4ed3\u5e93\u91cc\u9762\u770b\u770b\u6709\u65e0\u66f4\u9ad8\u7684\u7248\u672c,\u6709\u7684\u8bdd\u4f1a\u8fdb\u884c\u5347\u7ea7\u5904\u7406.. \u6700\u597d\u5378\u8f7d\u540e\u88c5\u65b0\u7684!! eg: yum remove nginx-* -y yum groupinstall \"\u8f6f\u4ef6\u5305\u7ec4\u540d\u5b57\" -y or yum groups install \"\u8f6f\u4ef6\u5305\u7ec4\u540d\u5b57\" -y -- \u5b89\u88c5\u8f6f\u4ef6\u7ec4 \u6ce8\u610f: \u8f6f\u4ef6\u7ec4\u540d\u5b57\u9700\u8981\u52a0\u53cc\u5f15\u53f7 \u5378\u8f7d: yum remove \u8f6f\u4ef6\u5305\u540d -y -- \u5378\u8f7d\u8f6f\u4ef6\u5305 yum groupremove \"\u8f6f\u4ef6\u7ec4\u540d\u5b57\" -y or yum groups remove \"\u8f6f\u4ef6\u7ec4\u540d\u5b57\" -y -- \u5378\u8f7d\u8f6f\u4ef6\u7ec4 \u91cd\u88c5: yum reinstall \u8f6f\u4ef6\u5305\u540d -y -- \u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u914d\u7f6e\u6587\u4ef6\u7684\u65f6,\u53ef\u4ee5reinstall\u4e00\u4e0b,\u4f1a\u8865\u5145\u6ca1\u6709\u7684\u90e8\u5206 Ps: \u6653\u5f97\u9884\u671f\u7684\u7ed3\u679c\u7684\u524d\u63d0\u4e0b,\u4e0d\u6253\u5370\u7ed3\u679c yum reinstall httpd -y &>/dev/null \u6ce8\u610f: reinstall\u4ec5\u9650\u4e8e\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u641e,\u751f\u4ea7\u73af\u5883\u522b\u8f7b\u6613\u8fd9\u6837\u505a!!!\u5bb9\u6613\u51fa\u95ee\u9898. \u66f4\u65b0: \u4e0d\u8981\u4f5c\u6b7b,\u4e0d\u8981\u4f5c\u6b7b,\u4e0d\u8981\u8f7b\u6613\u66f4\u65b0.. yum update -y -- \u4f1a\u66f4\u65b0\u6240\u6709\u8f6f\u4ef6\u5305,\u5305\u62ecOS\u5185\u6838, \u901a\u5e38\u53ea\u5728\u521a\u88c5\u5b8c\u7cfb\u7edf\u65f6\u6267\u884c yum update \u8f6f\u4ef6\u5305\u540d -y -- \u66f4\u65b0\u67d0\u4e2a\u8f6f\u4ef6\u5305 yum check-update -- \u68c0\u67e5\u6709\u54ea\u4e9b\u53ef\u4ee5\u66f4\u65b0\u7684\u8f6f\u4ef6\u5305 \u901a\u5e38\u8981\u66f4\u65b0\u65f6,\u6d4b\u8bd5\u73af\u5883\u3001\u4e0e\u7ebf\u4e0a1\u6bd41\u7684\u73af\u5883\u90fd\u8981\u5b9e\u9a8c\u4e0b,\u6ca1\u95ee\u9898\u540e, \u518d\u66f4\u65b0\u7ebf\u4e0a\u51e0\u53f0\u673a\u5668\u8bd5\u8bd5,\u89c2\u5bdf\u51e0\u5468\u65f6\u95f4,\u518d\u5c06\u96c6\u7fa4\u6162\u6162\u7684\u66f4\u65b0...\u4fdd\u8bc1\u4e1a\u52a1\u80fd\u6b63\u5e38\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b,\u7f13\u6162\u7684\u4ece\u5c40\u90e8\u5230\u5168\u4f53\u66f4\u65b0... \u7f13\u5b58: yum makecache -- \u5236\u4f5c\u5143\u6570\u636e\u7f13\u5b58 yum clean all -- \u6e05\u9664\u5143\u6570\u636e\u7f13\u5b58 \u5386\u53f2\u8bb0\u5f55: yum history -- \u67e5\u770b\u6267\u884c\u8fc7\u7684yum\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55 yum history info ID\u53f7 -- \u67e5\u770b\u5177\u4f53\u67d0\u4e00\u6761yum\u547d\u4ee4\u7684\u8be6\u7ec6\u4fe1\u606f,\u5e72\u4e86\u4ec0\u4e48\u4e8b yum history undo ID\u53f7 -- \u64a4\u9500 \u6267\u884c\u8fc7\u7684\u67d0\u6761yum\u547d\u4ee4,\u5373\u76f8\u5f53\u4e8e\u6ca1\u6709\u6267\u884c\u8fd9\u6761yum\u547d\u4ee4.. eg: \u67d0\u6761yum\u547d\u4ee4\u662f\u5378\u8f7d\u67d0\u4e2a\u8f6f\u4ef6\u5305,\u90a3\u4e48\u6267\u884cundo\u540e,\u4f1a\u91cd\u65b0\u4e0b\u8f7d\u8fd9\u4e2a\u8f6f\u4ef6\u5305.. \u6ce8\u610f: \u65e0\u8bbayum\u5b89\u88c5\u7684\u8f6f\u4ef6\u6765\u81ea\u4f55\u65b9 yum install rpm\u5305\u7f51\u7edc\u5730\u5740 , \u9047\u5230\u4f9d\u8d56\u95ee\u9898, yum\u90fd\u4f1a\u4ee5\u81ea\u5df1\u4ed3\u5e93\u4e2d\u7684repodata\u5b58\u50a8\u7684\u4f9d\u8d56\u5173\u7cfb\u4e3a\u51c6.. \u591a\u4e2a\u4ed3\u5e93\u7684\u8bdd, \u4f1a\u4f9d\u6b21\u68c0\u7d22.. \u6587\u4ef6 = \u6587\u4ef6\u5143\u6570\u636e + \u5b9e\u9645\u5185\u5bb9 \u5b89\u88c5\u8f6f\u4ef6\u5305\u5c31\u662f\u5728\u5b89\u88c5\u4e00\u5806\u6587\u4ef6, ` yum makecache ` \u7f13\u5b58\u7684\u662f\u6587\u4ef6\u7684\u5143\u6570\u636e ( \u6743\u9650\u3001\u5927\u5c0f\u3001\u65f6\u95f4\u3001\u6b64\u6587\u4ef6\u4e0e\u5176\u5b83\u6587\u4ef6\u7684\u5173\u8054\u7b49 ) .. \u6267\u884c ` yum makecache ` \u540e,\u53ef\u4ee5\u63d0\u901f,\u63d0\u7684\u662fyum\u547d\u4ee4\u7684\u67e5\u8be2\u901f\u5ea6 ` yum list ` ,\u5e76\u6ca1\u6709\u63d0\u5347\u8f6f\u4ef6\u5305\u7684\u4e0b\u8f7d\u901f\u5ea6.. Q:\u80fd\u5426\u7f13\u5b58\u8f6f\u4ef6\u5305\u5462\uff1f\uff1f A:\u82e5yum\u7684\u4ed3\u5e93\u5728\u7f51\u4e0a\u7684\u8bdd,yum\u53d1\u8bf7\u6c42\u5c06\u8f6f\u4ef6\u5305\u4e0b\u8f7d\u5230\u672c\u5730,\u5b89\u88c5\u5b8c\u6210\u540e,\u9ed8\u8ba4\u60c5\u51b5yum\u4f1a\u81ea\u52a8\u5c06\u8f6f\u4ef6\u5305\u5220\u9664.. \u4e0b\u6b21\u8fd8\u60f3\u5b89\u88c5\u540c\u4e00\u8f6f\u4ef6\u5305,\u5c31\u5f97\u91cd\u590d\u8fd9\u4e2a\u8bf7\u6c42\u4e0b\u8f7d\u7684\u8fc7\u7a0b.. \u9ed8\u8ba4\u8f6f\u4ef6\u5305\u4e0b\u8f7d\u5b89\u88c5\u540e\u4f1a\u81ea\u52a8\u5220\u9664\u8fd9\u4e00\u64cd\u4f5c\u662f\u8ddf ` /etc/yum.conf ` \u6587\u4ef6\u6709\u5173\u7684.. \u53ef\u4ee5\u770b\u5230keepcache\u9ed8\u8ba4\u7b49\u4e8e0,\u82e5 ` keepcache = 1 ` \u5c31\u4ee3\u8868yum\u4f1a\u5c06rpm\u5305\u5b89\u88c5\u540e\u4e22\u5230cachedir\u5c5e\u6027\u6307\u5b9a\u7684\u6587\u4ef6\u5939\u4e0b.. [ root@localhost yum.repos.d ] # vim /etc/yum.conf [ main ] cachedir = /var/cache/yum/ $basearch / $releasever keepcache = 0 debuglevel = 2 logfile = /var/log/yum.log exactarch = 1 obsoletes = 1 gpgcheck = 1 plugins = 1 installonly_limit = 5 bugtracker_url = http://bugs.centos.org/set_project.php?project_id = 23 & ref = http://bugs.centos.org/bug_report_page.php?category = yum distroverpkg = centos-release ... ... ... \u5b9e\u9a8c\u9a8c\u8bc1 \u00b6 Ps: shell\u8fdc\u7a0b\u8fde\u63a5\u5f00\u4e86\u4e24\u4e2a\u7a97\u53e3,\u7b2c\u4e00\u4e2a\u7a97\u53e3\u7684yum\u547d\u4ee4\u6b63\u5728\u6267\u884c,\u7b2c\u4e8c\u4e2a\u7a97\u53e3\u4f7f\u7528yum\u65f6\u4f1a\u63d0\u793ayum\u5bf9\u5e94\u7684\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c, \u5373\u540c\u4e00\u65f6\u95f4\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ea\u80fd\u6709\u4e00\u4e2ayum\u547d\u4ee4\u8fd0\u884c... \u5f53\u6211\u4eec\u786e\u5b9a\u540e\u53f0\u8fd0\u884c\u7684yum\u6ca1\u7528\u65f6,\u90a3\u4e48\u8fd0\u884c\u547d\u4ee4 pkill -9 yum \u53ef\u5e72\u6389\u540e\u53f0\u6b63\u5728\u8fd0\u884c\u7684\u90a3\u4e2ayum.. ## \u89c2\u5bdf\u7ed3\u679c,\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u53ef\u4ee5\u7684\u4ed3\u5e93\u6709\u4e09\u4e2a Base\u3001Extras\u3001Updates [ root@localhost ~ ] # yum repolist \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile * base: mirrors.nju.edu.cn * extras: mirrors.163.com * updates: mirrors.nju.edu.cn \u6e90\u6807\u8bc6 \u6e90\u540d\u79f0 \u72b6\u6001 !base/7/x86_64 CentOS-7 - Base 10 ,072 !extras/7/x86_64 CentOS-7 - Extras 512 !updates/7/x86_64 CentOS-7 - Updates 4 ,101 repolist: 14 ,685 ## \u5173\u95ed\u4e0e\u542f\u52a8\u4ed3\u5e93 Base yum-config-manager --disable Base yum-config-manager --enable Base [ root@localhost yum.repos.d ] # which ifconfig /usr/sbin/ifconfig [ root@localhost yum.repos.d ] # yum provides /usr/sbin/ifconfig \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile * base: mirrors.nju.edu.cn * extras: mirrors.nju.edu.cn * updates: mirrors.nju.edu.cn net-tools-2.0-0.25.20131004git.el7.x86_64 : Basic networking tools \u6e90 :@anaconda \u5339\u914d\u6765\u6e90\uff1a \u6587\u4ef6\u540d :/usr/sbin/ifconfig ## \u5b89\u88c5\u8f6f\u4ef6\u5305 \u4ee5\u53ca \u8f6f\u4ef6\u7ec4 yum install httpd -y yum groupinstall \"\u5f00\u53d1\u5de5\u5177\" -y ## \u5378\u8f7d yum remove httpd -y yum groupremove \"\u5f00\u53d1\u5de5\u5177\" -y ## \u66f4\u65b0 yum update httpd -y yum\u6e90\u5206\u7c7b \u00b6 \u8981\u4f7f\u7528yum\u524d,\u9700\u8981\u51c6\u5907\u4e00\u4e2ayum\u6e90/\u4ed3\u5e93, \u53ef\u4ee5\u662f\u4e00\u4e2a\u4e92\u8054\u7f51\u4e0a\u7684\u4ed3\u5e93,\u4e5f\u53ef\u4ee5\u662f\u672c\u5730\u81ea\u5df1\u642d\u5efa\u7684\u4ed3\u5e93. \u4ed3\u5e93\u91cc\u9762\u6709\u4ec0\u4e48\u5462?\u91cc\u9762\u5168\u90e8\u90fd\u662f.rpm\u7684\u8f6f\u4ef6\u5305. \u4e00\u53f0linux,\u53ef\u4ee5\u6dfb\u52a0N\u591a\u4e2ayum\u6e90, \u80fd\u641c\u7d22\u7684\u8f6f\u4ef6\u5305\u6570\u91cf\u5c31\u662fN\u4e2ayum\u6e90\u4e4b\u548c.. 1> \u672c\u5730\u6e90: \u628a\u672c\u5730\u7684\u6587\u4ef6\u5939\u505a\u6210\u4e86yum\u6e90 \u65b9\u5f0f\u4e00: step1: \u91c7\u96c6\u4e00\u7cfb\u5217\u76f8\u5173\u7684\u8f6f\u4ef6\u5305\u653e\u5728\u672c\u5730\u67d0\u4e00\u4e2a\u76ee\u5f55\u4e0b; step2: yum install createrepo -y createrepo \u76ee\u5f55\u8def\u5f84 -- \u521b\u5efa\u4ed3\u5e93,\u4f1a\u5728\u8be5\u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a\u540d\u4e3arepodata\u7684\u6587\u4ef6\u5939..\u7528\u4e8e\u5b58\u653e\u4f9d\u8d56\u5173\u7cfb. step3: \u4fee\u6539\u914d\u7f6e vim /etc/yum.repo.d/\u4ed3\u5e93\u540d.repo --- \u5fc5\u987b\u4ee5 .repo \u7ed3\u5c3e \u65b9\u5f0f\u4e8c: \u5c06\u955c\u50cf\u6587\u4ef6\u4f5c\u4e3a\u672c\u5730\u6e90 2> \u7f51\u7edc\u6e90: base\u57fa\u7840\u6e90 -- \u653e\u7f6e\u7684\u662f\u4e00\u4e9b\u5e38\u7528\u7684\u8f6f\u4ef6\u5305; epel\u6269\u5c55\u6e90 -- \u653e\u7f6e\u7684\u662f\u4e00\u4e9b\u6269\u5c55/\u989d\u5916\u7684\u8f6f\u4ef6\u5305; \u4e0e\u670d\u52a1\u76f8\u5173\u7684\u6e90(\u5b98\u7f51) -- \u67d0\u4e00\u4e2a\u8f6f\u4ef6\u5305\u6240\u5728\u5b98\u7f51\u63d0\u4f9b\u7684\u6e90.. eg: nginx\u5b98\u7f51 \u7684\u8f6f\u4ef6\u5305\u6e90 \u6ce8\u610f,\u80fd\u4f5c\u4e3ayum\u4ed3\u5e93\u5fc5\u987b\u5177\u5907\u4e24\u4e2a\u524d\u63d0: \u8be5\u76ee\u5f55\u4e0b\u5b58\u653e\u4e86\u6240\u6709\u76f8\u5173\u7684\u8f6f\u4ef6\u5305 ; \u8be5\u76ee\u5f55\u4e0b\u5fc5\u987b\u6709\u4e00\u4e2a\u6587\u4ef6\u5939repodata\u8bb0\u5f55\u8be5\u76ee\u5f55\u6240\u5305\u542b\u8f6f\u4ef6\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb..\u4fbf\u4e8eyum\u89e3\u51b3\u4f9d\u8d56\u6027\u95ee\u9898. \u955c\u50cf\u6587\u4ef6\u4f5c\u4e3a\u672c\u5730\u6e90 \u00b6 step1: \u51c6\u5907\u5de5\u4f5c \u00b6 \u5e72\u6389\u7cfb\u7edf\u9ed8\u8ba4\u7684yum\u6e90 \"\"\" `/etc/yum.repos.d/`\u76ee\u5f55\u4e0b\u5168\u662f\u4ee5`.repo`\u7ed3\u5c3e\u7684yum\u4ed3\u5e93\u914d\u7f6e\u6587\u4ef6.. yum\u547d\u4ee4\u5728\u8fd0\u884c\u65f6\u4f1a\u53bb\u68c0\u7d22\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6.. \"\"\" [ root@localhost ~ ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls CentOS-Base.repo CentOS-Debuginfo.repo CentOS-Media.repo CentOS-Vault.repo CentOS-CR.repo CentOS-fasttrack.repo CentOS-Sources.repo CentOS-x86_64-kernel.repo \"\"\" \u6211\u4eec\u901a\u5e38\u4e0d\u4f1a\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u7684\u8fd9\u4e9byum\u4ed3\u5e93 \u4f46\u5220\u9664\u4e0d\u662f\u597d\u4e60\u60ef.. \u6211\u4eec\u9009\u62e9\u4f7f\u7528mv\u547d\u4ee4\u79fb\u52a8\u4e0b.\u8ba9yum\u547d\u4ee4\u627e\u4e0d\u5230\u5c31\u53ef\u4ee5\u5566. Ps: mv\u540e,`yum list`\u8fd8\u6709\u7ed3\u679c,\u5217\u51fa\u7684\u53ea\u662f\u5df2\u7ecf\u5b89\u88c5\u4e86\u7684\u8f6f\u4ef6\u5305.. \u82e5\u5b89\u88c5\u672a\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u80af\u5b9a\u662f\u5b89\u88c5\u4e0d\u4e86\u7684!! \"\"\" [ root@localhost yum.repos.d ] # mkdir bak ## \u5728yum.repos.d\u76ee\u5f55\u4e0b\u6267\u884c\u547d\u4ee4 `mv bak/* .` \u5c31\u53ef\u4ee5\u8fd8\u539f\u56de\u6765\u5566 [ root@localhost yum.repos.d ] # mv *.repo bak/ [ root@localhost yum.repos.d ] # ls bak [ root@localhost yum.repos.d ] # pwd /etc/yum.repos.d [ root@localhost yum.repos.d ] # yum repolist \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile repolist: 0 ## \u9a8c\u8bc1\u7ed3\u679c\u4e0d\u4e3a0\u7684\u8bdd yum clean all \u6e05\u9664\u4e0b\u5143\u6570\u636e\u7f13\u5b58 step2: \u6302\u8f7d\u955c\u50cf \u00b6 \u8be6\u89c1 10_\u8f6f\u4ef6\u5305\u7ba1\u7406\u4e4brpm.md \u4e2d\u6302\u8f7d\u955c\u50cf\u8fd9\u4e00\u90e8\u5206\u5185\u5bb9.. [ root@localhost opt ] # df \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 devtmpfs 480924 0 480924 0 % /dev tmpfs 497820 0 497820 0 % /dev/shm tmpfs 497820 27432 470388 6 % /run tmpfs 497820 0 497820 0 % /sys/fs/cgroup /dev/mapper/centos-root 17811456 5243408 12568048 30 % / /dev/sda1 1038336 258412 779924 25 % /boot tmpfs 99564 36 99528 1 % /run/user/0 tmpfs 99564 0 99564 0 % /run/user/1001 /dev/sr0 4600876 4600876 0 100 % /opt [ root@localhost opt ] # ls CentOS_BuildTag EULA images LiveOS repodata RPM-GPG-KEY-CentOS-Testing-7 EFI GPL isolinux Packages RPM-GPG-KEY-CentOS-7 TRANS.TBL step3: \u7f16\u8f91repo\u6587\u4ef6 \u00b6 \u4ed3\u5e93\u914d\u7f6e\u6587\u4ef6\u53eb\u5565\u540d\u5e76\u4e0d\u91cd\u8981,\u4f46\u540e\u7f00\u5fc5\u987b\u5f97\u662f .repo \u4ed3\u5e93\u914d\u7f6e\u6587\u4ef6\u91cc\u7684baseurl\u5c5e\u6027\u503c \u6307\u5b9a\u5230repodata\u6587\u4ef6\u5939\u7684\u7236\u4eb2\u76ee\u5f55\u5373\u53ef ..\u8ddfrpm\u5305\u5728\u54ea\u65e0\u5173.. \u56e0\u4e3ayum\u547d\u4ee4\u5728\u6267\u884c\u65f6,\u4f1a\u901a\u8fc7repodata\u91cc\u9762\u7684\u6570\u636e\u6765\u627e\u5230\u8f6f\u4ef6\u5305\u7684\u4f4d\u7f6e\u53ca\u76f8\u5173\u4f9d\u8d56.. [ root@localhost yum.repos.d ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls bak [ root@localhost yum.repos.d ] # vim local.repo \"\"\" [local] # \u4ed3\u5e93\u7684\u5b9e\u9645\u540d\u5b57,\u4efb\u610f name=\" this is local repo \" # \u4ed3\u5e93\u7684\u63cf\u8ff0,\u4efb\u610f baseurl=file:///opt # \u4ed3\u5e93\u4f4d\u7f6e,\u4e00\u822c\u4f1a\u51fa\u73b0\u56db\u79cd\u524d\u7f00 http:// https:// ftp:// file:// enabled=1 # \u542f\u7528\u4ed3\u5e93, \u9ed8\u8ba4enabled=1 \u4e0d\u5199\u4e5f\u53ef\u4ee5 gpgcheck=0 # \u68c0\u67e5\u5b89\u88c5\u7684rpm\u662f\u5426\u662f\u5408\u6cd5\u7684,\u901a\u5e38\u8bbe\u7f6e\u4e3a0,0\u8868\u793a\u4e0d\u68c0\u9a8c Ps: \u914d\u7f6e\u672c\u5730\u6e90,`file://`\u662f\u56fa\u5b9a\u5f00\u5934,\u4ee3\u8868\u662f\u4ece\u672c\u5730\u627e.\u5f80\u540e\u518d\u8ddfrepodata\u7684\u7236\u7ea7\u76ee\u5f55\u8def\u5f84 `file:///opt` \"\"\" [ root@localhost yum.repos.d ] # cat local.repo [ local ] name = \"this is local repo\" baseurl = file:///opt enabled = 1 gpgcheck = 0 step4: \u67e5\u8be2\u53ef\u7528\u4ed3\u5e93 \u00b6 ## \u8fdb\u884c\u9a8c\u8bc1 [ root@localhost ~ ] # yum repolist \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile local | 3 .6 kB 00 :00:00 ( 1 /2 ) : local/group_gz | 153 kB 00 :00:00 ( 2 /2 ) : local/primary_db | 3 .3 MB 00 :00:00 \u6e90\u6807\u8bc6 \u6e90\u540d\u79f0 \u72b6\u6001 local \"this is local repo\" 4 ,070 repolist: 4 ,070 \u5f00\u6e90\u7684yum\u6e90/\u7f51\u7edc\u6e90 \u00b6 Base\u57fa\u7840\u6e90 \u00b6 \"\"\"\u25b2 Base\u57fa\u7840\u6e90 \u963f\u91cc\u4e91\u7684Base\u57fa\u7840\u6e90: `wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo` 163\u7684Base\u57fa\u7840\u6e90: `wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo` \"\"\" [ root@localhost ~ ] # wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo ... ... ... 2022 -08-11 06 :42:38 ( 54 .8 KB/s ) - \u5df2\u4fdd\u5b58 \u201c/etc/yum.repos.d/CentOS-Base.repo\u201d [ 2523 /2523 ]) [ root@localhost ~ ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls bak CentOS-Base.repo local.repo epel\u6269\u5c55\u6e90 \u00b6 EPEL\u662f\u7531 Fedora \u793e\u533a\u6253\u9020, \u4e3a RHEL \u53ca\u884d\u751f\u53d1\u884c\u7248\u5982 CentOS\u3001Scientific Linux \u7b49\u63d0\u4f9b\u9ad8\u8d28\u91cf\u8f6f\u4ef6\u5305\u7684\u9879\u76ee. \u88c5\u4e0a\u4e86 EPEL\u4e4b\u540e,\u5c31\u76f8\u5f53\u4e8e\u6dfb\u52a0\u4e86\u4e00\u4e2a\u7b2c\u4e09\u65b9\u6e90. \u4f46\u63d0\u4f9b\u7684\u7248\u672c\u5f80\u5f80\u662f\u5f88\u6ede\u540e\u7684,\u56e0\u4e3a\u5b89\u5168\u7a33\u5b9a\u662f\u91cd\u70b9.. \"\"\"\u25b2 epel\u6269\u5c55\u6e90 \u963f\u91cc\u4e91\u7684epel\u6269\u5c55\u6e90\u5982\u4e0b:(\u7528wget\u547d\u4ee4\u4e5f\u53ef\u4ee5) `curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo` \u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5epel-release\u8f6f\u4ef6\u5305\u6765\u81ea\u52a8\u751f\u6210\u6269\u5c55\u6e90: `yum install epel-release -y` \"\"\" [ root@localhost yum.repos.d ] # yum install epel-release -y ... ... ... [ root@localhost yum.repos.d ] # ls bak CentOS-Base.repo epel.repo epel-testing.repo local.repo \u914d\u7f6enginx\u5b98\u7f51\u6e90 \u00b6 # \u53ef\u4ee5\u770b\u5230epel\u6269\u5c55\u6e90\u91cc\u4e5f\u63d0\u4f9b\u4e86nginx\u7684\u8f6f\u4ef6\u5305 # \u4f46\u7248\u672c1.20.1\u4e5f\u4e0d\u662fnginx\u7a33\u5b9a\u7248\u6700\u65b0\u7684(epel\u6e90\u63d0\u4f9b\u7684\u7248\u672c\u5f80\u5f80\u4f1a\u6bd4\u8f83\u6ede\u540e \u5f53\u524d\u5b98\u7f51\u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\u662f1.22.0).. [ root@localhost yum.repos.d ] # yum list | grep nginx.x86_64 collectd-nginx.x86_64 5 .8.1-1.el7 epel nginx.x86_64 1 :1.20.1-9.el7 epel pcp-pmda-nginx.x86_64 4 .3.2-13.el7_9 updates sympa-nginx.x86_64 6 .2.68-1.el7 epel \u4ece\u5b98\u7f51\u914d\u7f6enginx\u7684rpm\u6e90\u7684\u6b65\u9aa4\u89e3\u6790\u5982\u4e0b: 1> \u8f93\u5165\u7f51\u5740 https://nginx.org/ ,\u70b9\u51fb\u53f3\u8fb9\u680f\u4e2d\u7684 download 2> Mainline version \u5b98\u65b9\u7ef4\u62a4\u7248\u672c; Stable version \u7a33\u5b9a\u7248\u672c; Legacy versions\u5386\u53f2\u7248\u672c; Source Code \u6e90\u4ee3\u7801; Pre-Built Packages \u9884\u6784\u5efa\u5305.. \u70b9\u51fb Pre-Built Packages Mainline\u3001Stable\u3001Legacy\u4e0b\u8f7d\u7684\u90fd\u662f\u6e90\u7801\u5305!! 3> \u5f80\u4e0b\u6ed1, \u76f4\u5230 RHEL/CentOS \u5c0f\u8282.. \u6309\u7167\u5b98\u65b9\u63d0\u793a\u8fdb\u884c\u64cd\u4f5c.. \"\"\" [nginx-stable] \u7a33\u5b9a\u7248\u672c; [nginx-mainline] \u7ef4\u62a4\u7248\u672c \u6211\u4eec\u901a\u5e38\u4f1a\u4f7f\u7528\u7a33\u5b9a\u7248\u672c!\u6240\u4ee5\u524d\u8005enabled\u7684\u503c\u4e3a1,\u540e\u8005\u4e3a0. http://nginx.org/packages/centos/ $releasever / $basearch / $releasever \u7cfb\u7edf\u7684\u53d1\u884c\u7248\u672c(\u5f53\u524d\u73af\u5883\u662f7) $basearch \u67b6\u6784(\u5f53\u524d\u73af\u5883\u662fx86_64) \u4e24\u4e2a\u53d8\u91cf\u90fd\u6839\u636e\u6240\u5728\u5e73\u53f0\u4e0d\u540c\u52a8\u6001\u83b7\u53d6\u503c!!! Ps:\u8f93\u5165\u7f51\u5740`http://nginx.org/packages/centos/7/x86_64/`\u53ef\u4ee5\u53d1\u73b0\u5f53\u524d\u8def\u5f84\u4e0b\u6709repodata\u6587\u4ef6\u5939!!! \u4f50\u8bc1\u4e86 baseurl\u5c5e\u6027\u503c\u6307\u5b9a\u5230repodata\u6587\u4ef6\u5939\u7684\u7236\u4eb2\u76ee\u5f55\u5373\u53ef \u8fd9\u4e00\u7ed3\u8bba!!! \"\"\" [ root@localhost yum.repos.d ] # ls bak CentOS-Base.repo epel.repo epel-testing.repo local.repo [ root@localhost yum.repos.d ] # vim nginx.repo [ root@localhost yum.repos.d ] # cat nginx.repo [ nginx-stable ] name = nginx stable repo baseurl = http://nginx.org/packages/centos/ $releasever / $basearch / gpgcheck = 1 enabled = 1 gpgkey = https://nginx.org/keys/nginx_signinz.key module_hotfixes = true [ nginx-mainline ] name = nginx mainline repo baseurl = http://nginx.org/packages/mainline/centos/ $releasever / $basearch / gpgcheck = 1 enabled = 0 gpgkey = https://nginx.org/keys/nginx_signing.key module_hotfixes = true [ root@localhost yum.repos.d ] # [ root@localhost yum.repos.d ] # yum repolist | grep nginx nginx-stable/7/x86_64 nginx stable repo 280 \"\"\" \u82e5\u5b89\u88c5nginx\u8fc7\u7a0b\u4e2d,\u51fa\u9519\u63d0\u793a \u83b7\u53d6 GPG \u5bc6\u94a5\u5931\u8d25 \u6267\u884c\u547d\u4ee4`rpm --import https://nginx.org/keys/nginx_signing.key`\u540e\u518d\u5b89\u88c5.. \"\"\" yum remove nginx-* -y ## \u4fdd\u6301\u73af\u5883\u7684\u5e72\u51c0 yum install nginx -y ## \u5b89\u88c5\u7684\u662fnginx\u5b98\u7f51\u6e90\u91cc\u7684(\u56e0\u4e3anginx\u5b98\u7f51\u6e90\u91cc\u7684\u7248\u672c\u6bd4epel\u6e90\u91cc\u7684\u9ad8) \u8865\u5145: \u6267\u884c yum install nginx-* -y , \u8bd5\u56fe\u4e0b\u8f7dnginx\u5b98\u65b9\u6e90\u91cc\u76f8\u5173\u5b89\u88c5\u5305, \u5728\u6b64\u8fc7\u7a0b\u4e2d\u62a5\u9519\u7684\u89e3\u51b3... \u7b80\u5355\u6765\u8bf4,epel\u6e90\u4e0e\u5b98\u65b9\u6e90\u51b2\u7a81,\u5e72\u6389epel\u6e90\u518d\u5b89\u88c5; \u5b98\u65b9\u6e90\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u7f3a\u5c11\u7684\u4f9d\u8d56\u901a\u8fc7epel\u6e90\u4e0b\u8f7d\u5b89\u88c5..Hhhh. \"\"\" \u5f53\u524d\u6709\u963f\u91cc\u4e91\u7684Base\u57fa\u7840\u6e90\u3001\u963f\u91cc\u4e91\u7684epel\u6e90\u3001\u955c\u50cf\u6587\u4ef6\u7684\u672c\u5730\u6e90\u3001nginx\u7684\u5b98\u65b9\u6e90 \"\"\" [ root@localhost yum.repos.d ] # ls bak bak1 CentOS-Base.repo epel.repo epel.repo.rpmsave local.repo nginx.repo \"\"\"\u25b2 \u505a\u4e86\u4e2a\u5b9e\u9a8c,\u53ea\u7559\u4e0bnginx\u7684\u5b98\u65b9\u6e90 (1)\u6267\u884c`yum install nginx -y`\u547d\u4ee4 \u53ea\u4e0b\u8f7d\u4e86\u5b89\u88c5nginx-1.22.0-1.el7.ngx.x86_64.rpm\u5305.. \u4e0d\u662f\u5e9f\u8bdd\u561b,\u6307\u5b9a\u4e0b\u8f7d\u7684\u8f6f\u4ef6\u5305\u540d\u5c31\u662fnginx,\u53ea\u4e0d\u8fc7\u8be5\u8f6f\u4ef6\u5305\u6ca1\u6709\u4f9d\u8d56\u7f62\u4e86.. (2))\u6267\u884c`yum install nginx* -y`\u547d\u4ee4 \u7406\u8bba\u4e0a\u4f1a\u4e0b\u8f7dnginx\u7684\u5b98\u65b9\u6e90\u4e2d\u6240\u6709\u7684\u6700\u65b0\u7248\u672c\u7684rpm\u5305 (\u4e3e\u4e2a\u62bd\u8c61\u7684\u4f8b\u5b50 \u6709\u56db\u4e2arpm\u5305 A-1.0.1 A.1.0.2 B-1.1.2 B-1.1.3 \u6700\u7ec8\u53ea\u4f1a\u4e0b\u8f7dA.1.0.2\u548cB-1.1.3) \u8bd5\u7740\u6267\u884c\u547d\u4ee4,\u4f46\u4e2d\u9014\u62a5\u9519\u5566!!\u62a5\u9519\u5982\u4e0b: `nginx-nr-agent-2.0.0-12.el7.ngx.noarch (nginx-stable)\u8f6f\u4ef6\u5305\u9700\u8981\u4f9d\u8d56 python-daemon` python-daemon\u5305nginx\u7684\u5b98\u65b9\u6e90\u6ca1\u6709.. (\u53ef\u4ee5\u8bbf\u95eehttp://nginx.org/packages/centos/7/x86_64/RPMS/,\u4e0b\u9762\u5168\u662fnginx\u5f00\u5934\u7684rpm\u5305,\u6ca1\u6709\u5176\u4ed6\u7684) \u89e3\u51b3\u7684\u8bdd\u5c31\u9700\u8981epel\u6269\u5c55\u6e90\u7684\u5e2e\u5fd9.. \"\"\" \"\"\"\u25b2 \u4e0d\u52a8yum\u6e90 \u5305\u542bepel\u6e90\u548cnginx\u5b98\u65b9\u6e90 \"\"\" \u6267\u884c ` yum install nginx* -y ` \u547d\u4ee4,\u4f9d\u65e7\u4f1a\u4e0b\u8f7dnginx\u5b98\u65b9\u6e90\u90a3\u4e2a\u8f6f\u4ef6\u5305,\u62a5\u90a3\u4e2a\u9519\u8bef,\u6240\u4ee5\u5148\u89e3\u51b3\u4e0b.. ` yum install python-daemon ` \u901a\u8fc7epel\u6269\u5c55\u6e90\u89e3\u51b3\u4e86\u4f9d\u8d56\u5305\u7684\u4e0b\u8f7d\u5b89\u88c5 \u7ee7\u7eed\u6ee1\u6000\u671f\u671b\u7684\u6267\u884c ` yum install nginx* -y ` \u53d1\u73b0,\u51b2\u7a81\u5566!! epel\u6e90\u91cc\u7684\u8f6f\u4ef6\u5305\u7248\u672c\u8ddfnginx\u5b98\u65b9\u6e90\u91cc\u8f6f\u4ef6\u5305\u7248\u672c\u4f9d\u8d56\u76f8\u5173\u51b2\u7a81\u5bfc\u81f4\u7684..\u963f\u5df4\u963f\u5df4,\u53cd\u6b63\u5c31\u662f\u51b2\u7a81\u5566. \u89e3\u51b3: [ root@localhost ~ ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls bak bak1 CentOS-Base.repo epel.repo epel.repo.rpmsave local.repo nginx.repo ## \u5176\u5b9e\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 `yum-config-manager --disable \u4ed3\u5e93\u540d` \u5173\u95ed\u6307\u5b9a\u4ed3\u5e93.. [ root@localhost yum.repos.d ] # mv epel* bak1 [ root@localhost yum.repos.d ] # ls bak bak1 CentOS-Base.repo local.repo nginx.repo \u518d\u6267\u884c ` yum install nginx* -y ` \u5c06nginx\u5b98\u65b9\u6e90\u91cc\u7684\u8f6f\u4ef6\u5305\u5168\u90e8\u4e0b\u8f7d\u4e0b\u6765. \u5236\u4f5cyum\u672c\u5730\u6e90 \u00b6 \u524d\u9762\u6211\u4eec\u5b9e\u73b0\u4e86\u5c06\u955c\u50cf\u6587\u4ef6\u4f5c\u4e3a\u672c\u5730\u6e90,\u56e0\u4e3a\u955c\u50cf\u6587\u4ef6\u91cc\u6709repodata\u6587\u4ef6\u5939,\u6240\u4ee5\u7701\u53bb\u4e86\u4e00\u4e9b\u6b65\u9aa4.. \u56e0\u4e3a\u5236\u4f5c\u4e2ayum\u672c\u5730\u6e90\u8fd9\u662f\u4e2a \u91cd\u70b9 ,\u6240\u4ee5\u8fd9\u91cc\u5355\u72ec\u8fdb\u884c\u9610\u8ff0! \u5728\u751f\u4ea7\u73af\u5883\u4e2d,\u901a\u5e38\u4f1a\u81ea\u5df1\u505a\u4e00\u4e2ayum\u6e90!! \u4fdd\u8bc1\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u8f6f\u4ef6\u5305\u7248\u672c\u7684\u9ad8\u5ea6\u4e00\u81f4! \u96c6\u7fa4\u7684\u6bcf\u53f0\u673a\u5b50\u7684\u7f51\u7edc\u6e90\u4e00\u6837\u4e5f\u4e0d\u597d\u4f7f.. \u56e0\u4e3a\u7f51\u7edc\u6e90\u5728\u522b\u4e2a\u624b\u4e2d,\u4e00\u6539\u52a8.. \u6dfb\u52a0\u65b0\u673a\u5b50\u7684\u65f6\u5019, \u5c31\u5bb9\u6613\u51fa\u95ee\u9898. \u524d\u6587\u5728yum\u547d\u4ee4\u90a3\u91cc\u63d0\u5230\u4e86\u5143\u6570\u636e\u7f13\u5b58\u8ddf\u8f6f\u4ef6\u5305\u5185\u5bb9\u7684\u7f13\u5b58.. \u5c06 /etc/yum.conf \u7684keepcache\u5c5e\u6027\u503c\u6539\u4e3a1\u540e, \u8f6f\u4ef6\u5305\u5b89\u88c5\u5b8c\u6210yum\u4e0d\u518d\u81ea\u52a8\u5220\u9664\u8f6f\u4ef6\u5305,\u4f1a\u7f13\u5b58\u5230\u6307\u5b9a\u8def\u5f84.. [ root@localhost yum.repos.d ] # vim /etc/yum.conf [ main ] cachedir = /var/cache/yum/ $basearch / $releasever ## -- \u9ed8\u8ba4\u7684\u8f6f\u4ef6\u5305\u7f13\u5b58\u8def\u5f84 \u53ef\u6539 keepcache = 1 ... ... ... \"\"\" \u672c\u5730\u6e90\u7684\u597d\u5904:\u5c06\u8f6f\u4ef6\u5305\u7684\u7248\u672c\u7262\u7262\u7684\u63a7\u5236\u5230\u4e86\u81ea\u5df1\u7684\u624b\u91cc;\u901f\u5ea6\u4e5f\u4f1a\u5feb\u4e00\u4e9b. \"\"\" \u5047\u8bbe\u8981\u5728\u4e00\u5957\u6d4b\u8bd5\u73af\u5883\u4e2d\u8981\u90e8\u7f72k8s docker\u96c6\u7fa4\u67b6\u6784..\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b: 1.\u7ed9\u6d4b\u8bd5\u73af\u5883\u4e2d\u6bcf\u53f0\u673a\u5b50\u7528\u540c\u4e00\u4e2a\u955c\u50cf\u5b89\u88c5OS\u7cfb\u7edf.\u4fdd\u8bc1os\u7684\u4e00\u81f4. 2.\u521a\u5b89\u88c5\u5b8cos\u7cfb\u7edf\u65f6,\u6bcf\u53f0\u673a\u5b50\u90fd\u7edf\u4e00\u6267\u884c yum update -y \u64cd\u4f5c.. 3.\u5c06\u6d4b\u8bd5\u73af\u5883\u4e2d\u7684\u6bcf\u53f0\u673a\u5b50/\u6bcf\u4e2a\u8282\u70b9\u7684keepcache\u5c5e\u6027\u503c\u90fd\u8bbe\u7f6e\u4e3a1,\u5373\u5f00\u542f\u8f6f\u4ef6\u5305\u7f13\u5b58. rm -rf /var/cache/yum/* -- \u4fdd\u6301\u73af\u5883\u7684\u5e72\u51c0 vim /etc/yum.conf \u8bbe\u7f6e keepcache=1 4.\u914d\u7f6e\u7f51\u7edc\u6e90(bash+epel+\u5b98\u65b9),\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u4f1a\u5168\u90e8\u7f13\u5b58\u5230\u672c\u5730.. \u7b49\u6574\u5957\u6d4b\u8bd5\u73af\u5883\u90fd\u8c03\u8bd5ok\u5566.. 5.\u5c06\u6d4b\u8bd5\u73af\u5883\u4e2d\u6bcf\u53f0\u673a\u5b50\u4e0a\u7f13\u5b58\u597d\u7684\u8f6f\u4ef6\u5305\u5168\u90fd\u91c7\u96c6\u5230\u4e00\u8d77. \u5047\u8bbe\u653e\u5230\u540d\u4e3a/soft\u7684\u6587\u4ef6\u5939\u4e0b,\u6709\u91cd\u590d\u7684\u5c31\u8986\u76d6. \u4ee5\u4e00\u53f0\u673a\u5b50\u4e3a\u4f8b.. find /var/cache/yum -type f -name \"*.rpm\" | xargs -I {} mv {} /soft/ 6.\u6700\u540e\u9488\u5bf9\u8fd9\u4e2a\u6587\u4ef6\u5939\u505a createrepo /soft \u5efa\u7acb\u4f9d\u8d56\u6027\u5173\u7cfb. \u5728 /soft \u4e0b\u4f1a\u751f\u6210 repodata \u6587\u4ef6\u5939.. \u540e\u7eed\u5728\u5b8c\u6210yum\u672c\u5730\u6e90\u5171\u4eab\u540e,\u5728\u7ebf\u4e0a\u7684\u673a\u5b50 ` /etc/yum.repos.d/ ` \u4e0b\u914d\u7f6e .repo\u7ed3\u5c3e\u7684\u672c\u5730\u6e90.. ( \u914d\u7f6e\u65f6\u6ce8\u610frepodata\u76ee\u5f55\u7684\u4f4d\u7f6e\u4ee5\u4fbf\u4e8e\u8bbe\u7f6e\u6b63\u786e\u7684baseurl\u5c5e\u6027\u503c ) /soft\u6587\u4ef6\u5939\u4f5c\u4e3a\u7ebf\u4e0a\u73af\u5883\u7684\u4e00\u4e2ayum\u6e90!!!\u4e0d\u8981\u8f7b\u6613\u5347\u7ea7,\u4e0d\u8981\u6ee5\u7528yum\u6e90,\u8fd9\u6837\u53ef\u4ee5\u4e25\u683c\u63a7\u5236\u597d\u5404\u4e2a\u670d\u52a1\u7684\u7248\u672c \u672c\u5730\u6e90\u5171\u4eab \u00b6 \u6709\u4e24\u79cd\u65b9\u5f0f http:// \u548c ftp:// \u5b8c\u6210\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u4e0b\u8f7d, \u8fd9\u91cc\u4ee5ftp\u4e3a\u4f8b.. Ps: http\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae; ftp\u6587\u4ef6\u4f20\u8f93\u534f\u8bae \u670d\u52a1\u7aef\u4e0a\u7684\u64cd\u4f5c \u00b6 \"\"\"\u73af\u5883\u51c6\u5907 \"\"\" [ root@localhost ~ ] # systemctl stop firewalld ## -- \u5173\u95ed\u9632\u706b\u5899 [ root@localhost ~ ] # systemctl disable firewalld ## -- \u5f00\u673a\u4e0d\u542f\u52a8\u9632\u706b\u5899 [ root@localhost ~ ] # setenforce 0 ## -- \u4e34\u65f6\u5173\u95edSElinux \u914d\u7f6e\u6587\u4ef6\u91cc\u662f\u6ca1\u6709\u4fee\u6539\u7684! setenforce: SELinux is disabled ## -- \u8fd9\u91cc\u63d0\u793aselinux\u76ee\u524d\u662f\u7981\u7528\u72b6\u6001,\u4e0d\u5fc5\u5173\u95ed ## \u5f53\u7136\u53ef\u4ee5\u7528 vim /etc/sysconfig/selinux \u5728\u6587\u4ef6\u4e2d\u4fee\u6539 SELINUX=disabled [ root@localhost ~ ] # sed -i 's#^SELINUX=.*#SELINUX=disabled#g' /etc/selinux/config \"\"\"\u5b89\u88c5ftp\u670d\u52a1 \"\"\" ## \u5728\u6302\u8f7d\u7684\u955c\u50cf\u6587\u4ef6\u91cc\u5c31\u6709vsftpd ## \u5f53\u7136\u53ef\u901a\u8fc7\u547d\u4ee4 yum install vsftpd -y \u4e0b\u8f7d\u5b89\u88c5 [ root@localhost ~ ] # rpm -ivh /opt/Packages/vsftpd-3.0.2-28.el7.x86_64.rpm \u51c6\u5907\u4e2d... ################################# [100%] \u6b63\u5728\u5347\u7ea7/\u5b89\u88c5... 1 :vsftpd-3.0.2-28.el7 ################################# [100%] [ root@localhost ~ ] # systemctl start vsftpd ## -- \u5f00\u542fftp\u670d\u52a1 [ root@localhost ~ ] # systemctl status vsftpd ## -- \u67e5\u770bftp\u670d\u52a1\u72b6\u6001 \u25cf vsftpd.service - Vsftpd ftp daemon Loaded: loaded ( /usr/lib/systemd/system/vsftpd.service ; disabled ; ... Active: active ( running ) since \u56db 2022 -08-11 15 :13:49 CST ; 8s ago ... ... ... [ root@localhost ~ ] # systemctl enable vsftpd ## -- \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\u52a8 Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service. \"\"\"\u5236\u4f5cyum\u6e90 \"\"\" \u5728\u524d\u9762\u6211\u4eec\u6210\u529f\u6267\u884c ` yum install nginx* -y ` \u5c06nginx\u5b98\u65b9\u6e90\u91cc\u7684\u8f6f\u4ef6\u5305\u5168\u90e8\u4e0b\u8f7d\u4e0b\u6765. \u5e76\u6210\u529f\u7f13\u5b58\u5230\u4e86\u8def\u5f84 ` /var/cache/yum ` \u4e0b. \u5728\u6839\u76ee\u5f55\u4e0b\u5efa\u7acb ` mkdir /soft ` \u6587\u4ef6\u5939 \u6267\u884c ` find /var/cache/yum -type f -name \"*.rpm\" | xargs -I {} mv {} /soft/ ` \u547d\u4ee4 \u6210\u529f\u5c06\u7f13\u5b58\u7684\u8f6f\u4ef6\u5305\u91c7\u96c6\u5230\u4e86 /soft\u76ee\u5f55\u4e0b \u6267\u884c ` createrepo /soft ` \u547d\u4ee4\u5efa\u7acb\u4f9d\u8d56\u6027\u5173\u7cfb.\u5728 ` /soft ` \u4e0b\u4f1a\u751f\u6210\u4e86 ` repodata ` \u6587\u4ef6\u5939. \"\"\"ftp\u670d\u52a1\u5171\u4eab\u6587\u4ef6\u5939 !!! ftp://172.16.150.131 \u6307\u5411\u7684\u5c31\u662f /var/ftp \"\"\" ## \u5c06/soft\u6587\u4ef6\u5939\u79fb\u52a8\u5230ftp\u670d\u52a1\u81ea\u5e26\u7684\u5171\u4eab\u6587\u4ef6\u5939\u91cc \u672c\u8d28\u5c31\u662f\u901a\u8fc7\u5957\u63a5\u5b57\u7a0b\u5e8f\u5171\u4eab ## \u5b9e\u9645\u4e0a\u4e25\u8c28\u70b9,\u7f13\u5b58\u7684\u8f6f\u4ef6\u5305\u901a\u8fc7find\u547d\u4ee4\u627e\u5230\u540e\u5e94\u8be5xargs\u5230/var/ftp/pub\u76ee\u5f55\u4e0b [ root@localhost ~ ] # mv /soft/ /var/ftp [ root@localhost ~ ] # ls /var/ftp pub soft [ root@localhost ~ ] # ifconfig ens33 | grep inet inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> \u5ba2\u6237\u7aef\u4e0a\u7684\u64cd\u4f5c \u00b6 \u4e3b\u8981\u4e24\u70b9, \u5ba2\u6237\u7aef\u8981\u8ddf\u670d\u52a1\u7aef\u7684OS\u7248\u672c\u4ee5\u53ca\u67b6\u6784\u4e00\u81f4;ftp\u670d\u52a1\u8981ping\u901a!!! \"\"\" \u540c\u7406,\u5173\u9632\u706b\u5899\u5173selinux ping\u4e00\u4e0b\u670d\u52a1\u7aef\u7684ip\u5730\u5740,\u4fdd\u8bc1\u7f51\u7edc\u7545\u901a!!!\u8fd9\u5f88\u91cd\u8981. (\u5b9e\u9645\u4e0a\u56e0\u4e3avm\u865a\u62df\u673a\u4e0e\u4e3b\u673a\u6865\u63a5\u6a21\u5f0f\u7684\u7f18\u6545,\u80fdping\u901a \u5728\u540c\u4e00\u4e2a\u7f51\u6bb5\u5e94\u8be5\u80fd\u4e92ping \u5728\u6b64\u4e0d\u6df1\u7a76\u5566) \"\"\" One_Piece@DCdeMacBook-Air ~ % ping 172 .16.150.131 PING 172 .16.150.131 ( 172 .16.150.131 ) : 56 data bytes 64 bytes from 172 .16.150.131: icmp_seq = 0 ttl = 64 time = 0 .650 ms 64 bytes from 172 .16.150.131: icmp_seq = 1 ttl = 64 time = 0 .604 ms 64 bytes from 172 .16.150.131: icmp_seq = 2 ttl = 64 time = 0 .648 ms ^C --- 172 .16.150.131 ping statistics --- 3 packets transmitted, 3 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 0 .604/0.634/0.650/0.021 ms ` cd /etc/yum.repos.d/ ` ` vim ftp.repo ` \u5199\u5165\u4ee5\u4e0b\u5185\u5bb9.. \u5c31\u53ef\u4ee5\u4f7f\u7528yum\u547d\u4ee4\u4f7f\u7528\u8be5\u6e90\u91cc\u9762\u7684\u5305\u5566 [ ftp_repo ] name = This is Ftp Share Repo baseurl = ftp://172.16.150.131/soft ## \u8be5\u8def\u5f84\u4e0b\u6709\u4e2arepodata\u6587\u4ef6\u5939 enabled = 1 gpgcheck = 0 \u6b64\u65f6\u8fd9\u53f0\u673a\u5668\u5c31\u53ef\u4ee5\u4f7f\u7528\u5171\u4eab\u7684\u6e90\u5b89\u88c5nginx.. \u4f46\u8981\u6ce8\u610f,\u82e5\u96c6\u7fa4\u4e2d\u7684\u8fd9\u53f0\u673a\u5668\u8ddf\u5171\u4eab\u672c\u5730\u6e90\u7684\u90a3\u53f0\u673a\u5668\u7684os\u7248\u672c\u3001\u67b6\u6784\u4e0d\u4e00\u6837\u7684\u8bdd..\u4f1a\u5b89\u88c5\u5931\u8d25!!! \u56e0\u4e3a\u5171\u4eab\u6e90\u7684\u90a3\u53f0\u673a\u5668\u662f\u6839\u636e\u5b83\u81ea\u8eab\u7684\u60c5\u51b5\u7f13\u5b58\u7684\u8f6f\u4ef6\u5305.. $releasever OS\u7248\u672c $basearch \u67b6\u6784 \u6e90\u7801\u5305 \u00b6 \u4ee5nginx\u6e90\u7801\u5305\u7684\u5b89\u88c5\u4e3a\u4f8b, \u4f9d\u6b21\u8fdb\u884c\u4ee5\u4e0b\u6b65\u9aa4: \u25b2 1 > \u5b89\u88c5\u6e90\u7801\u5305\u5bf9\u5e94\u7684\u7f16\u8bd1\u5668\u4ee5\u53ca\u76f8\u5173\u4f9d\u8d56\u5e93 ` yum grouplist ` \u770b\u4e00\u4e0b\u662f\u5426\u652f\u6301\u4e2d\u6587 ` yum groupinstall \"Development tools\" -y ` ; yum groupinstall \"\u5f00\u53d1\u5de5\u5177\" -y \u4fdd\u9669\u8d77\u89c1,\u6015 \"\u5f00\u53d1\u5de5\u5177\" \u91cc\u6ca1\u5305\u542b\u8fd9\u4e9b\u4f9d\u8d56\u5305,\u518d\u6267\u884c\u4e0b\u4e0b\u9762\u4e24\u6761\u547d\u4ee4 yum -y install gcc gcc-c++ autoconf automake make yum -y install zlib zlib-devel openssl openssl-devel pcre pcre-devel \u25b2 2 > \u4e0b\u8f7d\u6e90\u7801\u5305 cd ~ wget https://nginx.org/download/nginx-1.22.0.tar.gz \u25b2 3 > \u89e3\u538b tar xvf nginx-1.22.0.tar.gz -C /tmp/ \u25b2 4 > \u8fdb\u884c\u7f16\u8bd1 -- \u751f\u6210makefile\u6587\u4ef6 cd /tmp/nginx-1.22.0/ # \u8be5\u76ee\u5f55\u4e0b\u6709\u4e2aconfigure\u7a0b\u5e8f\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e \"\"\"./configure \u53c2\u8003\u5730\u5740: https://nginx.org/en/docs/configure.html --prefix \u6307\u5b9a\u5b89\u88c5\u7684\u76ee\u5f55 \u8fd9\u91cc\u6307\u5b9a\u7684\u8def\u5f84\u662f /usr/local/nginx-1.22.0,\u6700\u7ec8\u4f1a\u5728\u6b64\u76ee\u5f55\u4e0b\u5305\u542b\u4e00\u5806\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u547d\u4ee4 ... \u8fd9\u513f\u7b3c\u7edf\u7684\u5c06\u6240\u4ee5\u7684\u914d\u7f6e\u90fd\u653e\u5230/usr/local/nginx-1.22.0\u4e0b,\u4e0d\u5206\u90a3\u4e48\u7684\u7ec6\u4e86.. \"\"\" ## \u82e5\u6b64\u547d\u4ee4\u62a5\u9519,\u53ea\u53ef\u80fd\u662f\u56e0\u4e3a\u7f3a\u5c11\u4f9d\u8d56\u5e93 ## \u62a5\u9519\u540e,\u4e00\u5b9a\u8981\u5148\u6267\u884c\u547d\u4ee4 make clean all,\u518d\u89e3\u51b3\u4f9d\u8d56\u5305\u7684\u95ee\u9898 \u4e8e\u6b64\u5f80\u590d,\u76f4\u81f3\u4e0d\u62a5\u9519 [ root@localhost nginx-1.22.0 ] #./configure --prefix=/usr/local/nginx-1.22.0 ... ... ... Configuration summary + using system PCRE library + OpenSSL library is not used + using system zlib library nginx path prefix: \"/usr/local/nginx-1.22.0\" ## -- \u5b89\u88c5\u8def\u5f84 nginx binary file: \"/usr/local/nginx-1.22.0/sbin/nginx\" ## -- nginx\u7a0b\u5e8f nginx modules path: \"/usr/local/nginx-1.22.0/modules\" ## -- \u6a21\u5757\u8def\u5f84 nginx configuration prefix: \"/usr/local/nginx-1.22.0/conf\" ## -- \u914d\u7f6e\u6587\u4ef6 nginx configuration file: \"/usr/local/nginx-1.22.0/conf/nginx.conf\" ## -- \u4e3b\u914d\u7f6e\u6587\u4ef6 nginx pid file: \"/usr/local/nginx-1.22.0/logs/nginx.pid\" ## -- pid nginx error log file: \"/usr/local/nginx-1.22.0/logs/error.log\" ## -- \u9519\u8bef\u65e5\u5fd7 nginx http access log file: \"/usr/local/nginx-1.22.0/logs/access.log\" ## -- \u8bbf\u95ee\u65e5\u5fd7 nginx http client request body temporary files: \"client_body_temp\" ## -- \u4e34\u65f6\u6587\u4ef6 nginx http proxy temporary files: \"proxy_temp\" nginx http fastcgi temporary files: \"fastcgi_temp\" nginx http uwsgi temporary files: \"uwsgi_temp\" nginx http scgi temporary files: \"scgi_temp\" ## \u751f\u6210\u4e86Makefile\u7f16\u8bd1\u6587\u4ef6 [ root@localhost nginx-1.22.0 ] # ls auto CHANGES CHANGES.ru conf configure contrib html LICENSE Makefile man objs README src \u25b2 \u5b89\u88c5 make && make install rm -rf /tmp/nginx-1.22.0/ # \u6e05\u7406\u5b89\u88c5\u5305 \u25b2 \u8fd0\u884c cd /usr/local/nginx-1.22.0 [ root@localhost nginx-1.22.0 ] # ps aux | grep nginx root 75065 0 .0 0 .0 20576 616 ? Ss 18 :33 0 :00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx nobody 75066 0 .0 0 .1 23104 1372 ? S 18 :33 0 :00 nginx: worker process root 75153 0 .0 0 .0 112824 988 pts/0 R+ 18 :35 0 :00 grep --color = auto nginx \u6e90\u7801\u5b89\u88c5\u540e,\u505a\u4e00\u70b9\u70b9\u4f18\u5316! [ root@localhost ~ ] # mkdir /soft/ [ root@localhost ~ ] # ln -s /usr/local/nginx-1.22.0/ /soft/nginx [ root@localhost ~ ] # ll -d /soft/nginx/ drwxr-xr-x 11 root root 151 8\u6708 11 18 :33 /soft/nginx/ [ root@localhost ~ ] # ll -d /soft/nginx lrwxrwxrwx 1 root root 24 8\u6708 22 17 :43 /soft/nginx -> /usr/local/nginx-1.22.0/ [ root@localhost ~ ] # ls /soft/nginx/ client_body_temp conf fastcgi_temp html logs proxy_temp sbin scgi_temp uwsgi_temp \u7528\u8f6f\u94fe\u63a5\u4e00\u901a\u64cd\u4f5c,\u4fbf\u4e8e\u4ee5\u540e\u7684\u5347\u7ea7!!!\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b: 1 > \u539f\u6765\u5b89\u88c5\u7684\u662fnginx1.22\u7684\u7248\u672c,\u5e76\u8f6f\u94fe\u63a5\u5230\u4e86 /soft/nginx\u76ee\u5f55\u4e0b.. 2 > \u73b0\u5728\u8981\u5347\u7ea7nginx,\u5148\u5b89\u88c5nginx1.3\u7684\u7248\u672c\u5230\u9ed8\u8ba4\u8def\u5f84/usr/local\u4e0b 3 > \u5220\u9664\u8f6f\u94fe\u63a5/soft/nginx/\u4e0b\u7684\u5185\u5bb9 4 > \u5c06\u65b0\u5b89\u88c5\u7684nginx\u4e0e/soft/nginx\u5efa\u7acb\u8f6f\u94fe\u63a5 \u8fd9\u6837\u7684\u8bdd,\u7cfb\u7edf\u4e2d\u5173\u4e8enginx\u7684\u914d\u7f6e\u6587\u4ef6,\u8981\u7528nginx\u7684\u5730\u65b9\u8def\u5f84\u4f9d\u65e7\u662f /soft/nginx/... \u6ca1\u5fc5\u8981\u66f4\u6539!!!!!","title":"\u8f6f\u4ef6\u5305\u7ba1\u7406\u4e4byum"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#yum","text":"\u57fa\u4e8eRPM\u5305\u7ba1\u7406, \u80fd\u591f\u4ece\u6307\u5b9a\u7684\u670d\u52a1\u5668\u81ea\u52a8\u4e0b\u8f7dRPM\u5305\u5e76\u4e14\u5b89\u88c5, \u53ef\u4ee5\u81ea\u52a8\u5904\u7406\u4f9d\u8d56\u6027\u5173\u7cfb, \u5e76\u4e14\u4e00\u6b21\u5b89\u88c5\u6240\u6709\u4f9d\u8d56\u7684\u8f6f\u4ef6\u5305, \u65e0\u987b\u7e41\u7410\u5730\u4e00\u6b21\u6b21\u4e0b\u8f7d\u3001\u5b89\u88c5. yum\u547d\u4ee4\u76f8\u8f83\u4e8erpm\u547d\u4ee4, yum\u53ef\u4ee5\u81ea\u52a8\u89e3\u51b3\u4f9d\u8d56\u6027\u7684\u95ee\u9898 . \u5176\u539f\u7406\u5728\u4e8e: \u4f7f\u7528yum\u5b89\u88c5\u8f6f\u4ef6\u5305\u65f6,\u4f1a\u53bb\u67d0\u4e2a\u4ed3\u5e93\u627e\u8f6f\u4ef6\u5305,\u6b64\u4ed3\u5e93\u5df2\u7ecf\u4e8b\u5148\u5c06\u8be5\u8f6f\u4ef6\u5305\u4ee5\u53ca\u76f8\u5173\u4f9d\u8d56\u5168\u90fd\u51c6\u5907\u597d\u4e86.. \u4ed3\u5e93: \u672c\u8d28\u4e0a\u5c31\u662f\u5b58\u653e\u6240\u6709\u76f8\u5173\u8f6f\u4ef6\u5305\u7684\u4e00\u4e2a\u6587\u4ef6\u5939.. \u8be5\u6587\u4ef6\u5939\u4e0b\u5fc5\u5b9a\u6709\u4e2a\u540d\u4e3a repodata \u7684\u6587\u4ef6\u5939\u8bb0\u5f55\u4e86\u6587\u4ef6\u5939\u6240\u5305\u542b\u8f6f\u4ef6\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb.. ## yum\u547d\u4ee4\u6765\u81ea\u4e8e\u54ea\u4e2a\u8f6f\u4ef6\u5305 [ root@localhost ~ ] # rpm -qf /usr/bin/yum yum-3.4.3-168.el7.centos.noarch ## \u5b89\u88c5yum\u8f6f\u4ef6\u5305\u540e\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6 [ root@localhost ~ ] # rpm -qc yum /etc/logrotate.d/yum /etc/yum.conf /etc/yum/version-groups.conf","title":"yum\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_1","text":"\u67e5\u8be2\u4ed3\u5e93: yum repolist -- \u67e5\u770b\u53ef\u7528\u4ed3\u5e93 yum repolist all -- \u67e5\u770b\u6240\u6709\u4ed3\u5e93(\u5305\u542b\u542f\u7528\u7684\u4e0e\u7981\u7528\u7684) yum-config-manager --disable \u4ed3\u5e93\u540d -- \u5173\u95ed\u6307\u5b9a\u4ed3\u5e93 yum-config-manager --enable \u4ed3\u5e93\u540d -- \u5f00\u542f\u6307\u5b9a\u4ed3\u5e93 \u200b \u53bb\u6389.repo\u540e\u7f00\u5c31\u662f\u4ed3\u5e93\u540d ls /etc/yum.repos.d/ \u200b \u672c\u8d28\u662f\u5c06 /etc/yum.repos.d/CentOS-Base.repo \u6587\u4ef6\u4e2d\u5bf9\u5e94\u4ed3\u5e93\u7684 enabled \u503c\u8fdb\u884c\u66f4\u6539 \u200b enabled\u9ed8\u8ba4\u503c\u4e3a1 0\u5173\u95ed) 1(\u5f00\u542f) \u67e5\u8be2\u8f6f\u4ef6\u5305: \u200b yum list -- \u5217\u51fa\u6240\u6709\u53ef\u7528\u4ed3\u5e93\u91cc\u7684\u6240\u6709\u8f6f\u4ef6\u5305( \u5305\u62ec \u5df2\u7ecf\u5b89\u88c5\u7684 \u548c \u53ef\u4ee5\u5b89\u88c5\u7684 ) \u200b \u53ef\u7ed3\u5408\u7ba1\u9053\u4e0e\u67e5\u770b\u6587\u4ef6\u7684\u4e00\u4e9b\u547d\u4ee4\u4e00\u8d77\u4f7f\u7528 eg: yum list|less ; yum list|more yum grouplist -- \u5217\u51fa\u6240\u6709\u53ef\u7528\u4ed3\u5e93\u4e2d\u7684\u8f6f\u4ef6\u5305\u7ec4 \u200b eg: \u8f6f\u4ef6\u5305\u7ec4\u4e4b\u4e00\u7684 \u5b89\u5168\u6027\u5de5\u5177 \u91cc\u5c31\u5305\u542b\u4e86\u4e00\u5806\u76f8\u5173\u7684\u8f6f\u4ef6\u5305 \u200b yum provides \u6587\u4ef6\u8def\u5f84 -- \u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7531\u54ea\u4e2a\u8f6f\u4ef6\u5305\u4ea7\u751f\u7684 \u200b \u53ef\u7528\u4e8e\u67e5\u770b\u547d\u4ee4\u6765\u81ea\u54ea\u4e2a\u8f6f\u4ef6\u5305 \u7b49\u540c\u4e8e rpm -qf \u63d0\u4e00\u5634,\u52a0 -y \u9009\u9879 (\u8868\u660eyes) \u53ef\u4ee5\u975e\u4ea4\u4e92\u5f0f\u7684\u8fdb\u884c\u5b89\u88c5\u3001\u5378\u8f7d\u3001\u91cd\u88c5\u3001\u66f4\u65b0.. \u5b89\u88c5: yum install \u8f6f\u4ef6\u5305\u540d -y -- \u5b89\u88c5\u8f6f\u4ef6\u5305 \u82e5\u5df2\u7ecf\u5b89\u88c5\u5566,\u4f1a\u5728\u73b0\u6709\u7684\u4ed3\u5e93\u91cc\u9762\u770b\u770b\u6709\u65e0\u66f4\u9ad8\u7684\u7248\u672c,\u6709\u7684\u8bdd\u4f1a\u8fdb\u884c\u5347\u7ea7\u5904\u7406.. \u6700\u597d\u5378\u8f7d\u540e\u88c5\u65b0\u7684!! eg: yum remove nginx-* -y yum groupinstall \"\u8f6f\u4ef6\u5305\u7ec4\u540d\u5b57\" -y or yum groups install \"\u8f6f\u4ef6\u5305\u7ec4\u540d\u5b57\" -y -- \u5b89\u88c5\u8f6f\u4ef6\u7ec4 \u6ce8\u610f: \u8f6f\u4ef6\u7ec4\u540d\u5b57\u9700\u8981\u52a0\u53cc\u5f15\u53f7 \u5378\u8f7d: yum remove \u8f6f\u4ef6\u5305\u540d -y -- \u5378\u8f7d\u8f6f\u4ef6\u5305 yum groupremove \"\u8f6f\u4ef6\u7ec4\u540d\u5b57\" -y or yum groups remove \"\u8f6f\u4ef6\u7ec4\u540d\u5b57\" -y -- \u5378\u8f7d\u8f6f\u4ef6\u7ec4 \u91cd\u88c5: yum reinstall \u8f6f\u4ef6\u5305\u540d -y -- \u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u914d\u7f6e\u6587\u4ef6\u7684\u65f6,\u53ef\u4ee5reinstall\u4e00\u4e0b,\u4f1a\u8865\u5145\u6ca1\u6709\u7684\u90e8\u5206 Ps: \u6653\u5f97\u9884\u671f\u7684\u7ed3\u679c\u7684\u524d\u63d0\u4e0b,\u4e0d\u6253\u5370\u7ed3\u679c yum reinstall httpd -y &>/dev/null \u6ce8\u610f: reinstall\u4ec5\u9650\u4e8e\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u641e,\u751f\u4ea7\u73af\u5883\u522b\u8f7b\u6613\u8fd9\u6837\u505a!!!\u5bb9\u6613\u51fa\u95ee\u9898. \u66f4\u65b0: \u4e0d\u8981\u4f5c\u6b7b,\u4e0d\u8981\u4f5c\u6b7b,\u4e0d\u8981\u8f7b\u6613\u66f4\u65b0.. yum update -y -- \u4f1a\u66f4\u65b0\u6240\u6709\u8f6f\u4ef6\u5305,\u5305\u62ecOS\u5185\u6838, \u901a\u5e38\u53ea\u5728\u521a\u88c5\u5b8c\u7cfb\u7edf\u65f6\u6267\u884c yum update \u8f6f\u4ef6\u5305\u540d -y -- \u66f4\u65b0\u67d0\u4e2a\u8f6f\u4ef6\u5305 yum check-update -- \u68c0\u67e5\u6709\u54ea\u4e9b\u53ef\u4ee5\u66f4\u65b0\u7684\u8f6f\u4ef6\u5305 \u901a\u5e38\u8981\u66f4\u65b0\u65f6,\u6d4b\u8bd5\u73af\u5883\u3001\u4e0e\u7ebf\u4e0a1\u6bd41\u7684\u73af\u5883\u90fd\u8981\u5b9e\u9a8c\u4e0b,\u6ca1\u95ee\u9898\u540e, \u518d\u66f4\u65b0\u7ebf\u4e0a\u51e0\u53f0\u673a\u5668\u8bd5\u8bd5,\u89c2\u5bdf\u51e0\u5468\u65f6\u95f4,\u518d\u5c06\u96c6\u7fa4\u6162\u6162\u7684\u66f4\u65b0...\u4fdd\u8bc1\u4e1a\u52a1\u80fd\u6b63\u5e38\u8fd0\u884c\u7684\u60c5\u51b5\u4e0b,\u7f13\u6162\u7684\u4ece\u5c40\u90e8\u5230\u5168\u4f53\u66f4\u65b0... \u7f13\u5b58: yum makecache -- \u5236\u4f5c\u5143\u6570\u636e\u7f13\u5b58 yum clean all -- \u6e05\u9664\u5143\u6570\u636e\u7f13\u5b58 \u5386\u53f2\u8bb0\u5f55: yum history -- \u67e5\u770b\u6267\u884c\u8fc7\u7684yum\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55 yum history info ID\u53f7 -- \u67e5\u770b\u5177\u4f53\u67d0\u4e00\u6761yum\u547d\u4ee4\u7684\u8be6\u7ec6\u4fe1\u606f,\u5e72\u4e86\u4ec0\u4e48\u4e8b yum history undo ID\u53f7 -- \u64a4\u9500 \u6267\u884c\u8fc7\u7684\u67d0\u6761yum\u547d\u4ee4,\u5373\u76f8\u5f53\u4e8e\u6ca1\u6709\u6267\u884c\u8fd9\u6761yum\u547d\u4ee4.. eg: \u67d0\u6761yum\u547d\u4ee4\u662f\u5378\u8f7d\u67d0\u4e2a\u8f6f\u4ef6\u5305,\u90a3\u4e48\u6267\u884cundo\u540e,\u4f1a\u91cd\u65b0\u4e0b\u8f7d\u8fd9\u4e2a\u8f6f\u4ef6\u5305.. \u6ce8\u610f: \u65e0\u8bbayum\u5b89\u88c5\u7684\u8f6f\u4ef6\u6765\u81ea\u4f55\u65b9 yum install rpm\u5305\u7f51\u7edc\u5730\u5740 , \u9047\u5230\u4f9d\u8d56\u95ee\u9898, yum\u90fd\u4f1a\u4ee5\u81ea\u5df1\u4ed3\u5e93\u4e2d\u7684repodata\u5b58\u50a8\u7684\u4f9d\u8d56\u5173\u7cfb\u4e3a\u51c6.. \u591a\u4e2a\u4ed3\u5e93\u7684\u8bdd, \u4f1a\u4f9d\u6b21\u68c0\u7d22.. \u6587\u4ef6 = \u6587\u4ef6\u5143\u6570\u636e + \u5b9e\u9645\u5185\u5bb9 \u5b89\u88c5\u8f6f\u4ef6\u5305\u5c31\u662f\u5728\u5b89\u88c5\u4e00\u5806\u6587\u4ef6, ` yum makecache ` \u7f13\u5b58\u7684\u662f\u6587\u4ef6\u7684\u5143\u6570\u636e ( \u6743\u9650\u3001\u5927\u5c0f\u3001\u65f6\u95f4\u3001\u6b64\u6587\u4ef6\u4e0e\u5176\u5b83\u6587\u4ef6\u7684\u5173\u8054\u7b49 ) .. \u6267\u884c ` yum makecache ` \u540e,\u53ef\u4ee5\u63d0\u901f,\u63d0\u7684\u662fyum\u547d\u4ee4\u7684\u67e5\u8be2\u901f\u5ea6 ` yum list ` ,\u5e76\u6ca1\u6709\u63d0\u5347\u8f6f\u4ef6\u5305\u7684\u4e0b\u8f7d\u901f\u5ea6.. Q:\u80fd\u5426\u7f13\u5b58\u8f6f\u4ef6\u5305\u5462\uff1f\uff1f A:\u82e5yum\u7684\u4ed3\u5e93\u5728\u7f51\u4e0a\u7684\u8bdd,yum\u53d1\u8bf7\u6c42\u5c06\u8f6f\u4ef6\u5305\u4e0b\u8f7d\u5230\u672c\u5730,\u5b89\u88c5\u5b8c\u6210\u540e,\u9ed8\u8ba4\u60c5\u51b5yum\u4f1a\u81ea\u52a8\u5c06\u8f6f\u4ef6\u5305\u5220\u9664.. \u4e0b\u6b21\u8fd8\u60f3\u5b89\u88c5\u540c\u4e00\u8f6f\u4ef6\u5305,\u5c31\u5f97\u91cd\u590d\u8fd9\u4e2a\u8bf7\u6c42\u4e0b\u8f7d\u7684\u8fc7\u7a0b.. \u9ed8\u8ba4\u8f6f\u4ef6\u5305\u4e0b\u8f7d\u5b89\u88c5\u540e\u4f1a\u81ea\u52a8\u5220\u9664\u8fd9\u4e00\u64cd\u4f5c\u662f\u8ddf ` /etc/yum.conf ` \u6587\u4ef6\u6709\u5173\u7684.. \u53ef\u4ee5\u770b\u5230keepcache\u9ed8\u8ba4\u7b49\u4e8e0,\u82e5 ` keepcache = 1 ` \u5c31\u4ee3\u8868yum\u4f1a\u5c06rpm\u5305\u5b89\u88c5\u540e\u4e22\u5230cachedir\u5c5e\u6027\u6307\u5b9a\u7684\u6587\u4ef6\u5939\u4e0b.. [ root@localhost yum.repos.d ] # vim /etc/yum.conf [ main ] cachedir = /var/cache/yum/ $basearch / $releasever keepcache = 0 debuglevel = 2 logfile = /var/log/yum.log exactarch = 1 obsoletes = 1 gpgcheck = 1 plugins = 1 installonly_limit = 5 bugtracker_url = http://bugs.centos.org/set_project.php?project_id = 23 & ref = http://bugs.centos.org/bug_report_page.php?category = yum distroverpkg = centos-release ... ... ...","title":"\u9009\u9879"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_2","text":"Ps: shell\u8fdc\u7a0b\u8fde\u63a5\u5f00\u4e86\u4e24\u4e2a\u7a97\u53e3,\u7b2c\u4e00\u4e2a\u7a97\u53e3\u7684yum\u547d\u4ee4\u6b63\u5728\u6267\u884c,\u7b2c\u4e8c\u4e2a\u7a97\u53e3\u4f7f\u7528yum\u65f6\u4f1a\u63d0\u793ayum\u5bf9\u5e94\u7684\u8fdb\u7a0b\u6b63\u5728\u8fd0\u884c, \u5373\u540c\u4e00\u65f6\u95f4\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u53ea\u80fd\u6709\u4e00\u4e2ayum\u547d\u4ee4\u8fd0\u884c... \u5f53\u6211\u4eec\u786e\u5b9a\u540e\u53f0\u8fd0\u884c\u7684yum\u6ca1\u7528\u65f6,\u90a3\u4e48\u8fd0\u884c\u547d\u4ee4 pkill -9 yum \u53ef\u5e72\u6389\u540e\u53f0\u6b63\u5728\u8fd0\u884c\u7684\u90a3\u4e2ayum.. ## \u89c2\u5bdf\u7ed3\u679c,\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u53ef\u4ee5\u7684\u4ed3\u5e93\u6709\u4e09\u4e2a Base\u3001Extras\u3001Updates [ root@localhost ~ ] # yum repolist \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile * base: mirrors.nju.edu.cn * extras: mirrors.163.com * updates: mirrors.nju.edu.cn \u6e90\u6807\u8bc6 \u6e90\u540d\u79f0 \u72b6\u6001 !base/7/x86_64 CentOS-7 - Base 10 ,072 !extras/7/x86_64 CentOS-7 - Extras 512 !updates/7/x86_64 CentOS-7 - Updates 4 ,101 repolist: 14 ,685 ## \u5173\u95ed\u4e0e\u542f\u52a8\u4ed3\u5e93 Base yum-config-manager --disable Base yum-config-manager --enable Base [ root@localhost yum.repos.d ] # which ifconfig /usr/sbin/ifconfig [ root@localhost yum.repos.d ] # yum provides /usr/sbin/ifconfig \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile * base: mirrors.nju.edu.cn * extras: mirrors.nju.edu.cn * updates: mirrors.nju.edu.cn net-tools-2.0-0.25.20131004git.el7.x86_64 : Basic networking tools \u6e90 :@anaconda \u5339\u914d\u6765\u6e90\uff1a \u6587\u4ef6\u540d :/usr/sbin/ifconfig ## \u5b89\u88c5\u8f6f\u4ef6\u5305 \u4ee5\u53ca \u8f6f\u4ef6\u7ec4 yum install httpd -y yum groupinstall \"\u5f00\u53d1\u5de5\u5177\" -y ## \u5378\u8f7d yum remove httpd -y yum groupremove \"\u5f00\u53d1\u5de5\u5177\" -y ## \u66f4\u65b0 yum update httpd -y","title":"\u5b9e\u9a8c\u9a8c\u8bc1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#yum_1","text":"\u8981\u4f7f\u7528yum\u524d,\u9700\u8981\u51c6\u5907\u4e00\u4e2ayum\u6e90/\u4ed3\u5e93, \u53ef\u4ee5\u662f\u4e00\u4e2a\u4e92\u8054\u7f51\u4e0a\u7684\u4ed3\u5e93,\u4e5f\u53ef\u4ee5\u662f\u672c\u5730\u81ea\u5df1\u642d\u5efa\u7684\u4ed3\u5e93. \u4ed3\u5e93\u91cc\u9762\u6709\u4ec0\u4e48\u5462?\u91cc\u9762\u5168\u90e8\u90fd\u662f.rpm\u7684\u8f6f\u4ef6\u5305. \u4e00\u53f0linux,\u53ef\u4ee5\u6dfb\u52a0N\u591a\u4e2ayum\u6e90, \u80fd\u641c\u7d22\u7684\u8f6f\u4ef6\u5305\u6570\u91cf\u5c31\u662fN\u4e2ayum\u6e90\u4e4b\u548c.. 1> \u672c\u5730\u6e90: \u628a\u672c\u5730\u7684\u6587\u4ef6\u5939\u505a\u6210\u4e86yum\u6e90 \u65b9\u5f0f\u4e00: step1: \u91c7\u96c6\u4e00\u7cfb\u5217\u76f8\u5173\u7684\u8f6f\u4ef6\u5305\u653e\u5728\u672c\u5730\u67d0\u4e00\u4e2a\u76ee\u5f55\u4e0b; step2: yum install createrepo -y createrepo \u76ee\u5f55\u8def\u5f84 -- \u521b\u5efa\u4ed3\u5e93,\u4f1a\u5728\u8be5\u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a\u540d\u4e3arepodata\u7684\u6587\u4ef6\u5939..\u7528\u4e8e\u5b58\u653e\u4f9d\u8d56\u5173\u7cfb. step3: \u4fee\u6539\u914d\u7f6e vim /etc/yum.repo.d/\u4ed3\u5e93\u540d.repo --- \u5fc5\u987b\u4ee5 .repo \u7ed3\u5c3e \u65b9\u5f0f\u4e8c: \u5c06\u955c\u50cf\u6587\u4ef6\u4f5c\u4e3a\u672c\u5730\u6e90 2> \u7f51\u7edc\u6e90: base\u57fa\u7840\u6e90 -- \u653e\u7f6e\u7684\u662f\u4e00\u4e9b\u5e38\u7528\u7684\u8f6f\u4ef6\u5305; epel\u6269\u5c55\u6e90 -- \u653e\u7f6e\u7684\u662f\u4e00\u4e9b\u6269\u5c55/\u989d\u5916\u7684\u8f6f\u4ef6\u5305; \u4e0e\u670d\u52a1\u76f8\u5173\u7684\u6e90(\u5b98\u7f51) -- \u67d0\u4e00\u4e2a\u8f6f\u4ef6\u5305\u6240\u5728\u5b98\u7f51\u63d0\u4f9b\u7684\u6e90.. eg: nginx\u5b98\u7f51 \u7684\u8f6f\u4ef6\u5305\u6e90 \u6ce8\u610f,\u80fd\u4f5c\u4e3ayum\u4ed3\u5e93\u5fc5\u987b\u5177\u5907\u4e24\u4e2a\u524d\u63d0: \u8be5\u76ee\u5f55\u4e0b\u5b58\u653e\u4e86\u6240\u6709\u76f8\u5173\u7684\u8f6f\u4ef6\u5305 ; \u8be5\u76ee\u5f55\u4e0b\u5fc5\u987b\u6709\u4e00\u4e2a\u6587\u4ef6\u5939repodata\u8bb0\u5f55\u8be5\u76ee\u5f55\u6240\u5305\u542b\u8f6f\u4ef6\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb..\u4fbf\u4e8eyum\u89e3\u51b3\u4f9d\u8d56\u6027\u95ee\u9898.","title":"yum\u6e90\u5206\u7c7b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_3","text":"","title":"\u955c\u50cf\u6587\u4ef6\u4f5c\u4e3a\u672c\u5730\u6e90"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#step1","text":"\u5e72\u6389\u7cfb\u7edf\u9ed8\u8ba4\u7684yum\u6e90 \"\"\" `/etc/yum.repos.d/`\u76ee\u5f55\u4e0b\u5168\u662f\u4ee5`.repo`\u7ed3\u5c3e\u7684yum\u4ed3\u5e93\u914d\u7f6e\u6587\u4ef6.. yum\u547d\u4ee4\u5728\u8fd0\u884c\u65f6\u4f1a\u53bb\u68c0\u7d22\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6.. \"\"\" [ root@localhost ~ ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls CentOS-Base.repo CentOS-Debuginfo.repo CentOS-Media.repo CentOS-Vault.repo CentOS-CR.repo CentOS-fasttrack.repo CentOS-Sources.repo CentOS-x86_64-kernel.repo \"\"\" \u6211\u4eec\u901a\u5e38\u4e0d\u4f1a\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u7684\u8fd9\u4e9byum\u4ed3\u5e93 \u4f46\u5220\u9664\u4e0d\u662f\u597d\u4e60\u60ef.. \u6211\u4eec\u9009\u62e9\u4f7f\u7528mv\u547d\u4ee4\u79fb\u52a8\u4e0b.\u8ba9yum\u547d\u4ee4\u627e\u4e0d\u5230\u5c31\u53ef\u4ee5\u5566. Ps: mv\u540e,`yum list`\u8fd8\u6709\u7ed3\u679c,\u5217\u51fa\u7684\u53ea\u662f\u5df2\u7ecf\u5b89\u88c5\u4e86\u7684\u8f6f\u4ef6\u5305.. \u82e5\u5b89\u88c5\u672a\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u80af\u5b9a\u662f\u5b89\u88c5\u4e0d\u4e86\u7684!! \"\"\" [ root@localhost yum.repos.d ] # mkdir bak ## \u5728yum.repos.d\u76ee\u5f55\u4e0b\u6267\u884c\u547d\u4ee4 `mv bak/* .` \u5c31\u53ef\u4ee5\u8fd8\u539f\u56de\u6765\u5566 [ root@localhost yum.repos.d ] # mv *.repo bak/ [ root@localhost yum.repos.d ] # ls bak [ root@localhost yum.repos.d ] # pwd /etc/yum.repos.d [ root@localhost yum.repos.d ] # yum repolist \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile repolist: 0 ## \u9a8c\u8bc1\u7ed3\u679c\u4e0d\u4e3a0\u7684\u8bdd yum clean all \u6e05\u9664\u4e0b\u5143\u6570\u636e\u7f13\u5b58","title":"step1: \u51c6\u5907\u5de5\u4f5c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#step2","text":"\u8be6\u89c1 10_\u8f6f\u4ef6\u5305\u7ba1\u7406\u4e4brpm.md \u4e2d\u6302\u8f7d\u955c\u50cf\u8fd9\u4e00\u90e8\u5206\u5185\u5bb9.. [ root@localhost opt ] # df \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 devtmpfs 480924 0 480924 0 % /dev tmpfs 497820 0 497820 0 % /dev/shm tmpfs 497820 27432 470388 6 % /run tmpfs 497820 0 497820 0 % /sys/fs/cgroup /dev/mapper/centos-root 17811456 5243408 12568048 30 % / /dev/sda1 1038336 258412 779924 25 % /boot tmpfs 99564 36 99528 1 % /run/user/0 tmpfs 99564 0 99564 0 % /run/user/1001 /dev/sr0 4600876 4600876 0 100 % /opt [ root@localhost opt ] # ls CentOS_BuildTag EULA images LiveOS repodata RPM-GPG-KEY-CentOS-Testing-7 EFI GPL isolinux Packages RPM-GPG-KEY-CentOS-7 TRANS.TBL","title":"step2: \u6302\u8f7d\u955c\u50cf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#step3-repo","text":"\u4ed3\u5e93\u914d\u7f6e\u6587\u4ef6\u53eb\u5565\u540d\u5e76\u4e0d\u91cd\u8981,\u4f46\u540e\u7f00\u5fc5\u987b\u5f97\u662f .repo \u4ed3\u5e93\u914d\u7f6e\u6587\u4ef6\u91cc\u7684baseurl\u5c5e\u6027\u503c \u6307\u5b9a\u5230repodata\u6587\u4ef6\u5939\u7684\u7236\u4eb2\u76ee\u5f55\u5373\u53ef ..\u8ddfrpm\u5305\u5728\u54ea\u65e0\u5173.. \u56e0\u4e3ayum\u547d\u4ee4\u5728\u6267\u884c\u65f6,\u4f1a\u901a\u8fc7repodata\u91cc\u9762\u7684\u6570\u636e\u6765\u627e\u5230\u8f6f\u4ef6\u5305\u7684\u4f4d\u7f6e\u53ca\u76f8\u5173\u4f9d\u8d56.. [ root@localhost yum.repos.d ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls bak [ root@localhost yum.repos.d ] # vim local.repo \"\"\" [local] # \u4ed3\u5e93\u7684\u5b9e\u9645\u540d\u5b57,\u4efb\u610f name=\" this is local repo \" # \u4ed3\u5e93\u7684\u63cf\u8ff0,\u4efb\u610f baseurl=file:///opt # \u4ed3\u5e93\u4f4d\u7f6e,\u4e00\u822c\u4f1a\u51fa\u73b0\u56db\u79cd\u524d\u7f00 http:// https:// ftp:// file:// enabled=1 # \u542f\u7528\u4ed3\u5e93, \u9ed8\u8ba4enabled=1 \u4e0d\u5199\u4e5f\u53ef\u4ee5 gpgcheck=0 # \u68c0\u67e5\u5b89\u88c5\u7684rpm\u662f\u5426\u662f\u5408\u6cd5\u7684,\u901a\u5e38\u8bbe\u7f6e\u4e3a0,0\u8868\u793a\u4e0d\u68c0\u9a8c Ps: \u914d\u7f6e\u672c\u5730\u6e90,`file://`\u662f\u56fa\u5b9a\u5f00\u5934,\u4ee3\u8868\u662f\u4ece\u672c\u5730\u627e.\u5f80\u540e\u518d\u8ddfrepodata\u7684\u7236\u7ea7\u76ee\u5f55\u8def\u5f84 `file:///opt` \"\"\" [ root@localhost yum.repos.d ] # cat local.repo [ local ] name = \"this is local repo\" baseurl = file:///opt enabled = 1 gpgcheck = 0","title":"step3: \u7f16\u8f91repo\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#step4","text":"## \u8fdb\u884c\u9a8c\u8bc1 [ root@localhost ~ ] # yum repolist \u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks Loading mirror speeds from cached hostfile local | 3 .6 kB 00 :00:00 ( 1 /2 ) : local/group_gz | 153 kB 00 :00:00 ( 2 /2 ) : local/primary_db | 3 .3 MB 00 :00:00 \u6e90\u6807\u8bc6 \u6e90\u540d\u79f0 \u72b6\u6001 local \"this is local repo\" 4 ,070 repolist: 4 ,070","title":"step4: \u67e5\u8be2\u53ef\u7528\u4ed3\u5e93"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#yum_2","text":"","title":"\u5f00\u6e90\u7684yum\u6e90/\u7f51\u7edc\u6e90"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#base","text":"\"\"\"\u25b2 Base\u57fa\u7840\u6e90 \u963f\u91cc\u4e91\u7684Base\u57fa\u7840\u6e90: `wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo` 163\u7684Base\u57fa\u7840\u6e90: `wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo` \"\"\" [ root@localhost ~ ] # wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo ... ... ... 2022 -08-11 06 :42:38 ( 54 .8 KB/s ) - \u5df2\u4fdd\u5b58 \u201c/etc/yum.repos.d/CentOS-Base.repo\u201d [ 2523 /2523 ]) [ root@localhost ~ ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls bak CentOS-Base.repo local.repo","title":"Base\u57fa\u7840\u6e90"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#epel","text":"EPEL\u662f\u7531 Fedora \u793e\u533a\u6253\u9020, \u4e3a RHEL \u53ca\u884d\u751f\u53d1\u884c\u7248\u5982 CentOS\u3001Scientific Linux \u7b49\u63d0\u4f9b\u9ad8\u8d28\u91cf\u8f6f\u4ef6\u5305\u7684\u9879\u76ee. \u88c5\u4e0a\u4e86 EPEL\u4e4b\u540e,\u5c31\u76f8\u5f53\u4e8e\u6dfb\u52a0\u4e86\u4e00\u4e2a\u7b2c\u4e09\u65b9\u6e90. \u4f46\u63d0\u4f9b\u7684\u7248\u672c\u5f80\u5f80\u662f\u5f88\u6ede\u540e\u7684,\u56e0\u4e3a\u5b89\u5168\u7a33\u5b9a\u662f\u91cd\u70b9.. \"\"\"\u25b2 epel\u6269\u5c55\u6e90 \u963f\u91cc\u4e91\u7684epel\u6269\u5c55\u6e90\u5982\u4e0b:(\u7528wget\u547d\u4ee4\u4e5f\u53ef\u4ee5) `curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo` \u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5epel-release\u8f6f\u4ef6\u5305\u6765\u81ea\u52a8\u751f\u6210\u6269\u5c55\u6e90: `yum install epel-release -y` \"\"\" [ root@localhost yum.repos.d ] # yum install epel-release -y ... ... ... [ root@localhost yum.repos.d ] # ls bak CentOS-Base.repo epel.repo epel-testing.repo local.repo","title":"epel\u6269\u5c55\u6e90"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#nginx","text":"# \u53ef\u4ee5\u770b\u5230epel\u6269\u5c55\u6e90\u91cc\u4e5f\u63d0\u4f9b\u4e86nginx\u7684\u8f6f\u4ef6\u5305 # \u4f46\u7248\u672c1.20.1\u4e5f\u4e0d\u662fnginx\u7a33\u5b9a\u7248\u6700\u65b0\u7684(epel\u6e90\u63d0\u4f9b\u7684\u7248\u672c\u5f80\u5f80\u4f1a\u6bd4\u8f83\u6ede\u540e \u5f53\u524d\u5b98\u7f51\u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\u662f1.22.0).. [ root@localhost yum.repos.d ] # yum list | grep nginx.x86_64 collectd-nginx.x86_64 5 .8.1-1.el7 epel nginx.x86_64 1 :1.20.1-9.el7 epel pcp-pmda-nginx.x86_64 4 .3.2-13.el7_9 updates sympa-nginx.x86_64 6 .2.68-1.el7 epel \u4ece\u5b98\u7f51\u914d\u7f6enginx\u7684rpm\u6e90\u7684\u6b65\u9aa4\u89e3\u6790\u5982\u4e0b: 1> \u8f93\u5165\u7f51\u5740 https://nginx.org/ ,\u70b9\u51fb\u53f3\u8fb9\u680f\u4e2d\u7684 download 2> Mainline version \u5b98\u65b9\u7ef4\u62a4\u7248\u672c; Stable version \u7a33\u5b9a\u7248\u672c; Legacy versions\u5386\u53f2\u7248\u672c; Source Code \u6e90\u4ee3\u7801; Pre-Built Packages \u9884\u6784\u5efa\u5305.. \u70b9\u51fb Pre-Built Packages Mainline\u3001Stable\u3001Legacy\u4e0b\u8f7d\u7684\u90fd\u662f\u6e90\u7801\u5305!! 3> \u5f80\u4e0b\u6ed1, \u76f4\u5230 RHEL/CentOS \u5c0f\u8282.. \u6309\u7167\u5b98\u65b9\u63d0\u793a\u8fdb\u884c\u64cd\u4f5c.. \"\"\" [nginx-stable] \u7a33\u5b9a\u7248\u672c; [nginx-mainline] \u7ef4\u62a4\u7248\u672c \u6211\u4eec\u901a\u5e38\u4f1a\u4f7f\u7528\u7a33\u5b9a\u7248\u672c!\u6240\u4ee5\u524d\u8005enabled\u7684\u503c\u4e3a1,\u540e\u8005\u4e3a0. http://nginx.org/packages/centos/ $releasever / $basearch / $releasever \u7cfb\u7edf\u7684\u53d1\u884c\u7248\u672c(\u5f53\u524d\u73af\u5883\u662f7) $basearch \u67b6\u6784(\u5f53\u524d\u73af\u5883\u662fx86_64) \u4e24\u4e2a\u53d8\u91cf\u90fd\u6839\u636e\u6240\u5728\u5e73\u53f0\u4e0d\u540c\u52a8\u6001\u83b7\u53d6\u503c!!! Ps:\u8f93\u5165\u7f51\u5740`http://nginx.org/packages/centos/7/x86_64/`\u53ef\u4ee5\u53d1\u73b0\u5f53\u524d\u8def\u5f84\u4e0b\u6709repodata\u6587\u4ef6\u5939!!! \u4f50\u8bc1\u4e86 baseurl\u5c5e\u6027\u503c\u6307\u5b9a\u5230repodata\u6587\u4ef6\u5939\u7684\u7236\u4eb2\u76ee\u5f55\u5373\u53ef \u8fd9\u4e00\u7ed3\u8bba!!! \"\"\" [ root@localhost yum.repos.d ] # ls bak CentOS-Base.repo epel.repo epel-testing.repo local.repo [ root@localhost yum.repos.d ] # vim nginx.repo [ root@localhost yum.repos.d ] # cat nginx.repo [ nginx-stable ] name = nginx stable repo baseurl = http://nginx.org/packages/centos/ $releasever / $basearch / gpgcheck = 1 enabled = 1 gpgkey = https://nginx.org/keys/nginx_signinz.key module_hotfixes = true [ nginx-mainline ] name = nginx mainline repo baseurl = http://nginx.org/packages/mainline/centos/ $releasever / $basearch / gpgcheck = 1 enabled = 0 gpgkey = https://nginx.org/keys/nginx_signing.key module_hotfixes = true [ root@localhost yum.repos.d ] # [ root@localhost yum.repos.d ] # yum repolist | grep nginx nginx-stable/7/x86_64 nginx stable repo 280 \"\"\" \u82e5\u5b89\u88c5nginx\u8fc7\u7a0b\u4e2d,\u51fa\u9519\u63d0\u793a \u83b7\u53d6 GPG \u5bc6\u94a5\u5931\u8d25 \u6267\u884c\u547d\u4ee4`rpm --import https://nginx.org/keys/nginx_signing.key`\u540e\u518d\u5b89\u88c5.. \"\"\" yum remove nginx-* -y ## \u4fdd\u6301\u73af\u5883\u7684\u5e72\u51c0 yum install nginx -y ## \u5b89\u88c5\u7684\u662fnginx\u5b98\u7f51\u6e90\u91cc\u7684(\u56e0\u4e3anginx\u5b98\u7f51\u6e90\u91cc\u7684\u7248\u672c\u6bd4epel\u6e90\u91cc\u7684\u9ad8) \u8865\u5145: \u6267\u884c yum install nginx-* -y , \u8bd5\u56fe\u4e0b\u8f7dnginx\u5b98\u65b9\u6e90\u91cc\u76f8\u5173\u5b89\u88c5\u5305, \u5728\u6b64\u8fc7\u7a0b\u4e2d\u62a5\u9519\u7684\u89e3\u51b3... \u7b80\u5355\u6765\u8bf4,epel\u6e90\u4e0e\u5b98\u65b9\u6e90\u51b2\u7a81,\u5e72\u6389epel\u6e90\u518d\u5b89\u88c5; \u5b98\u65b9\u6e90\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u7f3a\u5c11\u7684\u4f9d\u8d56\u901a\u8fc7epel\u6e90\u4e0b\u8f7d\u5b89\u88c5..Hhhh. \"\"\" \u5f53\u524d\u6709\u963f\u91cc\u4e91\u7684Base\u57fa\u7840\u6e90\u3001\u963f\u91cc\u4e91\u7684epel\u6e90\u3001\u955c\u50cf\u6587\u4ef6\u7684\u672c\u5730\u6e90\u3001nginx\u7684\u5b98\u65b9\u6e90 \"\"\" [ root@localhost yum.repos.d ] # ls bak bak1 CentOS-Base.repo epel.repo epel.repo.rpmsave local.repo nginx.repo \"\"\"\u25b2 \u505a\u4e86\u4e2a\u5b9e\u9a8c,\u53ea\u7559\u4e0bnginx\u7684\u5b98\u65b9\u6e90 (1)\u6267\u884c`yum install nginx -y`\u547d\u4ee4 \u53ea\u4e0b\u8f7d\u4e86\u5b89\u88c5nginx-1.22.0-1.el7.ngx.x86_64.rpm\u5305.. \u4e0d\u662f\u5e9f\u8bdd\u561b,\u6307\u5b9a\u4e0b\u8f7d\u7684\u8f6f\u4ef6\u5305\u540d\u5c31\u662fnginx,\u53ea\u4e0d\u8fc7\u8be5\u8f6f\u4ef6\u5305\u6ca1\u6709\u4f9d\u8d56\u7f62\u4e86.. (2))\u6267\u884c`yum install nginx* -y`\u547d\u4ee4 \u7406\u8bba\u4e0a\u4f1a\u4e0b\u8f7dnginx\u7684\u5b98\u65b9\u6e90\u4e2d\u6240\u6709\u7684\u6700\u65b0\u7248\u672c\u7684rpm\u5305 (\u4e3e\u4e2a\u62bd\u8c61\u7684\u4f8b\u5b50 \u6709\u56db\u4e2arpm\u5305 A-1.0.1 A.1.0.2 B-1.1.2 B-1.1.3 \u6700\u7ec8\u53ea\u4f1a\u4e0b\u8f7dA.1.0.2\u548cB-1.1.3) \u8bd5\u7740\u6267\u884c\u547d\u4ee4,\u4f46\u4e2d\u9014\u62a5\u9519\u5566!!\u62a5\u9519\u5982\u4e0b: `nginx-nr-agent-2.0.0-12.el7.ngx.noarch (nginx-stable)\u8f6f\u4ef6\u5305\u9700\u8981\u4f9d\u8d56 python-daemon` python-daemon\u5305nginx\u7684\u5b98\u65b9\u6e90\u6ca1\u6709.. (\u53ef\u4ee5\u8bbf\u95eehttp://nginx.org/packages/centos/7/x86_64/RPMS/,\u4e0b\u9762\u5168\u662fnginx\u5f00\u5934\u7684rpm\u5305,\u6ca1\u6709\u5176\u4ed6\u7684) \u89e3\u51b3\u7684\u8bdd\u5c31\u9700\u8981epel\u6269\u5c55\u6e90\u7684\u5e2e\u5fd9.. \"\"\" \"\"\"\u25b2 \u4e0d\u52a8yum\u6e90 \u5305\u542bepel\u6e90\u548cnginx\u5b98\u65b9\u6e90 \"\"\" \u6267\u884c ` yum install nginx* -y ` \u547d\u4ee4,\u4f9d\u65e7\u4f1a\u4e0b\u8f7dnginx\u5b98\u65b9\u6e90\u90a3\u4e2a\u8f6f\u4ef6\u5305,\u62a5\u90a3\u4e2a\u9519\u8bef,\u6240\u4ee5\u5148\u89e3\u51b3\u4e0b.. ` yum install python-daemon ` \u901a\u8fc7epel\u6269\u5c55\u6e90\u89e3\u51b3\u4e86\u4f9d\u8d56\u5305\u7684\u4e0b\u8f7d\u5b89\u88c5 \u7ee7\u7eed\u6ee1\u6000\u671f\u671b\u7684\u6267\u884c ` yum install nginx* -y ` \u53d1\u73b0,\u51b2\u7a81\u5566!! epel\u6e90\u91cc\u7684\u8f6f\u4ef6\u5305\u7248\u672c\u8ddfnginx\u5b98\u65b9\u6e90\u91cc\u8f6f\u4ef6\u5305\u7248\u672c\u4f9d\u8d56\u76f8\u5173\u51b2\u7a81\u5bfc\u81f4\u7684..\u963f\u5df4\u963f\u5df4,\u53cd\u6b63\u5c31\u662f\u51b2\u7a81\u5566. \u89e3\u51b3: [ root@localhost ~ ] # cd /etc/yum.repos.d/ [ root@localhost yum.repos.d ] # ls bak bak1 CentOS-Base.repo epel.repo epel.repo.rpmsave local.repo nginx.repo ## \u5176\u5b9e\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 `yum-config-manager --disable \u4ed3\u5e93\u540d` \u5173\u95ed\u6307\u5b9a\u4ed3\u5e93.. [ root@localhost yum.repos.d ] # mv epel* bak1 [ root@localhost yum.repos.d ] # ls bak bak1 CentOS-Base.repo local.repo nginx.repo \u518d\u6267\u884c ` yum install nginx* -y ` \u5c06nginx\u5b98\u65b9\u6e90\u91cc\u7684\u8f6f\u4ef6\u5305\u5168\u90e8\u4e0b\u8f7d\u4e0b\u6765.","title":"\u914d\u7f6enginx\u5b98\u7f51\u6e90"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#yum_3","text":"\u524d\u9762\u6211\u4eec\u5b9e\u73b0\u4e86\u5c06\u955c\u50cf\u6587\u4ef6\u4f5c\u4e3a\u672c\u5730\u6e90,\u56e0\u4e3a\u955c\u50cf\u6587\u4ef6\u91cc\u6709repodata\u6587\u4ef6\u5939,\u6240\u4ee5\u7701\u53bb\u4e86\u4e00\u4e9b\u6b65\u9aa4.. \u56e0\u4e3a\u5236\u4f5c\u4e2ayum\u672c\u5730\u6e90\u8fd9\u662f\u4e2a \u91cd\u70b9 ,\u6240\u4ee5\u8fd9\u91cc\u5355\u72ec\u8fdb\u884c\u9610\u8ff0! \u5728\u751f\u4ea7\u73af\u5883\u4e2d,\u901a\u5e38\u4f1a\u81ea\u5df1\u505a\u4e00\u4e2ayum\u6e90!! \u4fdd\u8bc1\u96c6\u7fa4\u4e2d\u6bcf\u53f0\u673a\u5668\u7684\u8f6f\u4ef6\u5305\u7248\u672c\u7684\u9ad8\u5ea6\u4e00\u81f4! \u96c6\u7fa4\u7684\u6bcf\u53f0\u673a\u5b50\u7684\u7f51\u7edc\u6e90\u4e00\u6837\u4e5f\u4e0d\u597d\u4f7f.. \u56e0\u4e3a\u7f51\u7edc\u6e90\u5728\u522b\u4e2a\u624b\u4e2d,\u4e00\u6539\u52a8.. \u6dfb\u52a0\u65b0\u673a\u5b50\u7684\u65f6\u5019, \u5c31\u5bb9\u6613\u51fa\u95ee\u9898. \u524d\u6587\u5728yum\u547d\u4ee4\u90a3\u91cc\u63d0\u5230\u4e86\u5143\u6570\u636e\u7f13\u5b58\u8ddf\u8f6f\u4ef6\u5305\u5185\u5bb9\u7684\u7f13\u5b58.. \u5c06 /etc/yum.conf \u7684keepcache\u5c5e\u6027\u503c\u6539\u4e3a1\u540e, \u8f6f\u4ef6\u5305\u5b89\u88c5\u5b8c\u6210yum\u4e0d\u518d\u81ea\u52a8\u5220\u9664\u8f6f\u4ef6\u5305,\u4f1a\u7f13\u5b58\u5230\u6307\u5b9a\u8def\u5f84.. [ root@localhost yum.repos.d ] # vim /etc/yum.conf [ main ] cachedir = /var/cache/yum/ $basearch / $releasever ## -- \u9ed8\u8ba4\u7684\u8f6f\u4ef6\u5305\u7f13\u5b58\u8def\u5f84 \u53ef\u6539 keepcache = 1 ... ... ... \"\"\" \u672c\u5730\u6e90\u7684\u597d\u5904:\u5c06\u8f6f\u4ef6\u5305\u7684\u7248\u672c\u7262\u7262\u7684\u63a7\u5236\u5230\u4e86\u81ea\u5df1\u7684\u624b\u91cc;\u901f\u5ea6\u4e5f\u4f1a\u5feb\u4e00\u4e9b. \"\"\" \u5047\u8bbe\u8981\u5728\u4e00\u5957\u6d4b\u8bd5\u73af\u5883\u4e2d\u8981\u90e8\u7f72k8s docker\u96c6\u7fa4\u67b6\u6784..\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b: 1.\u7ed9\u6d4b\u8bd5\u73af\u5883\u4e2d\u6bcf\u53f0\u673a\u5b50\u7528\u540c\u4e00\u4e2a\u955c\u50cf\u5b89\u88c5OS\u7cfb\u7edf.\u4fdd\u8bc1os\u7684\u4e00\u81f4. 2.\u521a\u5b89\u88c5\u5b8cos\u7cfb\u7edf\u65f6,\u6bcf\u53f0\u673a\u5b50\u90fd\u7edf\u4e00\u6267\u884c yum update -y \u64cd\u4f5c.. 3.\u5c06\u6d4b\u8bd5\u73af\u5883\u4e2d\u7684\u6bcf\u53f0\u673a\u5b50/\u6bcf\u4e2a\u8282\u70b9\u7684keepcache\u5c5e\u6027\u503c\u90fd\u8bbe\u7f6e\u4e3a1,\u5373\u5f00\u542f\u8f6f\u4ef6\u5305\u7f13\u5b58. rm -rf /var/cache/yum/* -- \u4fdd\u6301\u73af\u5883\u7684\u5e72\u51c0 vim /etc/yum.conf \u8bbe\u7f6e keepcache=1 4.\u914d\u7f6e\u7f51\u7edc\u6e90(bash+epel+\u5b98\u65b9),\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u4f1a\u5168\u90e8\u7f13\u5b58\u5230\u672c\u5730.. \u7b49\u6574\u5957\u6d4b\u8bd5\u73af\u5883\u90fd\u8c03\u8bd5ok\u5566.. 5.\u5c06\u6d4b\u8bd5\u73af\u5883\u4e2d\u6bcf\u53f0\u673a\u5b50\u4e0a\u7f13\u5b58\u597d\u7684\u8f6f\u4ef6\u5305\u5168\u90fd\u91c7\u96c6\u5230\u4e00\u8d77. \u5047\u8bbe\u653e\u5230\u540d\u4e3a/soft\u7684\u6587\u4ef6\u5939\u4e0b,\u6709\u91cd\u590d\u7684\u5c31\u8986\u76d6. \u4ee5\u4e00\u53f0\u673a\u5b50\u4e3a\u4f8b.. find /var/cache/yum -type f -name \"*.rpm\" | xargs -I {} mv {} /soft/ 6.\u6700\u540e\u9488\u5bf9\u8fd9\u4e2a\u6587\u4ef6\u5939\u505a createrepo /soft \u5efa\u7acb\u4f9d\u8d56\u6027\u5173\u7cfb. \u5728 /soft \u4e0b\u4f1a\u751f\u6210 repodata \u6587\u4ef6\u5939.. \u540e\u7eed\u5728\u5b8c\u6210yum\u672c\u5730\u6e90\u5171\u4eab\u540e,\u5728\u7ebf\u4e0a\u7684\u673a\u5b50 ` /etc/yum.repos.d/ ` \u4e0b\u914d\u7f6e .repo\u7ed3\u5c3e\u7684\u672c\u5730\u6e90.. ( \u914d\u7f6e\u65f6\u6ce8\u610frepodata\u76ee\u5f55\u7684\u4f4d\u7f6e\u4ee5\u4fbf\u4e8e\u8bbe\u7f6e\u6b63\u786e\u7684baseurl\u5c5e\u6027\u503c ) /soft\u6587\u4ef6\u5939\u4f5c\u4e3a\u7ebf\u4e0a\u73af\u5883\u7684\u4e00\u4e2ayum\u6e90!!!\u4e0d\u8981\u8f7b\u6613\u5347\u7ea7,\u4e0d\u8981\u6ee5\u7528yum\u6e90,\u8fd9\u6837\u53ef\u4ee5\u4e25\u683c\u63a7\u5236\u597d\u5404\u4e2a\u670d\u52a1\u7684\u7248\u672c","title":"\u5236\u4f5cyum\u672c\u5730\u6e90"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_4","text":"\u6709\u4e24\u79cd\u65b9\u5f0f http:// \u548c ftp:// \u5b8c\u6210\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u4e0b\u8f7d, \u8fd9\u91cc\u4ee5ftp\u4e3a\u4f8b.. Ps: http\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae; ftp\u6587\u4ef6\u4f20\u8f93\u534f\u8bae","title":"\u672c\u5730\u6e90\u5171\u4eab"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_5","text":"\"\"\"\u73af\u5883\u51c6\u5907 \"\"\" [ root@localhost ~ ] # systemctl stop firewalld ## -- \u5173\u95ed\u9632\u706b\u5899 [ root@localhost ~ ] # systemctl disable firewalld ## -- \u5f00\u673a\u4e0d\u542f\u52a8\u9632\u706b\u5899 [ root@localhost ~ ] # setenforce 0 ## -- \u4e34\u65f6\u5173\u95edSElinux \u914d\u7f6e\u6587\u4ef6\u91cc\u662f\u6ca1\u6709\u4fee\u6539\u7684! setenforce: SELinux is disabled ## -- \u8fd9\u91cc\u63d0\u793aselinux\u76ee\u524d\u662f\u7981\u7528\u72b6\u6001,\u4e0d\u5fc5\u5173\u95ed ## \u5f53\u7136\u53ef\u4ee5\u7528 vim /etc/sysconfig/selinux \u5728\u6587\u4ef6\u4e2d\u4fee\u6539 SELINUX=disabled [ root@localhost ~ ] # sed -i 's#^SELINUX=.*#SELINUX=disabled#g' /etc/selinux/config \"\"\"\u5b89\u88c5ftp\u670d\u52a1 \"\"\" ## \u5728\u6302\u8f7d\u7684\u955c\u50cf\u6587\u4ef6\u91cc\u5c31\u6709vsftpd ## \u5f53\u7136\u53ef\u901a\u8fc7\u547d\u4ee4 yum install vsftpd -y \u4e0b\u8f7d\u5b89\u88c5 [ root@localhost ~ ] # rpm -ivh /opt/Packages/vsftpd-3.0.2-28.el7.x86_64.rpm \u51c6\u5907\u4e2d... ################################# [100%] \u6b63\u5728\u5347\u7ea7/\u5b89\u88c5... 1 :vsftpd-3.0.2-28.el7 ################################# [100%] [ root@localhost ~ ] # systemctl start vsftpd ## -- \u5f00\u542fftp\u670d\u52a1 [ root@localhost ~ ] # systemctl status vsftpd ## -- \u67e5\u770bftp\u670d\u52a1\u72b6\u6001 \u25cf vsftpd.service - Vsftpd ftp daemon Loaded: loaded ( /usr/lib/systemd/system/vsftpd.service ; disabled ; ... Active: active ( running ) since \u56db 2022 -08-11 15 :13:49 CST ; 8s ago ... ... ... [ root@localhost ~ ] # systemctl enable vsftpd ## -- \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\u52a8 Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service. \"\"\"\u5236\u4f5cyum\u6e90 \"\"\" \u5728\u524d\u9762\u6211\u4eec\u6210\u529f\u6267\u884c ` yum install nginx* -y ` \u5c06nginx\u5b98\u65b9\u6e90\u91cc\u7684\u8f6f\u4ef6\u5305\u5168\u90e8\u4e0b\u8f7d\u4e0b\u6765. \u5e76\u6210\u529f\u7f13\u5b58\u5230\u4e86\u8def\u5f84 ` /var/cache/yum ` \u4e0b. \u5728\u6839\u76ee\u5f55\u4e0b\u5efa\u7acb ` mkdir /soft ` \u6587\u4ef6\u5939 \u6267\u884c ` find /var/cache/yum -type f -name \"*.rpm\" | xargs -I {} mv {} /soft/ ` \u547d\u4ee4 \u6210\u529f\u5c06\u7f13\u5b58\u7684\u8f6f\u4ef6\u5305\u91c7\u96c6\u5230\u4e86 /soft\u76ee\u5f55\u4e0b \u6267\u884c ` createrepo /soft ` \u547d\u4ee4\u5efa\u7acb\u4f9d\u8d56\u6027\u5173\u7cfb.\u5728 ` /soft ` \u4e0b\u4f1a\u751f\u6210\u4e86 ` repodata ` \u6587\u4ef6\u5939. \"\"\"ftp\u670d\u52a1\u5171\u4eab\u6587\u4ef6\u5939 !!! ftp://172.16.150.131 \u6307\u5411\u7684\u5c31\u662f /var/ftp \"\"\" ## \u5c06/soft\u6587\u4ef6\u5939\u79fb\u52a8\u5230ftp\u670d\u52a1\u81ea\u5e26\u7684\u5171\u4eab\u6587\u4ef6\u5939\u91cc \u672c\u8d28\u5c31\u662f\u901a\u8fc7\u5957\u63a5\u5b57\u7a0b\u5e8f\u5171\u4eab ## \u5b9e\u9645\u4e0a\u4e25\u8c28\u70b9,\u7f13\u5b58\u7684\u8f6f\u4ef6\u5305\u901a\u8fc7find\u547d\u4ee4\u627e\u5230\u540e\u5e94\u8be5xargs\u5230/var/ftp/pub\u76ee\u5f55\u4e0b [ root@localhost ~ ] # mv /soft/ /var/ftp [ root@localhost ~ ] # ls /var/ftp pub soft [ root@localhost ~ ] # ifconfig ens33 | grep inet inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link>","title":"\u670d\u52a1\u7aef\u4e0a\u7684\u64cd\u4f5c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_6","text":"\u4e3b\u8981\u4e24\u70b9, \u5ba2\u6237\u7aef\u8981\u8ddf\u670d\u52a1\u7aef\u7684OS\u7248\u672c\u4ee5\u53ca\u67b6\u6784\u4e00\u81f4;ftp\u670d\u52a1\u8981ping\u901a!!! \"\"\" \u540c\u7406,\u5173\u9632\u706b\u5899\u5173selinux ping\u4e00\u4e0b\u670d\u52a1\u7aef\u7684ip\u5730\u5740,\u4fdd\u8bc1\u7f51\u7edc\u7545\u901a!!!\u8fd9\u5f88\u91cd\u8981. (\u5b9e\u9645\u4e0a\u56e0\u4e3avm\u865a\u62df\u673a\u4e0e\u4e3b\u673a\u6865\u63a5\u6a21\u5f0f\u7684\u7f18\u6545,\u80fdping\u901a \u5728\u540c\u4e00\u4e2a\u7f51\u6bb5\u5e94\u8be5\u80fd\u4e92ping \u5728\u6b64\u4e0d\u6df1\u7a76\u5566) \"\"\" One_Piece@DCdeMacBook-Air ~ % ping 172 .16.150.131 PING 172 .16.150.131 ( 172 .16.150.131 ) : 56 data bytes 64 bytes from 172 .16.150.131: icmp_seq = 0 ttl = 64 time = 0 .650 ms 64 bytes from 172 .16.150.131: icmp_seq = 1 ttl = 64 time = 0 .604 ms 64 bytes from 172 .16.150.131: icmp_seq = 2 ttl = 64 time = 0 .648 ms ^C --- 172 .16.150.131 ping statistics --- 3 packets transmitted, 3 packets received, 0 .0% packet loss round-trip min/avg/max/stddev = 0 .604/0.634/0.650/0.021 ms ` cd /etc/yum.repos.d/ ` ` vim ftp.repo ` \u5199\u5165\u4ee5\u4e0b\u5185\u5bb9.. \u5c31\u53ef\u4ee5\u4f7f\u7528yum\u547d\u4ee4\u4f7f\u7528\u8be5\u6e90\u91cc\u9762\u7684\u5305\u5566 [ ftp_repo ] name = This is Ftp Share Repo baseurl = ftp://172.16.150.131/soft ## \u8be5\u8def\u5f84\u4e0b\u6709\u4e2arepodata\u6587\u4ef6\u5939 enabled = 1 gpgcheck = 0 \u6b64\u65f6\u8fd9\u53f0\u673a\u5668\u5c31\u53ef\u4ee5\u4f7f\u7528\u5171\u4eab\u7684\u6e90\u5b89\u88c5nginx.. \u4f46\u8981\u6ce8\u610f,\u82e5\u96c6\u7fa4\u4e2d\u7684\u8fd9\u53f0\u673a\u5668\u8ddf\u5171\u4eab\u672c\u5730\u6e90\u7684\u90a3\u53f0\u673a\u5668\u7684os\u7248\u672c\u3001\u67b6\u6784\u4e0d\u4e00\u6837\u7684\u8bdd..\u4f1a\u5b89\u88c5\u5931\u8d25!!! \u56e0\u4e3a\u5171\u4eab\u6e90\u7684\u90a3\u53f0\u673a\u5668\u662f\u6839\u636e\u5b83\u81ea\u8eab\u7684\u60c5\u51b5\u7f13\u5b58\u7684\u8f6f\u4ef6\u5305.. $releasever OS\u7248\u672c $basearch \u67b6\u6784","title":"\u5ba2\u6237\u7aef\u4e0a\u7684\u64cd\u4f5c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/11_%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/#_7","text":"\u4ee5nginx\u6e90\u7801\u5305\u7684\u5b89\u88c5\u4e3a\u4f8b, \u4f9d\u6b21\u8fdb\u884c\u4ee5\u4e0b\u6b65\u9aa4: \u25b2 1 > \u5b89\u88c5\u6e90\u7801\u5305\u5bf9\u5e94\u7684\u7f16\u8bd1\u5668\u4ee5\u53ca\u76f8\u5173\u4f9d\u8d56\u5e93 ` yum grouplist ` \u770b\u4e00\u4e0b\u662f\u5426\u652f\u6301\u4e2d\u6587 ` yum groupinstall \"Development tools\" -y ` ; yum groupinstall \"\u5f00\u53d1\u5de5\u5177\" -y \u4fdd\u9669\u8d77\u89c1,\u6015 \"\u5f00\u53d1\u5de5\u5177\" \u91cc\u6ca1\u5305\u542b\u8fd9\u4e9b\u4f9d\u8d56\u5305,\u518d\u6267\u884c\u4e0b\u4e0b\u9762\u4e24\u6761\u547d\u4ee4 yum -y install gcc gcc-c++ autoconf automake make yum -y install zlib zlib-devel openssl openssl-devel pcre pcre-devel \u25b2 2 > \u4e0b\u8f7d\u6e90\u7801\u5305 cd ~ wget https://nginx.org/download/nginx-1.22.0.tar.gz \u25b2 3 > \u89e3\u538b tar xvf nginx-1.22.0.tar.gz -C /tmp/ \u25b2 4 > \u8fdb\u884c\u7f16\u8bd1 -- \u751f\u6210makefile\u6587\u4ef6 cd /tmp/nginx-1.22.0/ # \u8be5\u76ee\u5f55\u4e0b\u6709\u4e2aconfigure\u7a0b\u5e8f\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e \"\"\"./configure \u53c2\u8003\u5730\u5740: https://nginx.org/en/docs/configure.html --prefix \u6307\u5b9a\u5b89\u88c5\u7684\u76ee\u5f55 \u8fd9\u91cc\u6307\u5b9a\u7684\u8def\u5f84\u662f /usr/local/nginx-1.22.0,\u6700\u7ec8\u4f1a\u5728\u6b64\u76ee\u5f55\u4e0b\u5305\u542b\u4e00\u5806\u53ef\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u547d\u4ee4 ... \u8fd9\u513f\u7b3c\u7edf\u7684\u5c06\u6240\u4ee5\u7684\u914d\u7f6e\u90fd\u653e\u5230/usr/local/nginx-1.22.0\u4e0b,\u4e0d\u5206\u90a3\u4e48\u7684\u7ec6\u4e86.. \"\"\" ## \u82e5\u6b64\u547d\u4ee4\u62a5\u9519,\u53ea\u53ef\u80fd\u662f\u56e0\u4e3a\u7f3a\u5c11\u4f9d\u8d56\u5e93 ## \u62a5\u9519\u540e,\u4e00\u5b9a\u8981\u5148\u6267\u884c\u547d\u4ee4 make clean all,\u518d\u89e3\u51b3\u4f9d\u8d56\u5305\u7684\u95ee\u9898 \u4e8e\u6b64\u5f80\u590d,\u76f4\u81f3\u4e0d\u62a5\u9519 [ root@localhost nginx-1.22.0 ] #./configure --prefix=/usr/local/nginx-1.22.0 ... ... ... Configuration summary + using system PCRE library + OpenSSL library is not used + using system zlib library nginx path prefix: \"/usr/local/nginx-1.22.0\" ## -- \u5b89\u88c5\u8def\u5f84 nginx binary file: \"/usr/local/nginx-1.22.0/sbin/nginx\" ## -- nginx\u7a0b\u5e8f nginx modules path: \"/usr/local/nginx-1.22.0/modules\" ## -- \u6a21\u5757\u8def\u5f84 nginx configuration prefix: \"/usr/local/nginx-1.22.0/conf\" ## -- \u914d\u7f6e\u6587\u4ef6 nginx configuration file: \"/usr/local/nginx-1.22.0/conf/nginx.conf\" ## -- \u4e3b\u914d\u7f6e\u6587\u4ef6 nginx pid file: \"/usr/local/nginx-1.22.0/logs/nginx.pid\" ## -- pid nginx error log file: \"/usr/local/nginx-1.22.0/logs/error.log\" ## -- \u9519\u8bef\u65e5\u5fd7 nginx http access log file: \"/usr/local/nginx-1.22.0/logs/access.log\" ## -- \u8bbf\u95ee\u65e5\u5fd7 nginx http client request body temporary files: \"client_body_temp\" ## -- \u4e34\u65f6\u6587\u4ef6 nginx http proxy temporary files: \"proxy_temp\" nginx http fastcgi temporary files: \"fastcgi_temp\" nginx http uwsgi temporary files: \"uwsgi_temp\" nginx http scgi temporary files: \"scgi_temp\" ## \u751f\u6210\u4e86Makefile\u7f16\u8bd1\u6587\u4ef6 [ root@localhost nginx-1.22.0 ] # ls auto CHANGES CHANGES.ru conf configure contrib html LICENSE Makefile man objs README src \u25b2 \u5b89\u88c5 make && make install rm -rf /tmp/nginx-1.22.0/ # \u6e05\u7406\u5b89\u88c5\u5305 \u25b2 \u8fd0\u884c cd /usr/local/nginx-1.22.0 [ root@localhost nginx-1.22.0 ] # ps aux | grep nginx root 75065 0 .0 0 .0 20576 616 ? Ss 18 :33 0 :00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx nobody 75066 0 .0 0 .1 23104 1372 ? S 18 :33 0 :00 nginx: worker process root 75153 0 .0 0 .0 112824 988 pts/0 R+ 18 :35 0 :00 grep --color = auto nginx \u6e90\u7801\u5b89\u88c5\u540e,\u505a\u4e00\u70b9\u70b9\u4f18\u5316! [ root@localhost ~ ] # mkdir /soft/ [ root@localhost ~ ] # ln -s /usr/local/nginx-1.22.0/ /soft/nginx [ root@localhost ~ ] # ll -d /soft/nginx/ drwxr-xr-x 11 root root 151 8\u6708 11 18 :33 /soft/nginx/ [ root@localhost ~ ] # ll -d /soft/nginx lrwxrwxrwx 1 root root 24 8\u6708 22 17 :43 /soft/nginx -> /usr/local/nginx-1.22.0/ [ root@localhost ~ ] # ls /soft/nginx/ client_body_temp conf fastcgi_temp html logs proxy_temp sbin scgi_temp uwsgi_temp \u7528\u8f6f\u94fe\u63a5\u4e00\u901a\u64cd\u4f5c,\u4fbf\u4e8e\u4ee5\u540e\u7684\u5347\u7ea7!!!\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b: 1 > \u539f\u6765\u5b89\u88c5\u7684\u662fnginx1.22\u7684\u7248\u672c,\u5e76\u8f6f\u94fe\u63a5\u5230\u4e86 /soft/nginx\u76ee\u5f55\u4e0b.. 2 > \u73b0\u5728\u8981\u5347\u7ea7nginx,\u5148\u5b89\u88c5nginx1.3\u7684\u7248\u672c\u5230\u9ed8\u8ba4\u8def\u5f84/usr/local\u4e0b 3 > \u5220\u9664\u8f6f\u94fe\u63a5/soft/nginx/\u4e0b\u7684\u5185\u5bb9 4 > \u5c06\u65b0\u5b89\u88c5\u7684nginx\u4e0e/soft/nginx\u5efa\u7acb\u8f6f\u94fe\u63a5 \u8fd9\u6837\u7684\u8bdd,\u7cfb\u7edf\u4e2d\u5173\u4e8enginx\u7684\u914d\u7f6e\u6587\u4ef6,\u8981\u7528nginx\u7684\u5730\u65b9\u8def\u5f84\u4f9d\u65e7\u662f /soft/nginx/... \u6ca1\u5fc5\u8981\u66f4\u6539!!!!!","title":"\u6e90\u7801\u5305"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/","text":"\u8fdb\u7a0b\u56de\u987e!! \u00b6 <\u8fdb\u7a0b>\u662f \u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90 \u7684\u6700\u5c0f\u5355\u4f4d; <\u7ebf\u7a0b>\u662f\u7a0b\u5e8f\u6267\u884c/ cpu\u8c03\u5ea6 \u7684\u6700\u5c0f\u5355\u4f4d \u7a0b\u5e8f -- \u4e00\u5806\u4ee3\u7801\u6587\u4ef6 \u8fdb\u7a0b -- \u8fdb\u7a0b = \u8d44\u6e90\u7533\u8bf7(\u5f00\u8f9f\u5185\u5b58\u7a7a\u95f4) + \u7a0b\u5e8f\u6267\u884c(\u8fd0\u884c\u4ee3\u7801) \u4e00\u822c\u4f1a\u7b3c\u7edf\u7684\u8bf4\u662f\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b; \u4e25\u8c28\u70b9\u8fd9\u79cd\u8bf4\u6cd5\u6307\u7684\u662f\u7ebf\u7a0b \u5373 \u8fdb\u7a0b = \u8d44\u6e90\u7533\u8bf7 + \u591a\u4e2a\u7ebf\u7a0b\u6267\u884c \u4ea6\u6216\u8005\u8bf4\u662f\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u7740\u786c\u4ef6\u53bb\u8fd0\u884c\u7a0b\u5e8f\u7684\u8fc7\u7a0b; \u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u6700\u6838\u5fc3\u7684\u6982\u5ff5,\u6ca1\u6709\u4e4b\u4e00! \u5e76\u53d1 -- \u591a\u4e2a \u4efb\u52a1 \u770b\u8d77\u6765 \u662f \u540c\u65f6\u8fd0\u884c \u7684\u5373\u53ef. OS\u7684\u591a\u9053\u6280\u672f\u5b9e\u73b0\u5e76\u53d1: (\u8fd9\u91cc\u8ba8\u8bba\u4e00\u4e2acpu\u7684\u60c5\u51b5\u4e0b),\u5148\u5c06\u591a\u4e2a\u4efb\u52a1\u8bfb\u5230\u5185\u5b58\u91cc, \u5b9e\u73b0\u7a7a\u95f4\u4e0a\u7684\u590d\u7528 -- \u4efb\u52a1\u8ddf\u4efb\u52a1\u4e4b\u95f4\u5185\u5b58\u7a7a\u95f4\u4e0a\u5b9e\u73b0\u7269\u7406( \u5373\u786c\u4ef6 )\u5c42\u9762\u7684\u4e92\u76f8\u9694\u79bb; \u8be6\u7ec6\u6765\u8bf4,\u5c31\u6d89\u53ca\u5230\u865a\u62df\u5185\u5b58,\u865a\u62df\u5730\u5740,\u5185\u5b58\u5206\u9875\u7b49OS\u5185\u5b58\u7ba1\u7406\u7684\u77e5\u8bc6\u5566..\u4e0d\u5fc5\u6df1\u7a76!! \u5b9e\u73b0\u65f6\u95f4\u4e0a\u7684\u590d\u7528 -- \u7b80\u5355\u6765\u8bf4, cpu\u5728\u591a\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5feb\u901f\u6765\u56de\u5207\u6362.. \u901a\u5e38\u91c7\u7528\u7684\u662f\u65f6\u95f4\u7247\u8f6e\u8f6c\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\u65b9\u5f0f..\u7531\u4e8eCPU\u7684\u6267\u884c\u6548\u7387\u975e\u5e38\u9ad8,\u65f6\u95f4\u7247\u975e\u5e38\u77ed, \u5728\u5404\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5feb\u901f\u5730\u5207\u6362\uff0c\u7ed9\u4eba\u7684\u611f\u89c9\u5c31\u662f\u591a\u4e2a\u4efb\u52a1\u5728\"\u540c\u65f6\u8fdb\u884c\" Ps: cpu\u7684\u6027\u80fd\u5f88\u5f3a,\u80fd\u5feb\u901f\u5728\u4e0a\u4e07\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362,\u4f46\u4e5f\u8981\u53d7\u9650\u4e8e\u5185\u5b58\u80fd\u88c5\u4e0b\u4e0a\u4e07\u4e2a\u4efb\u52a1.. \u63d0\u5347\u8ba1\u7b97\u673a\u7684\u6027\u80fd -- \u52a0\u5185\u5b58\u6761;\u63d0\u5347\u8f6f\u4ef6\u7684\u542f\u52a8\u901f\u5ea6,IO\u76f8\u5173 -- \u7528\u56fa\u6001\u786c\u76d8.. \u5e76\u884c -- \u591a\u4e2a \u4efb\u52a1 \u662f \u771f\u6b63\u7684 \u540c\u65f6\u8fd0\u884c \u7684. \u53ea\u6709 \u591a\u6838 \u624d\u80fd\u5b9e\u73b0\u5e76\u884c.. 4\u68388\u7ebf\u7a0b, \u6bd4\u7eaf8\u6838\u6027\u80fd\u4f4e\u4e00\u4e9b,\u6bd4\u7eaf4\u6838\u8981\u5f3a\u4e00\u4e9b.. 4\u6838 -- \u4e0d\u7ba1\u771f\u5b9e\u60c5\u51b5\u4e0b\u6709\u591a\u4e2acpu,\u4f464\u4e2a\u6838\u5fc3\u5c31\u76f8\u5f53\u4e8e4\u4e2acpu; 8\u7ebf\u7a0b -- \u6bcf\u4e00\u4e2a\u6838\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\u4e24\u6761\u6d41\u6c34\u7ebf; 4X2=8; \u7ebf\u7a0b -- \u968f\u7740\u8ba1\u7b97\u673a\u7684\u53d1\u5c55, \u5bf9CPU\u7684\u8981\u6c42\u8d8a\u6765\u8d8a\u9ad8, \u8fdb\u7a0b\u4e4b\u95f4\u7684\u5207\u6362\u5f00\u9500\u8f83\u5927, \u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u8d8a\u6765\u8d8a\u590d\u6742\u7684\u7a0b\u5e8f\u7684 \u8981\u6c42,\u4e8e\u662f\u5c31\u53d1\u660e\u4e86\u7ebf\u7a0b.\u5b83\u662f\u4ece\u8fdb\u7a0b\u91cc\u5265\u79bb\u51fa\u7684\u4e00\u4e2a\u6982\u5ff5. \u5355\u6307\u8fdb\u7a0b\u6982\u5ff5\u91cc \u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b. \u4e00\u4e2a\u8fdb\u7a0b\u5185\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b.. \u7ebf\u7a0b\u624d\u662fcpu\u4e0a\u7684\u6267\u884c\u5355\u4f4d( \u5373\u4e0a\u6587\u7684\u4efb\u52a1\u4e25\u8c28\u70b9\u6307\u7684\u5c31\u662f\u7ebf\u7a0b ) \u5f3a\u8c03! cpu\u662f\u8fd0\u884c\u4ee3\u7801\u7684,\u786c\u76d8\u3001\u5185\u5b58\u3001\u7f51\u5361\u7b49\u786c\u4ef6\u8bbe\u5907\u624d\u662f\u505aIO\u7684 \u591a\u7ebf\u7a0b -- \u4e00\u4e2a\u8fdb\u7a0b\u5185\u5f00\u591a\u4e2a\u7ebf\u7a0b , \u6ce8\u610f\u54e6 \u662f \u4e00\u4e2a \u8fdb\u7a0b \u6253\u4e2a\u6bd4\u65b9,OS\u662f\u4e00\u4e2a\u5de5\u5382,\u4e00\u4e2a\u8fdb\u7a0b\u5c31\u662f\u8be5\u5de5\u5382\u7684\u4e00\u4e2a\u8f66\u95f4, \u8f66\u95f4\u662f\u4e00\u4e2a\u8d44\u6e90\u5355\u4f4d ; \u4e00\u4e2a\u8f66\u95f4\u91cc\u9762\u53ef\u4ee5\u6709\u7528\u4e8e\u52a0\u5de5\u7684\u4e00\u6761\u6216\u591a\u6761\u6d41\u6c34\u7ebf(\u7ebf\u7a0b) \u7279\u70b9: \u4e00\u4e2a\u8fdb\u7a0b\u91cc\u7684\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5 \u5171\u4eab \u8be5\u8fdb\u7a0b\u7684\u5185\u5b58\u8d44\u6e90!! \u5f53\u7136\u7ebf\u7a0b\u62e5\u6709\u5c5e\u4e8e\u81ea\u5df1\u7684\u4e00\u5c0f\u90e8\u5206\u8d44\u6e90, \u5c31\u662f\u6808\u7a7a\u95f4, \u4fdd\u5b58\u5176\u8fd0\u884c\u72b6\u6001\u548c\u5c40\u90e8\u81ea\u52a8\u53d8\u91cf\u7684 \u4e0d\u540c\u8fdb\u7a0b\u91cc\u7684\u591a\u4e2a\u7ebf\u7a0b\u7684\u5185\u5b58\u8d44\u6e90 \u4e92\u76f8\u9694\u79bb !! \u4efb\u52a1\u7684\u4e09\u79cd\u8fd0\u884c\u72b6\u6001 -- \u975e\u963b\u585e\u6001(\u8fd0\u884c\u6001 \u5c31\u7eea\u6001)\u3001\u963b\u585e\u6001 \u63d0\u4ea4\u4efb\u52a1\u7684\u65b9\u5f0f -- \u540c\u6b65\u3001\u5f02\u6b65 Ps: \u63d0\u4ea4\u4efb\u52a1\u7684\u65b9\u5f0f\u4e0e\u4efb\u52a1\u7684\u4e09\u79cd\u8fd0\u884c\u72b6\u6001 \u4e0d\u80fd\u6df7\u4e3a\u4e00\u8c08 !!\u5c3d\u7ba1\u540c\u6b65\u8ddf\u963b\u585e\u90fd\u4f1a\u6709\u4e00\u79cd\u8ba9\u4eba\u7b49\u5f85\u7684\u611f\u89c9... \u4ee5\u540c\u6b65\u63d0\u4ea4\u7684\u65b9\u5f0f\u63d0\u4ea4\u7684\u4efb\u52a1,\u4f1a\u5728\u539f\u5730\u7b49\u5f85,\u5728\u6b64\u671f\u95f4\u4efb\u52a1\u53ef\u80fd\u4f1a\u8fdb\u5165\u963b\u585e\u6001\u6216\u975e\u963b\u585e\u6001.. Q: \u82e5\u9700\u8981 \u5e76\u53d1 10\u4e2a\u4efb\u52a1,\u5982\u4f55\u5b9e\u73b0\uff1f \u5e76\u53d1\u7b2c\u4e00\u53cd\u5e94\u662fcpu\u4f1a\u572810\u4e2a\u4efb\u52a1\u4e4b\u95f4\u4e0d\u505c\u8c03\u5ea6,\u8ddf4\u68388\u7ebf\u7a0b\u4ec0\u4e48\u7684\u5e76\u884c\u6ca1\u76f4\u63a5\u5173\u7cfb.. A: \u65b9\u6848\u4e00:\u4e00\u4e2a\u8f66\u95f4\u91cc\u5f0010\u6761\u6d41\u6c34\u7ebf; \u65b9\u6848\u4e8c: \u670910\u4e2a\u8f66\u95f4,\u6bcf\u4e2a\u8f66\u95f4\u90fd\u53ea\u6709\u4e00\u6761\u6d41\u6c34\u7ebf.. \u524d\u8005\u80af\u5b9a\u4f18\u4e8e\u540e\u8005,\u56e0\u4e3a\u542f\u7528\u8fdb\u7a0b\u7684\u5f00\u9500\u6bd4\u7ebf\u7a0b\u5927. \u542f\u52a8\u8fdb\u7a0b\u6d89\u53ca\u5230\u975e\u5e38\u8017\u8d39\u8d44\u6e90\u7684\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\u7684IO\u64cd\u4f5c. \u542f\u7528\u7ebf\u7a0b\u5c31\u662f\u5f00\u4e00\u6761\u6d41\u6c34\u7ebf,\u5c31\u53ea\u9700\u8981\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\u4e00\u58f0,\u53ebOS\u5e2e\u5fd9\u8c03\u5ea6\u4e0b\u6b64\u6d41\u6c34\u7ebf.. So, \u82e5\u53ea\u662f\u5e76\u53d1\u7684\u8bdd,\u63a8\u8350\u4e00\u4e2a\u8fdb\u7a0b\u91cc\u5f00\u591a\u4e2a\u7ebf\u7a0b.. Ps: nginx\u4e0d\u662f\u5355\u7eaf\u4f7f\u7528\u65b9\u6848\u4e00,\u5047\u8bbecpu\u662f4\u6838\u7684,\u5c31\u4f1a\u5f00\u542f4\u4e2a\u8fdb\u7a0b,\u82e5\u6bcf\u4e2a\u8fdb\u7a0b\u91cc\u670920\u4e2a\u7ebf\u7a0b,\u5c31\u53ef\u4ee5\u5e76\u53d180\u4e2a\u4efb\u52a1.. \u4e58\u4e0a\u542f\u4e0b: \u5148\u7406\u6e05\u51e0\u4e2a\u8bf4\u6cd5 1 > \u56e0\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u5185\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b,so,\u6211\u4eec\u8bf4cpu\u8c03\u5ea6\u8fdb\u7a0b,\u51c6\u786e\u70b9\u662f\u6307cpu\u8c03\u5ea6\u8fdb\u7a0b\u5185\u7684\u90a3\u4e2a\u7ebf\u7a0b.. 2 > \u5e76\u884c\u53ea\u9002\u7528\u4e8e\u591a\u6838,\u82e5\u662f4\u6838,\u610f\u5473\u7740\u53ef\u4ee5\u5e76\u884c4\u4e2a\u7ebf\u7a0b. \u6bcf\u4e2a\u6838\u4e0d\u53ef\u80fd\u957f\u65f6\u95f4\u56fa\u5b9a\u8c03\u5ea6\u540c\u4e00\u4e2a\u7ebf\u7a0b,\u6838\u5c31\u9700\u8981\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5207\u6362,\u65b9\u5f0f\u4e4b\u4e00\u5c31\u662f\u65f6\u95f4\u7247.. ` ps aux ` \u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f,\u6ca1\u6709\u7279\u6b8a\u6307\u660e\u591a\u7ebf\u7a0b\u7684\u8bdd,\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u6210\u67e5\u770b\u8fdb\u7a0b\u91cc\u90a3\u4e00\u4e2a\u7ebf\u7a0b\u7684\u4fe1\u606f. ` \u4efb\u52a1\u7684\u4e09\u79cd\u8fd0\u884c\u72b6\u6001 ` \u4e4b\u95f4\u7684\u5207\u6362\u540c\u7406.\u6b64\u5904\u7684\u4efb\u52a1\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u6210\u7ebf\u7a0b. \u8865\u5145\u51e0\u4e2a\u77e5\u8bc6\u70b9 ( \u81ea\u5df1\u7406\u89e3\u7684\u5f88\u7b3c\u7edf,\u4e0d\u662f\u5f88\u51c6\u786e,\u4f46\u5927\u4f53\u610f\u601d\u5230\u5dee\u4e0d\u5dee\u7684 ) : \u4f5c\u4e1a\u3001\u7a0b\u5e8f\u3001\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb \u8be6\u89c10_\u8ba1\u7b97\u673a\u57fa\u7840/2_\u64cd\u4f5c\u7cfb\u7edf.md \u591a\u9053\u6280\u672f!!! -- \u5e76\u53d1 \u8fd9\u90e8\u5206\u7684\u5185\u5bb9 \u25b2 \u7236\u5b50\u8fdb\u7a0b \u540c\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u80fd\u5bf9\u5e94\u591a\u4e2a\u8fdb\u7a0b \u7236\u8fdb\u7a0b:\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4ea7\u751f\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b \u5b50\u8fdb\u7a0b:\u7531\u7236\u8fdb\u7a0b\u884d\u751ffork () \u51fa\u6765\u7684\u8fdb\u7a0b,\u5b50\u8fdb\u7a0b\u51e0\u4e4e\u662f\u7236\u8fdb\u7a0b\u7684\u5b8c\u5168\u590d\u5236 ( PID\u80af\u5b9a\u662f\u4e0d\u4e00\u6837\u7684 ) \u5b50\u8fdb\u7a0b\u518d\u8c03\u7528exec\u628a\u81ea\u8eab\u66ff\u6362\u4e3a\u65b0\u7684\u8fdb\u7a0b,PID\u4e0ePPID\u662f\u4e0d\u53d8\u7684 \u4f46\u539f\u6765\u5b50\u8fdb\u7a0b\u7684\u4ee3\u7801\u6bb5\u3001\u5806\u6808\u6bb5\u3001\u6570\u636e\u6bb5\u4f1a\u88ab\u65b0\u7684\u5185\u5bb9\u53d6\u4ee3,\u7528\u6765\u6267\u884c\u65b0\u7684\u7a0b\u5e8f \u8fd9\u6837fork\u548cexec\u5c31\u6210\u4e3a\u4e00\u79cd\u7ec4\u5408,\u867d\u7136\u8fd9\u79cd\u7ec4\u5408\u4f1a\u9020\u6210\u8f83\u5927\u8d1f\u62c5 \u6ce8\u610f:\u5982\u679c\u7236\u8fdb\u7a0b\u7ec8\u6b62,\u5b50\u8fdb\u7a0b\u4e5f\u4f1a\u968f\u4e4b\u88ab\u7ec8\u6b62 fork\u7684\u7528\u9014:\u5728\u8bb8\u591a\u5ba2\u6237-\u670d\u52a1\u5668C/S\u5e94\u7528\u7a0b\u5e8f\u4e2d,\u4f1a\u6709\u8bb8\u591afork\u6267\u884c\u540c\u4e00\u4e2a\u7a0b\u5e8f\u7684\u8fdb\u7a0b, \u7528fork\u51fd\u6570\u521b\u5efa\u591a\u4e2a\u5b50\u8fdb\u7a0b\u6765\u5b9e\u73b0\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u4e1a\u52a1,\u56e0\u6b64\u7528fork\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u670d\u52a1\u5668\u7aef\u7684\u5e76\u53d1\u5e94\u7528 \u670d\u52a1\u5668\u7aef\u53ef\u4ee5\u6d88\u9664\u5ba2\u6237\u7aef\u8bf7\u6c42\u6240\u8981\u521b\u5efa\u65b0\u8fdb\u7a0b\u7684\u5f00\u9500 Ps:\u53ef\u80fd\u73b0\u76ee\u524d\u770b\u6765\u4e0d\u5408\u7406,\u4f46\u8fd9\u6837\u8bbe\u8ba1\u6709\u5386\u53f2\u9057\u7559,\u521a\u5f00\u59cb\u65f6\u5185\u5b58\u5f88\u5c0f\u7b49\u5bfc\u81f4\u7684. ( \u5177\u4f53\u7684\u6682\u4e14\u4e0d\u60f3\u6df1\u5165\u7814\u7a76\u4e86.. ) fork-exec\u7684\u7531\u6765\u53ef\u53c2\u8003 https://www.zhihu.com/question/66902460 \u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f \u00b6 ps aux \u00b6 ps aux \u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u4e2d \u90a3\u4e00\u65f6\u523b \u6240\u6709\u8fd0\u884c\u7684\u8fdb\u7a0b( \u524d\u540e\u53f0 \u7684\u90fd\u6709 )\u4fe1\u606f \u4e0d\u5177\u5907\u5b9e\u65f6\u6027. \u9009\u9879: -a \u8be5\u7ec8\u7aef\u6240\u6709\u8fdb\u7a0b; -u \u663e\u793a\u7528\u6237 ; -x \u663e\u793a\u547d\u4ee4\u7684\u7edd\u5bf9\u8def\u5f84. Ps: windows\u4e0a\u6709\u5b9e\u73b0\u7c7b\u4f3c\u529f\u80fd\u7684\u547d\u4ee4 tasklist | findstr \u5177\u4f53\u67d0\u4e00\u4e2a\u8fdb\u7a0b [ root@localhost ~ ] # ps aux | head -n 3 USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0 .0 0 .3 199756 3036 ? Ss 8\u670805 4 :55 /usr/lib/systemd/systemd.. root 2 0 .0 0 .0 0 0 ? S 8\u670805 0 :00 [ kthreadd ] Ps:PID\u4e3a1\u7684\u8fdb\u7a0b\u662f\u4e2a\u8f6f\u4ef6,\u8be6\u7ec6\u4ecb\u7ecd\u8be6\u89c11_linux\u57fa\u7840/0_\u51c6\u5907\u5de5\u4f5c.md Linux\u542f\u52a8\u6d41\u7a0b\u8fd9\u4e00\u5c0f\u8282\u7684\u5185\u5bb9!! \"\"\" USER \u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237 PID \u8fdb\u7a0b\u7684ID\u53f7 %CPU CPU\u5360\u7528\u7387,\u8be5\u8fdb\u7a0b\u5360\u7528CPU\u7684\u767e\u5206\u6bd4 %MEM \u5185\u5b58\u5360\u7528\u7387 VSZ \u5360\u7528\u865a\u62df\u5185\u5b58\u7684\u5927\u5c0f(\u5355\u4f4d\u5b57\u8282Kb) \u7b80\u5355\u7684\u6765\u8bf4,\u8fdb\u7a0b\u5728\u542f\u52a8\u65f6\u4f1a\u9884\u5148\u7533\u8bf7\u597d\u4e00\u5757\u7ebf\u6027\u7a7a\u95f4,\u5206\u914d\u597d\u540e,\u4e0d\u4e00\u5b9a\u4f1a\u5168\u7528 \u5185\u5b58\u6620\u5c04\u3001\u5171\u4eab\u7684\u52a8\u6001\u5e93\u3001\u6216\u8005\u5411\u7cfb\u7edf\u7533\u8bf7\u4e86\u66f4\u591a\u7684\u5806\u7b49,\u90fd\u4f1a\u6269\u5c55\u7ebf\u6027\u7a7a\u95f4\u5927\u5c0fTnT \u6ce8\u610f!!! \u8fd9\u91cc\u7684\u865a\u62df\u5185\u5b58\u4e0d\u662f\u6307swap\u5206\u533a\u865a\u62df\u5185\u5b58\u7684\u5927\u5c0f!!\u4e24\u8005\u6ca1\u6709\u5173\u7cfb. \u6211\u89c9\u5f97VSZ\u662f\u6307\u8fdb\u7a0b\u9700\u8981\u7684\u7ebf\u6027\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f..Hhhh RSS \u8fdb\u7a0b\u5b9e\u9645\u5360\u7528\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f(\u5355\u4f4d\u5b57\u8282Kb) TTY \u8be5\u8fdb\u7a0b\u5728\u54ea\u4e2a\u7ec8\u7aef\u8fd0\u884c\u7684 `\uff1f` \u95ee\u53f7\u4ee3\u8868\u6ca1\u6709\u5728\u4efb\u4f55\u4e00\u4e2a\u7ec8\u7aef\u63d0\u4ea4,\u4ee3\u8868\u5f00\u673a\u81ea\u52a8\u542f\u52a8\u8d77\u6765\u7684 \u7ec8\u7aef\uff1fCTTS -- MULTICS -- unix -- minix -- linux -- linux\u53d1\u884c\u7248:redhat\u3001centos linux\u7ee7\u627f\u4e86MULTICS,\u81ea\u52a8\u4fdd\u7559\u51e0\u4e2a\u8054\u673a\u7ec8\u7aef.. 6\u4e2a\u771f\u5b9e\u7684\u7ec8\u7aef /dev/tty1 ... /dev/tty6 xshell\u8fdc\u7a0b\u8fde\u63a5\u770b\u5230\u7684\u7ec8\u7aef\u662f\u9884\u7559\u7684\u7ec8\u7aef\u4ee5\u5916\u901a\u8fc7ssh\u865a\u62df\u6a21\u62df\u51fa\u6765\u7684\u7ec8\u7aef,\u4e0d\u662f\u771f\u5b9e\u7684\u7ec8\u7aef. /dev/pts/0 /dev/pts/1 0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u865a\u62df\u7684Bash Shell\u7ec8\u7aef 1\u4ee3\u8868\u7b2c2\u4e2a \u4ee5\u6b64\u7c7b\u63a8.. [root@localhost ~]# tty /dev/pts/0 \u2605STAT \u8fdb\u7a0b\u7684\u72b6\u6001 (\u6700\u597d\u8bb0\u4f4f!!) R\u3001S\u3001D\u3001T\u3001Z\u3001X START \u8fdb\u7a0b\u7684\u542f\u52a8\u65f6\u95f4 TIME \u8fdb\u7a0b\u5360\u7528CPU\u7684\u603b\u65f6\u95f4 COMMAND \u8fdb\u7a0b\u7684\u7edd\u5bf9\u8def\u5f84,\u5f53\u7136\u6709\u4e9b\u6ca1\u6709\u7edd\u5bf9\u8def\u5f84 \u7528[]\u5305\u88f9\u8d77\u6765\u7684\u4ee3\u8868\u5185\u6838\u6001(\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801)\u7684\u8fdb\u7a0b \u4e0d\u5e26[]\u53f7\u7684\u4ee3\u8868\u7528\u6237\u6001(\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801)\u8fdb\u7a0b \"\"\" pstree \u00b6 \u67e5\u770b\u8fdb\u7a0b\u6811 \u67e5\u770b\u67d0\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u6811: pstree \u8fdb\u7a0bPID [ root@localhost ~ ] # ps aux | grep nginx root 56062 0 .0 0 .0 112824 988 pts/1 S+ 18 :21 0 :00 grep --color = auto nginx root 75065 0 .0 0 .0 20576 8 ? Ss 8\u670821 0 :00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx nobody 75066 0 .0 0 .0 23104 8 ? S 8\u670821 0 :00 nginx: worker process [ root@localhost ~ ] # pstree 75065 nginx\u2500\u2500\u2500nginx \u6ce8\u610f\u54e6!\u82e5\u662f\u6700\u5c0f\u5316\u5b89\u88c5,\u6ca1\u6709pstree\u547d\u4ee4,\u5b89\u88c5\u4e0b\u5373\u53ef rpm -qf ` which pstree ` ppid \u00b6 ppid \u5373parent pid.. \u4ee3\u8868\u8fd9\u4e2a\u8fdb\u7a0b\u662f\u7531\u54ea\u4e2a\u8fdb\u7a0b\u53d1\u5c55\u884d\u751f\u800c\u6765\u7684, \u5373\u67e5\u770b\u7236\u8fdb\u7a0bPID [ root@localhost ~ ] # ps -elf | head -1 F S UID PID PPID C PRI NI ADDR SZ WCHAN STIME TTY TIME CMD [ root@localhost ~ ] # ps -elf | grep [n]ginx 1 S root 75065 1 0 80 0 - 5144 sigsus 8\u670821 ? 00 :00:00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx ## \u53ef\u4ee5\u53d1\u73b0 75066\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u662f75065 5 S nobody 75066 75065 0 80 0 - 5776 ep_pol 8\u670821 ? 00 :00:00 nginx: worker process pgrep \u00b6 pgrep \u8fdb\u7a0b\u540d [ root@localhost ~ ] # pgrep nginx 75065 75066 \u67e5\u770b\u7531\u67d0\u4e2a\u7528\u6237\u5f00\u542f\u7684\u8fdb\u7a0b pgrep -l -u \u7528\u6237\u540d [ root@localhost ~ ] # pgrep -l -u root | head -5 1 systemd 2 kthreadd 4 kworker/0:0H 6 ksoftirqd/0 7 migration/0 [ root@localhost ~ ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) [ root@localhost ~ ] # su - dc -c \"sleep 10000\" & [ 2 ] 57035 [ root@localhost ~ ] # pgrep -l -u dc 57037 sleep ## \u8fd9\u79cd\u65b9\u5f0f\u7684\u8bdd,\u5c31\u9700\u8981\u770b\u7b2c\u4e00\u5217\u662fdc [ root@localhost ~ ] # ps aux | grep dc root 1987 0 .0 0 .0 376184 176 ? Sl 8\u670814 0 :00 /usr/libexec/ibus-dconf root 2018 0 .0 0 .0 187400 356 ? Sl 8\u670814 0 :00 /usr/libexec/dconf-service root 57035 0 .0 0 .3 231964 3456 pts/1 S 18 :38 0 :00 su - dc -c sleep 10000 dc 57037 0 .0 0 .0 108052 360 ? Ss 18 :38 0 :00 sleep 10000 root 57196 0 .0 0 .0 112828 984 pts/1 S+ 18 :40 0 :00 grep --color = auto dc \"\"\" `su - dc -c \" sleep 10000 \" &`\u8fd9\u6761\u547d\u4ee4\u542f\u52a8\u4e86\u4e24\u4e2a\u8fdb\u7a0b \u4e00\u4e2a\u662fsu\u8fdb\u7a0b,\u4e00\u4e2a\u662f\u5207\u6362\u7528\u6237\u540e\u4ee5dc\u7528\u6237\u8fd0\u884c\u7684sleep\u8fdb\u7a0b... \u7b2c\u4e00\u4e2a\u662fPID\u4e3a 57035 \u7684\u8fdb\u7a0b;\u53e6\u4e00\u4e2a\u662fPID\u4e3a 57037 \u7684\u5b50\u8fdb\u7a0b. \"\"\" [ root@localhost ~ ] # ps -elf | grep dc 0 S root 1987 1983 0 80 0 - 94046 poll_s 8\u670814 ? 00 :00:00 /usr/libexec/ibus-dconf 0 S root 2018 1 0 80 0 - 46850 poll_s 8\u670814 ? 00 :00:00 /usr/libexec/dconf-service 4 S root 57035 52706 0 80 0 - 57991 do_wai 18 :38 pts/1 00 :00:00 su - dc -c sleep 10000 4 S dc 57037 57035 0 80 0 - 27013 hrtime 18 :38 ? 00 :00:00 sleep 10000 0 R root 57382 52706 0 80 0 - 28207 - 18 :43 pts/1 00 :00:00 grep --color = auto dc \u8be6\u89e3\u8fdb\u7a0b\u7684\u72b6\u6001STAT \u00b6 \u8fdb\u7a0b\u662f\u4e00\u79cd\u52a8\u6001\u63cf\u8ff0, \u5e76\u4e0d\u4ee3\u8868\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u5728\u8fd0\u884c. \u8fd9\u5c31\u53ef\u4ee5\u5f15\u5165 \u8fdb\u7a0b\u72b6\u6001 , \u8fdb\u7a0b\u5728\u5185\u5b58\u4e2d\u4f1a\u56e0\u4e3a\u5404\u79cd\u7b56\u7565\u6216\u8c03\u5ea6\u9700\u6c42\u5904\u4e8e\u4e0d\u540c\u7684\u72b6\u6001.. R\u3001S\u3001D\u3001T\u3001Z\u3001X < N s + \uff5c l (\u8fd9\u91cc\u662f\u5c0f\u5199\u7684\u82f1\u6587\u5b57\u6bcdl,\u4e0d\u662f\u6570\u5b571) \u8fd96\u4e2a\u7b26\u53f7\u53ef\u4e0e\u4e0a\u97626\u4e2a\u72b6\u6001\u7ec4\u5408\u642d\u914d\u4f7f\u7528!! R \u8fd0\u884c, \u8be5\u8fdb\u7a0b\u6b63\u5728\u4f7f\u7528cpu # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c [ root@localhost ~ ] # tty /dev/pts/0 [ root@localhost ~ ] # vim 1.sh [ root@localhost ~ ] # cat 1.sh while true ; do (( 1 +1 )) ; done [ root@localhost ~ ] # bash 1.sh # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b [ root@localhost ~ ] # tty /dev/pts/1 ## R+ +\u53f7\u4ee3\u8868\u524d\u53f0(\u610f\u5473\u7740\u5360\u7528\u7740\u7ec8\u7aef\u5462)\u8fd0\u884c [ root@localhost ~ ] # ps aux | grep 1.sh | grep -v grep root 44419 99 .8 0 .1 113280 1208 pts/0 R+ 16 :06 1 :14 bash 1 .sh [ root@localhost ~ ] # ps aux | grep 1.sh | grep -v grep root 44419 100 0 .1 113280 1208 pts/0 R+ 16 :06 1 :45 bash 1 .sh [ root@localhost ~ ] # ps aux | grep 1.sh | grep -v grep root 44419 99 .7 0 .1 113280 1208 pts/0 R+ 16 :06 1 :46 bash 1 .sh S \u53ef\u4e2d\u65ad\u7761\u7720 Sleep => \u9047\u5230IO\u5566, \u53ef\u6b63\u5e38\u7684\u5904\u7406IO ,\u6267\u884c\u7684IO\u64cd\u4f5c\u53ef\u4ee5\u5f97\u5230\u786c\u4ef6\u8bbe\u5907\u7684\u54cd\u5e94 \u7edd\u5927\u591a\u6570\u8f6f\u4ef6\u7684\u5927\u591a\u6570\u65f6\u5019\u7684\u72b6\u6001\u90fd\u5904\u4e8eS\u72b6\u6001,why? \u56e0\u4e3a\u73b0\u5728\u7684\u8f6f\u4ef6\u90fd\u79bb\u4e0d\u5f00\u7f51\u7edc,\u6709\u7f51\u7edc\u5c31\u4f1a\u6709\u7f51\u7edcIO.. \u50cf\u6bd4\u7279\u5e01\u7684\u8fd0\u7b97\u7a0b\u5e8f\u5c31\u975e\u5e38\u8017\u8d39cpu\u7684\u8d44\u6e90,\u4e00\u76f4\u5728\u7b97..\u5c31\u50cf\u662f\u6b7b\u5faa\u73af\u4e00\u6837.cpu\u76f4\u63a5\u88c2\u5f00.. \u6ce8\u610f\u54e6! \u8fd9\u91cc\u8fdb\u7a0b\u7684 ` S\u72b6\u6001 ` \u522b\u8ddflinux\u547d\u4ee4 ` sleep ` \u6df7\u4e3a\u4e00\u8c08,sleep\u547d\u4ee4\u6bd4\u8f83\u61a8\u5c31\u662f\u7eaf\u7cb9\u7684\u4f11\u7720\u6307\u5b9a\u65f6\u95f4 ; \u4f46\u53ef\u4ee5\u7528sleep\u547d\u4ee4\u6a21\u62dfIO\u884c\u4e3a. # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c \u8ba9\u5176\u8fd0\u7b97\u4e2d\u9014\u505c\u6b621\u79d2 [ root@localhost ~ ] # vim 2.sh [ root@localhost ~ ] # cat 2.sh while true ; do (( 1 +1 )) ; sleep 1 ; done # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b \u76d1\u6d4b\u4e0d\u5230R\u72b6\u6001\u662f\u56e0\u4e3a 1+1\u7684\u8fd0\u7b97\u51e0\u4e4e\u6ca1\u6709\u8017\u65f6 \u6781\u96be\u6355\u6349\u5230 # \u8bd5\u7740\u6355\u6349\u4e0b:(\u4e0d\u8981\u7ea0\u7ed3!) 1 > ` top -p 44615 ` \u4f7f\u7528top\u547d\u4ee4\u4e5f\u76d1\u6d4b\u4e0d\u5230 top\u547d\u4ee4\u7684\u672c\u8d28\u5c31\u662f\u9ed8\u8ba43\u79d2\u6267\u884c\u4e00\u6b21ps aux\u547d\u4ee4,\u5b9e\u65f6\u6027\u4e5f\u4e0d\u662f\u5f88\u9ad8. 2 > ` while true ; do ps aux | grep 2 .sh | grep -v grep ; done ` \u4f7f\u7528\u6b7b\u5faa\u73af,\u4e5f\u6355\u6349\u4e0d\u5230,1+1\u8fd0\u7b97\u8017\u65f6\u592a\u77ed\u4e86 [ root@localhost ~ ] # ps aux | grep 2.sh | grep -v grep root 44615 0 .0 0 .1 113280 1388 pts/0 S+ 16 :09 0 :00 bash 2 .sh [ root@localhost ~ ] # ps aux | grep 2.sh | grep -v grep root 44615 0 .0 0 .1 113280 1388 pts/0 S+ 16 :09 0 :00 bash 2 .sh [ root@localhost ~ ] # ps aux | grep 2.sh | grep -v grep root 44615 0 .0 0 .1 113280 1388 pts/0 S+ 16 :09 0 :00 bash 2 .sh D \u4e0d\u53ef\u4e2d\u65ad\u7761\u7720 \u9047\u5230IO\u5566, \u60f3\u8981\u5904\u7406IO , \u4f46\u6267\u884c\u7684IO\u64cd\u4f5c\u5f97\u4e0d\u5230\u786c\u4ef6\u8bbe\u5907\u7684\u54cd\u5e94,\u786c\u4ef6\u8bbe\u5907\u538b\u6839\u513f\u4e0d\u9e1f\u4f60.. \u610f\u5473\u7740\u786c\u4ef6\u8bbe\u5907\u6b64\u65f6\u7684\u538b\u529b\u592a\u5927\u4e86,\u5fd9\u6d3b\u4e0d\u8fc7\u6765\u5566!!\u6ca1\u7a7a\u642d\u7406\u4f60. Ps:\u4e00\u65e6\u8fdb\u7a0b\u5904\u4e8e\u8fd9\u4e2a\u72b6\u6001,\u6740\u90fd\u6740\u4e0d\u6389 Hhh \u89e3\u51b3\u65b9\u6848: ( \u73b0\u76ee\u524d\u53ea\u80fd\u8fd9\u4e48\u505a ) \u4e00\u65e6\u8fdb\u7a0b\u72b6\u6001\u51fa\u73b0D,\u964d\u4f4e\u4e0b\u786c\u76d8\u7684\u538b\u529b,\u5c06\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u5199\u64cd\u4f5c\u5e72\u6389,\u8ba9\u5173\u952e\u7684\u5199\u64cd\u4f5c\u80fd\u5f97\u5230\u54cd\u5e94. # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c \u4ece\u786c\u76d8\u4e0a\u5c06\u6307\u5b9a\u7684\u5185\u5bb9\u8bfb\u51fa\u6765\u5199\u5230\u6307\u5b9a\u7684\u5730\u65b9\u53bb [ root@localhost ~ ] # tar czf /root/egon.tar.gz /etc/ /usr/ /tmp/ /boot/ tar: \u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d tar: \u4ece\u786c\u8fde\u63a5\u76ee\u6807\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b \u6709\u8fd0\u884c(R+);\u6709\u6b63\u5e38\u7684IO(S+);\u4e5f\u6709\u53ef\u80fd\u786c\u76d8\u538b\u529b\u8fc7\u5927\u54cd\u5e94\u4e0d\u8fc7\u6765(D+) [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .4 0 .1 124132 1932 pts/0 S+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .4 0 .1 124132 1932 pts/0 S+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .6 0 .1 124132 1932 pts/0 R+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .9 0 .1 124132 1932 pts/0 D+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 3 .0 0 .1 124132 1932 pts/0 S+ 16 :39 0 :00 tar czf /root/egon.tar... T \u505c\u6b62/\u4e2d\u6b62\u7684\u8fdb\u7a0b # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c \u8fdb\u5165vim\u7f16\u8f91\u754c\u9762\u540e control+z\u505c\u6b62 [ root@localhost ~ ] # vim a.txt [ 2 ] + \u5df2\u505c\u6b62 vim a.txt # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b ## \u8fd9\u4e2a\u662f\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u5728vim\u754c\u9762\u65f6 [ root@localhost ~ ] # ps aux | grep [v]im root 48892 0 .2 0 .5 149820 5436 pts/0 S+ 16 :26 0 :00 vim a.txt ## \u8fd9\u4e2a\u662f\u7b2c\u4e00\u4e2a\u7ec8\u7aefcontrol+z\u505c\u6b62,\u9000\u51favim\u754c\u9762\u540e [ root@localhost ~ ] # ps aux | grep [v]im root 48892 0 .0 0 .5 149820 5436 pts/0 T 16 :26 0 :00 vim a.txt Z \u50f5\u5c38\u8fdb\u7a0b, \u5904\u4e8e\u8be5\u72b6\u6001\u7684\u8fdb\u7a0b\u540c\u6837\u6740\u4e0d\u6b7b!!! X \u6b7b\u6389\u7684\u8fdb\u7a0b(\u51e0\u4e4e\u770b\u4e0d\u89c1,\u56e0\u4e3a\u6b7b\u4e86\u5c31\u7acb\u5373\u56de\u6536\u4e86) < \u6807\u6ce8\u4e86<\u5c0f\u4e8e\u53f7\u4ee3\u8868\u4f18\u5148\u7ea7\u8f83\u9ad8\u7684\u8fdb\u7a0b N N\u4ee3\u8868\u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u8fdb\u7a0b \u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u6d89\u53ca\u5230nice\u503c ( \u4e5f\u53eb\u505a\u597d\u5fc3\u503c ) : \u597d\u5fc3\u503c\u8d8a\u4f4e\u4f18\u5148\u7ea7\u8d8a\u9ad8 ( \u59a5\u59a5\u7684\u6b3a\u8d1f\u8001\u5b9e\u4eba\u5457 ) nice\u503c\u7684\u8303\u56f4 [ -20,19 ] ## & \u4ee3\u8868\u540e\u53f0\u8fd0\u884c [ root@localhost ~ ] # nice -n -20 sleep 3000 & [ 3 ] 51827 [ root@localhost ~ ] # nice -n 19 sleep 5000 & [ 4 ] 51835 [ root@localhost ~ ] # ps aux | grep [s]leep root 51797 0 .0 0 .0 108052 360 ? S 17 :12 0 :00 sleep 60 root 51827 0 .0 0 .0 108052 360 pts/0 S< 17 :13 0 :00 sleep 3000 root 51835 0 .0 0 .0 108052 356 pts/0 SN 17 :13 0 :00 sleep 5000 s \u5305\u542b\u5b50\u8fdb\u7a0b [ root@localhost ~ ] # ps aux | grep nginx | grep -v grep ## \u6b64\u5904\u7684Ss \u5c0f\u5199s\u6307\u7684\u5c31\u662fPID\u4e3a75066\u7684\u5b50\u8fdb\u7a0b root 75065 0 .0 0 .0 20576 8 ? Ss 8\u670821 0 :00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx nobody 75066 0 .0 0 .0 23104 8 ? S 8\u670821 0 :00 nginx: worker process + +\u8868\u793a\u8fdb\u7a0b\u662f\u5728\u524d\u53f0\u8fd0\u884c(\u5360\u7740\u7ec8\u7aef\u5c4f\u5e55..) l \u5c0f\u5199\u5b57\u6bcdl, \u4ee3\u8868\u4ee5\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c,\u5373\u591a\u7ebf\u7a0b # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c [ root@localhost ~ ] # vim a.py [ root@localhost ~ ] # cat a.py from threading import Thread import time import os def task () : time.sleep ( 100 ) if __name__ == \"__main__\" : print ( os.getpid ()) for i in range ( 10 ) : t = Thread ( target = task ) t.start () [ root@localhost ~ ] # python a.py 54844 # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b \u5728py\u7a0b\u5e8f\u8fd8\u5728\u8fd0\u884c\u7684\u65f6\u5019\u67e5\u770b!! [ root@localhost ~ ] # ps aux | grep 54844 | grep -v grep root 54844 0 .0 0 .5 740392 5048 pts/1 Sl+ 18 :02 0 :00 python a.py | \u7ba1\u9053\u7b26\u53f7\u4ee3\u8868\u591a\u8fdb\u7a0b \u52a8\u6001\u67e5\u770btop \u00b6 \u547d\u4ee4\u884c\u9009\u9879 \u00b6 -d ; -p ; -u [ root@localhost ~ ] # sleep 1000 & [ 1 ] 68309 [ root@localhost ~ ] # pgrep nginx 75065 75066 ## -d \u6307\u5b9a\u51e0\u79d2\u5237\u65b0\u4e00\u6b21; -p \u6307\u5b9a\u52a8\u6001\u5237\u65b0\u7684\u8fdb\u7a0b top -d 1 -p 68309 ## pgrep nginx\u7ed3\u679c\u662f\u8fdb\u7a0bPID,\u7528head\u8fc7\u6ee4\u7b2c\u4e00\u4e2a,\u7528\u9017\u53f7\u8fde\u63a5\u8868\u793a\u4e00\u8fde\u4e32\u7684\u8fdb\u7a0b ## \u67e5\u770bnginx\u4ee5\u53capid\u4e3a68309\u7684\u8fdb\u7a0b top -d 1 -p ` pgrep nginx | head -1 ` ,68309 ## \u67e5\u770begon\u7528\u6237\u5f00\u542f\u7684\u8fdb\u7a0b top -d 1 -u egon \u663e\u793a\u5185\u5bb9\u89e3\u91ca \u00b6 \u5173\u6ce8: up \u3001 load average \u3001Tasks\u3001%Cpu\u7684us sy id\u3001KiB Mem\u3001KiB Swap PID\u3001USER\u3001NI\u3001VIRT\u3001RES\u3001SHR\u3001S Ps: \u53ea\u770b load average \u90a3\u4e00\u884c\u7684\u547d\u4ee4 -- uptime top - 10 :34:42 up 8 days, 16 :10, 4 users, load average: 0 .00, 0 .02, 0 .05 Tasks: 213 total, 1 running, 211 sleeping, 1 stopped, 0 zombie %Cpu ( s ) : 1 .0 us, 1 .0 sy, 0 .0 ni, 98 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st KiB Mem : 995640 total, 173984 free, 558128 used, 263528 buff/cache KiB Swap: 2097148 total, 1706236 free, 390912 used. 257816 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 72062 dc 20 0 116960 3328 1708 S 0 .0 0 .3 0 :00.09 bash 73191 dc 20 0 108052 360 284 S 0 .0 0 .0 0 :00.00 sleep [\u7cfb\u7edf\u6574\u4f53\u7edf\u8ba1\u4fe1\u606f] \u00b6 ## -- \u8fd9\u91cc\u7684\u5e73\u5747\u8d1f\u8f7d\u662f\u5c06\u6240\u6709cpu\u8d44\u6e90\u90fd\u6db5\u76d6\u5728\u5185 \u5f53\u524d\u65f6\u95f4\u70b9\u5f80\u8fc7\u53bb1min\u5185/5min\u5185/15min\u5185\u7684\u5e73\u5747\u8d1f\u8f7d top - \u5f53\u524d\u7cfb\u7edf\u65f6\u95f4 up \u8fd0\u884c\u4e86\u591a\u957f\u65f6\u95f4, 4\u4e2a\u7528\u6237 ( \u672c\u673a\u548c\u8fdc\u7a0b\u767b\u5f55\u7684 ) , CPU\u5e73\u5747\u8d1f\u8f7d 1\u5206\u949f\u7684,5\u5206\u949f\u7684,15\u5206\u949f\u7684 ## -- \u5904\u4e8esleeping\u7684\u8fdb\u7a0b\u6570\u8d8a\u591a cpu\u5c31\u8d8a\u8f7b\u677e \u7cfb\u7edf\u8d8a\u5065\u5eb7; running\u6bd4\u8f83\u591a \u53cd\u5e94\u6b63\u5728\u5927\u5fd9\u6d3b.. ## -- \u5904\u4e8eT\u72b6\u6001\u7684,\u82e5\u4e0d\u9700\u8981,\u53ef\u4ee5\u8003\u8651\u628a\u5b83\u5e72\u6389..(\u5360\u7528\u7a7a\u95f4\u53c8\u4e0d\u5e72\u4e8b) ## -- D\u548cZ\u72b6\u6001\u7684\u8fdb\u7a0bkill -9\u4e5f\u6740\u4e0d\u6b7b;\u53ea\u80fd\u66f2\u7ebf\u6551\u56fd,\u6bd4\u5982D\u7b49\u786c\u4ef6\u8bbe\u5907\u54cd\u5e94 \u4efb\u52a1: \u603b\u5171\u8fd0\u884c\u4e86213\u4e2a\u8fdb\u7a0b, \u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c ( R ) , 211 \u4e2a\u5728\u7761\u7720 ( S ) , \u6709\u4e00\u4e2a\u88ab\u505c\u6b62 ( T ) , \u67090\u4e2a\u50f5\u5c38\u8fdb\u7a0b %Cpu ( s ) : ## -- \u7f57\u5217\u7684\u662f\u6240\u6709cpu\u7684\u5e73\u5747\u60c5\u51b5 %Cpu0 %Cpu1 %Cpu2 \"\"\" us \u7528\u6237\u6001\u8fdb\u7a0b(\u5373\u5e94\u7528\u7a0b\u5e8f)\u5360\u7528cpu\u65f6\u95f4\u7684\u767e\u5206\u6bd4 sy \u5185\u6838\u6001\u8fdb\u7a0b(\u5373\u64cd\u4f5c\u7cfb\u7edf)\u5360\u7528cpu\u65f6\u95f4\u7684\u767e\u5206\u6bd4 ni \u4ee3\u8868\u4f18\u5148\u88ab\u8c03\u5ea6\u7684\u8fdb\u7a0b\u5360cpu\u65f6\u95f4\u7684\u767e\u5206\u6bd4 id cpu\u7a7a\u95f2\u7684\u767e\u5206\u6bd4 wa cpu\u7b49\u5f85\u8fdb\u7a0b\u5c06io\u505a\u5b8c\u7684\u767e\u5206\u6bd4 \u6b64\u503c\u8f83\u9ad8\u7684\u8bdd\u4ee3\u8868\u8ba1\u7b97\u673aIO\u6bd4\u8f83\u7e41\u5fd9 hi \u786c\u4ef6\u4e2d\u65ad,\u5904\u7406\u786c\u4ef6\u4e2d\u65ad\u6240\u5360\u7528CPU\u7684\u65f6\u95f4 \u6b64\u503c\u5927\u7684\u8bdd,\u8868\u660e\u786c\u4ef6\u5728\u4e0d\u65ad\u5fd9\u6d3b si \u8f6f\u4ef6\u4e2d\u65ad,\u5904\u7406\u8f6f\u4ef6\u4e2d\u65ad\u6240\u5360\u7528CPU\u7684\u65f6\u95f4 st \u88ab\u5077\u8d70\u7684cpu,\u8ddf\u865a\u62df\u5316\u6709\u5173 \"\"\" ## -- buff/cache linux\u7684\u5185\u5b58\u4f18\u5316\u673a\u5236,\u81ea\u4f5c\u4e3b\u5f20\u7684\u5c06\u95f2\u7740\u7684\u5185\u5b58\u6765\u505a\u4f18\u5316 \u4f18\u5316\u8bfb\u5199 ## -- \u8be6\u89c1 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md\u4e2d \u8f6f\u4ef6\u4e0e\u4e09\u5927\u6838\u5fc3\u7684\u5173\u7cfb \u8fd9\u90e8\u5206\u5185\u5bb9 \u7269\u7406\u5185\u5b58\u7a7a\u95f4 ( \u5355\u4f4dkb ) : \u603b\u8ba1 995640 , \u7a7a\u95f2 173984 , \u5df2\u4f7f\u7528 558128 , 263528 buff/cache ## -- \u6b64\u5904\u7684used \u5df2\u4f7f\u7528\u7684\u503c\u5927\u4e8e0,\u4ee3\u8868\u7269\u7406\u5185\u5b58\u4e0d\u591f\u7528\u4e86,\u5f00\u59cbswap out\u5566! ## -- \u5360\u7528\u7269\u7406\u5185\u5b58\u591a\u5c11\u767e\u5206\u6bd4\u540e\u5f00\u59cb\u4f7f\u7528swap\u5206\u533a\u5f53\u4e34\u65f6\u5185\u5b58 \u53ef\u4ee5\u8bbe\u7f6e `cat /proc/sys/vm/swappiness` ## -- \u8be6\u89c1 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md\u4e2d [\u865a\u62df\u5185\u5b58] \u8fd9\u90e8\u5206\u5185\u5bb9 \u4ea4\u6362\u533a/\u865a\u62df\u5185\u5b58\u7a7a\u95f4 ( \u5355\u4f4dkb ) : \u603b\u8ba1 2097148 , \u7a7a\u95f2 1706236 , \u5df2\u4f7f\u7528 390912 , 257816 avail Mem SWAP OUT: \u5f53\u67d0\u8fdb\u7a0b\u5411OS\u8bf7\u6c42\u5185\u5b58\u53d1\u73b0\u4e0d\u8db3\u65f6,OS\u4f1a\u628a\u5185\u5b58\u4e2d\u6682\u65f6\u4e0d\u7528\u7684\u6570\u636e\u4ea4\u6362\u51fa\u53bb,\u653e\u5728SWAP\u5206\u533a\u4e2d ; SWAP IN: \u5f53\u67d0\u8fdb\u7a0b\u53c8\u9700\u8981\u8fd9\u4e9b\u6570\u636e\u4e14OS\u53d1\u73b0\u8fd8\u6709\u7a7a\u95f2\u7269\u7406\u5185\u5b58\u65f6,\u53c8\u4f1a\u628aSWAP\u5206\u533a\u4e2d\u7684\u6570\u636e\u4ea4\u6362\u56de\u7269\u7406\u5185\u5b58\u4e2d. Ps: buff\u3001cache\u3001swap\u8fd8\u53ef\u53c2\u8003 ` https://blog.csdn.net/dingding_ting/article/details/86495076 ` \u4e2d\u65ad\u662f\u4e00\u4e2a\u5f02\u6b65\u7684\u4e8b\u4ef6\u5904\u7406\u673a\u5236,\u53ef\u4ee5\u63d0\u9ad8\u64cd\u4f5c\u7cfb\u7edf\u5904\u7406\u5e76\u53d1\u7684\u80fd\u529b. \u4e2d\u65ad\u53c2\u8003\u94fe\u63a5: ` https://www.cnblogs.com/linhaifeng/articles/13916102.html ` \u786c\u4ef6\u4e2d\u65ad\u76f8\u5f53\u4e8e\u786c\u6027\u6253\u65ad\u4f60\u624b\u4e2d\u7684\u6d3b,\u53bb\u5e72\u6307\u6d3e\u7684\u6d3b,\u7136\u540e\u53c8\u6765\u5176\u4ed6\u6d3b\u4e86,\u53c8\u6253\u65ad\u624b\u4e2d\u7684\u6d3b,\u6700\u540e\u5565\u4e5f\u505a\u4e0d\u6210... \u8f6f\u4ef6\u4e2d\u65ad\u76f8\u5f53\u4e8e\u6765\u6d3b\u4e86,ok,\u6211\u8bb0\u5f55\u4e86\u4e0b\u6765,\u5408\u9002\u7684\u65f6\u5019,\u4f1a\u53bb\u6267\u884c\u5b83... Q1: what \u5e73\u5747\u8d1f\u8f7d \uff1f A1: \u5e73\u5747\u8d1f\u8f7d\u662f\u6307, \u5355\u4f4d\u65f6\u95f4\u5185\u7cfb\u7edf\u5904\u4e8e\u53ef\u8fd0\u884c\u72b6\u6001\u548c\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u5e73\u5747\u8fdb\u7a0b\u6570, \u4e5f\u5c31\u662f\u5e73\u5747\u6d3b\u8dc3\u8fdb\u7a0b\u6570.. [ root@localhost ~ ] # uptime 10 :34:42 up 8 days, 16 :10, 4 users, load average: 0 .00, 0 .02, 0 .05 Q2: \u5e73\u5747\u8d1f\u8f7d\u591a\u5c11\u5408\u7406? A2: \u5982\u4e0b ------------------------------------------------ \u6838\u5fc3\u6570 \u5e73\u5747\u8d1f\u8f7d \u542b\u4e49 ------------------------------------------------ 4 4 \u6bcf\u4e2acpu ( \u6838 ) \u90fd\u5728\u6ee1\u8d1f\u8f7d\u8fd0\u884c 4 < 4 \u8fd8\u6709\u7a7a\u95f2 , \u95ee\u9898\u4e0d\u5927 4 > 4 \u8d85\u8d1f\u8377\u8fd0\u884c -- --- --- --- --- --- --- --- 4 2 \u6709\u4e00\u534a ( 50 % ) \u7684CPU\u662f\u7a7a\u95f2\u72b6\u6001 2 2 CPU\u521a\u597d\u5b8c\u5168\u88ab\u5360\u7528 1 2 \u81f3\u5c11\u4e00\u534a\u7684\u8fdb\u7a0b\u662f\u62a2\u4e0d\u5230CPU ------------------------------------------------ Q3: \u5e73\u5747\u8d1f\u8f7d\u7684\u4e09\u4e2a\u6570\u503c\u5982\u4f55\u770b\uff1f A3: \u4e09\u4e2a\u503c\u76f8\u5f53\u4e8e\u4e09\u4e2a\u6837\u672c, \u6211\u4eec\u5e94\u8be5\u7edf\u7b79\u7684\u770b 1> \u82e51\u5206\u949f,5\u5206\u949f,15\u5206\u949f\u7684\u8d1f\u8f7d\u6570\u503c\u76f8\u5dee\u4e0d\u5927. \u5e76\u4e14\u90fd\u6ca1\u6709\u6ee1\u8d1f\u8377, \u5219\u4ee3\u8868\u7cfb\u7edf\u7684\u8d1f\u8f7d\u5f88'\u7a33\u5b9a' 2> \u82e51\u5206\u949f( \u5f53\u524d\u65f6\u95f4\u5f80\u8fc7\u53bb\u63a81\u5206\u949f )\u7684\u8d1f\u8f7d\u503c\u8fdc\u5c0f\u4e8e15\u5206\u949f( \u5f53\u524d\u65f6\u95f4\u5f80\u8fc7\u53bb\u63a815\u5206\u949f )\u7684. \u90a3\u4e48\u8bc1\u660e\u8fc7\u53bb\u7cfb\u7edf\u7ecf\u53d7\u4e86\u9ad8\u5e76\u53d1,\u4f46\u73b0\u76ee\u524d\u7684\u538b\u529b\u964d\u4e0b\u6765\u4e86.. \u4e0d\u5fc5\u7d27\u5f20,\u4f4615\u5206\u949f\u533a\u95f4\u5185,\u7cfb\u7edf\u8d1f\u8f7d\u4e0a\u5347\u7684\u539f\u56e0,\u8fd8\u9700\u8981\u6211\u4eec\u8ba4\u771f\u67e5\u660e 3> \u82e51\u5206\u949f\u7684\u8d1f\u8f7d\u503c\u8fdc\u8d85\u8fc715\u5206\u949f\u7684. \u90a3\u4e48\u8bc1\u660e\u8fc7\u53bb\u6ca1\u6709\u9ad8\u5e76\u53d1,\u4f46\u662f\u6b64\u523b\u6b63\u5728\u7ecf\u53d7\u9ad8\u5e76\u53d1..\u9700\u8981\u5206\u6790\u5904\u7406.. 4> \u4e00\u65e61\u5206\u949f\u7684\u5e73\u5747\u8d1f\u8f7d\u63a5\u8fd1\u6216\u8d85\u8fc7\u4e86CPU\u7684\u4e2a\u6570, \u5c31\u610f\u5473\u7740\u7cfb\u7edf\u6b63\u5728\u53d1\u751f\u8fc7\u8f7d\u7684\u95ee\u9898, \u8fd9\u65f6\u5019\u5c31\u5f97\u5206\u6790\u4f18\u5316.. while true ; do (( 1 +1 )) ; done & # -- \u65e0\u4efb\u4f55\u7684IO,\u4f11\u7720\u884c\u4e3a \u7eaf\u8ba1\u7b97\u578b while true ; do (( 1 +1 )) ; sleep 0 .1 ; done & # -- \u6b64\u8fdb\u7a0b\u542f\u52a8\u540e,\u540e\u53f0\u8fd0\u884c,\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u5728\u7761 IO\u5bc6\u96c6\u578b IO\u5bc6\u96c6\u578b: \u8be5\u8fdb\u7a0b\u5927\u91cf\u7684\u65f6\u95f4\u5728\u505aIO, \u505aIO\u7684\u65f6\u95f4\u8fdc\u5927\u4e8e\u8ba1\u7b97\u7684\u65f6\u95f4 \u5bf9cpu\u7684\u5f71\u54cd\u4e0d\u5927,\u4f46\u67b6\u4e0d\u4f4f\u91cf\u591a!!! \u8ba1\u7b97\u5bc6\u96c6\u578b: \u8be5\u8fdb\u7a0b\u5927\u91cf\u7684\u65f6\u95f4\u5728\u505a\u8fd0\u7b97, \u8ba1\u7b97\u7684\u65f6\u95f4\u8fdc\u5927\u4e8e\u505aIO\u7684\u65f6\u95f4 \"\"\" \u8865\u5145\u4e24\u5de5\u5177(\u4e86\u89e3\u5373\u53ef) \"\"\" \u25b2 ` yum install stress -y ` stress\u662fLinux\u7cfb\u7edf\u538b\u529b\u6d4b\u8bd5\u5de5\u5177,\u53ef\u7528\u4f5c\u5f02\u5e38\u8fdb\u7a0b\u6a21\u62df\u5e73\u5747\u8d1f\u8f7d\u5347\u9ad8\u7684\u573a\u666f \u9700\u8981\u5b89\u88c5 stress\u672c\u8d28\u5c31\u662f\u5c31\u662f\u8fdb\u884c\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u6b7b\u5faa\u73af # -- 4\u4ee3\u88684\u4e2a\u6838 3000\u4ee3\u8868\u6301\u7eed\u52a0\u538b3000\u79d2 \u6267\u884c\u6b64\u547d\u4ee4\u540e\u4f1a\u77ac\u95f4\u5c064\u4e2acpu\u5360\u6ee1 stress --cpu 4 --timeout 3000 \u25b2 ` yum install sysstat -y ` \u4f1a\u5f97\u5230\u4e0b\u8ff0\u4e24\u4e2a\u547d\u4ee4 mpstat \u662f\u591a\u6838CPU\u6027\u80fd\u5206\u6790\u5de5\u5177,\u7528\u6765\u5b9e\u65f6\u68c0\u67e5\u6bcf\u4e2aCPU\u7684\u6027\u80fd\u6307\u6807,\u4ee5\u53ca\u6240\u6709CPU\u7684\u5e73\u5747\u6307\u6807. mpstat -P ALL 3 # -- \u8f93\u51fa\u5168\u90e8cpu\u6240\u6709\u6307\u6807,\u4ee53\u79d2\u4e3a\u95f4\u9694\u4e0d\u95f4\u65ad\u5237 pidstat \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u8fdb\u7a0b\u6027\u80fd\u5206\u6790\u5de5\u5177,\u7528\u6765\u5b9e\u65f6\u67e5\u770b\u8fdb\u7a0b\u7684CPU\u3001\u5185\u5b58\u3001IO\u4ee5\u53ca\u4e0a\u4e0b\u6587\u5207\u6362\u7b49\u6027\u80fd\u6307\u6807. pidstat -u 1 5 # -- 1\u79d2\u4e00\u6b21,\u603b\u5171\u8f93\u51fa5\u6b21 [\u8fdb\u7a0b\u4fe1\u606f] \u00b6 PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND TIME: \u8fdb\u7a0b\u4f7f\u7528\u7684CPU\u65f6\u95f4\u603b\u8ba1,\u5355\u4f4d\u79d2 TIME+: \u8fdb\u7a0b\u4f7f\u7528\u7684CPU\u65f6\u95f4\u603b\u8ba1,\u5355\u4f4d1/100\u79d2 VIRT: virtual memory usage \u865a\u62df\u5185\u5b58 1> \u9884\u5148\u5206\u914d\u7ed9\u8be5\u8fdb\u7a0b\u8fd9\u4e48\u591a,\u4f46\u4e0d\u4ee3\u8868\u5b9e\u9645\u5360\u7528\u8fd9\u4e48\u591a. 2> \u662f\u6307\u8be5\u8fdb\u7a0b\u201c\u9700\u8981\u7684\u201d\u865a\u62df\u5185\u5b58\u5927\u5c0f,\u5305\u62ec\u8fdb\u7a0b\u4f7f\u7528\u7684\u5e93\u3001\u4ee3\u7801\u3001\u6570\u636e\u7b49.. 3> \u8ddfswap\u5206\u533a\u6ca1\u6709\u5173\u7cfb\uff01\uff01 RES: resident memory usage \u5e38\u9a7b\u5185\u5b58 1> \u8fdb\u7a0b\u5f53\u524d\u4f7f\u7528/\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f, \u4f46\u4e0d\u5305\u62ecswap out 2> RES\u5305\u542b\u4e86SHR\u5171\u4eab\u7a7a\u95f4 SHR: shared memory \u5171\u4eab\u5185\u5b58 \u5f53\u5185\u5b58\u4e0d\u591f\u7528\u65f6,\u6b64\u503c\u4f1a\u589e\u5927,\u6324\u4e00\u6324\u561b; \u5f53KiB Swap\u4ea4\u6362\u533a\u7684used\u503c\u964d\u4e0b\u6765\u4e86,\u4ee3\u8868\u7269\u7406\u5185\u5b58\u5728\u6062\u590d\u6b63\u5e38,SHR\u4f1a\u964d\u4f4e. \u8ba1\u7b97\u4e00\u4e2a\u8fdb\u7a0b\u5b9e\u9645\u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f RES \u2013 SHR \u663e\u793a\u5185\u5bb9\u7684\u64cd\u4f5c \u00b6 \u4e0b\u8ff0\u7684\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u90fd\u4f1a\u5237\u65b0\u4e0btop\u663e\u793a\u7684\u5185\u5bb9 \u4e0a\u4e0b\u952e \u5f80\u4e0a\u5f80\u4e0b\u7684\u7ffb\u770b\u6240\u6709\u8fdb\u7a0b h or ? \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f q or control + c \u9000\u51fa s \u6539\u53d8\u5237\u65b0\u7684\u65f6\u95f4\u9891\u7387,\u9ed8\u8ba4\u662f3.0\u79d2 Ps: \u5237\u65b0\u9891\u7387\u522b\u8bbe\u7f6e\u7684\u592a\u9ad8 \u4f8b\u59820.001s,\u56e0\u4e3a\u5f88\u6d88\u8017cpu\u7684\u8d44\u6e90.. M \u6309\u7167\u5360\u7528\u5185\u5b58\u8fdb\u884c\u6392\u5e8f P \u6309\u7167cpu\u7684\u5360\u7528\u7387\u8fdb\u884c\u6392\u5e8f N \u6309\u7167PID\u8fdb\u884c\u6392\u5e8f Ps: \u6392\u5e8f\u7684\u7ed3\u679c \u9ed8\u8ba4 \u90fd\u662f \u4ece\u9ad8\u5230\u4f4e shift + > shift + < \u5411\u53f3\u3001\u5411\u5de6 \u5410\u69fd\u4e0b: \u6ca1\u6709\u660e\u786e\u63d0\u793a\u5bf9\u54ea\u4e2a\u5b57\u6bb5\u6392\u5e8f \u5373\u5c06\u6392\u5e8f\u4f5c\u7528\u4e8e\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5 \u53f3\u8fb9/\u5de6\u8fb9 \u7684\u5b57\u6bb5 R \u5c06\u5f53\u524d\u6392\u5e8f\u7684\u5b57\u6bb5\u7ed3\u679c\u8fdb\u884c\u53cd\u8f6c f *\u6807\u8bb0\u7684\u662f\u754c\u9762\u4e0a\u4f1a\u663e\u793a\u7684\u5b57\u6bb5 \u6309\u7a7a\u683c\u9009\u62e9/\u53d6\u6d88 \u65b0\u9009\u62e9\u7684\u4f1a\u5728\u754c\u9762\u6700\u53f3\u8fb9\u663e\u793a z \u5f69\u8272\u754c\u9762 \u829c\u6e56\uff5e k \u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7 1 \u6309\u4e0b\u6570\u5b571\u4f1a\u663e\u793a\u6240\u6709CPU\u7684\u8d1f\u8f7d %Cpu ( s ) : 1 .0 us, 2 .0 sy, 0 .0 ni, 97 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st %Cpu0 : 1 .0 us, 1 .0 sy, 0 .0 ni, 98 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st ## -- \u591a\u4e2a\u6838\u7684\u8bdd %Cpu0\u3001%Cpu1\u3001%Cpu2... r \u8c03\u6574\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7(\u5373\u4fee\u6539\u8be5\u8fdb\u7a0b\u7684nice\u503c) \u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8 PID to renice [ default pid = 2216 ] 72122 Renice PID 72122 to value -10 ## -- PR\u503c\u4e0eNI\u503c\u662f\u76f8\u5bf9\u5e94\u7684 PR\u4f1a\u5728NI\u503c\u4e0a\u52a020 PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 72062 dc 20 0 116960 3328 1708 S 0 .0 0 .3 0 :00.09 bash 72122 dc 10 -10 108052 356 284 S 0 .0 0 .0 0 :00.00 sleep 73191 dc 20 0 108052 360 284 S 0 .0 0 .0 0 :00.00 sleep \u7f51\u7edc\u6709\u5173\u7684\u67e5\u770b \u00b6 \u25b2 \u67e5\u770b\u7f51\u7edc\u72b6\u6001 \"\"\" -t tcp\u534f\u8bae -u udp\u534f\u8bae -n \u4e0d\u53cd\u89e3,\u4e0d\u5c06IP\u5730\u5740\u89e3\u6790\u4e3a\u4e3b\u673a\u540d,\u4e0d\u5c06\u7aef\u53e3\u53f7\u89e3\u6790\u6210\u534f\u8bae\u540d eg:\u4e0d\u52a0\u6b64\u9009\u9879 127.0.0.1 --> localhost 22\u7aef\u53e3 --> ssh -a \u5168\u90e8 -l listen -p PID/Program name \"\"\" netstat -tunalp netstat -an | grep :22 netstat -an | grep :80 lsof -i:22 ## -- \u53ef\u7528\u4e8e\u5feb\u901f\u9a8c\u8bc1\u67d0\u4e2a\u7aef\u53e3\u662f\u5426\u5f00\u542f \u25b2 \u67e5\u770b\u7f51\u5173 route -n [ root@localhost ~ ] # route -n Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface ## 0.0.0.0\u6307\u4ee3\u6240\u6709\u7684IP\u5730\u5740 \u53bb\u5f80\u6240\u6709\u7684IP\u5730\u5740\u90fd\u901a\u8fc7172.16.150.2\u7f51\u5173\u8fdb\u884c\u8f6c\u53d1 0 .0.0.0 172 .16.150.2 0 .0.0.0 UG 0 0 0 ens33 172 .16.150.0 0 .0.0.0 255 .255.255.0 U 0 0 0 ens33 \u67e5\u770b\u7cfb\u7edf\u72b6\u6001 \u00b6 \u56f4\u7ed5\u4e09\u5927\u6838\u5fc3\u786c\u4ef6 -- cpu\u3001\u5185\u5b58\u3001\u786c\u76d8 cpu: /proc/cpuinfo \u5185\u5b58: /proc/meminfo \u786c\u76d8 \u00b6 \u8be6\u89c1 5_\u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf.md du -sh /etc # -- \u7edf\u8ba1\u67d0\u4e2a\u6587\u4ef6\u5939\u6240\u5305\u542b\u7684\u6240\u6709\u5185\u5bb9\u7684\u5927\u5c0f df df -h ## \u5e26\u5355\u4f4d df -T ## \u5e26\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b \u5185\u5b58!! \u00b6 top \u547d\u4ee4\u663e\u793a\u7684\u7cfb\u7edf\u6574\u4f53\u7edf\u8ba1\u4fe1\u606f\u91cc\u5c31\u6709\u5185\u5b58\u7684\u4fe1\u606f \u4e5f\u53ef\u4ee5\u901a\u8fc7 free \u547d\u4ee4\u76f4\u63a5\u67e5\u770b [free\u7ed3\u679c\u7684\u5b57\u6bb5] \u00b6 \u300ctotal = used + free + buffers + cache \u300d So, Linux\u7684\u5185\u5b58\u5927\u4f53\u53ef\u5206\u4e3a\u4e09\u90e8\u5206, \u5e94\u7528\u7a0b\u5e8f\u5360\u7528\u7684,\u7a7a\u95f2\u7684,\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u8bfb\u5199\u505a\u4f18\u5316\u7684 \u6ce8\u610f! \u67e5\u770b\u771f\u6b63\u6709\u591a\u5c11\u7269\u7406\u5185\u5b58\u53ef\u4ee5\u7528(\u4e0d\u8003\u8651swap\u5206\u533a),\u770bfree\u4e0d\u51c6\u786e,\u770bavailable\u5b57\u6bb5\u6700\u51c6\u786e.. available\u503c\u662f\u5927\u4e8efree\u503c\u7684... \u591a\u7684\u90a3\u90e8\u5206\u662fbuff/cache\u53ef\u91ca\u653e\u7684\u7a7a\u95f4.. \u5373 available = free + \u53ef\u91ca\u653e\u7684buff/cache So, \u7269\u7406\u5185\u5b58\u8fd8\u6709\u591a\u5c11\u53ef\u4ee5\u7528(\u767e\u5206\u6bd4) = available / total ## -- free\u547d\u4ee4\u663e\u793a\u4e86\u7cfb\u7edf\u4e2d\u5185\u5b58\u7684\u5269\u4f59\u91cf\u548c\u4f7f\u7528\u91cf \"\"\" \u547d\u4ee4\u9009\u9879 -b \u5b57\u8282\u4e3a\u5355\u4f4d -k kb\u4e3a\u5355\u4f4d(\u9ed8\u8ba4) -m M\u4e3a\u5355\u4f4d \u6ce8\u610f\u54e6,\u8f6c\u6362\u5355\u4f4d\u540e\u4f1a\u8fdb\u884c\u56db\u820d\u4e94\u5165,\u4e0d\u662f\u4e25\u4e1d\u5408\u7f1d\u4e00\u6837\u7684,\u5927\u4f53\u4e0a\u4e00\u6837 -w buffer\u8ddfcache\u5206\u5f00\u663e\u793a \u663e\u793a\u7ed3\u679c\u5b57\u6bb5 total: \u5b89\u88c5\u7684\u5185\u5b58\u5927\u5c0f,\u5373\u5185\u5b58\u6761\u603b\u5171\u7684\u5927\u5c0f used: \u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f,\u51c6\u786e\u70b9\u6765\u8bf4\u6307\u7684\u662f\u5728\u5185\u5b58\u4e2d\u8dd1\u7684\u5e94\u7528\u7a0b\u5e8f\u5360\u7528\u7684\u7a7a\u95f4 free: \u7a7a\u95f2\u7684,used\u53ef\u4ee5\u7528,buff/cache\u4e5f\u53ef\u4ee5\u7528 shared: \u5171\u4eab\u7684\u5185\u5b58,\u6307used\u4e2d\u6709\u90e8\u5206\u5185\u5b58\u662f\u8fdb\u7a0b\u4eec\u5171\u4eab\u7684 \u8fd9\u4e0e\u524d\u9762\u8fdb\u7a0b\u4fe1\u606f\u90e8\u5206`RES \u2013 SHR`\u547c\u5e94\u4e0a\u5566.. buff/cache: buff/cache\u91ca\u653e\u540e\u7ed9\u4e86free available: \u8868\u660e\u76ee\u524d\u53ef\u4ee5\u63d0\u4f9b\u7ed9\u65b0\u542f\u52a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58 \"\"\" [ root@localhost ~ ] # free -wm total used free shared buffers cache available Mem: 972 634 84 17 0 253 165 Swap: 2047 80 1967 [\u91ca\u653ebuff/cache] \u00b6 sync echo 3 > /proc/sys/vm/drop_caches buffer\u4f18\u5316\u5199,cache\u4f18\u5316\u8bfb,\u6211\u4eec\u6ca1\u4f7f\u7528,\u4f46\u64cd\u4f5c\u7cfb\u7edf\u5728\u4f7f\u7528,\u662f\u79cd\u4f18\u5316\u673a\u5236 [ root@localhost ~ ] # free -w total used free shared buffers cache available Mem: 995640 654476 81872 17576 0 259292 164964 Swap: 2097148 82688 2014460 [ root@localhost ~ ] # du -sh /etc/passwd 4 .0K /etc/passwd ## -- \u5728\u53e6\u4e00\u4e2a\u7ec8\u7aef\u6267\u884c\u547d\u4ee4 vim /etc/passwd ## \u53ef\u4ee5\u53d1\u73b0cache\u503c\u53d8\u5927\u4e86,\u662f\u4e3a\u4e86\u4e0b\u6b21\u6253\u5f00\u8be5\u6587\u4ef6\u65f6\u5019,\u80fd\u66f4\u5feb\u901f\u7684\u6253\u5f00.. [ root@localhost ~ ] # free -w total used free shared buffers cache available Mem: 995640 657212 76876 17576 0 261552 162228 Swap: 2097148 82688 2014460 [ root@localhost ~ ] # [ root@localhost ~ ] # ## \u6b64\u5904\u7684\u91ca\u653e\u662fbuffer\u548ccache\u4e00\u8d77\u91ca\u653e [ root@localhost ~ ] # ## \u91ca\u653e\u4e4b\u524d\u82e5\u6709\u5199\u884c\u4e3a,\u5199\u7684\u5185\u5bb9\u90fd\u5728buffers\u91cc\u5b58\u7740\u5462! [ root@localhost ~ ] # ## So,\u5728\u91ca\u653e\u4e4b\u524d\u9700\u8981\u591a\u6267\u884c\u51e0\u6b21sync\u547d\u4ee4,\u544a\u8bc9OS\u5c06buffer\u7f13\u51b2\u533a\u91cc\u7684\u6570\u636e\u5199\u5165\u786c\u76d8 [ root@localhost ~ ] # sync [ root@localhost ~ ] # sync [ root@localhost ~ ] # sync [ root@localhost ~ ] # ## OS\u4f1a\u5b9a\u671f\u626b\u63cf/proc/sys/vm/drop_caches\u6587\u4ef6 [ root@localhost ~ ] # ## \u8be5\u6587\u4ef6\u53ef\u4ee5\u8bbe\u7f6e\u503c0(\u9ed8\u8ba4)\u30011\u30012\u30013 0\u4ee3\u8868\u4e0d\u6e05\u7406 3\u4ee3\u8868\u6e05\u7406 [ root@localhost ~ ] # cat /proc/sys/vm/drop_caches 0 [ root@localhost ~ ] # ## \u6ce8\u610f\u54e6,\u64cd\u4f5c\u7cfb\u7edf\u626b\u63cf\u65f6\u53d1\u73b0\u8be5\u6587\u4ef6\u672a\u4fee\u6539\u7684\u8bdd,\u662f\u4e0d\u4f1a\u8bfb\u53d6\u91cc\u9762\u7684\u5185\u5bb9\u7684 [ root@localhost ~ ] # ## So,\u60f3\u8981\u91ca\u653e\u65f6,\u5c31\u5f97\u6267\u884c\u4e00\u6b21 echo 3 > /proc/sys/vm/drop_caches \u8fd9\u6761\u547d\u4ee4 [ root@localhost ~ ] # echo 3 > /proc/sys/vm/drop_caches ## -- \u53ef\u4ee5\u524d\u540e\u5bf9\u6bd4\u53d1\u73b0cache\u503c\u660e\u663e\u4e0b\u964d\u5566,free\u503c\u660e\u663e\u63d0\u5347\u4e86... [ root@localhost ~ ] # free -w total used free shared buffers cache available Mem: 995640 601396 303444 17568 0 90800 268660 Swap: 2097148 82688 2014460 [\u865a\u62df\u6587\u4ef6\u7cfb\u7edf] \u00b6 \u8981\u77e5\u9053free\u662f\u4ece\u6587\u4ef6 /proc/meminfo \u91cc\u91c7\u96c6\u83b7\u53d6\u7684\u4fe1\u606f, \u800c /proc\u6587\u4ef6\u5939\u662fproc\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u70b9.. \u4f55\u4e3a \u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edf \uff1f \u4ee3\u8868\u5b83\u7684\u6570\u636e\u4e0d\u5728\u786c\u76d8\u91cc,\u800c\u662f\u5728\u5185\u5b58\u91cc,\u6302\u8f7d\u70b9\u91cc\u7684\u6570\u636e\u662f\u7cfb\u7edf\u751f\u6210\u7684.. # mount\u547d\u4ee4\u53ef\u67e5\u770b\u6302\u8f7d\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f # \u50cf/dev/sda1\u6587\u4ef6\u7cfb\u7edf(\u901a\u4fd7\u70b9\u5c31\u662f\u6307\u786c\u76d8\u5206\u533a)\u7684\u6302\u8f7d\u70b9\u662f/boot # \u786c\u76d8\u5206\u533a/\u771f\u5b9e\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u53ef\u901a\u8fc7df\u547d\u4ee4\u67e5\u770b\u5230\u7684,\u4f46\u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edfdf\u547d\u4ee4\u770b\u4e0d\u5230 [ root@localhost ~ ] # mount | grep -E \"/dev/sda1|/proc \" proc on /proc type proc ( rw,nosuid,nodev,noexec,relatime ) /dev/sda1 on /boot type xfs ( rw,relatime,attr2,inode64,noquota ) \u82e5\u5378\u8f7d\u6389proc\u8fd9\u4e2a\u865a\u62df\u6587\u4ef6\u7cfb\u7edf, free\u547d\u4ee4\u5c31\u4e0d\u80fd\u4f7f\u7528\u5566!! \u53cd\u5411\u9a8c\u8bc1\u4e86free\u547d\u4ee4\u7684\u7ed3\u679c\u90fd\u662f\u4eceproc\u8fd9\u4e2a\u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5f97\u5230\u7684!! [ root@localhost ~ ] # umount /proc -l [ root@localhost ~ ] # free Error: /proc must be mounted To mount /proc at boot you need an /etc/fstab line like: proc /proc proc defaults In the meantime, run \"mount proc /proc -t proc\" \"\"\" mount -t \u6307\u5b9a\u6587\u4ef6\u7cfb\u7edf \u865a\u62df\u6587\u4ef6\u7cfb\u7edf \u6302\u8f7d\u70b9 Ps: mount -t xfs /dev/sda1 /boot \"\"\" [ root@localhost ~ ] # mount -t proc proc /proc/ [ root@localhost ~ ] # free -m total used free shared buff/cache available Mem: 972 633 85 17 253 166 Swap: 2047 80 1967 CPU \u00b6 top\u547d\u4ee4\u7684\u7ed3\u679c\u91cc\u5305\u542b\u4e86cpu\u5de5\u4f5c\u72b6\u51b5(\u7279\u522b\u662f\u8d1f\u8f7d) \u901a\u8fc7\u67e5\u770b/proc/cpuinfo\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5f97\u5230cpu\u76f8\u5173\u7684\u786c\u4ef6\u4fe1\u606f.. ## -- \u6587\u4ef6\u4e2d\u6709\u591a\u5c11\u4e2aprocessor,\u5c31\u6709\u591a\u5c11\u4e2a\u6838(\u903b\u8f91cpu) [ root@localhost ~ ] # grep \"processor\" /proc/cpuinfo processor : 0 processor : 1 processor : 2 ## -- \u6587\u4ef6\u4e2d\u6709\u591a\u5c11\u4e2aphysical id,\u5c31\u6709\u591a\u5c11\u7269\u7406cpu [ root@localhost ~ ] # grep \"physical id\" /proc/cpuinfo physical id : 0xx ## -- cpu\u6838\u6570 [ root@localhost ~ ] # grep \"cpu cores\" /proc/cpuinfo cpu cores : 1 \"\"\" flags \u8be5\u6838\u6240\u652f\u6301\u7684\u529f\u80fd lm\uff0864\u4f4d\uff09 vmx \u652f\u6301\u865a\u62df\u5316 Intel svm \u652f\u6301\u865a\u62df\u5316 AMD \"\"\" [ root@localhost ~ ] # grep flags /proc/cpuinfo flags : fpu \u3010vme\u3011 de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology ... ... ... [ root@localhost ~ ] # lscpu Architecture: x86_64 CPU op-mode ( s ) : 32 -bit, 64 -bit Byte Order: Little Endian CPU ( s ) : 1 On-line CPU ( s ) list: 0 ... ... ...","title":"\u67e5\u770b\u8fdb\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_1","text":"<\u8fdb\u7a0b>\u662f \u64cd\u4f5c\u7cfb\u7edf\u5206\u914d\u8d44\u6e90 \u7684\u6700\u5c0f\u5355\u4f4d; <\u7ebf\u7a0b>\u662f\u7a0b\u5e8f\u6267\u884c/ cpu\u8c03\u5ea6 \u7684\u6700\u5c0f\u5355\u4f4d \u7a0b\u5e8f -- \u4e00\u5806\u4ee3\u7801\u6587\u4ef6 \u8fdb\u7a0b -- \u8fdb\u7a0b = \u8d44\u6e90\u7533\u8bf7(\u5f00\u8f9f\u5185\u5b58\u7a7a\u95f4) + \u7a0b\u5e8f\u6267\u884c(\u8fd0\u884c\u4ee3\u7801) \u4e00\u822c\u4f1a\u7b3c\u7edf\u7684\u8bf4\u662f\u7a0b\u5e8f\u7684\u8fd0\u884c\u8fc7\u7a0b; \u4e25\u8c28\u70b9\u8fd9\u79cd\u8bf4\u6cd5\u6307\u7684\u662f\u7ebf\u7a0b \u5373 \u8fdb\u7a0b = \u8d44\u6e90\u7533\u8bf7 + \u591a\u4e2a\u7ebf\u7a0b\u6267\u884c \u4ea6\u6216\u8005\u8bf4\u662f\u64cd\u4f5c\u7cfb\u7edf\u63a7\u5236\u7740\u786c\u4ef6\u53bb\u8fd0\u884c\u7a0b\u5e8f\u7684\u8fc7\u7a0b; \u8fdb\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u6700\u6838\u5fc3\u7684\u6982\u5ff5,\u6ca1\u6709\u4e4b\u4e00! \u5e76\u53d1 -- \u591a\u4e2a \u4efb\u52a1 \u770b\u8d77\u6765 \u662f \u540c\u65f6\u8fd0\u884c \u7684\u5373\u53ef. OS\u7684\u591a\u9053\u6280\u672f\u5b9e\u73b0\u5e76\u53d1: (\u8fd9\u91cc\u8ba8\u8bba\u4e00\u4e2acpu\u7684\u60c5\u51b5\u4e0b),\u5148\u5c06\u591a\u4e2a\u4efb\u52a1\u8bfb\u5230\u5185\u5b58\u91cc, \u5b9e\u73b0\u7a7a\u95f4\u4e0a\u7684\u590d\u7528 -- \u4efb\u52a1\u8ddf\u4efb\u52a1\u4e4b\u95f4\u5185\u5b58\u7a7a\u95f4\u4e0a\u5b9e\u73b0\u7269\u7406( \u5373\u786c\u4ef6 )\u5c42\u9762\u7684\u4e92\u76f8\u9694\u79bb; \u8be6\u7ec6\u6765\u8bf4,\u5c31\u6d89\u53ca\u5230\u865a\u62df\u5185\u5b58,\u865a\u62df\u5730\u5740,\u5185\u5b58\u5206\u9875\u7b49OS\u5185\u5b58\u7ba1\u7406\u7684\u77e5\u8bc6\u5566..\u4e0d\u5fc5\u6df1\u7a76!! \u5b9e\u73b0\u65f6\u95f4\u4e0a\u7684\u590d\u7528 -- \u7b80\u5355\u6765\u8bf4, cpu\u5728\u591a\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5feb\u901f\u6765\u56de\u5207\u6362.. \u901a\u5e38\u91c7\u7528\u7684\u662f\u65f6\u95f4\u7247\u8f6e\u8f6c\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\u65b9\u5f0f..\u7531\u4e8eCPU\u7684\u6267\u884c\u6548\u7387\u975e\u5e38\u9ad8,\u65f6\u95f4\u7247\u975e\u5e38\u77ed, \u5728\u5404\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5feb\u901f\u5730\u5207\u6362\uff0c\u7ed9\u4eba\u7684\u611f\u89c9\u5c31\u662f\u591a\u4e2a\u4efb\u52a1\u5728\"\u540c\u65f6\u8fdb\u884c\" Ps: cpu\u7684\u6027\u80fd\u5f88\u5f3a,\u80fd\u5feb\u901f\u5728\u4e0a\u4e07\u4e2a\u4efb\u52a1\u4e4b\u95f4\u5207\u6362,\u4f46\u4e5f\u8981\u53d7\u9650\u4e8e\u5185\u5b58\u80fd\u88c5\u4e0b\u4e0a\u4e07\u4e2a\u4efb\u52a1.. \u63d0\u5347\u8ba1\u7b97\u673a\u7684\u6027\u80fd -- \u52a0\u5185\u5b58\u6761;\u63d0\u5347\u8f6f\u4ef6\u7684\u542f\u52a8\u901f\u5ea6,IO\u76f8\u5173 -- \u7528\u56fa\u6001\u786c\u76d8.. \u5e76\u884c -- \u591a\u4e2a \u4efb\u52a1 \u662f \u771f\u6b63\u7684 \u540c\u65f6\u8fd0\u884c \u7684. \u53ea\u6709 \u591a\u6838 \u624d\u80fd\u5b9e\u73b0\u5e76\u884c.. 4\u68388\u7ebf\u7a0b, \u6bd4\u7eaf8\u6838\u6027\u80fd\u4f4e\u4e00\u4e9b,\u6bd4\u7eaf4\u6838\u8981\u5f3a\u4e00\u4e9b.. 4\u6838 -- \u4e0d\u7ba1\u771f\u5b9e\u60c5\u51b5\u4e0b\u6709\u591a\u4e2acpu,\u4f464\u4e2a\u6838\u5fc3\u5c31\u76f8\u5f53\u4e8e4\u4e2acpu; 8\u7ebf\u7a0b -- \u6bcf\u4e00\u4e2a\u6838\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\u4e24\u6761\u6d41\u6c34\u7ebf; 4X2=8; \u7ebf\u7a0b -- \u968f\u7740\u8ba1\u7b97\u673a\u7684\u53d1\u5c55, \u5bf9CPU\u7684\u8981\u6c42\u8d8a\u6765\u8d8a\u9ad8, \u8fdb\u7a0b\u4e4b\u95f4\u7684\u5207\u6362\u5f00\u9500\u8f83\u5927, \u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u8d8a\u6765\u8d8a\u590d\u6742\u7684\u7a0b\u5e8f\u7684 \u8981\u6c42,\u4e8e\u662f\u5c31\u53d1\u660e\u4e86\u7ebf\u7a0b.\u5b83\u662f\u4ece\u8fdb\u7a0b\u91cc\u5265\u79bb\u51fa\u7684\u4e00\u4e2a\u6982\u5ff5. \u5355\u6307\u8fdb\u7a0b\u6982\u5ff5\u91cc \u4ee3\u7801\u7684\u6267\u884c\u8fc7\u7a0b. \u4e00\u4e2a\u8fdb\u7a0b\u5185\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b.. \u7ebf\u7a0b\u624d\u662fcpu\u4e0a\u7684\u6267\u884c\u5355\u4f4d( \u5373\u4e0a\u6587\u7684\u4efb\u52a1\u4e25\u8c28\u70b9\u6307\u7684\u5c31\u662f\u7ebf\u7a0b ) \u5f3a\u8c03! cpu\u662f\u8fd0\u884c\u4ee3\u7801\u7684,\u786c\u76d8\u3001\u5185\u5b58\u3001\u7f51\u5361\u7b49\u786c\u4ef6\u8bbe\u5907\u624d\u662f\u505aIO\u7684 \u591a\u7ebf\u7a0b -- \u4e00\u4e2a\u8fdb\u7a0b\u5185\u5f00\u591a\u4e2a\u7ebf\u7a0b , \u6ce8\u610f\u54e6 \u662f \u4e00\u4e2a \u8fdb\u7a0b \u6253\u4e2a\u6bd4\u65b9,OS\u662f\u4e00\u4e2a\u5de5\u5382,\u4e00\u4e2a\u8fdb\u7a0b\u5c31\u662f\u8be5\u5de5\u5382\u7684\u4e00\u4e2a\u8f66\u95f4, \u8f66\u95f4\u662f\u4e00\u4e2a\u8d44\u6e90\u5355\u4f4d ; \u4e00\u4e2a\u8f66\u95f4\u91cc\u9762\u53ef\u4ee5\u6709\u7528\u4e8e\u52a0\u5de5\u7684\u4e00\u6761\u6216\u591a\u6761\u6d41\u6c34\u7ebf(\u7ebf\u7a0b) \u7279\u70b9: \u4e00\u4e2a\u8fdb\u7a0b\u91cc\u7684\u591a\u4e2a\u7ebf\u7a0b\u53ef\u4ee5 \u5171\u4eab \u8be5\u8fdb\u7a0b\u7684\u5185\u5b58\u8d44\u6e90!! \u5f53\u7136\u7ebf\u7a0b\u62e5\u6709\u5c5e\u4e8e\u81ea\u5df1\u7684\u4e00\u5c0f\u90e8\u5206\u8d44\u6e90, \u5c31\u662f\u6808\u7a7a\u95f4, \u4fdd\u5b58\u5176\u8fd0\u884c\u72b6\u6001\u548c\u5c40\u90e8\u81ea\u52a8\u53d8\u91cf\u7684 \u4e0d\u540c\u8fdb\u7a0b\u91cc\u7684\u591a\u4e2a\u7ebf\u7a0b\u7684\u5185\u5b58\u8d44\u6e90 \u4e92\u76f8\u9694\u79bb !! \u4efb\u52a1\u7684\u4e09\u79cd\u8fd0\u884c\u72b6\u6001 -- \u975e\u963b\u585e\u6001(\u8fd0\u884c\u6001 \u5c31\u7eea\u6001)\u3001\u963b\u585e\u6001 \u63d0\u4ea4\u4efb\u52a1\u7684\u65b9\u5f0f -- \u540c\u6b65\u3001\u5f02\u6b65 Ps: \u63d0\u4ea4\u4efb\u52a1\u7684\u65b9\u5f0f\u4e0e\u4efb\u52a1\u7684\u4e09\u79cd\u8fd0\u884c\u72b6\u6001 \u4e0d\u80fd\u6df7\u4e3a\u4e00\u8c08 !!\u5c3d\u7ba1\u540c\u6b65\u8ddf\u963b\u585e\u90fd\u4f1a\u6709\u4e00\u79cd\u8ba9\u4eba\u7b49\u5f85\u7684\u611f\u89c9... \u4ee5\u540c\u6b65\u63d0\u4ea4\u7684\u65b9\u5f0f\u63d0\u4ea4\u7684\u4efb\u52a1,\u4f1a\u5728\u539f\u5730\u7b49\u5f85,\u5728\u6b64\u671f\u95f4\u4efb\u52a1\u53ef\u80fd\u4f1a\u8fdb\u5165\u963b\u585e\u6001\u6216\u975e\u963b\u585e\u6001.. Q: \u82e5\u9700\u8981 \u5e76\u53d1 10\u4e2a\u4efb\u52a1,\u5982\u4f55\u5b9e\u73b0\uff1f \u5e76\u53d1\u7b2c\u4e00\u53cd\u5e94\u662fcpu\u4f1a\u572810\u4e2a\u4efb\u52a1\u4e4b\u95f4\u4e0d\u505c\u8c03\u5ea6,\u8ddf4\u68388\u7ebf\u7a0b\u4ec0\u4e48\u7684\u5e76\u884c\u6ca1\u76f4\u63a5\u5173\u7cfb.. A: \u65b9\u6848\u4e00:\u4e00\u4e2a\u8f66\u95f4\u91cc\u5f0010\u6761\u6d41\u6c34\u7ebf; \u65b9\u6848\u4e8c: \u670910\u4e2a\u8f66\u95f4,\u6bcf\u4e2a\u8f66\u95f4\u90fd\u53ea\u6709\u4e00\u6761\u6d41\u6c34\u7ebf.. \u524d\u8005\u80af\u5b9a\u4f18\u4e8e\u540e\u8005,\u56e0\u4e3a\u542f\u7528\u8fdb\u7a0b\u7684\u5f00\u9500\u6bd4\u7ebf\u7a0b\u5927. \u542f\u52a8\u8fdb\u7a0b\u6d89\u53ca\u5230\u975e\u5e38\u8017\u8d39\u8d44\u6e90\u7684\u7533\u8bf7\u5185\u5b58\u7a7a\u95f4\u7684IO\u64cd\u4f5c. \u542f\u7528\u7ebf\u7a0b\u5c31\u662f\u5f00\u4e00\u6761\u6d41\u6c34\u7ebf,\u5c31\u53ea\u9700\u8981\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\u4e00\u58f0,\u53ebOS\u5e2e\u5fd9\u8c03\u5ea6\u4e0b\u6b64\u6d41\u6c34\u7ebf.. So, \u82e5\u53ea\u662f\u5e76\u53d1\u7684\u8bdd,\u63a8\u8350\u4e00\u4e2a\u8fdb\u7a0b\u91cc\u5f00\u591a\u4e2a\u7ebf\u7a0b.. Ps: nginx\u4e0d\u662f\u5355\u7eaf\u4f7f\u7528\u65b9\u6848\u4e00,\u5047\u8bbecpu\u662f4\u6838\u7684,\u5c31\u4f1a\u5f00\u542f4\u4e2a\u8fdb\u7a0b,\u82e5\u6bcf\u4e2a\u8fdb\u7a0b\u91cc\u670920\u4e2a\u7ebf\u7a0b,\u5c31\u53ef\u4ee5\u5e76\u53d180\u4e2a\u4efb\u52a1.. \u4e58\u4e0a\u542f\u4e0b: \u5148\u7406\u6e05\u51e0\u4e2a\u8bf4\u6cd5 1 > \u56e0\u4e3a\u4e00\u4e2a\u8fdb\u7a0b\u5185\u81f3\u5c11\u6709\u4e00\u4e2a\u7ebf\u7a0b,so,\u6211\u4eec\u8bf4cpu\u8c03\u5ea6\u8fdb\u7a0b,\u51c6\u786e\u70b9\u662f\u6307cpu\u8c03\u5ea6\u8fdb\u7a0b\u5185\u7684\u90a3\u4e2a\u7ebf\u7a0b.. 2 > \u5e76\u884c\u53ea\u9002\u7528\u4e8e\u591a\u6838,\u82e5\u662f4\u6838,\u610f\u5473\u7740\u53ef\u4ee5\u5e76\u884c4\u4e2a\u7ebf\u7a0b. \u6bcf\u4e2a\u6838\u4e0d\u53ef\u80fd\u957f\u65f6\u95f4\u56fa\u5b9a\u8c03\u5ea6\u540c\u4e00\u4e2a\u7ebf\u7a0b,\u6838\u5c31\u9700\u8981\u5728\u591a\u4e2a\u7ebf\u7a0b\u4e4b\u95f4\u5207\u6362,\u65b9\u5f0f\u4e4b\u4e00\u5c31\u662f\u65f6\u95f4\u7247.. ` ps aux ` \u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f,\u6ca1\u6709\u7279\u6b8a\u6307\u660e\u591a\u7ebf\u7a0b\u7684\u8bdd,\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u6210\u67e5\u770b\u8fdb\u7a0b\u91cc\u90a3\u4e00\u4e2a\u7ebf\u7a0b\u7684\u4fe1\u606f. ` \u4efb\u52a1\u7684\u4e09\u79cd\u8fd0\u884c\u72b6\u6001 ` \u4e4b\u95f4\u7684\u5207\u6362\u540c\u7406.\u6b64\u5904\u7684\u4efb\u52a1\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u6210\u7ebf\u7a0b. \u8865\u5145\u51e0\u4e2a\u77e5\u8bc6\u70b9 ( \u81ea\u5df1\u7406\u89e3\u7684\u5f88\u7b3c\u7edf,\u4e0d\u662f\u5f88\u51c6\u786e,\u4f46\u5927\u4f53\u610f\u601d\u5230\u5dee\u4e0d\u5dee\u7684 ) : \u4f5c\u4e1a\u3001\u7a0b\u5e8f\u3001\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb \u8be6\u89c10_\u8ba1\u7b97\u673a\u57fa\u7840/2_\u64cd\u4f5c\u7cfb\u7edf.md \u591a\u9053\u6280\u672f!!! -- \u5e76\u53d1 \u8fd9\u90e8\u5206\u7684\u5185\u5bb9 \u25b2 \u7236\u5b50\u8fdb\u7a0b \u540c\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u80fd\u5bf9\u5e94\u591a\u4e2a\u8fdb\u7a0b \u7236\u8fdb\u7a0b:\u7a0b\u5e8f\u8fd0\u884c\u65f6\u4ea7\u751f\u7684\u7b2c\u4e00\u4e2a\u8fdb\u7a0b \u5b50\u8fdb\u7a0b:\u7531\u7236\u8fdb\u7a0b\u884d\u751ffork () \u51fa\u6765\u7684\u8fdb\u7a0b,\u5b50\u8fdb\u7a0b\u51e0\u4e4e\u662f\u7236\u8fdb\u7a0b\u7684\u5b8c\u5168\u590d\u5236 ( PID\u80af\u5b9a\u662f\u4e0d\u4e00\u6837\u7684 ) \u5b50\u8fdb\u7a0b\u518d\u8c03\u7528exec\u628a\u81ea\u8eab\u66ff\u6362\u4e3a\u65b0\u7684\u8fdb\u7a0b,PID\u4e0ePPID\u662f\u4e0d\u53d8\u7684 \u4f46\u539f\u6765\u5b50\u8fdb\u7a0b\u7684\u4ee3\u7801\u6bb5\u3001\u5806\u6808\u6bb5\u3001\u6570\u636e\u6bb5\u4f1a\u88ab\u65b0\u7684\u5185\u5bb9\u53d6\u4ee3,\u7528\u6765\u6267\u884c\u65b0\u7684\u7a0b\u5e8f \u8fd9\u6837fork\u548cexec\u5c31\u6210\u4e3a\u4e00\u79cd\u7ec4\u5408,\u867d\u7136\u8fd9\u79cd\u7ec4\u5408\u4f1a\u9020\u6210\u8f83\u5927\u8d1f\u62c5 \u6ce8\u610f:\u5982\u679c\u7236\u8fdb\u7a0b\u7ec8\u6b62,\u5b50\u8fdb\u7a0b\u4e5f\u4f1a\u968f\u4e4b\u88ab\u7ec8\u6b62 fork\u7684\u7528\u9014:\u5728\u8bb8\u591a\u5ba2\u6237-\u670d\u52a1\u5668C/S\u5e94\u7528\u7a0b\u5e8f\u4e2d,\u4f1a\u6709\u8bb8\u591afork\u6267\u884c\u540c\u4e00\u4e2a\u7a0b\u5e8f\u7684\u8fdb\u7a0b, \u7528fork\u51fd\u6570\u521b\u5efa\u591a\u4e2a\u5b50\u8fdb\u7a0b\u6765\u5b9e\u73b0\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u4e1a\u52a1,\u56e0\u6b64\u7528fork\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u670d\u52a1\u5668\u7aef\u7684\u5e76\u53d1\u5e94\u7528 \u670d\u52a1\u5668\u7aef\u53ef\u4ee5\u6d88\u9664\u5ba2\u6237\u7aef\u8bf7\u6c42\u6240\u8981\u521b\u5efa\u65b0\u8fdb\u7a0b\u7684\u5f00\u9500 Ps:\u53ef\u80fd\u73b0\u76ee\u524d\u770b\u6765\u4e0d\u5408\u7406,\u4f46\u8fd9\u6837\u8bbe\u8ba1\u6709\u5386\u53f2\u9057\u7559,\u521a\u5f00\u59cb\u65f6\u5185\u5b58\u5f88\u5c0f\u7b49\u5bfc\u81f4\u7684. ( \u5177\u4f53\u7684\u6682\u4e14\u4e0d\u60f3\u6df1\u5165\u7814\u7a76\u4e86.. ) fork-exec\u7684\u7531\u6765\u53ef\u53c2\u8003 https://www.zhihu.com/question/66902460","title":"\u8fdb\u7a0b\u56de\u987e!!"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_2","text":"","title":"\u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#ps-aux","text":"ps aux \u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u4e2d \u90a3\u4e00\u65f6\u523b \u6240\u6709\u8fd0\u884c\u7684\u8fdb\u7a0b( \u524d\u540e\u53f0 \u7684\u90fd\u6709 )\u4fe1\u606f \u4e0d\u5177\u5907\u5b9e\u65f6\u6027. \u9009\u9879: -a \u8be5\u7ec8\u7aef\u6240\u6709\u8fdb\u7a0b; -u \u663e\u793a\u7528\u6237 ; -x \u663e\u793a\u547d\u4ee4\u7684\u7edd\u5bf9\u8def\u5f84. Ps: windows\u4e0a\u6709\u5b9e\u73b0\u7c7b\u4f3c\u529f\u80fd\u7684\u547d\u4ee4 tasklist | findstr \u5177\u4f53\u67d0\u4e00\u4e2a\u8fdb\u7a0b [ root@localhost ~ ] # ps aux | head -n 3 USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0 .0 0 .3 199756 3036 ? Ss 8\u670805 4 :55 /usr/lib/systemd/systemd.. root 2 0 .0 0 .0 0 0 ? S 8\u670805 0 :00 [ kthreadd ] Ps:PID\u4e3a1\u7684\u8fdb\u7a0b\u662f\u4e2a\u8f6f\u4ef6,\u8be6\u7ec6\u4ecb\u7ecd\u8be6\u89c11_linux\u57fa\u7840/0_\u51c6\u5907\u5de5\u4f5c.md Linux\u542f\u52a8\u6d41\u7a0b\u8fd9\u4e00\u5c0f\u8282\u7684\u5185\u5bb9!! \"\"\" USER \u8fd0\u884c\u8fdb\u7a0b\u7684\u7528\u6237 PID \u8fdb\u7a0b\u7684ID\u53f7 %CPU CPU\u5360\u7528\u7387,\u8be5\u8fdb\u7a0b\u5360\u7528CPU\u7684\u767e\u5206\u6bd4 %MEM \u5185\u5b58\u5360\u7528\u7387 VSZ \u5360\u7528\u865a\u62df\u5185\u5b58\u7684\u5927\u5c0f(\u5355\u4f4d\u5b57\u8282Kb) \u7b80\u5355\u7684\u6765\u8bf4,\u8fdb\u7a0b\u5728\u542f\u52a8\u65f6\u4f1a\u9884\u5148\u7533\u8bf7\u597d\u4e00\u5757\u7ebf\u6027\u7a7a\u95f4,\u5206\u914d\u597d\u540e,\u4e0d\u4e00\u5b9a\u4f1a\u5168\u7528 \u5185\u5b58\u6620\u5c04\u3001\u5171\u4eab\u7684\u52a8\u6001\u5e93\u3001\u6216\u8005\u5411\u7cfb\u7edf\u7533\u8bf7\u4e86\u66f4\u591a\u7684\u5806\u7b49,\u90fd\u4f1a\u6269\u5c55\u7ebf\u6027\u7a7a\u95f4\u5927\u5c0fTnT \u6ce8\u610f!!! \u8fd9\u91cc\u7684\u865a\u62df\u5185\u5b58\u4e0d\u662f\u6307swap\u5206\u533a\u865a\u62df\u5185\u5b58\u7684\u5927\u5c0f!!\u4e24\u8005\u6ca1\u6709\u5173\u7cfb. \u6211\u89c9\u5f97VSZ\u662f\u6307\u8fdb\u7a0b\u9700\u8981\u7684\u7ebf\u6027\u5730\u5740\u7a7a\u95f4\u7684\u5927\u5c0f..Hhhh RSS \u8fdb\u7a0b\u5b9e\u9645\u5360\u7528\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f(\u5355\u4f4d\u5b57\u8282Kb) TTY \u8be5\u8fdb\u7a0b\u5728\u54ea\u4e2a\u7ec8\u7aef\u8fd0\u884c\u7684 `\uff1f` \u95ee\u53f7\u4ee3\u8868\u6ca1\u6709\u5728\u4efb\u4f55\u4e00\u4e2a\u7ec8\u7aef\u63d0\u4ea4,\u4ee3\u8868\u5f00\u673a\u81ea\u52a8\u542f\u52a8\u8d77\u6765\u7684 \u7ec8\u7aef\uff1fCTTS -- MULTICS -- unix -- minix -- linux -- linux\u53d1\u884c\u7248:redhat\u3001centos linux\u7ee7\u627f\u4e86MULTICS,\u81ea\u52a8\u4fdd\u7559\u51e0\u4e2a\u8054\u673a\u7ec8\u7aef.. 6\u4e2a\u771f\u5b9e\u7684\u7ec8\u7aef /dev/tty1 ... /dev/tty6 xshell\u8fdc\u7a0b\u8fde\u63a5\u770b\u5230\u7684\u7ec8\u7aef\u662f\u9884\u7559\u7684\u7ec8\u7aef\u4ee5\u5916\u901a\u8fc7ssh\u865a\u62df\u6a21\u62df\u51fa\u6765\u7684\u7ec8\u7aef,\u4e0d\u662f\u771f\u5b9e\u7684\u7ec8\u7aef. /dev/pts/0 /dev/pts/1 0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u865a\u62df\u7684Bash Shell\u7ec8\u7aef 1\u4ee3\u8868\u7b2c2\u4e2a \u4ee5\u6b64\u7c7b\u63a8.. [root@localhost ~]# tty /dev/pts/0 \u2605STAT \u8fdb\u7a0b\u7684\u72b6\u6001 (\u6700\u597d\u8bb0\u4f4f!!) R\u3001S\u3001D\u3001T\u3001Z\u3001X START \u8fdb\u7a0b\u7684\u542f\u52a8\u65f6\u95f4 TIME \u8fdb\u7a0b\u5360\u7528CPU\u7684\u603b\u65f6\u95f4 COMMAND \u8fdb\u7a0b\u7684\u7edd\u5bf9\u8def\u5f84,\u5f53\u7136\u6709\u4e9b\u6ca1\u6709\u7edd\u5bf9\u8def\u5f84 \u7528[]\u5305\u88f9\u8d77\u6765\u7684\u4ee3\u8868\u5185\u6838\u6001(\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u7684\u4ee3\u7801)\u7684\u8fdb\u7a0b \u4e0d\u5e26[]\u53f7\u7684\u4ee3\u8868\u7528\u6237\u6001(\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801)\u8fdb\u7a0b \"\"\"","title":"ps aux"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#pstree","text":"\u67e5\u770b\u8fdb\u7a0b\u6811 \u67e5\u770b\u67d0\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u6811: pstree \u8fdb\u7a0bPID [ root@localhost ~ ] # ps aux | grep nginx root 56062 0 .0 0 .0 112824 988 pts/1 S+ 18 :21 0 :00 grep --color = auto nginx root 75065 0 .0 0 .0 20576 8 ? Ss 8\u670821 0 :00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx nobody 75066 0 .0 0 .0 23104 8 ? S 8\u670821 0 :00 nginx: worker process [ root@localhost ~ ] # pstree 75065 nginx\u2500\u2500\u2500nginx \u6ce8\u610f\u54e6!\u82e5\u662f\u6700\u5c0f\u5316\u5b89\u88c5,\u6ca1\u6709pstree\u547d\u4ee4,\u5b89\u88c5\u4e0b\u5373\u53ef rpm -qf ` which pstree `","title":"pstree"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#ppid","text":"ppid \u5373parent pid.. \u4ee3\u8868\u8fd9\u4e2a\u8fdb\u7a0b\u662f\u7531\u54ea\u4e2a\u8fdb\u7a0b\u53d1\u5c55\u884d\u751f\u800c\u6765\u7684, \u5373\u67e5\u770b\u7236\u8fdb\u7a0bPID [ root@localhost ~ ] # ps -elf | head -1 F S UID PID PPID C PRI NI ADDR SZ WCHAN STIME TTY TIME CMD [ root@localhost ~ ] # ps -elf | grep [n]ginx 1 S root 75065 1 0 80 0 - 5144 sigsus 8\u670821 ? 00 :00:00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx ## \u53ef\u4ee5\u53d1\u73b0 75066\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u662f75065 5 S nobody 75066 75065 0 80 0 - 5776 ep_pol 8\u670821 ? 00 :00:00 nginx: worker process","title":"ppid"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#pgrep","text":"pgrep \u8fdb\u7a0b\u540d [ root@localhost ~ ] # pgrep nginx 75065 75066 \u67e5\u770b\u7531\u67d0\u4e2a\u7528\u6237\u5f00\u542f\u7684\u8fdb\u7a0b pgrep -l -u \u7528\u6237\u540d [ root@localhost ~ ] # pgrep -l -u root | head -5 1 systemd 2 kthreadd 4 kworker/0:0H 6 ksoftirqd/0 7 migration/0 [ root@localhost ~ ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) [ root@localhost ~ ] # su - dc -c \"sleep 10000\" & [ 2 ] 57035 [ root@localhost ~ ] # pgrep -l -u dc 57037 sleep ## \u8fd9\u79cd\u65b9\u5f0f\u7684\u8bdd,\u5c31\u9700\u8981\u770b\u7b2c\u4e00\u5217\u662fdc [ root@localhost ~ ] # ps aux | grep dc root 1987 0 .0 0 .0 376184 176 ? Sl 8\u670814 0 :00 /usr/libexec/ibus-dconf root 2018 0 .0 0 .0 187400 356 ? Sl 8\u670814 0 :00 /usr/libexec/dconf-service root 57035 0 .0 0 .3 231964 3456 pts/1 S 18 :38 0 :00 su - dc -c sleep 10000 dc 57037 0 .0 0 .0 108052 360 ? Ss 18 :38 0 :00 sleep 10000 root 57196 0 .0 0 .0 112828 984 pts/1 S+ 18 :40 0 :00 grep --color = auto dc \"\"\" `su - dc -c \" sleep 10000 \" &`\u8fd9\u6761\u547d\u4ee4\u542f\u52a8\u4e86\u4e24\u4e2a\u8fdb\u7a0b \u4e00\u4e2a\u662fsu\u8fdb\u7a0b,\u4e00\u4e2a\u662f\u5207\u6362\u7528\u6237\u540e\u4ee5dc\u7528\u6237\u8fd0\u884c\u7684sleep\u8fdb\u7a0b... \u7b2c\u4e00\u4e2a\u662fPID\u4e3a 57035 \u7684\u8fdb\u7a0b;\u53e6\u4e00\u4e2a\u662fPID\u4e3a 57037 \u7684\u5b50\u8fdb\u7a0b. \"\"\" [ root@localhost ~ ] # ps -elf | grep dc 0 S root 1987 1983 0 80 0 - 94046 poll_s 8\u670814 ? 00 :00:00 /usr/libexec/ibus-dconf 0 S root 2018 1 0 80 0 - 46850 poll_s 8\u670814 ? 00 :00:00 /usr/libexec/dconf-service 4 S root 57035 52706 0 80 0 - 57991 do_wai 18 :38 pts/1 00 :00:00 su - dc -c sleep 10000 4 S dc 57037 57035 0 80 0 - 27013 hrtime 18 :38 ? 00 :00:00 sleep 10000 0 R root 57382 52706 0 80 0 - 28207 - 18 :43 pts/1 00 :00:00 grep --color = auto dc","title":"pgrep"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#stat","text":"\u8fdb\u7a0b\u662f\u4e00\u79cd\u52a8\u6001\u63cf\u8ff0, \u5e76\u4e0d\u4ee3\u8868\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u5728\u8fd0\u884c. \u8fd9\u5c31\u53ef\u4ee5\u5f15\u5165 \u8fdb\u7a0b\u72b6\u6001 , \u8fdb\u7a0b\u5728\u5185\u5b58\u4e2d\u4f1a\u56e0\u4e3a\u5404\u79cd\u7b56\u7565\u6216\u8c03\u5ea6\u9700\u6c42\u5904\u4e8e\u4e0d\u540c\u7684\u72b6\u6001.. R\u3001S\u3001D\u3001T\u3001Z\u3001X < N s + \uff5c l (\u8fd9\u91cc\u662f\u5c0f\u5199\u7684\u82f1\u6587\u5b57\u6bcdl,\u4e0d\u662f\u6570\u5b571) \u8fd96\u4e2a\u7b26\u53f7\u53ef\u4e0e\u4e0a\u97626\u4e2a\u72b6\u6001\u7ec4\u5408\u642d\u914d\u4f7f\u7528!! R \u8fd0\u884c, \u8be5\u8fdb\u7a0b\u6b63\u5728\u4f7f\u7528cpu # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c [ root@localhost ~ ] # tty /dev/pts/0 [ root@localhost ~ ] # vim 1.sh [ root@localhost ~ ] # cat 1.sh while true ; do (( 1 +1 )) ; done [ root@localhost ~ ] # bash 1.sh # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b [ root@localhost ~ ] # tty /dev/pts/1 ## R+ +\u53f7\u4ee3\u8868\u524d\u53f0(\u610f\u5473\u7740\u5360\u7528\u7740\u7ec8\u7aef\u5462)\u8fd0\u884c [ root@localhost ~ ] # ps aux | grep 1.sh | grep -v grep root 44419 99 .8 0 .1 113280 1208 pts/0 R+ 16 :06 1 :14 bash 1 .sh [ root@localhost ~ ] # ps aux | grep 1.sh | grep -v grep root 44419 100 0 .1 113280 1208 pts/0 R+ 16 :06 1 :45 bash 1 .sh [ root@localhost ~ ] # ps aux | grep 1.sh | grep -v grep root 44419 99 .7 0 .1 113280 1208 pts/0 R+ 16 :06 1 :46 bash 1 .sh S \u53ef\u4e2d\u65ad\u7761\u7720 Sleep => \u9047\u5230IO\u5566, \u53ef\u6b63\u5e38\u7684\u5904\u7406IO ,\u6267\u884c\u7684IO\u64cd\u4f5c\u53ef\u4ee5\u5f97\u5230\u786c\u4ef6\u8bbe\u5907\u7684\u54cd\u5e94 \u7edd\u5927\u591a\u6570\u8f6f\u4ef6\u7684\u5927\u591a\u6570\u65f6\u5019\u7684\u72b6\u6001\u90fd\u5904\u4e8eS\u72b6\u6001,why? \u56e0\u4e3a\u73b0\u5728\u7684\u8f6f\u4ef6\u90fd\u79bb\u4e0d\u5f00\u7f51\u7edc,\u6709\u7f51\u7edc\u5c31\u4f1a\u6709\u7f51\u7edcIO.. \u50cf\u6bd4\u7279\u5e01\u7684\u8fd0\u7b97\u7a0b\u5e8f\u5c31\u975e\u5e38\u8017\u8d39cpu\u7684\u8d44\u6e90,\u4e00\u76f4\u5728\u7b97..\u5c31\u50cf\u662f\u6b7b\u5faa\u73af\u4e00\u6837.cpu\u76f4\u63a5\u88c2\u5f00.. \u6ce8\u610f\u54e6! \u8fd9\u91cc\u8fdb\u7a0b\u7684 ` S\u72b6\u6001 ` \u522b\u8ddflinux\u547d\u4ee4 ` sleep ` \u6df7\u4e3a\u4e00\u8c08,sleep\u547d\u4ee4\u6bd4\u8f83\u61a8\u5c31\u662f\u7eaf\u7cb9\u7684\u4f11\u7720\u6307\u5b9a\u65f6\u95f4 ; \u4f46\u53ef\u4ee5\u7528sleep\u547d\u4ee4\u6a21\u62dfIO\u884c\u4e3a. # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c \u8ba9\u5176\u8fd0\u7b97\u4e2d\u9014\u505c\u6b621\u79d2 [ root@localhost ~ ] # vim 2.sh [ root@localhost ~ ] # cat 2.sh while true ; do (( 1 +1 )) ; sleep 1 ; done # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b \u76d1\u6d4b\u4e0d\u5230R\u72b6\u6001\u662f\u56e0\u4e3a 1+1\u7684\u8fd0\u7b97\u51e0\u4e4e\u6ca1\u6709\u8017\u65f6 \u6781\u96be\u6355\u6349\u5230 # \u8bd5\u7740\u6355\u6349\u4e0b:(\u4e0d\u8981\u7ea0\u7ed3!) 1 > ` top -p 44615 ` \u4f7f\u7528top\u547d\u4ee4\u4e5f\u76d1\u6d4b\u4e0d\u5230 top\u547d\u4ee4\u7684\u672c\u8d28\u5c31\u662f\u9ed8\u8ba43\u79d2\u6267\u884c\u4e00\u6b21ps aux\u547d\u4ee4,\u5b9e\u65f6\u6027\u4e5f\u4e0d\u662f\u5f88\u9ad8. 2 > ` while true ; do ps aux | grep 2 .sh | grep -v grep ; done ` \u4f7f\u7528\u6b7b\u5faa\u73af,\u4e5f\u6355\u6349\u4e0d\u5230,1+1\u8fd0\u7b97\u8017\u65f6\u592a\u77ed\u4e86 [ root@localhost ~ ] # ps aux | grep 2.sh | grep -v grep root 44615 0 .0 0 .1 113280 1388 pts/0 S+ 16 :09 0 :00 bash 2 .sh [ root@localhost ~ ] # ps aux | grep 2.sh | grep -v grep root 44615 0 .0 0 .1 113280 1388 pts/0 S+ 16 :09 0 :00 bash 2 .sh [ root@localhost ~ ] # ps aux | grep 2.sh | grep -v grep root 44615 0 .0 0 .1 113280 1388 pts/0 S+ 16 :09 0 :00 bash 2 .sh D \u4e0d\u53ef\u4e2d\u65ad\u7761\u7720 \u9047\u5230IO\u5566, \u60f3\u8981\u5904\u7406IO , \u4f46\u6267\u884c\u7684IO\u64cd\u4f5c\u5f97\u4e0d\u5230\u786c\u4ef6\u8bbe\u5907\u7684\u54cd\u5e94,\u786c\u4ef6\u8bbe\u5907\u538b\u6839\u513f\u4e0d\u9e1f\u4f60.. \u610f\u5473\u7740\u786c\u4ef6\u8bbe\u5907\u6b64\u65f6\u7684\u538b\u529b\u592a\u5927\u4e86,\u5fd9\u6d3b\u4e0d\u8fc7\u6765\u5566!!\u6ca1\u7a7a\u642d\u7406\u4f60. Ps:\u4e00\u65e6\u8fdb\u7a0b\u5904\u4e8e\u8fd9\u4e2a\u72b6\u6001,\u6740\u90fd\u6740\u4e0d\u6389 Hhh \u89e3\u51b3\u65b9\u6848: ( \u73b0\u76ee\u524d\u53ea\u80fd\u8fd9\u4e48\u505a ) \u4e00\u65e6\u8fdb\u7a0b\u72b6\u6001\u51fa\u73b0D,\u964d\u4f4e\u4e0b\u786c\u76d8\u7684\u538b\u529b,\u5c06\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u5199\u64cd\u4f5c\u5e72\u6389,\u8ba9\u5173\u952e\u7684\u5199\u64cd\u4f5c\u80fd\u5f97\u5230\u54cd\u5e94. # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c \u4ece\u786c\u76d8\u4e0a\u5c06\u6307\u5b9a\u7684\u5185\u5bb9\u8bfb\u51fa\u6765\u5199\u5230\u6307\u5b9a\u7684\u5730\u65b9\u53bb [ root@localhost ~ ] # tar czf /root/egon.tar.gz /etc/ /usr/ /tmp/ /boot/ tar: \u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d tar: \u4ece\u786c\u8fde\u63a5\u76ee\u6807\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b \u6709\u8fd0\u884c(R+);\u6709\u6b63\u5e38\u7684IO(S+);\u4e5f\u6709\u53ef\u80fd\u786c\u76d8\u538b\u529b\u8fc7\u5927\u54cd\u5e94\u4e0d\u8fc7\u6765(D+) [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .4 0 .1 124132 1932 pts/0 S+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .4 0 .1 124132 1932 pts/0 S+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .6 0 .1 124132 1932 pts/0 R+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 2 .9 0 .1 124132 1932 pts/0 D+ 16 :39 0 :00 tar czf /root/egon.tar... [ root@localhost ~ ] # ps aux | grep [c]zf root 49735 3 .0 0 .1 124132 1932 pts/0 S+ 16 :39 0 :00 tar czf /root/egon.tar... T \u505c\u6b62/\u4e2d\u6b62\u7684\u8fdb\u7a0b # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c \u8fdb\u5165vim\u7f16\u8f91\u754c\u9762\u540e control+z\u505c\u6b62 [ root@localhost ~ ] # vim a.txt [ 2 ] + \u5df2\u505c\u6b62 vim a.txt # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b ## \u8fd9\u4e2a\u662f\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u5728vim\u754c\u9762\u65f6 [ root@localhost ~ ] # ps aux | grep [v]im root 48892 0 .2 0 .5 149820 5436 pts/0 S+ 16 :26 0 :00 vim a.txt ## \u8fd9\u4e2a\u662f\u7b2c\u4e00\u4e2a\u7ec8\u7aefcontrol+z\u505c\u6b62,\u9000\u51favim\u754c\u9762\u540e [ root@localhost ~ ] # ps aux | grep [v]im root 48892 0 .0 0 .5 149820 5436 pts/0 T 16 :26 0 :00 vim a.txt Z \u50f5\u5c38\u8fdb\u7a0b, \u5904\u4e8e\u8be5\u72b6\u6001\u7684\u8fdb\u7a0b\u540c\u6837\u6740\u4e0d\u6b7b!!! X \u6b7b\u6389\u7684\u8fdb\u7a0b(\u51e0\u4e4e\u770b\u4e0d\u89c1,\u56e0\u4e3a\u6b7b\u4e86\u5c31\u7acb\u5373\u56de\u6536\u4e86) < \u6807\u6ce8\u4e86<\u5c0f\u4e8e\u53f7\u4ee3\u8868\u4f18\u5148\u7ea7\u8f83\u9ad8\u7684\u8fdb\u7a0b N N\u4ee3\u8868\u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u8fdb\u7a0b \u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u6d89\u53ca\u5230nice\u503c ( \u4e5f\u53eb\u505a\u597d\u5fc3\u503c ) : \u597d\u5fc3\u503c\u8d8a\u4f4e\u4f18\u5148\u7ea7\u8d8a\u9ad8 ( \u59a5\u59a5\u7684\u6b3a\u8d1f\u8001\u5b9e\u4eba\u5457 ) nice\u503c\u7684\u8303\u56f4 [ -20,19 ] ## & \u4ee3\u8868\u540e\u53f0\u8fd0\u884c [ root@localhost ~ ] # nice -n -20 sleep 3000 & [ 3 ] 51827 [ root@localhost ~ ] # nice -n 19 sleep 5000 & [ 4 ] 51835 [ root@localhost ~ ] # ps aux | grep [s]leep root 51797 0 .0 0 .0 108052 360 ? S 17 :12 0 :00 sleep 60 root 51827 0 .0 0 .0 108052 360 pts/0 S< 17 :13 0 :00 sleep 3000 root 51835 0 .0 0 .0 108052 356 pts/0 SN 17 :13 0 :00 sleep 5000 s \u5305\u542b\u5b50\u8fdb\u7a0b [ root@localhost ~ ] # ps aux | grep nginx | grep -v grep ## \u6b64\u5904\u7684Ss \u5c0f\u5199s\u6307\u7684\u5c31\u662fPID\u4e3a75066\u7684\u5b50\u8fdb\u7a0b root 75065 0 .0 0 .0 20576 8 ? Ss 8\u670821 0 :00 nginx: master process /usr/local/nginx-1.22.0/sbin/nginx nobody 75066 0 .0 0 .0 23104 8 ? S 8\u670821 0 :00 nginx: worker process + +\u8868\u793a\u8fdb\u7a0b\u662f\u5728\u524d\u53f0\u8fd0\u884c(\u5360\u7740\u7ec8\u7aef\u5c4f\u5e55..) l \u5c0f\u5199\u5b57\u6bcdl, \u4ee3\u8868\u4ee5\u7ebf\u7a0b\u7684\u65b9\u5f0f\u8fd0\u884c,\u5373\u591a\u7ebf\u7a0b # -- \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u4e0a\u8fd0\u884c [ root@localhost ~ ] # vim a.py [ root@localhost ~ ] # cat a.py from threading import Thread import time import os def task () : time.sleep ( 100 ) if __name__ == \"__main__\" : print ( os.getpid ()) for i in range ( 10 ) : t = Thread ( target = task ) t.start () [ root@localhost ~ ] # python a.py 54844 # -- \u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e0a\u67e5\u770b \u5728py\u7a0b\u5e8f\u8fd8\u5728\u8fd0\u884c\u7684\u65f6\u5019\u67e5\u770b!! [ root@localhost ~ ] # ps aux | grep 54844 | grep -v grep root 54844 0 .0 0 .5 740392 5048 pts/1 Sl+ 18 :02 0 :00 python a.py | \u7ba1\u9053\u7b26\u53f7\u4ee3\u8868\u591a\u8fdb\u7a0b","title":"\u8be6\u89e3\u8fdb\u7a0b\u7684\u72b6\u6001STAT"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#top","text":"","title":"\u52a8\u6001\u67e5\u770btop"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_3","text":"-d ; -p ; -u [ root@localhost ~ ] # sleep 1000 & [ 1 ] 68309 [ root@localhost ~ ] # pgrep nginx 75065 75066 ## -d \u6307\u5b9a\u51e0\u79d2\u5237\u65b0\u4e00\u6b21; -p \u6307\u5b9a\u52a8\u6001\u5237\u65b0\u7684\u8fdb\u7a0b top -d 1 -p 68309 ## pgrep nginx\u7ed3\u679c\u662f\u8fdb\u7a0bPID,\u7528head\u8fc7\u6ee4\u7b2c\u4e00\u4e2a,\u7528\u9017\u53f7\u8fde\u63a5\u8868\u793a\u4e00\u8fde\u4e32\u7684\u8fdb\u7a0b ## \u67e5\u770bnginx\u4ee5\u53capid\u4e3a68309\u7684\u8fdb\u7a0b top -d 1 -p ` pgrep nginx | head -1 ` ,68309 ## \u67e5\u770begon\u7528\u6237\u5f00\u542f\u7684\u8fdb\u7a0b top -d 1 -u egon","title":"\u547d\u4ee4\u884c\u9009\u9879"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_4","text":"\u5173\u6ce8: up \u3001 load average \u3001Tasks\u3001%Cpu\u7684us sy id\u3001KiB Mem\u3001KiB Swap PID\u3001USER\u3001NI\u3001VIRT\u3001RES\u3001SHR\u3001S Ps: \u53ea\u770b load average \u90a3\u4e00\u884c\u7684\u547d\u4ee4 -- uptime top - 10 :34:42 up 8 days, 16 :10, 4 users, load average: 0 .00, 0 .02, 0 .05 Tasks: 213 total, 1 running, 211 sleeping, 1 stopped, 0 zombie %Cpu ( s ) : 1 .0 us, 1 .0 sy, 0 .0 ni, 98 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st KiB Mem : 995640 total, 173984 free, 558128 used, 263528 buff/cache KiB Swap: 2097148 total, 1706236 free, 390912 used. 257816 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 72062 dc 20 0 116960 3328 1708 S 0 .0 0 .3 0 :00.09 bash 73191 dc 20 0 108052 360 284 S 0 .0 0 .0 0 :00.00 sleep","title":"\u663e\u793a\u5185\u5bb9\u89e3\u91ca"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_5","text":"## -- \u8fd9\u91cc\u7684\u5e73\u5747\u8d1f\u8f7d\u662f\u5c06\u6240\u6709cpu\u8d44\u6e90\u90fd\u6db5\u76d6\u5728\u5185 \u5f53\u524d\u65f6\u95f4\u70b9\u5f80\u8fc7\u53bb1min\u5185/5min\u5185/15min\u5185\u7684\u5e73\u5747\u8d1f\u8f7d top - \u5f53\u524d\u7cfb\u7edf\u65f6\u95f4 up \u8fd0\u884c\u4e86\u591a\u957f\u65f6\u95f4, 4\u4e2a\u7528\u6237 ( \u672c\u673a\u548c\u8fdc\u7a0b\u767b\u5f55\u7684 ) , CPU\u5e73\u5747\u8d1f\u8f7d 1\u5206\u949f\u7684,5\u5206\u949f\u7684,15\u5206\u949f\u7684 ## -- \u5904\u4e8esleeping\u7684\u8fdb\u7a0b\u6570\u8d8a\u591a cpu\u5c31\u8d8a\u8f7b\u677e \u7cfb\u7edf\u8d8a\u5065\u5eb7; running\u6bd4\u8f83\u591a \u53cd\u5e94\u6b63\u5728\u5927\u5fd9\u6d3b.. ## -- \u5904\u4e8eT\u72b6\u6001\u7684,\u82e5\u4e0d\u9700\u8981,\u53ef\u4ee5\u8003\u8651\u628a\u5b83\u5e72\u6389..(\u5360\u7528\u7a7a\u95f4\u53c8\u4e0d\u5e72\u4e8b) ## -- D\u548cZ\u72b6\u6001\u7684\u8fdb\u7a0bkill -9\u4e5f\u6740\u4e0d\u6b7b;\u53ea\u80fd\u66f2\u7ebf\u6551\u56fd,\u6bd4\u5982D\u7b49\u786c\u4ef6\u8bbe\u5907\u54cd\u5e94 \u4efb\u52a1: \u603b\u5171\u8fd0\u884c\u4e86213\u4e2a\u8fdb\u7a0b, \u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c ( R ) , 211 \u4e2a\u5728\u7761\u7720 ( S ) , \u6709\u4e00\u4e2a\u88ab\u505c\u6b62 ( T ) , \u67090\u4e2a\u50f5\u5c38\u8fdb\u7a0b %Cpu ( s ) : ## -- \u7f57\u5217\u7684\u662f\u6240\u6709cpu\u7684\u5e73\u5747\u60c5\u51b5 %Cpu0 %Cpu1 %Cpu2 \"\"\" us \u7528\u6237\u6001\u8fdb\u7a0b(\u5373\u5e94\u7528\u7a0b\u5e8f)\u5360\u7528cpu\u65f6\u95f4\u7684\u767e\u5206\u6bd4 sy \u5185\u6838\u6001\u8fdb\u7a0b(\u5373\u64cd\u4f5c\u7cfb\u7edf)\u5360\u7528cpu\u65f6\u95f4\u7684\u767e\u5206\u6bd4 ni \u4ee3\u8868\u4f18\u5148\u88ab\u8c03\u5ea6\u7684\u8fdb\u7a0b\u5360cpu\u65f6\u95f4\u7684\u767e\u5206\u6bd4 id cpu\u7a7a\u95f2\u7684\u767e\u5206\u6bd4 wa cpu\u7b49\u5f85\u8fdb\u7a0b\u5c06io\u505a\u5b8c\u7684\u767e\u5206\u6bd4 \u6b64\u503c\u8f83\u9ad8\u7684\u8bdd\u4ee3\u8868\u8ba1\u7b97\u673aIO\u6bd4\u8f83\u7e41\u5fd9 hi \u786c\u4ef6\u4e2d\u65ad,\u5904\u7406\u786c\u4ef6\u4e2d\u65ad\u6240\u5360\u7528CPU\u7684\u65f6\u95f4 \u6b64\u503c\u5927\u7684\u8bdd,\u8868\u660e\u786c\u4ef6\u5728\u4e0d\u65ad\u5fd9\u6d3b si \u8f6f\u4ef6\u4e2d\u65ad,\u5904\u7406\u8f6f\u4ef6\u4e2d\u65ad\u6240\u5360\u7528CPU\u7684\u65f6\u95f4 st \u88ab\u5077\u8d70\u7684cpu,\u8ddf\u865a\u62df\u5316\u6709\u5173 \"\"\" ## -- buff/cache linux\u7684\u5185\u5b58\u4f18\u5316\u673a\u5236,\u81ea\u4f5c\u4e3b\u5f20\u7684\u5c06\u95f2\u7740\u7684\u5185\u5b58\u6765\u505a\u4f18\u5316 \u4f18\u5316\u8bfb\u5199 ## -- \u8be6\u89c1 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md\u4e2d \u8f6f\u4ef6\u4e0e\u4e09\u5927\u6838\u5fc3\u7684\u5173\u7cfb \u8fd9\u90e8\u5206\u5185\u5bb9 \u7269\u7406\u5185\u5b58\u7a7a\u95f4 ( \u5355\u4f4dkb ) : \u603b\u8ba1 995640 , \u7a7a\u95f2 173984 , \u5df2\u4f7f\u7528 558128 , 263528 buff/cache ## -- \u6b64\u5904\u7684used \u5df2\u4f7f\u7528\u7684\u503c\u5927\u4e8e0,\u4ee3\u8868\u7269\u7406\u5185\u5b58\u4e0d\u591f\u7528\u4e86,\u5f00\u59cbswap out\u5566! ## -- \u5360\u7528\u7269\u7406\u5185\u5b58\u591a\u5c11\u767e\u5206\u6bd4\u540e\u5f00\u59cb\u4f7f\u7528swap\u5206\u533a\u5f53\u4e34\u65f6\u5185\u5b58 \u53ef\u4ee5\u8bbe\u7f6e `cat /proc/sys/vm/swappiness` ## -- \u8be6\u89c1 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md\u4e2d [\u865a\u62df\u5185\u5b58] \u8fd9\u90e8\u5206\u5185\u5bb9 \u4ea4\u6362\u533a/\u865a\u62df\u5185\u5b58\u7a7a\u95f4 ( \u5355\u4f4dkb ) : \u603b\u8ba1 2097148 , \u7a7a\u95f2 1706236 , \u5df2\u4f7f\u7528 390912 , 257816 avail Mem SWAP OUT: \u5f53\u67d0\u8fdb\u7a0b\u5411OS\u8bf7\u6c42\u5185\u5b58\u53d1\u73b0\u4e0d\u8db3\u65f6,OS\u4f1a\u628a\u5185\u5b58\u4e2d\u6682\u65f6\u4e0d\u7528\u7684\u6570\u636e\u4ea4\u6362\u51fa\u53bb,\u653e\u5728SWAP\u5206\u533a\u4e2d ; SWAP IN: \u5f53\u67d0\u8fdb\u7a0b\u53c8\u9700\u8981\u8fd9\u4e9b\u6570\u636e\u4e14OS\u53d1\u73b0\u8fd8\u6709\u7a7a\u95f2\u7269\u7406\u5185\u5b58\u65f6,\u53c8\u4f1a\u628aSWAP\u5206\u533a\u4e2d\u7684\u6570\u636e\u4ea4\u6362\u56de\u7269\u7406\u5185\u5b58\u4e2d. Ps: buff\u3001cache\u3001swap\u8fd8\u53ef\u53c2\u8003 ` https://blog.csdn.net/dingding_ting/article/details/86495076 ` \u4e2d\u65ad\u662f\u4e00\u4e2a\u5f02\u6b65\u7684\u4e8b\u4ef6\u5904\u7406\u673a\u5236,\u53ef\u4ee5\u63d0\u9ad8\u64cd\u4f5c\u7cfb\u7edf\u5904\u7406\u5e76\u53d1\u7684\u80fd\u529b. \u4e2d\u65ad\u53c2\u8003\u94fe\u63a5: ` https://www.cnblogs.com/linhaifeng/articles/13916102.html ` \u786c\u4ef6\u4e2d\u65ad\u76f8\u5f53\u4e8e\u786c\u6027\u6253\u65ad\u4f60\u624b\u4e2d\u7684\u6d3b,\u53bb\u5e72\u6307\u6d3e\u7684\u6d3b,\u7136\u540e\u53c8\u6765\u5176\u4ed6\u6d3b\u4e86,\u53c8\u6253\u65ad\u624b\u4e2d\u7684\u6d3b,\u6700\u540e\u5565\u4e5f\u505a\u4e0d\u6210... \u8f6f\u4ef6\u4e2d\u65ad\u76f8\u5f53\u4e8e\u6765\u6d3b\u4e86,ok,\u6211\u8bb0\u5f55\u4e86\u4e0b\u6765,\u5408\u9002\u7684\u65f6\u5019,\u4f1a\u53bb\u6267\u884c\u5b83... Q1: what \u5e73\u5747\u8d1f\u8f7d \uff1f A1: \u5e73\u5747\u8d1f\u8f7d\u662f\u6307, \u5355\u4f4d\u65f6\u95f4\u5185\u7cfb\u7edf\u5904\u4e8e\u53ef\u8fd0\u884c\u72b6\u6001\u548c\u4e0d\u53ef\u4e2d\u65ad\u72b6\u6001\u7684\u5e73\u5747\u8fdb\u7a0b\u6570, \u4e5f\u5c31\u662f\u5e73\u5747\u6d3b\u8dc3\u8fdb\u7a0b\u6570.. [ root@localhost ~ ] # uptime 10 :34:42 up 8 days, 16 :10, 4 users, load average: 0 .00, 0 .02, 0 .05 Q2: \u5e73\u5747\u8d1f\u8f7d\u591a\u5c11\u5408\u7406? A2: \u5982\u4e0b ------------------------------------------------ \u6838\u5fc3\u6570 \u5e73\u5747\u8d1f\u8f7d \u542b\u4e49 ------------------------------------------------ 4 4 \u6bcf\u4e2acpu ( \u6838 ) \u90fd\u5728\u6ee1\u8d1f\u8f7d\u8fd0\u884c 4 < 4 \u8fd8\u6709\u7a7a\u95f2 , \u95ee\u9898\u4e0d\u5927 4 > 4 \u8d85\u8d1f\u8377\u8fd0\u884c -- --- --- --- --- --- --- --- 4 2 \u6709\u4e00\u534a ( 50 % ) \u7684CPU\u662f\u7a7a\u95f2\u72b6\u6001 2 2 CPU\u521a\u597d\u5b8c\u5168\u88ab\u5360\u7528 1 2 \u81f3\u5c11\u4e00\u534a\u7684\u8fdb\u7a0b\u662f\u62a2\u4e0d\u5230CPU ------------------------------------------------ Q3: \u5e73\u5747\u8d1f\u8f7d\u7684\u4e09\u4e2a\u6570\u503c\u5982\u4f55\u770b\uff1f A3: \u4e09\u4e2a\u503c\u76f8\u5f53\u4e8e\u4e09\u4e2a\u6837\u672c, \u6211\u4eec\u5e94\u8be5\u7edf\u7b79\u7684\u770b 1> \u82e51\u5206\u949f,5\u5206\u949f,15\u5206\u949f\u7684\u8d1f\u8f7d\u6570\u503c\u76f8\u5dee\u4e0d\u5927. \u5e76\u4e14\u90fd\u6ca1\u6709\u6ee1\u8d1f\u8377, \u5219\u4ee3\u8868\u7cfb\u7edf\u7684\u8d1f\u8f7d\u5f88'\u7a33\u5b9a' 2> \u82e51\u5206\u949f( \u5f53\u524d\u65f6\u95f4\u5f80\u8fc7\u53bb\u63a81\u5206\u949f )\u7684\u8d1f\u8f7d\u503c\u8fdc\u5c0f\u4e8e15\u5206\u949f( \u5f53\u524d\u65f6\u95f4\u5f80\u8fc7\u53bb\u63a815\u5206\u949f )\u7684. \u90a3\u4e48\u8bc1\u660e\u8fc7\u53bb\u7cfb\u7edf\u7ecf\u53d7\u4e86\u9ad8\u5e76\u53d1,\u4f46\u73b0\u76ee\u524d\u7684\u538b\u529b\u964d\u4e0b\u6765\u4e86.. \u4e0d\u5fc5\u7d27\u5f20,\u4f4615\u5206\u949f\u533a\u95f4\u5185,\u7cfb\u7edf\u8d1f\u8f7d\u4e0a\u5347\u7684\u539f\u56e0,\u8fd8\u9700\u8981\u6211\u4eec\u8ba4\u771f\u67e5\u660e 3> \u82e51\u5206\u949f\u7684\u8d1f\u8f7d\u503c\u8fdc\u8d85\u8fc715\u5206\u949f\u7684. \u90a3\u4e48\u8bc1\u660e\u8fc7\u53bb\u6ca1\u6709\u9ad8\u5e76\u53d1,\u4f46\u662f\u6b64\u523b\u6b63\u5728\u7ecf\u53d7\u9ad8\u5e76\u53d1..\u9700\u8981\u5206\u6790\u5904\u7406.. 4> \u4e00\u65e61\u5206\u949f\u7684\u5e73\u5747\u8d1f\u8f7d\u63a5\u8fd1\u6216\u8d85\u8fc7\u4e86CPU\u7684\u4e2a\u6570, \u5c31\u610f\u5473\u7740\u7cfb\u7edf\u6b63\u5728\u53d1\u751f\u8fc7\u8f7d\u7684\u95ee\u9898, \u8fd9\u65f6\u5019\u5c31\u5f97\u5206\u6790\u4f18\u5316.. while true ; do (( 1 +1 )) ; done & # -- \u65e0\u4efb\u4f55\u7684IO,\u4f11\u7720\u884c\u4e3a \u7eaf\u8ba1\u7b97\u578b while true ; do (( 1 +1 )) ; sleep 0 .1 ; done & # -- \u6b64\u8fdb\u7a0b\u542f\u52a8\u540e,\u540e\u53f0\u8fd0\u884c,\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u5728\u7761 IO\u5bc6\u96c6\u578b IO\u5bc6\u96c6\u578b: \u8be5\u8fdb\u7a0b\u5927\u91cf\u7684\u65f6\u95f4\u5728\u505aIO, \u505aIO\u7684\u65f6\u95f4\u8fdc\u5927\u4e8e\u8ba1\u7b97\u7684\u65f6\u95f4 \u5bf9cpu\u7684\u5f71\u54cd\u4e0d\u5927,\u4f46\u67b6\u4e0d\u4f4f\u91cf\u591a!!! \u8ba1\u7b97\u5bc6\u96c6\u578b: \u8be5\u8fdb\u7a0b\u5927\u91cf\u7684\u65f6\u95f4\u5728\u505a\u8fd0\u7b97, \u8ba1\u7b97\u7684\u65f6\u95f4\u8fdc\u5927\u4e8e\u505aIO\u7684\u65f6\u95f4 \"\"\" \u8865\u5145\u4e24\u5de5\u5177(\u4e86\u89e3\u5373\u53ef) \"\"\" \u25b2 ` yum install stress -y ` stress\u662fLinux\u7cfb\u7edf\u538b\u529b\u6d4b\u8bd5\u5de5\u5177,\u53ef\u7528\u4f5c\u5f02\u5e38\u8fdb\u7a0b\u6a21\u62df\u5e73\u5747\u8d1f\u8f7d\u5347\u9ad8\u7684\u573a\u666f \u9700\u8981\u5b89\u88c5 stress\u672c\u8d28\u5c31\u662f\u5c31\u662f\u8fdb\u884c\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u6b7b\u5faa\u73af # -- 4\u4ee3\u88684\u4e2a\u6838 3000\u4ee3\u8868\u6301\u7eed\u52a0\u538b3000\u79d2 \u6267\u884c\u6b64\u547d\u4ee4\u540e\u4f1a\u77ac\u95f4\u5c064\u4e2acpu\u5360\u6ee1 stress --cpu 4 --timeout 3000 \u25b2 ` yum install sysstat -y ` \u4f1a\u5f97\u5230\u4e0b\u8ff0\u4e24\u4e2a\u547d\u4ee4 mpstat \u662f\u591a\u6838CPU\u6027\u80fd\u5206\u6790\u5de5\u5177,\u7528\u6765\u5b9e\u65f6\u68c0\u67e5\u6bcf\u4e2aCPU\u7684\u6027\u80fd\u6307\u6807,\u4ee5\u53ca\u6240\u6709CPU\u7684\u5e73\u5747\u6307\u6807. mpstat -P ALL 3 # -- \u8f93\u51fa\u5168\u90e8cpu\u6240\u6709\u6307\u6807,\u4ee53\u79d2\u4e3a\u95f4\u9694\u4e0d\u95f4\u65ad\u5237 pidstat \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u8fdb\u7a0b\u6027\u80fd\u5206\u6790\u5de5\u5177,\u7528\u6765\u5b9e\u65f6\u67e5\u770b\u8fdb\u7a0b\u7684CPU\u3001\u5185\u5b58\u3001IO\u4ee5\u53ca\u4e0a\u4e0b\u6587\u5207\u6362\u7b49\u6027\u80fd\u6307\u6807. pidstat -u 1 5 # -- 1\u79d2\u4e00\u6b21,\u603b\u5171\u8f93\u51fa5\u6b21","title":"[\u7cfb\u7edf\u6574\u4f53\u7edf\u8ba1\u4fe1\u606f]"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_6","text":"PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND TIME: \u8fdb\u7a0b\u4f7f\u7528\u7684CPU\u65f6\u95f4\u603b\u8ba1,\u5355\u4f4d\u79d2 TIME+: \u8fdb\u7a0b\u4f7f\u7528\u7684CPU\u65f6\u95f4\u603b\u8ba1,\u5355\u4f4d1/100\u79d2 VIRT: virtual memory usage \u865a\u62df\u5185\u5b58 1> \u9884\u5148\u5206\u914d\u7ed9\u8be5\u8fdb\u7a0b\u8fd9\u4e48\u591a,\u4f46\u4e0d\u4ee3\u8868\u5b9e\u9645\u5360\u7528\u8fd9\u4e48\u591a. 2> \u662f\u6307\u8be5\u8fdb\u7a0b\u201c\u9700\u8981\u7684\u201d\u865a\u62df\u5185\u5b58\u5927\u5c0f,\u5305\u62ec\u8fdb\u7a0b\u4f7f\u7528\u7684\u5e93\u3001\u4ee3\u7801\u3001\u6570\u636e\u7b49.. 3> \u8ddfswap\u5206\u533a\u6ca1\u6709\u5173\u7cfb\uff01\uff01 RES: resident memory usage \u5e38\u9a7b\u5185\u5b58 1> \u8fdb\u7a0b\u5f53\u524d\u4f7f\u7528/\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f, \u4f46\u4e0d\u5305\u62ecswap out 2> RES\u5305\u542b\u4e86SHR\u5171\u4eab\u7a7a\u95f4 SHR: shared memory \u5171\u4eab\u5185\u5b58 \u5f53\u5185\u5b58\u4e0d\u591f\u7528\u65f6,\u6b64\u503c\u4f1a\u589e\u5927,\u6324\u4e00\u6324\u561b; \u5f53KiB Swap\u4ea4\u6362\u533a\u7684used\u503c\u964d\u4e0b\u6765\u4e86,\u4ee3\u8868\u7269\u7406\u5185\u5b58\u5728\u6062\u590d\u6b63\u5e38,SHR\u4f1a\u964d\u4f4e. \u8ba1\u7b97\u4e00\u4e2a\u8fdb\u7a0b\u5b9e\u9645\u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u5927\u5c0f RES \u2013 SHR","title":"[\u8fdb\u7a0b\u4fe1\u606f]"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_7","text":"\u4e0b\u8ff0\u7684\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u90fd\u4f1a\u5237\u65b0\u4e0btop\u663e\u793a\u7684\u5185\u5bb9 \u4e0a\u4e0b\u952e \u5f80\u4e0a\u5f80\u4e0b\u7684\u7ffb\u770b\u6240\u6709\u8fdb\u7a0b h or ? \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f q or control + c \u9000\u51fa s \u6539\u53d8\u5237\u65b0\u7684\u65f6\u95f4\u9891\u7387,\u9ed8\u8ba4\u662f3.0\u79d2 Ps: \u5237\u65b0\u9891\u7387\u522b\u8bbe\u7f6e\u7684\u592a\u9ad8 \u4f8b\u59820.001s,\u56e0\u4e3a\u5f88\u6d88\u8017cpu\u7684\u8d44\u6e90.. M \u6309\u7167\u5360\u7528\u5185\u5b58\u8fdb\u884c\u6392\u5e8f P \u6309\u7167cpu\u7684\u5360\u7528\u7387\u8fdb\u884c\u6392\u5e8f N \u6309\u7167PID\u8fdb\u884c\u6392\u5e8f Ps: \u6392\u5e8f\u7684\u7ed3\u679c \u9ed8\u8ba4 \u90fd\u662f \u4ece\u9ad8\u5230\u4f4e shift + > shift + < \u5411\u53f3\u3001\u5411\u5de6 \u5410\u69fd\u4e0b: \u6ca1\u6709\u660e\u786e\u63d0\u793a\u5bf9\u54ea\u4e2a\u5b57\u6bb5\u6392\u5e8f \u5373\u5c06\u6392\u5e8f\u4f5c\u7528\u4e8e\u5f53\u524d\u6392\u5e8f\u5b57\u6bb5 \u53f3\u8fb9/\u5de6\u8fb9 \u7684\u5b57\u6bb5 R \u5c06\u5f53\u524d\u6392\u5e8f\u7684\u5b57\u6bb5\u7ed3\u679c\u8fdb\u884c\u53cd\u8f6c f *\u6807\u8bb0\u7684\u662f\u754c\u9762\u4e0a\u4f1a\u663e\u793a\u7684\u5b57\u6bb5 \u6309\u7a7a\u683c\u9009\u62e9/\u53d6\u6d88 \u65b0\u9009\u62e9\u7684\u4f1a\u5728\u754c\u9762\u6700\u53f3\u8fb9\u663e\u793a z \u5f69\u8272\u754c\u9762 \u829c\u6e56\uff5e k \u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7 1 \u6309\u4e0b\u6570\u5b571\u4f1a\u663e\u793a\u6240\u6709CPU\u7684\u8d1f\u8f7d %Cpu ( s ) : 1 .0 us, 2 .0 sy, 0 .0 ni, 97 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st %Cpu0 : 1 .0 us, 1 .0 sy, 0 .0 ni, 98 .0 id, 0 .0 wa, 0 .0 hi, 0 .0 si, 0 .0 st ## -- \u591a\u4e2a\u6838\u7684\u8bdd %Cpu0\u3001%Cpu1\u3001%Cpu2... r \u8c03\u6574\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7(\u5373\u4fee\u6539\u8be5\u8fdb\u7a0b\u7684nice\u503c) \u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8 PID to renice [ default pid = 2216 ] 72122 Renice PID 72122 to value -10 ## -- PR\u503c\u4e0eNI\u503c\u662f\u76f8\u5bf9\u5e94\u7684 PR\u4f1a\u5728NI\u503c\u4e0a\u52a020 PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 72062 dc 20 0 116960 3328 1708 S 0 .0 0 .3 0 :00.09 bash 72122 dc 10 -10 108052 356 284 S 0 .0 0 .0 0 :00.00 sleep 73191 dc 20 0 108052 360 284 S 0 .0 0 .0 0 :00.00 sleep","title":"\u663e\u793a\u5185\u5bb9\u7684\u64cd\u4f5c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_8","text":"\u25b2 \u67e5\u770b\u7f51\u7edc\u72b6\u6001 \"\"\" -t tcp\u534f\u8bae -u udp\u534f\u8bae -n \u4e0d\u53cd\u89e3,\u4e0d\u5c06IP\u5730\u5740\u89e3\u6790\u4e3a\u4e3b\u673a\u540d,\u4e0d\u5c06\u7aef\u53e3\u53f7\u89e3\u6790\u6210\u534f\u8bae\u540d eg:\u4e0d\u52a0\u6b64\u9009\u9879 127.0.0.1 --> localhost 22\u7aef\u53e3 --> ssh -a \u5168\u90e8 -l listen -p PID/Program name \"\"\" netstat -tunalp netstat -an | grep :22 netstat -an | grep :80 lsof -i:22 ## -- \u53ef\u7528\u4e8e\u5feb\u901f\u9a8c\u8bc1\u67d0\u4e2a\u7aef\u53e3\u662f\u5426\u5f00\u542f \u25b2 \u67e5\u770b\u7f51\u5173 route -n [ root@localhost ~ ] # route -n Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface ## 0.0.0.0\u6307\u4ee3\u6240\u6709\u7684IP\u5730\u5740 \u53bb\u5f80\u6240\u6709\u7684IP\u5730\u5740\u90fd\u901a\u8fc7172.16.150.2\u7f51\u5173\u8fdb\u884c\u8f6c\u53d1 0 .0.0.0 172 .16.150.2 0 .0.0.0 UG 0 0 0 ens33 172 .16.150.0 0 .0.0.0 255 .255.255.0 U 0 0 0 ens33","title":"\u7f51\u7edc\u6709\u5173\u7684\u67e5\u770b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_9","text":"\u56f4\u7ed5\u4e09\u5927\u6838\u5fc3\u786c\u4ef6 -- cpu\u3001\u5185\u5b58\u3001\u786c\u76d8 cpu: /proc/cpuinfo \u5185\u5b58: /proc/meminfo","title":"\u67e5\u770b\u7cfb\u7edf\u72b6\u6001"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_10","text":"\u8be6\u89c1 5_\u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf.md du -sh /etc # -- \u7edf\u8ba1\u67d0\u4e2a\u6587\u4ef6\u5939\u6240\u5305\u542b\u7684\u6240\u6709\u5185\u5bb9\u7684\u5927\u5c0f df df -h ## \u5e26\u5355\u4f4d df -T ## \u5e26\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b","title":"\u786c\u76d8"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_11","text":"top \u547d\u4ee4\u663e\u793a\u7684\u7cfb\u7edf\u6574\u4f53\u7edf\u8ba1\u4fe1\u606f\u91cc\u5c31\u6709\u5185\u5b58\u7684\u4fe1\u606f \u4e5f\u53ef\u4ee5\u901a\u8fc7 free \u547d\u4ee4\u76f4\u63a5\u67e5\u770b","title":"\u5185\u5b58!!"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#free","text":"\u300ctotal = used + free + buffers + cache \u300d So, Linux\u7684\u5185\u5b58\u5927\u4f53\u53ef\u5206\u4e3a\u4e09\u90e8\u5206, \u5e94\u7528\u7a0b\u5e8f\u5360\u7528\u7684,\u7a7a\u95f2\u7684,\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u8bfb\u5199\u505a\u4f18\u5316\u7684 \u6ce8\u610f! \u67e5\u770b\u771f\u6b63\u6709\u591a\u5c11\u7269\u7406\u5185\u5b58\u53ef\u4ee5\u7528(\u4e0d\u8003\u8651swap\u5206\u533a),\u770bfree\u4e0d\u51c6\u786e,\u770bavailable\u5b57\u6bb5\u6700\u51c6\u786e.. available\u503c\u662f\u5927\u4e8efree\u503c\u7684... \u591a\u7684\u90a3\u90e8\u5206\u662fbuff/cache\u53ef\u91ca\u653e\u7684\u7a7a\u95f4.. \u5373 available = free + \u53ef\u91ca\u653e\u7684buff/cache So, \u7269\u7406\u5185\u5b58\u8fd8\u6709\u591a\u5c11\u53ef\u4ee5\u7528(\u767e\u5206\u6bd4) = available / total ## -- free\u547d\u4ee4\u663e\u793a\u4e86\u7cfb\u7edf\u4e2d\u5185\u5b58\u7684\u5269\u4f59\u91cf\u548c\u4f7f\u7528\u91cf \"\"\" \u547d\u4ee4\u9009\u9879 -b \u5b57\u8282\u4e3a\u5355\u4f4d -k kb\u4e3a\u5355\u4f4d(\u9ed8\u8ba4) -m M\u4e3a\u5355\u4f4d \u6ce8\u610f\u54e6,\u8f6c\u6362\u5355\u4f4d\u540e\u4f1a\u8fdb\u884c\u56db\u820d\u4e94\u5165,\u4e0d\u662f\u4e25\u4e1d\u5408\u7f1d\u4e00\u6837\u7684,\u5927\u4f53\u4e0a\u4e00\u6837 -w buffer\u8ddfcache\u5206\u5f00\u663e\u793a \u663e\u793a\u7ed3\u679c\u5b57\u6bb5 total: \u5b89\u88c5\u7684\u5185\u5b58\u5927\u5c0f,\u5373\u5185\u5b58\u6761\u603b\u5171\u7684\u5927\u5c0f used: \u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f,\u51c6\u786e\u70b9\u6765\u8bf4\u6307\u7684\u662f\u5728\u5185\u5b58\u4e2d\u8dd1\u7684\u5e94\u7528\u7a0b\u5e8f\u5360\u7528\u7684\u7a7a\u95f4 free: \u7a7a\u95f2\u7684,used\u53ef\u4ee5\u7528,buff/cache\u4e5f\u53ef\u4ee5\u7528 shared: \u5171\u4eab\u7684\u5185\u5b58,\u6307used\u4e2d\u6709\u90e8\u5206\u5185\u5b58\u662f\u8fdb\u7a0b\u4eec\u5171\u4eab\u7684 \u8fd9\u4e0e\u524d\u9762\u8fdb\u7a0b\u4fe1\u606f\u90e8\u5206`RES \u2013 SHR`\u547c\u5e94\u4e0a\u5566.. buff/cache: buff/cache\u91ca\u653e\u540e\u7ed9\u4e86free available: \u8868\u660e\u76ee\u524d\u53ef\u4ee5\u63d0\u4f9b\u7ed9\u65b0\u542f\u52a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u5185\u5b58 \"\"\" [ root@localhost ~ ] # free -wm total used free shared buffers cache available Mem: 972 634 84 17 0 253 165 Swap: 2047 80 1967","title":"[free\u7ed3\u679c\u7684\u5b57\u6bb5]"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#buffcache","text":"sync echo 3 > /proc/sys/vm/drop_caches buffer\u4f18\u5316\u5199,cache\u4f18\u5316\u8bfb,\u6211\u4eec\u6ca1\u4f7f\u7528,\u4f46\u64cd\u4f5c\u7cfb\u7edf\u5728\u4f7f\u7528,\u662f\u79cd\u4f18\u5316\u673a\u5236 [ root@localhost ~ ] # free -w total used free shared buffers cache available Mem: 995640 654476 81872 17576 0 259292 164964 Swap: 2097148 82688 2014460 [ root@localhost ~ ] # du -sh /etc/passwd 4 .0K /etc/passwd ## -- \u5728\u53e6\u4e00\u4e2a\u7ec8\u7aef\u6267\u884c\u547d\u4ee4 vim /etc/passwd ## \u53ef\u4ee5\u53d1\u73b0cache\u503c\u53d8\u5927\u4e86,\u662f\u4e3a\u4e86\u4e0b\u6b21\u6253\u5f00\u8be5\u6587\u4ef6\u65f6\u5019,\u80fd\u66f4\u5feb\u901f\u7684\u6253\u5f00.. [ root@localhost ~ ] # free -w total used free shared buffers cache available Mem: 995640 657212 76876 17576 0 261552 162228 Swap: 2097148 82688 2014460 [ root@localhost ~ ] # [ root@localhost ~ ] # ## \u6b64\u5904\u7684\u91ca\u653e\u662fbuffer\u548ccache\u4e00\u8d77\u91ca\u653e [ root@localhost ~ ] # ## \u91ca\u653e\u4e4b\u524d\u82e5\u6709\u5199\u884c\u4e3a,\u5199\u7684\u5185\u5bb9\u90fd\u5728buffers\u91cc\u5b58\u7740\u5462! [ root@localhost ~ ] # ## So,\u5728\u91ca\u653e\u4e4b\u524d\u9700\u8981\u591a\u6267\u884c\u51e0\u6b21sync\u547d\u4ee4,\u544a\u8bc9OS\u5c06buffer\u7f13\u51b2\u533a\u91cc\u7684\u6570\u636e\u5199\u5165\u786c\u76d8 [ root@localhost ~ ] # sync [ root@localhost ~ ] # sync [ root@localhost ~ ] # sync [ root@localhost ~ ] # ## OS\u4f1a\u5b9a\u671f\u626b\u63cf/proc/sys/vm/drop_caches\u6587\u4ef6 [ root@localhost ~ ] # ## \u8be5\u6587\u4ef6\u53ef\u4ee5\u8bbe\u7f6e\u503c0(\u9ed8\u8ba4)\u30011\u30012\u30013 0\u4ee3\u8868\u4e0d\u6e05\u7406 3\u4ee3\u8868\u6e05\u7406 [ root@localhost ~ ] # cat /proc/sys/vm/drop_caches 0 [ root@localhost ~ ] # ## \u6ce8\u610f\u54e6,\u64cd\u4f5c\u7cfb\u7edf\u626b\u63cf\u65f6\u53d1\u73b0\u8be5\u6587\u4ef6\u672a\u4fee\u6539\u7684\u8bdd,\u662f\u4e0d\u4f1a\u8bfb\u53d6\u91cc\u9762\u7684\u5185\u5bb9\u7684 [ root@localhost ~ ] # ## So,\u60f3\u8981\u91ca\u653e\u65f6,\u5c31\u5f97\u6267\u884c\u4e00\u6b21 echo 3 > /proc/sys/vm/drop_caches \u8fd9\u6761\u547d\u4ee4 [ root@localhost ~ ] # echo 3 > /proc/sys/vm/drop_caches ## -- \u53ef\u4ee5\u524d\u540e\u5bf9\u6bd4\u53d1\u73b0cache\u503c\u660e\u663e\u4e0b\u964d\u5566,free\u503c\u660e\u663e\u63d0\u5347\u4e86... [ root@localhost ~ ] # free -w total used free shared buffers cache available Mem: 995640 601396 303444 17568 0 90800 268660 Swap: 2097148 82688 2014460","title":"[\u91ca\u653ebuff/cache]\u00a0"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#_12","text":"\u8981\u77e5\u9053free\u662f\u4ece\u6587\u4ef6 /proc/meminfo \u91cc\u91c7\u96c6\u83b7\u53d6\u7684\u4fe1\u606f, \u800c /proc\u6587\u4ef6\u5939\u662fproc\u865a\u62df\u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u70b9.. \u4f55\u4e3a \u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edf \uff1f \u4ee3\u8868\u5b83\u7684\u6570\u636e\u4e0d\u5728\u786c\u76d8\u91cc,\u800c\u662f\u5728\u5185\u5b58\u91cc,\u6302\u8f7d\u70b9\u91cc\u7684\u6570\u636e\u662f\u7cfb\u7edf\u751f\u6210\u7684.. # mount\u547d\u4ee4\u53ef\u67e5\u770b\u6302\u8f7d\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f # \u50cf/dev/sda1\u6587\u4ef6\u7cfb\u7edf(\u901a\u4fd7\u70b9\u5c31\u662f\u6307\u786c\u76d8\u5206\u533a)\u7684\u6302\u8f7d\u70b9\u662f/boot # \u786c\u76d8\u5206\u533a/\u771f\u5b9e\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u53ef\u901a\u8fc7df\u547d\u4ee4\u67e5\u770b\u5230\u7684,\u4f46\u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edfdf\u547d\u4ee4\u770b\u4e0d\u5230 [ root@localhost ~ ] # mount | grep -E \"/dev/sda1|/proc \" proc on /proc type proc ( rw,nosuid,nodev,noexec,relatime ) /dev/sda1 on /boot type xfs ( rw,relatime,attr2,inode64,noquota ) \u82e5\u5378\u8f7d\u6389proc\u8fd9\u4e2a\u865a\u62df\u6587\u4ef6\u7cfb\u7edf, free\u547d\u4ee4\u5c31\u4e0d\u80fd\u4f7f\u7528\u5566!! \u53cd\u5411\u9a8c\u8bc1\u4e86free\u547d\u4ee4\u7684\u7ed3\u679c\u90fd\u662f\u4eceproc\u8fd9\u4e2a\u865a\u62df\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5f97\u5230\u7684!! [ root@localhost ~ ] # umount /proc -l [ root@localhost ~ ] # free Error: /proc must be mounted To mount /proc at boot you need an /etc/fstab line like: proc /proc proc defaults In the meantime, run \"mount proc /proc -t proc\" \"\"\" mount -t \u6307\u5b9a\u6587\u4ef6\u7cfb\u7edf \u865a\u62df\u6587\u4ef6\u7cfb\u7edf \u6302\u8f7d\u70b9 Ps: mount -t xfs /dev/sda1 /boot \"\"\" [ root@localhost ~ ] # mount -t proc proc /proc/ [ root@localhost ~ ] # free -m total used free shared buff/cache available Mem: 972 633 85 17 253 166 Swap: 2047 80 1967","title":"[\u865a\u62df\u6587\u4ef6\u7cfb\u7edf]"},{"location":"1_linux%E5%9F%BA%E7%A1%80/12_%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B/#cpu","text":"top\u547d\u4ee4\u7684\u7ed3\u679c\u91cc\u5305\u542b\u4e86cpu\u5de5\u4f5c\u72b6\u51b5(\u7279\u522b\u662f\u8d1f\u8f7d) \u901a\u8fc7\u67e5\u770b/proc/cpuinfo\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5f97\u5230cpu\u76f8\u5173\u7684\u786c\u4ef6\u4fe1\u606f.. ## -- \u6587\u4ef6\u4e2d\u6709\u591a\u5c11\u4e2aprocessor,\u5c31\u6709\u591a\u5c11\u4e2a\u6838(\u903b\u8f91cpu) [ root@localhost ~ ] # grep \"processor\" /proc/cpuinfo processor : 0 processor : 1 processor : 2 ## -- \u6587\u4ef6\u4e2d\u6709\u591a\u5c11\u4e2aphysical id,\u5c31\u6709\u591a\u5c11\u7269\u7406cpu [ root@localhost ~ ] # grep \"physical id\" /proc/cpuinfo physical id : 0xx ## -- cpu\u6838\u6570 [ root@localhost ~ ] # grep \"cpu cores\" /proc/cpuinfo cpu cores : 1 \"\"\" flags \u8be5\u6838\u6240\u652f\u6301\u7684\u529f\u80fd lm\uff0864\u4f4d\uff09 vmx \u652f\u6301\u865a\u62df\u5316 Intel svm \u652f\u6301\u865a\u62df\u5316 AMD \"\"\" [ root@localhost ~ ] # grep flags /proc/cpuinfo flags : fpu \u3010vme\u3011 de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology ... ... ... [ root@localhost ~ ] # lscpu Architecture: x86_64 CPU op-mode ( s ) : 32 -bit, 64 -bit Byte Order: Little Endian CPU ( s ) : 1 On-line CPU ( s ) list: 0 ... ... ...","title":"CPU"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/","text":"\u4f18\u5148\u7ea7\u8bbe\u7f6e \u00b6 nice\u547d\u4ee4\u8bbe\u7f6e\u7684\u4f18\u5148\u7ea7\u4e0d\u662f\u7a0b\u5e8f\u6700\u7ec8\u7684\u4f18\u5148\u7ea7, \u53ea\u662f\u4f18\u5148\u7ea7\u7684\u4fee\u6b63\u6570\u503c [ root@localhost ~ ] # ps -l | head -1 F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD PRI: \u4ee3\u8868\u8fd9\u4e2a\u8fdb\u7a0b\u53ef\u88ab\u6267\u884c\u7684\u4f18\u5148\u7ea7,\u5176\u503c\u8d8a\u5c0f\u8d8a\u65e9\u88ab\u6267\u884c NI: \u4ee3\u8868\u8fd9\u4e2a\u8fdb\u7a0b\u7684nice\u503c NI\u53ef\u4ee5\u901a\u8fc7nice\u547d\u4ee4\u8bbe\u7f6e,\u5176\u8868\u793a\u8fdb\u7a0b\u53ef\u88ab\u6267\u884c\u7684\u4f18\u5148\u7ea7\u7684\u4fee\u6b63\u6570\u503c.. PRI\u503c\u8d8a\u5c0f\u8d8a\u5feb\u88ab\u6267\u884c,\u52a0\u5165nice\u503c\u540e,\u5c06\u4f1a\u4f7f\u5f97PRI\u53d8\u4e3a: PRI(new)=PRI(old)+nice \u25b2 \u5bf9\u67d0\u4e00\u547d\u4ee4\u8bbe\u7f6enice\u503c ` nice -n nice\u503c \u547d\u4ee4 ` \u25b2 \u5bf9\u5df2\u8fd0\u884c\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u65b0\u7684\u4f18\u5148\u7ea7 ` renice -nice\u503c \u8fdb\u7a0bPID ` PS: \u82e5nice\u547d\u4ee4\u672a\u6307\u5b9a\u4f18\u5148\u7ea7\u7684\u8c03\u6574\u503c,\u5219\u4ee5\u7f3a\u7701\u503c10\u6765\u8c03\u6574\u7a0b\u5e8f\u8fd0\u884c\u4f18\u5148\u7ea7,\u65e2\u5728\u5f53\u524d\u7a0b\u5e8f\u8fd0\u884c\u4f18\u5148\u7ea7\u57fa\u7840\u4e4b\u4e0a\u589e\u52a010.. \u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7 \u00b6 \u53ea\u9700\u638c\u63e1 1\u30019\u300115 \u8fd93\u4e2a\u4fe1\u53f7!!! kill -l \u5217\u51fa\u6240\u6709\u652f\u6301\u7684\u4fe1\u53f7 1) SIGHUP 9) SIGKILL 15) SIGTERM HUP \u00b6 \u6709\u4e24\u4e2a\u4f5c\u7528: 1> \u6302\u8d77\u4f1a\u8bdd 2> \u4fee\u6539\u4e86\u914d\u7f6e\u6587\u4ef6,\u5728\u4e0d\u5173\u95ed\u8be5\u8fdb\u7a0b\u7684\u60c5\u51b5\u4e0b,\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 \u8fd9\u91cc\u5148\u8be6\u7ec6\u9610\u8ff0\u7b2c\u4e8c\u4e2a\u4f5c\u7528,\u7b2c\u4e00\u4e2a\u4f5c\u7528\u540e\u6587\u4f1a\u8fdb\u884c\u8bf4\u660e! \u542f\u52a8\u8f6f\u4ef6\u65f6\u4f1a\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6, \u96be\u9053\u6539\u5b8c\u914d\u7f6e\u6587\u4ef6\u540e, \u8981\u8ba9\u8f6f\u4ef6\u91cd\u542f\u8fdb\u800c\u91cd\u65b0\u8bfb\u53d6\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u5417\uff1f no.. \u91cd\u542f,\u8be5\u8f6f\u4ef6\u63d0\u4f9b\u7684\u670d\u52a1\u5c31\u65ad\u6389\u5566.. \u53ef\u4ee5\u901a\u8fc7\u8be5\u8f6f\u4ef6\u7684\u8fdb\u7a0b\u53d1\u9001HUP\u4fe1\u53f7\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898... systemctl stop firewalld systemctl disable firewalld setenforce 0 ifconfig ens33 | grep inet ## -- \u67e5\u770b\u5230\u670d\u52a1\u7aef(vm\u865a\u673a)\u7684ip\u5730\u5740\u4e3a172.16.150.131 yum install vsftpd -y systemctl start vsftpd ## -- \u5f00\u542fftp\u670d\u52a1 systemctl status vsftpd ## -- \u67e5\u770bftp\u670d\u52a1\u72b6\u6001 systemctl enable vsftpd ## -- \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f ## -- vsftpd\u6b64\u8f6f\u4ef6\u6709\u4e2a\u9ed8\u8ba4\u7684\u5171\u4eab\u6587\u4ef6\u5939 /var/ftp/ cd /var/ftp ls ## -- \u91cc\u9762\u9ed8\u8ba4\u6709\u4e2ahub\u6587\u4ef6\u5939 mkdir /var/ftp/share touch /var/ftp/share/a.txt touch /var/ftp/share/b.txt touch /var/ftp/share/aaa [ root@localhost ftp ] # tree /var/ftp /var/ftp \u251c\u2500\u2500 pub \u2514\u2500\u2500 share \u251c\u2500\u2500 aaa \u251c\u2500\u2500 a.txt \u2514\u2500\u2500 b.txt ## -- ftp://172.16.150.131 \u6307\u5411\u7684\u5c31\u662f /var/ftp \u5728\u5ba2\u6237\u7aef ( mac\u7535\u8111 ) \u4e0a,\u9996\u5148 ping 172 .16.150.131\u770b\u662f\u5426\u80fdping\u901a \u7136\u540e\u5728mac\u7684\u6d4f\u89c8\u5668\u4e0a\u8f93\u5165\u5730\u5740 ftp://172.16.150.131 \u70b9\u51fb ` \u8bbf\u8fbe.app ` \u6309\u94ae,\u4ee5\u5ba2\u4eba\u7684\u8eab\u4efd\u8bbf\u95ee,\u70b9\u51fb\u8fde\u63a5!\u6210\u529f! \u73b0\u5728\u6211\u4eec\u9700\u8981\u5c06ftp\u670d\u52a1\u9ed8\u8ba4\u7684\u5171\u4eab\u76ee\u5f55 /var/ftp/ \u6362\u6210 /var/ftp/share ## vim /etc/vsftpd/vsftpd.conf \u5728\u8be5\u914d\u7f6e\u6587\u4ef6\u6700\u672b\u5c3e\u6dfb\u52a0 anon_root=/var/ftp/share ## \u4f7f\u7528echo echo 'anon_root=/var/ftp/share' >> /etc/vsftpd/vsftpd.conf ## \u4f7f\u7528sed \u6ce8\u610f\u7528\u7684\u662f\u5355\u5f15\u53f7!! $\u6700\u540e\u4e00\u884c a\u6dfb\u52a0 sed -i '$a anon_root=/var/ftp/share' /etc/vsftpd/vsftpd.conf ## \u8ba9\u914d\u7f6e\u6587\u4ef6\u751f\u6548,\u82e5\u901a\u8fc7 systemctl restart vsftpd \u547d\u4ee4\u91cd\u542f\u670d\u52a1,\u4f1a\u5bfc\u81f4\u8be5\u8fdb\u7a0b\u7684PID\u6539\u53d8 [ root@localhost ftp ] # ps aux | grep [v]sftpd root 1117 0 .0 0 .0 53292 712 ? Ss 20 :02 0 :00 /usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf kill -1 1117 \u7136\u540e\u901a\u8fc7\u6d4f\u89c8\u5668\u91cd\u65b0\u4ee5\u5ba2\u4eba\u8eab\u4efd\u8bbf\u95ee.\u5c31\u4f1a\u5f97\u5230 /var/ftp/share\u76ee\u5f55\u4e0b\u7684\u5185\u5bb9 \"\"\" \u82e5\u5c06\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\u641e\u4e71\u4e86,\u5c06\u914d\u7f6e\u6587\u4ef6\u6062\u590d\u51fa\u5382\u8bbe\u7f6e\u600e\u4e48\u505a\uff1f rm -rf /etc/vsftpd/vsftpd.conf yum reinstall vsftpd -y \"\"\" KILL\u4e0eTERM \u00b6 kill \u8fdb\u7a0bPID \u9ed8\u8ba4\u53d1\u51fa\u7684\u5c31\u662f -15\u7684\u4fe1\u53f7, \u4ee3\u8868\u7ec8\u6b62 kill -9 \u8fdb\u7a0bPID \u6709\u4e9b\u8fdb\u7a0b\u752815\u7684\u4fe1\u53f7\u662f\u6740\u4e0d\u6b7b\u7684,\u53d1\u90019\u7684\u4fe1\u53f7\u5f3a\u5236\u6740\u6b7b kill\u547d\u4ee4\u548cftp\u7a0b\u5e8f\u90fd\u662f\u8f6f\u4ef6,kill\u7ed9ftp\u53d1\u4e86\u4e2a\u4fe1\u53f7\u8fc7\u53bb... ftp\u662f\u5426\u54cd\u5e94 \u53d6\u51b3\u4e8e ftp\u8f6f\u4ef6\u5728\u5f00\u53d1\u65f6\u6709\u6ca1\u6709\u8bbe\u8ba1\u6355\u6349\u6b64\u4fe1\u53f7\u5e76\u4f5c\u5904\u7406\u7684\u529f\u80fd.. 15\u8fd9\u4e2a\u4fe1\u53f7\u53ef\u80fd\u5f97\u4e0d\u5230\u5e94\u7528\u8f6f\u4ef6\u54cd\u5e94,\u4f469\u8fd9\u4e2a\u4fe1\u53f7\u5e94\u7528\u8f6f\u4ef6\u57fa\u672c\u90fd\u4f1a\u54cd\u5e94,\u4e0d\u7136\u8fd9\u4e2a\u8f6f\u4ef6\u5c31\u662f\u75c5\u6bd2\u4e86... Ps: \u56de\u987e\u4e0b,\u5904\u4e8e D \u548c Z \u72b6\u6001\u7684\u8fdb\u7a0b\u662f\u6740\u4e0d\u6389\u7684.. \u591a\u4e2a\u865a\u62df\u7ec8\u7aef,\u90fd\u5f00\u542f\u4e86vim, \u901a\u8fc7 pkill -9 vim \u547d\u4ee4\u53ef\u4ee5 \u6279\u91cf\u6740\u6b7b .. \u8865\u5145 \u00b6 19) SIGSTOP \u4f7f\u8fdb\u7a0b\u8fdb\u5165T\u72b6\u6001 18) SIGCONT \u5c06\u505c\u6b62\u7684\u8fdb\u7a0b\u91cd\u65b0\u6295\u5165\u8fd0\u884c \u5173\u4e8eHUP\u4fe1\u53f7 \u00b6 \u7ed9\u8fdb\u7a0b\u53d1\u9001HUP\u4fe1\u53f7, \u53ef\u4ee5\u8ba9\u8fdb\u7a0b\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6.. \u63a5\u4e0b\u6765\u4e3b\u8981\u8bb2\u89e3\u5b83\u7684\u53e6\u5916\u4e00\u4e2a\u529f\u80fd: \u6302\u8d77\u4f1a\u8bdd \u8bdd\u9898\u5f15\u5165 \u00b6 \u8fdc\u7a0b\u8fde\u63a5\u5f00\u542f\u4e86\u4e00\u4e2a\u865a\u62df\u7ec8\u7aef( \u63d0\u4e00\u5634,\u7528\u6237\u767b\u5f55\u6210\u529f\u540e,\u4f1a\u5148\u5f00\u542f\u4e00\u4e2a\u540d\u4e3abash\u7684\u8fdb\u7a0b ), \u4e00\u901a\u547d\u4ee4\u64cd\u4f5c\u540e, \u5173\u95ed\u8be5\u7ec8\u7aef( \u6ce8\u610f,\u4e0d\u662fexit\u547d\u4ee4\u9000\u51fa ),\u8be5\u7ec8\u7aef\u7a97\u53e3\u91cc\u6267\u884c\u7684\u6240\u6709\u8fdb\u7a0b( bash\u8fdb\u7a0b\u8fde\u540c\u5176\u5b50\u8fdb\u7a0b )\u90fd\u4f1a\u88ab\u5f3a\u5236\u5173\u6389.. So,\u6211\u4eec\u9700\u8981\u8ba9\u8fdb\u7a0b\u8131\u79bb\u5f53\u524d\u4f1a\u8bdd\u7a97\u53e3session( \u901a\u4fd7\u70b9,\u5c31\u662f\u90a3\u4e2a\u8f93\u5165\u547d\u4ee4\u8fd4\u56de\u7ed3\u679c\u7684\u4ea4\u4e92\u5f0f\u7684\u547d\u4ee4\u884c\u754c\u9762 )\u800c\u8fd0\u884c \u6362\u4e2a\u8bf4\u6cd5,\u8ba9\u6211\u4eec\u7684\u8fdb\u7a0b\u5728\u540e\u53f0\u4e00\u76f4\u8fd0\u884c,\u4e0d\u8981\u56e0\u4e3a\u7528\u6237\u6ce8\u9500\u6216\u8005\u7f51\u7edc\u65ad\u5f00\u6216\u8005\u7ec8\u7aef\u5173\u95ed\u800c\u4e00\u8d77\u88ab\u5e72\u6389... \u6709\u4e24\u79cd\u89e3\u51b3\u601d\u8def: \u601d\u8def1: \u8ba9\u8fdb\u7a0b\u5ffd\u7565Linux HUP\u4fe1\u53f7 \u601d\u8def2: \u8ba9\u8fdb\u7a0b\u8fd0\u884c\u5728\u65b0\u7684\u4f1a\u8bdd\u91cc, \u4ece\u800c\u4e0d\u5c5e\u4e8e\u6b64\u7ec8\u7aef\u7684\u5b50\u8fdb\u7a0b, \u5c31\u4e0d\u4f1a\u5728\u5f53\u524d\u7ec8\u7aef\u6302\u6389\u7684\u60c5\u51b5\u4e0b\u4e00\u8d77\u88ab\u5e26\u8d70 \u6709\u56db\u79cd\u65b9\u5f0f: \u5b83\u4eec\u7684\u539f\u7406\u672c\u8d28\u4e0a\u90fd\u4e00\u6837 -- \u8ba9\u5b50\u8fdb\u7a0b\u8ba4\u4e00\u4e2a\u65b0\u7684\u7239PID\u4e3a1 \u25cb \u5148\u4e0d\u7740\u6025\u53c9\u6389\u7a97\u53e3,\u4f7f\u7528exit\u6216logout\u547d\u4ee4\u6b63\u5e38\u9000\u51fa\u7ec8\u7aef \u25cb nohup \u547d\u4ee4 & \u25cb setsid \u25cb (\u547d\u4ee4 &) \u25cb screen \u547d\u4ee4 \u25cb kill -9 \u7236\u8fdb\u7a0bPID \u25b2 \u9a8c\u8bc1\u76f4\u63a5\u53c9\u6389\u7a97\u53e3,\u8be5\u4f1a\u8bdd\u7a97\u53e3/session/\u4ea4\u4e92\u5f0f\u7a97\u53e3/\u865a\u62df\u7ec8\u7aef\u7684bash\u8fdb\u7a0b\u8fde\u540c\u5b83\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u4e00\u540c\u6302\u6389.. ## -- /dev/pts/0 \"\"\" \u5728\u7b2c1\u4e2a\u865a\u62df\u7ec8\u7aef\u91cc \u6211\u4eecping\u7f51\u5740,\u5c06\u7ed3\u679c\u4e0d\u7ba1\u6b63\u786e\u4e0e\u5426\u90fd\u4e22\u5230/dev/null\u9ed1\u6d1e\u4e2d,\u5e76\u5728\u540e\u53f0\u8fd0\u884c \u5e76\u6267\u884c\u4e86\u4e00\u4e2a\u5728\u540e\u53f0\u8fd0\u884c\u7684sleep\u547d\u4ee4 \u67e5\u770bPID\u4e3a6597\u7684ping\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u7684PID\u4e3a6331 \u67e5\u770b\u5f97\u77e5PID\u4e3a6331\u7684\u8fdb\u7a0b\u662f\u6253\u5f00\u6b64\u865a\u62df\u7ec8\u7aef/dev/pts/0\u4ea7\u751f\u7684bash\u8fdb\u7a0b \"\"\" [ root@localhost ~ ] # ping www.baidu.com &> /dev/null & [ 1 ] 6597 [ root@localhost ~ ] # sleep 3000 & [ 2 ] 6859 [ root@localhost ~ ] # ps -elf | grep 6597 | grep -v grep 4 S root 6597 6331 0 80 0 - 33188 poll_s 09 :50 pts/0 00 :00:00 ping www.baidu.com [ root@localhost ~ ] # ps aux | grep 6331 | grep -v grep root 6331 0 .0 0 .2 116456 2944 pts/0 Ss 09 :38 0 :00 -bash ## -- /dev/pts/1 \"\"\" \u5728\u7b2c2\u4e2a\u865a\u62df\u7ec8\u7aef\u91cc \u540c\u6837\u80fd\u67e5\u8be2\u5230ping\u8fdb\u7a0b\u548csleep\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b,\u90fd\u662fPID\u4e3a6331\u7684bash\u8fdb\u7a0b \"\"\" ps -elf | grep 6597 | grep -v grep ps -elf | grep 6859 | grep -v grep ps aux | grep 6331 | grep -v grep ## \u8be5\u547d\u4ee4\u53ea\u662f\u60f3\u9a8c\u8bc1,\u5f00\u542f\u7684\u6bcf\u4e2a\u865a\u62df\u7ec8\u7aef\u90fd\u6709\u5bf9\u5e94\u7684bash\u8fdb\u7a0b pts/0\u5bf9\u5e946331 pts/1\u5bf9\u5e946537 [ root@localhost ~ ] # ps aux | grep bash | grep -v grep root 820 0 .0 0 .0 115408 956 ? S 05 :09 0 :00 /bin/bash /usr/sbin/ksmtuned root 6331 0 .0 0 .2 116456 2944 pts/0 Ss+ 09 :38 0 :00 -bash root 6537 0 .0 0 .2 116456 2936 pts/1 Ss 09 :49 0 :00 -bash ## \u53ef\u4ee5\u67e5\u8be2\u5230 PID\u4e3a6631\u7684bash\u8fdb\u7a0b \u6709\u4e24\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5b50\u8fdb\u7a0b ping \u548csleep [ root@localhost ~ ] # pstree 6331 bash\u2500\u252c\u2500ping \u2514\u2500sleep \u5c06\u7b2c1\u4e2a\u865a\u62df\u7ec8\u7aef /dev/pts/0 \u7684\u4f1a\u8bdd\u7a97\u53e3\u53c9\u6389 ( \u6ce8\u610f,\u4e0d\u662fexit\u6b63\u5e38\u9000\u51fa ) , \u5728\u6b64session\u5173\u95ed\u7684\u65f6\u5019,\u4f1a\u5411\u6b64\u4f1a\u8bdd\u7a97\u53e3\u91cc\u7684bash\u8fdb\u7a0b\u53ca\u5176\u5b50\u8fdb\u7a0b\u90fd\u53d1\u4e00\u4e2ahup\u4fe1\u53f7, \u8be5hup\u4fe1\u53f7\u7684\u610f\u601d\u5c31\u662f\u8ba9\u5b83\u4eec\u90fd\u6b7b\u6389.. \u6240\u4ee5ping\u8fdb\u7a0b\u3001sleep\u8fdb\u7a0b\u5728\u7b2c2\u4e2a\u7ec8\u7aef/dev/pts/1\u91cc\u5c31\u67e5\u8be2\u4e0d\u5230\u5566 [ root@localhost ~ ] # tty /dev/pts/1 [ root@localhost ~ ] # ps aux | grep 6597 | grep -v grep [ root@localhost ~ ] # ps aux | grep 6859 | grep -v grep [ root@localhost ~ ] # Ps: \u5728\u7b2c1\u4e2a\u7ec8\u7aef/dev/pts/0\u91cc\u8f93\u5165\u547d\u4ee4exit\u800c\u4e0d\u662f\u76f4\u63a5\u53c9\u6389,\u90a3\u4e48\u5728\u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u91cc\u4f9d\u65e7\u80fd\u67e5\u5230ping\u8fdb\u7a0b.. exit\u3001logout \u00b6 \u517b\u6210\u826f\u597d\u4e60\u60ef,\u5148exit/logout\u6b63\u5e38\u9000\u51fa\u540e,\u4fdd\u8bc1\u8be5\u7a97\u53e3\u6ca1\u6709\u4efb\u4f55\u8fdc\u7a0b\u8fde\u63a5\u4e86,\u518d\u53c9\u6389!!! \u5728centos7\u91cc\u5185\u6838\u53ea\u8d1f\u8d23\u786c\u4ef6\u90e8\u5206\u7684\u7ba1\u7406,\u4e0a\u5c42\u8fd0\u884c\u7684\u8f6f\u4ef6\u7edf\u4e00\u88absystemd\u8f6f\u4ef6\u7ba1\u7406\u8d77\u6765\u5566. PID\u4e3a1\u7684\u8fdb\u7a0b\u5c31\u662fsystemd\u8f6f\u4ef6\u542f\u52a8\u8d77\u6765\u7684.. \u5f53\u6211\u4eec\u5728/dev/pts/0\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4 exit \u6216\u8005 logout , \u6b63\u5e38\u9000\u51fa\u8be5\u7ec8\u7aef.. \u6b64\u7ec8\u7aef\u91ccPID\u4e3a7441\u7684bash\u8fdb\u7a0b\u5c31\u4f1a\u88abkill\u5173\u6389,\u4f46\u8be5bash\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0bping\u6258\u7ba1\u7ed9\u4e86PID\u4e3a1\u7684\u8fdb\u7a0b... So,\u6b63\u5e38\u9000\u51fa/dev/pts/0\u7ec8\u7aef\u540e,\u518d\u53c9\u6389\u8be5\u7ec8\u7aef\u7a97\u53e3,ping\u8fdb\u7a0b\u4e5f\u4f1a\u4e00\u76f4\u5728\u540e\u53f0\u8fd0\u884c... \u522b\u95ee\u4e3a\u4ec0\u4e48,linux\u5c31\u662f\u8fd9\u4e48\u8bbe\u8ba1\u7684\uff01\uff01T_T Ps: \u5f80\u4e0b\u5728\u8fdb\u884c\u65b0\u7684\u5b9e\u9a8c\u4e4b\u524d,\u8bb0\u5f97 kill -9 7492 ... nohup \u00b6 nohup\u7684\u7528\u9014\u5c31\u662f\u8ba9\u63d0\u4ea4\u7684\u547d\u4ee4\u5ffd\u7565 hup \u4fe1\u53f7 nohup \u7684\u4f7f\u7528\u662f\u5341\u5206\u65b9\u4fbf\u7684, \u53ea\u9700\u5728\u8981\u5904\u7406\u7684\u547d\u4ee4\u524d\u52a0\u4e0a nohup \u5373\u53ef... \u4f46 \u901a\u5e38 \u4f7f\u7528nohup\u7684\u65f6\u5019,\u4f1a\u5728\u547d\u4ee4\u6700\u540e\u52a0\u4e0a & ,\u8ba9\u5176\u5728\u540e\u53f0\u8fd0\u884c... \u6ce8\u610f\u54e6! \u5728\u76f4\u63a5\u53c9\u6389\u7ec8\u7aef\u65f6, \u8be5\u7ec8\u7aefbash\u7684\u5b50\u8fdb\u7a0b\u4f1a\u4e22\u6389STDOUT ( \u6b63\u5e38\u8f93\u51fa ) \u3001STDERR ( \u9519\u8bef\u8f93\u51fa ) \u7684\u94fe\u63a5. \u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u7f3a\u7701\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230 nohup.out\u6587\u4ef6\u4e2d. \u4e00\u822c\u6211\u4eec\u4f1a\u5728\u7ed3\u5c3e\u52a0\u4e0a \"&\" \u6765\u5c06\u547d\u4ee4\u653e\u5165\u540e\u53f0\u8fd0\u884c\u8fdb\u800c\u89e3\u51b3\u95ee\u9898, \u6216\u8005\u66f4\u6539\u7f3a\u7701\u7684\u91cd\u5b9a\u5411\u6587\u4ef6\u540d... setsid \u00b6 \u6838\u5fc3\u601d\u60f3\u4e5f\u662f\u8ba9\u8fdb\u7a0b\u5ffd\u7565 hup\u4fe1\u53f7.. setid\u76f4\u63a5\u5c06\u8fdb\u7a0b\u7684\u7236pid\u8bbe\u7f6e\u62101, \u5373\u8ba9\u8fd0\u884c\u7684\u8fdb\u7a0b\u6210\u4e3ainit( centos7\u4ee5\u524d\u662finit,centos\u662fsystemd )\u7684\u5b50\u8fdb\u7a0b. \u90a3\u4e48\u9664\u975einit/systemd\u7ed3\u675f, \u8be5\u5b50\u8fdb\u7a0b\u624d\u4f1a\u7ed3\u675f, \u5f53\u524d\u8fdb\u7a0b\u6240\u5728\u7684\u7ec8\u7aef\u7ed3\u675f\u540e\u5e76\u4e0d\u4f1a\u5f71\u54cd\u8fdb\u7a0b\u7684\u8fd0\u884c.. \u5373\u8be5\u8fd0\u884c\u7684\u8fdb\u7a0b\u8ddf\u5f53\u524d\u7ec8\u7aef\u5565\u5173\u7cfb\u90fd\u6ca1\u6709\u4e86.. \u5b83\u5e76\u4e0d\u5c5e\u4e8e\u5f53\u524d\u7ec8\u7aef\u7684\u5b50\u8fdb\u7a0b, \u4ece\u800c\u4e5f\u5c31\u4e0d\u4f1a\u53d7\u5230\u5f53\u524d\u7ec8\u7aef\u7684Linux HUP\u4fe1\u53f7\u7684\u5f71\u54cd\u4e86. \u6ce8\u610f\u54e6! nohup\u9700\u8981\u5728\u547d\u4ee4\u6700\u540e\u52a0 & , setid\u53ef\u7528\u53ef\u4e0d\u7528... setid\u4e00\u6b65\u5230\u4f4d,\u5c06\u8fd0\u884c\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u53d8\u4e3a\u4e86PID\u4e3a1\u7684\u8fdb\u7a0b.. \u5b9e\u73b0\u4e86nohup\u8fd0\u884c\u547d\u4ee4\u540e, \u53c9\u6389\u4f1a\u8bdd\u7a97\u53e3\u7684\u6548\u679c.. \u5410\u69fd\u4e00\u4e0b, \u6709\u4e2a\u5f85\u89e3\u51b3\u7684\u7591\u70b9, A\u7ec8\u7aef\u540e\u53f0\u8fd0\u884c setsid ping www.baidu.com &> /dev/null & \u547d\u4ee4, \u4ea4\u4e92\u5f0f\u754c\u9762\u8fd4\u56de\u4e86 [1] 9192 , \u5c06\u9053\u7406,\u6309\u7167\u5f80\u5e38\u7684\u903b\u8f91, 9192\u4e5f\u5c31\u662f\u8fd9\u6761\u8fd0\u884c\u547d\u4ee4\u7684PID... \u4f46\u7ed3\u679c9193\u624d\u662f\u6b64\u547d\u4ee4\u7684PID!! why? \u5728\u5b50shell\u4e2d\u63d0\u4ea4\u4efb\u52a1 \u00b6 \u7528\u62ec\u53f7\u5c06\u547d\u4ee4\u62ec\u8d77\u6765\u63d0\u4ea4... \u80fd\u8fbe\u5230\u8ddfsetsid\u540c\u6837\u7684\u6548\u679c. \u5177\u4f53\u7684\u5e95\u5c42\u539f\u7406\u7b49\u8bb2shell\u7f16\u7a0b\u65f6\u518d\u9610\u8ff0.. screen!! \u00b6 screen \u547d\u4ee4 screen -S \u7a97\u53e3\u540d screen -ls screen -r \u7a97\u53e3\u540d/\u7ec8\u7aefPID ctrl+a + ctrl+d \u7ec4\u5408\u952e screen -x \u7a97\u53e3\u540d/\u7ec8\u7aefPID \u66f4\u591a\u64cd\u4f5c\u53c2\u8003: https://zhuanlan.zhihu.com/p/336727473 screen\u90e8\u5206\u5185\u5bb9... yum install screen -y \u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u8fd0\u884c\u547d\u4ee4 screen vim a.txt \u5728\u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e2d\u67e5\u770b 14283 -- 15367 -- 15368 -- 15369 14283: \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u7684bash\u8fdb\u7a0b 15367: bash\u7684\u5b50\u8fdb\u7a0b,\u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u8fd0\u884c\u7684screen\u547d\u4ee4 15368: screen\u547d\u4ee4\u81ea\u4e2a\u513f\u521b\u5efa\u7684\u5b50\u8fdb\u7a0bSCREEN 15369: SCREEN\u8fdb\u7a0b\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u7a97\u53e3/dev/pts/2\u6765\u8fd0\u884cvim a.txt\u547d\u4ee4 \u9996\u5148\u8981\u77e5\u9053,\u901a\u8fc7 screen vim a.txt \u7f16\u8f91\u540e,\u6b63\u5e38 :wq \u9000\u51fa\u754c\u9762, 15367 -- 15368 -- 15369\u90fd\u4f1a\u7ed3\u675f\u6389... \u82e5\u5728\u7f16\u8f91\u8fc7\u7a0b\u4e2d \u610f\u5916 \u5173\u6389\u7b2c\u4e00\u4e2a\u7ec8\u7aef, \u90a3\u4e48, pts/0\u7684bash\u8fdb\u7a0b\u548c\u5176\u5b50\u8fdb\u7a0bscreen\u4f1a\u88ab\u6740\u6389; \u4f46\u6b64\u65f6PID\u4e3a15368\u7684SCREEN\u8fdb\u7a0b\u8131\u79bbpts/0\u7ec8\u7aef\u8fd0\u884c, \u5f00\u59cb\u4f9d\u6258\u4e8einit/systemd\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, \u5373SCREEN\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u53d8\u4e3aPID\u4e3a1\u7684\u8fdb\u7a0b.. ## -- \u5728\u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e2d\u67e5\u770b [ root@localhost ~ ] # ps -elf | grep [v]im 5 S root 15368 1 0 80 0 - 32001 poll_s 15 :29 ? 00 :00:00 SCREEN vim a.txt 4 S root 15369 15368 0 80 0 - 37398 poll_s 15 :29 pts/2 00 :00:00 vim a.txt \u6240\u4ee5,15368\u548c15369\u7684\u8fdb\u7a0b\u5e76\u6ca1\u6709\u6b7b\u6389... \u800c\u4e14\u6211\u4eec\u53ef\u4ee5\u6062\u590d\u610f\u5916\u5173\u95ed\u7684vim\u7f16\u8f91\u754c\u9762\u7684\u7a97\u53e3\u7ee7\u7eed\u7f16\u8f91.. [ root@localhost ~ ] # screen -ls There is a screen on: 15368 .pts-0.localhost ( Detached ) 1 Socket in /var/run/screen/S-root. ## -- \u6253\u5f00vim\u754c\u9762\u7ee7\u7eed\u7f16\u8f91.. \u5f53\u7136\u662f\u5728pts/2\u7ec8\u7aef\u7ee7\u7eed\u6267\u884c\u7684vim\u547d\u4ee4.. [ root@localhost ~ ] # screen -r 15478 ## -- \u7f16\u8f91\u5b8c\u540e :q\u6b63\u5e38\u9000\u51fa pts/2\u7a97\u53e3\u4f1a\u81ea\u52a8\u5173\u95ed\uff01! 15368\u548c15369\u8fdb\u7a0b\u4e5f\u4f1a\u7ed3\u675f\u6389.. [ root@localhost ~ ] # ps -elf | grep [v]im [ root@localhost ~ ] # screen \u7684\u5176\u4ed6\u73a9\u6cd5 screen -S \u7a97\u53e3\u540d [ root@localhost ~ ] # tty /dev/pts/0 [ root@localhost ~ ] # screen -S new_s ## -- \u56de\u8f66,\u6267\u884c\u547d\u4ee4 /pts/0\u7684\u7ec8\u7aef\u4f1a\u95ea\u70c1\u4e00\u4e0b,\u8df3\u51fa\u4e00\u4e2a\u7a7a\u767d\u7684\u7ec8\u7aef\u754c\u9762 ## -- \u53ef\u4ee5\u89c2\u5bdf\u6389,\u6b64\u7ec8\u7aef\u754c\u9762\u662fscreen\u521b\u5efa\u7684\u65b0\u7ec8\u7aef/pts/1 [ root@localhost ~ ] # tty /dev/pts/1 [ root@localhost ~ ] # ps -elf | grep [b]ash 1 S root 785 1 0 80 0 - 28852 do_wai 01 :23 ? 00 :00:01 /bin/bash... 1 S root 1881 1751 0 80 0 - 18138 poll_s 01 :24 ? 00 :00:01 /usr/bin/ssh-agent... 4 S root 16943 16941 0 80 0 - 29114 do_wai 16 :44 pts/0 00 :00:00 -bash 4 S root 17020 17019 0 80 0 - 29142 do_wai 16 :45 pts/1 00 :00:00 /bin/bash [ root@localhost ~ ] # ps -elf | grep new_s | grep -v grep 4 S root 17018 16943 0 80 0 - 31935 sys_pa 16 :45 pts/0 00 :00:00 screen -S new_s 5 S root 17019 17018 0 80 0 - 31968 poll_s 16 :45 ? 00 :00:00 SCREEN -S new_s # -- \u68b3\u7406\u4e0b\u6b64\u8fdb\u7a0b\u6811\u7684\u5173\u7cfb \"\"\" ------------------------------------------------ \u547d\u4ee4 PID PPID ------------------------------------------------ pts/0 16943 screen -S new_s 17018 16943 SCREEN -S new_s 17019 17018 pts/1 17020 17019 pstree 17020 ------------------------------------------------ \"\"\" [ root@localhost ~ ] # pstree 16943 bash\u2500\u2500\u2500screen\u2500\u2500\u2500screen\u2500\u2500\u2500bash\u2500\u2500\u2500pstree \u5728screen\u521b\u5efa\u7684pts/1\u7ec8\u7aef\u8fd0\u884c\u547d\u4ee4 n = 0;while true;do ((n++));sleep 1;echo $n;done; , ctrl+a ctrl+d \u8fde\u8d2f\u6572\u51fb.. \u56de\u5230pts/0\u7ec8\u7aef,\u53ef\u4ee5\u505a\u5176\u4ed6\u4e8b\u60c5\u5566... \u54ea\u6015\u5173\u95ed\u4e86pts/0\u7ec8\u7aef,\u5728pts/1\u7ec8\u7aef\u8fd0\u884c\u7684\u547d\u4ee4\u4e5f\u4e0d\u4f1a\u7ec8\u6b62,\u4f1a\u7ee7\u7eed\u8fd0\u884c... \u5173\u95edpts/0\u7ec8\u7aef, \u91cd\u65b0\u8fde\u63a5\u4e0a\u670d\u52a1\u5668, screen -ls screen -r new_S \u53ef\u4ee5\u8fdb\u5165pts/1\u7ec8\u7aef\u770b\u8fd0\u884c\u72b6\u51b5\u7b49\u7b49... [ root@localhost ~ ] # tty /dev/pts/0 [ root@localhost ~ ] # screen -S new_s [ detached from 17019 .new_s ] ## -- \u8131\u79bbnew_s\u7a97\u53e3 [ root@localhost ~ ] # \u8fd8\u6709\u4e2a\u9a9a\u64cd\u4f5c.. \u5c0f\u660e\u6b63\u5904\u4e8enew_S\u7a97\u53e3, \u5c0f\u5ddd\u8fdc\u7a0b\u8fde\u63a5\u670d\u52a1\u5668\u540e screen -x new_s , \u4e24\u8fb9\u53ef\u4ee5\u540c\u6b65\u663e\u793a\u64cd\u4f5c ! Amazing.. \u7ba1\u7406\u540e\u53f0\u8fdb\u7a0b \u00b6 \u6b64\u90e8\u5206\u4e86\u89e3\u5373\u53ef.. \u540e\u53f0\u8fdb\u7a0b\u7684\u7ba1\u7406\u901a\u5e38\u4f1a\u501f\u52a9screen\u547d\u4ee4. & \u540e\u53f0\u8fd0\u884c jobs \u67e5\u770b \u5f53\u524d\u7ec8\u7aef \u91cc\u63d0\u4ea4\u7684\u540e\u53f0\u8fdb\u7a0b, \u6ce8\u610f\u54e6,\u662f\u5f53\u524d\u7ec8\u7aef ctrl+z \u5c06\u524d\u53f0\u7684\u8fdb\u7a0b\u6302\u8d77(\u6682\u505c T)\u5230\u540e\u53f0 \u6ce8\u610f\u54e6,ctrl+c\u662f\u7ed3\u675f\u8fdb\u7a0b fg %\u4f5c\u4e1a\u7f16\u53f7 \u5c06\u540e\u53f0\u7684\u8fdb\u7a0b\u8c03\u5230\u524d\u53f0\u8fd0\u884c bg %\u4f5c\u4e1a\u7f16\u53f7 \u5c06\u540e\u53f0\u6302\u8d77(T)\u7684\u8fdb\u7a0b\u5728\u540e\u53f0\u8fd0\u884c [ root@localhost ~ ] # sleep 3000 & [ 1 ] 20265 [ root@localhost ~ ] # jobs [ 1 ] + \u8fd0\u884c\u4e2d sleep 3000 & ## -- \u5728vim\u7f16\u8f91\u754c\u9762 ctrl+z \u5c06\u524d\u53f0\u7684\u8fdb\u7a0b\u6302\u8d77(\u6682\u505c)\u5230\u540e\u53f0 ## -- \u4e2d\u62ec\u53f7\u5185\u7684\u7f16\u53f7\u5c31\u662f\u4f5c\u4e1a\u7f16\u53f7, %1\u4ee3\u8868\u4f5c\u4e1a1 [ root@localhost ~ ] # vim b.txt [ 2 ] + \u5df2\u505c\u6b62 vim b.txt [ root@localhost ~ ] # jobs [ 1 ] - \u8fd0\u884c\u4e2d sleep 3000 & [ 2 ] + \u5df2\u505c\u6b62 vim b.txt ## -- \u8c03\u5230\u524d\u53f0\u8fd0\u884c\u540e,ctrl+z\u5c31\u5728\u524d\u53f0\u7ed3\u675f\u4e86\u8be5\u8fdb\u7a0b [ root@localhost ~ ] # fg %1 sleep 3000 ^C [ root@localhost ~ ] # jobs [ 2 ] + \u5df2\u505c\u6b62 vim b.txt ## -- \u5728vim\u9875\u9762 :q \u9000\u51fa\u540e \u8be5\u8fdb\u7a0b\u5c31\u7ed3\u675f\u4e86 [ root@localhost ~ ] # fg %2 vim b.txt [ root@localhost ~ ] # jobs \u6f14\u793a\u4e0b\u6740\u6b7b\u8fdb\u7a0b kill -9 %\u4f5c\u4e1a\u7f16\u53f7 [ root@localhost ~ ] # vim c.txt [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # ps aux | grep [v]im root 20469 0 .1 0 .5 149548 5184 pts/0 T 22 :32 0 :00 vim c.txt # -- \u56e0\u4e3avim\u547d\u4ee4\u662f\u4ea4\u4e92\u5f0f\u7684,\u5e94\u8be5\u5728\u524d\u53f0\u8fd0\u884c,\u6ca1\u6cd5\u8ba9\u5176\u5728\u540e\u53f0\u8fd0\u884c [ root@localhost ~ ] # bg %1 [ 1 ] + vim c.txt & [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # kill -9 %1 [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u6740\u6b7b vim c.txt \u6f14\u793abg\u547d\u4ee4 ## -- \u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u6267\u884c # ctrl+z\u540e,\u8be5\u8fdb\u7a0b\u5230\u540e\u53f0\u6302\u8d77,\u4e0d\u4f1a\u518d\u6709\u4fe1\u606f\u8f93\u5165\u5230/mnt/a.txt\u4e2d!! [ root@localhost ~ ] # ping www.baidu.com &>> /mnt/a.txt ^Z [ 1 ] + \u5df2\u505c\u6b62 ping www.baidu.com & >>/mnt/a.txt [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u505c\u6b62 ping www.baidu.com & >>/mnt/a.txt ## -- \u89e3\u51b3\u65b9\u6848: kill\u53d1\u9001\u4e00\u4e2a18\uff09SIGCONT\u7ee7\u7eed\u7684\u4fe1\u53f7\u7ed9\u8be5\u8fdb\u7a0b \u6216\u8005\u4f7f\u7528 bg\u547d\u4ee4 [ root@localhost ~ ] # bg %1 [ 1 ] + ping www.baidu.com & >>/mnt/a.txt & ## -- \u5728\u540e\u53f0\u7ee7\u7eed\u8fd0\u884c, tail -f /mnt/a.txt \u53ef\u4ee5\u52a8\u6001\u67e5\u770b\u6587\u4ef6\u91cc\u7684\u5185\u5bb9\u8fdb\u884c\u9a8c\u8bc1 \u7ba1\u9053 \u00b6 \u7ba1\u9053\u7528\u4e8e\u8fdb\u7a0b\u95f4\u901a\u4fe1 \u7ba1\u9053\u64cd\u4f5c\u7b26\u53f7 \"|\" \u4e3b\u8981\u7528\u6765\u8fde\u63a5\u5de6\u53f3\u4e24\u4e2a\u547d\u4ee4. \u5c06\u5de6\u4fa7\u547d\u4ee4\u7684\u6807\u51c6\u8f93\u51fa stdout \u4f5c\u4e3a\u53f3\u4fa7\u547d\u4ee4\u7684\u6807\u51c6\u8f93\u5165 stdin . \u6ce8\u610f\u54e6! \u65e0\u6cd5\u4f20\u9012\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u7ed9\u53f3\u4fa7\u547d\u4ee4.. \u7ba1\u9053\u7ec3\u4e60 \u00b6 \u25b2 \u98981:\u7edf\u8ba1\u5f53\u524d/etc/passwd\u6587\u4ef6\u4e2d\u7528\u6237\u4f7f\u7528\u7684shell\u7c7b\u578b [ root@localhost ~ ] # cat /etc/passwd | head -1 root:x:0:0:root:/root:/bin/bash [ root@localhost ~ ] # awk -F: '{print $7}' /etc/passwd | sort | uniq -c 3 /bin/bash 1 /bin/sync 1 /sbin/halt 39 /sbin/nologin 1 /sbin/shutdown \u25b2 \u98982:\u7edf\u8ba1\u7f51\u7ad9\u7684\u8bbf\u95ee\u60c5\u51b5 netstat -an | grep :80 | awk -F \":\" '{print $8}' | sort | uniq -c \u25b2 \u98983:\u6253\u5370\u5f53\u524d\u6240\u6709\u7684IP [ root@localhost ~ ] # ip addr | grep 'inet ' | awk '{print $2}' | awk -F \"/\" '{print $1}' 127 .0.0.1 172 .16.150.131 \u25b2 \u98984:\u6253\u5370\u6839\u5206\u533a\u5df2\u7528\u7a7a\u95f4\u7684\u767e\u5206\u6bd4 ( \u4ec5\u6253\u5370\u6570\u5b57 ) [ root@localhost ~ ] # df | grep '/$' | awk '{print $5}' | awk -F\"%\" '{print $1}' 27 \u25b2 \u98985:\u7edf\u8ba1\u7f51\u7ad9\u7684\u8bbf\u95ee\u6700\u591a\u7684ip top 10 ## -- \u601d\u8def: \u6253\u5370\u6240\u6709\u8bbf\u95ee\u7684\u8fc7\u6765\u7684ip | \u6392\u5e8f | \u53bb\u91cd | \u5012\u5e8f\u6392\u5e8f | \u53d6\u524d10 awk '{print $1}' access.log | sort | uniq -c | sort -rn | head \u7ba1\u9053\u4e2d\u7684tee \u00b6 ## -- ifconfig\u547d\u4ee4\u7684\u7ed3\u679c\u4e22\u5230\u4e86a.txt\u6587\u4ef6\u4e2d,\u4f46\u5c4f\u5e55\u4e0a\u6ca1\u6709\u663e\u793a\u5566 ifconfig & > /opt/a.txt ## -- ifconfig\u547d\u4ee4\u7684\u7ed3\u679c\u4e0d\u4ec5\u4f1a\u4e22\u5230\u4e86b.txt\u6587\u4ef6\u4e2d,\u5c4f\u5e55\u4e0a\u4e5f\u4f1a\u663e\u793a\u4e00\u4efd ## tee\u4e0d\u52a0\u9009\u9879\u9ed8\u8ba4\u662f\u8986\u76d6 `tee -a`\u662f\u8ffd\u52a0 ifconfig | tee /opt/b.txt xargs \u00b6 xargs\u53c2\u6570\u4f20\u9012, \u8ba9\u4e00\u4e9b\u4e0d\u652f\u6301\u7ba1\u9053\u7684\u547d\u4ee4\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u6280\u672f!!! \u6240\u6709\u7684\u547d\u4ee4\u90fd\u80fd\u5c06\u547d\u4ee4\u7684\u7ed3\u679c\u4e22\u5230\u7ba1\u9053\u91cc, \u4f46\u4e0d\u662f\u6240\u6709\u7684\u547d\u4ee4( eg: rm mv cp )\u90fd\u80fd\u4ece\u7ba1\u9053\u4e2d\u62ff\u51fa\u7ed3\u679c\u505a\u5904\u7406!!! \u90a3\u5982\u4f55\u662f\u597d\uff1f \u7ed3\u5408 xargs\u547d\u4ee4 \u4f7f\u7528!! \u8be6\u60c5\u8bf7\u8df3\u8f6c: 4_\u6587\u4ef6\u7ba1\u7406\u4e4b\u547d\u4ee4\u8865\u5145.md find\u7ed3\u5408xargs \u8fd9\u90e8\u5206\u7684\u5185\u5bb9\uff01\uff01 [ root@localhost ~ ] # which cat | xargs ls -l -rwxr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat ## -- \u5fc5\u987b\u7684\u8fdb\u5165/opt\u76ee\u5f55\u624d\u884c `ls /opt | xargs rm -rf`\u662f\u5931\u8d25\u7684 [ root@localhost ~ ] # cd /opt [ root@localhost opt ] # ls a.txt c.txt [ root@localhost opt ] # ls | xargs rm -fv \u5df2\u5220\u9664 \"a.txt\" \u5df2\u5220\u9664 \"c.txt\" [ root@localhost opt ] # ls [ root@localhost opt ] # \u50f5\u5c38\u8fdb\u7a0b\u4e0e\u5b64\u513f\u8fdb\u7a0b \u00b6 \u5728UNIX/Linux\u4e2d, \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u7236\u8fdb\u7a0b.. \u50f5\u5c38\u8fdb\u7a0b\u662f\u4ec0\u4e48\uff1f \u00b6 \u9996\u5148\u8981\u660e\u767d, \u5f53\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u5f00\u542f\u8d77\u6765\u4ee5\u540e, \u5b83\u7684\u8fd0\u884c\u4e0e\u7236\u8fdb\u7a0b\u662f \u5f02\u6b65\u5e76\u53d1 \u7684, \u5f7c\u6b64\u4e92\u4e0d\u5f71\u54cd, \u8c01\u5148\u6b7b\u90fd\u4e0d\u4e00\u5b9a... \u603b\u7ed3\u6765\u8bf4,\u82e5\u76f4\u63a5\u53c9\u6389\u7ec8\u7aef, \u7236\u8fdb\u7a0bbash\u548c\u5176\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u7ed3\u675f\u6389.. \u6b63\u5e38\u60c5\u51b5\u4e0b,\u7236\u8fdb\u7a0b\u5148\u6b7b,\u5b50\u8fdb\u7a0b\u4f1a\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b; \u5b50\u8fdb\u7a0b\u5148\u6b7b,\u5b50\u8fdb\u7a0b\u4f1a\u5148\u53d8\u4e3a\u50f5\u5c38\u8fdb\u7a0b\u518d\u5b8c\u5168\u6b7b\u53bb,\u5bf9\u7236\u8fdb\u7a0b\u6ca1\u5f71\u54cd \u7b2c\u4e8c\u70b9, linux\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\u89c4\u5b9a: \u7236\u8fdb\u7a0b\u5e94\u8be5\u5177\u5907\u968f\u65f6\u83b7\u53d6\u5b50\u8fdb\u7a0b\u72b6\u6001\u7684\u80fd\u529b \u5047\u8bbe\u5b50\u8fdb\u7a0b\u5148\u4e8e\u7236\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5,\u82e5OS\u5c06\u5b50\u8fdb\u7a0b\u7684\u6240\u6709\u8d44\u6e90\u5168\u90e8\u91ca\u653e\u6389,\u7236\u8fdb\u7a0b\u5c31\u627e\u4e0d\u5230\u8be5\u5b50\u8fdb\u7a0b\u5566... So,linux\u5f53\u5b50\u8fdb\u7a0b\u5148\u4e8e\u7236\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5/\u6b7b\u6389\u65f6,OS\u4f1a\u5c06\u5b50\u8fdb\u7a0b\u5360\u7528\u7684\u91cd\u578b\u8d44\u6e90\u90fd\u91ca\u653e\u6389( eg:\u5173\u95ed\u5df2\u6253\u5f00\u7684\u6587\u4ef6,\u820d\u5f03\u5df2\u5360\u7528\u7684cpu\u3001\u5185\u5b58\u3001\u4ea4\u6362\u7a7a\u95f4\u7b49 ), \u4f46\u662f\u4f1a\u4fdd\u7559\u4e00\u90e8\u5206\u5b50\u8fdb\u7a0b\u7684\u5173\u952e\u72b6\u6001\u4fe1\u606f( eg: PID \u3001\u9000\u51fa\u72b6\u6001\u3001\u5df2\u8fd0\u884c\u65f6\u95f4\u7b49 ), \u6b64\u65f6\u5b50\u8fdb\u7a0b\u5c31\u76f8\u5f53\u4e8e\u6b7b\u4e86\u4f46\u662f\u6ca1\u5b8c\u5168\u6b7b,\u6ca1\u6b7b\u5e72\u51c0, \u56e0\u800c\u5f97\u540d \"\u50f5\u5c38\u8fdb\u7a0b\" ... \u50f5\u5c38\u8fdb\u7a0b\u662flinux\u64cd\u4f5c\u7cfb\u7edf\u51fa\u4e8e\u597d\u5fc3, \u4e3a\u7236\u8fdb\u7a0b\u51c6\u5907\u7684\u4e00\u4e9b\u5b50\u8fdb\u7a0b\u7684\u72b6\u6001\u6570\u636e, \u4e13\u4f9b\u7236\u8fdb\u7a0b\u968f\u65f6\u67e5\u9605 \u4e5f\u5c31\u662f\u8bf4\"\u50f5\u5c38\u8fdb\u7a0b\"\u662flinux\u7cfb\u7edf\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784, \u6240\u6709\u7684\u5b50\u8fdb\u7a0b\u7ed3\u675f\u540e\u90fd\u4f1a\u8fdb\u5165\u50f5\u5c38\u8fdb\u7a0b\u7684\u72b6\u6001 wait / waitpid \u00b6 \u50f5\u5c38\u8fdb\u7a0b\u6b8b\u5b58\u7684\u90a3\u4e9b\u6570\u636e(eg PID)\u662f\u9700\u8981\u56de\u6536\u7684! \u5f53\u7236\u8fdb\u7a0b\u89c9\u5f97\u81ea\u5df1\u65e0\u9700\u67e5\u770b\u50f5\u5c38\u8fdb\u7a0b\u7684\u6570\u636e,\u89c9\u5f97\u7559\u7740\u50f5\u5c38\u8fdb\u7a0b\u7684\u6570\u636e\u6ca1\u5565\u7528\u65f6,\u4f1a\u7531\u7236\u8fdb\u7a0b\u53d1\u8d77\u4e00\u4e2a \u7cfb\u7edf\u8c03\u7528 wait / waitpid \u6765\u901a\u77e5linux\u64cd\u4f5c\u7cfb\u7edf\u6765\u6e05\u7406\u8fd9\u4e9b\u50f5\u5c38\u8fdb\u7a0b.. \u8fd9\u91cc\u9488\u5bf9\u7236\u8fdb\u7a0b\u6709\u4e09\u79cd\u60c5\u51b5\u9700\u8981\u8ba8\u8bba: 1> \u4e00\u4e9b\u4f18\u79c0\u7684\u5f00\u6e90\u8f6f\u4ef6 eg: nginx , \u8fd9\u4e9b\u8f6f\u4ef6\u5728\u5f00\u542f\u5b50\u8fdb\u7a0b\u65f6 \u7236\u8fdb\u7a0b\u5185\u90e8\u90fd\u4f1a\u53ca\u65f6\u8c03\u7528wait/waitpid\u6765\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\u56de\u6536\u50f5\u5c38\u8fdb\u7a0b \u6240\u4ee5\u6211\u4eec\u901a\u5e38\u770b\u4e0d\u5230\u4f18\u79c0\u7684\u5f00\u6e90\u8f6f\u4ef6\u5806\u79ef\u50f5\u5c38\u8fdb\u7a0b 2> \u6c34\u5e73\u826f\u597d\u7684\u7a0b\u5e8f\u5458\u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f, \u77e5\u9053\u7236\u8fdb\u7a0b\u8981\u5bf9\u5b50\u8fdb\u7a0b\u8d1f\u8d23, \u4f1a\u5728\u7236\u8fdb\u7a0b\u5185\u8003\u8651wait/waitpid \u4f46\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528wait/waitpid\u7684\u65f6\u95f4\u53ef\u80fd\u6162\u4e86\u4e9b, \u6211\u4eec\u53ea\u9700\u8981\u53d1\u900117\u53f7\u4fe1\u53f7\u63d0\u9192\u8be5\u7236\u8fdb\u7a0b\u5c31\u884c.. 3> \u5783\u573e\u7a0b\u5e8f\u5458\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u65f6,\u538b\u6839\u6ca1\u8bbe\u8ba1\u8fdb\u7a0b\u5bf9OS\u7684wait/waitpid\u8c03\u7528... \u6211\u4eec\u53d1\u4fe1\u53f7\u63d0\u9192\u4e5f\u6ca1\u7528,\u538b\u6839\u4e0d\u4f1a\u54cd\u5e94! \u60c5\u51b53\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e2a\u975e\u5e38\u5947\u602a\u7684\u73b0\u8c61: \u8ba1\u7b97\u673a\u5185\u5b58\u548c\u786c\u76d8\u5145\u8db3\u3001cpu\u7a7a\u95f2. \u4f46\u662f\u542f\u52a8\u65b0\u7684\u8f6f\u4ef6\u5c31\u662f\u65e0\u6cd5\u542f\u52a8\u8d77\u6765. \u7a76\u5176\u6839\u672c\u539f\u56e0\u5c31\u662f\u5806\u79ef\u4e86\u592a\u591a\u50f5\u5c38\u8fdb\u7a0b, \u50f5\u5c38\u8fdb\u7a0b\u867d\u7136\u5bf9\u5185\u5b58\u3001\u786c\u76d8\u3001cpu\u6d88\u8017\u5f88\u5c0f\u5f88\u5c0f, \u4f46\u4e00\u4e2a\u50f5\u5c38\u8fdb\u7a0b\u5c31\u8981\u5360\u7528\u4e00\u4e2aPID, linux\u64cd\u4f5c\u7cfb\u7edf\u4e2dPID\u53f7\u662f\u6709\u9650\u7684!!! \u6e05\u7406\u50f5\u5c38\u8fdb\u7a0b \u00b6 OS\u6536\u5230\u7236\u8fdb\u7a0b\u53d1\u8d77\u7684wait / waitpid\u7cfb\u7edf\u8c03\u7528\u540e, \u4f1a\u91ca\u653e\u6389\u50f5\u5c38\u8fdb\u7a0b\u5360\u7528\u7684\u8d44\u6e90.. \u9488\u5bf9\u4e0a\u9762\u60c5\u51b52, \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4 kill -CHLD \u7236\u8fdb\u7a0bPID \u53d1\u9001 17) SIGCHLD \u4fe1\u53f7\u7ed9\u7236\u8fdb\u7a0b, \u8ba9\u5176\u8d76\u5feb\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528\u6765\u901a\u77e5OS\u6e05\u7406\u50f5\u5c38\u8fdb\u7a0b!! \u9488\u5bf9\u4e0a\u9762\u7684\u60c5\u51b53, \u7236\u8fdb\u7a0b\u4e0d\u4f1a\u54cd\u5e94 17) SIGCHLD \u4fe1\u53f7, \u53ea\u80fd\u6740\u6389\u7236\u8fdb\u7a0b, \u8ba9\u50f5\u5c38\u5b50\u8fdb\u7a0b\u88abPID\u4e3a1\u7684\u9876\u7ea7\u8fdb\u7a0bsystemd\u6536\u517b!! systemd\u975e\u5e38\u9760\u8c31, \u4f1a\u5b9a\u671f\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528wait/waitpid\u6765\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\u6e05\u7406\u50f5\u5c38... \u82e5\u7d2f\u79ef\u7684\u50f5\u5c38\u5f88\u5c11,\u4e0d\u4f1a\u76f4\u63a5\u9009\u62e9\u6740\u7236\u8fdb\u7a0b\u5bfc\u81f4\u670d\u52a1\u5173\u95ed, \u4f1a\u5728\u8f6f\u4ef6\u5347\u7ea7\u7684\u65f6\u5019(\u4f18\u5316\u8f6f\u4ef6),\u5c06\u8be5\u7236\u8fdb\u7a0b\u5e72\u6389!! \u5b64\u513f\u8fdb\u7a0b \u00b6 \u7236\u8fdb\u7a0b\u5148\u6b7b\u6389, \u800c\u5b83\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c. \u90a3\u4e48\u90a3\u4e9b\u5b50\u8fdb\u7a0b\u5c06\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b.. \u5b64\u513f\u8fdb\u7a0b\u5c06\u88abPID\u4e3a1\u7684\u9876\u7ea7\u8fdb\u7a0binit / systemd\u6240\u6536\u517b, \u5e76\u7531\u9876\u7ea7\u8fdb\u7a0b\u5bf9\u5b83\u4eec\u5b8c\u6210\u72b6\u6001\u6536\u96c6\u5de5\u4f5c.. \u5b9e\u9a8c\u9a8c\u8bc1 \u00b6 linux \u50f5\u5c38\u8fdb\u7a0b\u548c\u5b64\u513f\u8fdb\u7a0b\u7684\u8bbe\u8ba1\u6ca1\u6709\u95ee\u9898, \u6709\u95ee\u9898\u7684\u662f\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u7684\u7a0b\u5e8f\u5458..Hhh \u770b\u5230\u51fa\u73b0\u50f5\u5c38\u8fdb\u7a0b\u4e0d\u7528\u7d27\u5f20,\u50f5\u5c38\u8fdb\u7a0b\u4e2a\u6570\u4e00\u76f4\u5728\u589e\u52a0\u624d\u5e94\u8be5\u7d27\u5f20... \u25b2 \u5b64\u513f\u8fdb\u7a0b\u9a8c\u8bc1 A\u7ec8\u7aef \u540e\u53f0\u8fd0\u884c\u547d\u4ee4, ` ping www.baidu.com & > /dev/null & ` B\u7ec8\u7aef ` ps -elf | grep [ p ] ing ` ## \u627e\u5230PID\u4e0ePPID ` kill -9 PPID ` ## \u5e72\u6389ping\u8fdb\u7a0b\u7684PPID,\u4e5f\u5c31\u662f\u7ec8\u7aefA\u7684bash \u7ec8\u7aefA\u4f1a\u65ad\u5f00\u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5 ` ps -elf | grep [ p ] ing ` ## \u518d\u6267\u884c\u6b64\u547d\u4ee4,\u53d1\u73b0ping\u8fdb\u7a0b\u7684PPID\u53d8\u4e3a\u4e861 \u25b2 \u50f5\u5c38\u8fdb\u7a0b\u9a8c\u8bc1 ## -- \u7ec8\u7aefA\u4e0a\u64cd\u4f5c [ root@localhost ~ ] # vim a.py [ root@localhost ~ ] # cat a.py ## \u7236\u8fdb\u7a0b\u5f00\u4e863\u4e2a\u5b50\u8fdb\u7a0b,\u7236\u8fdb\u7a0b\u6d3b10000\u79d2,\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u90fd\u6d3b10\u79d2 from multiprocessing import Process import os import time def task () : print ( \"son -> \" ,os.getpid ()) time.sleep ( 10 ) if __name__ == \"__main__\" : for i in range ( 3 ) : p = Process ( target = task ) p.start () print ( \"father -> \" ,os.getpid ()) time.sleep ( 10000 ) ## 10\u79d2\u540e,3\u4e2a\u5b50\u8fdb\u7a0b\u4f1a\u53d8\u6210\u50f5\u5c38\u8fdb\u7a0b [ root@localhost ~ ] # python a.py ( 'father -> ' , 24754 ) ( 'son -> ' , 24756 ) ( 'son -> ' , 24757 ) ( 'son -> ' , 24755 ) ## -- \u7ec8\u7aefB\u4e0a\u64cd\u4f5c [ root@localhost ~ ] # ps aux | grep 24754 | grep -v grep root 24754 0 .0 0 .5 151308 5812 pts/1 S+ 12 :58 0 :00 python a.py [ root@localhost ~ ] # ps aux | grep 24755 | grep -v grep root 24755 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> [ root@localhost ~ ] # ps aux | grep 24756 | grep -v grep root 24756 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> [ root@localhost ~ ] # ps aux | grep 24757 | grep -v grep root 24757 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> ## \u8bc1\u660e\u50f5\u5c38\u8fdb\u7a0b\u6740\u4e0d\u6389 [ root@localhost ~ ] # kill -9 24757 [ root@localhost ~ ] # ps aux | grep 24757 | grep -v grep root 24757 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> ## \u518d\u4f7f\u7528top\u547d\u4ee4 \u67e5\u770bzombie\u5b57\u6bb5\u7684\u503c \u503c\u4e3a3 ## \u9000\u51fatop\u754c\u9762 ## kill -9\u6740\u6389\u7236\u8fdb\u7a0b,\u6216\u8005\u5728\u7ec8\u7aefA\u7684\u4ea4\u4e92\u5f0f\u754c\u9762\u6267\u884cctrl+c\u7ed3\u675f\u6389py\u7a0b\u5e8f [ root@localhost ~ ] # kill -9 24754 ## \u518d\u4f7f\u7528top\u547d\u4ee4 \u67e5\u770bzombie\u5b57\u6bb5\u7684\u503c \u503c\u4e3a0","title":"\u7ba1\u7406\u8fdb\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_1","text":"nice\u547d\u4ee4\u8bbe\u7f6e\u7684\u4f18\u5148\u7ea7\u4e0d\u662f\u7a0b\u5e8f\u6700\u7ec8\u7684\u4f18\u5148\u7ea7, \u53ea\u662f\u4f18\u5148\u7ea7\u7684\u4fee\u6b63\u6570\u503c [ root@localhost ~ ] # ps -l | head -1 F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD PRI: \u4ee3\u8868\u8fd9\u4e2a\u8fdb\u7a0b\u53ef\u88ab\u6267\u884c\u7684\u4f18\u5148\u7ea7,\u5176\u503c\u8d8a\u5c0f\u8d8a\u65e9\u88ab\u6267\u884c NI: \u4ee3\u8868\u8fd9\u4e2a\u8fdb\u7a0b\u7684nice\u503c NI\u53ef\u4ee5\u901a\u8fc7nice\u547d\u4ee4\u8bbe\u7f6e,\u5176\u8868\u793a\u8fdb\u7a0b\u53ef\u88ab\u6267\u884c\u7684\u4f18\u5148\u7ea7\u7684\u4fee\u6b63\u6570\u503c.. PRI\u503c\u8d8a\u5c0f\u8d8a\u5feb\u88ab\u6267\u884c,\u52a0\u5165nice\u503c\u540e,\u5c06\u4f1a\u4f7f\u5f97PRI\u53d8\u4e3a: PRI(new)=PRI(old)+nice \u25b2 \u5bf9\u67d0\u4e00\u547d\u4ee4\u8bbe\u7f6enice\u503c ` nice -n nice\u503c \u547d\u4ee4 ` \u25b2 \u5bf9\u5df2\u8fd0\u884c\u7684\u8fdb\u7a0b\u8bbe\u7f6e\u65b0\u7684\u4f18\u5148\u7ea7 ` renice -nice\u503c \u8fdb\u7a0bPID ` PS: \u82e5nice\u547d\u4ee4\u672a\u6307\u5b9a\u4f18\u5148\u7ea7\u7684\u8c03\u6574\u503c,\u5219\u4ee5\u7f3a\u7701\u503c10\u6765\u8c03\u6574\u7a0b\u5e8f\u8fd0\u884c\u4f18\u5148\u7ea7,\u65e2\u5728\u5f53\u524d\u7a0b\u5e8f\u8fd0\u884c\u4f18\u5148\u7ea7\u57fa\u7840\u4e4b\u4e0a\u589e\u52a010..","title":"\u4f18\u5148\u7ea7\u8bbe\u7f6e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_2","text":"\u53ea\u9700\u638c\u63e1 1\u30019\u300115 \u8fd93\u4e2a\u4fe1\u53f7!!! kill -l \u5217\u51fa\u6240\u6709\u652f\u6301\u7684\u4fe1\u53f7 1) SIGHUP 9) SIGKILL 15) SIGTERM","title":"\u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#hup","text":"\u6709\u4e24\u4e2a\u4f5c\u7528: 1> \u6302\u8d77\u4f1a\u8bdd 2> \u4fee\u6539\u4e86\u914d\u7f6e\u6587\u4ef6,\u5728\u4e0d\u5173\u95ed\u8be5\u8fdb\u7a0b\u7684\u60c5\u51b5\u4e0b,\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 \u8fd9\u91cc\u5148\u8be6\u7ec6\u9610\u8ff0\u7b2c\u4e8c\u4e2a\u4f5c\u7528,\u7b2c\u4e00\u4e2a\u4f5c\u7528\u540e\u6587\u4f1a\u8fdb\u884c\u8bf4\u660e! \u542f\u52a8\u8f6f\u4ef6\u65f6\u4f1a\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6, \u96be\u9053\u6539\u5b8c\u914d\u7f6e\u6587\u4ef6\u540e, \u8981\u8ba9\u8f6f\u4ef6\u91cd\u542f\u8fdb\u800c\u91cd\u65b0\u8bfb\u53d6\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u5417\uff1f no.. \u91cd\u542f,\u8be5\u8f6f\u4ef6\u63d0\u4f9b\u7684\u670d\u52a1\u5c31\u65ad\u6389\u5566.. \u53ef\u4ee5\u901a\u8fc7\u8be5\u8f6f\u4ef6\u7684\u8fdb\u7a0b\u53d1\u9001HUP\u4fe1\u53f7\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898... systemctl stop firewalld systemctl disable firewalld setenforce 0 ifconfig ens33 | grep inet ## -- \u67e5\u770b\u5230\u670d\u52a1\u7aef(vm\u865a\u673a)\u7684ip\u5730\u5740\u4e3a172.16.150.131 yum install vsftpd -y systemctl start vsftpd ## -- \u5f00\u542fftp\u670d\u52a1 systemctl status vsftpd ## -- \u67e5\u770bftp\u670d\u52a1\u72b6\u6001 systemctl enable vsftpd ## -- \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f ## -- vsftpd\u6b64\u8f6f\u4ef6\u6709\u4e2a\u9ed8\u8ba4\u7684\u5171\u4eab\u6587\u4ef6\u5939 /var/ftp/ cd /var/ftp ls ## -- \u91cc\u9762\u9ed8\u8ba4\u6709\u4e2ahub\u6587\u4ef6\u5939 mkdir /var/ftp/share touch /var/ftp/share/a.txt touch /var/ftp/share/b.txt touch /var/ftp/share/aaa [ root@localhost ftp ] # tree /var/ftp /var/ftp \u251c\u2500\u2500 pub \u2514\u2500\u2500 share \u251c\u2500\u2500 aaa \u251c\u2500\u2500 a.txt \u2514\u2500\u2500 b.txt ## -- ftp://172.16.150.131 \u6307\u5411\u7684\u5c31\u662f /var/ftp \u5728\u5ba2\u6237\u7aef ( mac\u7535\u8111 ) \u4e0a,\u9996\u5148 ping 172 .16.150.131\u770b\u662f\u5426\u80fdping\u901a \u7136\u540e\u5728mac\u7684\u6d4f\u89c8\u5668\u4e0a\u8f93\u5165\u5730\u5740 ftp://172.16.150.131 \u70b9\u51fb ` \u8bbf\u8fbe.app ` \u6309\u94ae,\u4ee5\u5ba2\u4eba\u7684\u8eab\u4efd\u8bbf\u95ee,\u70b9\u51fb\u8fde\u63a5!\u6210\u529f! \u73b0\u5728\u6211\u4eec\u9700\u8981\u5c06ftp\u670d\u52a1\u9ed8\u8ba4\u7684\u5171\u4eab\u76ee\u5f55 /var/ftp/ \u6362\u6210 /var/ftp/share ## vim /etc/vsftpd/vsftpd.conf \u5728\u8be5\u914d\u7f6e\u6587\u4ef6\u6700\u672b\u5c3e\u6dfb\u52a0 anon_root=/var/ftp/share ## \u4f7f\u7528echo echo 'anon_root=/var/ftp/share' >> /etc/vsftpd/vsftpd.conf ## \u4f7f\u7528sed \u6ce8\u610f\u7528\u7684\u662f\u5355\u5f15\u53f7!! $\u6700\u540e\u4e00\u884c a\u6dfb\u52a0 sed -i '$a anon_root=/var/ftp/share' /etc/vsftpd/vsftpd.conf ## \u8ba9\u914d\u7f6e\u6587\u4ef6\u751f\u6548,\u82e5\u901a\u8fc7 systemctl restart vsftpd \u547d\u4ee4\u91cd\u542f\u670d\u52a1,\u4f1a\u5bfc\u81f4\u8be5\u8fdb\u7a0b\u7684PID\u6539\u53d8 [ root@localhost ftp ] # ps aux | grep [v]sftpd root 1117 0 .0 0 .0 53292 712 ? Ss 20 :02 0 :00 /usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf kill -1 1117 \u7136\u540e\u901a\u8fc7\u6d4f\u89c8\u5668\u91cd\u65b0\u4ee5\u5ba2\u4eba\u8eab\u4efd\u8bbf\u95ee.\u5c31\u4f1a\u5f97\u5230 /var/ftp/share\u76ee\u5f55\u4e0b\u7684\u5185\u5bb9 \"\"\" \u82e5\u5c06\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\u641e\u4e71\u4e86,\u5c06\u914d\u7f6e\u6587\u4ef6\u6062\u590d\u51fa\u5382\u8bbe\u7f6e\u600e\u4e48\u505a\uff1f rm -rf /etc/vsftpd/vsftpd.conf yum reinstall vsftpd -y \"\"\"","title":"HUP"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#killterm","text":"kill \u8fdb\u7a0bPID \u9ed8\u8ba4\u53d1\u51fa\u7684\u5c31\u662f -15\u7684\u4fe1\u53f7, \u4ee3\u8868\u7ec8\u6b62 kill -9 \u8fdb\u7a0bPID \u6709\u4e9b\u8fdb\u7a0b\u752815\u7684\u4fe1\u53f7\u662f\u6740\u4e0d\u6b7b\u7684,\u53d1\u90019\u7684\u4fe1\u53f7\u5f3a\u5236\u6740\u6b7b kill\u547d\u4ee4\u548cftp\u7a0b\u5e8f\u90fd\u662f\u8f6f\u4ef6,kill\u7ed9ftp\u53d1\u4e86\u4e2a\u4fe1\u53f7\u8fc7\u53bb... ftp\u662f\u5426\u54cd\u5e94 \u53d6\u51b3\u4e8e ftp\u8f6f\u4ef6\u5728\u5f00\u53d1\u65f6\u6709\u6ca1\u6709\u8bbe\u8ba1\u6355\u6349\u6b64\u4fe1\u53f7\u5e76\u4f5c\u5904\u7406\u7684\u529f\u80fd.. 15\u8fd9\u4e2a\u4fe1\u53f7\u53ef\u80fd\u5f97\u4e0d\u5230\u5e94\u7528\u8f6f\u4ef6\u54cd\u5e94,\u4f469\u8fd9\u4e2a\u4fe1\u53f7\u5e94\u7528\u8f6f\u4ef6\u57fa\u672c\u90fd\u4f1a\u54cd\u5e94,\u4e0d\u7136\u8fd9\u4e2a\u8f6f\u4ef6\u5c31\u662f\u75c5\u6bd2\u4e86... Ps: \u56de\u987e\u4e0b,\u5904\u4e8e D \u548c Z \u72b6\u6001\u7684\u8fdb\u7a0b\u662f\u6740\u4e0d\u6389\u7684.. \u591a\u4e2a\u865a\u62df\u7ec8\u7aef,\u90fd\u5f00\u542f\u4e86vim, \u901a\u8fc7 pkill -9 vim \u547d\u4ee4\u53ef\u4ee5 \u6279\u91cf\u6740\u6b7b ..","title":"KILL\u4e0eTERM"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_3","text":"19) SIGSTOP \u4f7f\u8fdb\u7a0b\u8fdb\u5165T\u72b6\u6001 18) SIGCONT \u5c06\u505c\u6b62\u7684\u8fdb\u7a0b\u91cd\u65b0\u6295\u5165\u8fd0\u884c","title":"\u8865\u5145"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#hup_1","text":"\u7ed9\u8fdb\u7a0b\u53d1\u9001HUP\u4fe1\u53f7, \u53ef\u4ee5\u8ba9\u8fdb\u7a0b\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6.. \u63a5\u4e0b\u6765\u4e3b\u8981\u8bb2\u89e3\u5b83\u7684\u53e6\u5916\u4e00\u4e2a\u529f\u80fd: \u6302\u8d77\u4f1a\u8bdd","title":"\u5173\u4e8eHUP\u4fe1\u53f7"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_4","text":"\u8fdc\u7a0b\u8fde\u63a5\u5f00\u542f\u4e86\u4e00\u4e2a\u865a\u62df\u7ec8\u7aef( \u63d0\u4e00\u5634,\u7528\u6237\u767b\u5f55\u6210\u529f\u540e,\u4f1a\u5148\u5f00\u542f\u4e00\u4e2a\u540d\u4e3abash\u7684\u8fdb\u7a0b ), \u4e00\u901a\u547d\u4ee4\u64cd\u4f5c\u540e, \u5173\u95ed\u8be5\u7ec8\u7aef( \u6ce8\u610f,\u4e0d\u662fexit\u547d\u4ee4\u9000\u51fa ),\u8be5\u7ec8\u7aef\u7a97\u53e3\u91cc\u6267\u884c\u7684\u6240\u6709\u8fdb\u7a0b( bash\u8fdb\u7a0b\u8fde\u540c\u5176\u5b50\u8fdb\u7a0b )\u90fd\u4f1a\u88ab\u5f3a\u5236\u5173\u6389.. So,\u6211\u4eec\u9700\u8981\u8ba9\u8fdb\u7a0b\u8131\u79bb\u5f53\u524d\u4f1a\u8bdd\u7a97\u53e3session( \u901a\u4fd7\u70b9,\u5c31\u662f\u90a3\u4e2a\u8f93\u5165\u547d\u4ee4\u8fd4\u56de\u7ed3\u679c\u7684\u4ea4\u4e92\u5f0f\u7684\u547d\u4ee4\u884c\u754c\u9762 )\u800c\u8fd0\u884c \u6362\u4e2a\u8bf4\u6cd5,\u8ba9\u6211\u4eec\u7684\u8fdb\u7a0b\u5728\u540e\u53f0\u4e00\u76f4\u8fd0\u884c,\u4e0d\u8981\u56e0\u4e3a\u7528\u6237\u6ce8\u9500\u6216\u8005\u7f51\u7edc\u65ad\u5f00\u6216\u8005\u7ec8\u7aef\u5173\u95ed\u800c\u4e00\u8d77\u88ab\u5e72\u6389... \u6709\u4e24\u79cd\u89e3\u51b3\u601d\u8def: \u601d\u8def1: \u8ba9\u8fdb\u7a0b\u5ffd\u7565Linux HUP\u4fe1\u53f7 \u601d\u8def2: \u8ba9\u8fdb\u7a0b\u8fd0\u884c\u5728\u65b0\u7684\u4f1a\u8bdd\u91cc, \u4ece\u800c\u4e0d\u5c5e\u4e8e\u6b64\u7ec8\u7aef\u7684\u5b50\u8fdb\u7a0b, \u5c31\u4e0d\u4f1a\u5728\u5f53\u524d\u7ec8\u7aef\u6302\u6389\u7684\u60c5\u51b5\u4e0b\u4e00\u8d77\u88ab\u5e26\u8d70 \u6709\u56db\u79cd\u65b9\u5f0f: \u5b83\u4eec\u7684\u539f\u7406\u672c\u8d28\u4e0a\u90fd\u4e00\u6837 -- \u8ba9\u5b50\u8fdb\u7a0b\u8ba4\u4e00\u4e2a\u65b0\u7684\u7239PID\u4e3a1 \u25cb \u5148\u4e0d\u7740\u6025\u53c9\u6389\u7a97\u53e3,\u4f7f\u7528exit\u6216logout\u547d\u4ee4\u6b63\u5e38\u9000\u51fa\u7ec8\u7aef \u25cb nohup \u547d\u4ee4 & \u25cb setsid \u25cb (\u547d\u4ee4 &) \u25cb screen \u547d\u4ee4 \u25cb kill -9 \u7236\u8fdb\u7a0bPID \u25b2 \u9a8c\u8bc1\u76f4\u63a5\u53c9\u6389\u7a97\u53e3,\u8be5\u4f1a\u8bdd\u7a97\u53e3/session/\u4ea4\u4e92\u5f0f\u7a97\u53e3/\u865a\u62df\u7ec8\u7aef\u7684bash\u8fdb\u7a0b\u8fde\u540c\u5b83\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u4e00\u540c\u6302\u6389.. ## -- /dev/pts/0 \"\"\" \u5728\u7b2c1\u4e2a\u865a\u62df\u7ec8\u7aef\u91cc \u6211\u4eecping\u7f51\u5740,\u5c06\u7ed3\u679c\u4e0d\u7ba1\u6b63\u786e\u4e0e\u5426\u90fd\u4e22\u5230/dev/null\u9ed1\u6d1e\u4e2d,\u5e76\u5728\u540e\u53f0\u8fd0\u884c \u5e76\u6267\u884c\u4e86\u4e00\u4e2a\u5728\u540e\u53f0\u8fd0\u884c\u7684sleep\u547d\u4ee4 \u67e5\u770bPID\u4e3a6597\u7684ping\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u7684PID\u4e3a6331 \u67e5\u770b\u5f97\u77e5PID\u4e3a6331\u7684\u8fdb\u7a0b\u662f\u6253\u5f00\u6b64\u865a\u62df\u7ec8\u7aef/dev/pts/0\u4ea7\u751f\u7684bash\u8fdb\u7a0b \"\"\" [ root@localhost ~ ] # ping www.baidu.com &> /dev/null & [ 1 ] 6597 [ root@localhost ~ ] # sleep 3000 & [ 2 ] 6859 [ root@localhost ~ ] # ps -elf | grep 6597 | grep -v grep 4 S root 6597 6331 0 80 0 - 33188 poll_s 09 :50 pts/0 00 :00:00 ping www.baidu.com [ root@localhost ~ ] # ps aux | grep 6331 | grep -v grep root 6331 0 .0 0 .2 116456 2944 pts/0 Ss 09 :38 0 :00 -bash ## -- /dev/pts/1 \"\"\" \u5728\u7b2c2\u4e2a\u865a\u62df\u7ec8\u7aef\u91cc \u540c\u6837\u80fd\u67e5\u8be2\u5230ping\u8fdb\u7a0b\u548csleep\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b,\u90fd\u662fPID\u4e3a6331\u7684bash\u8fdb\u7a0b \"\"\" ps -elf | grep 6597 | grep -v grep ps -elf | grep 6859 | grep -v grep ps aux | grep 6331 | grep -v grep ## \u8be5\u547d\u4ee4\u53ea\u662f\u60f3\u9a8c\u8bc1,\u5f00\u542f\u7684\u6bcf\u4e2a\u865a\u62df\u7ec8\u7aef\u90fd\u6709\u5bf9\u5e94\u7684bash\u8fdb\u7a0b pts/0\u5bf9\u5e946331 pts/1\u5bf9\u5e946537 [ root@localhost ~ ] # ps aux | grep bash | grep -v grep root 820 0 .0 0 .0 115408 956 ? S 05 :09 0 :00 /bin/bash /usr/sbin/ksmtuned root 6331 0 .0 0 .2 116456 2944 pts/0 Ss+ 09 :38 0 :00 -bash root 6537 0 .0 0 .2 116456 2936 pts/1 Ss 09 :49 0 :00 -bash ## \u53ef\u4ee5\u67e5\u8be2\u5230 PID\u4e3a6631\u7684bash\u8fdb\u7a0b \u6709\u4e24\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5b50\u8fdb\u7a0b ping \u548csleep [ root@localhost ~ ] # pstree 6331 bash\u2500\u252c\u2500ping \u2514\u2500sleep \u5c06\u7b2c1\u4e2a\u865a\u62df\u7ec8\u7aef /dev/pts/0 \u7684\u4f1a\u8bdd\u7a97\u53e3\u53c9\u6389 ( \u6ce8\u610f,\u4e0d\u662fexit\u6b63\u5e38\u9000\u51fa ) , \u5728\u6b64session\u5173\u95ed\u7684\u65f6\u5019,\u4f1a\u5411\u6b64\u4f1a\u8bdd\u7a97\u53e3\u91cc\u7684bash\u8fdb\u7a0b\u53ca\u5176\u5b50\u8fdb\u7a0b\u90fd\u53d1\u4e00\u4e2ahup\u4fe1\u53f7, \u8be5hup\u4fe1\u53f7\u7684\u610f\u601d\u5c31\u662f\u8ba9\u5b83\u4eec\u90fd\u6b7b\u6389.. \u6240\u4ee5ping\u8fdb\u7a0b\u3001sleep\u8fdb\u7a0b\u5728\u7b2c2\u4e2a\u7ec8\u7aef/dev/pts/1\u91cc\u5c31\u67e5\u8be2\u4e0d\u5230\u5566 [ root@localhost ~ ] # tty /dev/pts/1 [ root@localhost ~ ] # ps aux | grep 6597 | grep -v grep [ root@localhost ~ ] # ps aux | grep 6859 | grep -v grep [ root@localhost ~ ] # Ps: \u5728\u7b2c1\u4e2a\u7ec8\u7aef/dev/pts/0\u91cc\u8f93\u5165\u547d\u4ee4exit\u800c\u4e0d\u662f\u76f4\u63a5\u53c9\u6389,\u90a3\u4e48\u5728\u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u91cc\u4f9d\u65e7\u80fd\u67e5\u5230ping\u8fdb\u7a0b..","title":"\u8bdd\u9898\u5f15\u5165"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#exitlogout","text":"\u517b\u6210\u826f\u597d\u4e60\u60ef,\u5148exit/logout\u6b63\u5e38\u9000\u51fa\u540e,\u4fdd\u8bc1\u8be5\u7a97\u53e3\u6ca1\u6709\u4efb\u4f55\u8fdc\u7a0b\u8fde\u63a5\u4e86,\u518d\u53c9\u6389!!! \u5728centos7\u91cc\u5185\u6838\u53ea\u8d1f\u8d23\u786c\u4ef6\u90e8\u5206\u7684\u7ba1\u7406,\u4e0a\u5c42\u8fd0\u884c\u7684\u8f6f\u4ef6\u7edf\u4e00\u88absystemd\u8f6f\u4ef6\u7ba1\u7406\u8d77\u6765\u5566. PID\u4e3a1\u7684\u8fdb\u7a0b\u5c31\u662fsystemd\u8f6f\u4ef6\u542f\u52a8\u8d77\u6765\u7684.. \u5f53\u6211\u4eec\u5728/dev/pts/0\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4 exit \u6216\u8005 logout , \u6b63\u5e38\u9000\u51fa\u8be5\u7ec8\u7aef.. \u6b64\u7ec8\u7aef\u91ccPID\u4e3a7441\u7684bash\u8fdb\u7a0b\u5c31\u4f1a\u88abkill\u5173\u6389,\u4f46\u8be5bash\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0bping\u6258\u7ba1\u7ed9\u4e86PID\u4e3a1\u7684\u8fdb\u7a0b... So,\u6b63\u5e38\u9000\u51fa/dev/pts/0\u7ec8\u7aef\u540e,\u518d\u53c9\u6389\u8be5\u7ec8\u7aef\u7a97\u53e3,ping\u8fdb\u7a0b\u4e5f\u4f1a\u4e00\u76f4\u5728\u540e\u53f0\u8fd0\u884c... \u522b\u95ee\u4e3a\u4ec0\u4e48,linux\u5c31\u662f\u8fd9\u4e48\u8bbe\u8ba1\u7684\uff01\uff01T_T Ps: \u5f80\u4e0b\u5728\u8fdb\u884c\u65b0\u7684\u5b9e\u9a8c\u4e4b\u524d,\u8bb0\u5f97 kill -9 7492 ...","title":"exit\u3001logout"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#nohup","text":"nohup\u7684\u7528\u9014\u5c31\u662f\u8ba9\u63d0\u4ea4\u7684\u547d\u4ee4\u5ffd\u7565 hup \u4fe1\u53f7 nohup \u7684\u4f7f\u7528\u662f\u5341\u5206\u65b9\u4fbf\u7684, \u53ea\u9700\u5728\u8981\u5904\u7406\u7684\u547d\u4ee4\u524d\u52a0\u4e0a nohup \u5373\u53ef... \u4f46 \u901a\u5e38 \u4f7f\u7528nohup\u7684\u65f6\u5019,\u4f1a\u5728\u547d\u4ee4\u6700\u540e\u52a0\u4e0a & ,\u8ba9\u5176\u5728\u540e\u53f0\u8fd0\u884c... \u6ce8\u610f\u54e6! \u5728\u76f4\u63a5\u53c9\u6389\u7ec8\u7aef\u65f6, \u8be5\u7ec8\u7aefbash\u7684\u5b50\u8fdb\u7a0b\u4f1a\u4e22\u6389STDOUT ( \u6b63\u5e38\u8f93\u51fa ) \u3001STDERR ( \u9519\u8bef\u8f93\u51fa ) \u7684\u94fe\u63a5. \u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u7f3a\u7701\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230 nohup.out\u6587\u4ef6\u4e2d. \u4e00\u822c\u6211\u4eec\u4f1a\u5728\u7ed3\u5c3e\u52a0\u4e0a \"&\" \u6765\u5c06\u547d\u4ee4\u653e\u5165\u540e\u53f0\u8fd0\u884c\u8fdb\u800c\u89e3\u51b3\u95ee\u9898, \u6216\u8005\u66f4\u6539\u7f3a\u7701\u7684\u91cd\u5b9a\u5411\u6587\u4ef6\u540d...","title":"nohup"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#setsid","text":"\u6838\u5fc3\u601d\u60f3\u4e5f\u662f\u8ba9\u8fdb\u7a0b\u5ffd\u7565 hup\u4fe1\u53f7.. setid\u76f4\u63a5\u5c06\u8fdb\u7a0b\u7684\u7236pid\u8bbe\u7f6e\u62101, \u5373\u8ba9\u8fd0\u884c\u7684\u8fdb\u7a0b\u6210\u4e3ainit( centos7\u4ee5\u524d\u662finit,centos\u662fsystemd )\u7684\u5b50\u8fdb\u7a0b. \u90a3\u4e48\u9664\u975einit/systemd\u7ed3\u675f, \u8be5\u5b50\u8fdb\u7a0b\u624d\u4f1a\u7ed3\u675f, \u5f53\u524d\u8fdb\u7a0b\u6240\u5728\u7684\u7ec8\u7aef\u7ed3\u675f\u540e\u5e76\u4e0d\u4f1a\u5f71\u54cd\u8fdb\u7a0b\u7684\u8fd0\u884c.. \u5373\u8be5\u8fd0\u884c\u7684\u8fdb\u7a0b\u8ddf\u5f53\u524d\u7ec8\u7aef\u5565\u5173\u7cfb\u90fd\u6ca1\u6709\u4e86.. \u5b83\u5e76\u4e0d\u5c5e\u4e8e\u5f53\u524d\u7ec8\u7aef\u7684\u5b50\u8fdb\u7a0b, \u4ece\u800c\u4e5f\u5c31\u4e0d\u4f1a\u53d7\u5230\u5f53\u524d\u7ec8\u7aef\u7684Linux HUP\u4fe1\u53f7\u7684\u5f71\u54cd\u4e86. \u6ce8\u610f\u54e6! nohup\u9700\u8981\u5728\u547d\u4ee4\u6700\u540e\u52a0 & , setid\u53ef\u7528\u53ef\u4e0d\u7528... setid\u4e00\u6b65\u5230\u4f4d,\u5c06\u8fd0\u884c\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u53d8\u4e3a\u4e86PID\u4e3a1\u7684\u8fdb\u7a0b.. \u5b9e\u73b0\u4e86nohup\u8fd0\u884c\u547d\u4ee4\u540e, \u53c9\u6389\u4f1a\u8bdd\u7a97\u53e3\u7684\u6548\u679c.. \u5410\u69fd\u4e00\u4e0b, \u6709\u4e2a\u5f85\u89e3\u51b3\u7684\u7591\u70b9, A\u7ec8\u7aef\u540e\u53f0\u8fd0\u884c setsid ping www.baidu.com &> /dev/null & \u547d\u4ee4, \u4ea4\u4e92\u5f0f\u754c\u9762\u8fd4\u56de\u4e86 [1] 9192 , \u5c06\u9053\u7406,\u6309\u7167\u5f80\u5e38\u7684\u903b\u8f91, 9192\u4e5f\u5c31\u662f\u8fd9\u6761\u8fd0\u884c\u547d\u4ee4\u7684PID... \u4f46\u7ed3\u679c9193\u624d\u662f\u6b64\u547d\u4ee4\u7684PID!! why?","title":"setsid"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#shell","text":"\u7528\u62ec\u53f7\u5c06\u547d\u4ee4\u62ec\u8d77\u6765\u63d0\u4ea4... \u80fd\u8fbe\u5230\u8ddfsetsid\u540c\u6837\u7684\u6548\u679c. \u5177\u4f53\u7684\u5e95\u5c42\u539f\u7406\u7b49\u8bb2shell\u7f16\u7a0b\u65f6\u518d\u9610\u8ff0..","title":"\u5728\u5b50shell\u4e2d\u63d0\u4ea4\u4efb\u52a1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#screen","text":"screen \u547d\u4ee4 screen -S \u7a97\u53e3\u540d screen -ls screen -r \u7a97\u53e3\u540d/\u7ec8\u7aefPID ctrl+a + ctrl+d \u7ec4\u5408\u952e screen -x \u7a97\u53e3\u540d/\u7ec8\u7aefPID \u66f4\u591a\u64cd\u4f5c\u53c2\u8003: https://zhuanlan.zhihu.com/p/336727473 screen\u90e8\u5206\u5185\u5bb9... yum install screen -y \u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u8fd0\u884c\u547d\u4ee4 screen vim a.txt \u5728\u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e2d\u67e5\u770b 14283 -- 15367 -- 15368 -- 15369 14283: \u7b2c\u4e00\u4e2a\u7ec8\u7aef\u7684bash\u8fdb\u7a0b 15367: bash\u7684\u5b50\u8fdb\u7a0b,\u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u8fd0\u884c\u7684screen\u547d\u4ee4 15368: screen\u547d\u4ee4\u81ea\u4e2a\u513f\u521b\u5efa\u7684\u5b50\u8fdb\u7a0bSCREEN 15369: SCREEN\u8fdb\u7a0b\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u7a97\u53e3/dev/pts/2\u6765\u8fd0\u884cvim a.txt\u547d\u4ee4 \u9996\u5148\u8981\u77e5\u9053,\u901a\u8fc7 screen vim a.txt \u7f16\u8f91\u540e,\u6b63\u5e38 :wq \u9000\u51fa\u754c\u9762, 15367 -- 15368 -- 15369\u90fd\u4f1a\u7ed3\u675f\u6389... \u82e5\u5728\u7f16\u8f91\u8fc7\u7a0b\u4e2d \u610f\u5916 \u5173\u6389\u7b2c\u4e00\u4e2a\u7ec8\u7aef, \u90a3\u4e48, pts/0\u7684bash\u8fdb\u7a0b\u548c\u5176\u5b50\u8fdb\u7a0bscreen\u4f1a\u88ab\u6740\u6389; \u4f46\u6b64\u65f6PID\u4e3a15368\u7684SCREEN\u8fdb\u7a0b\u8131\u79bbpts/0\u7ec8\u7aef\u8fd0\u884c, \u5f00\u59cb\u4f9d\u6258\u4e8einit/systemd\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, \u5373SCREEN\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u53d8\u4e3aPID\u4e3a1\u7684\u8fdb\u7a0b.. ## -- \u5728\u7b2c\u4e8c\u4e2a\u7ec8\u7aef\u4e2d\u67e5\u770b [ root@localhost ~ ] # ps -elf | grep [v]im 5 S root 15368 1 0 80 0 - 32001 poll_s 15 :29 ? 00 :00:00 SCREEN vim a.txt 4 S root 15369 15368 0 80 0 - 37398 poll_s 15 :29 pts/2 00 :00:00 vim a.txt \u6240\u4ee5,15368\u548c15369\u7684\u8fdb\u7a0b\u5e76\u6ca1\u6709\u6b7b\u6389... \u800c\u4e14\u6211\u4eec\u53ef\u4ee5\u6062\u590d\u610f\u5916\u5173\u95ed\u7684vim\u7f16\u8f91\u754c\u9762\u7684\u7a97\u53e3\u7ee7\u7eed\u7f16\u8f91.. [ root@localhost ~ ] # screen -ls There is a screen on: 15368 .pts-0.localhost ( Detached ) 1 Socket in /var/run/screen/S-root. ## -- \u6253\u5f00vim\u754c\u9762\u7ee7\u7eed\u7f16\u8f91.. \u5f53\u7136\u662f\u5728pts/2\u7ec8\u7aef\u7ee7\u7eed\u6267\u884c\u7684vim\u547d\u4ee4.. [ root@localhost ~ ] # screen -r 15478 ## -- \u7f16\u8f91\u5b8c\u540e :q\u6b63\u5e38\u9000\u51fa pts/2\u7a97\u53e3\u4f1a\u81ea\u52a8\u5173\u95ed\uff01! 15368\u548c15369\u8fdb\u7a0b\u4e5f\u4f1a\u7ed3\u675f\u6389.. [ root@localhost ~ ] # ps -elf | grep [v]im [ root@localhost ~ ] # screen \u7684\u5176\u4ed6\u73a9\u6cd5 screen -S \u7a97\u53e3\u540d [ root@localhost ~ ] # tty /dev/pts/0 [ root@localhost ~ ] # screen -S new_s ## -- \u56de\u8f66,\u6267\u884c\u547d\u4ee4 /pts/0\u7684\u7ec8\u7aef\u4f1a\u95ea\u70c1\u4e00\u4e0b,\u8df3\u51fa\u4e00\u4e2a\u7a7a\u767d\u7684\u7ec8\u7aef\u754c\u9762 ## -- \u53ef\u4ee5\u89c2\u5bdf\u6389,\u6b64\u7ec8\u7aef\u754c\u9762\u662fscreen\u521b\u5efa\u7684\u65b0\u7ec8\u7aef/pts/1 [ root@localhost ~ ] # tty /dev/pts/1 [ root@localhost ~ ] # ps -elf | grep [b]ash 1 S root 785 1 0 80 0 - 28852 do_wai 01 :23 ? 00 :00:01 /bin/bash... 1 S root 1881 1751 0 80 0 - 18138 poll_s 01 :24 ? 00 :00:01 /usr/bin/ssh-agent... 4 S root 16943 16941 0 80 0 - 29114 do_wai 16 :44 pts/0 00 :00:00 -bash 4 S root 17020 17019 0 80 0 - 29142 do_wai 16 :45 pts/1 00 :00:00 /bin/bash [ root@localhost ~ ] # ps -elf | grep new_s | grep -v grep 4 S root 17018 16943 0 80 0 - 31935 sys_pa 16 :45 pts/0 00 :00:00 screen -S new_s 5 S root 17019 17018 0 80 0 - 31968 poll_s 16 :45 ? 00 :00:00 SCREEN -S new_s # -- \u68b3\u7406\u4e0b\u6b64\u8fdb\u7a0b\u6811\u7684\u5173\u7cfb \"\"\" ------------------------------------------------ \u547d\u4ee4 PID PPID ------------------------------------------------ pts/0 16943 screen -S new_s 17018 16943 SCREEN -S new_s 17019 17018 pts/1 17020 17019 pstree 17020 ------------------------------------------------ \"\"\" [ root@localhost ~ ] # pstree 16943 bash\u2500\u2500\u2500screen\u2500\u2500\u2500screen\u2500\u2500\u2500bash\u2500\u2500\u2500pstree \u5728screen\u521b\u5efa\u7684pts/1\u7ec8\u7aef\u8fd0\u884c\u547d\u4ee4 n = 0;while true;do ((n++));sleep 1;echo $n;done; , ctrl+a ctrl+d \u8fde\u8d2f\u6572\u51fb.. \u56de\u5230pts/0\u7ec8\u7aef,\u53ef\u4ee5\u505a\u5176\u4ed6\u4e8b\u60c5\u5566... \u54ea\u6015\u5173\u95ed\u4e86pts/0\u7ec8\u7aef,\u5728pts/1\u7ec8\u7aef\u8fd0\u884c\u7684\u547d\u4ee4\u4e5f\u4e0d\u4f1a\u7ec8\u6b62,\u4f1a\u7ee7\u7eed\u8fd0\u884c... \u5173\u95edpts/0\u7ec8\u7aef, \u91cd\u65b0\u8fde\u63a5\u4e0a\u670d\u52a1\u5668, screen -ls screen -r new_S \u53ef\u4ee5\u8fdb\u5165pts/1\u7ec8\u7aef\u770b\u8fd0\u884c\u72b6\u51b5\u7b49\u7b49... [ root@localhost ~ ] # tty /dev/pts/0 [ root@localhost ~ ] # screen -S new_s [ detached from 17019 .new_s ] ## -- \u8131\u79bbnew_s\u7a97\u53e3 [ root@localhost ~ ] # \u8fd8\u6709\u4e2a\u9a9a\u64cd\u4f5c.. \u5c0f\u660e\u6b63\u5904\u4e8enew_S\u7a97\u53e3, \u5c0f\u5ddd\u8fdc\u7a0b\u8fde\u63a5\u670d\u52a1\u5668\u540e screen -x new_s , \u4e24\u8fb9\u53ef\u4ee5\u540c\u6b65\u663e\u793a\u64cd\u4f5c ! Amazing..","title":"screen!!"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_5","text":"\u6b64\u90e8\u5206\u4e86\u89e3\u5373\u53ef.. \u540e\u53f0\u8fdb\u7a0b\u7684\u7ba1\u7406\u901a\u5e38\u4f1a\u501f\u52a9screen\u547d\u4ee4. & \u540e\u53f0\u8fd0\u884c jobs \u67e5\u770b \u5f53\u524d\u7ec8\u7aef \u91cc\u63d0\u4ea4\u7684\u540e\u53f0\u8fdb\u7a0b, \u6ce8\u610f\u54e6,\u662f\u5f53\u524d\u7ec8\u7aef ctrl+z \u5c06\u524d\u53f0\u7684\u8fdb\u7a0b\u6302\u8d77(\u6682\u505c T)\u5230\u540e\u53f0 \u6ce8\u610f\u54e6,ctrl+c\u662f\u7ed3\u675f\u8fdb\u7a0b fg %\u4f5c\u4e1a\u7f16\u53f7 \u5c06\u540e\u53f0\u7684\u8fdb\u7a0b\u8c03\u5230\u524d\u53f0\u8fd0\u884c bg %\u4f5c\u4e1a\u7f16\u53f7 \u5c06\u540e\u53f0\u6302\u8d77(T)\u7684\u8fdb\u7a0b\u5728\u540e\u53f0\u8fd0\u884c [ root@localhost ~ ] # sleep 3000 & [ 1 ] 20265 [ root@localhost ~ ] # jobs [ 1 ] + \u8fd0\u884c\u4e2d sleep 3000 & ## -- \u5728vim\u7f16\u8f91\u754c\u9762 ctrl+z \u5c06\u524d\u53f0\u7684\u8fdb\u7a0b\u6302\u8d77(\u6682\u505c)\u5230\u540e\u53f0 ## -- \u4e2d\u62ec\u53f7\u5185\u7684\u7f16\u53f7\u5c31\u662f\u4f5c\u4e1a\u7f16\u53f7, %1\u4ee3\u8868\u4f5c\u4e1a1 [ root@localhost ~ ] # vim b.txt [ 2 ] + \u5df2\u505c\u6b62 vim b.txt [ root@localhost ~ ] # jobs [ 1 ] - \u8fd0\u884c\u4e2d sleep 3000 & [ 2 ] + \u5df2\u505c\u6b62 vim b.txt ## -- \u8c03\u5230\u524d\u53f0\u8fd0\u884c\u540e,ctrl+z\u5c31\u5728\u524d\u53f0\u7ed3\u675f\u4e86\u8be5\u8fdb\u7a0b [ root@localhost ~ ] # fg %1 sleep 3000 ^C [ root@localhost ~ ] # jobs [ 2 ] + \u5df2\u505c\u6b62 vim b.txt ## -- \u5728vim\u9875\u9762 :q \u9000\u51fa\u540e \u8be5\u8fdb\u7a0b\u5c31\u7ed3\u675f\u4e86 [ root@localhost ~ ] # fg %2 vim b.txt [ root@localhost ~ ] # jobs \u6f14\u793a\u4e0b\u6740\u6b7b\u8fdb\u7a0b kill -9 %\u4f5c\u4e1a\u7f16\u53f7 [ root@localhost ~ ] # vim c.txt [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # ps aux | grep [v]im root 20469 0 .1 0 .5 149548 5184 pts/0 T 22 :32 0 :00 vim c.txt # -- \u56e0\u4e3avim\u547d\u4ee4\u662f\u4ea4\u4e92\u5f0f\u7684,\u5e94\u8be5\u5728\u524d\u53f0\u8fd0\u884c,\u6ca1\u6cd5\u8ba9\u5176\u5728\u540e\u53f0\u8fd0\u884c [ root@localhost ~ ] # bg %1 [ 1 ] + vim c.txt & [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # kill -9 %1 [ 1 ] + \u5df2\u505c\u6b62 vim c.txt [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u6740\u6b7b vim c.txt \u6f14\u793abg\u547d\u4ee4 ## -- \u5728\u7b2c\u4e00\u4e2a\u7ec8\u7aef\u6267\u884c # ctrl+z\u540e,\u8be5\u8fdb\u7a0b\u5230\u540e\u53f0\u6302\u8d77,\u4e0d\u4f1a\u518d\u6709\u4fe1\u606f\u8f93\u5165\u5230/mnt/a.txt\u4e2d!! [ root@localhost ~ ] # ping www.baidu.com &>> /mnt/a.txt ^Z [ 1 ] + \u5df2\u505c\u6b62 ping www.baidu.com & >>/mnt/a.txt [ root@localhost ~ ] # jobs [ 1 ] + \u5df2\u505c\u6b62 ping www.baidu.com & >>/mnt/a.txt ## -- \u89e3\u51b3\u65b9\u6848: kill\u53d1\u9001\u4e00\u4e2a18\uff09SIGCONT\u7ee7\u7eed\u7684\u4fe1\u53f7\u7ed9\u8be5\u8fdb\u7a0b \u6216\u8005\u4f7f\u7528 bg\u547d\u4ee4 [ root@localhost ~ ] # bg %1 [ 1 ] + ping www.baidu.com & >>/mnt/a.txt & ## -- \u5728\u540e\u53f0\u7ee7\u7eed\u8fd0\u884c, tail -f /mnt/a.txt \u53ef\u4ee5\u52a8\u6001\u67e5\u770b\u6587\u4ef6\u91cc\u7684\u5185\u5bb9\u8fdb\u884c\u9a8c\u8bc1","title":"\u7ba1\u7406\u540e\u53f0\u8fdb\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_6","text":"\u7ba1\u9053\u7528\u4e8e\u8fdb\u7a0b\u95f4\u901a\u4fe1 \u7ba1\u9053\u64cd\u4f5c\u7b26\u53f7 \"|\" \u4e3b\u8981\u7528\u6765\u8fde\u63a5\u5de6\u53f3\u4e24\u4e2a\u547d\u4ee4. \u5c06\u5de6\u4fa7\u547d\u4ee4\u7684\u6807\u51c6\u8f93\u51fa stdout \u4f5c\u4e3a\u53f3\u4fa7\u547d\u4ee4\u7684\u6807\u51c6\u8f93\u5165 stdin . \u6ce8\u610f\u54e6! \u65e0\u6cd5\u4f20\u9012\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u7ed9\u53f3\u4fa7\u547d\u4ee4..","title":"\u7ba1\u9053"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_7","text":"\u25b2 \u98981:\u7edf\u8ba1\u5f53\u524d/etc/passwd\u6587\u4ef6\u4e2d\u7528\u6237\u4f7f\u7528\u7684shell\u7c7b\u578b [ root@localhost ~ ] # cat /etc/passwd | head -1 root:x:0:0:root:/root:/bin/bash [ root@localhost ~ ] # awk -F: '{print $7}' /etc/passwd | sort | uniq -c 3 /bin/bash 1 /bin/sync 1 /sbin/halt 39 /sbin/nologin 1 /sbin/shutdown \u25b2 \u98982:\u7edf\u8ba1\u7f51\u7ad9\u7684\u8bbf\u95ee\u60c5\u51b5 netstat -an | grep :80 | awk -F \":\" '{print $8}' | sort | uniq -c \u25b2 \u98983:\u6253\u5370\u5f53\u524d\u6240\u6709\u7684IP [ root@localhost ~ ] # ip addr | grep 'inet ' | awk '{print $2}' | awk -F \"/\" '{print $1}' 127 .0.0.1 172 .16.150.131 \u25b2 \u98984:\u6253\u5370\u6839\u5206\u533a\u5df2\u7528\u7a7a\u95f4\u7684\u767e\u5206\u6bd4 ( \u4ec5\u6253\u5370\u6570\u5b57 ) [ root@localhost ~ ] # df | grep '/$' | awk '{print $5}' | awk -F\"%\" '{print $1}' 27 \u25b2 \u98985:\u7edf\u8ba1\u7f51\u7ad9\u7684\u8bbf\u95ee\u6700\u591a\u7684ip top 10 ## -- \u601d\u8def: \u6253\u5370\u6240\u6709\u8bbf\u95ee\u7684\u8fc7\u6765\u7684ip | \u6392\u5e8f | \u53bb\u91cd | \u5012\u5e8f\u6392\u5e8f | \u53d6\u524d10 awk '{print $1}' access.log | sort | uniq -c | sort -rn | head","title":"\u7ba1\u9053\u7ec3\u4e60"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#tee","text":"## -- ifconfig\u547d\u4ee4\u7684\u7ed3\u679c\u4e22\u5230\u4e86a.txt\u6587\u4ef6\u4e2d,\u4f46\u5c4f\u5e55\u4e0a\u6ca1\u6709\u663e\u793a\u5566 ifconfig & > /opt/a.txt ## -- ifconfig\u547d\u4ee4\u7684\u7ed3\u679c\u4e0d\u4ec5\u4f1a\u4e22\u5230\u4e86b.txt\u6587\u4ef6\u4e2d,\u5c4f\u5e55\u4e0a\u4e5f\u4f1a\u663e\u793a\u4e00\u4efd ## tee\u4e0d\u52a0\u9009\u9879\u9ed8\u8ba4\u662f\u8986\u76d6 `tee -a`\u662f\u8ffd\u52a0 ifconfig | tee /opt/b.txt","title":"\u7ba1\u9053\u4e2d\u7684tee"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#xargs","text":"xargs\u53c2\u6570\u4f20\u9012, \u8ba9\u4e00\u4e9b\u4e0d\u652f\u6301\u7ba1\u9053\u7684\u547d\u4ee4\u53ef\u4ee5\u4f7f\u7528\u7ba1\u9053\u6280\u672f!!! \u6240\u6709\u7684\u547d\u4ee4\u90fd\u80fd\u5c06\u547d\u4ee4\u7684\u7ed3\u679c\u4e22\u5230\u7ba1\u9053\u91cc, \u4f46\u4e0d\u662f\u6240\u6709\u7684\u547d\u4ee4( eg: rm mv cp )\u90fd\u80fd\u4ece\u7ba1\u9053\u4e2d\u62ff\u51fa\u7ed3\u679c\u505a\u5904\u7406!!! \u90a3\u5982\u4f55\u662f\u597d\uff1f \u7ed3\u5408 xargs\u547d\u4ee4 \u4f7f\u7528!! \u8be6\u60c5\u8bf7\u8df3\u8f6c: 4_\u6587\u4ef6\u7ba1\u7406\u4e4b\u547d\u4ee4\u8865\u5145.md find\u7ed3\u5408xargs \u8fd9\u90e8\u5206\u7684\u5185\u5bb9\uff01\uff01 [ root@localhost ~ ] # which cat | xargs ls -l -rwxr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat ## -- \u5fc5\u987b\u7684\u8fdb\u5165/opt\u76ee\u5f55\u624d\u884c `ls /opt | xargs rm -rf`\u662f\u5931\u8d25\u7684 [ root@localhost ~ ] # cd /opt [ root@localhost opt ] # ls a.txt c.txt [ root@localhost opt ] # ls | xargs rm -fv \u5df2\u5220\u9664 \"a.txt\" \u5df2\u5220\u9664 \"c.txt\" [ root@localhost opt ] # ls [ root@localhost opt ] #","title":"xargs"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_8","text":"\u5728UNIX/Linux\u4e2d, \u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a\u7236\u8fdb\u7a0b..","title":"\u50f5\u5c38\u8fdb\u7a0b\u4e0e\u5b64\u513f\u8fdb\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_9","text":"\u9996\u5148\u8981\u660e\u767d, \u5f53\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u5f00\u542f\u8d77\u6765\u4ee5\u540e, \u5b83\u7684\u8fd0\u884c\u4e0e\u7236\u8fdb\u7a0b\u662f \u5f02\u6b65\u5e76\u53d1 \u7684, \u5f7c\u6b64\u4e92\u4e0d\u5f71\u54cd, \u8c01\u5148\u6b7b\u90fd\u4e0d\u4e00\u5b9a... \u603b\u7ed3\u6765\u8bf4,\u82e5\u76f4\u63a5\u53c9\u6389\u7ec8\u7aef, \u7236\u8fdb\u7a0bbash\u548c\u5176\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u7ed3\u675f\u6389.. \u6b63\u5e38\u60c5\u51b5\u4e0b,\u7236\u8fdb\u7a0b\u5148\u6b7b,\u5b50\u8fdb\u7a0b\u4f1a\u53d8\u6210\u5b64\u513f\u8fdb\u7a0b; \u5b50\u8fdb\u7a0b\u5148\u6b7b,\u5b50\u8fdb\u7a0b\u4f1a\u5148\u53d8\u4e3a\u50f5\u5c38\u8fdb\u7a0b\u518d\u5b8c\u5168\u6b7b\u53bb,\u5bf9\u7236\u8fdb\u7a0b\u6ca1\u5f71\u54cd \u7b2c\u4e8c\u70b9, linux\u64cd\u4f5c\u7cfb\u7edf\u7684\u8bbe\u8ba1\u89c4\u5b9a: \u7236\u8fdb\u7a0b\u5e94\u8be5\u5177\u5907\u968f\u65f6\u83b7\u53d6\u5b50\u8fdb\u7a0b\u72b6\u6001\u7684\u80fd\u529b \u5047\u8bbe\u5b50\u8fdb\u7a0b\u5148\u4e8e\u7236\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5,\u82e5OS\u5c06\u5b50\u8fdb\u7a0b\u7684\u6240\u6709\u8d44\u6e90\u5168\u90e8\u91ca\u653e\u6389,\u7236\u8fdb\u7a0b\u5c31\u627e\u4e0d\u5230\u8be5\u5b50\u8fdb\u7a0b\u5566... So,linux\u5f53\u5b50\u8fdb\u7a0b\u5148\u4e8e\u7236\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5/\u6b7b\u6389\u65f6,OS\u4f1a\u5c06\u5b50\u8fdb\u7a0b\u5360\u7528\u7684\u91cd\u578b\u8d44\u6e90\u90fd\u91ca\u653e\u6389( eg:\u5173\u95ed\u5df2\u6253\u5f00\u7684\u6587\u4ef6,\u820d\u5f03\u5df2\u5360\u7528\u7684cpu\u3001\u5185\u5b58\u3001\u4ea4\u6362\u7a7a\u95f4\u7b49 ), \u4f46\u662f\u4f1a\u4fdd\u7559\u4e00\u90e8\u5206\u5b50\u8fdb\u7a0b\u7684\u5173\u952e\u72b6\u6001\u4fe1\u606f( eg: PID \u3001\u9000\u51fa\u72b6\u6001\u3001\u5df2\u8fd0\u884c\u65f6\u95f4\u7b49 ), \u6b64\u65f6\u5b50\u8fdb\u7a0b\u5c31\u76f8\u5f53\u4e8e\u6b7b\u4e86\u4f46\u662f\u6ca1\u5b8c\u5168\u6b7b,\u6ca1\u6b7b\u5e72\u51c0, \u56e0\u800c\u5f97\u540d \"\u50f5\u5c38\u8fdb\u7a0b\" ... \u50f5\u5c38\u8fdb\u7a0b\u662flinux\u64cd\u4f5c\u7cfb\u7edf\u51fa\u4e8e\u597d\u5fc3, \u4e3a\u7236\u8fdb\u7a0b\u51c6\u5907\u7684\u4e00\u4e9b\u5b50\u8fdb\u7a0b\u7684\u72b6\u6001\u6570\u636e, \u4e13\u4f9b\u7236\u8fdb\u7a0b\u968f\u65f6\u67e5\u9605 \u4e5f\u5c31\u662f\u8bf4\"\u50f5\u5c38\u8fdb\u7a0b\"\u662flinux\u7cfb\u7edf\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784, \u6240\u6709\u7684\u5b50\u8fdb\u7a0b\u7ed3\u675f\u540e\u90fd\u4f1a\u8fdb\u5165\u50f5\u5c38\u8fdb\u7a0b\u7684\u72b6\u6001","title":"\u50f5\u5c38\u8fdb\u7a0b\u662f\u4ec0\u4e48\uff1f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#wait-waitpid","text":"\u50f5\u5c38\u8fdb\u7a0b\u6b8b\u5b58\u7684\u90a3\u4e9b\u6570\u636e(eg PID)\u662f\u9700\u8981\u56de\u6536\u7684! \u5f53\u7236\u8fdb\u7a0b\u89c9\u5f97\u81ea\u5df1\u65e0\u9700\u67e5\u770b\u50f5\u5c38\u8fdb\u7a0b\u7684\u6570\u636e,\u89c9\u5f97\u7559\u7740\u50f5\u5c38\u8fdb\u7a0b\u7684\u6570\u636e\u6ca1\u5565\u7528\u65f6,\u4f1a\u7531\u7236\u8fdb\u7a0b\u53d1\u8d77\u4e00\u4e2a \u7cfb\u7edf\u8c03\u7528 wait / waitpid \u6765\u901a\u77e5linux\u64cd\u4f5c\u7cfb\u7edf\u6765\u6e05\u7406\u8fd9\u4e9b\u50f5\u5c38\u8fdb\u7a0b.. \u8fd9\u91cc\u9488\u5bf9\u7236\u8fdb\u7a0b\u6709\u4e09\u79cd\u60c5\u51b5\u9700\u8981\u8ba8\u8bba: 1> \u4e00\u4e9b\u4f18\u79c0\u7684\u5f00\u6e90\u8f6f\u4ef6 eg: nginx , \u8fd9\u4e9b\u8f6f\u4ef6\u5728\u5f00\u542f\u5b50\u8fdb\u7a0b\u65f6 \u7236\u8fdb\u7a0b\u5185\u90e8\u90fd\u4f1a\u53ca\u65f6\u8c03\u7528wait/waitpid\u6765\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\u56de\u6536\u50f5\u5c38\u8fdb\u7a0b \u6240\u4ee5\u6211\u4eec\u901a\u5e38\u770b\u4e0d\u5230\u4f18\u79c0\u7684\u5f00\u6e90\u8f6f\u4ef6\u5806\u79ef\u50f5\u5c38\u8fdb\u7a0b 2> \u6c34\u5e73\u826f\u597d\u7684\u7a0b\u5e8f\u5458\u5f00\u53d1\u7684\u5e94\u7528\u7a0b\u5e8f, \u77e5\u9053\u7236\u8fdb\u7a0b\u8981\u5bf9\u5b50\u8fdb\u7a0b\u8d1f\u8d23, \u4f1a\u5728\u7236\u8fdb\u7a0b\u5185\u8003\u8651wait/waitpid \u4f46\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528wait/waitpid\u7684\u65f6\u95f4\u53ef\u80fd\u6162\u4e86\u4e9b, \u6211\u4eec\u53ea\u9700\u8981\u53d1\u900117\u53f7\u4fe1\u53f7\u63d0\u9192\u8be5\u7236\u8fdb\u7a0b\u5c31\u884c.. 3> \u5783\u573e\u7a0b\u5e8f\u5458\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u65f6,\u538b\u6839\u6ca1\u8bbe\u8ba1\u8fdb\u7a0b\u5bf9OS\u7684wait/waitpid\u8c03\u7528... \u6211\u4eec\u53d1\u4fe1\u53f7\u63d0\u9192\u4e5f\u6ca1\u7528,\u538b\u6839\u4e0d\u4f1a\u54cd\u5e94! \u60c5\u51b53\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e2a\u975e\u5e38\u5947\u602a\u7684\u73b0\u8c61: \u8ba1\u7b97\u673a\u5185\u5b58\u548c\u786c\u76d8\u5145\u8db3\u3001cpu\u7a7a\u95f2. \u4f46\u662f\u542f\u52a8\u65b0\u7684\u8f6f\u4ef6\u5c31\u662f\u65e0\u6cd5\u542f\u52a8\u8d77\u6765. \u7a76\u5176\u6839\u672c\u539f\u56e0\u5c31\u662f\u5806\u79ef\u4e86\u592a\u591a\u50f5\u5c38\u8fdb\u7a0b, \u50f5\u5c38\u8fdb\u7a0b\u867d\u7136\u5bf9\u5185\u5b58\u3001\u786c\u76d8\u3001cpu\u6d88\u8017\u5f88\u5c0f\u5f88\u5c0f, \u4f46\u4e00\u4e2a\u50f5\u5c38\u8fdb\u7a0b\u5c31\u8981\u5360\u7528\u4e00\u4e2aPID, linux\u64cd\u4f5c\u7cfb\u7edf\u4e2dPID\u53f7\u662f\u6709\u9650\u7684!!!","title":"wait / waitpid"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_10","text":"OS\u6536\u5230\u7236\u8fdb\u7a0b\u53d1\u8d77\u7684wait / waitpid\u7cfb\u7edf\u8c03\u7528\u540e, \u4f1a\u91ca\u653e\u6389\u50f5\u5c38\u8fdb\u7a0b\u5360\u7528\u7684\u8d44\u6e90.. \u9488\u5bf9\u4e0a\u9762\u60c5\u51b52, \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4 kill -CHLD \u7236\u8fdb\u7a0bPID \u53d1\u9001 17) SIGCHLD \u4fe1\u53f7\u7ed9\u7236\u8fdb\u7a0b, \u8ba9\u5176\u8d76\u5feb\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528\u6765\u901a\u77e5OS\u6e05\u7406\u50f5\u5c38\u8fdb\u7a0b!! \u9488\u5bf9\u4e0a\u9762\u7684\u60c5\u51b53, \u7236\u8fdb\u7a0b\u4e0d\u4f1a\u54cd\u5e94 17) SIGCHLD \u4fe1\u53f7, \u53ea\u80fd\u6740\u6389\u7236\u8fdb\u7a0b, \u8ba9\u50f5\u5c38\u5b50\u8fdb\u7a0b\u88abPID\u4e3a1\u7684\u9876\u7ea7\u8fdb\u7a0bsystemd\u6536\u517b!! systemd\u975e\u5e38\u9760\u8c31, \u4f1a\u5b9a\u671f\u53d1\u8d77\u7cfb\u7edf\u8c03\u7528wait/waitpid\u6765\u901a\u77e5\u64cd\u4f5c\u7cfb\u7edf\u6e05\u7406\u50f5\u5c38... \u82e5\u7d2f\u79ef\u7684\u50f5\u5c38\u5f88\u5c11,\u4e0d\u4f1a\u76f4\u63a5\u9009\u62e9\u6740\u7236\u8fdb\u7a0b\u5bfc\u81f4\u670d\u52a1\u5173\u95ed, \u4f1a\u5728\u8f6f\u4ef6\u5347\u7ea7\u7684\u65f6\u5019(\u4f18\u5316\u8f6f\u4ef6),\u5c06\u8be5\u7236\u8fdb\u7a0b\u5e72\u6389!!","title":"\u6e05\u7406\u50f5\u5c38\u8fdb\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_11","text":"\u7236\u8fdb\u7a0b\u5148\u6b7b\u6389, \u800c\u5b83\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c. \u90a3\u4e48\u90a3\u4e9b\u5b50\u8fdb\u7a0b\u5c06\u6210\u4e3a\u5b64\u513f\u8fdb\u7a0b.. \u5b64\u513f\u8fdb\u7a0b\u5c06\u88abPID\u4e3a1\u7684\u9876\u7ea7\u8fdb\u7a0binit / systemd\u6240\u6536\u517b, \u5e76\u7531\u9876\u7ea7\u8fdb\u7a0b\u5bf9\u5b83\u4eec\u5b8c\u6210\u72b6\u6001\u6536\u96c6\u5de5\u4f5c..","title":"\u5b64\u513f\u8fdb\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/13_%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/#_12","text":"linux \u50f5\u5c38\u8fdb\u7a0b\u548c\u5b64\u513f\u8fdb\u7a0b\u7684\u8bbe\u8ba1\u6ca1\u6709\u95ee\u9898, \u6709\u95ee\u9898\u7684\u662f\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u7684\u7a0b\u5e8f\u5458..Hhh \u770b\u5230\u51fa\u73b0\u50f5\u5c38\u8fdb\u7a0b\u4e0d\u7528\u7d27\u5f20,\u50f5\u5c38\u8fdb\u7a0b\u4e2a\u6570\u4e00\u76f4\u5728\u589e\u52a0\u624d\u5e94\u8be5\u7d27\u5f20... \u25b2 \u5b64\u513f\u8fdb\u7a0b\u9a8c\u8bc1 A\u7ec8\u7aef \u540e\u53f0\u8fd0\u884c\u547d\u4ee4, ` ping www.baidu.com & > /dev/null & ` B\u7ec8\u7aef ` ps -elf | grep [ p ] ing ` ## \u627e\u5230PID\u4e0ePPID ` kill -9 PPID ` ## \u5e72\u6389ping\u8fdb\u7a0b\u7684PPID,\u4e5f\u5c31\u662f\u7ec8\u7aefA\u7684bash \u7ec8\u7aefA\u4f1a\u65ad\u5f00\u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5 ` ps -elf | grep [ p ] ing ` ## \u518d\u6267\u884c\u6b64\u547d\u4ee4,\u53d1\u73b0ping\u8fdb\u7a0b\u7684PPID\u53d8\u4e3a\u4e861 \u25b2 \u50f5\u5c38\u8fdb\u7a0b\u9a8c\u8bc1 ## -- \u7ec8\u7aefA\u4e0a\u64cd\u4f5c [ root@localhost ~ ] # vim a.py [ root@localhost ~ ] # cat a.py ## \u7236\u8fdb\u7a0b\u5f00\u4e863\u4e2a\u5b50\u8fdb\u7a0b,\u7236\u8fdb\u7a0b\u6d3b10000\u79d2,\u6bcf\u4e2a\u5b50\u8fdb\u7a0b\u90fd\u6d3b10\u79d2 from multiprocessing import Process import os import time def task () : print ( \"son -> \" ,os.getpid ()) time.sleep ( 10 ) if __name__ == \"__main__\" : for i in range ( 3 ) : p = Process ( target = task ) p.start () print ( \"father -> \" ,os.getpid ()) time.sleep ( 10000 ) ## 10\u79d2\u540e,3\u4e2a\u5b50\u8fdb\u7a0b\u4f1a\u53d8\u6210\u50f5\u5c38\u8fdb\u7a0b [ root@localhost ~ ] # python a.py ( 'father -> ' , 24754 ) ( 'son -> ' , 24756 ) ( 'son -> ' , 24757 ) ( 'son -> ' , 24755 ) ## -- \u7ec8\u7aefB\u4e0a\u64cd\u4f5c [ root@localhost ~ ] # ps aux | grep 24754 | grep -v grep root 24754 0 .0 0 .5 151308 5812 pts/1 S+ 12 :58 0 :00 python a.py [ root@localhost ~ ] # ps aux | grep 24755 | grep -v grep root 24755 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> [ root@localhost ~ ] # ps aux | grep 24756 | grep -v grep root 24756 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> [ root@localhost ~ ] # ps aux | grep 24757 | grep -v grep root 24757 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> ## \u8bc1\u660e\u50f5\u5c38\u8fdb\u7a0b\u6740\u4e0d\u6389 [ root@localhost ~ ] # kill -9 24757 [ root@localhost ~ ] # ps aux | grep 24757 | grep -v grep root 24757 0 .0 0 .0 0 0 pts/1 Z+ 12 :58 0 :00 [ python ] <defunct> ## \u518d\u4f7f\u7528top\u547d\u4ee4 \u67e5\u770bzombie\u5b57\u6bb5\u7684\u503c \u503c\u4e3a3 ## \u9000\u51fatop\u754c\u9762 ## kill -9\u6740\u6389\u7236\u8fdb\u7a0b,\u6216\u8005\u5728\u7ec8\u7aefA\u7684\u4ea4\u4e92\u5f0f\u754c\u9762\u6267\u884cctrl+c\u7ed3\u675f\u6389py\u7a0b\u5e8f [ root@localhost ~ ] # kill -9 24754 ## \u518d\u4f7f\u7528top\u547d\u4ee4 \u67e5\u770bzombie\u5b57\u6bb5\u7684\u503c \u503c\u4e3a0","title":"\u5b9e\u9a8c\u9a8c\u8bc1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/","text":"\"\"\" -- \u5bf9\u78c1\u76d8\u8fdb\u884c\u5206\u533a\u5e76\u67e5\u770b\u78c1\u76d8\u6709\u54ea\u4e9b\u5206\u533a -- \"\"\" fdisk /dev/sdb # -- \u4ee5MBR\u683c\u5f0f\u5bf9\u67d0\u4e2a\u78c1\u76d8\u8fdb\u884c\u5206\u533a gdisk /dev/sdd # -- \u4ee5GPT\u683c\u5f0f\u5bf9\u67d0\u4e2a\u78c1\u76d8\u8fdb\u884c\u5206\u533a partprobe # -- \u53ca\u65f6\u66f4\u65b0\u78c1\u76d8\u5206\u533a\u540e\u7684\u5206\u533a\u8868\u4fe1\u606f!! lsblk # -- \u67e5\u770b\u6240\u6709\u78c1\u76d8\u5206\u533a\u60c5\u51b5 ls /dev/sdb \u8fde\u7eed\u6309\u4e24\u4e0bTab\u952e!! # -- \u67e5\u770b\u67d0\u4e00\u78c1\u76d8\u4e0b\u6709\u54ea\u4e9b\u5206\u533a # -- \u67e5\u770b\u67d0\u4e2a\u78c1\u76d8\u5206\u533a\u60c5\u51b5 lsblk /dev/sda fdisk /dev/sdb \u8fdb\u53bb\u540e \u8f93\u5165p fdisk -l /dev/sdb gdisk -l /dev/sdd \"\"\" -- \u683c\u5f0f\u5316\u5206\u533a\u5e76\u6302\u8f7d(\u4e34\u65f6\u3001\u6c38\u4e45) -- \"\"\" mkfs.xfs /dev/sdb1 # -- \u683c\u5f0f\u5316\u67d0\u4e2a\u5206\u533a mount /dev/sdb1 /a # -- \u5c06\u67d0\u4e2a\u5206\u533a\u8fdb\u884c\u4e34\u65f6\u6302\u8f7d blkid # -- \u67e5\u770b\u6bcf\u4e2a\u5206\u533a\u7684UUID vim /etc/fstab # -- \u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u6302\u8f7d sed -i '$a /dev/sdb3 /opt xfs defaults 0 0' /etc/fstab mount -a # -- \u4e0dreboot\u91cd\u542f\u673a\u5668,\u4f7f\u914d\u7f6e\u6587\u4ef6/etc/fstab\u751f\u6548 # \u524d\u63d0: \u5206\u533a\u5bf9\u5e94\u7684\u6302\u8f7d\u53c2\u6570\u8bbe\u7f6e\u4e3adefaults\u6216\u8005\u591a\u4e2a\u6302\u8f7d\u53c2\u6570\u4e2d\u5305\u542bauto df # -- \u67e5\u770b\u5df2\u7ecf\u6302\u8f7d\u78c1\u76d8\u7684\u4f7f\u7528\u60c5\u51b5 mount | grep sdb # -- \u6700\u51c6\u786e\u7684\u663e\u793a\u662f\u5426\u6302\u8f7d\u6210\u529f \"\"\" -- \u5236\u4f5cswap\u5206\u533a\u5e76\u6fc0\u6d3b -- \"\"\" mkswap /dev/sdd3 swapon /dev/sdd3 # -- \u6fc0\u6d3b/\u4e34\u65f6\u6302\u8f7dswap\u5206\u533a swapon -s # -- \u67e5\u770b\u6709\u54ea\u4e9b\u6302\u8f7d\u7684swap\u5206\u533a swapoff -a # -- \u5173\u95ed\u6240\u6709swap\u5206\u533a swapoff /dev/sdd3 # -- \u5173\u95ed\u67d0\u4e2aswap\u5206\u533a free -m # -- \u67e5\u770b\u865a\u62df\u5185\u5b58\u60c5\u51b5 vim /etc/fstab # -- \u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u65b0\u589e\u7684swap\u5206\u533a \u4e34\u65f6 + \u5f00\u673a\u6302\u8f7d = \u6c38\u4e45 sed -i '$a /dev/sdd3 swap swap defaults 0 0' /etc/fstab \u78c1\u76d8\u5206\u533a \u00b6 \u56de\u987e\u8be6\u89c1: 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md \u4e2d \u5b58\u50a8\u5668\u8be6\u89e3 \u8fd9\u4e00\u90e8\u5206\u7684\u5185\u5bb9... lsblk /dev/sda ## -- \u5728vm\u865a\u62df\u673a\u91cc\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0\u591a\u4e2a\u786c\u76d8 ## -- \u8fd9\u91cc\u6211\u6dfb\u52a0\u4e86 sdb sdc sdd\u4e09\u5757\u786c\u76d8(\u90fd\u662fSCSI\u63a5\u53e3 \u5bb9\u91cf\u5206\u522b\u4e3a20G\u300120G\u30012500G/2.5TB) [ root@localhost ~ ] # ls /dev | grep sd sda ## -- \u7b2c\u4e00\u5757\u7269\u7406\u78c1\u76d8 sda1 ## -- \u7b2c\u4e00\u5757\u7269\u7406\u78c1\u76d8\u7b2c\u4e00\u5206\u533a sda2 ## -- \u7b2c\u4e00\u5757\u7269\u7406\u78c1\u76d8\u7b2c\u4e8c\u5206\u533a sdb ## -- \u7b2c\u4e8c\u5757\u7269\u7406\u78c1\u76d8 sdc ## -- \u7b2c\u4e09\u5757\u7269\u7406\u78c1\u76d8 sdd ## -- \u7b2c\u56db\u5757\u7269\u7406\u78c1\u76d8 ## Ps: vde4 \u7b2c\u4e94\u5757\u865a\u62df\u78c1\u76d8\u7684\u7b2c\u56db\u5206\u533a ## -- \u67e5\u770b\u78c1\u76d8\u8bbe\u5907\u8be6\u60c5,\u4ee5\u53ca\u5206\u533a\u60c5\u51b5 \"\"\" TYPE disk \u78c1\u76d8 part \u5206\u533a rom \u53ea\u8bfb \"\"\" [ root@localhost ~ ] # lsblk /dev/sda NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8 :0 0 20G 0 disk \u251c\u2500sda1 8 :1 0 1G 0 part /boot \u2514\u2500sda2 8 :2 0 19G 0 part \u251c\u2500centos-root 253 :0 0 17G 0 lvm / \u2514\u2500centos-swap 253 :1 0 2G 0 lvm [ SWAP ] [ root@localhost ~ ] # lsblk /dev/sdb NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8 :16 0 20G 0 disk [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 20G 0 disk [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk \u67d0\u4e2a\u78c1\u76d8\u5212\u5206\u7684\u5206\u533a\u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b: \u4e3b\u5206\u533a/\u5f15\u5bfc\u5206\u533a \u3001 \u6269\u5c55\u5206\u533a -- \u5305\u542b -- \u903b\u8f91\u5206\u533a \u4e3b\u5206\u533a/\u5f15\u5bfc\u5206\u533a: \u5305\u542b\u4e3b\u5f15\u5bfc\u8bb0\u5f55MBR\u7684\u5206\u533a,\u610f\u5473\u7740\u53ef\u4ee5\u5b89\u88c5\u7cfb\u7edf(MBR\u91cc\u6709OS\u7684\u542f\u52a8\u7a0b\u5e8fgrub) Ps: \u76f8\u5173\u77e5\u8bc6\u70b9\u7ffb\u9605 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md \u4e2d \u8ba1\u7b97\u673a\u542f\u52a8\u8fc7\u7a0b \u4ee5\u53ca 1_linux\u57fa\u7840/0_\u51c6\u5907\u5de5\u4f5c.md Linux\u542f\u52a8\u6d41\u7a0b \u8fd9\u4e24\u90e8\u5206\u5185\u5bb9... \u5e38\u89c1\u7684\u78c1\u76d8\u5206\u533a\u65b9\u6848\u6709\u4e24\u79cd: MBR\u5206\u533a\u8868\u548cGUID\u5206\u533a\u8868(\u7b80\u79f0GPT) MBR -- \u6700\u591a\u80fd\u8bc6\u522b 2TB \u7684\u5bb9\u91cf ; \u6700\u591a\u53ea\u80fd\u652f\u63014\u4e2a\u4e3b\u5206\u533a or 3\u4e2a\u4e3b\u5206\u533a+1\u4e2a\u6269\u5c55\u5206\u533a(\u903b\u8f91\u5206\u533a\u4e0d\u9650\u5236) GPT -- \u652f\u6301\u7684\u78c1\u76d8\u5bb9\u91cf\u6bd4 MBR \u5927\u5f97\u591a,\u6700\u591a\u652f\u6301128\u4e2a\u4e3b\u5206\u533a \u6211\u4eec\u62ff\u5230\u4e00\u5757\u6ca1\u6709\u5206\u533a\u7684\u65b0\u786c\u76d8, \u9996\u5148\u5c06\u786c\u76d8\u5212\u5206\u51fan\u4e2a\u4e3b\u5206\u533a(MBR\u65b9\u6848\u901a\u5e38\u662f3\u4e2a), \u518d\u5c06\u786c\u76d8\u5269\u4f59\u7a7a\u95f4\u7ed9\u6269\u5c55\u5206\u533a, \u7136\u540e\u5c06\u6269\u5c55\u5206\u533a\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u903b\u8f91\u5206\u533a,\u5177\u4f53\u7684\u7ec6\u8282\u64cd\u4f5c\u540e\u6587\u4f1a\u8be6\u7ec6\u9610\u8ff0.. \u78c1\u76d8\u5206\u533a\u7684\u5de5\u5177 fdisk \u5de5\u5177 -- MBR gdisk \u5de5\u5177 -- GPT \u78c1\u76d8\u5bb9\u91cf\u5c0f\u4e8e2TB\u7684\u901a\u5e38\u7528MBR, GPT\u5f53\u7136\u4e5f\u53ef\u4ee5,\u4f46\u5b58\u7740\u6548\u7387\u7684\u95ee\u9898... MBR\u8fdb\u884c\u5206\u533a \u00b6 fdisk /dev/sdb m \u67e5\u770b\u5e2e\u52a9 q \u9000\u51fa, \u672aw\u4fdd\u5b58\u7684\u5206\u533a\u4fe1\u606f\u4e0d\u4f1a\u5199\u5165\u78c1\u76d8,\u4e0d\u4f1a\u751f\u6548 n \u65b0\u5efa\u5206\u533a(p \u4e3b\u5206\u533a;e \u6269\u5c55\u5206\u533a) d \u5220\u9664\u5206\u533a p \u67e5\u770b\u78c1\u76d8\u5df2\u5212\u5206\u5206\u533a\u7684\u4fe1\u606f w \u4fdd\u5b58 \u2605 \u521b\u5efa3\u4e2a\u5927\u5c0f\u4e3a1G\u7684\u4e3b\u5206\u533a,\u5269\u4f59\u5bb9\u91cf\u7ed9\u6269\u5c55\u5206\u533a,\u6269\u5c55\u5206\u533a\u91cc\u5212\u5206\u51fa\u4e86\u4e24\u4e2a\u903b\u8f91\u5206\u533a,\u4e00\u4e2a\u4e3a2G,\u53e6\u4e00\u4e2a\u4e3a3G.. \u4e2d\u9014\u8fd8\u9a8c\u8bc1\u4e86,MBR\u7684\u65b9\u6848\u65b0\u5efa\u56db\u4e2a\u4e3b\u5206\u533a\u540e,\u4e0d\u80fd\u518d\u65b0\u5efa\u4efb\u4f55\u5206\u533a.. [ root@localhost ~ ] # fdisk /dev/sdb \u6b22\u8fce\u4f7f\u7528 fdisk ( util-linux 2 .23.2 ) \u3002 ... ... ... \"\"\" -- \u65b0\u5efa\u7b2c\u4e00\u4e2a\u4e3b\u5206\u533a\u5206\u533a(1G) -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n ## -- \u65b0\u5efa\u5206\u533a Partition type: p primary ( 0 primary, 0 extended, 4 free ) ## -- \u4e3b\u5206\u533a e extended ## -- \u6269\u5c55\u5206\u533a Select ( default p ) : p ## -- \u9009\u62e9\u65b0\u5efa\u4e3b\u5206\u533a \u5206\u533a\u53f7 ( 1 -4\uff0c\u9ed8\u8ba4 1 ) : ## -- \u56de\u8f66,\u4f7f\u7528\u9ed8\u8ba4\u7684 ## -- \u4e0a\u4e00\u4e2a\u5206\u533a\u7684\u7ed3\u675f\u5e94\u8be5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u5206\u533a\u7684\u542f\u59cb \u8d77\u59cb \u6247\u533a ( 2048 -41943039,\u9ed8\u8ba4\u4e3a 2048 ) : ## -- \u56de\u8f66,\u542f\u59cb\u4f4d\u7f6e\u4e0d\u6307\u5b9a\u4f7f\u7528\u9ed8\u8ba4\u7684 \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 2048 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 2048 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G ## -- 1GB\u5927\u5c0f \u5206\u533a 1 \u5df2\u8bbe\u7f6e\u4e3a Linux \u7c7b\u578b,\u5927\u5c0f\u8bbe\u4e3a 1 GiB \"\"\" -- \u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4,\u65b0\u5efa\u7b2c\u4e8c\u4e2a\u7b2c\u4e09\u4e2a\u7b2c\u56db\u4e2a\u5927\u5c0f\u90fd\u4e3a1G\u7684\u4e3b\u5206\u533a -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n Select ( default p ) : p \u5206\u533a\u53f7 ( 2 -4,\u9ed8\u8ba4 2 ) : \u8d77\u59cb \u6247\u533a ( 2099200 -41943039,\u9ed8\u8ba4\u4e3a 2099200 ) : Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 2099200 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n Select ( default p ) : p \u5206\u533a\u53f7 ( 3 ,4\uff0c\u9ed8\u8ba4 3 ) : \u8d77\u59cb \u6247\u533a ( 4196352 -41943039,\u9ed8\u8ba4\u4e3a 4196352 ) : Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 4196352 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n Select ( default e ) : p ## -- \u5efa\u7b2c4\u4e2a\u5206\u533a\u7684\u65f6\u5019,fdisk\u5de5\u5177\u5df2\u7ecf\u5f00\u59cb\u63d0\u793a,\"default e,\u8be5\u5efa\u6269\u5c55\u5206\u533a\u5566\" ## -- \u5f53\u7136,\u53ef\u4ee5\u4e0d\u542c,\u6267\u610f\u521b\u5efa\u4e3b\u5206\u533a \u5df2\u9009\u62e9\u5206\u533a 4 ## -- \u53ef\u4ee5\u53d1\u73b0,\u56e0\u4e3a\u53ea\u5269\u4e00\u4e2a\u5206\u533a\u4e86,\u5c31\u4e0d\u8ba9\u4f60\u9009\u62e9\u5206\u533a\u53f7\u5566 \u8d77\u59cb \u6247\u533a ( 6293504 -41943039, \u9ed8\u8ba4\u4e3a 6293504 ) : Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 6293504 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G \"\"\" -- \u6211\u4eec\u5df2\u7ecf\u521b\u5efa\u4e864\u4e2a\u4e3b\u5206\u533a(\u5927\u5c0f\u90fd\u4e3a1G),\u54ea\u6015\u8fd8\u526916G,\u7a7a\u95f4\u591f\u7528\u4e5f\u4e0d\u80fd\u7ee7\u7eed\u65b0\u5efa\u5206\u533a\u5566 -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n ## -- \u5982\u679c\u8981\u521b\u5efa\u56db\u4e2a\u4ee5\u4e0a\u7684\u5206\u533a,\u5fc5\u987b\u66ff\u6362\u4e00\u4e2a\u4e3b\u5206\u533a\u4f18\u5148\u4f7f\u7528\u6269\u5c55\u5206\u533a!! If you want to create more than four partitions, you must replace a primary partition with an extended partition first. \"\"\" -- \u5220\u9664\u7b2c4\u4e2a\u5206\u533a -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : d \u5206\u533a\u53f7 ( 1 -4\uff0c\u9ed8\u8ba4 4 ) : 4 \u5206\u533a 4 \u5df2\u5220\u9664 \"\"\" -- \u521b\u5efa\u7b2c4\u4e2a\u5206\u533a\u4e3a\u6269\u5c55\u5206\u533a,\u78c1\u76d8\u5269\u4f59\u7684\u7a7a\u95f4\u90fd\u7ed9\u5b83 -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) \uff1an Partition type: p primary ( 3 primary, 0 extended, 1 free ) e extended Select ( default e ) : e \u5df2\u9009\u62e9\u5206\u533a 4 \u8d77\u59cb \u6247\u533a ( 6293504 -41943039\uff0c\u9ed8\u8ba4\u4e3a 6293504 ) : \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 6293504 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 6293504 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) : ## -- \u7a7a\u683c,\u9ed8\u8ba4\u5269\u4e0b\u7684\u90fd\u7ed9 \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 41943039 \u5206\u533a 4 \u5df2\u8bbe\u7f6e\u4e3a Extended \u7c7b\u578b, \u5927\u5c0f\u8bbe\u4e3a 17 GiB \"\"\" -- \u67e5\u770b\u78c1\u76d8\u5df2\u5212\u5206\u5206\u533a\u7684\u4fe1\u606f -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : p \u78c1\u76d8 /dev/sdb\uff1a21.5 GB, 21474836480 \u5b57\u8282\uff0c41943040 \u4e2a\u6247\u533a Units = \u6247\u533a of 1 * 512 = 512 bytes \u6247\u533a\u5927\u5c0f ( \u903b\u8f91/\u7269\u7406 ) : 512 \u5b57\u8282 / 512 \u5b57\u8282 I/O \u5927\u5c0f ( \u6700\u5c0f/\u6700\u4f73 ) : 512 \u5b57\u8282 / 512 \u5b57\u8282 \u78c1\u76d8\u6807\u7b7e\u7c7b\u578b: dos \u78c1\u76d8\u6807\u8bc6\u7b26: 0x651efb78 ## -- \u53ef\u4ee5\u89c2\u5bdf\u5230,\u6bcf\u4e2a\u5206\u533a\u90fd\u662f\u7d27\u6328\u7740\u7684 2099199-2099200 4196351-4196352 6293503-6293504 \u8bbe\u5907 Boot Start End Blocks Id System /dev/sdb1 2048 2099199 1048576 83 Linux /dev/sdb2 2099200 4196351 1048576 83 Linux /dev/sdb3 4196352 6293503 1048576 83 Linux /dev/sdb4 6293504 41943039 17824768 5 Extended \"\"\" -- \u5df2\u7ecf\u5212\u5206\u4e86\u56db\u4e2a\u4e3b\u5206\u533a,\u63a5\u7740\u65b0\u5efa\u7684\u5206\u533a\u662f\u5728\u6269\u5c55\u5206\u533a\u91cc\u5212\u5206\u7684\u903b\u8f91\u5206\u533a \u65b0\u5efa\u4e24\u4e2a\u903b\u8f91\u5206\u533a(2G\u548c3G) -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n All primary partitions are in use \u6dfb\u52a0\u903b\u8f91\u5206\u533a 5 ## -- \u53ef\u4ee5\u89c2\u5bdf\u5230\u903b\u8f91\u5206\u533a\u9ed8\u8ba4\u7684\u542f\u59cb 6295552 \u63a5\u8fd1\u4e8e/dev/sdb4\u8fd9\u4e00\u6269\u5c55\u5206\u533a\u7684\u542f\u59cb 6293504 ## -- \u6ca1\u6709\u7d27\u8d34,\u7a7a\u51fa\u6765\u7684\u90a3\u90e8\u5206\u7a7a\u95f4\u8bb0\u5f55\u7684\u5c31\u662f\u6269\u5c55\u5206\u533a\u91cc\u903b\u8f91\u5206\u533a\u7684\u4fe1\u606f \u8d77\u59cb \u6247\u533a ( 6295552 -41943039\uff0c\u9ed8\u8ba4\u4e3a 6295552 ) : ## -- \u540c\u6837\u7684\u4e0d\u6307\u5b9a\u542f\u59cb\u4f4d\u7f6e \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 6295552 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 6295552 -41943039,\u9ed8\u8ba4\u4e3a 41943039 ) : +2G \u5206\u533a 5 \u5df2\u8bbe\u7f6e\u4e3a Linux \u7c7b\u578b,\u5927\u5c0f\u8bbe\u4e3a 2 GiB \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n All primary partitions are in use \u6dfb\u52a0\u903b\u8f91\u5206\u533a 6 \u8d77\u59cb \u6247\u533a ( 10491904 -41943039,\u9ed8\u8ba4\u4e3a 10491904 ) \uff1a \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 10491904 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 10491904 -41943039,\u9ed8\u8ba4\u4e3a 41943039 ) : +3G \u5206\u533a 6 \u5df2\u8bbe\u7f6e\u4e3a Linux \u7c7b\u578b,\u5927\u5c0f\u8bbe\u4e3a 3 GiB \"\"\" -- \u4fdd\u5b58\u9000\u51fa -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : w The partition table has been altered! Calling ioctl () to re-read partition table. \u6b63\u5728\u540c\u6b65\u78c1\u76d8. \u53ef\u4ee5\u67e5\u770b\u4e0b/dev/sdb\u7684\u5206\u533a\u7ed3\u679c partprobe lsblk /dev/sdb ## -- \u6267\u884cpartprobe\u547d\u4ee4\u5237\u65b0\u4e00\u4e0b\u5206\u533a\u8868 \u66f4\u65b0\u5206\u533a\u8868\u4fe1\u606f [ root@localhost ~ ] # partprobe ## -- \u6211\u4eec\u4e3b\u8981\u4f7f\u7528 sdb1\u3001sdb2\u3001sdb3\u3001sdb5\u3001sdb6 [ root@localhost ~ ] # ls /dev/sdb ## -- \u8fde\u7eed\u6309\u4e24\u4e0bTab\u952e!! sdb sdb1 sdb2 sdb3 sdb4 sdb5 sdb6 [ root@localhost ~ ] # lsblk /dev/sdb NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8 :16 0 20G 0 disk \u251c\u2500sdb1 8 :17 0 1G 0 part \u251c\u2500sdb2 8 :18 0 1G 0 part \u251c\u2500sdb3 8 :19 0 1G 0 part \u251c\u2500sdb4 8 :20 0 1K 0 part \u251c\u2500sdb5 8 :21 0 2G 0 part \u2514\u2500sdb6 8 :22 0 3G 0 part GPT\u8fdb\u884c\u5206\u533a \u00b6 /dev/sdd \u78c1\u76d8\u7684\u7a7a\u95f4\u5927\u5c0f\u4e3a2.5T [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk n \u65b0\u5efa\u5206\u533a(\u5efa\u7684\u6bcf\u4e2a\u5206\u533a\u90fd\u662f\u4e3b\u5206\u533a) p \u67e5\u770b\u5df2\u5efa\u5206\u533a\u7684\u4fe1\u606f d \u5220\u9664 w \u4fdd\u5b58 q \u9000\u51fa [ root@localhost ~ ] # gdisk /dev/sdd Command ( ? for help ) : n Partition number ( 1 -128, default 1 ) : First sector ( 34 -5242879966, default = 2048 ) or { +- } size { KMGTP } : Last sector ( 2048 -5242879966, default = 5242879966 ) or { +- } size { KMGTP } : +1G Current type is 'Linux filesystem' ## - \u5f53\u524d\u7c7b\u578b\u662f\u201cLinux \u6587\u4ef6\u7cfb\u7edf\u201d Hex code or GUID ( L to show codes, Enter = 8300 ) : ## - \u901a\u8fc7L\u67e5\u770b8300\u6307\u7684\u5c31\u662f\u201cLinux \u6587\u4ef6\u7cfb\u7edf\u201d ## - Linux\u6587\u4ef6\u7cfb\u7edf\u5305\u542bxfs,\u4e5f\u5c31\u662f\u8be5\u5206\u533a\u53ef\u4ee5\u9009\u62e9xfs\u683c\u5f0f\u5316 Changed type of partition to 'Linux filesystem' Partition number ( 2 -128, default 2 ) : Last sector ( 2099200 -5242879966, default = 5242879966 ) or { +- } size { KMGTP } : +1G Command ( ? for help ) : p Disk /dev/sdd: 5242880000 sectors, 2 .4 TiB ... ... ... Number Start ( sector ) End ( sector ) Size Code Name 1 2048 2099199 1024 .0 MiB 8300 Linux filesystem 2 2099200 4196351 1024 .0 MiB 8300 Linux filesystem Command ( ? for help ) : w Do you want to proceed? ( Y/N ) : y OK ; writing new GUID partition table ( GPT ) to /dev/sdd. The operation has completed successfully. \u67e5\u770bsdd\u5206\u533a\u7684\u60c5\u51b5 [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk \u251c\u2500sdd1 8 :49 0 1G 0 part \u2514\u2500sdd2 8 :50 0 1G 0 part \u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf\u4e0e\u6302\u8f7d \u00b6 \u78c1\u76d8\u5bb9\u91cf\u5c0f\u4e8e2T\u7684\u7528MBR\u8fdb\u884c\u5206\u533a,\u5bb9\u91cf\u5927\u4e8e2T\u7684\u7528GPT\u8fdb\u884c\u5206\u533a.. \u5f80\u540e\u7684\u64cd\u4f5c\u5c31\u4e00\u6837\u5566, \u5206\u5b8c\u533a\u540e\u9009\u62e9xfs\u5bf9\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316...\u7136\u540e\u8fdb\u884c\u6302\u8f7d.. \u683c\u5f0f\u5316/\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf \u00b6 ## -- \u6ce8\u610f: \u683c\u5f0f\u5316\u540e,\u5206\u533a\u91cc\u9762\u7684\u6570\u636e\u90fd\u6ca1\u4e86 mkfs.xfs /dev/sdb1 # -- \u683c\u5f0f\u5316sdb1\u5206\u533a mkfs.xfs /dev/sdb2 # -- \u683c\u5f0f\u5316sdb2\u5206\u533a mkfs.xfs /dev/sdb3 # -- \u683c\u5f0f\u5316sdb3\u5206\u533a mkfs.xfs /dev/sdb5 # -- \u683c\u5f0f\u5316sdb5\u5206\u533a mkfs.xfs /dev/sdb6 # -- \u683c\u5f0f\u5316sdb6\u5206\u533a mkfs.xfs /dev/sdd1 # -- sdd1\u5206\u533a ## -- \u8bd5\u7740\u5bf9/dev/sdb4\u8fd9\u4e00\u6269\u5c55\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316,\u63d0\u793asdb4\u91cc\u5305\u542b\u5206\u533a\u8868(\u6307\u7684\u5c31\u662fsdb5\u3001sdb6\u4e24\u4e2a\u903b\u8f91\u5206\u533a) ## -- \u53ef\u4ee5\u52a0\u4e0a-f\u9009\u9879,\u5f3a\u5236\u683c\u5f0f\u5316,\u4f46\u901a\u5e38\u4e0d\u4f1a\u8fd9\u4e48\u505a [ root@localhost ~ ] # mkfs.xfs /dev/sdb4 mkfs.xfs: /dev/sdb4 appears to contain a partition table ( dos ) . mkfs.xfs: Use the -f option to force overwrite. \u78c1\u76d8\u53ef\u4ee5\u4e0d\u5206\u533a,\u76f4\u63a5\u683c\u5f0f\u5316\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf,\u76f8\u5f53\u4e8e\u6574\u4e2a\u76d8\u662f\u4e00\u4e2a\u5206\u533a!!\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a.. \u4e34\u65f6\u6302\u8f7d \u00b6 mount -t \u6e90 \u6302\u8f7d\u70b9 mount -a \u53ef\u4ee5\u4e0d\u91cd\u542f\u670d\u52a1\u5668, \u8ba9 /etc/fstab \u4e2d\u7684\u6c38\u4e45\u6302\u8f7d\u914d\u7f6e\u751f\u6548! mkdir /a mkdir /b mkdir /c mkdir /d mkdir /e mount /dev/sdb1 /a mount /dev/sdb2 /b mount /dev/sdb3 /c mount /dev/sdb5 /d mount /dev/sdb6 /e [ root@localhost ~ ] # df | grep sdb ## \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 /dev/sdb1 1038336 32992 1005344 4 % /a /dev/sdb2 1038336 32992 1005344 4 % /b /dev/sdb3 1038336 32992 1005344 4 % /c /dev/sdb5 2086912 32992 2053920 2 % /d /dev/sdb6 3135488 32992 3102496 2 % /e \u5378\u8f7d \u00b6 ## -- umount /dev/sdb1 \u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\u6216\u6302\u8f7d\u70b9\u90fd\u80fd\u8fbe\u5230\u9884\u671f\u7684\u6548\u679c umount /a /b /c /d /e # -- \u5378\u8f7d\u591a\u4e2a \"\"\" \u82e5\u6b63\u5904\u4e8e\u67d0\u4e2a\u5206\u533a\u4e0b,umount\u5378\u8f7d\u8be5\u5206\u533a,\u4f1a\u63d0\u793a\u76ee\u6807\u5fd9 \u89e3\u51b3\u65b9\u6848\u4e00: cd \u5230\u5176\u4ed6\u5206\u533a\u4e0b \u89e3\u51b3\u65b9\u6848\u4e8c: umount -l /a # -- \u52a0\u4e0al\u9009\u9879,\u5f3a\u5236\u5378\u8f7d \"\"\" \u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219 \u00b6 \u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219 \u540c\u4e00\u4e2a\u5206\u533a\u53ef\u4ee5\u6709\u591a\u4e2a\u6302\u8f7d\u70b9 \u5224\u65ad\u6587\u4ef6\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u5206\u533a,\u9700\u8981\u4ece\u53f3\u5230\u5de6\u8fdb\u884c\u5206\u6790.. \u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219 : \u6587\u4ef6\u79bb\u54ea\u4e2a\u6302\u8f7d\u70b9\u6700\u8fd1, \u5c31\u4f1a\u5b58\u50a8\u5230\u6700\u8fd1\u7684\u6302\u8f7d\u70b9\u6240\u5728\u7684\u5206\u533a\u91cc.. \u6253\u4e2a\u6bd4\u65b9, \u5728\u6302\u8f7d\u70b9\u662f\u4e2a\u6c34\u9f99\u5934, \u6c34\u4ece\u54ea\u91cc\u6765\uff1f\u6302\u8f7d\u70b9\u4ece\u6240\u5bf9\u5e94\u7684\u67d0\u4e2a\u5206\u533a\u4e2d\u53d6\u6c34!!! mkdir /opt/a ## -- opt\u76ee\u5f55\u5728\u6839\u5206\u533a/\u91cc;\u6839\u5206\u533a\u4e0b\u521b\u5efa\u7684a\u76ee\u5f55\u4e5f\u5728\u6839\u5206\u533a\u91cc mount /dev/sdb1 /opt/a ## -- /opt/a\u6210\u4e3a\u4e86sdb1\u5206\u533a\u7684\u6302\u8f7d\u70b9 mkdir /opt/a/b ## -- \u5728/opt/a\u6302\u8f7d\u70b9\u4e0b\u521b\u5efa\u7684b\u76ee\u5f55\u5b58\u50a8\u5728sdb1\u5206\u533a\u91cc mount /dev/sdb2 /opt/a/b ## -- /opt/a/b\u6210\u4e3a\u4e86sdb2\u5206\u533a\u7684\u6302\u8f7d\u70b9 touch /opt/a/b/1.txt ## -- \u5728/opt/a/b\u6302\u8f7d\u70b9\u4e0b\u521b\u5efa\u76841.txt\u6587\u4ef6\u5b58\u50a8\u5728sdb2\u5206\u533a\u91cc \"\"\"\u5230\u6b64\u4e3a\u6b62,\u95ee\u8fd9\u51e0\u4e2a\u5206\u533a\u4e0b\u5206\u522b\u5b58\u50a8\u4e86\u4ec0\u4e48\uff1f \u53ef\u4ee5\u53cd\u5411\u9a8c\u8bc1**\u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219**\uff01\uff01\uff01 \u6839\u5206\u533a opt\u3001a sdb1\u5206\u533a b sdb2\u5206\u533a 1.txt \u2605 /opt/a/b/1.txt \u53cd\u5411\u9a8c\u8bc1\u5206\u6790: 1.txt\u79bb/opt/a/b\u6302\u8f7d\u70b9\u6700\u8fd1; b\u79bb/opt/a\u6302\u8f7d\u70b9\u6700\u8fd1 \u7b80\u5355\u7c97\u66b4,\u5378\u8f7d\u4e86\u54ea\u4e2a\u5206\u533a,\u90a3\u4e2a\u5206\u533a\u91cc\u7684\u5185\u5bb9\u5c31\u4e0d\u4f1a\u663e\u793a.. \u4f46\u9996\u5148\u4f60\u8981\u80fd\u5378\u8f7d\u7684\u4e86,\u6bd4\u5982\u8fd9\u91cc\u76f4\u63a5umount /opt/a\u5378\u8f7dsdb1\u5206\u533a\u662f\u5931\u8d25\u7684!!\u8981\u5148\u5378\u8f7dsdb2\u5206\u533a.. \"\"\" [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 1 .txt 2 directories, 1 file [ root@localhost opt ] # echo 111 > /opt/a/b/1.txt [ root@localhost opt ] # cat /opt/a/b/1.txt 111 [ root@localhost opt ] # df | grep sdb | grep -v grep /dev/sdb1 1038336 32992 1005344 4 % /opt/a /dev/sdb2 1038336 32996 1005340 4 % /opt/a/b \"\"\"sdb2\u5206\u533a\u9690\u5c45\u5c71\u6797,\u4e3a\u4f551.txt\u6587\u4ef6\u795e\u79d8\u6d88\u5931\uff1f \u56e0\u4e3a1.txt\u6587\u4ef6\u662f\u5b58\u50a8\u5728sdb2\u5206\u533a\u91cc\u7684!!sdb2\u5206\u533a\u672a\u6302\u8f7d\u5c31\u8bfb\u53d6\u4e0d\u4e86\u91cc\u9762\u7684\u5185\u5bb9. \"\"\" [ root@localhost opt ] # umount /opt/a/b [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b 2 directories, 0 files \"\"\"\u8d81\u4e71\u5728/opt/a/b\u4e0b\u521b\u5efa\u76842.txt\u6587\u4ef6,\u6839\u636e\u4ece\u53f3\u5230\u5de6\u6700\u8fd1\u539f\u5219,\u662f\u5b58\u50a8\u5728\u6302\u8f7d\u70b9/opt/a\u6240\u5bf9\u5e94\u7684sdb1\u5206\u533a\u91cc!! \"\"\" [ root@localhost opt ] # echo 222 > /opt/a/b/2.txt [ root@localhost opt ] # cat /opt/a/b/2.txt 222 [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 2 .txt 2 directories, 1 file \"\"\"\u91cd\u65b0\u8ba9/opt/a/b\u6210\u4e3asdb2\u5206\u533a\u7684\u6302\u8f7d\u70b9,2.txt\u6587\u4ef6\u6d88\u5931,1.txt\u6587\u4ef6\u91cd\u89c1\u6c5f\u6e56! \u56e0\u4e3a/opt/a/b\u6302\u8f7d\u70b9\u4f1a\u4ecesdb2\u5206\u533a\u91cc\u53d6\u6c34,sdb2\u5206\u533a\u91cc\u53ea\u67091.txt,\u53ef\u6ca1\u67092.txt \"\"\" [ root@localhost opt ] # mount /dev/sdb2 /opt/a/b [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 1 .txt 2 directories, 1 file \"\"\"\u5f00\u59cb\u4f5c\u5996,/test\u548c/opt/a/b\u90fd\u4f5c\u4e3asdb2\u5206\u533a\u7684\u6302\u8f7d\u70b9!! \u6240\u4ee5\u795e\u5947\u7684\u53d1\u73b0,\u65b0\u5efa\u7684test\u76ee\u5f55\u4e0b\u4e5f\u51fa\u73b0\u4e861.txt\u6587\u4ef6!! \u8fdb\u4e00\u6b65\u9a8c\u8bc1\u4e86,\u6302\u8f7d\u70b9\u4f1a\u4ece\u6240\u5bf9\u5e94\u7684\u5206\u533a\u91cc\u53d6\u6c34!! \u9700\u8981\u6ce8\u610f\u7684\u662f:\u4e0d\u7ba1\u662f\u6539\u53d8/test\u8fd8\u662f/opt/a/b\u4e0b\u76841.txt\u6587\u4ef6,\u5b9e\u5219\u4e0a\u90fd\u662f\u66f4\u6539sdb2\u5206\u533a\u91cc\u5b58\u50a8\u76841.txt!!! /test/1.txt\u548c/opt/a/b/1.txt\u4f1a\u540c\u65f6\u6539\u53d8!!! \"\"\" [ root@localhost opt ] # cd [ root@localhost ~ ] # mkdir /test [ root@localhost ~ ] # mount /dev/sdb2 /test [ root@localhost ~ ] # tree /test /test \u2514\u2500\u2500 1 .txt 0 directories, 1 file [ root@localhost ~ ] # mount | grep /dev/sdb2 ## -- df\u53ef\u80fd\u4e0d\u4f1a\u663e\u793a\u5168,\u4f46mount\u547d\u4ee4\u663e\u793a\u7684\u80af\u5b9a\u662f\u5168\u7684!!! /dev/sdb2 on /opt/a/b type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb2 on /test type xfs ( rw,relatime,attr2,inode64,noquota ) \"\"\"\u5c0f\u5c0f\u9a8c\u8bc1\u4e0b,b\u76ee\u5f55\u548c2.txt\u90fd\u662f\u5b58\u50a8\u5728/opt/a\u5bf9\u5e94\u7684sdb1\u5206\u533a\u91cc sdb1\u5206\u533a\u9000\u9690\u6c5f\u6e56,b\u76ee\u5f55\u548c2.txt\u90fd\u4f1a\u6d88\u5931!!! \"\"\" [ root@localhost ~ ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 1 .txt 2 directories, 1 file ## -- \u7279\u522b\u6ce8\u610f\u8fd9\u91cc,\u76f4\u63a5umount /opt/a\u662f\u5931\u8d25\u7684!! [ root@localhost ~ ] # umount /opt/a umount: /opt/a\uff1a\u76ee\u6807\u5fd9\u3002 ( \u6709\u4e9b\u60c5\u51b5\u4e0b\u901a\u8fc7 lsof ( 8 ) \u6216 fuser ( 1 ) \u53ef\u4ee5 \u627e\u5230\u6709\u5173\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u8fdb\u7a0b\u7684\u6709\u7528\u4fe1\u606f ) [ root@localhost ~ ] # umount /opt/a/b [ root@localhost ~ ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 2 .txt 2 directories, 1 file [ root@localhost ~ ] # umount /opt/a [ root@localhost ~ ] # tree /opt /opt \u2514\u2500\u2500 a \u6c38\u4e45\u6302\u8f7d \u00b6 \u4e0a\u9762\u64cd\u4f5c\u7684\u6302\u8f7d\u90fd\u662f\u4e34\u65f6\u6302\u8f7d, reboot \u547d\u4ee4\u91cd\u542f\u670d\u52a1\u5668\u540e, \u6302\u8f7d\u4f1a\u5931\u6548!!! \u800clinux\u4e2d\u6709\u4e9b\u6302\u8f7d\u5c31\u662f\u6c38\u4e45\u7684,\u5982\u4f55\u505a\u5230\u7684\u5462\uff1f /etc/fstab \u6587\u4ef6 \u8981\u6302\u8f7d\u7684\u8bbe\u5907 \u6302\u8f7d\u70b9(\u5165\u53e3) \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b \u6302\u8f7d\u53c2\u6570 \u662f\u5426\u5907\u4efd \u662f\u5426\u68c0\u67e5 UUID \u6302\u8f7d\u70b9\u8def\u5f84 eg: xfs defaults 0 0 Ps: \u901a\u5e38\u662fdefaults 0 0, \u5177\u4f53\u7684\u9009\u9879\u914d\u7f6e\u8be6\u89c1 https://zhuanlan.zhihu.com/p/337009754 ## -- \u67e5\u770blinux\u4e2d\u6c38\u4e45\u6302\u8f7d\u7684\u4fe1\u606f [ root@localhost ~ ] # cat /etc/fstab /dev/mapper/centos-root / xfs defaults 0 0 UUID = 7edef40b-555b-485b-a94c-4b345143b5d5 /boot xfs defaults 0 0 /dev/mapper/centos-swap swap swap defaults 0 0 ## -- \u67e5\u770b\u6bcf\u4e2a\u78c1\u76d8\u7684UUID [ root@localhost ~ ] # blkid /dev/sdb1: UUID = \"057edccc-4db0-4688-bb18-5e2d5e681c5e\" TYPE = \"xfs\" /dev/sdb2: UUID = \"41a7d6a4-b8b6-489a-892a-2e2c1e7d295e\" TYPE = \"xfs\" /dev/sdb3: UUID = \"db12f68f-9ea0-4b7a-a927-47d8345dedd3\" TYPE = \"xfs\" /dev/sdb5: UUID = \"29301422-0035-417c-bfd0-8d244ce59e0c\" TYPE = \"xfs\" /dev/sdb6: UUID = \"73122250-bd11-4ca2-8c84-0a2e412ef708\" TYPE = \"xfs\" /dev/sda1: UUID = \"7edef40b-555b-485b-a94c-4b345143b5d5\" TYPE = \"xfs\" /dev/sda2: UUID = \"jG51ec-dKTo-gsGv-o7wf-2wXp-Irc8-FYrzXT\" TYPE = \"LVM2_member\" /dev/mapper/centos-root: UUID = \"dc8ff591-4043-4c29-82bd-cdc39a0d48fb\" TYPE = \"xfs\" /dev/mapper/centos-swap: UUID = \"9a6222cd-5632-4215-acbc-94a9b22ddd6e\" TYPE = \"swap\" ## -- \u7f16\u8f91/etc/fstab \u5c06sdb1\u548csdb2\u8fdb\u884c\u6302\u8f7d \u901a\u5e38\u4f7f\u7528UUID,\u4f7f\u7528\u5206\u533a\u540d\u79f0(\u4e0d\u5efa\u8bae)\u4e5f\u53ef\u4ee5 [ root@localhost ~ ] # mkdir /root/test1 [ root@localhost ~ ] # mkdir /root/test2 [ root@localhost ~ ] # tail -2 /etc/fstab UUID = 057edccc-4db0-4688-bb18-5e2d5e681c5e /root/test1 xfs defaults 0 0 /dev/sdb2 /root/test2 xfs defaults 0 0 ## -- reboot\u91cd\u542f\u670d\u52a1\u5668\u540e\u6c38\u4e45\u6302\u8f7d\u751f\u6548 [ root@localhost ~ ] # reboot ## -- \u68c0\u67e5\u662f\u5426\u6c38\u4e45\u6302\u8f7d\u6210\u529f [ root@localhost ~ ] # mount | grep sdb /dev/sdb1 on /root/test1 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb2 on /root/test2 type xfs ( rw,relatime,attr2,inode64,noquota ) ## -- \u4e0d\u91cd\u542f\u670d\u52a1\u5668,\u4f7f\u7528mount -a\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u5b9e\u73b0\u81ea\u52a8\u6302\u8f7d [ root@localhost ~ ] # sed -i '$a /dev/sdb3 /opt xfs defaults 0 0' /etc/fstab [ root@localhost ~ ] # mount -a [ root@localhost ~ ] # mount | grep sdb /dev/sdb1 on /root/test1 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb2 on /root/test2 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb3 on /opt type xfs ( rw,relatime,attr2,inode64,noquota ) \u5236\u4f5cswap\u4ea4\u6362\u5206\u533a \u00b6 \u67e5\u770bswap\u5206\u533a\u7684\u5927\u5c0f,\u5f53\u524d\u662f2\u4e2aG,\u51c6\u5907\u7ed9\u5b83\u52a01\u4e2aG.. \u6b65\u9aa4: \u65b0\u589e\u5206\u533a -- mkswap\u5236\u4f5cswap\u6587\u4ef6\u7cfb\u7edf -- \u6fc0\u6d3b\u5206\u533a -- \u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u65b0\u589e\u7684swap\u5206\u533a swapon /dev/sdd3 swapon -s swapoff /dev/sdd3 swapoff -a [ root@localhost ~ ] # free -m total used free shared buff/cache available Mem: 972 621 61 9 289 190 Swap: 2047 4 2043 \"\"\" -- \u4ece\u78c1\u76d8\u4e2d\u5212\u4e2a1G\u7a7a\u95f4\u7684\u5206\u533a sdb\u7684\u903b\u8f91\u5206\u533a sdd\u7684\u4e3b\u5206\u533a\u90fd\u53ef\u4ee5 -- \"\"\" gdisk /dev/sdd partprobe [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk \u251c\u2500sdd1 8 :49 0 1G 0 part \u251c\u2500sdd2 8 :50 0 1G 0 part \u2514\u2500sdd3 8 :51 0 1G 0 part \"\"\" -- \u5236\u4f5cswap\u5206\u533a -- \"\"\" [ root@localhost ~ ] # mkswap /dev/sdd3 \u6b63\u5728\u8bbe\u7f6e\u4ea4\u6362\u7a7a\u95f4\u7248\u672c 1 \uff0c\u5927\u5c0f = 1048572 KiB \u65e0\u6807\u7b7e\uff0cUUID = 37fcc4d0-a581-404a-b13c-45311d09c7fc \"\"\" -- \u6fc0\u6d3b/\u4e34\u65f6\u6302\u8f7d \u521a\u5236\u4f5c\u597d\u7684swap\u5206\u533a -- \"\"\" [ root@localhost ~ ] # swapon /dev/sdd3 [ root@localhost ~ ] # free -m total used free shared buff/cache available Mem: 972 622 70 9 279 189 Swap: 3071 4 3067 [ root@localhost ~ ] # swapon -s \u6587\u4ef6\u540d \u7c7b\u578b \u5927\u5c0f \u5df2\u7528 \u6743\u9650 /dev/sdd3 partition 1048572 4872 -2 /dev/dm-1 partition 2097148 0 -3 ## -- \u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u65b0\u589e\u7684swap\u5206\u533a ## -- \u6700\u597d\u4f7f\u7528UUID [ root@localhost ~ ] # sed -i '$a /dev/sdd3 swap swap defaults 0 0' /etc/fstab \"\"\" \u5b9e\u9a8c\u4e86\u4e0b swapoff /dev/sdd3 \u5173\u95edsdd3\u8fd9\u4e2aswap\u5206\u533a, \u5c3d\u7ba1\u5199\u8fdb\u4e86\u914d\u7f6e\u6587\u4ef6, \u4f46\u4f7f\u7528mount -a\u547d\u4ee4\u4e0d\u4f1a\u91cd\u65b0\u6302\u8f7d\u4e0a\u53bb \u53ef\u4ee5\u4f7f\u7528swapon /dev/sdd3 \u91cd\u65b0\u6fc0\u6d3b/\u4e34\u65f6\u6302\u8f7d \u5f00\u673a\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u6302\u8f7d\u6587\u4ef6\u91cc\u7684swap\u914d\u7f6e \u4e0d\u5c31\u76f8\u5f53\u4e8e\u6c38\u4e45\u6302\u8f7d\u4e86\u561b!!!! \"\"\" Dell R740\u670d\u52a1\u5668\u5236\u4f5cRAID \u00b6 RAID\u7684\u57fa\u7840\u7406\u8bba\u8be6\u89c1 : 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md \u4e2d \u25ce RAID\u6280\u672f \u90e8\u5206\u7684\u5185\u5bb9... Ps: \u63d0\u4e00\u5634,\u5b9e\u4f53\u670d\u52a1\u5668\u9700\u8981\u505aRAID,\u4f46\u5927\u591a\u6570\u4e2d\u5c0f\u578b\u516c\u53f8\u7528\u7684\u963f\u91cc\u4e91(\u63d0\u4f9b\u7684\u662f\u865a\u62df\u673a),\u4e91\u73af\u5883\u4e0d\u9700\u8981\u505aRAID!! \u7b80\u5355\u56de\u987e\u4e0b: \u5728\u751f\u4ea7\u73af\u5883\u4e2d,\u901a\u5e38\u4f1a\u5c06\u591a\u4e2a\u76d8\u5408\u5230\u4e00\u8d77\u505a\u4e00\u4e2aRAID... RAID0: \u4e24\u5757\u76d8\u540c\u65f6\u63d0\u4f9b\u8bfb\u5199\u7684\u529f\u80fd,\u574f\u5176\u4e2d\u4e00\u5757\u5c31\u4e0d\u80fd\u7528\u4e86; RAID1: \u79f0\u4f5c\u5907\u4efd\u76d8/\u955c\u50cf\u76d8, \u4e00\u5757\u8bfb\u5199,\u53e6\u4e00\u5757\u5907\u4efd, \u901a\u5e38\u7cfb\u7edf\u76d8\u505aRAID1; RAID5: \u65e2\u8003\u8651\u4e86\u8bfb\u5199\u901f\u5ea6\u4e5f\u8003\u8651\u4e86\u5197\u4f59.. RAID10: \u571f\u8c6a\u73a9\u6cd5.. \u7ed3\u5408raid0\u548c1\u7684\u4f18\u70b9.. \u5236\u4f5cRAID\u9700\u8981raid\u5361\u8fd9\u4e2a\u8bbe\u5907,\u786c\u76d8\u662f\u63d2\u5728raid\u5361\u4e0a\u7684.. raid\u5361\u5c06\u8fd9\u4e9b\u786c\u76d8\u505a\u6210\u78c1\u76d8\u9635\u5217.. \u5177\u4f53\u8fc7\u7a0b\u53c2\u8003: https://www.cnblogs.com/linhaifeng/articles/13921161.html \u6ce8\u610f\u51e0\u4e2a\u5730\u65b9: 4 .\u5728BIOS\u754c\u9762ctrl+R\u8fdb\u5165\u9635\u5217\u5361,\u4e0d\u540c\u5382\u5546\u5feb\u6377\u952e\u4e0d\u4e00\u6837,\u9700\u8981\u67e5\u4e00\u4e0b ; 6 .\u591a\u5c11\u4e2a\u76d8\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u9009\u62e9 ; ( \u8fd9\u91cc\u9009\u62e9\u7684\u662f\u8981\u64cd\u4f5c\u54ea\u4e9b\u76d8 ) 7 .create New VD # -- VD\u865a\u62df\u78c1\u76d8,\u5373\u591a\u4e2a\u786c\u76d8\u7ec4\u6210\u4e00\u4e2a\u865a\u62df\u5c42\u9762\u7684\u786c\u76d8 8 .\u8fd9\u91cc\u662f\u9009\u62e9\u54ea\u4e9b\u76d8\u505aRAID \u6309ok\u5b8c\u6210 9 .\u53ef\u4ee5\u5c06\u5728\u6b65\u9aa46\u4e2d\u5df2\u7ecf\u9009\u4e2d\u800c\u6ca1\u6709\u505araid\u7684\u786c\u76d8 \u7ee7\u7eed\u505a\u5176\u4ed6raid 11 .\u505a\u7684RAID5\u7684\u8bdd,\u8fd8\u53ef\u4ee5\u6709\u4e00\u5757\u70ed\u5907\u76d8 ( \u5f53RAID5\u4e2d\u4efb\u4e00\u76d8\u574f\u4e86,\u5176\u4f592\u5757\u53ef\u4ee5\u505a\u5947\u5076\u6821\u9a8c\u5c06\u6570\u636e\u6062\u590d\u5230\u683c\u5916\u7684\u70ed\u5907\u76d8\u4e2d ) \u4fee\u590d\u670d\u52a1\u5668\u6587\u4ef6\u7cfb\u7edf \u00b6 \u5c06\u4e00\u5757\u786c\u76d8\u5206\u533a,\u683c\u5f0f\u5316\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf,\u518d\u6302\u8f7d\u4f7f\u7528.. linux\u9488\u5bf9\u5199\u64cd\u4f5c\u4f1a\u5148\u5c06\u6570\u636e\u5728\u5185\u5b58\u7684buffer\u7f13\u51b2\u533a\u4e2d\u6512\u4e00\u6ce2, \u82e5\u5728\u5c06buffer\u4e2d\u7684\u6570\u636e\u5f80\u786c\u76d8\u4e2d\u5199\u7684\u8fc7\u7a0b\u4e2d ,\u7a81\u7136\u65ad\u7535\u91cd\u542f\u540e\u4f1a\u63d0\u793a\u6587\u4ef6\u9519\u8bef: \u201cemergency mode\u201d... \u6a21\u62df\u6587\u4ef6\u7cfb\u7edf\u635f\u574f \u00b6 \"\"\" 1\u3001\u51c6\u5907\u4e00\u4e2a1G\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0e\u6570\u636e \"\"\" fdisk /dev/sdc # -- \u521b\u5efa\u5bb9\u91cf\u5927\u5c0f\u4e3a1G\u7684\u5206\u533a/dev/sdc1 mkfs.xfs /dev/sdc1 # -- \u683c\u5f0f\u5316/dev/sdc1\u5206\u533a mount /dev/sdc1 /mnt/ # -- \u6302\u8f7d\u4f7f\u7528 echo 111 > /mnt/1.txt # -- 1.txt\u5728sdc1\u5206\u533a\u4e2d [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 20G 0 disk \u2514\u2500sdc1 8 :33 0 1G 0 part [ root@localhost ~ ] # mount | grep sdc1 /dev/sdc1 on /mnt type xfs ( rw,relatime,attr2,inode64,noquota ) \"\"\" 2\u3001\u6a21\u62df\u6587\u4ef6\u7cfb\u7edf\u635f\u574f \"\"\" ## -- \u6570\u636e\u5f80\u786c\u76d8\u4e2d\u7684\u6587\u4ef6\u5199\u5165\u7684\u8fc7\u7a0b\u4e2d,\u7a81\u7136\u65ad\u7535.. \u6587\u4ef6\u5c31\u4e0d\u5b8c\u6574\u5566 ## -- \u8fd9\u91cc\u901a\u8fc7dd\u547d\u4ee4\u7528\u51920\u673a\u5f80sdc\u786c\u76d8\u4e2d\u8f93\u5165500M\u7684\u6570\u636e,\u4f1a\u8986\u76d6\u6389\u786c\u76d8\u4e2d\u5206\u533a\u8868\u7684\u4fe1\u606f,\u6574\u4e2a\u7ed3\u6784\u5c31\u4e71\u4e86.. ## -- \u6ce8\u610f\u54e6,\u4e0d\u662fsdc1 \u662fsdc [ root@localhost ~ ] # dd if=/dev/zero of=/dev/sdc bs=500M count=1 \u8bb0\u5f55\u4e861+0 \u7684\u8bfb\u5165 \u8bb0\u5f55\u4e861+0 \u7684\u5199\u51fa 524288000\u5b57\u8282 ( 524 MB ) \u5df2\u590d\u5236\uff0c1.14939 \u79d2\uff0c456 MB/\u79d2 \"\"\" 3\u3001\u5378\u8f7d\u540e\u91cd\u65b0\u6302\u8f7d,\u53d1\u73b0\u65e0\u6cd5\u6302\u8f7d \u6a21\u62df\u65ad\u7535\u540e\u91cd\u542f \"\"\" [ root@localhost ~ ] # umount /mnt [ root@localhost ~ ] # mount /dev/sdc1 /mnt/ mount: /dev/sdc1 \u5199\u4fdd\u62a4,\u5c06\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6302\u8f7d mount: \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u9519\u8bef\u3001\u9009\u9879\u9519\u8bef\u3001/dev/sdc1 \u4e0a\u6709\u574f\u8d85\u7ea7\u5757\u3001 \u7f3a\u5c11\u4ee3\u7801\u9875\u6216\u52a9\u624b\u7a0b\u5e8f\uff0c\u6216\u5176\u4ed6\u9519\u8bef \u6709\u4e9b\u60c5\u51b5\u4e0b\u5728 syslog \u4e2d\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u6709\u7528\u4fe1\u606f- \u8bf7\u5c1d\u8bd5 dmesg | tail \u8fd9\u6837\u7684\u547d\u4ee4\u770b\u770b.. ## -- \u5410\u69fd\u4e00\u4e0b: vm\u865a\u62df\u673a\u4e0a\u8fdb\u884c\u6a21\u62df,\u76f4\u63a5\u628a/dev/sdc1\u5206\u533a\u7ed9\u6211\u5e72\u6ca1\u4e86..\u65e0\u6cd5\u5f00\u5c55\u4fee\u590d\u7684\u5b9e\u9a8c\u4e86.. ## -- \u4fee\u590d\u90e8\u5206\u5c31\u542c\u7406\u8bba\u5427!! [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 20G 0 disk \u6587\u4ef6\u7cfb\u7edf\u635f\u574f\u540e,\u82e5\u4e0d\u80fd\u6210\u529f\u91cd\u542f,\u53ef\u4ee5\u7528\u5355\u7528\u6237\u6a21\u5f0f(\u8fdb\u53bb\u65e0\u6302\u8f7d)\u3001\u5149\u76d8\u4fee\u590d\u6a21\u5f0f\u6765\u7ba1\u7406\u64cd\u4f5c\u672c\u5730\u786c\u76d8\u4e2d\u7684\u4e1c\u897f... \u6587\u4ef6\u7cfb\u7edf\u4fee\u590d \u00b6 \u4f7f\u7528 xfs_repair \u547d\u4ee4\u5f3a\u5236\u4fee\u590d\u540e, \u6570\u636e\u4e22\u5931, \u6240\u4ee5\u6b64\u65f6\u4fee\u590d\u7684\u610f\u4e49\u5728\u4e8e\u53ef\u7528, \u6240\u4ee5\u6570\u636e\u8981\u6709\u5907\u4efd\u610f\u8bc6... xfs_repair /dev/sdc1 # -- \u4fee\u590d\u65f6\u5148\u5c1d\u8bd5\u8fd9\u6761\u547d\u4ee4 xfs_repair -L /dev/sdb1 # -- \u82e5\u4e0a\u4e00\u6761\u547d\u4ee4\u5931\u8d25,\u8fdb\u884c\u5f3a\u5236\u4fee\u590d mount /dev/sdc1 /mnt/ # -- \u91cd\u65b0\u6302\u8f7d \u82e5\u662fext\u6587\u4ef6\u7cfb\u7edf,\u4fee\u590d\u9700\u8981\u7528fsck\u547d\u4ee4 # -y \u5bf9\u6240\u6709\u95ee\u9898\u90fd\u56de\u7b54 \"yes\" # -f \u5373\u4f7f\u6587\u4ef6\u7cfb\u7edf\u6807\u8bb0\u4e3a clean \u4e5f\u5f3a\u5236\u8fdb\u884c\u68c0\u67e5 fsck -f -y /dev/sda1 xfs\u6587\u4ef6\u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d \u00b6 \u5907\u4efd xfsdump \u00b6 \u5168\u91cf\u5907\u4efd + \u589e\u91cf\u5907\u4efd \u7b2c\u4e00\u6b21\u5907\u4efd\u662f\u5168\u91cf\u5907\u4efd,\u589e\u91cf\u5907\u4efd\u662f\u548c\u4e0a\u4e00\u6b21\u7684\u5907\u4efd\u8fdb\u884c\u6bd4\u8f83, \u4ec5\u5907\u4efd\u6709\u5dee\u5f02\u7684\u6587\u4ef6... [ root@localhost ~ ] # rpm -qf `which xfsdump` xfsdump-3.1.7-1.el7.x86_64 [ root@localhost ~ ] # rpm -qf `which xfsrestore` xfsdump-3.1.7-1.el7.x86_64 \u9009\u9879 \u9009\u9879 \u542b\u4e49 -l \u662fL\u7684\u5c0f\u5199, \u6307\u5b9alevel, \u67090~9\u517110\u4e2a\u7b49\u7ea7.\u9ed8\u8ba4\u503c\u4e3a0, \u5373\u5b8c\u5168\u5907\u4efd ; \u6570\u5b571\u81f39\u90fd\u662f\u589e\u91cf\u5907\u4efd!! -L \u6307\u5b9a\u8be5\u6b21\u5907\u4efd\u7684\u6807\u7b7e\u540d. -M \u7b80\u6613\u63cf\u8ff0\u4fe1\u606f, \u5173\u4e8e\u4ec0\u4e48\u4ec0\u4e48\u7684\u5907\u4efd -f \u5907\u4efd\u7684\u6587\u4ef6\u5b58\u653e\u7684\u8def\u5f84 + \u7a7a\u683c + \u9700\u8981\u5907\u4efd\u6587\u4ef6\u7684\u8def\u5f84(\u5907\u4efd\u6e90\u8def\u5f84) \u5207\u8bb0: \u5907\u4efd\u6e90\u8def\u5f84\u540e\u9762\u5343\u4e07\u4e0d\u8981\u52a0/\u659c\u6760 \"\"\" -- \u6570\u636e\u51c6\u5907 -- \"\"\" [ root@localhost ~ ] # mount | grep -E \"sdb3|sda1\" /dev/sdb3 on /opt type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sda1 on /boot type xfs ( rw,relatime,attr2,inode64,noquota ) [ root@localhost ~ ] # cp -r /etc /opt/ [ root@localhost ~ ] # du -sh /opt 43M /opt [ root@localhost ~ ] # echo 111 > /opt/1.txt [ root@localhost ~ ] # ls /opt 1 .txt etc [ root@localhost ~ ] # cat /opt/1.txt 111 \"\"\" -- 1.\u5148\u505a\u5168\u91cf\u5907\u4efd -- \"\"\" ## -- \u5c06sdb3\u5206\u533a\u7684\u5185\u5bb9 \u5907\u4efd\u5230 sda1\u5206\u533a\u4e0b (\u5907\u4efd\u6e90\u4e0e\u5907\u4efd\u6587\u4ef6\u8981\u5206\u522b\u5c5e\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684\u786c\u76d8) [ root@localhost ~ ] # xfsdump -l 0 -L sdb3_bak -M sdb3_bak -f /boot/sdb3_bak_all /opt ... ... ... xfsdump: Dump Status: SUCCESS \"\"\" -- 2.\u505a\u589e\u91cf\u5907\u4efd \u505a\u4e86\u4e24\u6b21\u589e\u91cf\u5907\u4efd-- \"\"\" ## -- \u589e\u5220\u6539\u90fd\u5c5e\u4e8e\u589e\u91cf\u7684\u90e8\u5206 echo 222 >> /opt/1.txt echo 333 > /opt/2.txt # \u901a\u5e38\u4f1a\u5728\u589e\u91cf\u5907\u4efd\u6587\u4ef6\u540d\u4e0a\u52a0\u4e0a\u65f6\u95f4 xfsdump -l 1 -L sdb3_bak -M sdb3_bak -f /boot/sdb3_bak_add1 /opt echo 333333 > /opt/3.txt xfsdump -l 1 -L sdb3_bak -M sdb3_bak -f /boot/sdb3_bak_add2 /opt \"\"\" -- \u67e5\u770b -- \"\"\" # -- \u5907\u4efd\u6e90\u7684\u5927\u5c0f [ root@localhost ~ ] # du -sh /opt/ 43M /opt/ # -- \u5907\u4efd\u6587\u4ef6(\u5168\u91cf\u3001\u589e\u91cf)\u7684\u5927\u5c0f # \u53ef\u4ee5\u53d1\u73b0\u589e\u91cf\u5907\u4efdsdb3_bak_add1\u3001sdb3_bak_add2\u7684\u5927\u5c0f\u662f\u5c0f\u4e8e\u5168\u91cf\u5907\u4efd\u7684,\u5168\u91cf\u5907\u4efd\u7684\u5927\u5c0f\u662f\u5c0f\u4e8e\u5907\u4efd\u6e90\u7684 [ root@localhost ~ ] # ll -h /boot | grep sdb3_bak -rw-r--r-- 1 root root 23K 8\u6708 26 17 :41 sdb3_bak_add1 -rw-r--r-- 1 root root 24K 8\u6708 26 17 :41 sdb3_bak_add2 -rw-r--r-- 1 root root 37M 8\u6708 26 17 :41 sdb3_bak_all \u4f7f\u7528\u9650\u5236 1 .\u5fc5\u987b\u7528root\u6743\u9650 2 .\u53ea\u80fd\u5907\u4efd\u5df2\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf 3 .\u53ea\u80fd\u5907\u4efdXFS\u6587\u4ef6\u7cfb\u7edf 4 .\u53ea\u80fd\u7528xfsrestore\u8fdb\u884c\u6062\u590d 5 .\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7684UUID\u6765\u5206\u8fa8\u5907\u4efd\u6863,\u56e0\u6b64\u4e0d\u80fd\u5907\u4efd\u76f8\u540cUUID\u7684\u6587\u4ef6\u7cfb\u7edf \u6062\u590d xfsrestore \u00b6 \"\"\" -- \u5220\u9664/opt\u91cc\u6240\u6709\u7684\u5185\u5bb9 --\"\"\" [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt etc 0 directories, 3 files [ root@localhost ~ ] # rm -rf /opt/* \"\"\" -- \u4f9d\u6b21\u6062\u590d\u5168\u91cf\u3001\u589e\u91cf1\u3001\u589e\u91cf2 -- \"\"\" # \u5168\u91cf xfsrestore -f /boot/sdb3_bak_all /opt/ [ root@localhost ~ ] # ls /opt 1 .txt etc [ root@localhost ~ ] # cat /opt/1.txt 111 # \u589e\u91cf1 xfsrestore -f /boot/sdb3_bak_add1 /opt/ [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt etc [ root@localhost ~ ] # cat /opt/1.txt 111 222 [ root@localhost ~ ] # cat /opt/2.txt 333 # \u589e\u91cf2 xfsrestore -f /boot/sdb3_bak_add2 /opt/ [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt etc [ root@localhost ~ ] # cat /opt/3.txt 333333","title":"\u5b58\u50a8\u7ba1\u7406\u4e4b\u4f20\u7edf\u78c1\u76d8\u7ba1\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_1","text":"\u56de\u987e\u8be6\u89c1: 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md \u4e2d \u5b58\u50a8\u5668\u8be6\u89e3 \u8fd9\u4e00\u90e8\u5206\u7684\u5185\u5bb9... lsblk /dev/sda ## -- \u5728vm\u865a\u62df\u673a\u91cc\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0\u591a\u4e2a\u786c\u76d8 ## -- \u8fd9\u91cc\u6211\u6dfb\u52a0\u4e86 sdb sdc sdd\u4e09\u5757\u786c\u76d8(\u90fd\u662fSCSI\u63a5\u53e3 \u5bb9\u91cf\u5206\u522b\u4e3a20G\u300120G\u30012500G/2.5TB) [ root@localhost ~ ] # ls /dev | grep sd sda ## -- \u7b2c\u4e00\u5757\u7269\u7406\u78c1\u76d8 sda1 ## -- \u7b2c\u4e00\u5757\u7269\u7406\u78c1\u76d8\u7b2c\u4e00\u5206\u533a sda2 ## -- \u7b2c\u4e00\u5757\u7269\u7406\u78c1\u76d8\u7b2c\u4e8c\u5206\u533a sdb ## -- \u7b2c\u4e8c\u5757\u7269\u7406\u78c1\u76d8 sdc ## -- \u7b2c\u4e09\u5757\u7269\u7406\u78c1\u76d8 sdd ## -- \u7b2c\u56db\u5757\u7269\u7406\u78c1\u76d8 ## Ps: vde4 \u7b2c\u4e94\u5757\u865a\u62df\u78c1\u76d8\u7684\u7b2c\u56db\u5206\u533a ## -- \u67e5\u770b\u78c1\u76d8\u8bbe\u5907\u8be6\u60c5,\u4ee5\u53ca\u5206\u533a\u60c5\u51b5 \"\"\" TYPE disk \u78c1\u76d8 part \u5206\u533a rom \u53ea\u8bfb \"\"\" [ root@localhost ~ ] # lsblk /dev/sda NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8 :0 0 20G 0 disk \u251c\u2500sda1 8 :1 0 1G 0 part /boot \u2514\u2500sda2 8 :2 0 19G 0 part \u251c\u2500centos-root 253 :0 0 17G 0 lvm / \u2514\u2500centos-swap 253 :1 0 2G 0 lvm [ SWAP ] [ root@localhost ~ ] # lsblk /dev/sdb NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8 :16 0 20G 0 disk [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 20G 0 disk [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk \u67d0\u4e2a\u78c1\u76d8\u5212\u5206\u7684\u5206\u533a\u4e3b\u8981\u5206\u4e3a\u4e09\u7c7b: \u4e3b\u5206\u533a/\u5f15\u5bfc\u5206\u533a \u3001 \u6269\u5c55\u5206\u533a -- \u5305\u542b -- \u903b\u8f91\u5206\u533a \u4e3b\u5206\u533a/\u5f15\u5bfc\u5206\u533a: \u5305\u542b\u4e3b\u5f15\u5bfc\u8bb0\u5f55MBR\u7684\u5206\u533a,\u610f\u5473\u7740\u53ef\u4ee5\u5b89\u88c5\u7cfb\u7edf(MBR\u91cc\u6709OS\u7684\u542f\u52a8\u7a0b\u5e8fgrub) Ps: \u76f8\u5173\u77e5\u8bc6\u70b9\u7ffb\u9605 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md \u4e2d \u8ba1\u7b97\u673a\u542f\u52a8\u8fc7\u7a0b \u4ee5\u53ca 1_linux\u57fa\u7840/0_\u51c6\u5907\u5de5\u4f5c.md Linux\u542f\u52a8\u6d41\u7a0b \u8fd9\u4e24\u90e8\u5206\u5185\u5bb9... \u5e38\u89c1\u7684\u78c1\u76d8\u5206\u533a\u65b9\u6848\u6709\u4e24\u79cd: MBR\u5206\u533a\u8868\u548cGUID\u5206\u533a\u8868(\u7b80\u79f0GPT) MBR -- \u6700\u591a\u80fd\u8bc6\u522b 2TB \u7684\u5bb9\u91cf ; \u6700\u591a\u53ea\u80fd\u652f\u63014\u4e2a\u4e3b\u5206\u533a or 3\u4e2a\u4e3b\u5206\u533a+1\u4e2a\u6269\u5c55\u5206\u533a(\u903b\u8f91\u5206\u533a\u4e0d\u9650\u5236) GPT -- \u652f\u6301\u7684\u78c1\u76d8\u5bb9\u91cf\u6bd4 MBR \u5927\u5f97\u591a,\u6700\u591a\u652f\u6301128\u4e2a\u4e3b\u5206\u533a \u6211\u4eec\u62ff\u5230\u4e00\u5757\u6ca1\u6709\u5206\u533a\u7684\u65b0\u786c\u76d8, \u9996\u5148\u5c06\u786c\u76d8\u5212\u5206\u51fan\u4e2a\u4e3b\u5206\u533a(MBR\u65b9\u6848\u901a\u5e38\u662f3\u4e2a), \u518d\u5c06\u786c\u76d8\u5269\u4f59\u7a7a\u95f4\u7ed9\u6269\u5c55\u5206\u533a, \u7136\u540e\u5c06\u6269\u5c55\u5206\u533a\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u903b\u8f91\u5206\u533a,\u5177\u4f53\u7684\u7ec6\u8282\u64cd\u4f5c\u540e\u6587\u4f1a\u8be6\u7ec6\u9610\u8ff0.. \u78c1\u76d8\u5206\u533a\u7684\u5de5\u5177 fdisk \u5de5\u5177 -- MBR gdisk \u5de5\u5177 -- GPT \u78c1\u76d8\u5bb9\u91cf\u5c0f\u4e8e2TB\u7684\u901a\u5e38\u7528MBR, GPT\u5f53\u7136\u4e5f\u53ef\u4ee5,\u4f46\u5b58\u7740\u6548\u7387\u7684\u95ee\u9898...","title":"\u78c1\u76d8\u5206\u533a"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#mbr","text":"fdisk /dev/sdb m \u67e5\u770b\u5e2e\u52a9 q \u9000\u51fa, \u672aw\u4fdd\u5b58\u7684\u5206\u533a\u4fe1\u606f\u4e0d\u4f1a\u5199\u5165\u78c1\u76d8,\u4e0d\u4f1a\u751f\u6548 n \u65b0\u5efa\u5206\u533a(p \u4e3b\u5206\u533a;e \u6269\u5c55\u5206\u533a) d \u5220\u9664\u5206\u533a p \u67e5\u770b\u78c1\u76d8\u5df2\u5212\u5206\u5206\u533a\u7684\u4fe1\u606f w \u4fdd\u5b58 \u2605 \u521b\u5efa3\u4e2a\u5927\u5c0f\u4e3a1G\u7684\u4e3b\u5206\u533a,\u5269\u4f59\u5bb9\u91cf\u7ed9\u6269\u5c55\u5206\u533a,\u6269\u5c55\u5206\u533a\u91cc\u5212\u5206\u51fa\u4e86\u4e24\u4e2a\u903b\u8f91\u5206\u533a,\u4e00\u4e2a\u4e3a2G,\u53e6\u4e00\u4e2a\u4e3a3G.. \u4e2d\u9014\u8fd8\u9a8c\u8bc1\u4e86,MBR\u7684\u65b9\u6848\u65b0\u5efa\u56db\u4e2a\u4e3b\u5206\u533a\u540e,\u4e0d\u80fd\u518d\u65b0\u5efa\u4efb\u4f55\u5206\u533a.. [ root@localhost ~ ] # fdisk /dev/sdb \u6b22\u8fce\u4f7f\u7528 fdisk ( util-linux 2 .23.2 ) \u3002 ... ... ... \"\"\" -- \u65b0\u5efa\u7b2c\u4e00\u4e2a\u4e3b\u5206\u533a\u5206\u533a(1G) -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n ## -- \u65b0\u5efa\u5206\u533a Partition type: p primary ( 0 primary, 0 extended, 4 free ) ## -- \u4e3b\u5206\u533a e extended ## -- \u6269\u5c55\u5206\u533a Select ( default p ) : p ## -- \u9009\u62e9\u65b0\u5efa\u4e3b\u5206\u533a \u5206\u533a\u53f7 ( 1 -4\uff0c\u9ed8\u8ba4 1 ) : ## -- \u56de\u8f66,\u4f7f\u7528\u9ed8\u8ba4\u7684 ## -- \u4e0a\u4e00\u4e2a\u5206\u533a\u7684\u7ed3\u675f\u5e94\u8be5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u5206\u533a\u7684\u542f\u59cb \u8d77\u59cb \u6247\u533a ( 2048 -41943039,\u9ed8\u8ba4\u4e3a 2048 ) : ## -- \u56de\u8f66,\u542f\u59cb\u4f4d\u7f6e\u4e0d\u6307\u5b9a\u4f7f\u7528\u9ed8\u8ba4\u7684 \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 2048 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 2048 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G ## -- 1GB\u5927\u5c0f \u5206\u533a 1 \u5df2\u8bbe\u7f6e\u4e3a Linux \u7c7b\u578b,\u5927\u5c0f\u8bbe\u4e3a 1 GiB \"\"\" -- \u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4,\u65b0\u5efa\u7b2c\u4e8c\u4e2a\u7b2c\u4e09\u4e2a\u7b2c\u56db\u4e2a\u5927\u5c0f\u90fd\u4e3a1G\u7684\u4e3b\u5206\u533a -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n Select ( default p ) : p \u5206\u533a\u53f7 ( 2 -4,\u9ed8\u8ba4 2 ) : \u8d77\u59cb \u6247\u533a ( 2099200 -41943039,\u9ed8\u8ba4\u4e3a 2099200 ) : Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 2099200 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n Select ( default p ) : p \u5206\u533a\u53f7 ( 3 ,4\uff0c\u9ed8\u8ba4 3 ) : \u8d77\u59cb \u6247\u533a ( 4196352 -41943039,\u9ed8\u8ba4\u4e3a 4196352 ) : Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 4196352 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n Select ( default e ) : p ## -- \u5efa\u7b2c4\u4e2a\u5206\u533a\u7684\u65f6\u5019,fdisk\u5de5\u5177\u5df2\u7ecf\u5f00\u59cb\u63d0\u793a,\"default e,\u8be5\u5efa\u6269\u5c55\u5206\u533a\u5566\" ## -- \u5f53\u7136,\u53ef\u4ee5\u4e0d\u542c,\u6267\u610f\u521b\u5efa\u4e3b\u5206\u533a \u5df2\u9009\u62e9\u5206\u533a 4 ## -- \u53ef\u4ee5\u53d1\u73b0,\u56e0\u4e3a\u53ea\u5269\u4e00\u4e2a\u5206\u533a\u4e86,\u5c31\u4e0d\u8ba9\u4f60\u9009\u62e9\u5206\u533a\u53f7\u5566 \u8d77\u59cb \u6247\u533a ( 6293504 -41943039, \u9ed8\u8ba4\u4e3a 6293504 ) : Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 6293504 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) \uff1a+1G \"\"\" -- \u6211\u4eec\u5df2\u7ecf\u521b\u5efa\u4e864\u4e2a\u4e3b\u5206\u533a(\u5927\u5c0f\u90fd\u4e3a1G),\u54ea\u6015\u8fd8\u526916G,\u7a7a\u95f4\u591f\u7528\u4e5f\u4e0d\u80fd\u7ee7\u7eed\u65b0\u5efa\u5206\u533a\u5566 -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n ## -- \u5982\u679c\u8981\u521b\u5efa\u56db\u4e2a\u4ee5\u4e0a\u7684\u5206\u533a,\u5fc5\u987b\u66ff\u6362\u4e00\u4e2a\u4e3b\u5206\u533a\u4f18\u5148\u4f7f\u7528\u6269\u5c55\u5206\u533a!! If you want to create more than four partitions, you must replace a primary partition with an extended partition first. \"\"\" -- \u5220\u9664\u7b2c4\u4e2a\u5206\u533a -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : d \u5206\u533a\u53f7 ( 1 -4\uff0c\u9ed8\u8ba4 4 ) : 4 \u5206\u533a 4 \u5df2\u5220\u9664 \"\"\" -- \u521b\u5efa\u7b2c4\u4e2a\u5206\u533a\u4e3a\u6269\u5c55\u5206\u533a,\u78c1\u76d8\u5269\u4f59\u7684\u7a7a\u95f4\u90fd\u7ed9\u5b83 -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) \uff1an Partition type: p primary ( 3 primary, 0 extended, 1 free ) e extended Select ( default e ) : e \u5df2\u9009\u62e9\u5206\u533a 4 \u8d77\u59cb \u6247\u533a ( 6293504 -41943039\uff0c\u9ed8\u8ba4\u4e3a 6293504 ) : \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 6293504 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 6293504 -41943039, \u9ed8\u8ba4\u4e3a 41943039 ) : ## -- \u7a7a\u683c,\u9ed8\u8ba4\u5269\u4e0b\u7684\u90fd\u7ed9 \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 41943039 \u5206\u533a 4 \u5df2\u8bbe\u7f6e\u4e3a Extended \u7c7b\u578b, \u5927\u5c0f\u8bbe\u4e3a 17 GiB \"\"\" -- \u67e5\u770b\u78c1\u76d8\u5df2\u5212\u5206\u5206\u533a\u7684\u4fe1\u606f -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : p \u78c1\u76d8 /dev/sdb\uff1a21.5 GB, 21474836480 \u5b57\u8282\uff0c41943040 \u4e2a\u6247\u533a Units = \u6247\u533a of 1 * 512 = 512 bytes \u6247\u533a\u5927\u5c0f ( \u903b\u8f91/\u7269\u7406 ) : 512 \u5b57\u8282 / 512 \u5b57\u8282 I/O \u5927\u5c0f ( \u6700\u5c0f/\u6700\u4f73 ) : 512 \u5b57\u8282 / 512 \u5b57\u8282 \u78c1\u76d8\u6807\u7b7e\u7c7b\u578b: dos \u78c1\u76d8\u6807\u8bc6\u7b26: 0x651efb78 ## -- \u53ef\u4ee5\u89c2\u5bdf\u5230,\u6bcf\u4e2a\u5206\u533a\u90fd\u662f\u7d27\u6328\u7740\u7684 2099199-2099200 4196351-4196352 6293503-6293504 \u8bbe\u5907 Boot Start End Blocks Id System /dev/sdb1 2048 2099199 1048576 83 Linux /dev/sdb2 2099200 4196351 1048576 83 Linux /dev/sdb3 4196352 6293503 1048576 83 Linux /dev/sdb4 6293504 41943039 17824768 5 Extended \"\"\" -- \u5df2\u7ecf\u5212\u5206\u4e86\u56db\u4e2a\u4e3b\u5206\u533a,\u63a5\u7740\u65b0\u5efa\u7684\u5206\u533a\u662f\u5728\u6269\u5c55\u5206\u533a\u91cc\u5212\u5206\u7684\u903b\u8f91\u5206\u533a \u65b0\u5efa\u4e24\u4e2a\u903b\u8f91\u5206\u533a(2G\u548c3G) -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n All primary partitions are in use \u6dfb\u52a0\u903b\u8f91\u5206\u533a 5 ## -- \u53ef\u4ee5\u89c2\u5bdf\u5230\u903b\u8f91\u5206\u533a\u9ed8\u8ba4\u7684\u542f\u59cb 6295552 \u63a5\u8fd1\u4e8e/dev/sdb4\u8fd9\u4e00\u6269\u5c55\u5206\u533a\u7684\u542f\u59cb 6293504 ## -- \u6ca1\u6709\u7d27\u8d34,\u7a7a\u51fa\u6765\u7684\u90a3\u90e8\u5206\u7a7a\u95f4\u8bb0\u5f55\u7684\u5c31\u662f\u6269\u5c55\u5206\u533a\u91cc\u903b\u8f91\u5206\u533a\u7684\u4fe1\u606f \u8d77\u59cb \u6247\u533a ( 6295552 -41943039\uff0c\u9ed8\u8ba4\u4e3a 6295552 ) : ## -- \u540c\u6837\u7684\u4e0d\u6307\u5b9a\u542f\u59cb\u4f4d\u7f6e \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 6295552 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 6295552 -41943039,\u9ed8\u8ba4\u4e3a 41943039 ) : +2G \u5206\u533a 5 \u5df2\u8bbe\u7f6e\u4e3a Linux \u7c7b\u578b,\u5927\u5c0f\u8bbe\u4e3a 2 GiB \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : n All primary partitions are in use \u6dfb\u52a0\u903b\u8f91\u5206\u533a 6 \u8d77\u59cb \u6247\u533a ( 10491904 -41943039,\u9ed8\u8ba4\u4e3a 10491904 ) \uff1a \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c 10491904 Last \u6247\u533a, +\u6247\u533a or +size { K,M,G } ( 10491904 -41943039,\u9ed8\u8ba4\u4e3a 41943039 ) : +3G \u5206\u533a 6 \u5df2\u8bbe\u7f6e\u4e3a Linux \u7c7b\u578b,\u5927\u5c0f\u8bbe\u4e3a 3 GiB \"\"\" -- \u4fdd\u5b58\u9000\u51fa -- \"\"\" \u547d\u4ee4 ( \u8f93\u5165 m \u83b7\u53d6\u5e2e\u52a9 ) : w The partition table has been altered! Calling ioctl () to re-read partition table. \u6b63\u5728\u540c\u6b65\u78c1\u76d8. \u53ef\u4ee5\u67e5\u770b\u4e0b/dev/sdb\u7684\u5206\u533a\u7ed3\u679c partprobe lsblk /dev/sdb ## -- \u6267\u884cpartprobe\u547d\u4ee4\u5237\u65b0\u4e00\u4e0b\u5206\u533a\u8868 \u66f4\u65b0\u5206\u533a\u8868\u4fe1\u606f [ root@localhost ~ ] # partprobe ## -- \u6211\u4eec\u4e3b\u8981\u4f7f\u7528 sdb1\u3001sdb2\u3001sdb3\u3001sdb5\u3001sdb6 [ root@localhost ~ ] # ls /dev/sdb ## -- \u8fde\u7eed\u6309\u4e24\u4e0bTab\u952e!! sdb sdb1 sdb2 sdb3 sdb4 sdb5 sdb6 [ root@localhost ~ ] # lsblk /dev/sdb NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8 :16 0 20G 0 disk \u251c\u2500sdb1 8 :17 0 1G 0 part \u251c\u2500sdb2 8 :18 0 1G 0 part \u251c\u2500sdb3 8 :19 0 1G 0 part \u251c\u2500sdb4 8 :20 0 1K 0 part \u251c\u2500sdb5 8 :21 0 2G 0 part \u2514\u2500sdb6 8 :22 0 3G 0 part","title":"MBR\u8fdb\u884c\u5206\u533a"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#gpt","text":"/dev/sdd \u78c1\u76d8\u7684\u7a7a\u95f4\u5927\u5c0f\u4e3a2.5T [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk n \u65b0\u5efa\u5206\u533a(\u5efa\u7684\u6bcf\u4e2a\u5206\u533a\u90fd\u662f\u4e3b\u5206\u533a) p \u67e5\u770b\u5df2\u5efa\u5206\u533a\u7684\u4fe1\u606f d \u5220\u9664 w \u4fdd\u5b58 q \u9000\u51fa [ root@localhost ~ ] # gdisk /dev/sdd Command ( ? for help ) : n Partition number ( 1 -128, default 1 ) : First sector ( 34 -5242879966, default = 2048 ) or { +- } size { KMGTP } : Last sector ( 2048 -5242879966, default = 5242879966 ) or { +- } size { KMGTP } : +1G Current type is 'Linux filesystem' ## - \u5f53\u524d\u7c7b\u578b\u662f\u201cLinux \u6587\u4ef6\u7cfb\u7edf\u201d Hex code or GUID ( L to show codes, Enter = 8300 ) : ## - \u901a\u8fc7L\u67e5\u770b8300\u6307\u7684\u5c31\u662f\u201cLinux \u6587\u4ef6\u7cfb\u7edf\u201d ## - Linux\u6587\u4ef6\u7cfb\u7edf\u5305\u542bxfs,\u4e5f\u5c31\u662f\u8be5\u5206\u533a\u53ef\u4ee5\u9009\u62e9xfs\u683c\u5f0f\u5316 Changed type of partition to 'Linux filesystem' Partition number ( 2 -128, default 2 ) : Last sector ( 2099200 -5242879966, default = 5242879966 ) or { +- } size { KMGTP } : +1G Command ( ? for help ) : p Disk /dev/sdd: 5242880000 sectors, 2 .4 TiB ... ... ... Number Start ( sector ) End ( sector ) Size Code Name 1 2048 2099199 1024 .0 MiB 8300 Linux filesystem 2 2099200 4196351 1024 .0 MiB 8300 Linux filesystem Command ( ? for help ) : w Do you want to proceed? ( Y/N ) : y OK ; writing new GUID partition table ( GPT ) to /dev/sdd. The operation has completed successfully. \u67e5\u770bsdd\u5206\u533a\u7684\u60c5\u51b5 [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk \u251c\u2500sdd1 8 :49 0 1G 0 part \u2514\u2500sdd2 8 :50 0 1G 0 part","title":"GPT\u8fdb\u884c\u5206\u533a"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_2","text":"\u78c1\u76d8\u5bb9\u91cf\u5c0f\u4e8e2T\u7684\u7528MBR\u8fdb\u884c\u5206\u533a,\u5bb9\u91cf\u5927\u4e8e2T\u7684\u7528GPT\u8fdb\u884c\u5206\u533a.. \u5f80\u540e\u7684\u64cd\u4f5c\u5c31\u4e00\u6837\u5566, \u5206\u5b8c\u533a\u540e\u9009\u62e9xfs\u5bf9\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316...\u7136\u540e\u8fdb\u884c\u6302\u8f7d..","title":"\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf\u4e0e\u6302\u8f7d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_3","text":"## -- \u6ce8\u610f: \u683c\u5f0f\u5316\u540e,\u5206\u533a\u91cc\u9762\u7684\u6570\u636e\u90fd\u6ca1\u4e86 mkfs.xfs /dev/sdb1 # -- \u683c\u5f0f\u5316sdb1\u5206\u533a mkfs.xfs /dev/sdb2 # -- \u683c\u5f0f\u5316sdb2\u5206\u533a mkfs.xfs /dev/sdb3 # -- \u683c\u5f0f\u5316sdb3\u5206\u533a mkfs.xfs /dev/sdb5 # -- \u683c\u5f0f\u5316sdb5\u5206\u533a mkfs.xfs /dev/sdb6 # -- \u683c\u5f0f\u5316sdb6\u5206\u533a mkfs.xfs /dev/sdd1 # -- sdd1\u5206\u533a ## -- \u8bd5\u7740\u5bf9/dev/sdb4\u8fd9\u4e00\u6269\u5c55\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316,\u63d0\u793asdb4\u91cc\u5305\u542b\u5206\u533a\u8868(\u6307\u7684\u5c31\u662fsdb5\u3001sdb6\u4e24\u4e2a\u903b\u8f91\u5206\u533a) ## -- \u53ef\u4ee5\u52a0\u4e0a-f\u9009\u9879,\u5f3a\u5236\u683c\u5f0f\u5316,\u4f46\u901a\u5e38\u4e0d\u4f1a\u8fd9\u4e48\u505a [ root@localhost ~ ] # mkfs.xfs /dev/sdb4 mkfs.xfs: /dev/sdb4 appears to contain a partition table ( dos ) . mkfs.xfs: Use the -f option to force overwrite. \u78c1\u76d8\u53ef\u4ee5\u4e0d\u5206\u533a,\u76f4\u63a5\u683c\u5f0f\u5316\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf,\u76f8\u5f53\u4e8e\u6574\u4e2a\u76d8\u662f\u4e00\u4e2a\u5206\u533a!!\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a..","title":"\u683c\u5f0f\u5316/\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_4","text":"mount -t \u6e90 \u6302\u8f7d\u70b9 mount -a \u53ef\u4ee5\u4e0d\u91cd\u542f\u670d\u52a1\u5668, \u8ba9 /etc/fstab \u4e2d\u7684\u6c38\u4e45\u6302\u8f7d\u914d\u7f6e\u751f\u6548! mkdir /a mkdir /b mkdir /c mkdir /d mkdir /e mount /dev/sdb1 /a mount /dev/sdb2 /b mount /dev/sdb3 /c mount /dev/sdb5 /d mount /dev/sdb6 /e [ root@localhost ~ ] # df | grep sdb ## \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 /dev/sdb1 1038336 32992 1005344 4 % /a /dev/sdb2 1038336 32992 1005344 4 % /b /dev/sdb3 1038336 32992 1005344 4 % /c /dev/sdb5 2086912 32992 2053920 2 % /d /dev/sdb6 3135488 32992 3102496 2 % /e","title":"\u4e34\u65f6\u6302\u8f7d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_5","text":"## -- umount /dev/sdb1 \u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\u6216\u6302\u8f7d\u70b9\u90fd\u80fd\u8fbe\u5230\u9884\u671f\u7684\u6548\u679c umount /a /b /c /d /e # -- \u5378\u8f7d\u591a\u4e2a \"\"\" \u82e5\u6b63\u5904\u4e8e\u67d0\u4e2a\u5206\u533a\u4e0b,umount\u5378\u8f7d\u8be5\u5206\u533a,\u4f1a\u63d0\u793a\u76ee\u6807\u5fd9 \u89e3\u51b3\u65b9\u6848\u4e00: cd \u5230\u5176\u4ed6\u5206\u533a\u4e0b \u89e3\u51b3\u65b9\u6848\u4e8c: umount -l /a # -- \u52a0\u4e0al\u9009\u9879,\u5f3a\u5236\u5378\u8f7d \"\"\"","title":"\u5378\u8f7d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_6","text":"\u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219 \u540c\u4e00\u4e2a\u5206\u533a\u53ef\u4ee5\u6709\u591a\u4e2a\u6302\u8f7d\u70b9 \u5224\u65ad\u6587\u4ef6\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u5206\u533a,\u9700\u8981\u4ece\u53f3\u5230\u5de6\u8fdb\u884c\u5206\u6790.. \u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219 : \u6587\u4ef6\u79bb\u54ea\u4e2a\u6302\u8f7d\u70b9\u6700\u8fd1, \u5c31\u4f1a\u5b58\u50a8\u5230\u6700\u8fd1\u7684\u6302\u8f7d\u70b9\u6240\u5728\u7684\u5206\u533a\u91cc.. \u6253\u4e2a\u6bd4\u65b9, \u5728\u6302\u8f7d\u70b9\u662f\u4e2a\u6c34\u9f99\u5934, \u6c34\u4ece\u54ea\u91cc\u6765\uff1f\u6302\u8f7d\u70b9\u4ece\u6240\u5bf9\u5e94\u7684\u67d0\u4e2a\u5206\u533a\u4e2d\u53d6\u6c34!!! mkdir /opt/a ## -- opt\u76ee\u5f55\u5728\u6839\u5206\u533a/\u91cc;\u6839\u5206\u533a\u4e0b\u521b\u5efa\u7684a\u76ee\u5f55\u4e5f\u5728\u6839\u5206\u533a\u91cc mount /dev/sdb1 /opt/a ## -- /opt/a\u6210\u4e3a\u4e86sdb1\u5206\u533a\u7684\u6302\u8f7d\u70b9 mkdir /opt/a/b ## -- \u5728/opt/a\u6302\u8f7d\u70b9\u4e0b\u521b\u5efa\u7684b\u76ee\u5f55\u5b58\u50a8\u5728sdb1\u5206\u533a\u91cc mount /dev/sdb2 /opt/a/b ## -- /opt/a/b\u6210\u4e3a\u4e86sdb2\u5206\u533a\u7684\u6302\u8f7d\u70b9 touch /opt/a/b/1.txt ## -- \u5728/opt/a/b\u6302\u8f7d\u70b9\u4e0b\u521b\u5efa\u76841.txt\u6587\u4ef6\u5b58\u50a8\u5728sdb2\u5206\u533a\u91cc \"\"\"\u5230\u6b64\u4e3a\u6b62,\u95ee\u8fd9\u51e0\u4e2a\u5206\u533a\u4e0b\u5206\u522b\u5b58\u50a8\u4e86\u4ec0\u4e48\uff1f \u53ef\u4ee5\u53cd\u5411\u9a8c\u8bc1**\u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219**\uff01\uff01\uff01 \u6839\u5206\u533a opt\u3001a sdb1\u5206\u533a b sdb2\u5206\u533a 1.txt \u2605 /opt/a/b/1.txt \u53cd\u5411\u9a8c\u8bc1\u5206\u6790: 1.txt\u79bb/opt/a/b\u6302\u8f7d\u70b9\u6700\u8fd1; b\u79bb/opt/a\u6302\u8f7d\u70b9\u6700\u8fd1 \u7b80\u5355\u7c97\u66b4,\u5378\u8f7d\u4e86\u54ea\u4e2a\u5206\u533a,\u90a3\u4e2a\u5206\u533a\u91cc\u7684\u5185\u5bb9\u5c31\u4e0d\u4f1a\u663e\u793a.. \u4f46\u9996\u5148\u4f60\u8981\u80fd\u5378\u8f7d\u7684\u4e86,\u6bd4\u5982\u8fd9\u91cc\u76f4\u63a5umount /opt/a\u5378\u8f7dsdb1\u5206\u533a\u662f\u5931\u8d25\u7684!!\u8981\u5148\u5378\u8f7dsdb2\u5206\u533a.. \"\"\" [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 1 .txt 2 directories, 1 file [ root@localhost opt ] # echo 111 > /opt/a/b/1.txt [ root@localhost opt ] # cat /opt/a/b/1.txt 111 [ root@localhost opt ] # df | grep sdb | grep -v grep /dev/sdb1 1038336 32992 1005344 4 % /opt/a /dev/sdb2 1038336 32996 1005340 4 % /opt/a/b \"\"\"sdb2\u5206\u533a\u9690\u5c45\u5c71\u6797,\u4e3a\u4f551.txt\u6587\u4ef6\u795e\u79d8\u6d88\u5931\uff1f \u56e0\u4e3a1.txt\u6587\u4ef6\u662f\u5b58\u50a8\u5728sdb2\u5206\u533a\u91cc\u7684!!sdb2\u5206\u533a\u672a\u6302\u8f7d\u5c31\u8bfb\u53d6\u4e0d\u4e86\u91cc\u9762\u7684\u5185\u5bb9. \"\"\" [ root@localhost opt ] # umount /opt/a/b [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b 2 directories, 0 files \"\"\"\u8d81\u4e71\u5728/opt/a/b\u4e0b\u521b\u5efa\u76842.txt\u6587\u4ef6,\u6839\u636e\u4ece\u53f3\u5230\u5de6\u6700\u8fd1\u539f\u5219,\u662f\u5b58\u50a8\u5728\u6302\u8f7d\u70b9/opt/a\u6240\u5bf9\u5e94\u7684sdb1\u5206\u533a\u91cc!! \"\"\" [ root@localhost opt ] # echo 222 > /opt/a/b/2.txt [ root@localhost opt ] # cat /opt/a/b/2.txt 222 [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 2 .txt 2 directories, 1 file \"\"\"\u91cd\u65b0\u8ba9/opt/a/b\u6210\u4e3asdb2\u5206\u533a\u7684\u6302\u8f7d\u70b9,2.txt\u6587\u4ef6\u6d88\u5931,1.txt\u6587\u4ef6\u91cd\u89c1\u6c5f\u6e56! \u56e0\u4e3a/opt/a/b\u6302\u8f7d\u70b9\u4f1a\u4ecesdb2\u5206\u533a\u91cc\u53d6\u6c34,sdb2\u5206\u533a\u91cc\u53ea\u67091.txt,\u53ef\u6ca1\u67092.txt \"\"\" [ root@localhost opt ] # mount /dev/sdb2 /opt/a/b [ root@localhost opt ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 1 .txt 2 directories, 1 file \"\"\"\u5f00\u59cb\u4f5c\u5996,/test\u548c/opt/a/b\u90fd\u4f5c\u4e3asdb2\u5206\u533a\u7684\u6302\u8f7d\u70b9!! \u6240\u4ee5\u795e\u5947\u7684\u53d1\u73b0,\u65b0\u5efa\u7684test\u76ee\u5f55\u4e0b\u4e5f\u51fa\u73b0\u4e861.txt\u6587\u4ef6!! \u8fdb\u4e00\u6b65\u9a8c\u8bc1\u4e86,\u6302\u8f7d\u70b9\u4f1a\u4ece\u6240\u5bf9\u5e94\u7684\u5206\u533a\u91cc\u53d6\u6c34!! \u9700\u8981\u6ce8\u610f\u7684\u662f:\u4e0d\u7ba1\u662f\u6539\u53d8/test\u8fd8\u662f/opt/a/b\u4e0b\u76841.txt\u6587\u4ef6,\u5b9e\u5219\u4e0a\u90fd\u662f\u66f4\u6539sdb2\u5206\u533a\u91cc\u5b58\u50a8\u76841.txt!!! /test/1.txt\u548c/opt/a/b/1.txt\u4f1a\u540c\u65f6\u6539\u53d8!!! \"\"\" [ root@localhost opt ] # cd [ root@localhost ~ ] # mkdir /test [ root@localhost ~ ] # mount /dev/sdb2 /test [ root@localhost ~ ] # tree /test /test \u2514\u2500\u2500 1 .txt 0 directories, 1 file [ root@localhost ~ ] # mount | grep /dev/sdb2 ## -- df\u53ef\u80fd\u4e0d\u4f1a\u663e\u793a\u5168,\u4f46mount\u547d\u4ee4\u663e\u793a\u7684\u80af\u5b9a\u662f\u5168\u7684!!! /dev/sdb2 on /opt/a/b type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb2 on /test type xfs ( rw,relatime,attr2,inode64,noquota ) \"\"\"\u5c0f\u5c0f\u9a8c\u8bc1\u4e0b,b\u76ee\u5f55\u548c2.txt\u90fd\u662f\u5b58\u50a8\u5728/opt/a\u5bf9\u5e94\u7684sdb1\u5206\u533a\u91cc sdb1\u5206\u533a\u9000\u9690\u6c5f\u6e56,b\u76ee\u5f55\u548c2.txt\u90fd\u4f1a\u6d88\u5931!!! \"\"\" [ root@localhost ~ ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 1 .txt 2 directories, 1 file ## -- \u7279\u522b\u6ce8\u610f\u8fd9\u91cc,\u76f4\u63a5umount /opt/a\u662f\u5931\u8d25\u7684!! [ root@localhost ~ ] # umount /opt/a umount: /opt/a\uff1a\u76ee\u6807\u5fd9\u3002 ( \u6709\u4e9b\u60c5\u51b5\u4e0b\u901a\u8fc7 lsof ( 8 ) \u6216 fuser ( 1 ) \u53ef\u4ee5 \u627e\u5230\u6709\u5173\u4f7f\u7528\u8be5\u8bbe\u5907\u7684\u8fdb\u7a0b\u7684\u6709\u7528\u4fe1\u606f ) [ root@localhost ~ ] # umount /opt/a/b [ root@localhost ~ ] # tree /opt /opt \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 2 .txt 2 directories, 1 file [ root@localhost ~ ] # umount /opt/a [ root@localhost ~ ] # tree /opt /opt \u2514\u2500\u2500 a","title":"\u4ece\u53f3\u5f80\u5de6\u6700\u8fd1\u539f\u5219"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_7","text":"\u4e0a\u9762\u64cd\u4f5c\u7684\u6302\u8f7d\u90fd\u662f\u4e34\u65f6\u6302\u8f7d, reboot \u547d\u4ee4\u91cd\u542f\u670d\u52a1\u5668\u540e, \u6302\u8f7d\u4f1a\u5931\u6548!!! \u800clinux\u4e2d\u6709\u4e9b\u6302\u8f7d\u5c31\u662f\u6c38\u4e45\u7684,\u5982\u4f55\u505a\u5230\u7684\u5462\uff1f /etc/fstab \u6587\u4ef6 \u8981\u6302\u8f7d\u7684\u8bbe\u5907 \u6302\u8f7d\u70b9(\u5165\u53e3) \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b \u6302\u8f7d\u53c2\u6570 \u662f\u5426\u5907\u4efd \u662f\u5426\u68c0\u67e5 UUID \u6302\u8f7d\u70b9\u8def\u5f84 eg: xfs defaults 0 0 Ps: \u901a\u5e38\u662fdefaults 0 0, \u5177\u4f53\u7684\u9009\u9879\u914d\u7f6e\u8be6\u89c1 https://zhuanlan.zhihu.com/p/337009754 ## -- \u67e5\u770blinux\u4e2d\u6c38\u4e45\u6302\u8f7d\u7684\u4fe1\u606f [ root@localhost ~ ] # cat /etc/fstab /dev/mapper/centos-root / xfs defaults 0 0 UUID = 7edef40b-555b-485b-a94c-4b345143b5d5 /boot xfs defaults 0 0 /dev/mapper/centos-swap swap swap defaults 0 0 ## -- \u67e5\u770b\u6bcf\u4e2a\u78c1\u76d8\u7684UUID [ root@localhost ~ ] # blkid /dev/sdb1: UUID = \"057edccc-4db0-4688-bb18-5e2d5e681c5e\" TYPE = \"xfs\" /dev/sdb2: UUID = \"41a7d6a4-b8b6-489a-892a-2e2c1e7d295e\" TYPE = \"xfs\" /dev/sdb3: UUID = \"db12f68f-9ea0-4b7a-a927-47d8345dedd3\" TYPE = \"xfs\" /dev/sdb5: UUID = \"29301422-0035-417c-bfd0-8d244ce59e0c\" TYPE = \"xfs\" /dev/sdb6: UUID = \"73122250-bd11-4ca2-8c84-0a2e412ef708\" TYPE = \"xfs\" /dev/sda1: UUID = \"7edef40b-555b-485b-a94c-4b345143b5d5\" TYPE = \"xfs\" /dev/sda2: UUID = \"jG51ec-dKTo-gsGv-o7wf-2wXp-Irc8-FYrzXT\" TYPE = \"LVM2_member\" /dev/mapper/centos-root: UUID = \"dc8ff591-4043-4c29-82bd-cdc39a0d48fb\" TYPE = \"xfs\" /dev/mapper/centos-swap: UUID = \"9a6222cd-5632-4215-acbc-94a9b22ddd6e\" TYPE = \"swap\" ## -- \u7f16\u8f91/etc/fstab \u5c06sdb1\u548csdb2\u8fdb\u884c\u6302\u8f7d \u901a\u5e38\u4f7f\u7528UUID,\u4f7f\u7528\u5206\u533a\u540d\u79f0(\u4e0d\u5efa\u8bae)\u4e5f\u53ef\u4ee5 [ root@localhost ~ ] # mkdir /root/test1 [ root@localhost ~ ] # mkdir /root/test2 [ root@localhost ~ ] # tail -2 /etc/fstab UUID = 057edccc-4db0-4688-bb18-5e2d5e681c5e /root/test1 xfs defaults 0 0 /dev/sdb2 /root/test2 xfs defaults 0 0 ## -- reboot\u91cd\u542f\u670d\u52a1\u5668\u540e\u6c38\u4e45\u6302\u8f7d\u751f\u6548 [ root@localhost ~ ] # reboot ## -- \u68c0\u67e5\u662f\u5426\u6c38\u4e45\u6302\u8f7d\u6210\u529f [ root@localhost ~ ] # mount | grep sdb /dev/sdb1 on /root/test1 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb2 on /root/test2 type xfs ( rw,relatime,attr2,inode64,noquota ) ## -- \u4e0d\u91cd\u542f\u670d\u52a1\u5668,\u4f7f\u7528mount -a\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u5b9e\u73b0\u81ea\u52a8\u6302\u8f7d [ root@localhost ~ ] # sed -i '$a /dev/sdb3 /opt xfs defaults 0 0' /etc/fstab [ root@localhost ~ ] # mount -a [ root@localhost ~ ] # mount | grep sdb /dev/sdb1 on /root/test1 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb2 on /root/test2 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sdb3 on /opt type xfs ( rw,relatime,attr2,inode64,noquota )","title":"\u6c38\u4e45\u6302\u8f7d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#swap","text":"\u67e5\u770bswap\u5206\u533a\u7684\u5927\u5c0f,\u5f53\u524d\u662f2\u4e2aG,\u51c6\u5907\u7ed9\u5b83\u52a01\u4e2aG.. \u6b65\u9aa4: \u65b0\u589e\u5206\u533a -- mkswap\u5236\u4f5cswap\u6587\u4ef6\u7cfb\u7edf -- \u6fc0\u6d3b\u5206\u533a -- \u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u65b0\u589e\u7684swap\u5206\u533a swapon /dev/sdd3 swapon -s swapoff /dev/sdd3 swapoff -a [ root@localhost ~ ] # free -m total used free shared buff/cache available Mem: 972 621 61 9 289 190 Swap: 2047 4 2043 \"\"\" -- \u4ece\u78c1\u76d8\u4e2d\u5212\u4e2a1G\u7a7a\u95f4\u7684\u5206\u533a sdb\u7684\u903b\u8f91\u5206\u533a sdd\u7684\u4e3b\u5206\u533a\u90fd\u53ef\u4ee5 -- \"\"\" gdisk /dev/sdd partprobe [ root@localhost ~ ] # lsblk /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdd 8 :48 0 2 .5T 0 disk \u251c\u2500sdd1 8 :49 0 1G 0 part \u251c\u2500sdd2 8 :50 0 1G 0 part \u2514\u2500sdd3 8 :51 0 1G 0 part \"\"\" -- \u5236\u4f5cswap\u5206\u533a -- \"\"\" [ root@localhost ~ ] # mkswap /dev/sdd3 \u6b63\u5728\u8bbe\u7f6e\u4ea4\u6362\u7a7a\u95f4\u7248\u672c 1 \uff0c\u5927\u5c0f = 1048572 KiB \u65e0\u6807\u7b7e\uff0cUUID = 37fcc4d0-a581-404a-b13c-45311d09c7fc \"\"\" -- \u6fc0\u6d3b/\u4e34\u65f6\u6302\u8f7d \u521a\u5236\u4f5c\u597d\u7684swap\u5206\u533a -- \"\"\" [ root@localhost ~ ] # swapon /dev/sdd3 [ root@localhost ~ ] # free -m total used free shared buff/cache available Mem: 972 622 70 9 279 189 Swap: 3071 4 3067 [ root@localhost ~ ] # swapon -s \u6587\u4ef6\u540d \u7c7b\u578b \u5927\u5c0f \u5df2\u7528 \u6743\u9650 /dev/sdd3 partition 1048572 4872 -2 /dev/dm-1 partition 2097148 0 -3 ## -- \u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u65b0\u589e\u7684swap\u5206\u533a ## -- \u6700\u597d\u4f7f\u7528UUID [ root@localhost ~ ] # sed -i '$a /dev/sdd3 swap swap defaults 0 0' /etc/fstab \"\"\" \u5b9e\u9a8c\u4e86\u4e0b swapoff /dev/sdd3 \u5173\u95edsdd3\u8fd9\u4e2aswap\u5206\u533a, \u5c3d\u7ba1\u5199\u8fdb\u4e86\u914d\u7f6e\u6587\u4ef6, \u4f46\u4f7f\u7528mount -a\u547d\u4ee4\u4e0d\u4f1a\u91cd\u65b0\u6302\u8f7d\u4e0a\u53bb \u53ef\u4ee5\u4f7f\u7528swapon /dev/sdd3 \u91cd\u65b0\u6fc0\u6d3b/\u4e34\u65f6\u6302\u8f7d \u5f00\u673a\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u6302\u8f7d\u6587\u4ef6\u91cc\u7684swap\u914d\u7f6e \u4e0d\u5c31\u76f8\u5f53\u4e8e\u6c38\u4e45\u6302\u8f7d\u4e86\u561b!!!! \"\"\"","title":"\u5236\u4f5cswap\u4ea4\u6362\u5206\u533a"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#dell-r740raid","text":"RAID\u7684\u57fa\u7840\u7406\u8bba\u8be6\u89c1 : 0_\u8ba1\u7b97\u673a\u57fa\u7840/1_\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210.md \u4e2d \u25ce RAID\u6280\u672f \u90e8\u5206\u7684\u5185\u5bb9... Ps: \u63d0\u4e00\u5634,\u5b9e\u4f53\u670d\u52a1\u5668\u9700\u8981\u505aRAID,\u4f46\u5927\u591a\u6570\u4e2d\u5c0f\u578b\u516c\u53f8\u7528\u7684\u963f\u91cc\u4e91(\u63d0\u4f9b\u7684\u662f\u865a\u62df\u673a),\u4e91\u73af\u5883\u4e0d\u9700\u8981\u505aRAID!! \u7b80\u5355\u56de\u987e\u4e0b: \u5728\u751f\u4ea7\u73af\u5883\u4e2d,\u901a\u5e38\u4f1a\u5c06\u591a\u4e2a\u76d8\u5408\u5230\u4e00\u8d77\u505a\u4e00\u4e2aRAID... RAID0: \u4e24\u5757\u76d8\u540c\u65f6\u63d0\u4f9b\u8bfb\u5199\u7684\u529f\u80fd,\u574f\u5176\u4e2d\u4e00\u5757\u5c31\u4e0d\u80fd\u7528\u4e86; RAID1: \u79f0\u4f5c\u5907\u4efd\u76d8/\u955c\u50cf\u76d8, \u4e00\u5757\u8bfb\u5199,\u53e6\u4e00\u5757\u5907\u4efd, \u901a\u5e38\u7cfb\u7edf\u76d8\u505aRAID1; RAID5: \u65e2\u8003\u8651\u4e86\u8bfb\u5199\u901f\u5ea6\u4e5f\u8003\u8651\u4e86\u5197\u4f59.. RAID10: \u571f\u8c6a\u73a9\u6cd5.. \u7ed3\u5408raid0\u548c1\u7684\u4f18\u70b9.. \u5236\u4f5cRAID\u9700\u8981raid\u5361\u8fd9\u4e2a\u8bbe\u5907,\u786c\u76d8\u662f\u63d2\u5728raid\u5361\u4e0a\u7684.. raid\u5361\u5c06\u8fd9\u4e9b\u786c\u76d8\u505a\u6210\u78c1\u76d8\u9635\u5217.. \u5177\u4f53\u8fc7\u7a0b\u53c2\u8003: https://www.cnblogs.com/linhaifeng/articles/13921161.html \u6ce8\u610f\u51e0\u4e2a\u5730\u65b9: 4 .\u5728BIOS\u754c\u9762ctrl+R\u8fdb\u5165\u9635\u5217\u5361,\u4e0d\u540c\u5382\u5546\u5feb\u6377\u952e\u4e0d\u4e00\u6837,\u9700\u8981\u67e5\u4e00\u4e0b ; 6 .\u591a\u5c11\u4e2a\u76d8\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u9009\u62e9 ; ( \u8fd9\u91cc\u9009\u62e9\u7684\u662f\u8981\u64cd\u4f5c\u54ea\u4e9b\u76d8 ) 7 .create New VD # -- VD\u865a\u62df\u78c1\u76d8,\u5373\u591a\u4e2a\u786c\u76d8\u7ec4\u6210\u4e00\u4e2a\u865a\u62df\u5c42\u9762\u7684\u786c\u76d8 8 .\u8fd9\u91cc\u662f\u9009\u62e9\u54ea\u4e9b\u76d8\u505aRAID \u6309ok\u5b8c\u6210 9 .\u53ef\u4ee5\u5c06\u5728\u6b65\u9aa46\u4e2d\u5df2\u7ecf\u9009\u4e2d\u800c\u6ca1\u6709\u505araid\u7684\u786c\u76d8 \u7ee7\u7eed\u505a\u5176\u4ed6raid 11 .\u505a\u7684RAID5\u7684\u8bdd,\u8fd8\u53ef\u4ee5\u6709\u4e00\u5757\u70ed\u5907\u76d8 ( \u5f53RAID5\u4e2d\u4efb\u4e00\u76d8\u574f\u4e86,\u5176\u4f592\u5757\u53ef\u4ee5\u505a\u5947\u5076\u6821\u9a8c\u5c06\u6570\u636e\u6062\u590d\u5230\u683c\u5916\u7684\u70ed\u5907\u76d8\u4e2d )","title":"Dell R740\u670d\u52a1\u5668\u5236\u4f5cRAID"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_8","text":"\u5c06\u4e00\u5757\u786c\u76d8\u5206\u533a,\u683c\u5f0f\u5316\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf,\u518d\u6302\u8f7d\u4f7f\u7528.. linux\u9488\u5bf9\u5199\u64cd\u4f5c\u4f1a\u5148\u5c06\u6570\u636e\u5728\u5185\u5b58\u7684buffer\u7f13\u51b2\u533a\u4e2d\u6512\u4e00\u6ce2, \u82e5\u5728\u5c06buffer\u4e2d\u7684\u6570\u636e\u5f80\u786c\u76d8\u4e2d\u5199\u7684\u8fc7\u7a0b\u4e2d ,\u7a81\u7136\u65ad\u7535\u91cd\u542f\u540e\u4f1a\u63d0\u793a\u6587\u4ef6\u9519\u8bef: \u201cemergency mode\u201d...","title":"\u4fee\u590d\u670d\u52a1\u5668\u6587\u4ef6\u7cfb\u7edf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_9","text":"\"\"\" 1\u3001\u51c6\u5907\u4e00\u4e2a1G\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0e\u6570\u636e \"\"\" fdisk /dev/sdc # -- \u521b\u5efa\u5bb9\u91cf\u5927\u5c0f\u4e3a1G\u7684\u5206\u533a/dev/sdc1 mkfs.xfs /dev/sdc1 # -- \u683c\u5f0f\u5316/dev/sdc1\u5206\u533a mount /dev/sdc1 /mnt/ # -- \u6302\u8f7d\u4f7f\u7528 echo 111 > /mnt/1.txt # -- 1.txt\u5728sdc1\u5206\u533a\u4e2d [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 20G 0 disk \u2514\u2500sdc1 8 :33 0 1G 0 part [ root@localhost ~ ] # mount | grep sdc1 /dev/sdc1 on /mnt type xfs ( rw,relatime,attr2,inode64,noquota ) \"\"\" 2\u3001\u6a21\u62df\u6587\u4ef6\u7cfb\u7edf\u635f\u574f \"\"\" ## -- \u6570\u636e\u5f80\u786c\u76d8\u4e2d\u7684\u6587\u4ef6\u5199\u5165\u7684\u8fc7\u7a0b\u4e2d,\u7a81\u7136\u65ad\u7535.. \u6587\u4ef6\u5c31\u4e0d\u5b8c\u6574\u5566 ## -- \u8fd9\u91cc\u901a\u8fc7dd\u547d\u4ee4\u7528\u51920\u673a\u5f80sdc\u786c\u76d8\u4e2d\u8f93\u5165500M\u7684\u6570\u636e,\u4f1a\u8986\u76d6\u6389\u786c\u76d8\u4e2d\u5206\u533a\u8868\u7684\u4fe1\u606f,\u6574\u4e2a\u7ed3\u6784\u5c31\u4e71\u4e86.. ## -- \u6ce8\u610f\u54e6,\u4e0d\u662fsdc1 \u662fsdc [ root@localhost ~ ] # dd if=/dev/zero of=/dev/sdc bs=500M count=1 \u8bb0\u5f55\u4e861+0 \u7684\u8bfb\u5165 \u8bb0\u5f55\u4e861+0 \u7684\u5199\u51fa 524288000\u5b57\u8282 ( 524 MB ) \u5df2\u590d\u5236\uff0c1.14939 \u79d2\uff0c456 MB/\u79d2 \"\"\" 3\u3001\u5378\u8f7d\u540e\u91cd\u65b0\u6302\u8f7d,\u53d1\u73b0\u65e0\u6cd5\u6302\u8f7d \u6a21\u62df\u65ad\u7535\u540e\u91cd\u542f \"\"\" [ root@localhost ~ ] # umount /mnt [ root@localhost ~ ] # mount /dev/sdc1 /mnt/ mount: /dev/sdc1 \u5199\u4fdd\u62a4,\u5c06\u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6302\u8f7d mount: \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u9519\u8bef\u3001\u9009\u9879\u9519\u8bef\u3001/dev/sdc1 \u4e0a\u6709\u574f\u8d85\u7ea7\u5757\u3001 \u7f3a\u5c11\u4ee3\u7801\u9875\u6216\u52a9\u624b\u7a0b\u5e8f\uff0c\u6216\u5176\u4ed6\u9519\u8bef \u6709\u4e9b\u60c5\u51b5\u4e0b\u5728 syslog \u4e2d\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u6709\u7528\u4fe1\u606f- \u8bf7\u5c1d\u8bd5 dmesg | tail \u8fd9\u6837\u7684\u547d\u4ee4\u770b\u770b.. ## -- \u5410\u69fd\u4e00\u4e0b: vm\u865a\u62df\u673a\u4e0a\u8fdb\u884c\u6a21\u62df,\u76f4\u63a5\u628a/dev/sdc1\u5206\u533a\u7ed9\u6211\u5e72\u6ca1\u4e86..\u65e0\u6cd5\u5f00\u5c55\u4fee\u590d\u7684\u5b9e\u9a8c\u4e86.. ## -- \u4fee\u590d\u90e8\u5206\u5c31\u542c\u7406\u8bba\u5427!! [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 20G 0 disk \u6587\u4ef6\u7cfb\u7edf\u635f\u574f\u540e,\u82e5\u4e0d\u80fd\u6210\u529f\u91cd\u542f,\u53ef\u4ee5\u7528\u5355\u7528\u6237\u6a21\u5f0f(\u8fdb\u53bb\u65e0\u6302\u8f7d)\u3001\u5149\u76d8\u4fee\u590d\u6a21\u5f0f\u6765\u7ba1\u7406\u64cd\u4f5c\u672c\u5730\u786c\u76d8\u4e2d\u7684\u4e1c\u897f...","title":"\u6a21\u62df\u6587\u4ef6\u7cfb\u7edf\u635f\u574f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#_10","text":"\u4f7f\u7528 xfs_repair \u547d\u4ee4\u5f3a\u5236\u4fee\u590d\u540e, \u6570\u636e\u4e22\u5931, \u6240\u4ee5\u6b64\u65f6\u4fee\u590d\u7684\u610f\u4e49\u5728\u4e8e\u53ef\u7528, \u6240\u4ee5\u6570\u636e\u8981\u6709\u5907\u4efd\u610f\u8bc6... xfs_repair /dev/sdc1 # -- \u4fee\u590d\u65f6\u5148\u5c1d\u8bd5\u8fd9\u6761\u547d\u4ee4 xfs_repair -L /dev/sdb1 # -- \u82e5\u4e0a\u4e00\u6761\u547d\u4ee4\u5931\u8d25,\u8fdb\u884c\u5f3a\u5236\u4fee\u590d mount /dev/sdc1 /mnt/ # -- \u91cd\u65b0\u6302\u8f7d \u82e5\u662fext\u6587\u4ef6\u7cfb\u7edf,\u4fee\u590d\u9700\u8981\u7528fsck\u547d\u4ee4 # -y \u5bf9\u6240\u6709\u95ee\u9898\u90fd\u56de\u7b54 \"yes\" # -f \u5373\u4f7f\u6587\u4ef6\u7cfb\u7edf\u6807\u8bb0\u4e3a clean \u4e5f\u5f3a\u5236\u8fdb\u884c\u68c0\u67e5 fsck -f -y /dev/sda1","title":"\u6587\u4ef6\u7cfb\u7edf\u4fee\u590d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#xfs","text":"","title":"xfs\u6587\u4ef6\u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#xfsdump","text":"\u5168\u91cf\u5907\u4efd + \u589e\u91cf\u5907\u4efd \u7b2c\u4e00\u6b21\u5907\u4efd\u662f\u5168\u91cf\u5907\u4efd,\u589e\u91cf\u5907\u4efd\u662f\u548c\u4e0a\u4e00\u6b21\u7684\u5907\u4efd\u8fdb\u884c\u6bd4\u8f83, \u4ec5\u5907\u4efd\u6709\u5dee\u5f02\u7684\u6587\u4ef6... [ root@localhost ~ ] # rpm -qf `which xfsdump` xfsdump-3.1.7-1.el7.x86_64 [ root@localhost ~ ] # rpm -qf `which xfsrestore` xfsdump-3.1.7-1.el7.x86_64 \u9009\u9879 \u9009\u9879 \u542b\u4e49 -l \u662fL\u7684\u5c0f\u5199, \u6307\u5b9alevel, \u67090~9\u517110\u4e2a\u7b49\u7ea7.\u9ed8\u8ba4\u503c\u4e3a0, \u5373\u5b8c\u5168\u5907\u4efd ; \u6570\u5b571\u81f39\u90fd\u662f\u589e\u91cf\u5907\u4efd!! -L \u6307\u5b9a\u8be5\u6b21\u5907\u4efd\u7684\u6807\u7b7e\u540d. -M \u7b80\u6613\u63cf\u8ff0\u4fe1\u606f, \u5173\u4e8e\u4ec0\u4e48\u4ec0\u4e48\u7684\u5907\u4efd -f \u5907\u4efd\u7684\u6587\u4ef6\u5b58\u653e\u7684\u8def\u5f84 + \u7a7a\u683c + \u9700\u8981\u5907\u4efd\u6587\u4ef6\u7684\u8def\u5f84(\u5907\u4efd\u6e90\u8def\u5f84) \u5207\u8bb0: \u5907\u4efd\u6e90\u8def\u5f84\u540e\u9762\u5343\u4e07\u4e0d\u8981\u52a0/\u659c\u6760 \"\"\" -- \u6570\u636e\u51c6\u5907 -- \"\"\" [ root@localhost ~ ] # mount | grep -E \"sdb3|sda1\" /dev/sdb3 on /opt type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/sda1 on /boot type xfs ( rw,relatime,attr2,inode64,noquota ) [ root@localhost ~ ] # cp -r /etc /opt/ [ root@localhost ~ ] # du -sh /opt 43M /opt [ root@localhost ~ ] # echo 111 > /opt/1.txt [ root@localhost ~ ] # ls /opt 1 .txt etc [ root@localhost ~ ] # cat /opt/1.txt 111 \"\"\" -- 1.\u5148\u505a\u5168\u91cf\u5907\u4efd -- \"\"\" ## -- \u5c06sdb3\u5206\u533a\u7684\u5185\u5bb9 \u5907\u4efd\u5230 sda1\u5206\u533a\u4e0b (\u5907\u4efd\u6e90\u4e0e\u5907\u4efd\u6587\u4ef6\u8981\u5206\u522b\u5c5e\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684\u786c\u76d8) [ root@localhost ~ ] # xfsdump -l 0 -L sdb3_bak -M sdb3_bak -f /boot/sdb3_bak_all /opt ... ... ... xfsdump: Dump Status: SUCCESS \"\"\" -- 2.\u505a\u589e\u91cf\u5907\u4efd \u505a\u4e86\u4e24\u6b21\u589e\u91cf\u5907\u4efd-- \"\"\" ## -- \u589e\u5220\u6539\u90fd\u5c5e\u4e8e\u589e\u91cf\u7684\u90e8\u5206 echo 222 >> /opt/1.txt echo 333 > /opt/2.txt # \u901a\u5e38\u4f1a\u5728\u589e\u91cf\u5907\u4efd\u6587\u4ef6\u540d\u4e0a\u52a0\u4e0a\u65f6\u95f4 xfsdump -l 1 -L sdb3_bak -M sdb3_bak -f /boot/sdb3_bak_add1 /opt echo 333333 > /opt/3.txt xfsdump -l 1 -L sdb3_bak -M sdb3_bak -f /boot/sdb3_bak_add2 /opt \"\"\" -- \u67e5\u770b -- \"\"\" # -- \u5907\u4efd\u6e90\u7684\u5927\u5c0f [ root@localhost ~ ] # du -sh /opt/ 43M /opt/ # -- \u5907\u4efd\u6587\u4ef6(\u5168\u91cf\u3001\u589e\u91cf)\u7684\u5927\u5c0f # \u53ef\u4ee5\u53d1\u73b0\u589e\u91cf\u5907\u4efdsdb3_bak_add1\u3001sdb3_bak_add2\u7684\u5927\u5c0f\u662f\u5c0f\u4e8e\u5168\u91cf\u5907\u4efd\u7684,\u5168\u91cf\u5907\u4efd\u7684\u5927\u5c0f\u662f\u5c0f\u4e8e\u5907\u4efd\u6e90\u7684 [ root@localhost ~ ] # ll -h /boot | grep sdb3_bak -rw-r--r-- 1 root root 23K 8\u6708 26 17 :41 sdb3_bak_add1 -rw-r--r-- 1 root root 24K 8\u6708 26 17 :41 sdb3_bak_add2 -rw-r--r-- 1 root root 37M 8\u6708 26 17 :41 sdb3_bak_all \u4f7f\u7528\u9650\u5236 1 .\u5fc5\u987b\u7528root\u6743\u9650 2 .\u53ea\u80fd\u5907\u4efd\u5df2\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf 3 .\u53ea\u80fd\u5907\u4efdXFS\u6587\u4ef6\u7cfb\u7edf 4 .\u53ea\u80fd\u7528xfsrestore\u8fdb\u884c\u6062\u590d 5 .\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u7684UUID\u6765\u5206\u8fa8\u5907\u4efd\u6863,\u56e0\u6b64\u4e0d\u80fd\u5907\u4efd\u76f8\u540cUUID\u7684\u6587\u4ef6\u7cfb\u7edf","title":"\u5907\u4efd\u00a0xfsdump"},{"location":"1_linux%E5%9F%BA%E7%A1%80/14_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BC%A0%E7%BB%9F%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/#xfsrestore","text":"\"\"\" -- \u5220\u9664/opt\u91cc\u6240\u6709\u7684\u5185\u5bb9 --\"\"\" [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt etc 0 directories, 3 files [ root@localhost ~ ] # rm -rf /opt/* \"\"\" -- \u4f9d\u6b21\u6062\u590d\u5168\u91cf\u3001\u589e\u91cf1\u3001\u589e\u91cf2 -- \"\"\" # \u5168\u91cf xfsrestore -f /boot/sdb3_bak_all /opt/ [ root@localhost ~ ] # ls /opt 1 .txt etc [ root@localhost ~ ] # cat /opt/1.txt 111 # \u589e\u91cf1 xfsrestore -f /boot/sdb3_bak_add1 /opt/ [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt etc [ root@localhost ~ ] # cat /opt/1.txt 111 222 [ root@localhost ~ ] # cat /opt/2.txt 333 # \u589e\u91cf2 xfsrestore -f /boot/sdb3_bak_add2 /opt/ [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt etc [ root@localhost ~ ] # cat /opt/3.txt 333333","title":"\u6062\u590d\u00a0xfsrestore"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/","text":"\u4e3a\u4ec0\u4e48\u8981\u7528LVM \u00b6 \u4f20\u7edf\u7684\u78c1\u76d8\u7ba1\u7406\u6211\u4eec\u5c06\u67d0\u4e2a\u786c\u76d8\u901a\u8fc7fdisk\u6216gdisk\u5de5\u5177\u8fdb\u884c\u9694\u65ad,\u5212\u5206\u51fa\u4e86\u4e00\u4e2a\u4e2a\u7684\u5206\u533a,\u7d27\u63a5\u7740,\u5bf9\u8fd9\u4e9b\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316,\u5373\u5728\u5206\u533a\u4e0a\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf,\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u8fd9\u4e2a\u8f6f\u4ef6\u6765\u5bf9\u5206\u533a\u8fdb\u884c\u7ba1\u7406... So, \u5206\u533a \u662f\u7ad9\u5728 \u786c\u4ef6\u89d2\u5ea6 \u7684\u8bf4\u6cd5, \u6587\u4ef6\u7cfb\u7edf \u662f\u7ad9\u5728 \u8f6f\u4ef6\u89d2\u5ea6 \u7684\u8bf4\u6cd5!!! \u5728\u6211\u4eec\u5bf9\u78c1\u76d8\u5206\u533a\u7684\u5927\u5c0f\u8fdb\u884c\u89c4\u5212\u65f6, \u5f80\u5f80\u4e0d\u80fd\u786e\u5b9a\u6bcf\u4e2a\u5206\u533a\u4f7f\u7528\u7684\u7a7a\u95f4\u5927\u5c0f, \u53ea\u80fd\u51ed\u7ecf\u9a8c\u5206\u914d\u4e00\u4e2a\u5927\u5c0f.. \u6bcf\u4e2a\u5206\u533a\u7684\u5927\u5c0f\u5c31\u56fa\u5b9a\u6b7b\u4e86.. \u8fd9\u6837\u505a\u4f1a\u6709\u70b9\u5f0a\u7aef: \u82e5\u5206\u533a\u8bbe\u7f6e\u7684\u8fc7\u5927, \u5c31\u767d\u767d\u6d6a\u8d39\u4e86\u78c1\u76d8\u7a7a\u95f4; \u82e5\u5206\u533a\u8bbe\u7f6e\u7684\u8fc7\u5c0f, \u5c31\u4f1a\u5bfc\u81f4\u7a7a\u95f4\u4e0d\u591f\u7528\u7684\u60c5\u51b5\u51fa\u73b0; \u9488\u5bf9A\u78c1\u76d8\u7a7a\u95f4\u4e0d\u591f\u7528,\u6709\u4e2a\u89e3\u51b3\u65b9\u6848\u662f\u65b0\u589e\u5757\u786c\u76d8(\u4e0d\u5206\u533a,\u6574\u4f53\u4f5c\u4e3a\u4e00\u4e2a\u5206\u533a),\u65b0\u589e\u7684\u786c\u76d8\u683c\u5f0f\u5316\u540e,\u5c06A\u78c1\u76d8\u4e2d\u7684\u67d0\u4e2a\u76ee\u5f55\u4f5c\u4e3a\u5176\u6302\u8f7d\u70b9.. \"\u5177\u4f53\u53ef\u4ee5\u53c2\u8003\u6587\u4ef6\u7cfb\u7edf\u90a3\u7684\u5b9e\u8df5\u6848\u4f8b\" ... \u5f88\u9ebb\u70e6,\u589e\u5927\u4e86\u7ba1\u7406\u96be\u5ea6 TnT \u4e0a\u8ff0\u7684\u95ee\u9898,\u53ef\u4ee5\u901a\u8fc7LVM\u6765\u89e3\u51b3.. LVM\u539f\u7406 \u00b6 PV\u7269\u7406\u5377 -- \u628a\u5e38\u89c4\u7684\u78c1\u76d8\u8bbe\u5907\u901a\u8fc7pvcreate\u547d\u4ee4\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316,\u5f62\u6210\u4e86\u7269\u7406\u5377 \u78c1\u76d8\u7a7a\u95f4\u53ef\u4ee5\u662f \u6574\u5757\u786c\u76d8( sda )\u4e5f\u53ef\u4ee5\u662f\u67d0\u5757\u76d8\u7684\u67d0\u4e2a\u5206\u533a( sdb5 ) PE\u57fa\u672c\u5355\u5143 -- \u7269\u7406\u5377\u91cc\u6700\u5c0f\u7684\u5b58\u50a8\u5355\u4f4d,\u9ed8\u8ba4\u4e3a4MB VG\u5377\u7ec4 -- \u5c06\u591a\u4e2aPV\u6574\u5408\u5230\u4e00\u8d77,\u90a3\u4e48\u5377\u7ec4\u7684\u5927\u5c0f\u5c31\u662f\u591a\u4e2aPV\u5927\u5c0f\u4e4b\u548c.. \u6216\u8005\u8bf4, \u5c06\u8fd9\u4e9bPV\u91cc\u7684PE\u653e\u5230\u4e86\u4e00\u4e2a\u540d\u4e3aVG\u7684\u8d44\u6e90\u6c60\u91cc \u6ce8\u610f\u54e6, \u4e0d\u4e00\u5b9a\u8981\u5c06\u6240\u6709\u7684pv\u653e\u5230\u4e00\u4e2avg\u91cc LV\u903b\u8f91\u5377 -- \u4ece\u5377\u7ec4\u4e2d\u5212\u5206\u9700\u8981\u7684\u7a7a\u95f4\u5927\u5c0f\u51fa\u6765, \u7528\u6237\u4ec5\u9700\u5bf9\u5176\u683c\u5f0f\u5316\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf,\u6302\u8f7d\u540e\u5373\u53ef\u4f7f\u7528 LV\u53ef\u7531VG\u91cc\u9762\u4e0d\u540c\u7684PV\u91cc\u7684\u4e00\u4e2a\u4e2aPE\u7ec4\u6210...\u5373\u8de8\u8d8a\u78c1\u76d8 VG\u4e0d\u591f\u7528\u53ef\u4ee5\u6269\u5bb9,\u52a0PV\u8fdb\u53bb\u5373\u53ef. \u901a\u5e38\u4e0d\u4f1a\u4ece\u5377\u7ec4\u4e2d\u79fb\u9664\u78c1\u76d8... LV\u53ef\u4ee5\u52a8\u6001\u6269\u5bb9/\u7f29\u5bb9: \u4eceVG\u91cc\u518d\u62ff\u51e0\u4e2aPE/\u8fd8\u51e0\u4e2aPE\u7ed9VG.. \u867d\u7136LVM\u652f\u6301LV\u7f29\u5bb9,\u4f46LV\u683c\u5f0f\u5316\u82e5\u5236\u4f5c\u6210xfs\u6587\u4ef6\u7cfb\u7edf,\u662f\u4e0d\u652f\u6301\u7f29\u5bb9\u7684 \u6253\u4e2a\u6bd4\u65b9,\u78c1\u76d8\u7a7a\u95f4\u662f\u5c0f\u9ea6,PV\u5c06\u4e00\u675f\u675f\u5c0f\u9ea6\u90fd\u78e8\u6210\u4e86\u9762\u7c89,PE\u5c06\u8fd9\u4e9b\u9762\u7c89\u6574\u5408\u5230\u4e86\u4e00\u8d77\u63c9\u6210\u4e86\u4e00\u4e2a\u9762\u56e2,LV\u5c31\u662f\u5728\u5c06\u9762\u56e2\u5207\u6210\u4e00\u5757\u4e00\u5757\u7684. LVM\u4f18\u7f3a\u70b9 \u00b6 \u4f18\u70b9 1> \u53ef\u4ee5\u5728\u7cfb\u7edf\u8fd0\u884c\u7684\u72b6\u6001\u4e0b\u52a8\u6001\u7684\u6269\u5c55\u6587\u4ef6\u7cfb\u7edf(LV\u683c\u5f0f\u5316\u5e76\u6302\u8f7d\u540e)\u7684\u5927\u5c0f \u200b 2> \u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u8de8\u591a\u4e2a\u78c1\u76d8, \u56e0\u6b64\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u4e0d\u4f1a\u53d7\u7269\u7406\u78c1\u76d8\u7684\u9650\u5236 \u200b 3> \u53ef\u4ee5\u589e\u52a0\u65b0\u7684\u78c1\u76d8\u5230LVM\u7684\u5b58\u50a8\u6c60VG\u4e2d \u200b 4> \u53ef\u4ee5\u4ee5\u955c\u50cf\u7684\u65b9\u5f0f\u5197\u4f59\u91cd\u8981\u7684\u6570\u636e\u5230\u591a\u4e2a\u7269\u7406\u78c1\u76d8 -- LVM\u7684\u5feb\u7167,\u7528\u4e8e\u8fdb\u884c\u5907\u4efd \u200b 5> \u65b9\u4fbf\u5bfc\u51fa\u6574\u4e2a\u5377\u7ec4\u5230\u53e6\u5916\u4e00\u53f0\u673a\u5668(\u57fa\u672c\u7528\u4e0d\u5230,\u4e86\u89e3\u5373\u53ef) \u7f3a\u70b9 1> \u753b\u4e2a\u89e3\u85d5\u56fe \u786c\u4ef6 - LVM - \u6587\u4ef6\u7cfb\u7edf \u7b80\u5355\u6765\u8bf4,LVM\u662f\u5904\u4e8e\u5206\u533a\u4e0e\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u7684\u4e00\u4e2a\u8f6f\u4ef6!! \u66f4\u9ad8\u7ea7\u4e86,\u4f46\u5b58\u53d6\u6027\u80fd\u6536\u5230\u4e86\u5f71\u54cd \u200b 2> \u5f53VG\u4e2d\u7684\u67d0\u4e2aPV\u6240\u5728\u7684\u78c1\u76d8\u7a7a\u95f4\u574f\u4e86, \u6574\u4e2a\u5377\u7ec4\u90fd\u4f1a\u53d7\u5230\u5f71\u54cd \u200b \u56e0\u4e3aLV\u91cc\u9762\u7684PE\u662f\u8de8\u8d8a\u78c1\u76d8\u7684... \u6240\u4ee5\u8981\u5c3d\u91cf\u4fdd\u8bc1\u78c1\u76d8\u4e0d\u4f1a\u635f\u574f.. \u200b \u89e3\u51b3\u65b9\u6848 : \u5e95\u5c42\u7528RAID + \u4e0a\u5c42LVM = \u65e2\u6709\u5197\u4f59\u53c8\u6709\u52a8\u6001\u6269\u5c55 LVM\u7684\u57fa\u672c\u4f7f\u7528 \u00b6 \u7b80\u5199\u903b\u8f91: (\u5927\u6982\u53ea\u6709\u6211\u80fd\u4e00\u773c\u770b\u61c2 Hhhh) sdb + sdc1 -- vg1 -- lv1_from_vg1(/test1)\u3001lv2_from_vg1(/test2) sdc2 + sdc3 -- vg2 -- lv1_from_vg2(/test3)\u3001lv2_from_vg2(/test4) # -- \u5148\u79fb\u9664\u524d\u9762\u5b9e\u9a8c\u73af\u5883\u4e2d\u6dfb\u52a0\u7684\u786c\u76d8 \u65b0\u5efa20G 30G 40G\u4e09\u5757\u786c\u76d8sdb sdc sdd \u865a\u62df\u673a\u4e0d\u652f\u6301\u70ed\u63d2\u62d4 \u5173\u673a\u91cd\u542f\u751f\u6548 # -- \u5728\u771f\u5b9e\u7684\u5b9e\u9a8c\u73af\u5883\u4e2d(\u771f\u673a) \u591a\u5757\u786c\u76d8\u9700\u8981\u505aRAID; \u4e91\u670d\u52a1\u5668\u4e0d\u9700\u8981\u505aRAID.. fdisk /dev/sdc # -- \u5236\u4f5c5\u4e2a\u5206\u533a 3\u4e3b1\u62691\u903b\u8f91 [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 30G 0 disk \u251c\u2500sdc1 8 :33 0 10G 0 part \u251c\u2500sdc2 8 :34 0 5G 0 part \u251c\u2500sdc3 8 :35 0 5G 0 part \u251c\u2500sdc4 8 :36 0 1K 0 part \u2514\u2500sdc5 8 :37 0 5G 0 part \"\"\"-- 1.\u5236\u4f5cpv,\u53ef\u4ee5\u5bf9\u6574\u5757\u76d8\u505a,\u4e5f\u53ef\u4ee5\u5bf9\u5206\u533a\u505a --\"\"\" pvcreate /dev/sdb pvcreate /dev/sdc1 pvcreate /dev/sdc2 pvcreate /dev/sdc3 \"\"\"-- 2.\u5236\u4f5cvg:\u5c06pv\u5212\u5165vg\u4e2d --\"\"\" ## vgcreate vg3 /dev/sdd \u5c06\u505a\u8fc7pv\u7684\u67d0\u4e00\u5757\u76d8\u6216\u67d0\u4e00\u4e2a\u5206\u533a\u5355\u72ec\u505avg\u4e5f\u53ef\u4ee5 vgcreate vg1 /dev/sdb /dev/sdc1 vgcreate vg2 /dev/sdc2 /dev/sdc3 \"\"\"-- 3.\u521b\u5efa\u903b\u8f91\u5377lv --\"\"\" ## -L \u5927\u5c0f -n \u540d\u5b57 lvcreate -L 1G -n lv1_from_vg1 vg1 lvcreate -L 2G -n lv2_from_vg1 vg1 lvcreate -L 3G -n lv1_from_vg2 vg2 lvcreate -L 4G -n lv2_from_vg2 vg2 \"\"\"-- \u67e5\u770b --\"\"\" ## -- \u8fd8\u53ef\u4ee5\u4f7f\u7528 pvscan \u547d\u4ee4 [ root@localhost ~ ] # pvs PV VG Fmt Attr PSize PFree /dev/sda2 centos lvm2 a-- < 19 .00g 0 # -- \u8fd9\u4e2a\u662f\u5b89\u88c5centos\u65f6,linux\u81ea\u5df1\u5f04\u7684 /dev/sdb vg1 lvm2 a-- < 20 .00g < 17 .00g /dev/sdc1 vg1 lvm2 a-- < 10 .00g < 10 .00g /dev/sdc2 vg2 lvm2 a-- < 5 .00g < 2 .00g /dev/sdc3 vg2 lvm2 a-- < 5 .00g 1020 .00m [ root@localhost ~ ] # lvs LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync Convert root centos -wi-ao---- < 17 .00g swap centos -wi-ao---- 2 .00g lv1_from_vg1 vg1 -wi-a----- 1 .00g lv2_from_vg1 vg1 -wi-a----- 2 .00g lv1_from_vg2 vg2 -wi-a----- 3 .00g lv2_from_vg2 vg2 -wi-a----- 4 .00g ## -- \u53ef\u4ee5\u770b\u5230vg1\u7531\u4e24\u4e2apv\u7ec4\u6210,\u5212\u5206\u4e862\u4e2alv; vg1\u603b\u5927\u5c0f\u4e3a30G,\u51cf\u53bb2G\u548c1G\u8fd8\u526927G.. [ root@localhost ~ ] # vgs VG #PV #LV #SN Attr VSize VFree centos 1 2 0 wz--n- < 19 .00g 0 vg1 2 2 0 wz--n- 29 .99g 26 .99g vg2 2 2 0 wz--n- 9 .99g 2 .99g \"\"\"-- 4.\u683c\u5f0f\u5316(\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf)\u4e0e\u6302\u8f7d --\"\"\" ## -- \u521b\u5efa\u7684vg\u5377\u7ec4\u4f1a\u5728/dev\u4e0b\u9762 mkfs.xfs /dev/vg1/lv1_from_vg1 mkfs.xfs /dev/vg1/lv2_from_vg1 mkfs.xfs /dev/vg2/lv1_from_vg2 mkfs.xfs /dev/vg2/lv2_from_vg2 mkdir /test1 mkdir /test2 mkdir /test3 mkdir /test4 mount /dev/vg1/lv1_from_vg1 /test1 mount /dev/vg1/lv2_from_vg1 /test2 mount /dev/vg2/lv1_from_vg2 /test3 mount /dev/vg2/lv2_from_vg2 /test4 [ root@localhost ~ ] # mount | grep test ## -- /dev/mapper/vg1-lv1_from_vg1 \u5c31\u662f /dev/vg1/lv1_from_vg1 \u4e0d\u8981\u592a\u5728\u610f.. /dev/mapper/vg1-lv1_from_vg1 on /test1 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg1-lv2_from_vg1 on /test2 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg2-lv1_from_vg2 on /test3 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg2-lv2_from_vg2 on /test4 type xfs ( rw,relatime,attr2,inode64,noquota ) \u5728\u7ebf\u52a8\u6001\u6269\u5bb9 \u00b6 \u52a8\u6001\u6269\u5bb9\u5373\u5728\u4e0d\u7528\u5378\u8f7d\u7684\u60c5\u51b5\u4e0b\u5bf9LV\u8fdb\u884c\u6269\u5bb9 lvextend -L [+]MGT /dev/VG_NAME/VL_NAME \u6ce8\u610f: -L 100M \u4e0e -L +100M\u4e0d\u662f\u4e00\u4e2a\u610f\u601d. \u524d\u8005\u4ee3\u8868\u6269\u5bb9\u81f3100M(\u4e0d\u80fd\u5c0f\u4e8e\u539f\u6765\u7684\u5927\u5c0f), \u540e\u8005\u4ee3\u8868\u5728\u539f\u6709\u7684\u57fa\u7840\u4e0a\u6269\u5bb9100M \u4e0d\u8981\u7f29\u5bb9\uff01\uff01\uff01\u5e76\u4e14xfs\u6587\u4ef6\u7cfb\u7edf\u4e0d\u652f\u6301\u7f29\u5bb9... vg\u5bb9\u91cf\u591f \u00b6 \u7ed91G\u5927\u5c0f\u7684lv1_from_vg1\u6269\u5bb9\u81f35000M, \u67e5\u770bvg1\u5bb9\u91cf\u662f\u591f\u7684, \u6240\u4ee5lv1_from_vg1\u53ef\u76f4\u63a5\u6269\u5bb9 [ root@localhost ~ ] # vgs | grep vg1 vg1 2 2 0 wz--n- 29 .99g 26 .99g [ root@localhost ~ ] # lvs | grep lv1_from_vg1 lv1_from_vg1 vg1 -wi-ao---- 1 .00g [ root@localhost ~ ] # lvextend -L 5000M /dev/vg1/lv1_from_vg1 # \u903b\u8f91\u5377 vg1/lv1_from_vg1 \u7684\u5927\u5c0f\u4ece 1.00 GiB(256 \u4e2a\u6269\u5c55\u533a) \u66f4\u6539\u4e3a 4.88 GiB(1250 \u4e2a\u6269\u5c55\u533a). # \u903b\u8f91\u5377 vg1/lv1_from_vg1 \u5df2\u6210\u529f\u8c03\u6574\u5927\u5c0f Size of logical volume vg1/lv1_from_vg1 changed from 1 .00 GiB ( 256 extents ) to 4 .88 GiB ( 1250 extents ) . Logical volume vg1/lv1_from_vg1 successfully resized. [ root@localhost ~ ] # vgs | grep vg1 # \u7b80\u5355\u9a8c\u7b97\u4e0b lv\u589e\u52a0\u7684\u7b49\u4e8evg\u51cf\u5c11\u7684 4.88 - 1 = 26.99 - 23.11 vg1 2 2 0 wz--n- 29 .99g < 23 .11g [ root@localhost ~ ] # lvs | grep lv1_from_vg1 lv1_from_vg1 vg1 -wi-ao---- 4 .88g xfs_growfs /dev/vg1/lv1_from_vg1 ## -!!! \u6269\u5c55\u903b\u8f91\u5377\u540e\u9700\u8981\u66f4\u65b0xfs\u6587\u4ef6\u7cfb\u7edf df -h\u624d\u80fd\u770b\u5230\u9884\u671f\u7684\u7ed3\u679c vg\u5bb9\u91cf\u4e0d\u591f \u00b6 \u7ed93G\u5927\u5c0f\u7684lv1_from_vg2\u6269\u5bb9\u81f311G, \u67e5\u770bvg2\u5bb9\u91cf\u4e3a3G, \u662f\u4e0d\u591f\u7684, \u9700\u8981\u65b0\u589epv\u6269\u5230vg2\u91cc [ root@localhost ~ ] # vgs | grep vg2 vg2 2 2 0 wz--n- 9 .99g 2 .99g [ root@localhost ~ ] # lvs | grep lv1_from_vg2 lv1_from_vg2 vg2 -wi-ao---- 3 .00g # -- lv1_from_vg2\u6269\u5bb9\u81f311G\u9700\u8981\u65b0\u589e8G sdc5\u53ea\u67095\u4e2aG \u4e0d\u5f97\u884c. \u6240\u4ee5\u6211\u4eec\u4f7f\u752840G\u5bb9\u91cf\u7684sdd [ root@localhost ~ ] # lsblk /dev/sdc5 /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc5 8 :37 0 5G 0 part sdd 8 :48 0 40G 0 disk pvcreate /dev/sdd vgextend vg2 /dev/sdd [ root@localhost ~ ] # vgs | grep vg2 vg2 3 2 0 wz--n- < 49 .99g < 42 .99g lvextend -L 10G /dev/vg2/lv1_from_vg2 lvextend -L +1G /dev/vg2/lv1_from_vg2 [ root@localhost ~ ] # lvs | grep lv1_from_vg2 lv1_from_vg2 vg2 -wi-ao---- 11 .00g xfs_growfs /dev/vg2/lv1_from_vg2 ## -!!! \u6269\u5c55\u903b\u8f91\u5377\u540e\u9700\u8981\u66f4\u65b0xfs\u6587\u4ef6\u7cfb\u7edf df -h\u624d\u80fd\u770b\u5230\u9884\u671f\u7684\u7ed3\u679c \u5220\u9664 \u00b6 \u4e00\u53e5\u8bdd, \u5148\u5c06vg\u4e2d\u6240\u6709lv\u7684\u6302\u8f7d\u70b9\u90fd\u5378\u8f7d, \u518d\u5220\u9664vg, \u6700\u540e\u5220\u9664vg\u4e2d\u7684pv \"\"\" -- \u5220\u9664,\u8bb2\u7a76\u4e2a\u987a\u5e8f lv\u5148\u5378\u8f7d\u6302\u8f7d\u70b9\u7136\u540e\u5220\u9664 lv\u5220\u5e72\u51c0\u540e\u518d\u5220\u9664vg \u6700\u540e\u5220\u9664pv --\"\"\" # \u5220\u9664lv\u4e4b\u524d\u9700\u8981\u5148\u5378\u8f7d\u6302\u8f7d\u70b9 [ root@localhost ~ ] # umount /test3 [ root@localhost ~ ] # lvremove /dev/vg2/lv1_from_vg2 # \u56e0\u4e3a\u6302\u8f7d\u540e,\u53ef\u80fd\u4ea7\u751f\u8fc7\u6570\u636e,\u6240\u4ee5\u95ee\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f Do you really want to remove active logical volume vg2/lv1_from_vg2? [ y/n ] : y Logical volume \"lv1_from_vg2\" successfully removed [ root@localhost ~ ] # vgs VG #PV #LV #SN Attr VSize VFree centos 1 2 0 wz--n- < 19 .00g 0 vg1 2 2 0 wz--n- 29 .99g < 23 .11g vg2 3 1 0 wz--n- < 49 .99g < 45 .99g # \u56e0\u4e3avg2\u91cc\u8fd8\u6709\u4e2a\u5df2\u7ecf\u6302\u8f7d\u7684lv,\u6240\u4ee5\u5220\u9664vg2\u4e0d\u6210\u529f [ root@localhost ~ ] # vgremove vg2 Do you really want to remove volume group \"vg2\" containing 1 logical volumes? [ y/n ] : y # \u903b\u8f91\u5377 vg2/lv2_from_vg2 \u5305\u542b\u4e00\u4e2a\u6b63\u5728\u4f7f\u7528\u7684\u6587\u4ef6\u7cfb\u7edf Logical volume vg2/lv2_from_vg2 contains a filesystem in use. [ root@localhost ~ ] # umount /test4 [ root@localhost ~ ] # vgremove vg2 Do you really want to remove volume group \"vg2\" containing 1 logical volumes? [ y/n ] : y # \u76f8\u5f53\u4e8e\u5e2e\u5fd9\u6267\u884c\u4e86 lvremove /dev/vg2/lv2_from_vg2 \u547d\u4ee4 Do you really want to remove active logical volume vg2/lv2_from_vg2? [ y/n ] : y Logical volume \"lv2_from_vg2\" successfully removed Volume group \"vg2\" successfully removed # -- \u6210\u529f\u5220\u9664vg2 # \u5220pv:\u53ea\u80fd\u5220\u6389\u90a3\u4e9b\u4e0d\u5c5e\u4e8e\u4efb\u4f55vg\u7684pv [ root@localhost ~ ] # pvs # \u53ef\u4ee5\u770b\u5230\u539f\u6765\u5728vg2\u4e2d\u76843\u4e2apv\u5df2\u7ecf\u95f2\u7f6e\u5566 PV VG Fmt Attr PSize PFree /dev/sda2 centos lvm2 a-- < 19 .00g 0 /dev/sdb vg1 lvm2 a-- < 20 .00g 13 .11g /dev/sdc1 vg1 lvm2 a-- < 10 .00g < 10 .00g /dev/sdc2 lvm2 --- 5 .00g 5 .00g /dev/sdc3 lvm2 --- 5 .00g 5 .00g /dev/sdd lvm2 --- 40 .00g 40 .00g pvremove /dev/sdb2 pvremove /dev/sdb3 pvremove /dev/sdd # -- \u5378\u8f7d\u7684pv\u53ef\u4ee5\u4e0d\u4f7f\u7528lvm\u6309\u7167\u4f20\u7edf\u7684\u78c1\u76d8\u7ba1\u7406\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c\u5566.. \u683c\u5916\u5b9e\u9a8c: sdb\u4f7f\u7528\u5b8c\u4e86\u624d\u4f1a\u4f7f\u7528sdc1 ,\u5b9e\u9645\u4e0a\u591a\u5c11\u4f1a\u7528\u70b9sdc1,\u4f46\u5f88\u5c11\u663e\u793a\u4e0d\u51fa\u6765... [ root@localhost ~ ] # lsblk /dev/sdb /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT # \u5f53\u65f6\u5f88\u7591\u60d1\u7684\u4e00\u70b9,sdc1\u5206\u533a\u4e0b\u9762\u600e\u4e48\u6ca1\u663e\u793alv\u7684\u540d\u5b57\u5462\uff1f sdb 8 :16 0 20G 0 disk \u251c\u2500vg1-lv1_from_vg1 253 :2 0 4 .9G 0 lvm /test1 \u2514\u2500vg1-lv2_from_vg1 253 :3 0 2G 0 lvm /test2 sdc 8 :32 0 30G 0 disk \u251c\u2500sdc1 8 :33 0 10G 0 part \u251c\u2500sdc2 8 :34 0 5G 0 part # -- pv\u5220\u9664\u4e86,\u5212\u5206\u7684\u5206\u533a\u8fd8\u662f\u5728\u7684 \u251c\u2500sdc3 8 :35 0 5G 0 part \u251c\u2500sdc4 8 :36 0 1K 0 part \u2514\u2500sdc5 8 :37 0 5G 0 part \"\"\" \u7ecf\u8fc7\u5206\u6790,sdb(20G)+sdc1(10G)\u603b\u517130G,\u73b0\u76ee\u524d,lv1_from_vg1 5G\u3001lv2_from_vg1 2G \u6211\u4eec\u5b9e\u9a8c\u5c06lv1_from_vg1\u6269\u5bb9\u81f322G \u8d85\u8fc7sdb\u5bb9\u91cf\u768420G \"\"\" lvextend -L 22G /dev/vg1/lv1_from_vg1 [ root@localhost ~ ] # pvs PV VG Fmt Attr PSize PFree /dev/sda2 centos lvm2 a-- < 19 .00g 0 /dev/sdb vg1 lvm2 a-- < 20 .00g 0 /dev/sdc1 vg1 lvm2 a-- < 10 .00g 5 .99g ## -- 20+10-22-2 = 6 /dev/sdd lvm2 --- 40 .00g 40 .00g [ root@localhost ~ ] # lsblk /dev/sdb /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8 :16 0 20G 0 disk \u251c\u2500vg1-lv1_from_vg1 253 :2 0 22G 0 lvm /test1 \u2514\u2500vg1-lv2_from_vg1 253 :3 0 2G 0 lvm /test2 sdc 8 :32 0 30G 0 disk \u251c\u2500sdc1 8 :33 0 10G 0 part \u2502 \u2514\u2500vg1-lv1_from_vg1 253 :2 0 22G 0 lvm /test1 ## -- \u770b!!\u5b83\u51fa\u73b0\u4e86..sdb\u6ee1\u4e86\u624d\u4f7f\u7528sdc1 \u251c\u2500sdc2 8 :34 0 5G 0 part \u251c\u2500sdc3 8 :35 0 5G 0 part \u251c\u2500sdc4 8 :36 0 1K 0 part \u2514\u2500sdc5 8 :37 0 5G 0 part LVM\u5feb\u7167 \u00b6 \u7b80\u5355\u6765\u8bf4,\u505alvm\u5feb\u7167\u5c31\u662f\u7ed9\u67d0\u4e2alv\u505a\u5907\u4efd vm\u865a\u62df\u673a\u4e5f\u6709\u5feb\u7167,\u70b9\u51fbvm\u67d0\u4e00\u4e2a\u5feb\u7167,\u865a\u62df\u673a\u5c31\u6062\u590d\u5230\u5feb\u7167\u90a3\u4e00\u65f6\u523b\u7684\u72b6\u6001..\u5728\u8fd9\u4e00\u5c42\u9762LVM\u5feb\u7167\u662f\u76f8\u540c\u7684.. \u5236\u4f5c\u5feb\u7167 \u00b6 \u88ab\u505a\u5feb\u7167\u7684lv : lv2_from_vg1 \u5feb\u7167 : lv2_from_vg1_snap 1> lvm\u5feb\u7167\u7684\u672c\u8d28\u5c31\u662f\u521b\u5efa\u4e00\u4e2a\u7279\u6b8a\u7684LV\u903b\u8f91\u5377.. \u5feb\u7167\u4e0e\u88ab\u505a\u5feb\u7167\u7684lv\u5728\u540c\u4e00vg\u91cc 2> lv2_from_vg1 \u4e0e lv2_from_vg1_snap\u7684UUID\u662f\u4e00\u6837\u7684.. 3> lv2_from_vg1\u91cc\u7684\u5185\u5bb9\u6539\u53d8\u540e,lv2_from_vg1_snap\u5feb\u7167\u91cc\u7684\u5185\u5bb9\u662f\u4e0d\u4f1a\u540c\u6b65\u6539\u53d8\u7684!! # -- /test2\u662flv2_from_vg1\u903b\u8f91\u5377xfs\u683c\u5f0f\u5316\u540e\u7684\u6302\u8f7d\u70b9 [ root@localhost ~ ] # echo 111 > /test2/1.txt [ root@localhost ~ ] # echo 222 > /test2/2.txt [ root@localhost ~ ] # echo 333 > /test2/3.txt [ root@localhost ~ ] # tree /test2 /test2 \u251c\u2500\u2500 1 .txt \u251c\u2500\u2500 2 .txt \u2514\u2500\u2500 3 .txt 0 directories, 3 files # -- \u5bf9vg1\u5377\u7ec4\u4e0b\u7684lv2_from_vg1\u903b\u8f91\u5377\u505a\u5feb\u7167 \u9996\u5148\u8981\u4fdd\u8bc1vg1\u8981\u6709\u5269\u4f59\u7a7a\u95f4 # -- vg1\u8fd8\u52696g\u7684\u7a7a\u95f4 [ root@localhost ~ ] # vgs VG #PV #LV #SN Attr VSize VFree centos 1 2 0 wz--n- < 19 .00g 0 vg1 2 2 0 wz--n- 29 .99g 5 .99g # -- \u5feb\u7167\u672c\u8d28\u4e0a\u4e5f\u662f\u5236\u4f5c\u4e00\u4e2alv. \u5bf9\u54ea\u4e2alv\u505a\u5feb\u7167,\u5c31\u4f1a\u5411\u8be5lv\u6240\u5728\u7684vg\u8981\u7a7a\u95f4. # -s \u5373snapshot,\u8868\u660e\u662f\u505a\u5feb\u7167 # -- lvcreate -L \u5feb\u7167\u5927\u5c0f -s -n \u5feb\u7167\u540d\u5b57 \u88ab\u505a\u5feb\u7167\u7684lv\u7684\u8def\u5f84 # -- \u5feb\u7167\u5148\u6307\u5b9a1G,\u4e0d\u591f\u7684\u8bdd,\u53ef\u4ee5\u52a8\u6001\u6269\u5bb9\u561b [ root@localhost ~ ] # lvcreate -L 1G -s -n lv2_from_vg1_snap /dev/vg1/lv2_from_vg1 Logical volume \"lv2_from_vg1_snap\" created. [ root@localhost ~ ] # lvs LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync Convert root centos -wi-ao---- < 17 .00g swap centos -wi-ao---- 2 .00g lv1_from_vg1 vg1 -wi-ao---- 22 .00g # -- \u53ef\u4ee5\u770b\u5230\u5feb\u7167\u4e0e\u88ab\u505a\u5feb\u7167\u7684lv\u5728\u540c\u4e00vg\u91cc! lv2_from_vg1 vg1 owi-aos--- 2 .00g lv2_from_vg1_snap vg1 swi-a-s--- 1 .00g lv2_from_vg1 0 .01 # -- vg1-lv2_from_vg1\u4e0evg1-lv2_from_vg1_snap\u7684\u78c1\u76d8/\u5206\u533aUUID\u662f\u4e00\u6837\u7684!! [ root@localhost ~ ] # blkid | grep lv2_from_vg1 /dev/mapper/vg1-lv2_from_vg1: UUID = \"d0c4fc9b-3fea-409e-b7ab-d760c5c07c19\" TYPE = \"xfs\" /dev/mapper/vg1-lv2_from_vg1_snap: UUID = \"d0c4fc9b-3fea-409e-b7ab-d760c5c07c19\" TYPE = \"xfs\" # -- \u540c\u4e00\u4e2a\u78c1\u76d8\u8bbe\u5907\u53ef\u4ee5\u6709\u591a\u4e2a\u6302\u8f7d\u70b9,\u4f46\u6709\u76f8\u540cUUID\u7684\u4e24\u4e2a\u78c1\u76d8\u8bbe\u5907\u53ea\u80fd\u901a\u8fc7UUID\u6302\u8f7d\u5176\u4e2d\u4e00\u4e2a # -- \u53ef\u4ee5\u56de\u5fc6\u4e0b\u6c38\u4e45\u6302\u8f7d,\u5728/etc/fstab\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u5c31\u662f\u78c1\u76d8\u8bbe\u5907\u7684UUID # -- So,lv2_from_vg1\u6302\u8f7d\u540e, \u518dmount\u6302\u8f7dlv2_from_vg1_snap\u662f\u5931\u8d25\u7684.. [ root@localhost ~ ] # mount /dev/vg1/lv2_from_vg1_snap /opt mount: \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u9519\u8bef\u3001\u9009\u9879\u9519\u8bef\u3001/dev/mapper/vg1-lv2_from_vg1_snap \u4e0a\u6709\u574f\u8d85\u7ea7\u5757\u3001 \u7f3a\u5c11\u4ee3\u7801\u9875\u6216\u52a9\u624b\u7a0b\u5e8f\uff0c\u6216\u5176\u4ed6\u9519\u8bef \u6709\u4e9b\u60c5\u51b5\u4e0b\u5728 syslog \u4e2d\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u6709\u7528\u4fe1\u606f- \u8bf7\u5c1d\u8bd5 dmesg | tail \u8fd9\u6837\u7684\u547d\u4ee4\u770b\u770b. # -- \u4f46\u662f\u53ef\u4ee5\u66f2\u7ebf\u6551\u56fd,\u6307\u5b9a-o\u9009\u9879\u8ba9\u5feb\u7167\u4e0d\u901a\u8fc7UUID\u6302\u8f7d # -- \u53ef\u4ee5\u5bdf\u89c9\u5230,\u505a\u5b8clv2_from_vg1_snap\u5feb\u7167\u540e,\u6211\u4eec\u5e76\u6ca1\u6709\u5bf9\u5176\u683c\u5f0f\u5316\u505a\u6587\u4ef6\u7cfb\u7edf,\u5374\u4f9d\u65e7\u80fd\u6302\u8f7d\u6210\u529f!! [ root@localhost ~ ] # mount -o nouuid /dev/vg1/lv2_from_vg1_snap /opt [ root@localhost ~ ] # mount | grep lv2_from_vg1 /dev/mapper/vg1-lv2_from_vg1 on /test2 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg1-lv2_from_vg1_snap on /opt type xfs ( rw,relatime,nouuid,attr2,inode64,noquota ) # -- /opt\u91cc\u7684\u5185\u5bb9\u8ddf/test2\u91cc\u7684\u5185\u5bb9\u4e00\u6a21\u4e00\u6837 [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cat /test2/1.txt 111 [ root@localhost ~ ] # cat /opt/1.txt 111 # -- \u4f46\u662f lv2_from_vg1\u91cc\u7684\u5185\u5bb9\u6539\u53d8\u540e,lv2_from_vg1_snap\u5feb\u7167\u91cc\u7684\u5185\u5bb9\u662f\u4e0d\u4f1a\u540c\u6b65\u6539\u53d8\u7684!! [ root@localhost ~ ] # echo 123456 >> /test2/1.txt [ root@localhost ~ ] # cat /test2/1.txt 111 123456 [ root@localhost ~ ] # cat /opt/1.txt 111 \u5feb\u7167\u6062\u590d\u5355\u4e2a\u6587\u4ef6 \u00b6 # -- \u5e73\u65f6\u6ca1\u5fc5\u8981\u901a\u8fc7mount -o nouuid\u6302\u8f7d\u5feb\u7167,\u5f53\u88ab\u5feb\u7167\u7684lv\u91cc\u9762\u7684\u6570\u636e\u6709\u95ee\u9898\u4e86,\u624d\u9700\u8981\u4e34\u65f6\u6302\u8f7d\u5feb\u7167\u8fdb\u884c\u6570\u636e\u6062\u590d. # -- \u6062\u590d\u5355\u4e2a\u6587\u4ef6\u6570\u636e [ root@localhost ~ ] # cp /opt/1.txt /test2/1.txt cp\uff1a\u662f\u5426\u8986\u76d6 \"/test2/1.txt\" \uff1f y [ root@localhost ~ ] # cat /test2/1.txt 111 \u591a\u4e2a\u6587\u4ef6\u5408\u5e76\u6062\u590d \u00b6 \u5148\u5378\u8f7d\u6570\u636e\u6e90\u4e0e\u5feb\u7167, \u518d\u8fdb\u884c\u5408\u5e76,\u5feb\u7167\u4f1a\u81ea\u52a8\u5220\u9664,\u4e00\u6b21\u6027\u7684 # -- \u6062\u590d\u591a\u4e2a\u6587\u4ef6\u6570\u636e,\u53ef\u4ee5\u5408\u5e76,\u6ce8\u610f\u662f\u4e00\u6b21\u6027\u7684!!(Ps:vm\u865a\u62df\u673a\u91cc\u7684\u5feb\u7167\u6062\u590d\u662f\u6c38\u4e45\u7684) rm -rf /test2/2.txt echo 333 >> /test2/3.txt [ root@localhost ~ ] # tree /test2 /test2 \u251c\u2500\u2500 1 .txt # 111 \u2514\u2500\u2500 3 .txt # 333 /n 333 [ root@localhost ~ ] # tree /opt /opt \u251c\u2500\u2500 1 .txt # 111 \u251c\u2500\u2500 2 .txt # 222 \u2514\u2500\u2500 3 .txt # 333 # -- \u82e5umount: /test2:\u76ee\u6807\u5fd9, \u5148\u67e5\u770b\u54ea\u4e2a\u8fdb\u7a0b\u5360\u7528fuser -cu /test2,ps\u67e5\u770b\u8be5\u8fdb\u7a0b,\u518dkill -9 [ root@localhost ~ ] # umount /opt [ root@localhost ~ ] # umount /test2 [ root@localhost ~ ] # lvconvert --mergesnapshot /dev/vg1/lv2_from_vg1_snap Merging of volume vg1/lv2_from_vg1_snap started. vg1/lv2_from_vg1: Merged: 100 .00% # -- \u53ef\u4ee5\u53d1\u73b0/dev/vg1/lv2_from_vg1_snap\u5feb\u7167\u6587\u4ef6\u6ca1\u4e86 [ root@localhost ~ ] # lvs LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync Convert root centos -wi-ao---- < 17 .00g swap centos -wi-ao---- 2 .00g lv1_from_vg1 vg1 -wi-ao---- 22 .00g lv2_from_vg1 vg1 -wi-ao---- 2 .00g [ root@localhost ~ ] # mount /dev/vg1/lv2_from_vg1 /test2/ [ root@localhost ~ ] # ls /test2 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cat /test2/* 111 222 333 \u8fd8\u6709\u4e2a\u601d\u8def\u662f, cp -r \u6e90\u6587\u4ef6\u5939/* \u76ee\u6807\u6587\u4ef6\u5939 lvcreate -L 1G -s -n lv2_from_vg1_snap /dev/vg1/lv2_from_vg1 rm -rf /test2/2.txt echo 123456 >> /test2/1.txt [ root@localhost ~ ] # cat /test2/1.txt 111 123456 [ root@localhost ~ ] # cat /test2/2.txt cat: /test2/2.txt: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 [ root@localhost ~ ] # mount -o nouuid /dev/vg1/lv2_from_vg1_snap /opt [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cp -r /opt/* /test2 cp:\u662f\u5426\u8986\u76d6 \"/test2/1.txt\" \uff1f y cp:\u662f\u5426\u8986\u76d6 \"/test2/3.txt\" \uff1f y [ root@localhost ~ ] # ls /test2 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cat /test2/* 111 222 333 # -- \u5feb\u7167\u6587\u4ef6\u8fd8\u5728 [ root@localhost ~ ] # lvs | grep snap lv2_from_vg1_snap vg1 swi-aos--- 1 .00g lv2_from_vg1 0 .20 \u5e95\u5c42\u539f\u7406 \u00b6 \u4e3a\u4e86\u4fbf\u4e8e\u9610\u8ff0,\u5728\u8fd9\u91cc\u7ea6\u5b9a\u88ab\u5236\u4f5c\u5feb\u7167\u7684lv\u53eb\u505a\u539f\u59cb\u5377..(\u4e0d\u5b58\u5728\u8fd9\u4e2a\u540d\u8bcd\u54c8,\u6211\u4eec\u81ea\u5df1\u521b\u9020\u7684) Q1: \u6211\u4eec lvcreate -L 1G \u5148\u5206\u914d\u4e861G\u7684\u7a7a\u95f4\u7ed9\u5feb\u7167,\u5c06\u5feb\u7167\u6302\u8f7d\u540e,\u80fd\u8bbf\u95ee\u5230\u8ddf\u539f\u59cb\u5377\u91cc\u4e00\u6837\u7684\u6570\u636e... \u5b9e\u9645\u4e0a\u7ed9\u5feb\u7167\u5206\u914d\u76841G\u5927\u5c0f\u7684\u7a7a\u95f4\u51e0\u4e4e\u6ca1\u6709\u4f7f\u7528, \u4e5f\u5c31\u662f\u8bf4\u5feb\u7167\u521a\u5efa\u7acb\u597d\u65f6\u662f\u4e0d\u5360\u7528\u7a7a\u95f4\u7684;\u77db\u76fe\u7684\u662f\u91cc\u9762\u5374\u6709\u6570\u636e. \u5f88\u795e\u5947\u5427,\u5982\u4f55\u505a\u5230\u7684\u5462\uff1f A1: \u5feb\u7167\u521a\u5efa\u7acb\u597d\u65f6,\u91cc\u9762\u5168\u662f\u4e00\u5806\u539f\u59cb\u5377\u7684 \u786c\u94fe\u63a5 , \u5feb\u7167\u7a7a\u95f4\u91cc\u662f\u6ca1\u6709\u5b58\u653e\u6570\u636e\u7684.. \u6b63\u56e0\u4e3a\u786c\u94fe\u63a5\u7684\u521b\u5efa\u4e0d\u80fd\u8de8\u533a,\u6240\u4ee5\u5feb\u7167\u8ddf\u539f\u59cb\u5377\u4e0d\u80fd\u8de8\u533a.. \u4e13\u4e1a\u4e00\u70b9\u6765\u8bf4, LVM \u91c7\u7528\u7684\u5199\u65f6\u590d\u5236, \u662f\u6307\u5f53 LVM \u5feb\u7167\u521b\u5efa\u7684\u65f6\u5019, \u4ec5\u521b\u5efa\u5230\u5b9e\u9645\u6570\u636e\u7684inode\u7684\u786c\u94fe\u63a5(hark-link)\u800c\u5df2.. \u5feb\u7167\u4e0e\u539f\u59cb\u5377\u5171\u4eab\u5f88\u591aPE \u533a\u5757.. Q2: \u518d\u601d\u8003\u4e2a\u95ee\u9898,\u786c\u94fe\u63a5\u7684\u7279\u70b9\u662finode\u53f7\u76f8\u540c,\u786c\u94fe\u63a5\u7684\u6e90\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6\u5185\u5bb9\u7684\u4fee\u6539\u4f1a\u540c\u6b65.. \u4f46\u5728\u5b9e\u9a8c\u4e2d\u539f\u59cb\u5377\u91cc\u76841.txt\u6587\u4ef6\u5185\u5bb9\u6539\u53d8\u4e86,\u5feb\u7167\u5374\u6ca1\u6709\u5f71\u54cd.. \u8fd9\u53c8\u662f\u4e3a\u4f55\u5462\uff1f \u5b9e\u9a8c\u4e86\u4e0b,\u6302\u8f7d\u7684\u5feb\u7167\u91cc\u7684\u6570\u636e\u6539\u4e86,\u5bf9\u539f\u59cb\u5377\u91cc\u7684\u6570\u636e\u4e5f\u6ca1\u6709\u5f71\u54cd.. A2: \u6211\u4eec\u77e5\u9053 \u786c\u76d8\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u8986\u76d6 ( \u8be6\u89c1\u6587\u4ef6\u7cfb\u7edf\u7ae0\u8282 )!! lvm\u5feb\u7167\u673a\u5236\u5728\u5904\u7406\u539f\u59cb\u5377\u7684\u6539\u52a8\u65f6, \u4f1a\u5148\u5c06\u539f\u59cb\u5377\u91cc\u6539\u52a8\u76841.txt\u6587\u4ef6\u6574\u4e2a\u79fb\u52a8\u5230\u5feb\u7167\u7a7a\u95f4\u4e2d,\u7136\u540e\u518d\u5b9e\u73b01.txt\u6587\u4ef6\u8fdb\u884c\u8986\u76d6\u64cd\u4f5c... So,\u539f\u8bd5\u5377\u6539\u52a8,\u5feb\u7167\u624d\u4f1a\u5360\u7528\u7a7a\u95f4 . \u4e13\u4e1a\u4e00\u70b9\u6765\u8bf4,\u53ea\u8981\u5b9e\u9645\u7684\u6570\u636e\u6ca1\u6709\u6539\u53d8, \u5feb\u7167\u5c31\u53ea\u5305\u542b\u6307\u5411\u6570\u636e\u7684inode\u7684\u6307\u9488,\u800c\u975e\u6570\u636e\u672c\u8eab! \u5feb\u7167\u4f1a\u8ddf\u8e2a\u539f\u59cb\u5377\u4e2d\u5757\u7684\u6539\u53d8, \u4e00\u65e6\u4f60\u66f4\u6539\u4e86\u5feb\u7167\u5bf9\u5e94\u7684\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u8fd9\u4e2a\u65f6\u5019\u539f\u59cb\u5377\u4e0a\u5c06\u8981\u6539\u53d8\u7684\u6570\u636e\u4f1a\u5728\u6539\u53d8\u4e4b\u524d\u62f7\u8d1d\u5230\u5feb\u7167\u9884\u7559\u7684\u7a7a\u95f4. \u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb,\u5047\u8bbe\u539f\u8bd5\u5377\u91cc\u7684\u6587\u4ef6\u90fd\u6539\u52a8\u8fc7\u4e86,\u90a3\u4e48\u5168\u90fd\u4f1a\u5012\u817e\u5230\u5feb\u7167\u7a7a\u95f4\u4e2d. \u56e0\u800c,\u5feb\u7167\u7a7a\u95f4\u7684\u5927\u5c0f\u4e0d\u4f1a\u8d85\u8fc7\u539f\u59cb\u5377\u6253\u5feb\u7167\u65f6\u90a3\u4e00\u523b\u7684\u5927\u5c0f!! \u5feb\u7167\u7a7a\u95f4\u4e0d\u591f\u600e\u4e48\u529e,\u52a8\u6001\u6269\u5bb9\u561b\uff01 \u5feb\u7167\u662f\u539f\u8bd5\u5377\u90a3\u4e00\u65f6\u523b\u5185\u5bb9\u7684\u590d\u523b,\u53ea\u6709\u539f\u59cb\u5377\u91cc\u9762\u7684\u6587\u4ef6\u7b2c\u4e00\u6b21\u6539\u52a8\u65f6\u624d\u4f1a\u60ca\u52a8\u5feb\u7167\u7a7a\u95f4.. \u6ce8\u610f\u54e6, \u5907\u4efd\u4e0d\u4e00\u5b9a\u5fc5\u987b\u7528LVM\u5feb\u7167, \u4e5f\u53ef\u4ee5\u7528\u524d\u9762\u63d0\u53ca\u7684xfsdump\u589e\u91cf\u5907\u4efd...","title":"\u5b58\u50a8\u7ba1\u7406\u4e4bLVM"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#lvm","text":"\u4f20\u7edf\u7684\u78c1\u76d8\u7ba1\u7406\u6211\u4eec\u5c06\u67d0\u4e2a\u786c\u76d8\u901a\u8fc7fdisk\u6216gdisk\u5de5\u5177\u8fdb\u884c\u9694\u65ad,\u5212\u5206\u51fa\u4e86\u4e00\u4e2a\u4e2a\u7684\u5206\u533a,\u7d27\u63a5\u7740,\u5bf9\u8fd9\u4e9b\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316,\u5373\u5728\u5206\u533a\u4e0a\u5b89\u88c5\u6587\u4ef6\u7cfb\u7edf,\u901a\u8fc7\u6587\u4ef6\u7cfb\u7edf\u8fd9\u4e2a\u8f6f\u4ef6\u6765\u5bf9\u5206\u533a\u8fdb\u884c\u7ba1\u7406... So, \u5206\u533a \u662f\u7ad9\u5728 \u786c\u4ef6\u89d2\u5ea6 \u7684\u8bf4\u6cd5, \u6587\u4ef6\u7cfb\u7edf \u662f\u7ad9\u5728 \u8f6f\u4ef6\u89d2\u5ea6 \u7684\u8bf4\u6cd5!!! \u5728\u6211\u4eec\u5bf9\u78c1\u76d8\u5206\u533a\u7684\u5927\u5c0f\u8fdb\u884c\u89c4\u5212\u65f6, \u5f80\u5f80\u4e0d\u80fd\u786e\u5b9a\u6bcf\u4e2a\u5206\u533a\u4f7f\u7528\u7684\u7a7a\u95f4\u5927\u5c0f, \u53ea\u80fd\u51ed\u7ecf\u9a8c\u5206\u914d\u4e00\u4e2a\u5927\u5c0f.. \u6bcf\u4e2a\u5206\u533a\u7684\u5927\u5c0f\u5c31\u56fa\u5b9a\u6b7b\u4e86.. \u8fd9\u6837\u505a\u4f1a\u6709\u70b9\u5f0a\u7aef: \u82e5\u5206\u533a\u8bbe\u7f6e\u7684\u8fc7\u5927, \u5c31\u767d\u767d\u6d6a\u8d39\u4e86\u78c1\u76d8\u7a7a\u95f4; \u82e5\u5206\u533a\u8bbe\u7f6e\u7684\u8fc7\u5c0f, \u5c31\u4f1a\u5bfc\u81f4\u7a7a\u95f4\u4e0d\u591f\u7528\u7684\u60c5\u51b5\u51fa\u73b0; \u9488\u5bf9A\u78c1\u76d8\u7a7a\u95f4\u4e0d\u591f\u7528,\u6709\u4e2a\u89e3\u51b3\u65b9\u6848\u662f\u65b0\u589e\u5757\u786c\u76d8(\u4e0d\u5206\u533a,\u6574\u4f53\u4f5c\u4e3a\u4e00\u4e2a\u5206\u533a),\u65b0\u589e\u7684\u786c\u76d8\u683c\u5f0f\u5316\u540e,\u5c06A\u78c1\u76d8\u4e2d\u7684\u67d0\u4e2a\u76ee\u5f55\u4f5c\u4e3a\u5176\u6302\u8f7d\u70b9.. \"\u5177\u4f53\u53ef\u4ee5\u53c2\u8003\u6587\u4ef6\u7cfb\u7edf\u90a3\u7684\u5b9e\u8df5\u6848\u4f8b\" ... \u5f88\u9ebb\u70e6,\u589e\u5927\u4e86\u7ba1\u7406\u96be\u5ea6 TnT \u4e0a\u8ff0\u7684\u95ee\u9898,\u53ef\u4ee5\u901a\u8fc7LVM\u6765\u89e3\u51b3..","title":"\u4e3a\u4ec0\u4e48\u8981\u7528LVM"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#lvm_1","text":"PV\u7269\u7406\u5377 -- \u628a\u5e38\u89c4\u7684\u78c1\u76d8\u8bbe\u5907\u901a\u8fc7pvcreate\u547d\u4ee4\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316,\u5f62\u6210\u4e86\u7269\u7406\u5377 \u78c1\u76d8\u7a7a\u95f4\u53ef\u4ee5\u662f \u6574\u5757\u786c\u76d8( sda )\u4e5f\u53ef\u4ee5\u662f\u67d0\u5757\u76d8\u7684\u67d0\u4e2a\u5206\u533a( sdb5 ) PE\u57fa\u672c\u5355\u5143 -- \u7269\u7406\u5377\u91cc\u6700\u5c0f\u7684\u5b58\u50a8\u5355\u4f4d,\u9ed8\u8ba4\u4e3a4MB VG\u5377\u7ec4 -- \u5c06\u591a\u4e2aPV\u6574\u5408\u5230\u4e00\u8d77,\u90a3\u4e48\u5377\u7ec4\u7684\u5927\u5c0f\u5c31\u662f\u591a\u4e2aPV\u5927\u5c0f\u4e4b\u548c.. \u6216\u8005\u8bf4, \u5c06\u8fd9\u4e9bPV\u91cc\u7684PE\u653e\u5230\u4e86\u4e00\u4e2a\u540d\u4e3aVG\u7684\u8d44\u6e90\u6c60\u91cc \u6ce8\u610f\u54e6, \u4e0d\u4e00\u5b9a\u8981\u5c06\u6240\u6709\u7684pv\u653e\u5230\u4e00\u4e2avg\u91cc LV\u903b\u8f91\u5377 -- \u4ece\u5377\u7ec4\u4e2d\u5212\u5206\u9700\u8981\u7684\u7a7a\u95f4\u5927\u5c0f\u51fa\u6765, \u7528\u6237\u4ec5\u9700\u5bf9\u5176\u683c\u5f0f\u5316\u521b\u5efa\u6587\u4ef6\u7cfb\u7edf,\u6302\u8f7d\u540e\u5373\u53ef\u4f7f\u7528 LV\u53ef\u7531VG\u91cc\u9762\u4e0d\u540c\u7684PV\u91cc\u7684\u4e00\u4e2a\u4e2aPE\u7ec4\u6210...\u5373\u8de8\u8d8a\u78c1\u76d8 VG\u4e0d\u591f\u7528\u53ef\u4ee5\u6269\u5bb9,\u52a0PV\u8fdb\u53bb\u5373\u53ef. \u901a\u5e38\u4e0d\u4f1a\u4ece\u5377\u7ec4\u4e2d\u79fb\u9664\u78c1\u76d8... LV\u53ef\u4ee5\u52a8\u6001\u6269\u5bb9/\u7f29\u5bb9: \u4eceVG\u91cc\u518d\u62ff\u51e0\u4e2aPE/\u8fd8\u51e0\u4e2aPE\u7ed9VG.. \u867d\u7136LVM\u652f\u6301LV\u7f29\u5bb9,\u4f46LV\u683c\u5f0f\u5316\u82e5\u5236\u4f5c\u6210xfs\u6587\u4ef6\u7cfb\u7edf,\u662f\u4e0d\u652f\u6301\u7f29\u5bb9\u7684 \u6253\u4e2a\u6bd4\u65b9,\u78c1\u76d8\u7a7a\u95f4\u662f\u5c0f\u9ea6,PV\u5c06\u4e00\u675f\u675f\u5c0f\u9ea6\u90fd\u78e8\u6210\u4e86\u9762\u7c89,PE\u5c06\u8fd9\u4e9b\u9762\u7c89\u6574\u5408\u5230\u4e86\u4e00\u8d77\u63c9\u6210\u4e86\u4e00\u4e2a\u9762\u56e2,LV\u5c31\u662f\u5728\u5c06\u9762\u56e2\u5207\u6210\u4e00\u5757\u4e00\u5757\u7684.","title":"LVM\u539f\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#lvm_2","text":"\u4f18\u70b9 1> \u53ef\u4ee5\u5728\u7cfb\u7edf\u8fd0\u884c\u7684\u72b6\u6001\u4e0b\u52a8\u6001\u7684\u6269\u5c55\u6587\u4ef6\u7cfb\u7edf(LV\u683c\u5f0f\u5316\u5e76\u6302\u8f7d\u540e)\u7684\u5927\u5c0f \u200b 2> \u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u8de8\u591a\u4e2a\u78c1\u76d8, \u56e0\u6b64\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\u4e0d\u4f1a\u53d7\u7269\u7406\u78c1\u76d8\u7684\u9650\u5236 \u200b 3> \u53ef\u4ee5\u589e\u52a0\u65b0\u7684\u78c1\u76d8\u5230LVM\u7684\u5b58\u50a8\u6c60VG\u4e2d \u200b 4> \u53ef\u4ee5\u4ee5\u955c\u50cf\u7684\u65b9\u5f0f\u5197\u4f59\u91cd\u8981\u7684\u6570\u636e\u5230\u591a\u4e2a\u7269\u7406\u78c1\u76d8 -- LVM\u7684\u5feb\u7167,\u7528\u4e8e\u8fdb\u884c\u5907\u4efd \u200b 5> \u65b9\u4fbf\u5bfc\u51fa\u6574\u4e2a\u5377\u7ec4\u5230\u53e6\u5916\u4e00\u53f0\u673a\u5668(\u57fa\u672c\u7528\u4e0d\u5230,\u4e86\u89e3\u5373\u53ef) \u7f3a\u70b9 1> \u753b\u4e2a\u89e3\u85d5\u56fe \u786c\u4ef6 - LVM - \u6587\u4ef6\u7cfb\u7edf \u7b80\u5355\u6765\u8bf4,LVM\u662f\u5904\u4e8e\u5206\u533a\u4e0e\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u7684\u4e00\u4e2a\u8f6f\u4ef6!! \u66f4\u9ad8\u7ea7\u4e86,\u4f46\u5b58\u53d6\u6027\u80fd\u6536\u5230\u4e86\u5f71\u54cd \u200b 2> \u5f53VG\u4e2d\u7684\u67d0\u4e2aPV\u6240\u5728\u7684\u78c1\u76d8\u7a7a\u95f4\u574f\u4e86, \u6574\u4e2a\u5377\u7ec4\u90fd\u4f1a\u53d7\u5230\u5f71\u54cd \u200b \u56e0\u4e3aLV\u91cc\u9762\u7684PE\u662f\u8de8\u8d8a\u78c1\u76d8\u7684... \u6240\u4ee5\u8981\u5c3d\u91cf\u4fdd\u8bc1\u78c1\u76d8\u4e0d\u4f1a\u635f\u574f.. \u200b \u89e3\u51b3\u65b9\u6848 : \u5e95\u5c42\u7528RAID + \u4e0a\u5c42LVM = \u65e2\u6709\u5197\u4f59\u53c8\u6709\u52a8\u6001\u6269\u5c55","title":"LVM\u4f18\u7f3a\u70b9"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#lvm_3","text":"\u7b80\u5199\u903b\u8f91: (\u5927\u6982\u53ea\u6709\u6211\u80fd\u4e00\u773c\u770b\u61c2 Hhhh) sdb + sdc1 -- vg1 -- lv1_from_vg1(/test1)\u3001lv2_from_vg1(/test2) sdc2 + sdc3 -- vg2 -- lv1_from_vg2(/test3)\u3001lv2_from_vg2(/test4) # -- \u5148\u79fb\u9664\u524d\u9762\u5b9e\u9a8c\u73af\u5883\u4e2d\u6dfb\u52a0\u7684\u786c\u76d8 \u65b0\u5efa20G 30G 40G\u4e09\u5757\u786c\u76d8sdb sdc sdd \u865a\u62df\u673a\u4e0d\u652f\u6301\u70ed\u63d2\u62d4 \u5173\u673a\u91cd\u542f\u751f\u6548 # -- \u5728\u771f\u5b9e\u7684\u5b9e\u9a8c\u73af\u5883\u4e2d(\u771f\u673a) \u591a\u5757\u786c\u76d8\u9700\u8981\u505aRAID; \u4e91\u670d\u52a1\u5668\u4e0d\u9700\u8981\u505aRAID.. fdisk /dev/sdc # -- \u5236\u4f5c5\u4e2a\u5206\u533a 3\u4e3b1\u62691\u903b\u8f91 [ root@localhost ~ ] # lsblk /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc 8 :32 0 30G 0 disk \u251c\u2500sdc1 8 :33 0 10G 0 part \u251c\u2500sdc2 8 :34 0 5G 0 part \u251c\u2500sdc3 8 :35 0 5G 0 part \u251c\u2500sdc4 8 :36 0 1K 0 part \u2514\u2500sdc5 8 :37 0 5G 0 part \"\"\"-- 1.\u5236\u4f5cpv,\u53ef\u4ee5\u5bf9\u6574\u5757\u76d8\u505a,\u4e5f\u53ef\u4ee5\u5bf9\u5206\u533a\u505a --\"\"\" pvcreate /dev/sdb pvcreate /dev/sdc1 pvcreate /dev/sdc2 pvcreate /dev/sdc3 \"\"\"-- 2.\u5236\u4f5cvg:\u5c06pv\u5212\u5165vg\u4e2d --\"\"\" ## vgcreate vg3 /dev/sdd \u5c06\u505a\u8fc7pv\u7684\u67d0\u4e00\u5757\u76d8\u6216\u67d0\u4e00\u4e2a\u5206\u533a\u5355\u72ec\u505avg\u4e5f\u53ef\u4ee5 vgcreate vg1 /dev/sdb /dev/sdc1 vgcreate vg2 /dev/sdc2 /dev/sdc3 \"\"\"-- 3.\u521b\u5efa\u903b\u8f91\u5377lv --\"\"\" ## -L \u5927\u5c0f -n \u540d\u5b57 lvcreate -L 1G -n lv1_from_vg1 vg1 lvcreate -L 2G -n lv2_from_vg1 vg1 lvcreate -L 3G -n lv1_from_vg2 vg2 lvcreate -L 4G -n lv2_from_vg2 vg2 \"\"\"-- \u67e5\u770b --\"\"\" ## -- \u8fd8\u53ef\u4ee5\u4f7f\u7528 pvscan \u547d\u4ee4 [ root@localhost ~ ] # pvs PV VG Fmt Attr PSize PFree /dev/sda2 centos lvm2 a-- < 19 .00g 0 # -- \u8fd9\u4e2a\u662f\u5b89\u88c5centos\u65f6,linux\u81ea\u5df1\u5f04\u7684 /dev/sdb vg1 lvm2 a-- < 20 .00g < 17 .00g /dev/sdc1 vg1 lvm2 a-- < 10 .00g < 10 .00g /dev/sdc2 vg2 lvm2 a-- < 5 .00g < 2 .00g /dev/sdc3 vg2 lvm2 a-- < 5 .00g 1020 .00m [ root@localhost ~ ] # lvs LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync Convert root centos -wi-ao---- < 17 .00g swap centos -wi-ao---- 2 .00g lv1_from_vg1 vg1 -wi-a----- 1 .00g lv2_from_vg1 vg1 -wi-a----- 2 .00g lv1_from_vg2 vg2 -wi-a----- 3 .00g lv2_from_vg2 vg2 -wi-a----- 4 .00g ## -- \u53ef\u4ee5\u770b\u5230vg1\u7531\u4e24\u4e2apv\u7ec4\u6210,\u5212\u5206\u4e862\u4e2alv; vg1\u603b\u5927\u5c0f\u4e3a30G,\u51cf\u53bb2G\u548c1G\u8fd8\u526927G.. [ root@localhost ~ ] # vgs VG #PV #LV #SN Attr VSize VFree centos 1 2 0 wz--n- < 19 .00g 0 vg1 2 2 0 wz--n- 29 .99g 26 .99g vg2 2 2 0 wz--n- 9 .99g 2 .99g \"\"\"-- 4.\u683c\u5f0f\u5316(\u5236\u4f5c\u6587\u4ef6\u7cfb\u7edf)\u4e0e\u6302\u8f7d --\"\"\" ## -- \u521b\u5efa\u7684vg\u5377\u7ec4\u4f1a\u5728/dev\u4e0b\u9762 mkfs.xfs /dev/vg1/lv1_from_vg1 mkfs.xfs /dev/vg1/lv2_from_vg1 mkfs.xfs /dev/vg2/lv1_from_vg2 mkfs.xfs /dev/vg2/lv2_from_vg2 mkdir /test1 mkdir /test2 mkdir /test3 mkdir /test4 mount /dev/vg1/lv1_from_vg1 /test1 mount /dev/vg1/lv2_from_vg1 /test2 mount /dev/vg2/lv1_from_vg2 /test3 mount /dev/vg2/lv2_from_vg2 /test4 [ root@localhost ~ ] # mount | grep test ## -- /dev/mapper/vg1-lv1_from_vg1 \u5c31\u662f /dev/vg1/lv1_from_vg1 \u4e0d\u8981\u592a\u5728\u610f.. /dev/mapper/vg1-lv1_from_vg1 on /test1 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg1-lv2_from_vg1 on /test2 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg2-lv1_from_vg2 on /test3 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg2-lv2_from_vg2 on /test4 type xfs ( rw,relatime,attr2,inode64,noquota )","title":"LVM\u7684\u57fa\u672c\u4f7f\u7528"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#_1","text":"\u52a8\u6001\u6269\u5bb9\u5373\u5728\u4e0d\u7528\u5378\u8f7d\u7684\u60c5\u51b5\u4e0b\u5bf9LV\u8fdb\u884c\u6269\u5bb9 lvextend -L [+]MGT /dev/VG_NAME/VL_NAME \u6ce8\u610f: -L 100M \u4e0e -L +100M\u4e0d\u662f\u4e00\u4e2a\u610f\u601d. \u524d\u8005\u4ee3\u8868\u6269\u5bb9\u81f3100M(\u4e0d\u80fd\u5c0f\u4e8e\u539f\u6765\u7684\u5927\u5c0f), \u540e\u8005\u4ee3\u8868\u5728\u539f\u6709\u7684\u57fa\u7840\u4e0a\u6269\u5bb9100M \u4e0d\u8981\u7f29\u5bb9\uff01\uff01\uff01\u5e76\u4e14xfs\u6587\u4ef6\u7cfb\u7edf\u4e0d\u652f\u6301\u7f29\u5bb9...","title":"\u5728\u7ebf\u52a8\u6001\u6269\u5bb9"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#vg","text":"\u7ed91G\u5927\u5c0f\u7684lv1_from_vg1\u6269\u5bb9\u81f35000M, \u67e5\u770bvg1\u5bb9\u91cf\u662f\u591f\u7684, \u6240\u4ee5lv1_from_vg1\u53ef\u76f4\u63a5\u6269\u5bb9 [ root@localhost ~ ] # vgs | grep vg1 vg1 2 2 0 wz--n- 29 .99g 26 .99g [ root@localhost ~ ] # lvs | grep lv1_from_vg1 lv1_from_vg1 vg1 -wi-ao---- 1 .00g [ root@localhost ~ ] # lvextend -L 5000M /dev/vg1/lv1_from_vg1 # \u903b\u8f91\u5377 vg1/lv1_from_vg1 \u7684\u5927\u5c0f\u4ece 1.00 GiB(256 \u4e2a\u6269\u5c55\u533a) \u66f4\u6539\u4e3a 4.88 GiB(1250 \u4e2a\u6269\u5c55\u533a). # \u903b\u8f91\u5377 vg1/lv1_from_vg1 \u5df2\u6210\u529f\u8c03\u6574\u5927\u5c0f Size of logical volume vg1/lv1_from_vg1 changed from 1 .00 GiB ( 256 extents ) to 4 .88 GiB ( 1250 extents ) . Logical volume vg1/lv1_from_vg1 successfully resized. [ root@localhost ~ ] # vgs | grep vg1 # \u7b80\u5355\u9a8c\u7b97\u4e0b lv\u589e\u52a0\u7684\u7b49\u4e8evg\u51cf\u5c11\u7684 4.88 - 1 = 26.99 - 23.11 vg1 2 2 0 wz--n- 29 .99g < 23 .11g [ root@localhost ~ ] # lvs | grep lv1_from_vg1 lv1_from_vg1 vg1 -wi-ao---- 4 .88g xfs_growfs /dev/vg1/lv1_from_vg1 ## -!!! \u6269\u5c55\u903b\u8f91\u5377\u540e\u9700\u8981\u66f4\u65b0xfs\u6587\u4ef6\u7cfb\u7edf df -h\u624d\u80fd\u770b\u5230\u9884\u671f\u7684\u7ed3\u679c","title":"vg\u5bb9\u91cf\u591f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#vg_1","text":"\u7ed93G\u5927\u5c0f\u7684lv1_from_vg2\u6269\u5bb9\u81f311G, \u67e5\u770bvg2\u5bb9\u91cf\u4e3a3G, \u662f\u4e0d\u591f\u7684, \u9700\u8981\u65b0\u589epv\u6269\u5230vg2\u91cc [ root@localhost ~ ] # vgs | grep vg2 vg2 2 2 0 wz--n- 9 .99g 2 .99g [ root@localhost ~ ] # lvs | grep lv1_from_vg2 lv1_from_vg2 vg2 -wi-ao---- 3 .00g # -- lv1_from_vg2\u6269\u5bb9\u81f311G\u9700\u8981\u65b0\u589e8G sdc5\u53ea\u67095\u4e2aG \u4e0d\u5f97\u884c. \u6240\u4ee5\u6211\u4eec\u4f7f\u752840G\u5bb9\u91cf\u7684sdd [ root@localhost ~ ] # lsblk /dev/sdc5 /dev/sdd NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdc5 8 :37 0 5G 0 part sdd 8 :48 0 40G 0 disk pvcreate /dev/sdd vgextend vg2 /dev/sdd [ root@localhost ~ ] # vgs | grep vg2 vg2 3 2 0 wz--n- < 49 .99g < 42 .99g lvextend -L 10G /dev/vg2/lv1_from_vg2 lvextend -L +1G /dev/vg2/lv1_from_vg2 [ root@localhost ~ ] # lvs | grep lv1_from_vg2 lv1_from_vg2 vg2 -wi-ao---- 11 .00g xfs_growfs /dev/vg2/lv1_from_vg2 ## -!!! \u6269\u5c55\u903b\u8f91\u5377\u540e\u9700\u8981\u66f4\u65b0xfs\u6587\u4ef6\u7cfb\u7edf df -h\u624d\u80fd\u770b\u5230\u9884\u671f\u7684\u7ed3\u679c","title":"vg\u5bb9\u91cf\u4e0d\u591f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#_2","text":"\u4e00\u53e5\u8bdd, \u5148\u5c06vg\u4e2d\u6240\u6709lv\u7684\u6302\u8f7d\u70b9\u90fd\u5378\u8f7d, \u518d\u5220\u9664vg, \u6700\u540e\u5220\u9664vg\u4e2d\u7684pv \"\"\" -- \u5220\u9664,\u8bb2\u7a76\u4e2a\u987a\u5e8f lv\u5148\u5378\u8f7d\u6302\u8f7d\u70b9\u7136\u540e\u5220\u9664 lv\u5220\u5e72\u51c0\u540e\u518d\u5220\u9664vg \u6700\u540e\u5220\u9664pv --\"\"\" # \u5220\u9664lv\u4e4b\u524d\u9700\u8981\u5148\u5378\u8f7d\u6302\u8f7d\u70b9 [ root@localhost ~ ] # umount /test3 [ root@localhost ~ ] # lvremove /dev/vg2/lv1_from_vg2 # \u56e0\u4e3a\u6302\u8f7d\u540e,\u53ef\u80fd\u4ea7\u751f\u8fc7\u6570\u636e,\u6240\u4ee5\u95ee\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f Do you really want to remove active logical volume vg2/lv1_from_vg2? [ y/n ] : y Logical volume \"lv1_from_vg2\" successfully removed [ root@localhost ~ ] # vgs VG #PV #LV #SN Attr VSize VFree centos 1 2 0 wz--n- < 19 .00g 0 vg1 2 2 0 wz--n- 29 .99g < 23 .11g vg2 3 1 0 wz--n- < 49 .99g < 45 .99g # \u56e0\u4e3avg2\u91cc\u8fd8\u6709\u4e2a\u5df2\u7ecf\u6302\u8f7d\u7684lv,\u6240\u4ee5\u5220\u9664vg2\u4e0d\u6210\u529f [ root@localhost ~ ] # vgremove vg2 Do you really want to remove volume group \"vg2\" containing 1 logical volumes? [ y/n ] : y # \u903b\u8f91\u5377 vg2/lv2_from_vg2 \u5305\u542b\u4e00\u4e2a\u6b63\u5728\u4f7f\u7528\u7684\u6587\u4ef6\u7cfb\u7edf Logical volume vg2/lv2_from_vg2 contains a filesystem in use. [ root@localhost ~ ] # umount /test4 [ root@localhost ~ ] # vgremove vg2 Do you really want to remove volume group \"vg2\" containing 1 logical volumes? [ y/n ] : y # \u76f8\u5f53\u4e8e\u5e2e\u5fd9\u6267\u884c\u4e86 lvremove /dev/vg2/lv2_from_vg2 \u547d\u4ee4 Do you really want to remove active logical volume vg2/lv2_from_vg2? [ y/n ] : y Logical volume \"lv2_from_vg2\" successfully removed Volume group \"vg2\" successfully removed # -- \u6210\u529f\u5220\u9664vg2 # \u5220pv:\u53ea\u80fd\u5220\u6389\u90a3\u4e9b\u4e0d\u5c5e\u4e8e\u4efb\u4f55vg\u7684pv [ root@localhost ~ ] # pvs # \u53ef\u4ee5\u770b\u5230\u539f\u6765\u5728vg2\u4e2d\u76843\u4e2apv\u5df2\u7ecf\u95f2\u7f6e\u5566 PV VG Fmt Attr PSize PFree /dev/sda2 centos lvm2 a-- < 19 .00g 0 /dev/sdb vg1 lvm2 a-- < 20 .00g 13 .11g /dev/sdc1 vg1 lvm2 a-- < 10 .00g < 10 .00g /dev/sdc2 lvm2 --- 5 .00g 5 .00g /dev/sdc3 lvm2 --- 5 .00g 5 .00g /dev/sdd lvm2 --- 40 .00g 40 .00g pvremove /dev/sdb2 pvremove /dev/sdb3 pvremove /dev/sdd # -- \u5378\u8f7d\u7684pv\u53ef\u4ee5\u4e0d\u4f7f\u7528lvm\u6309\u7167\u4f20\u7edf\u7684\u78c1\u76d8\u7ba1\u7406\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c\u5566.. \u683c\u5916\u5b9e\u9a8c: sdb\u4f7f\u7528\u5b8c\u4e86\u624d\u4f1a\u4f7f\u7528sdc1 ,\u5b9e\u9645\u4e0a\u591a\u5c11\u4f1a\u7528\u70b9sdc1,\u4f46\u5f88\u5c11\u663e\u793a\u4e0d\u51fa\u6765... [ root@localhost ~ ] # lsblk /dev/sdb /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT # \u5f53\u65f6\u5f88\u7591\u60d1\u7684\u4e00\u70b9,sdc1\u5206\u533a\u4e0b\u9762\u600e\u4e48\u6ca1\u663e\u793alv\u7684\u540d\u5b57\u5462\uff1f sdb 8 :16 0 20G 0 disk \u251c\u2500vg1-lv1_from_vg1 253 :2 0 4 .9G 0 lvm /test1 \u2514\u2500vg1-lv2_from_vg1 253 :3 0 2G 0 lvm /test2 sdc 8 :32 0 30G 0 disk \u251c\u2500sdc1 8 :33 0 10G 0 part \u251c\u2500sdc2 8 :34 0 5G 0 part # -- pv\u5220\u9664\u4e86,\u5212\u5206\u7684\u5206\u533a\u8fd8\u662f\u5728\u7684 \u251c\u2500sdc3 8 :35 0 5G 0 part \u251c\u2500sdc4 8 :36 0 1K 0 part \u2514\u2500sdc5 8 :37 0 5G 0 part \"\"\" \u7ecf\u8fc7\u5206\u6790,sdb(20G)+sdc1(10G)\u603b\u517130G,\u73b0\u76ee\u524d,lv1_from_vg1 5G\u3001lv2_from_vg1 2G \u6211\u4eec\u5b9e\u9a8c\u5c06lv1_from_vg1\u6269\u5bb9\u81f322G \u8d85\u8fc7sdb\u5bb9\u91cf\u768420G \"\"\" lvextend -L 22G /dev/vg1/lv1_from_vg1 [ root@localhost ~ ] # pvs PV VG Fmt Attr PSize PFree /dev/sda2 centos lvm2 a-- < 19 .00g 0 /dev/sdb vg1 lvm2 a-- < 20 .00g 0 /dev/sdc1 vg1 lvm2 a-- < 10 .00g 5 .99g ## -- 20+10-22-2 = 6 /dev/sdd lvm2 --- 40 .00g 40 .00g [ root@localhost ~ ] # lsblk /dev/sdb /dev/sdc NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sdb 8 :16 0 20G 0 disk \u251c\u2500vg1-lv1_from_vg1 253 :2 0 22G 0 lvm /test1 \u2514\u2500vg1-lv2_from_vg1 253 :3 0 2G 0 lvm /test2 sdc 8 :32 0 30G 0 disk \u251c\u2500sdc1 8 :33 0 10G 0 part \u2502 \u2514\u2500vg1-lv1_from_vg1 253 :2 0 22G 0 lvm /test1 ## -- \u770b!!\u5b83\u51fa\u73b0\u4e86..sdb\u6ee1\u4e86\u624d\u4f7f\u7528sdc1 \u251c\u2500sdc2 8 :34 0 5G 0 part \u251c\u2500sdc3 8 :35 0 5G 0 part \u251c\u2500sdc4 8 :36 0 1K 0 part \u2514\u2500sdc5 8 :37 0 5G 0 part","title":"\u5220\u9664"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#lvm_4","text":"\u7b80\u5355\u6765\u8bf4,\u505alvm\u5feb\u7167\u5c31\u662f\u7ed9\u67d0\u4e2alv\u505a\u5907\u4efd vm\u865a\u62df\u673a\u4e5f\u6709\u5feb\u7167,\u70b9\u51fbvm\u67d0\u4e00\u4e2a\u5feb\u7167,\u865a\u62df\u673a\u5c31\u6062\u590d\u5230\u5feb\u7167\u90a3\u4e00\u65f6\u523b\u7684\u72b6\u6001..\u5728\u8fd9\u4e00\u5c42\u9762LVM\u5feb\u7167\u662f\u76f8\u540c\u7684..","title":"LVM\u5feb\u7167"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#_3","text":"\u88ab\u505a\u5feb\u7167\u7684lv : lv2_from_vg1 \u5feb\u7167 : lv2_from_vg1_snap 1> lvm\u5feb\u7167\u7684\u672c\u8d28\u5c31\u662f\u521b\u5efa\u4e00\u4e2a\u7279\u6b8a\u7684LV\u903b\u8f91\u5377.. \u5feb\u7167\u4e0e\u88ab\u505a\u5feb\u7167\u7684lv\u5728\u540c\u4e00vg\u91cc 2> lv2_from_vg1 \u4e0e lv2_from_vg1_snap\u7684UUID\u662f\u4e00\u6837\u7684.. 3> lv2_from_vg1\u91cc\u7684\u5185\u5bb9\u6539\u53d8\u540e,lv2_from_vg1_snap\u5feb\u7167\u91cc\u7684\u5185\u5bb9\u662f\u4e0d\u4f1a\u540c\u6b65\u6539\u53d8\u7684!! # -- /test2\u662flv2_from_vg1\u903b\u8f91\u5377xfs\u683c\u5f0f\u5316\u540e\u7684\u6302\u8f7d\u70b9 [ root@localhost ~ ] # echo 111 > /test2/1.txt [ root@localhost ~ ] # echo 222 > /test2/2.txt [ root@localhost ~ ] # echo 333 > /test2/3.txt [ root@localhost ~ ] # tree /test2 /test2 \u251c\u2500\u2500 1 .txt \u251c\u2500\u2500 2 .txt \u2514\u2500\u2500 3 .txt 0 directories, 3 files # -- \u5bf9vg1\u5377\u7ec4\u4e0b\u7684lv2_from_vg1\u903b\u8f91\u5377\u505a\u5feb\u7167 \u9996\u5148\u8981\u4fdd\u8bc1vg1\u8981\u6709\u5269\u4f59\u7a7a\u95f4 # -- vg1\u8fd8\u52696g\u7684\u7a7a\u95f4 [ root@localhost ~ ] # vgs VG #PV #LV #SN Attr VSize VFree centos 1 2 0 wz--n- < 19 .00g 0 vg1 2 2 0 wz--n- 29 .99g 5 .99g # -- \u5feb\u7167\u672c\u8d28\u4e0a\u4e5f\u662f\u5236\u4f5c\u4e00\u4e2alv. \u5bf9\u54ea\u4e2alv\u505a\u5feb\u7167,\u5c31\u4f1a\u5411\u8be5lv\u6240\u5728\u7684vg\u8981\u7a7a\u95f4. # -s \u5373snapshot,\u8868\u660e\u662f\u505a\u5feb\u7167 # -- lvcreate -L \u5feb\u7167\u5927\u5c0f -s -n \u5feb\u7167\u540d\u5b57 \u88ab\u505a\u5feb\u7167\u7684lv\u7684\u8def\u5f84 # -- \u5feb\u7167\u5148\u6307\u5b9a1G,\u4e0d\u591f\u7684\u8bdd,\u53ef\u4ee5\u52a8\u6001\u6269\u5bb9\u561b [ root@localhost ~ ] # lvcreate -L 1G -s -n lv2_from_vg1_snap /dev/vg1/lv2_from_vg1 Logical volume \"lv2_from_vg1_snap\" created. [ root@localhost ~ ] # lvs LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync Convert root centos -wi-ao---- < 17 .00g swap centos -wi-ao---- 2 .00g lv1_from_vg1 vg1 -wi-ao---- 22 .00g # -- \u53ef\u4ee5\u770b\u5230\u5feb\u7167\u4e0e\u88ab\u505a\u5feb\u7167\u7684lv\u5728\u540c\u4e00vg\u91cc! lv2_from_vg1 vg1 owi-aos--- 2 .00g lv2_from_vg1_snap vg1 swi-a-s--- 1 .00g lv2_from_vg1 0 .01 # -- vg1-lv2_from_vg1\u4e0evg1-lv2_from_vg1_snap\u7684\u78c1\u76d8/\u5206\u533aUUID\u662f\u4e00\u6837\u7684!! [ root@localhost ~ ] # blkid | grep lv2_from_vg1 /dev/mapper/vg1-lv2_from_vg1: UUID = \"d0c4fc9b-3fea-409e-b7ab-d760c5c07c19\" TYPE = \"xfs\" /dev/mapper/vg1-lv2_from_vg1_snap: UUID = \"d0c4fc9b-3fea-409e-b7ab-d760c5c07c19\" TYPE = \"xfs\" # -- \u540c\u4e00\u4e2a\u78c1\u76d8\u8bbe\u5907\u53ef\u4ee5\u6709\u591a\u4e2a\u6302\u8f7d\u70b9,\u4f46\u6709\u76f8\u540cUUID\u7684\u4e24\u4e2a\u78c1\u76d8\u8bbe\u5907\u53ea\u80fd\u901a\u8fc7UUID\u6302\u8f7d\u5176\u4e2d\u4e00\u4e2a # -- \u53ef\u4ee5\u56de\u5fc6\u4e0b\u6c38\u4e45\u6302\u8f7d,\u5728/etc/fstab\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u5c31\u662f\u78c1\u76d8\u8bbe\u5907\u7684UUID # -- So,lv2_from_vg1\u6302\u8f7d\u540e, \u518dmount\u6302\u8f7dlv2_from_vg1_snap\u662f\u5931\u8d25\u7684.. [ root@localhost ~ ] # mount /dev/vg1/lv2_from_vg1_snap /opt mount: \u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u9519\u8bef\u3001\u9009\u9879\u9519\u8bef\u3001/dev/mapper/vg1-lv2_from_vg1_snap \u4e0a\u6709\u574f\u8d85\u7ea7\u5757\u3001 \u7f3a\u5c11\u4ee3\u7801\u9875\u6216\u52a9\u624b\u7a0b\u5e8f\uff0c\u6216\u5176\u4ed6\u9519\u8bef \u6709\u4e9b\u60c5\u51b5\u4e0b\u5728 syslog \u4e2d\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u6709\u7528\u4fe1\u606f- \u8bf7\u5c1d\u8bd5 dmesg | tail \u8fd9\u6837\u7684\u547d\u4ee4\u770b\u770b. # -- \u4f46\u662f\u53ef\u4ee5\u66f2\u7ebf\u6551\u56fd,\u6307\u5b9a-o\u9009\u9879\u8ba9\u5feb\u7167\u4e0d\u901a\u8fc7UUID\u6302\u8f7d # -- \u53ef\u4ee5\u5bdf\u89c9\u5230,\u505a\u5b8clv2_from_vg1_snap\u5feb\u7167\u540e,\u6211\u4eec\u5e76\u6ca1\u6709\u5bf9\u5176\u683c\u5f0f\u5316\u505a\u6587\u4ef6\u7cfb\u7edf,\u5374\u4f9d\u65e7\u80fd\u6302\u8f7d\u6210\u529f!! [ root@localhost ~ ] # mount -o nouuid /dev/vg1/lv2_from_vg1_snap /opt [ root@localhost ~ ] # mount | grep lv2_from_vg1 /dev/mapper/vg1-lv2_from_vg1 on /test2 type xfs ( rw,relatime,attr2,inode64,noquota ) /dev/mapper/vg1-lv2_from_vg1_snap on /opt type xfs ( rw,relatime,nouuid,attr2,inode64,noquota ) # -- /opt\u91cc\u7684\u5185\u5bb9\u8ddf/test2\u91cc\u7684\u5185\u5bb9\u4e00\u6a21\u4e00\u6837 [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cat /test2/1.txt 111 [ root@localhost ~ ] # cat /opt/1.txt 111 # -- \u4f46\u662f lv2_from_vg1\u91cc\u7684\u5185\u5bb9\u6539\u53d8\u540e,lv2_from_vg1_snap\u5feb\u7167\u91cc\u7684\u5185\u5bb9\u662f\u4e0d\u4f1a\u540c\u6b65\u6539\u53d8\u7684!! [ root@localhost ~ ] # echo 123456 >> /test2/1.txt [ root@localhost ~ ] # cat /test2/1.txt 111 123456 [ root@localhost ~ ] # cat /opt/1.txt 111","title":"\u5236\u4f5c\u5feb\u7167"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#_4","text":"# -- \u5e73\u65f6\u6ca1\u5fc5\u8981\u901a\u8fc7mount -o nouuid\u6302\u8f7d\u5feb\u7167,\u5f53\u88ab\u5feb\u7167\u7684lv\u91cc\u9762\u7684\u6570\u636e\u6709\u95ee\u9898\u4e86,\u624d\u9700\u8981\u4e34\u65f6\u6302\u8f7d\u5feb\u7167\u8fdb\u884c\u6570\u636e\u6062\u590d. # -- \u6062\u590d\u5355\u4e2a\u6587\u4ef6\u6570\u636e [ root@localhost ~ ] # cp /opt/1.txt /test2/1.txt cp\uff1a\u662f\u5426\u8986\u76d6 \"/test2/1.txt\" \uff1f y [ root@localhost ~ ] # cat /test2/1.txt 111","title":"\u5feb\u7167\u6062\u590d\u5355\u4e2a\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#_5","text":"\u5148\u5378\u8f7d\u6570\u636e\u6e90\u4e0e\u5feb\u7167, \u518d\u8fdb\u884c\u5408\u5e76,\u5feb\u7167\u4f1a\u81ea\u52a8\u5220\u9664,\u4e00\u6b21\u6027\u7684 # -- \u6062\u590d\u591a\u4e2a\u6587\u4ef6\u6570\u636e,\u53ef\u4ee5\u5408\u5e76,\u6ce8\u610f\u662f\u4e00\u6b21\u6027\u7684!!(Ps:vm\u865a\u62df\u673a\u91cc\u7684\u5feb\u7167\u6062\u590d\u662f\u6c38\u4e45\u7684) rm -rf /test2/2.txt echo 333 >> /test2/3.txt [ root@localhost ~ ] # tree /test2 /test2 \u251c\u2500\u2500 1 .txt # 111 \u2514\u2500\u2500 3 .txt # 333 /n 333 [ root@localhost ~ ] # tree /opt /opt \u251c\u2500\u2500 1 .txt # 111 \u251c\u2500\u2500 2 .txt # 222 \u2514\u2500\u2500 3 .txt # 333 # -- \u82e5umount: /test2:\u76ee\u6807\u5fd9, \u5148\u67e5\u770b\u54ea\u4e2a\u8fdb\u7a0b\u5360\u7528fuser -cu /test2,ps\u67e5\u770b\u8be5\u8fdb\u7a0b,\u518dkill -9 [ root@localhost ~ ] # umount /opt [ root@localhost ~ ] # umount /test2 [ root@localhost ~ ] # lvconvert --mergesnapshot /dev/vg1/lv2_from_vg1_snap Merging of volume vg1/lv2_from_vg1_snap started. vg1/lv2_from_vg1: Merged: 100 .00% # -- \u53ef\u4ee5\u53d1\u73b0/dev/vg1/lv2_from_vg1_snap\u5feb\u7167\u6587\u4ef6\u6ca1\u4e86 [ root@localhost ~ ] # lvs LV VG Attr LSize Pool Origin Data% Meta% Move Log Cpy%Sync Convert root centos -wi-ao---- < 17 .00g swap centos -wi-ao---- 2 .00g lv1_from_vg1 vg1 -wi-ao---- 22 .00g lv2_from_vg1 vg1 -wi-ao---- 2 .00g [ root@localhost ~ ] # mount /dev/vg1/lv2_from_vg1 /test2/ [ root@localhost ~ ] # ls /test2 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cat /test2/* 111 222 333 \u8fd8\u6709\u4e2a\u601d\u8def\u662f, cp -r \u6e90\u6587\u4ef6\u5939/* \u76ee\u6807\u6587\u4ef6\u5939 lvcreate -L 1G -s -n lv2_from_vg1_snap /dev/vg1/lv2_from_vg1 rm -rf /test2/2.txt echo 123456 >> /test2/1.txt [ root@localhost ~ ] # cat /test2/1.txt 111 123456 [ root@localhost ~ ] # cat /test2/2.txt cat: /test2/2.txt: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 [ root@localhost ~ ] # mount -o nouuid /dev/vg1/lv2_from_vg1_snap /opt [ root@localhost ~ ] # ls /opt 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cp -r /opt/* /test2 cp:\u662f\u5426\u8986\u76d6 \"/test2/1.txt\" \uff1f y cp:\u662f\u5426\u8986\u76d6 \"/test2/3.txt\" \uff1f y [ root@localhost ~ ] # ls /test2 1 .txt 2 .txt 3 .txt [ root@localhost ~ ] # cat /test2/* 111 222 333 # -- \u5feb\u7167\u6587\u4ef6\u8fd8\u5728 [ root@localhost ~ ] # lvs | grep snap lv2_from_vg1_snap vg1 swi-aos--- 1 .00g lv2_from_vg1 0 .20","title":"\u591a\u4e2a\u6587\u4ef6\u5408\u5e76\u6062\u590d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/15_%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B9%8BLVM/#_6","text":"\u4e3a\u4e86\u4fbf\u4e8e\u9610\u8ff0,\u5728\u8fd9\u91cc\u7ea6\u5b9a\u88ab\u5236\u4f5c\u5feb\u7167\u7684lv\u53eb\u505a\u539f\u59cb\u5377..(\u4e0d\u5b58\u5728\u8fd9\u4e2a\u540d\u8bcd\u54c8,\u6211\u4eec\u81ea\u5df1\u521b\u9020\u7684) Q1: \u6211\u4eec lvcreate -L 1G \u5148\u5206\u914d\u4e861G\u7684\u7a7a\u95f4\u7ed9\u5feb\u7167,\u5c06\u5feb\u7167\u6302\u8f7d\u540e,\u80fd\u8bbf\u95ee\u5230\u8ddf\u539f\u59cb\u5377\u91cc\u4e00\u6837\u7684\u6570\u636e... \u5b9e\u9645\u4e0a\u7ed9\u5feb\u7167\u5206\u914d\u76841G\u5927\u5c0f\u7684\u7a7a\u95f4\u51e0\u4e4e\u6ca1\u6709\u4f7f\u7528, \u4e5f\u5c31\u662f\u8bf4\u5feb\u7167\u521a\u5efa\u7acb\u597d\u65f6\u662f\u4e0d\u5360\u7528\u7a7a\u95f4\u7684;\u77db\u76fe\u7684\u662f\u91cc\u9762\u5374\u6709\u6570\u636e. \u5f88\u795e\u5947\u5427,\u5982\u4f55\u505a\u5230\u7684\u5462\uff1f A1: \u5feb\u7167\u521a\u5efa\u7acb\u597d\u65f6,\u91cc\u9762\u5168\u662f\u4e00\u5806\u539f\u59cb\u5377\u7684 \u786c\u94fe\u63a5 , \u5feb\u7167\u7a7a\u95f4\u91cc\u662f\u6ca1\u6709\u5b58\u653e\u6570\u636e\u7684.. \u6b63\u56e0\u4e3a\u786c\u94fe\u63a5\u7684\u521b\u5efa\u4e0d\u80fd\u8de8\u533a,\u6240\u4ee5\u5feb\u7167\u8ddf\u539f\u59cb\u5377\u4e0d\u80fd\u8de8\u533a.. \u4e13\u4e1a\u4e00\u70b9\u6765\u8bf4, LVM \u91c7\u7528\u7684\u5199\u65f6\u590d\u5236, \u662f\u6307\u5f53 LVM \u5feb\u7167\u521b\u5efa\u7684\u65f6\u5019, \u4ec5\u521b\u5efa\u5230\u5b9e\u9645\u6570\u636e\u7684inode\u7684\u786c\u94fe\u63a5(hark-link)\u800c\u5df2.. \u5feb\u7167\u4e0e\u539f\u59cb\u5377\u5171\u4eab\u5f88\u591aPE \u533a\u5757.. Q2: \u518d\u601d\u8003\u4e2a\u95ee\u9898,\u786c\u94fe\u63a5\u7684\u7279\u70b9\u662finode\u53f7\u76f8\u540c,\u786c\u94fe\u63a5\u7684\u6e90\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6\u5185\u5bb9\u7684\u4fee\u6539\u4f1a\u540c\u6b65.. \u4f46\u5728\u5b9e\u9a8c\u4e2d\u539f\u59cb\u5377\u91cc\u76841.txt\u6587\u4ef6\u5185\u5bb9\u6539\u53d8\u4e86,\u5feb\u7167\u5374\u6ca1\u6709\u5f71\u54cd.. \u8fd9\u53c8\u662f\u4e3a\u4f55\u5462\uff1f \u5b9e\u9a8c\u4e86\u4e0b,\u6302\u8f7d\u7684\u5feb\u7167\u91cc\u7684\u6570\u636e\u6539\u4e86,\u5bf9\u539f\u59cb\u5377\u91cc\u7684\u6570\u636e\u4e5f\u6ca1\u6709\u5f71\u54cd.. A2: \u6211\u4eec\u77e5\u9053 \u786c\u76d8\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u8986\u76d6 ( \u8be6\u89c1\u6587\u4ef6\u7cfb\u7edf\u7ae0\u8282 )!! lvm\u5feb\u7167\u673a\u5236\u5728\u5904\u7406\u539f\u59cb\u5377\u7684\u6539\u52a8\u65f6, \u4f1a\u5148\u5c06\u539f\u59cb\u5377\u91cc\u6539\u52a8\u76841.txt\u6587\u4ef6\u6574\u4e2a\u79fb\u52a8\u5230\u5feb\u7167\u7a7a\u95f4\u4e2d,\u7136\u540e\u518d\u5b9e\u73b01.txt\u6587\u4ef6\u8fdb\u884c\u8986\u76d6\u64cd\u4f5c... So,\u539f\u8bd5\u5377\u6539\u52a8,\u5feb\u7167\u624d\u4f1a\u5360\u7528\u7a7a\u95f4 . \u4e13\u4e1a\u4e00\u70b9\u6765\u8bf4,\u53ea\u8981\u5b9e\u9645\u7684\u6570\u636e\u6ca1\u6709\u6539\u53d8, \u5feb\u7167\u5c31\u53ea\u5305\u542b\u6307\u5411\u6570\u636e\u7684inode\u7684\u6307\u9488,\u800c\u975e\u6570\u636e\u672c\u8eab! \u5feb\u7167\u4f1a\u8ddf\u8e2a\u539f\u59cb\u5377\u4e2d\u5757\u7684\u6539\u53d8, \u4e00\u65e6\u4f60\u66f4\u6539\u4e86\u5feb\u7167\u5bf9\u5e94\u7684\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u8fd9\u4e2a\u65f6\u5019\u539f\u59cb\u5377\u4e0a\u5c06\u8981\u6539\u53d8\u7684\u6570\u636e\u4f1a\u5728\u6539\u53d8\u4e4b\u524d\u62f7\u8d1d\u5230\u5feb\u7167\u9884\u7559\u7684\u7a7a\u95f4. \u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb,\u5047\u8bbe\u539f\u8bd5\u5377\u91cc\u7684\u6587\u4ef6\u90fd\u6539\u52a8\u8fc7\u4e86,\u90a3\u4e48\u5168\u90fd\u4f1a\u5012\u817e\u5230\u5feb\u7167\u7a7a\u95f4\u4e2d. \u56e0\u800c,\u5feb\u7167\u7a7a\u95f4\u7684\u5927\u5c0f\u4e0d\u4f1a\u8d85\u8fc7\u539f\u59cb\u5377\u6253\u5feb\u7167\u65f6\u90a3\u4e00\u523b\u7684\u5927\u5c0f!! \u5feb\u7167\u7a7a\u95f4\u4e0d\u591f\u600e\u4e48\u529e,\u52a8\u6001\u6269\u5bb9\u561b\uff01 \u5feb\u7167\u662f\u539f\u8bd5\u5377\u90a3\u4e00\u65f6\u523b\u5185\u5bb9\u7684\u590d\u523b,\u53ea\u6709\u539f\u59cb\u5377\u91cc\u9762\u7684\u6587\u4ef6\u7b2c\u4e00\u6b21\u6539\u52a8\u65f6\u624d\u4f1a\u60ca\u52a8\u5feb\u7167\u7a7a\u95f4.. \u6ce8\u610f\u54e6, \u5907\u4efd\u4e0d\u4e00\u5b9a\u5fc5\u987b\u7528LVM\u5feb\u7167, \u4e5f\u53ef\u4ee5\u7528\u524d\u9762\u63d0\u53ca\u7684xfsdump\u589e\u91cf\u5907\u4efd...","title":"\u5e95\u5c42\u539f\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/","text":"\u7f51\u5361\u540d\u5b57\u4fee\u6539 \u00b6 \u4ee5\u592a\u7f51\u534f\u8bae\u89c4\u5b9a\u4e0a\u7f51\u7684\u673a\u5668\u5fc5\u987b\u6709\u4e00\u5757\u7f51\u5361, \u4fd7\u6210\u4ee5\u592a\u7f51\u5361 CentOS6\u53ca\u4ee5\u524d, \u7b2c\u4e00\u5757\u3001\u7b2c\u4e8c\u5757\u7f51\u5361\u4f9d\u6b21\u547d\u540d\u4e3a eth0\u3001eth1... CentOS7\u7f51\u5361\u7684\u547d\u540d\u4e3aens33.. \u9664\u6b64\u4e4b\u5916,\u90fd\u6709\u4e00\u5757\u547d\u540d\u4e3alo\u865a\u62df\u7684\u672c\u5730\u56de\u73af\u7f51\u5361.. \u6570\u636e\u5305\u5230\u7f51\u5361\u4e86,\u6ca1\u6709\u5f80\u4ea4\u6362\u673a\u8d70,\u539f\u8def\u8fd4\u56de,\u81ea\u5df1\u53d1\u7ed9\u81ea\u5df1. 127.0.0.1 \u76f8\u5f53\u4e8e\u4e00\u53f0\u8ba1\u7b97\u673a\u5373\u5f53\u5ba2\u6237\u7aef\u4e5f\u5f53\u670d\u52a1\u7aef,\u7528\u4e8e\u4fdd\u8bc1\u8f6f\u4ef6\u672c\u8eab\u7684\u5f00\u53d1\u6ca1\u95ee\u9898, \u6392\u9664\u7f51\u7edc\u7684\u56e0\u7d20 \"\"\"-- 1.GRUB\u6dfb\u52a0kernel\u53c2\u6570 --\"\"\" vim /etc/sysconfig/grub # -- GRUB_CMDLINE_LINUX=\"rhgb quiet 'net.ifnames=0 biosdevname=0'\" \"\"\"-- 2.\u52a0\u8f7d\u5230\u5f15\u5bfc\u5206\u533a --\"\"\" grub2-mkconfig -o /boot/grub2/grub.cfg \"\"\"-- 3.\u4fee\u6539\u7f51\u5361\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u91cc\u7f51\u5361\u7684\u540d\u79f0 --\"\"\" cd /etc/sysconfig/network-scripts/ mv ifcfg-ens33 ifcfg-eth0 sed -i \"s#ens33#eth0#g\" ifcfg-eth0 # -- \u5c06ens33\u6539\u4e3aeth0 ## \u6ce8\u610f\u54e6,\u524d\u4e09\u6b65\u6ca1\u6709\u5148\u540e\u987a\u5e8f,\u600e\u4e48\u6837\u90fd\u53ef\u4ee5 \"\"\"-- \u91cd\u542f\u7cfb\u7edf\u751f\u6548 --\"\"\" reboot \u5173\u673a\u4e3avm\u865a\u62df\u673a\u6dfb\u52a0\u4e00\u5f20NAT\u6a21\u5f0f\u7684\u7f51\u5361.. \u6dfb\u52a0\u540e\u5f00\u673a \u53ef\u4ee5\u53d1\u73b0\u7b2c\u4e8c\u5757\u7f51\u5361\u7684\u9ed8\u8ba4\u540d\u5b57\u662feth1 \"\"\"-- \u4e34\u65f6\u6fc0\u6d3b\u7f51\u5361 --\"\"\" [ root@localhost ~ ] # ifconfig eth1 up [ root@localhost ~ ] # ifconfig | grep eth[01] eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 eth1: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 \u7f51\u7edc\u76f8\u5173\u7684\u4e00\u4e9b\u547d\u4ee4 \u00b6 lspci \u00b6 \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u6240\u8fde\u63a5\u7684\u6240\u6709\u7f51\u5361 [ root@localhost ~ ] # lspci | grep -i eth # \u53ef\u4ee5\u770b\u5230,\u73b0\u76ee\u524d\u6709\u4e24\u5757\u4ee5\u592a\u7f51\u534f\u8bae\u7684\u7f51\u5361 02 :01.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller ( Copper ) ( rev 01 ) 02 :04.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller ( Copper ) ( rev 01 ) mii-tool \u00b6 \u68c0\u6d4b\u7f51\u5361\u662f\u5426\u5df2\u7ecf\u8fde\u63a5\u597d\u7f51\u7ebf [ root@localhost ~ ] # mii-tool eth1 eth1: negotiated 1000baseT-FD flow-control, link ok # -- link ok\u4ee3\u8868\u8be5\u7f51\u5361\u662f\u63a5\u4e86\u7f51\u7ebf\u7684 ping \u00b6 \u7528\u4e8e\u6d4b\u8bd5\u4e24\u53f0\u4e3b\u673a\u7f51\u7edc\u662f\u5426\u8fde\u901a ping \u76ee\u6807IP\u5730\u5740 ping -c \u6b21\u6570 \u76ee\u6807IP\u5730\u5740 \u539f\u7406: ping\u547d\u4ee4\u4f1a\u57fa\u4e8eICMP\u534f\u8bae(TCP/IP\u534f\u8bae\u7c07\u7684\u4e00\u4e2a\u5b50\u534f\u8bae)\u7ed9\u5bf9\u65b9\u53d1\u9001\u6570\u636e\u5305,\u82e5\u5bf9\u65b9\u56de\u5e94,\u5c31\u4ee3\u8868\u8fde\u901a\u4e86. echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all \u8bbe\u7f6e\u6b64\u547d\u4ee4\u540e,\u5176\u4ed6\u4efb\u4f55\u4e3b\u673a\u90fdping\u4e0d\u540c\u672c\u673a.. \u901a\u5e38\u4f1a\u5728\u6574\u4e2a\u96c6\u7fa4\u67b6\u6784\u7684\u7f51\u7edc\u73af\u5883\u90e8\u7f72\u5b8c\u6210\u540e\u8fdb\u884c\u8be5\u8bbe\u7f6e.. ifconfig \u00b6 \u57fa\u672c\u9009\u9879 \u00b6 ifconfig -- \u67e5\u770b\u5df2\u7ecf\u6fc0\u6d3b\u7684\u7f51\u5361\u4fe1\u606f ifconfig -a -- \u67e5\u770b\u6240\u6709\u7f51\u5361\u4fe1\u606f(\u5305\u62ec\u672a\u6fc0\u6d3b\u7684\u7f51\u5361) ifconfig eth0 -- \u67e5\u770b\u5355\u4e2a\u7f51\u5361\u4fe1\u606f ifconfig eth1 up -- \u4e34\u65f6 \u5f00\u542f\u7f51\u5361 ifconfig eth1 down -- \u5173\u95ed\u7f51\u5361 \u5b9e\u9a8c\u65f6,\u522b\u5173\u95edeth0\u7f51\u5361,xshll\u8fdc\u7a0b\u8fde\u63a5\u662f\u901a\u8fc7\u8be5\u7f51\u5361\u8fde\u63a5\u7684.. ifconfig eth1 192.168.1.122 netmask 255.255.255.0 or ifconfig eth1 192.168.1.122/24 -- \u4e34\u65f6 \u4e3a\u7f51\u5361\u8bbe\u5b9aIP\u548c\u63a9\u7801 (\u91cd\u542f\u670d\u52a1\u5668\u5931\u6548) ifconfig eth0:1 192.168.0.2 netmask 255.255.255.0 -- \u4e34\u65f6 \u4e3a\u7f51\u5361\u914d\u7f6e\u5b50\u63a5\u53e3 ifconfig eth0:1 down or ifconfig eth0:1 del 192.168.0.2 -- \u5220\u9664\u8be5\u5b50\u63a5\u53e3 \u4e0d\u5fc5\u6307\u5b9a\u5b50\u7f51\u63a9\u7801 \u6ce8\u610f\u54e6! \u901a\u8fc7ifconfig\u547d\u4ee4\u7684\u914d\u7f6e\u90fd\u662f \u4e34\u65f6 \u914d\u7684!! \u91cd\u542f\u673a\u5668\u540e\u5c31\u6062\u590d\u5982\u521d\u4e86.. \u82e5\u60f3\u6c38\u4e45\u914d\u7f6e,\u9700\u8981\u4fee\u6539 /etc/sysconfig/network-scripts \u8def\u5f84\u4e0b\u9762\u7684\u914d\u7f6e\u6587\u4ef6 ## -- \u82e5\u8981\u4f7f\u7528ifconfig\u547d\u4ee4,\u9700\u8981\u5b89\u88c5 yum install net-tools -y [ root@localhost ~ ] # rpm -qf `which ifconfig` net-tools-2.0-0.25.20131004git.el7.x86_64 \"\"\" eth0:1 \u6b64\u7f51\u5361\u662f\u4e0d\u5b58\u5728\u7684,\u662f\u6ca1\u6709mac\u5730\u5740\u7684,\u53ef\u53eb\u505a\u865a\u62df\u7f51\u5361 \u76f8\u5f53\u4e8e\u7ed9eth0\u914d\u4e86\u4e24\u4e2aIP\u5730\u5740.. \u4f46\u6d41\u91cf\u8d70\u7684\u90fd\u662f\u540c\u4e00\u5f20\u7f51\u5361 \u771f\u5b9e\u73af\u5883\u4e0b,\u82e5\u8981\u7ed9\u670d\u52a1\u5668\u914d\u7f6e\u4e24\u4e2aIP\u5730\u5740,\u4f1a\u4f7f\u7528\u4e24\u4e2a\u7f51\u5361,\u4e24\u4e2a\u7f51\u5361\u5904\u4e8e\u4e0d\u540c\u7684\u7f51\u6bb5\u5e76\u8fde\u63a5\u4e0d\u540c\u7684\u4ea4\u6362\u673a..\u8fd9\u6837\u9760\u8c31\u4e9b. \"\"\" [ root@localhost ~ ] # ifconfig eth0:1 192.168.0.2/24 [ root@localhost ~ ] # ifconfig eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 ... ... ... eth0:1: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 192 .168.0.2 netmask 255 .255.255.0 broadcast 192 .168.0.255 ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) ... ... ... \u547d\u4ee4\u7ed3\u679c\u89e3\u6790 \u00b6 ifconfig eth0 \"\"\" \u7b2c\u4e00\u884c \u4eceflags\u6807\u8bb0\u53ef\u77e5\u8be5\u63a5\u53e3\u5df2\u542f\u7528,\u652f\u6301\u5e7f\u64ad\u3001\u7ec4\u64ad. MTU\u6700\u5927\u4f20\u8f93\u5355\u5143:1500\u5b57\u8282 flags\u53c2\u6570: UP:\u8868\u793a\u201c\u63a5\u53e3\u5df2\u542f\u7528\u201d/\u7f51\u5361\u5df2\u7ecf\u6fc0\u6d3b BROADCAST:\u8868\u793a\u8be5\u7f51\u5361\u652f\u6301\u5e7f\u64ad,\u80fd\u6536\u5230\u5e7f\u64ad\u5305 RUNNING:\u8868\u793a\u7f51\u5361\u5df2\u8fde\u63a5\u7f51\u7ebf,\u8be5\u7f51\u7ebf\u80fd\u6b63\u5e38\u5de5\u4f5c MULTICAST:\u8868\u793a\u8be5\u7f51\u5361\u652f\u6301\u591a\u64ad.. \u591a\u64ad/\u7ec4\u64ad\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5c06\u591a\u53f0\u673a\u5668\u653e\u5230\u4e00\u4e2a\u7ec4\u91cc,\u53d1\u5305\u7684\u65f6\u5019,\u53ea\u6709\u8fd9\u4e2a\u7ec4\u91cc\u7684\u673a\u5668\u80fd\u6536\u5230 promisc:\u7e41\u6742\u6a21\u5f0f,\u7b80\u5355\u6765\u8bf4,\u8fd9\u53f0\u673a\u5668\u6240\u6709\u6570\u636e\u5305\u90fd\u53ef\u4ee5\u6536\u5230 \u6211\u4eec\u77e5\u9053\u5c40\u57df\u7f51\u91cc\u5e7f\u64ad\u7684\u6570\u636e\u5305,\u8ba1\u7b97\u673a\u6536\u5230\u540e\u53d1\u73b0\u76ee\u6807\u4e3b\u673a\u4e0d\u662f\u81ea\u5df1,\u4f1a\u5c06\u8fd9\u4e2a\u5305\u4e22\u6389 \u82e5\u8be5\u8ba1\u7b97\u673a\u5f00\u542f\u4e86\u7e41\u6742\u6a21\u5f0f,\u5c31\u4e0d\u4f1a\u5c06\u6b64\u5e7f\u64ad\u5305\u4e22\u6389.\u6293\u5305. \u7e41\u6742\u6a21\u5f0f\u901a\u5e38\u7528\u4e8ekali\u7b49\u6e17\u900f\u6d4b\u8bd5,\u5b89\u5168\u65b9\u9762\u7684\u914d\u7f6e.. \u611f\u5174\u8da3\u53ef\u4ee5\u53c2\u8003:https://www.cnblogs.com/linhaifeng/articles/13949611.html `ifconfig eth0 promisc` # -- \u5f00\u542f\u7e41\u6742\u6a21\u5f0f `ifconfig eth0 -promisc` # -- \u5173\u95ed\u7e41\u6742\u6a21\u5f0f \"\"\" eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 # -- \u7f51\u5361\u7684IPv4\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u3001\u672c\u7f51\u6bb5\u7684\u5e7f\u64ad\u5730\u5740 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 # -- IPv6\u5730\u5740\u3001\u63a9\u7801\u957f\u5ea6\u3001\u4f5c\u7528\u57df,link\u8868\u793a\u4ec5\u8be5\u63a5\u53e3\u6709\u6548 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> # -- \u4ee5\u592a\u7f51\u5361\u7684MAC\u5730\u5740\u3001\u4ee5\u592a\u7f51\u5361\u6700\u5927\u4f20\u8f93\u961f\u5217\u957f\u5ea6,\u63a5\u53e3\u7c7b\u578b\u4e3aEthernet ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) \"\"\" R\u63a5\u6536 T\u53d1\u9001\"\"\" # -- \u4ece\u8be5\u4e3b\u673a\u5f00\u673a\u90a3\u4e00\u523b\u5230\u73b0\u5728,\u6b64\u63a5\u53e3/\u7f51\u5361\u7d2f\u79ef\u63a5\u6536\u7684\u62a5\u6587\u4e2a\u6570,\u8fd9\u4e9b\u5305\u603b\u5171\u6709\u591a\u5927 RX packets 3942 bytes 764610 ( 746 .6 KiB ) # -- \u7d2f\u79ef\u63a5\u6536\u62a5\u6587\u9519\u8bef\u6570\u3001\u4e22\u5f03\u6570\u3001\u6ea2\u51fa\u6570(\u5f88\u91cd\u8981!!!)\u3001\u51b2\u7a81\u7684\u5e27\u6570 RX errors 0 dropped 0 overruns 0 frame 0 # -- \u4ece\u8be5\u4e3b\u673a\u5f00\u673a\u90a3\u4e00\u523b\u5230\u73b0\u5728,\u6b64\u63a5\u53e3/\u7f51\u5361\u7d2f\u79ef\u53d1\u9001\u7684\u62a5\u6587\u4e2a\u6570,\u603b\u5b57\u8282\u6570 TX packets 842 bytes 130860 ( 127 .7 KiB ) # -- \u7d2f\u79ef\u53d1\u9001\u62a5\u6587\u9519\u8bef\u6570\u3001\u4e22\u5f03\u6570\u3001\u6ea2\u51fa\u6570\u3001\u8f7d\u8377\u6570(\u53d1\u751fcarrier\u9519\u8bef\u800c\u4e22\u5931\u7684\u6570\u636e\u5305\u6570)\u3001\u51b2\u7a81\u6570 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 \u4e07\u5146\u7f51\u5361\u7684MTU \u00b6 \u5343\u5146 1000Mb/s \u7ba1\u7406\u7f51\u7edc-- MTU: 1500 \u4e07\u5146 10000Mb/s \u96c6\u7fa4\u5316\u4f5c\u4e1a -- MTU: 9000 \u5343\u5146\u4e07\u5146\u533a\u522b \u00b6 \u73b0\u76ee\u524d\u6211\u4eec\u7528\u7684\u7f51\u5361\u662f\u53cc\u7ede\u7ebf\u63a5\u4e2a\u6c34\u6676\u5934\u8fde\u63a5\u7684 \u5343\u5146\u7f51\u5361 , \u4e3b\u8981\u7528\u4e8e\u7ba1\u7406\u7f51\u7edc ; \u4fdd\u6301MTU\u9ed8\u8ba4\u503c1500kb\u5c31\u884c.. \u82e5\u6d89\u53ca\u5230\u96c6\u7fa4\u5316\u4f5c\u4e1a, \u6bd4\u5982\u7528\u96c6\u7fa4\u505a\u5b58\u50a8.. \u901a\u5e38\u5c31\u9700\u8981\u7528\u5230 \u4e07\u5146\u7f51\u5361 .. MTU\u503c\u5e94\u8be5\u8bbe\u7f6e\u4e3a9000kb.. \u4e07\u5146(10G)\u7f51\u5361\u9700\u8981\u642d\u914d\u5149\u7ea4\u6a21\u5757\u3001\u5149\u7ea4\u3001\u4e07\u5146\u4ea4\u6362\u673a(\u51e0\u5341\u4e07RMB,\u5f88\u8d35)\u4f7f\u7528 Hhhh \u50cf\u963f\u91cc\u4e91\u63d0\u4f9b\u7ed9\u4e2d\u5c0f\u578b\u516c\u53f8\u7684\u865a\u673a\u5c31\u662f\u6784\u5efa\u5728\u4e00\u5957\u96c6\u7fa4\u4e4b\u4e0a, vm\u4e4b\u95f4\u7684\u901a\u4fe1\u672c\u6765\u5c31\u6bd4\u7269\u7406\u4e3b\u673a\u6162, \u4e3a\u4e86\u5c3d\u53ef\u80fd\u51cf\u5c11\u7f51\u7edcIO, \u63d0\u9ad8\u7f51\u7edc\u4f20\u8f93\u6548\u7387, \u963f\u91cc\u4e91\u5728\u786c\u4ef6\u65b9\u9762\u7528\u7684\u5c31\u662f\u4e07\u5146\u7f51\u5361.... \u5c0f\u58f0bibi,\u82e5\u662f\u7528\u771f\u673a\u505a\u96c6\u7fa4\u5316\u67b6\u6784,\u9700\u8981\u8fdb\u884c\u7f51\u5361\u7ed1\u5b9a, \u6d89\u53ca\u5230team\u6280\u672f\u3001lacp\u534f\u8bae\u7b49.. (\u96c6\u7fa4\u76f8\u5173\u7684\u90fd\u662f\u9ad8\u9636\u77e5\u8bc6,\u6211\u6682\u4e14\u53ea\u4f1a\u5b66\u57fa\u7840,\u7b49\u6211\u4ee5\u540e\u5f00\u53d1\u8f6c\u8fd0\u7ef4,\u518d\u6363\u817e\u6363\u817e, \u54c8\u54c8\u54c8\u54c8\u54c8) \u6c38\u4e45\u914d\u7f6e \u00b6 ifconfig eth0 mtu 9000 \u4e34\u65f6\u914d\u7f6eMTU\u503c,\u91cd\u542f\u670d\u52a1\u5668\u5c31\u5931\u6548\u4e86.. \u90a3\u5982\u4f55\u6c38\u4e45\u914d\u7f6e\u5462\uff1f \u89e3\u51b3\u65b9\u6848 : \u5728 /etc/rc.local \u6587\u4ef6\u91cc\u6dfb\u52a0 \u4fee\u6539MTU\u503c\u7684\u547d\u4ee4... \u539f\u7406: /etc/rc.local\u6587\u4ef6\u5728\u8ba1\u7b97\u673a\u5f00\u673a\u7684\u65f6\u5019,\u5b83\u4f1a\u81ea\u52a8\u8fd0\u884c, \u6240\u4ee5\u4e00\u5f00\u673a\u5c31\u9700\u8981\u8fd0\u884c\u7684\u547d\u4ee4\u90fd\u53ef\u5199\u5230\u6b64\u6587\u4ef6\u91cc \u6ce8\u610f: \u8bb0\u5f97\u6267\u884c\u547d\u4ee4 chmod +x /etc/rc.d/rc.local ## -- \u53ef\u4ee5\u770b\u5230/etc/rc.local\u7684\u6587\u4ef6\u7c7b\u578b\u662fl \u4ee3\u8868\u8f6f\u94fe\u63a5 ## -- \u6e90\u6587\u4ef6\u662f /etc/rc.d/rc.local [ root@localhost ~ ] # ll /etc/rc.local lrwxrwxrwx. 1 root root 13 6\u6708 30 23 :42 /etc/rc.local -> rc.d/rc.local ## -- /etc/rc.d/rc.local\u6587\u4ef6\u662f\u6ca1\u6709\u53ef\u6267\u884c\u6743\u9650\u7684 \u610f\u5473\u7740\u9664\u4e86root\u7528\u6237\u7684\u5176\u4ed6\u7528\u6237\u90fd\u4e0d\u80fd\u6267\u884c\u5b83 ## -- \u6240\u4ee5\u9700\u8981\u8d4b\u4e88\u5176\u4ed6\u7528\u6237\u5bf9\u6b64\u6587\u4ef6\u7684\u53ef\u6267\u884c\u6743\u9650 chmod +x /etc/rc.d/rc.local [ root@localhost ~ ] # ll /etc/rc.d/rc.local -rw-r--r--. 1 root root 473 1\u6708 14 2022 /etc/rc.d/rc.local [ root@localhost ~ ] # chmod +x /etc/rc.d/rc.local ## \u5728\u91cc\u9762\u6dfb\u52a0\u5185\u5bb9,ifconfig eth0 mtu 9000 [ root@localhost ~ ] # vim /etc/rc.local \u89e3\u51b3\u6ea2\u51fa\u6570\u4e25\u91cd\u7684\u95ee\u9898 \u00b6 ifconfig\u7ed3\u679c\u4e2d\u7b2c6\u884c\u7684 overruns \u6ea2\u51fa\u6570\u662f\u975e\u5e38\u91cd\u8981\u7684\u6307\u6807!!! ethtool -g eth0 ethtool -G eth0 rx 2048 ethtool -G eth0 tx 2048 \u50a8\u5907\u77e5\u8bc6 \u00b6 1 > \u5168\uff5c\u534a\u53cc\u5de5\u901a\u4fe1 \u5168\u53cc\u5de5\u662f\u6307\u4ea4\u6362\u673a\u5728\u53d1\u9001\u6570\u636e\u7684\u540c\u65f6\u4e5f\u80fd\u591f\u63a5\u6536\u6570\u636e,\u4e24\u8005\u540c\u6b65\u8fdb\u884c, \u8fd9\u597d\u6bd4\u6211\u4eec\u5e73\u65f6\u6253\u7535\u8bdd\u4e00\u6837,\u8bf4\u8bdd\u7684\u540c\u65f6\u4e5f\u80fd\u591f\u542c\u5230\u5bf9\u65b9\u7684\u58f0\u97f3... \u534a\u53cc\u5de5\u597d\u6bd4\u662f\u5bf9\u8bb2\u673a... \u76ee\u524d\u7f51\u5361\u4e00\u822c\u90fd\u5e94\u8be5\u91c7\u7528\u5168\u53cc\u5de5\u6a21\u5f0f,\u5168\u53cc\u5de5\u7684\u597d\u5904\u5728\u4e8e\u8fdf\u5ef6\u5c0f\u3001\u51b2\u7a81\u5c11\u3001\u901f\u5ea6\u5feb. 2 > \u6570\u636e\u94fe\u8def\u5c42\u4e09\u5927\u529f\u80fd\u4e4b\u4e00\u5dee\u9519\u76d1\u6d4b: \u5faa\u73af\u5197\u4f59\u68c0\u9a8c\u7801CRC \u6b65\u9aa4\u5173\u952e\u5b57: \u591a\u9879\u5f0f \u5f02\u6216\u64cd\u4f5c ( \u5f02\u4e3a1 \u540c\u4e3a0 ) \u5047\u8bbe\u6709\u6570\u636e1101011011\u9700\u8981\u4f20\u8f93, \u91c7\u7528CRC\u7684\u751f\u6210\u591a\u9879\u5f0f\u4e3aP ( X )= X^4+X+1, \u8bf7\u8ba1\u7b97\u6dfb\u52a0\u4e86CRC\u6821\u9a8c\u7801\u4e4b\u540e\u7684\u6570\u636e. \u89e3: \u591a\u9879\u5f0f\u4f4d\u4e32\u4e3a --> 10011 , \u6a21\u4e8c\u9664\u6cd5\u5f97\u5230\u4f59\u65701110, \u6240\u4ee5\u5f97\u5230\u7ed3\u679c11010110111110 3 > \u7f51\u5361\u5de5\u4f5c\u539f\u7406: \u5148\u4eceOSI\u4e03\u5c42\u534f\u8bae\u89c6\u89d2,\u56de\u987e\u4e0b\u53d1\u5305: \u5e94\u7528\u5c42\u4ea7\u751f\u4e00\u4e2a\u6570\u636e,\u4f9d\u6b21\u5f80\u4e0b\u53d1,\u5305\u88c5TCP/UDP\u7684\u5934 -- \u6570\u636e\u6bb5 ; \u5305\u88c5\u7f51\u7edcIP\u7684\u5934 -- \u6570\u636e\u62a5 ; \u5305\u88c5\u4ee5\u592a\u7f51\u7684\u5934 -- \u6570\u636e\u5e27frame ; \u63a5\u7740\u8f6c\u6210\u4e8c\u8fdb\u5236\u4f4d\u901a\u8fc7\u7f51\u7ebf\u4f20\u8f93\u7ed9\u5bf9\u65b9. \u7f51\u5361\u53d1\u5305: 1 . ip\u6570\u636e\u62a5+14\u4e2a\u5b57\u8282\u7684mac\u5934/\u4ee5\u592a\u7f51\u5934\u53d8\u6210\u6570\u636e\u5e27frame 2 . frame\u88ab\u62f7\u8d1d\u5230\u7f51\u5361\u82af\u7247\u5185\u90e8\u7684\u7f13\u51b2\u533a,\u7531\u7f51\u5361\u5904\u7406 3 . \u7f51\u5361\u82af\u7247\u4e3aframe\u6dfb\u52a0\u5934\u90e8\u540c\u6b65\u4fe1\u606f\u548cCRC\u6821\u9a8c ( \u6b64\u65f6\u624d\u662f\u771f\u6b63\u53ef\u4ee5\u53d1\u9001\u7684\u5305 ) ,\u7136\u540e\u53d1\u9001\u8be5\u5305 \u7f51\u5361\u6536\u5305: 1 . \u7f51\u7edc\u5305\u5230\u8fbe\u7f51\u5361,\u7f51\u5361\u5148\u68c0\u67e5\u6570\u636e\u5305\u7684CRC\u6821\u9a8c,\u4fdd\u8bc1\u5176\u5b8c\u6574\u6027\u548c\u6b63\u786e\u6027, \u82e5\u4e0d\u5b8c\u6574\u4f1a\u4e22\u5f03 ( \u4e22\u5f03\u4e0d\u53ef\u6015,TCP\u534f\u8bae\u4f1a\u91cd\u65b0\u53d1\u5305\u7684 ) ; \u82e5\u5b8c\u6574\u4f1a\u53bb\u6389\u5b83\u7684\u5934\u5f97\u5230frame 2 . \u7f51\u5361\u5c06frame\u62f7\u8d1d\u5230\u7f51\u5361\u5185\u90e8\u7684FIFO ( frist in frist out\u5148\u8fdb\u5148\u51fa ) \u7f13\u51b2\u533a 3 . \u7f51\u5361\u9a71\u52a8\u7a0b\u5e8f\u4f1a\u4ea7\u751f\u786c\u4ef6\u4e2d\u65ad,\u63d0\u9192OS\u5e72\u6d3b,OS\u4ea7\u751f\u8f6f\u4ef6\u4e2d\u65ad,\u5c06frame\u4ece\u7f51\u5361\u62f7\u8d1d\u5230\u5185\u5b58\u4e2d \u7136\u540e\u4e00\u5c42\u5c42\u7684\u62c6\u5305 \u89e3\u51b3\u8fc7\u7a0b \u00b6 \u6b63\u5e38\u60c5\u51b5, \u7f51\u5361\u4e00\u8fb9\u63a5\u6536\u6570\u636e\u5305\u653e\u5230\u7f51\u5361\u7f13\u51b2\u533a\u4e2d,OS\u4e00\u8fb9\u4ece\u4e2d\u53d6\u51fa\u6570\u636e\u5305\u5230\u5185\u5b58\u4e2d, \u7f51\u5361\u7f13\u51b2\u533a\u4e0d\u4f1a\u6709\u6ea2\u51fa. \u82e5\u9047\u5230\u9ad8\u5e76\u53d1\u7684\u60c5\u51b5,\u6d41\u91cf\u6fc0\u589e,\u7f51\u5361\u7f13\u51b2\u533a\u6ee1\u4e86,\u5f80\u7f51\u5361\u7f13\u51b2\u533a\u91cc\u6324\u7684\u7f51\u7edc\u5305\u901f\u5ea6\u8fdc\u5927\u4e8eOS\u53d6\u7684\u901f\u5ea6... \u65b0\u7684\u7f51\u7edc\u5305\u8fdb\u4e0d\u4e86\u7f13\u51b2\u533a,\u5c31\u4f1a\u51fa\u73b0\u6ea2\u51fa.. overruns\u503c\u5347\u9ad8.. \u8fd9\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u5c31\u8bbf\u95ee\u4e0d\u8fdb\u6765\u4e86,\u7528\u6237\u7b49\u5f85\u65f6\u95f4\u8f83\u957f,\u4f53\u9a8c\u5f88\u5dee!! \u6392\u9664\u7f51\u7edc\u7684\u5e72\u6270 \"\"\" step1:\u67e5\u770b\u662f\u5426\u8fde\u63a5\u7f51\u7ebf \"\"\" [ root@localhost ~ ] # mii-tool eth0 eth0: negotiated 1000baseT-FD flow-control, link ok \"\"\" step2:\u67e5\u770b\u5de5\u4f5c\u6a21\u5f0f\u662f\u5426\u6b63\u5e38 \"\"\" [ root@localhost ~ ] # ethtool eth0 | egrep 'Speed|Duplex' Speed: 1000Mb/s ## -- \u5343\u5146\u7f51\u5361 Duplex: Full ## -- Full \u4ee3\u8868\u5168\u53cc\u5de5 half\u7684\u8bdd\u4ee3\u8868\u534a\u53cc\u5de5 \"\"\" step3:\u67e5\u770b\u7f51\u5361\u4e0eMTU\u662f\u5426\u5339\u914d \"\"\" [ root@localhost ~ ] # ifconfig eth0 | grep mtu eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 \"\"\" step4:\u67e5\u770bCRC\u6821\u9a8c\u662f\u5426\u6b63\u5e38 \"\"\" [ root@localhost ~ ] # ethtool -S eth0 | grep crc rx_crc_errors: 0 ## -- crc\u9519\u8bef\u503c\u5927\u901a\u5e38\u662f\u56e0\u4e3a\u670d\u52a1\u5668\u5916\u90e8\u7684\u7f51\u7edc\u73af\u5883\u6709\u95ee\u9898\u5bfc\u81f4\u7684 Speed\u3001Duplex\u3001CRC\u4e4b\u7c7b\u7684\u90fd\u6ca1\u95ee\u9898,\u57fa\u672c\u53ef\u4ee5\u6392\u9664\u7269\u7406\u5c42\u9762\u7684\u5e72\u6270 \u7f51\u7edc\u6ca1\u95ee\u9898, \u90a3\u4e48\u95ee\u9898\u5c31\u51fa\u73b0\u5728\u670d\u52a1\u5668\u4e0a\u4e86 \u3010\u76d1\u6d4boverruns\u503c\u3011 while true ; do ifconfig eth0 | grep RX | grep overruns ; sleep 0 .5 ; clear ; done \u76d1\u6d4b\u7684\u65f6\u5019,\u67d0\u4e00\u65f6\u523b,overruns\u8fbe\u5230\u4e86\u4e0a\u767e,\u53c8\u964d\u4e86\u4e0b\u6765 ( TCP\u91cd\u65b0\u53d1\u5305\u4e86 ) ,\u4e0d\u7528\u8fc7\u4e8e\u62c5\u5fc3 \u82e5\u503c\u4e00\u76f4\u4e00\u76f4\u5728\u589e\u957f,\u610f\u5473\u7740\u5728\u4e00\u76f4\u7d2f\u79ef\u6ea2\u51fa\u7684\u5305,\u7528\u6237\u4e00\u76f4\u8bbf\u95ee\u4e0d\u8fdb\u6765,\u4f53\u9a8c\u6781\u5dee.. \u89e3\u51b3\u65b9\u6848: \u4f4e\u914d\u7248 -- \u5355\u53f0\u670d\u52a1\u5668,\u8c03\u5927\u7f13\u51b2\u533a.. \u7f13\u51b2\u533a\u6700\u9ad84096,\u4e0d\u591f\u4e86\u548b\u6574\uff1f\u4e00\u4e2a\u7f51\u5361\u7684\u6027\u80fd\u6709\u6781\u9650\u7684,\u7528\u591a\u4e2a\u7f51\u5361 -- \u5782\u76f4\u6269\u5c55 \u9ad8\u914d\u7248 --\u52a0\u673a\u5b50,\u96c6\u7fa4\u5316\u4f5c\u4e1a,\u591a\u53f0\u673a\u5668\u6297\u538b\u529b,\u6d41\u91cf\u5c31\u88ab\u5206\u6563\u4e86. -- \u6c34\u5e73\u6269\u5c55!!! So!\u5f00\u53d1\u4e0d\u80fd\u9119\u89c6\u8fd0\u7ef4,\u5f00\u53d1\u7684\u8f6f\u4ef6\u518d\u597d,\u6700\u591a\u652f\u6301\u51e0\u5343\u5e76\u53d1,\u4f46\u8fd0\u7ef4\u96c6\u7fa4\u5316\u4f5c\u4e1a\u80fd\u628a\u8f6f\u4ef6\u7684\u5e76\u53d1\u6027\u80fd\u653e\u5927\u51e0\u5341\u4e0a\u767e\u500d.. [ root@localhost ~ ] # ethtool -g eth0 # -- \u67e5\u770b Ring parameters for eth0: Pre-set maximums: RX: 4096 # -- \u63a5\u6536\u7684\u7f13\u51b2\u533a\u5927\u5c0f RX Mini: 0 RX Jumbo: 0 TX: 4096 # -- \u4f20\u8f93\u7684\u7f13\u51b2\u533a\u5927\u5c0f Current hardware settings: # -- \u5f53\u524d\u786c\u4ef6\u7684\u8bbe\u7f6e RX: 256 RX Mini: 0 RX Jumbo: 0 TX: 256 ethtool -G eth0 rx 2048 # \u8bbe\u7f6e\u8c03\u5927 ethtool -G eth0 tx 2048 # \u8bbe\u7f6e\u8c03\u5927 Ps:\u8fd8\u53ef\u4ee5\u60f3\u7740\u5c06\u7f51\u5361\u964d\u901f..\u8fd9\u60f3\u6cd5\u633a\u5947\u602a\u7684Hhhh \u7f51\u5361\u76f8\u5173\u914d\u7f6e\u6587\u4ef6 \u00b6 \u89e3\u6790 ifcfg-eth0\u6587\u4ef6 \u00b6 vim /etc/sysconfig/network-scripts/ifcfg-eth0 systemctl restart network \u91cd\u542f\u7f51\u7edc\u670d\u52a1\u4f1a\u53bb\u52a0\u8f7d\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6 \u25b2 \u5fc5\u8981\u5b57\u6bb5 \"\"\" BOOTPROTO\u82e5\u8bbe\u7f6e\u4e3adchp,\u8868\u660e\u52a8\u6001\u83b7\u53d6IP\u5730\u5740,\u5728\u79df\u7ea6\u65f6\u95f4\u5185IP\u5730\u5740\u4e0d\u4f1a\u53d8..\u5230\u671f\u4e86\u540e\u91cd\u65b0\u5206\u914dIP.. IPADDR\u3001NETMASK\u3001GATEWAY\u3001DNS1\u3001DNS2\u8fd9\u51e0\u4e2a\u5b57\u6bb5\u53ea\u6709\u5728BOOTPROTO\u7684\u503c\u4e3astatic\u6216none\u65f6\u624d\u4f1a\u751f\u6548.. IPADDR\u3001NETMASK\u4fdd\u8bc1\u4e86\u5c40\u57df\u7f51\u91cc\u7684\u901a\u4fe1,GATEWAY\u3001DNS1\u3001DNS2\u4fdd\u8bc1\u4e86\u4e0e\u5916\u7f51\u7684\u901a\u4fe1. IPADDR\u7684\u914d\u7f6e\u8981\u6ce8\u610f,vm\u7f51\u5361\u82e5\u7528\u7684\u6865\u63a5\u6a21\u5f0f\u8981\u9632\u6b62\u5360\u7528\u5176\u4ed6\u8bbe\u5907\u7684IP,\u82e5\u7528\u7684NAT\u6a21\u5f0f\u6ca1\u5173\u7cfb. DNS\u7684\u5730\u5740\u6700\u591a\u914d\u7f6e3\u4e2a,\u914d\u7f6e\u540e\u4f1a\u5199\u5165/etc/resolv.conf\u6587\u4ef6\u4e2d GATEWAY\u7684\u503c\u53ef\u4ee5\u901a\u8fc7`route -n`\u547d\u4ee4\u67e5\u770b\u8def\u7531\u5668\u4e0a\u914d\u7f6e\u7684\u7f51\u5173\u5730\u5740; \u4f01\u4e1a\u91cc\u901a\u5e38\u662f\u96c6\u7fa4\u5316\u4f5c\u4e1a,so,BOOTPROTO\u7684\u503c\u90fd\u4f1a\u662fstatic!!!!!! Ps:\u53ef\u4ee5\u5148DHCP\u52a8\u6001\u83b7\u53d6IP,\u7136\u540e\u5728\u9759\u6001\u914d\u7f6e\u65f6,\u53bb\u67e5\u770b/etc/resolv.conf\u6587\u4ef6\u91cc\u9762\u5df2\u8bbe\u7f6e\u7684DNS(nameserver\u5b57\u6bb5\u7684\u503c) \u901a\u5e38\u662f8.8.8.8 \u548c \u7f51\u5173\u7684\u5730\u5740 NM_CONTROLLED\u53ef\u4ee5\u4e0d\u6dfb\u52a0,\u524d\u63d0\u662f\u6267\u884c\u547d\u4ee4 systemctl stop NetworkManger systemctl disable NetworkManger \"\"\" TYPE = \"Ethernet\" ## -- Ethernet\u7c7b\u578b\u8868\u660e\u662f\u4ee5\u592a\u7f51\u5361\uff01 BOOTPROTO = \"static\" ## -- none \u6216\u8005 static \u90fd\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u9759\u6001IP IPADDR = 192 .168.0.100 ## -- IP\u5730\u5740 NETMASK = 255 .255.255.0 ## -- IP\u63a9\u7801\u5730\u5740 GATEWAY = 192 .168.0.254 ## -- \u7f51\u5173\u5730\u5740 DNS1 = 192 .168.0.254 ## -- \u7b2c\u4e00\u4e2aDNS\u5730\u5740 DNS2 = 8 .8.8.8 ## -- \u7b2c\u4e8c\u4e2aDNS\u5730\u5740 NAME = \"eth0\" ## -- \u540d\u5b57 DEVICE = \"eth0\" ## -- \u8bbe\u5907\u540d ONBOOT = \"yes\" ## -- \u4ee3\u8868\u7f51\u5361\u662f\u5426\u8ddf\u7740NETWORK\u7f51\u7edc\u670d\u52a1\u7684\u542f\u52a8\u800c\u6fc0\u6d3b NM_CONTROLLED = \"no\" ## -- \u8868\u660e\u7f51\u5361\u4e0d\u53d7NetworkManager\u670d\u52a1\u7684\u5f71\u54cd \u25b2 \u5176\u4ed6\u4e0d\u5fc5\u8981\u5b57\u6bb5 ## -- \u914d\u7f6e\u7f51\u5361\u8def\u7531\u6587\u4ef6\u7684\u65f6\u5019\u9700\u8981\u8fdb\u884c\u6b64\u5b57\u6bb5\u7684\u8bbe\u7f6e \u8868\u793aDHCP\u7684\u8def\u7531\u914d\u7f6e\u4e0d\u751f\u6548!! DEFROUTE = \"no\" ## -- \u914d\u7f6e\u7f51\u5361\u8def\u7531\u6587\u4ef6\u7684\u65f6\u5019\u9700\u8981\u8fdb\u884c\u6b64\u5b57\u6bb5\u7684\u8bbe\u7f6e \u503c\u4e3ano\u8868\u793aDHCP\u8bbe\u7f6e\u7684\u8def\u7531\u5141\u8bb8\u88ab\u8986\u76d6!! PEERROUTES = \"no\" ## -- \u7f51\u5361\u7684MAC\u5730\u5740\u4fe1\u606f,centos7\u91cc\u6ca1\u6709,centos6\u91cc\u6709 HWADDR = 14 :da:e9:eb:a9:61 ## -- \u662f\u5426\u5141\u8bb8\u666e\u901a\u7528\u6237\u542f\u52a8\u6216\u8005\u505c\u6b62\u8be5\u7f51\u5361 USERCTL = no ## -- \u662f\u5426\u5728\u8be5\u7f51\u5361\u4e0a\u542f\u52a8IPV6\u7684\u529f\u80fd IPV6INIT = no \u3000\u3000\u3000\u3000\u3000\u3000\u3000 ## --\u662f\u5426\u5141\u8bb8\u7f51\u5361\u5728\u542f\u52a8\u65f6\u5411DHCP\u670d\u52a1\u5668\u67e5\u8be2DNS\u4fe1\u606f,\u8be5\u5b57\u6bb5\u4e86\u89e3\u5373\u53ef # \u8bbe\u7f6e\u4e3ayes\u65f6,\u6b64\u6587\u4ef6\u8bbe\u7f6e\u7684DNS\u5c06\u8986\u76d6/etc/resolv.conf # BOOTPROTO\u82e5\u8bbe\u7f6e\u4e3adchp(\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684DNS1\u662f\u4e0d\u751f\u6548\u7684),\u5219\u9ed8\u8ba4\u4e3ayes,dhcp\u7684dns\u4f1a\u8986\u76d6/etc/resolv.conf PEERDNS = yes \u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 ## -- \u82e5\u51b2\u7a81,\u53ef\u4ee5\u76f4\u63a5\u5220\u9664 UUID = \"3919d7da-ef03-40a0-814e-d78c047e1f87\" \u914d\u7f6eifcfg-eth1\u6587\u4ef6 \u00b6 # -- \u53ef\u4ee5\u53d1\u73b0\u53ea\u6709\u7f51\u5361eth0\u7684\u914d\u7f6e\u6587\u4ef6,\u867d\u7136\u65b0\u589e\u4e86eth1\u7f51\u5361,\u4f46\u7cfb\u7edf\u5e76\u6ca1\u6709\u81ea\u52a8\u4e3a\u5b83\u751f\u6210\u914d\u7f6e\u6587\u4ef6,\u6240\u4ee5eth1\u662f\u4e34\u65f6\u7684 [ root@localhost ~ ] # ls /etc/sysconfig/network-scripts | grep ifcfg-eth ifcfg-eth0 cd /etc/sysconfig/network-scripts/ cp ifcfg-eth0 ifcfg-eth1 vim ifcfg-eth1 \"\"\" \u82e5\u4e0d\u60f3\u901a\u8fc7172.16.150.100\u8fd9\u4e2aIP\u5730\u5740\u8bbf\u95ee\u5916\u7f51\u5c31\u6ca1\u5fc5\u8981\u6307\u5b9aGATEWAY\u7f51\u5173\u7b49\u5b57\u6bb5\u4fe1\u606f \u771f\u6b63\u7684\u751f\u4ea7\u73af\u5883\u91cc,\u4e5f\u4e0d\u4f1a\u7ed9\u6bcf\u5757\u7f51\u5361\u914d\u7f6e\u7f51\u5173,\u4e00\u5757\u7f51\u5361\u914d\u7f6e\u4e86\u5c31\u884c\u4e86 So,\u6211\u4eec\u53ef\u4ee5\u5c06eth0\u7f51\u5361\u7528\u4e8e\u5916\u7f51\u901a\u4fe1,eth1\u7f51\u5361\u7528\u4e8e\u5185\u7f51\u901a\u4fe1... \"\"\" TYPE = \"Ethernet\" BOOTPROTO = \"static\" IPADDR = 172 .16.150.100 NETMASK = 255 .255.255.0 #GATEWAY = 172.16.150.2 #DNS1 = 172.16.150.2 #DNS2 = 8.8.8.8 NAME = \"eth1\" DEVICE = \"eth1\" ONBOOT = \"yes\" NM_CONTROLLED = \"no\" DNS\u76f8\u5173\u914d\u7f6e\u6587\u4ef6 \u00b6 /etc/resolv.conf DNS\u89e3\u6790\u6587\u4ef6, \u53ef\u8bbe\u7f6eDNS\u6307\u5411,\u6700\u591a3\u4e2a /etc/hosts \u672c\u5730\u540d\u79f0\u89e3\u6790\u6587\u4ef6, \u4f18\u5148\u4e8eDNS\u89e3\u6790\u6587\u4ef6 DNS\u67e5\u8be2\u987a\u5e8f \u6d4f\u89c8\u5668DNS\u7f13\u5b58 --> \u672c\u5730\u7cfb\u7edfDNS\u7f13\u5b58 --> \u672c\u5730\u8ba1\u7b97\u673aHOSTS\u6587\u4ef6 --> ISP DNS\u7f13\u5b58 --> \u9012\u5f52or\u8fed\u4ee3\u641c\u7d22 \u25b2 \u4e00\u4e2a\u5c0f\u5b9e\u9a8c,\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/hosts \u5728\u672b\u5c3e\u6dfb\u52a01.1.1.1 www.baidu.com [ root@localhost ~ ] # ping www.baidu.com PING www.a.shifen.com ( 14 .215.177.39 ) 56 ( 84 ) bytes of data. ... ... [ root@localhost ~ ] # ping www.baidu.com PING www.baidu.com ( 1 .1.1.1 ) 56 ( 84 ) bytes of data. # -- \u767e\u5ea6\u57df\u540d\u88ab\u89e3\u6790\u6210\u4e861.1.1.1 ... ... \u67d0\u516c\u53f8\u7528A B C D E..HI..\u7b4920\u53f0\u673a\u5668\u642d\u5efa\u4e86\u4e00\u4e2a\u96c6\u7fa4!! A\u8981\u8ddf\u5176\u5b83\u673a\u5668\u901a\u4fe1,\u9700\u8981\u77e5\u9053\u76ee\u6807\u4e3b\u673a\u7684IP\u5730\u5740.. \u5e76\u4e14\u5728\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u76ee\u6807\u4e3b\u673a\u7684IP.. \u8fd9\u6837\u505a\u4e0d\u597d,\u4e00\u65b9\u9762IP\u5730\u5740\u96be\u8bb0 ; \u53e6\u4e00\u65b9\u9762\u4e3b\u673a\u7684IP\u5730\u5740\u65e5\u540e\u53ef\u80fd\u4f1a\u53d8..\u4e00\u53d8,20\u53f0\u4e3b\u673a\u91cd\u65b0\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u5f88\u9ebb\u70e6.. \u6700\u89c4\u8303\u7684\u505a\u6cd5: \u5728\u516c\u53f8\u5185\u90e8\u81ea\u5df1\u642d\u5efa\u4e2aDNS\u670d\u52a1 ; \u4f1a\u5148\u7ed9\u8fd920\u53f0\u673a\u5668\u6bcf\u53f0\u673a\u5668\u8d77\u4e2a\u540d\u5b57,\u4e5f\u5c31\u662f\u57df\u540d,\u6bcf\u4e2a\u57df\u540d\u5bf9\u5e94\u4e00\u4e2aIP\u5730\u5740\u8bb0\u5f55\u5728DNS\u670d\u52a1\u5668\u4e2d.. ` hostnamectl set-hostname egon.xxx.com ` \u6c38\u4e45\u8bbe\u7f6e\u4e3b\u673a\u540d. \u8fd9\u6837\u4e00\u6765,\u914d\u7f6e\u6587\u4ef6\u4e2d\u53ea\u9700\u8981\u4f7f\u7528\u57df\u540d\u5373\u53ef,\u5f53A\u4e3b\u673a\u4e0e\u96c6\u7fa4\u4e2d\u5176\u4ed6\u673a\u5668\u901a\u4fe1\u65f6,\u4f1a\u53bb\u81ea\u5df1\u642d\u5efa\u7684DNS\u670d\u52a1\u5668\u4e0a\u67e5\u4e00\u67e5\u5bf9\u5e94\u7684\u57df\u540d\u89e3\u6790.. \u5f53\u67d0\u4e2a\u4e3b\u673a\u7684IP\u5730\u5740\u53d8\u4e86,\u96c6\u7fa4\u4e2d20\u7ea7\u53f0\u673a\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4e0d\u9700\u8981\u52a8,\u6539DNS\u670d\u52a1\u5668\u4e0a\u7684\u67d0\u6761\u89e3\u6790\u8bb0\u5f55\u5373\u53ef.. \u56e0\u4e3a\u662f\u5185\u90e8\u642d\u5efa\u7684DNS\u670d\u52a1\u5668,\u57df\u540d\u8fd8\u4e0d\u7528\u6ce8\u518c.. \u4e5f\u4fbf\u4e8e\u96c6\u7fa4\u4e2d\u589e\u52a0\u4e3b\u673a\u65f6\u7684\u64cd\u4f5c.. \u642d\u5efa\u4e2aDNS\u670d\u52a1\u4e0d\u4ec5\u53ef\u4ee5\u589e\u52a0\u53ef\u6269\u5c55\u6027,DNS\u670d\u52a1\u5668\u8fd8\u53ef\u4ee5\u505a\u8d1f\u8f7d\u5747\u8861\u7b49.. \u5077\u61d2\u7684\u505a\u6cd5: \u4e0d\u642d\u5efaDNS\u670d\u52a1,\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5c0620\u53f0\u673a\u5668\u7684\u89e3\u6790\u8bb0\u5f55\u5199\u5165/etc/hosts\u6587\u4ef6,\u518d\u7ed9\u6bcf\u53f0\u673a\u5668\u90fd\u53d1\u9001\u4e00\u4efd,\u4f46\u610f\u5473\u7740\u6bcf\u6b21\u6539\u52a8,\u6bcf\u53f0\u673a\u5668\u90fd\u8981\u540c\u6b65\u4e00\u4e0b.. ( \u6709\u4e00\u4e9b\u81ea\u52a8\u5316\u7ba1\u7406\u5de5\u5177,\u6539\u52a8\u4ee5\u540e\u53ef\u81ea\u52a8\u6279\u91cf\u7684\u6bcf\u53f0\u673a\u5668\u90fd\u4f20\u4e00\u4efd ) /etc/services \u00b6 \u8bb0\u5f55\u4e86\u6bcf\u4e00\u4e2a\u8f6f\u4ef6\u8ddf\u5b83\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\u4ee5\u53ca\u534f\u8bae \u5e38\u89c1\u7684\u670d\u52a1\u7aef\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7 \u670d\u52a1\u7aef \u7aef\u53e3\u53f7 dhcp 67 dns 53 mysql 3306 ssh 22 grep '^ftp\\|^ssh' / etc / services \u4ea4\u6362\u4e0e\u8def\u7531 \u00b6 \u4ea4\u6362: \u6307\u540c\u7f51\u7edc\u8bbf\u95ee. \u591a\u53f0\u4e3b\u673a\u5904\u4e8e\u540c\u4e00\u4e2aLAN/\u4ea4\u6362\u673a/\u5c40\u57df\u7f51\u4e2d,\u914d\u7f6e\u540c\u7f51\u6bb5\u7684\u4e0d\u540cip\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u4fe1,\u4e8c\u5c42\u7f51\u7edc\u672c\u8d28\u662f\u57fa\u4e8emac\u5730\u5740\u7684\u901a\u4fe1,\u4e0d\u9700\u8981\u8fdb\u884c\u8f6c\u53d1,\u8fd9\u91cc\u9ed8\u8ba4\u4ea4\u6362\u673a\u672a\u5212\u5206\u8fc7vlan( \u5373\u4e0d\u8ba8\u8bba\u4e09\u5c42\u4ea4\u6362 ).. \u8def\u7531: \u6307\u8de8\u7f51\u7edc\u8bbf\u95ee\u7684\u8def\u5f84\u9009\u62e9. \u82e5\u8981\u4e0e\u5916\u7f51\u901a\u4fe1,\u5c31\u9700\u8981\u8f6c\u53d1/\u8def\u7531.. \u8def\u7531\u5668\u4e0a\u914d\u7f6e\u7684\u6709\u7f51\u5173.. \u7f51\u5173\u6709\u4e2a\u7279\u70b9, \u81f3\u5c11\u5f97\u6709\u4e24\u4e2a\u5730\u5740, \u5bf9\u5185\u5f97\u6709\u4e00\u4e2a\u5c40\u57df\u7f51\u5730\u5740, \u5bf9\u5916\u5f97\u6709\u4e00\u4e2a\u5916\u7f51\u5730\u5740.. Linux\u4e3b\u673a\u5145\u5f53\u8def\u7531 \u00b6 \u4e09\u5927\u524d\u63d0 \u00b6 \u5c06\u4e00\u53f0linux\u4e3b\u673aA\u5f53\u4f5c\u8def\u7531\u7684 \u4e09\u5927\u524d\u63d0 : 1> \u4e3b\u673aA\u81f3\u5c11\u5f97\u6709\u4e24\u5757\u7f51\u5361\u5206\u522b\u8fde\u63a5\u4e0d\u540c\u7684\u7f51\u6bb5; (A\u4e3b\u673a\u8fde\u63a5\u7684\u4e0d\u540c\u7f51\u6bb5\u91cc\u7684\u4e3b\u673a\u90fd\u5fc5\u987b\u5c06\u7f51\u5173\u6307\u5411\u4e3b\u673aA) 2> \u4e3b\u673aA\u5f00\u542f\u8def\u7531\u8f6c\u53d1\u529f\u80fd(\u9ed8\u8ba4\u662f\u5173\u95ed\u7684); echo 1 > /proc/sys/net/ipv4/ip_forward \u4e34\u65f6\u6253\u5f00. 3> \u5728\u8be5linux\u4e3b\u673a\u4e0a\u6dfb\u52a0\u6b63\u786e\u7684\u8def\u7531\u89c4\u5219/\u7b56\u7565.. \u8f6c\u53d1\u6d41\u7a0b \u00b6 A\u4e3b\u673a\u7684linux OS\u5de6\u624b\u7f51\u53611,\u53f3\u624b\u7f51\u53612,\u8fde\u63a5\u4e24\u4e2a\u4e0d\u540c\u7684\u7f51\u6bb5..(B\u4e3b\u673a\u5904\u4e8e\u7f51\u6bb51,C\u4e3b\u673a\u5904\u4e8e\u7f51\u6bb52) B\u3001C\u5904\u4e8e\u4e0d\u540c\u7f51\u6bb5,\u662f\u4e0d\u80fd\u76f4\u63a5\u901a\u4fe1\u7684, A\u53ef\u4ee5\u4f5c\u4e3aBC\u4e4b\u95f4\u4e92\u901a\u7684\u6865\u6881.. B < > A < > C \u4e3b\u673aB\u53d1\u9001\u4e86\u4e2a\u6570\u636e\u5305,\u4f1a\u4ece\u7f51\u53611\u8fdb\u6765\u7684, A\u4e3b\u673a\u7684linux\u5185\u6838\u4f1a\u5148\u5224\u65ad\u6b64\u5305\u662f\u4e0d\u662f\u7ed9\u672c\u673a\u7684, \u4e0d\u662f\u7684\u8bdd\u5c31\u6b63\u5e38\u7684\u4e22\u6389.. \u82e5\u662f\u7ed9\u672c\u673a\u7684: \u60c5\u51b51: \u8be5\u6570\u636e\u5305\u5c31\u662f\u660e\u786e\u7684\u7ed9\u672c\u673a\u4e0a\u5c42\u7684\u5e94\u7528\u7a0b\u5e8f\u7684; \u6570\u636e\u5305\u6d41\u5411: \u7f51\u53611 - \u64cd\u4f5c\u7cfb\u7edf(A\u4e3b\u673a\u7684 \u5185\u6838\u7a7a\u95f4 ) - \u5e94\u7528\u7a0b\u5e8f(A\u4e3b\u673a\u7684 \u7528\u6237\u7a7a\u95f4 ) \u60c5\u51b51> \u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u5b8c\u6570\u636e\u5305\u5c31\u7ed3\u675f\u4e86,\u4e0d\u9700\u8981\u8fd4\u56de\u6570\u636e\u5305; \u60c5\u51b52> \u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u5b8c\u6570\u636e\u5305\u4ea7\u751f\u4e86\u65b0\u7684\u7ed3\u679c,\u65b0\u7684\u6570\u636e\u5305\u4eceA\u7684\u7528\u6237\u7a7a\u95f4\u4e22\u5230\u4e86A\u7684\u5185\u6838\u7a7a\u95f4.. \u5185\u6838\u518d\u5224\u65ad\u65b0\u7684\u6570\u636e\u5305\u4ece\u54ea\u4e2a\u7f51\u5361\u53d1\u51fa\u53bb... \u65b0\u6570\u636e\u5305\u7684\u76ee\u6807\u4e3b\u673a\u662fC\u5c31\u4ece\u7f51\u53612\u51fa\u53bb;\u662fB\u5c31\u4ece\u7f51\u53611\u539f\u8def\u8fd4\u56de... \u60c5\u51b52: \u5c06\u672c\u673a\u7684OS Linux\u5f53\u4f5c\u8def\u7531\u5668\u4f7f\u7528,\u6570\u636e\u5305\u4e0d\u4f1a\u8fdb\u5165A\u4e3b\u673a\u7684\u7528\u6237\u7a7a\u95f4,\u6570\u636e\u5305\u4f1a\u4ece\u7f51\u53612\u51fa\u53bb,\u8f6c\u53d1\u7ed9C; # -- \u53ef\u4ee5\u770b\u5230 linux\u4e3b\u673a\u7684\u8def\u7531\u8f6c\u53d1\u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684 0\u5173\u95ed 1\u5f00\u542f [ root@localhost ~ ] # cat /proc/sys/net/ipv4/ip_forward 0 \u7f51\u5173/\u8def\u7531 \u00b6 route\u547d\u4ee4 \u5206\u7c7b\u3001\u4f18\u5148\u7ea7 \u00b6 Linux\u4e0a\u7684\u8def\u7531\u5206\u4e3a3\u79cd: 1> \u4e3b\u673a\u8def\u7531 : \u660e\u786e\u6307\u5b9a\u4e86\u5230\u8fbe\u67d0\u53f0\u4e3b\u673a\u5e94\u8be5\u600e\u4e48\u8d70.. \u4e3b\u673a\u8def\u7531\u4e5f\u53eb\u505a\u9759\u6001\u8def\u7531 \u63a9\u7801\u4f4d32\u4f4d 2> \u7f51\u7edc\u8def\u7531 : \u6307\u660e\u5230\u67d0\u7c7b\u7f51\u7edc\u600e\u4e48\u8d70, \u7cbe\u786e\u5230\u4e86\u67d0\u4e2a\u7f51\u6bb5.. \u63a9\u7801\u4f4d\u5c0f\u4e8e32\u4f4d 3> \u9ed8\u8ba4\u8def\u7531 : \u4e0d\u8d70\u4e3b\u673a\u8def\u7531\u7684\u548c\u7f51\u7edc\u8def\u7531\u7684, \u5168\u90e8\u90fd\u8d70\u9ed8\u8ba4\u8def\u7531. \u63a9\u7801\u5168\u4e3a0 \u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u8def\u7531\u4e00\u822c\u79f0\u4e3a\u7f51\u5173.. \u56de\u987e\u4e0b, \u5b50\u7f51\u63a9\u7801\u4e0eIP\u5730\u5740\u505a\u4e0e\u8fd0\u7b97\u53ef\u4ee5\u7b97\u51fa\u7f51\u7edc\u5730\u5740(\u540c1\u4e3a1,\u5426\u5219\u4e3a0).. \u4e00\u4e2aB\u7c7b\u7684IP\u5730\u5740,\u5b50\u7f51\u63a9\u7801\u81f3\u5c11\u662f8\u4f4d,IP\u5730\u5740\u7684\u7f51\u7edc\u4f4d\u5411\u4e3b\u673a\u4f4d\u501f\u4f4d(\u501f\u7684\u53eb\u505a\u5b50\u7f51\u4f4d)\u6765\u5212\u5206\u5b50\u7f51.. \u5b50\u7f51\u63a9\u7801\u8d8a\u77ed\u610f\u5473\u7740\u5212\u5206\u7684\u5b50\u7f51\u6570\u8d8a\u5c11, \u6bcf\u4e2a\u5b50\u7f51\u7684\u8303\u56f4(\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u7684\u4e3b\u673a\u4e2a\u6570)\u5c31\u8d8a\u5927; \u53cd\u4e4b\u5219\u76f8\u53cd!!! \u4f18\u5148\u7ea7:(\u6839\u636e\u7cbe\u786e\u5ea6\u5224\u65ad\u7684) \u4e3b\u673a\u8def\u7531 > \u7f51\u7edc\u8def\u7531 > \u9ed8\u8ba4\u8def\u7531 \u82e5\u8def\u7531\u6761\u76ee\u7684\u63a9\u7801\u957f\u5ea6\u76f8\u540c, \u5219\u6bd4\u8f83\u8282\u70b9\u4e4b\u95f4\u7684\u7ba1\u7406\u8ddd\u79bb(\u6bd4\u5982metric), \u7ba1\u7406\u8ddd\u79bb\u77ed\u7684\u751f\u6548 \u4e3e\u4e2a\u6817\u5b50, 1.1.1.10/32 32\u4f4d\u7684\u63a9\u7801\u610f\u5473\u7740IP\u5730\u5740\u7684\u524d32\u4f4d\u90fd\u662f\u7f51\u7edc\u53f7,\u6ca1\u6709\u5269\u4e0b\u4e3b\u673a\u4f4d,\u4e0d\u80fd\u501f\u4f4d,\u8be5IP\u4e5f\u5c31\u4e0d\u80fd\u5212\u5206\u4efb\u4f55\u7684\u5b50\u7f51.. 1.1.1.10\u7f51\u6bb5\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u673a\u5668... \u53ea\u6709\u5b83\u81ea\u5df1.. \u7cbe\u786e\u5230\u4e86\u4e00\u53f0\u673a\u5668!!! \u67e5\u770b\u8def\u7531\u8868\u4fe1\u606f \u00b6 route -n -n\u9009\u9879\u8868\u793a\u4e0d\u89e3\u6790\u4e3b\u673a\u540d Destination: \u53bb\u5f80\u76ee\u6807,\u76ee\u7684\u5730 0.0.0.0/0 \u4ee3\u8868\u6240\u6709\u7684IP\u5730\u5740\u90fd\u662f\u76ee\u7684\u5730 Gateway: \u4e0b\u4e00\u8df3(\u4e0b\u4e00\u6b65\u4ea4\u7ed9\u8c01\u505a\u8f6c\u53d1) 0.0.0.0\u8868\u660e\u6ca1\u6709\u4e0b\u4e00\u8df3,\u901a\u8fc7Iface\u6307\u5b9a\u7684\u7f51\u5361\u5f80\u5c40\u57df\u7f51\u91cc\u4e00\u4e22. \u8c01\u6536\u5230\u7b97\u8c01\u7684,\u6536\u5230\u7684\u90a3\u53f0\u4e3b\u673a\u4e0d\u4f1a\u5c06\u8be5\u6570\u636e\u5305\u505a\u4e0b\u4e00\u8df3\u7684\u8f6c\u53d1. 172.16.150.2 \u6307\u5b9a\u4e86\u7f51\u5173IP \u8868\u660e\u7f51\u5173\u4f1a\u5b89\u6392\u4e0b\u4e00\u8df3 169.254.0.0 \u662f\u4fdd\u7559\u7f51\u5173 Genmask: \u5b50\u7f51\u63a9\u7801 Flags: \u6807\u5fd7\u4f4d U \u6b64\u8def\u7531\u89c4\u5219\u6b63\u5728\u751f\u6548 G \u7f51\u5173 H \u4e3b\u673a\u8def\u7531 Metric: \u603b\u5171\u7ecf\u5386\u591a\u5c11\u8df3 Iface: \u4ece\u54ea\u4e2a\u7f51\u5361\u51fa\u53bb ## -- \u8fd9\u4e9b\u4fe1\u606f\u662f\u4eceDHCP\u91cc\u83b7\u53d6\u5230\u7684,\u82e5\u4e0d\u60f3\u8981DHCP\u7684,\u60f3\u81ea\u5df1\u914d\u7f6e\u7684\u751f\u6548,\u5219\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff01 [ root@localhost ~ ] # route -n Kernel IP routing table # -- \u5185\u6838IP\u8def\u7531\u8868 Destination Gateway Genmask Flags Metric Ref Use Iface 0 .0.0.0 172 .16.150.2 0 .0.0.0 UG 0 0 0 eth0 169 .254.0.0 0 .0.0.0 255 .255.0.0 U 1002 0 0 eth0 # --\u4fdd\u7559\u7f51\u5173,\u4e86\u89e3 172 .16.150.0 0 .0.0.0 255 .255.255.0 U 0 0 0 eth0 192 .168.122.0 0 .0.0.0 255 .255.255.0 U 0 0 0 virbr0 \u6dfb\u52a0/\u5220\u9664\u8def\u7531 \u00b6 eth0\u7f51\u5361 -- inet 172 .16.150.131 netmask 255 .255.255.0 \u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\u4e00\u6761\u7f51\u7edc\u8def\u7531!!! ` route add -net 192 .168.0.0/24 dev eth0 ` \u4e3a\u4f55\u53ea\u8981\u6dfb\u52a0\u4e00\u4e2aip\u5730\u5740,\u5c31\u4f1a\u9ed8\u8ba4\u589e\u52a0\u4e00\u4e2a\u8be5ip\u5730\u5740\u7684\u7f51\u6bb5\u8def\u7531\uff1f 1> \u6dfb\u52a0/\u5220\u9664\u4e3b\u673a\u8def\u7531,\u7cbe\u786e\u5230\u4e00\u4e2aIP\u5730\u5740 route add -host 1.1.1.10/32 dev eth0 -- \u4e0d\u9700\u8981\u8f6c\u53d1\u5219\u6307\u5b9adev route add -host 1.1.1.11/32 gw 172.16.150.2 -- \u82e5\u9700\u8981\u8f6c\u53d1,\u6307\u5b9agw route del -host 1.1.1.10/32 2> \u6dfb\u52a0/\u5220\u9664\u7f51\u7edc\u8def\u7531 route add -net 2.2.2.0/24 dev eth0 route del -net 2.2.2.0/24 3> \u5220\u9664/\u6dfb\u52a0\u9ed8\u8ba4\u8def\u7531 route del default route add -net 0.0.0.0/0 gw 172.16.150.2 \u6216\u8005 route add default gw 172.16.150.2 systemctl restart network \u91cd\u542f\u7f51\u7edc\u914d\u7f6e\u540e, \u4e0a\u8ff0\u7684\u8bbe\u7f6e\u5931\u6548 \u914d\u7f6e\u6c38\u4e45\u8def\u7531 \u00b6 vim /etc/syconfig/network-scripts/route-eth0 \u6ce8\u610f: 1 > \u65b0\u589e\u4e00\u4e2a\u8def\u7531\u914d\u7f6e\u6587\u4ef6,\u524d\u63d0\u9700\u8981\u4e00\u4e2a\u76f8\u5bf9\u5e94\u7684\u540d\u4e3aifcfg-eth0\u7684\u7f51\u5361\u914d\u7f6e\u6587\u4ef6 \u540d\u5b57\u8981\u5bf9\u5e94\u4e0a\u54e6! route-ethX, \u8981\u4ece\u54ea\u4e2a\u63a5\u53e3\u51fa\u53bbX\u5c31\u662f\u51e0 2 > \u5728\u6587\u4ef6\u4e2d\u914d\u7f6e\u6c38\u4e45\u9ed8\u8ba4\u8def\u7531, \u5219\u5fc5\u987b\u4fdd\u8bc1\u6240\u6709\u4f7f\u7528\u4e86DHCP\u670d\u52a1\u7684\u7f51\u5361\u914d\u7f6e\u6587\u4ef6ifcfg-ethX\u4e2d\u7684 DEFROUTE\u6307\u4ee4\u8bbe\u7f6e\u4e3a \"no\" ,\u8868\u660eDHCP\u7684\u8def\u7531\u914d\u7f6e\u4e0d\u751f\u6548 ; PEERROUTES\u6307\u4ee4\u8bbe\u7f6e\u4e3a \"no\" ,\u8868\u793aDHCP\u8bbe\u7f6e\u7684\u8def\u7531\u5141\u8bb8\u88ab\u8986\u76d6. \u914d\u7f6e\u89c4\u5219:\u6bcf\u4e00\u884c\u4e00\u4e2a\u8def\u7531\u6761\u76ee, \u5148\u662f\u8981\u5230\u8fbe\u7684\u76ee\u6807, \u7136\u540e\u662fvia\u5173\u952e\u5b57,\u6700\u540e\u662f\u4e0b\u4e00\u8df3\u5730\u5740. \u8981\u6c42\u4e0b\u4e00\u8df3\u5fc5\u987b\u80fd\u5230\u8fbe,\u4e14\u4e00\u822c\u90fd\u548cethX\u540c\u7f51\u6bb5.. \u4f8b\u5982eth0\u7f51\u5361\u7684IP\u5730\u5740\u662f192.168.10.123,,\u8981\u901a\u8fc7\u7f51\u5361eth0\u51fa\u53bb\u5230\u8fbe10.0.0.10,, \u90a3\u4e48\u4e0b\u4e00\u8df3\u7684\u5730\u5740\u8981\u548ceth0\u7684\u5730\u5740\u5728\u540c\u7f51\u6bb5 ..\u5982192.168.10.222 ... \u770b\u8ba1\u7b97\u673a\u7f51\u7edc\u4e4b\u7f51\u7edc\u5c42.md \u4e2d \u7f51\u7edc\u5c42\u6574\u4e2a\u6d41\u7a0b \u8fd9\u90e8\u5206\u7684\u5185\u5bb9, \u6ce8\u610f\u56fe\u4e2d\u7684\u8def\u7531\u56681\u7684IP 192.168.100.4 \u548c\u8def\u7531\u56682\u7684IP 192.168.100.5 !! # -- \u9ed8\u8ba4\u8def\u7531 default via 192 .168.100.1 dev eth0 0 .0.0.0/0 via 192 .168.100.1 dev eth0 # -- \u7f51\u6bb5\u8def\u7531 192 .168.10.0/24 via 192 .168.100.1 dev eth0 # -- \u4e3b\u673a\u8def\u7531,\u5728centos7\u4e2d dev\u5f97\u6307\u5b9a 192 .168.100.52/32 via 192 .168.100.33 dev eth0 \u914d\u7f6e\u5b8c\u540e, \u91cd\u542fnetwork\u670d\u52a1\u5373\u53ef\u7acb\u5373\u751f\u6548... \u8def\u7531\u5b9e\u9a8c \u00b6 \u7565.. \u5b9e\u9a8c\u8be6\u89c1 https://zhuanlan.zhihu.com/p/337256553 \u8ba9\u6211\u5077\u5077\u61d2,\u4e3b\u8981\u662f\u5f00\u53d1\u771f\u5c31\u7528\u4e0d\u5230... \u8def\u7531\u7684\u914d\u7f6e\u53c8\u5f88\u7e41\u7410.. \u6709\u70b9\u7d2f, \u7406\u8bba\u65b9\u9762\u662f\u6574\u7406\u89c4\u6574\u4e86\u7684\uff01\uff01\uff01","title":"\u7f51\u7edc\u7ba1\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_1","text":"\u4ee5\u592a\u7f51\u534f\u8bae\u89c4\u5b9a\u4e0a\u7f51\u7684\u673a\u5668\u5fc5\u987b\u6709\u4e00\u5757\u7f51\u5361, \u4fd7\u6210\u4ee5\u592a\u7f51\u5361 CentOS6\u53ca\u4ee5\u524d, \u7b2c\u4e00\u5757\u3001\u7b2c\u4e8c\u5757\u7f51\u5361\u4f9d\u6b21\u547d\u540d\u4e3a eth0\u3001eth1... CentOS7\u7f51\u5361\u7684\u547d\u540d\u4e3aens33.. \u9664\u6b64\u4e4b\u5916,\u90fd\u6709\u4e00\u5757\u547d\u540d\u4e3alo\u865a\u62df\u7684\u672c\u5730\u56de\u73af\u7f51\u5361.. \u6570\u636e\u5305\u5230\u7f51\u5361\u4e86,\u6ca1\u6709\u5f80\u4ea4\u6362\u673a\u8d70,\u539f\u8def\u8fd4\u56de,\u81ea\u5df1\u53d1\u7ed9\u81ea\u5df1. 127.0.0.1 \u76f8\u5f53\u4e8e\u4e00\u53f0\u8ba1\u7b97\u673a\u5373\u5f53\u5ba2\u6237\u7aef\u4e5f\u5f53\u670d\u52a1\u7aef,\u7528\u4e8e\u4fdd\u8bc1\u8f6f\u4ef6\u672c\u8eab\u7684\u5f00\u53d1\u6ca1\u95ee\u9898, \u6392\u9664\u7f51\u7edc\u7684\u56e0\u7d20 \"\"\"-- 1.GRUB\u6dfb\u52a0kernel\u53c2\u6570 --\"\"\" vim /etc/sysconfig/grub # -- GRUB_CMDLINE_LINUX=\"rhgb quiet 'net.ifnames=0 biosdevname=0'\" \"\"\"-- 2.\u52a0\u8f7d\u5230\u5f15\u5bfc\u5206\u533a --\"\"\" grub2-mkconfig -o /boot/grub2/grub.cfg \"\"\"-- 3.\u4fee\u6539\u7f51\u5361\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u91cc\u7f51\u5361\u7684\u540d\u79f0 --\"\"\" cd /etc/sysconfig/network-scripts/ mv ifcfg-ens33 ifcfg-eth0 sed -i \"s#ens33#eth0#g\" ifcfg-eth0 # -- \u5c06ens33\u6539\u4e3aeth0 ## \u6ce8\u610f\u54e6,\u524d\u4e09\u6b65\u6ca1\u6709\u5148\u540e\u987a\u5e8f,\u600e\u4e48\u6837\u90fd\u53ef\u4ee5 \"\"\"-- \u91cd\u542f\u7cfb\u7edf\u751f\u6548 --\"\"\" reboot \u5173\u673a\u4e3avm\u865a\u62df\u673a\u6dfb\u52a0\u4e00\u5f20NAT\u6a21\u5f0f\u7684\u7f51\u5361.. \u6dfb\u52a0\u540e\u5f00\u673a \u53ef\u4ee5\u53d1\u73b0\u7b2c\u4e8c\u5757\u7f51\u5361\u7684\u9ed8\u8ba4\u540d\u5b57\u662feth1 \"\"\"-- \u4e34\u65f6\u6fc0\u6d3b\u7f51\u5361 --\"\"\" [ root@localhost ~ ] # ifconfig eth1 up [ root@localhost ~ ] # ifconfig | grep eth[01] eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 eth1: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500","title":"\u7f51\u5361\u540d\u5b57\u4fee\u6539"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_2","text":"","title":"\u7f51\u7edc\u76f8\u5173\u7684\u4e00\u4e9b\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#lspci","text":"\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u6240\u8fde\u63a5\u7684\u6240\u6709\u7f51\u5361 [ root@localhost ~ ] # lspci | grep -i eth # \u53ef\u4ee5\u770b\u5230,\u73b0\u76ee\u524d\u6709\u4e24\u5757\u4ee5\u592a\u7f51\u534f\u8bae\u7684\u7f51\u5361 02 :01.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller ( Copper ) ( rev 01 ) 02 :04.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller ( Copper ) ( rev 01 )","title":"lspci"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#mii-tool","text":"\u68c0\u6d4b\u7f51\u5361\u662f\u5426\u5df2\u7ecf\u8fde\u63a5\u597d\u7f51\u7ebf [ root@localhost ~ ] # mii-tool eth1 eth1: negotiated 1000baseT-FD flow-control, link ok # -- link ok\u4ee3\u8868\u8be5\u7f51\u5361\u662f\u63a5\u4e86\u7f51\u7ebf\u7684","title":"mii-tool"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#ping","text":"\u7528\u4e8e\u6d4b\u8bd5\u4e24\u53f0\u4e3b\u673a\u7f51\u7edc\u662f\u5426\u8fde\u901a ping \u76ee\u6807IP\u5730\u5740 ping -c \u6b21\u6570 \u76ee\u6807IP\u5730\u5740 \u539f\u7406: ping\u547d\u4ee4\u4f1a\u57fa\u4e8eICMP\u534f\u8bae(TCP/IP\u534f\u8bae\u7c07\u7684\u4e00\u4e2a\u5b50\u534f\u8bae)\u7ed9\u5bf9\u65b9\u53d1\u9001\u6570\u636e\u5305,\u82e5\u5bf9\u65b9\u56de\u5e94,\u5c31\u4ee3\u8868\u8fde\u901a\u4e86. echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all \u8bbe\u7f6e\u6b64\u547d\u4ee4\u540e,\u5176\u4ed6\u4efb\u4f55\u4e3b\u673a\u90fdping\u4e0d\u540c\u672c\u673a.. \u901a\u5e38\u4f1a\u5728\u6574\u4e2a\u96c6\u7fa4\u67b6\u6784\u7684\u7f51\u7edc\u73af\u5883\u90e8\u7f72\u5b8c\u6210\u540e\u8fdb\u884c\u8be5\u8bbe\u7f6e..","title":"ping"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#ifconfig","text":"","title":"ifconfig"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_3","text":"ifconfig -- \u67e5\u770b\u5df2\u7ecf\u6fc0\u6d3b\u7684\u7f51\u5361\u4fe1\u606f ifconfig -a -- \u67e5\u770b\u6240\u6709\u7f51\u5361\u4fe1\u606f(\u5305\u62ec\u672a\u6fc0\u6d3b\u7684\u7f51\u5361) ifconfig eth0 -- \u67e5\u770b\u5355\u4e2a\u7f51\u5361\u4fe1\u606f ifconfig eth1 up -- \u4e34\u65f6 \u5f00\u542f\u7f51\u5361 ifconfig eth1 down -- \u5173\u95ed\u7f51\u5361 \u5b9e\u9a8c\u65f6,\u522b\u5173\u95edeth0\u7f51\u5361,xshll\u8fdc\u7a0b\u8fde\u63a5\u662f\u901a\u8fc7\u8be5\u7f51\u5361\u8fde\u63a5\u7684.. ifconfig eth1 192.168.1.122 netmask 255.255.255.0 or ifconfig eth1 192.168.1.122/24 -- \u4e34\u65f6 \u4e3a\u7f51\u5361\u8bbe\u5b9aIP\u548c\u63a9\u7801 (\u91cd\u542f\u670d\u52a1\u5668\u5931\u6548) ifconfig eth0:1 192.168.0.2 netmask 255.255.255.0 -- \u4e34\u65f6 \u4e3a\u7f51\u5361\u914d\u7f6e\u5b50\u63a5\u53e3 ifconfig eth0:1 down or ifconfig eth0:1 del 192.168.0.2 -- \u5220\u9664\u8be5\u5b50\u63a5\u53e3 \u4e0d\u5fc5\u6307\u5b9a\u5b50\u7f51\u63a9\u7801 \u6ce8\u610f\u54e6! \u901a\u8fc7ifconfig\u547d\u4ee4\u7684\u914d\u7f6e\u90fd\u662f \u4e34\u65f6 \u914d\u7684!! \u91cd\u542f\u673a\u5668\u540e\u5c31\u6062\u590d\u5982\u521d\u4e86.. \u82e5\u60f3\u6c38\u4e45\u914d\u7f6e,\u9700\u8981\u4fee\u6539 /etc/sysconfig/network-scripts \u8def\u5f84\u4e0b\u9762\u7684\u914d\u7f6e\u6587\u4ef6 ## -- \u82e5\u8981\u4f7f\u7528ifconfig\u547d\u4ee4,\u9700\u8981\u5b89\u88c5 yum install net-tools -y [ root@localhost ~ ] # rpm -qf `which ifconfig` net-tools-2.0-0.25.20131004git.el7.x86_64 \"\"\" eth0:1 \u6b64\u7f51\u5361\u662f\u4e0d\u5b58\u5728\u7684,\u662f\u6ca1\u6709mac\u5730\u5740\u7684,\u53ef\u53eb\u505a\u865a\u62df\u7f51\u5361 \u76f8\u5f53\u4e8e\u7ed9eth0\u914d\u4e86\u4e24\u4e2aIP\u5730\u5740.. \u4f46\u6d41\u91cf\u8d70\u7684\u90fd\u662f\u540c\u4e00\u5f20\u7f51\u5361 \u771f\u5b9e\u73af\u5883\u4e0b,\u82e5\u8981\u7ed9\u670d\u52a1\u5668\u914d\u7f6e\u4e24\u4e2aIP\u5730\u5740,\u4f1a\u4f7f\u7528\u4e24\u4e2a\u7f51\u5361,\u4e24\u4e2a\u7f51\u5361\u5904\u4e8e\u4e0d\u540c\u7684\u7f51\u6bb5\u5e76\u8fde\u63a5\u4e0d\u540c\u7684\u4ea4\u6362\u673a..\u8fd9\u6837\u9760\u8c31\u4e9b. \"\"\" [ root@localhost ~ ] # ifconfig eth0:1 192.168.0.2/24 [ root@localhost ~ ] # ifconfig eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 ... ... ... eth0:1: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 192 .168.0.2 netmask 255 .255.255.0 broadcast 192 .168.0.255 ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) ... ... ...","title":"\u57fa\u672c\u9009\u9879"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_4","text":"ifconfig eth0 \"\"\" \u7b2c\u4e00\u884c \u4eceflags\u6807\u8bb0\u53ef\u77e5\u8be5\u63a5\u53e3\u5df2\u542f\u7528,\u652f\u6301\u5e7f\u64ad\u3001\u7ec4\u64ad. MTU\u6700\u5927\u4f20\u8f93\u5355\u5143:1500\u5b57\u8282 flags\u53c2\u6570: UP:\u8868\u793a\u201c\u63a5\u53e3\u5df2\u542f\u7528\u201d/\u7f51\u5361\u5df2\u7ecf\u6fc0\u6d3b BROADCAST:\u8868\u793a\u8be5\u7f51\u5361\u652f\u6301\u5e7f\u64ad,\u80fd\u6536\u5230\u5e7f\u64ad\u5305 RUNNING:\u8868\u793a\u7f51\u5361\u5df2\u8fde\u63a5\u7f51\u7ebf,\u8be5\u7f51\u7ebf\u80fd\u6b63\u5e38\u5de5\u4f5c MULTICAST:\u8868\u793a\u8be5\u7f51\u5361\u652f\u6301\u591a\u64ad.. \u591a\u64ad/\u7ec4\u64ad\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5c06\u591a\u53f0\u673a\u5668\u653e\u5230\u4e00\u4e2a\u7ec4\u91cc,\u53d1\u5305\u7684\u65f6\u5019,\u53ea\u6709\u8fd9\u4e2a\u7ec4\u91cc\u7684\u673a\u5668\u80fd\u6536\u5230 promisc:\u7e41\u6742\u6a21\u5f0f,\u7b80\u5355\u6765\u8bf4,\u8fd9\u53f0\u673a\u5668\u6240\u6709\u6570\u636e\u5305\u90fd\u53ef\u4ee5\u6536\u5230 \u6211\u4eec\u77e5\u9053\u5c40\u57df\u7f51\u91cc\u5e7f\u64ad\u7684\u6570\u636e\u5305,\u8ba1\u7b97\u673a\u6536\u5230\u540e\u53d1\u73b0\u76ee\u6807\u4e3b\u673a\u4e0d\u662f\u81ea\u5df1,\u4f1a\u5c06\u8fd9\u4e2a\u5305\u4e22\u6389 \u82e5\u8be5\u8ba1\u7b97\u673a\u5f00\u542f\u4e86\u7e41\u6742\u6a21\u5f0f,\u5c31\u4e0d\u4f1a\u5c06\u6b64\u5e7f\u64ad\u5305\u4e22\u6389.\u6293\u5305. \u7e41\u6742\u6a21\u5f0f\u901a\u5e38\u7528\u4e8ekali\u7b49\u6e17\u900f\u6d4b\u8bd5,\u5b89\u5168\u65b9\u9762\u7684\u914d\u7f6e.. \u611f\u5174\u8da3\u53ef\u4ee5\u53c2\u8003:https://www.cnblogs.com/linhaifeng/articles/13949611.html `ifconfig eth0 promisc` # -- \u5f00\u542f\u7e41\u6742\u6a21\u5f0f `ifconfig eth0 -promisc` # -- \u5173\u95ed\u7e41\u6742\u6a21\u5f0f \"\"\" eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 # -- \u7f51\u5361\u7684IPv4\u5730\u5740\u3001\u5b50\u7f51\u63a9\u7801\u3001\u672c\u7f51\u6bb5\u7684\u5e7f\u64ad\u5730\u5740 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 # -- IPv6\u5730\u5740\u3001\u63a9\u7801\u957f\u5ea6\u3001\u4f5c\u7528\u57df,link\u8868\u793a\u4ec5\u8be5\u63a5\u53e3\u6709\u6548 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> # -- \u4ee5\u592a\u7f51\u5361\u7684MAC\u5730\u5740\u3001\u4ee5\u592a\u7f51\u5361\u6700\u5927\u4f20\u8f93\u961f\u5217\u957f\u5ea6,\u63a5\u53e3\u7c7b\u578b\u4e3aEthernet ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) \"\"\" R\u63a5\u6536 T\u53d1\u9001\"\"\" # -- \u4ece\u8be5\u4e3b\u673a\u5f00\u673a\u90a3\u4e00\u523b\u5230\u73b0\u5728,\u6b64\u63a5\u53e3/\u7f51\u5361\u7d2f\u79ef\u63a5\u6536\u7684\u62a5\u6587\u4e2a\u6570,\u8fd9\u4e9b\u5305\u603b\u5171\u6709\u591a\u5927 RX packets 3942 bytes 764610 ( 746 .6 KiB ) # -- \u7d2f\u79ef\u63a5\u6536\u62a5\u6587\u9519\u8bef\u6570\u3001\u4e22\u5f03\u6570\u3001\u6ea2\u51fa\u6570(\u5f88\u91cd\u8981!!!)\u3001\u51b2\u7a81\u7684\u5e27\u6570 RX errors 0 dropped 0 overruns 0 frame 0 # -- \u4ece\u8be5\u4e3b\u673a\u5f00\u673a\u90a3\u4e00\u523b\u5230\u73b0\u5728,\u6b64\u63a5\u53e3/\u7f51\u5361\u7d2f\u79ef\u53d1\u9001\u7684\u62a5\u6587\u4e2a\u6570,\u603b\u5b57\u8282\u6570 TX packets 842 bytes 130860 ( 127 .7 KiB ) # -- \u7d2f\u79ef\u53d1\u9001\u62a5\u6587\u9519\u8bef\u6570\u3001\u4e22\u5f03\u6570\u3001\u6ea2\u51fa\u6570\u3001\u8f7d\u8377\u6570(\u53d1\u751fcarrier\u9519\u8bef\u800c\u4e22\u5931\u7684\u6570\u636e\u5305\u6570)\u3001\u51b2\u7a81\u6570 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0","title":"\u547d\u4ee4\u7ed3\u679c\u89e3\u6790"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#mtu","text":"\u5343\u5146 1000Mb/s \u7ba1\u7406\u7f51\u7edc-- MTU: 1500 \u4e07\u5146 10000Mb/s \u96c6\u7fa4\u5316\u4f5c\u4e1a -- MTU: 9000","title":"\u4e07\u5146\u7f51\u5361\u7684MTU"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_5","text":"\u73b0\u76ee\u524d\u6211\u4eec\u7528\u7684\u7f51\u5361\u662f\u53cc\u7ede\u7ebf\u63a5\u4e2a\u6c34\u6676\u5934\u8fde\u63a5\u7684 \u5343\u5146\u7f51\u5361 , \u4e3b\u8981\u7528\u4e8e\u7ba1\u7406\u7f51\u7edc ; \u4fdd\u6301MTU\u9ed8\u8ba4\u503c1500kb\u5c31\u884c.. \u82e5\u6d89\u53ca\u5230\u96c6\u7fa4\u5316\u4f5c\u4e1a, \u6bd4\u5982\u7528\u96c6\u7fa4\u505a\u5b58\u50a8.. \u901a\u5e38\u5c31\u9700\u8981\u7528\u5230 \u4e07\u5146\u7f51\u5361 .. MTU\u503c\u5e94\u8be5\u8bbe\u7f6e\u4e3a9000kb.. \u4e07\u5146(10G)\u7f51\u5361\u9700\u8981\u642d\u914d\u5149\u7ea4\u6a21\u5757\u3001\u5149\u7ea4\u3001\u4e07\u5146\u4ea4\u6362\u673a(\u51e0\u5341\u4e07RMB,\u5f88\u8d35)\u4f7f\u7528 Hhhh \u50cf\u963f\u91cc\u4e91\u63d0\u4f9b\u7ed9\u4e2d\u5c0f\u578b\u516c\u53f8\u7684\u865a\u673a\u5c31\u662f\u6784\u5efa\u5728\u4e00\u5957\u96c6\u7fa4\u4e4b\u4e0a, vm\u4e4b\u95f4\u7684\u901a\u4fe1\u672c\u6765\u5c31\u6bd4\u7269\u7406\u4e3b\u673a\u6162, \u4e3a\u4e86\u5c3d\u53ef\u80fd\u51cf\u5c11\u7f51\u7edcIO, \u63d0\u9ad8\u7f51\u7edc\u4f20\u8f93\u6548\u7387, \u963f\u91cc\u4e91\u5728\u786c\u4ef6\u65b9\u9762\u7528\u7684\u5c31\u662f\u4e07\u5146\u7f51\u5361.... \u5c0f\u58f0bibi,\u82e5\u662f\u7528\u771f\u673a\u505a\u96c6\u7fa4\u5316\u67b6\u6784,\u9700\u8981\u8fdb\u884c\u7f51\u5361\u7ed1\u5b9a, \u6d89\u53ca\u5230team\u6280\u672f\u3001lacp\u534f\u8bae\u7b49.. (\u96c6\u7fa4\u76f8\u5173\u7684\u90fd\u662f\u9ad8\u9636\u77e5\u8bc6,\u6211\u6682\u4e14\u53ea\u4f1a\u5b66\u57fa\u7840,\u7b49\u6211\u4ee5\u540e\u5f00\u53d1\u8f6c\u8fd0\u7ef4,\u518d\u6363\u817e\u6363\u817e, \u54c8\u54c8\u54c8\u54c8\u54c8)","title":"\u5343\u5146\u4e07\u5146\u533a\u522b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_6","text":"ifconfig eth0 mtu 9000 \u4e34\u65f6\u914d\u7f6eMTU\u503c,\u91cd\u542f\u670d\u52a1\u5668\u5c31\u5931\u6548\u4e86.. \u90a3\u5982\u4f55\u6c38\u4e45\u914d\u7f6e\u5462\uff1f \u89e3\u51b3\u65b9\u6848 : \u5728 /etc/rc.local \u6587\u4ef6\u91cc\u6dfb\u52a0 \u4fee\u6539MTU\u503c\u7684\u547d\u4ee4... \u539f\u7406: /etc/rc.local\u6587\u4ef6\u5728\u8ba1\u7b97\u673a\u5f00\u673a\u7684\u65f6\u5019,\u5b83\u4f1a\u81ea\u52a8\u8fd0\u884c, \u6240\u4ee5\u4e00\u5f00\u673a\u5c31\u9700\u8981\u8fd0\u884c\u7684\u547d\u4ee4\u90fd\u53ef\u5199\u5230\u6b64\u6587\u4ef6\u91cc \u6ce8\u610f: \u8bb0\u5f97\u6267\u884c\u547d\u4ee4 chmod +x /etc/rc.d/rc.local ## -- \u53ef\u4ee5\u770b\u5230/etc/rc.local\u7684\u6587\u4ef6\u7c7b\u578b\u662fl \u4ee3\u8868\u8f6f\u94fe\u63a5 ## -- \u6e90\u6587\u4ef6\u662f /etc/rc.d/rc.local [ root@localhost ~ ] # ll /etc/rc.local lrwxrwxrwx. 1 root root 13 6\u6708 30 23 :42 /etc/rc.local -> rc.d/rc.local ## -- /etc/rc.d/rc.local\u6587\u4ef6\u662f\u6ca1\u6709\u53ef\u6267\u884c\u6743\u9650\u7684 \u610f\u5473\u7740\u9664\u4e86root\u7528\u6237\u7684\u5176\u4ed6\u7528\u6237\u90fd\u4e0d\u80fd\u6267\u884c\u5b83 ## -- \u6240\u4ee5\u9700\u8981\u8d4b\u4e88\u5176\u4ed6\u7528\u6237\u5bf9\u6b64\u6587\u4ef6\u7684\u53ef\u6267\u884c\u6743\u9650 chmod +x /etc/rc.d/rc.local [ root@localhost ~ ] # ll /etc/rc.d/rc.local -rw-r--r--. 1 root root 473 1\u6708 14 2022 /etc/rc.d/rc.local [ root@localhost ~ ] # chmod +x /etc/rc.d/rc.local ## \u5728\u91cc\u9762\u6dfb\u52a0\u5185\u5bb9,ifconfig eth0 mtu 9000 [ root@localhost ~ ] # vim /etc/rc.local","title":"\u6c38\u4e45\u914d\u7f6e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_7","text":"ifconfig\u7ed3\u679c\u4e2d\u7b2c6\u884c\u7684 overruns \u6ea2\u51fa\u6570\u662f\u975e\u5e38\u91cd\u8981\u7684\u6307\u6807!!! ethtool -g eth0 ethtool -G eth0 rx 2048 ethtool -G eth0 tx 2048","title":"\u89e3\u51b3\u6ea2\u51fa\u6570\u4e25\u91cd\u7684\u95ee\u9898"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_8","text":"1 > \u5168\uff5c\u534a\u53cc\u5de5\u901a\u4fe1 \u5168\u53cc\u5de5\u662f\u6307\u4ea4\u6362\u673a\u5728\u53d1\u9001\u6570\u636e\u7684\u540c\u65f6\u4e5f\u80fd\u591f\u63a5\u6536\u6570\u636e,\u4e24\u8005\u540c\u6b65\u8fdb\u884c, \u8fd9\u597d\u6bd4\u6211\u4eec\u5e73\u65f6\u6253\u7535\u8bdd\u4e00\u6837,\u8bf4\u8bdd\u7684\u540c\u65f6\u4e5f\u80fd\u591f\u542c\u5230\u5bf9\u65b9\u7684\u58f0\u97f3... \u534a\u53cc\u5de5\u597d\u6bd4\u662f\u5bf9\u8bb2\u673a... \u76ee\u524d\u7f51\u5361\u4e00\u822c\u90fd\u5e94\u8be5\u91c7\u7528\u5168\u53cc\u5de5\u6a21\u5f0f,\u5168\u53cc\u5de5\u7684\u597d\u5904\u5728\u4e8e\u8fdf\u5ef6\u5c0f\u3001\u51b2\u7a81\u5c11\u3001\u901f\u5ea6\u5feb. 2 > \u6570\u636e\u94fe\u8def\u5c42\u4e09\u5927\u529f\u80fd\u4e4b\u4e00\u5dee\u9519\u76d1\u6d4b: \u5faa\u73af\u5197\u4f59\u68c0\u9a8c\u7801CRC \u6b65\u9aa4\u5173\u952e\u5b57: \u591a\u9879\u5f0f \u5f02\u6216\u64cd\u4f5c ( \u5f02\u4e3a1 \u540c\u4e3a0 ) \u5047\u8bbe\u6709\u6570\u636e1101011011\u9700\u8981\u4f20\u8f93, \u91c7\u7528CRC\u7684\u751f\u6210\u591a\u9879\u5f0f\u4e3aP ( X )= X^4+X+1, \u8bf7\u8ba1\u7b97\u6dfb\u52a0\u4e86CRC\u6821\u9a8c\u7801\u4e4b\u540e\u7684\u6570\u636e. \u89e3: \u591a\u9879\u5f0f\u4f4d\u4e32\u4e3a --> 10011 , \u6a21\u4e8c\u9664\u6cd5\u5f97\u5230\u4f59\u65701110, \u6240\u4ee5\u5f97\u5230\u7ed3\u679c11010110111110 3 > \u7f51\u5361\u5de5\u4f5c\u539f\u7406: \u5148\u4eceOSI\u4e03\u5c42\u534f\u8bae\u89c6\u89d2,\u56de\u987e\u4e0b\u53d1\u5305: \u5e94\u7528\u5c42\u4ea7\u751f\u4e00\u4e2a\u6570\u636e,\u4f9d\u6b21\u5f80\u4e0b\u53d1,\u5305\u88c5TCP/UDP\u7684\u5934 -- \u6570\u636e\u6bb5 ; \u5305\u88c5\u7f51\u7edcIP\u7684\u5934 -- \u6570\u636e\u62a5 ; \u5305\u88c5\u4ee5\u592a\u7f51\u7684\u5934 -- \u6570\u636e\u5e27frame ; \u63a5\u7740\u8f6c\u6210\u4e8c\u8fdb\u5236\u4f4d\u901a\u8fc7\u7f51\u7ebf\u4f20\u8f93\u7ed9\u5bf9\u65b9. \u7f51\u5361\u53d1\u5305: 1 . ip\u6570\u636e\u62a5+14\u4e2a\u5b57\u8282\u7684mac\u5934/\u4ee5\u592a\u7f51\u5934\u53d8\u6210\u6570\u636e\u5e27frame 2 . frame\u88ab\u62f7\u8d1d\u5230\u7f51\u5361\u82af\u7247\u5185\u90e8\u7684\u7f13\u51b2\u533a,\u7531\u7f51\u5361\u5904\u7406 3 . \u7f51\u5361\u82af\u7247\u4e3aframe\u6dfb\u52a0\u5934\u90e8\u540c\u6b65\u4fe1\u606f\u548cCRC\u6821\u9a8c ( \u6b64\u65f6\u624d\u662f\u771f\u6b63\u53ef\u4ee5\u53d1\u9001\u7684\u5305 ) ,\u7136\u540e\u53d1\u9001\u8be5\u5305 \u7f51\u5361\u6536\u5305: 1 . \u7f51\u7edc\u5305\u5230\u8fbe\u7f51\u5361,\u7f51\u5361\u5148\u68c0\u67e5\u6570\u636e\u5305\u7684CRC\u6821\u9a8c,\u4fdd\u8bc1\u5176\u5b8c\u6574\u6027\u548c\u6b63\u786e\u6027, \u82e5\u4e0d\u5b8c\u6574\u4f1a\u4e22\u5f03 ( \u4e22\u5f03\u4e0d\u53ef\u6015,TCP\u534f\u8bae\u4f1a\u91cd\u65b0\u53d1\u5305\u7684 ) ; \u82e5\u5b8c\u6574\u4f1a\u53bb\u6389\u5b83\u7684\u5934\u5f97\u5230frame 2 . \u7f51\u5361\u5c06frame\u62f7\u8d1d\u5230\u7f51\u5361\u5185\u90e8\u7684FIFO ( frist in frist out\u5148\u8fdb\u5148\u51fa ) \u7f13\u51b2\u533a 3 . \u7f51\u5361\u9a71\u52a8\u7a0b\u5e8f\u4f1a\u4ea7\u751f\u786c\u4ef6\u4e2d\u65ad,\u63d0\u9192OS\u5e72\u6d3b,OS\u4ea7\u751f\u8f6f\u4ef6\u4e2d\u65ad,\u5c06frame\u4ece\u7f51\u5361\u62f7\u8d1d\u5230\u5185\u5b58\u4e2d \u7136\u540e\u4e00\u5c42\u5c42\u7684\u62c6\u5305","title":"\u50a8\u5907\u77e5\u8bc6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_9","text":"\u6b63\u5e38\u60c5\u51b5, \u7f51\u5361\u4e00\u8fb9\u63a5\u6536\u6570\u636e\u5305\u653e\u5230\u7f51\u5361\u7f13\u51b2\u533a\u4e2d,OS\u4e00\u8fb9\u4ece\u4e2d\u53d6\u51fa\u6570\u636e\u5305\u5230\u5185\u5b58\u4e2d, \u7f51\u5361\u7f13\u51b2\u533a\u4e0d\u4f1a\u6709\u6ea2\u51fa. \u82e5\u9047\u5230\u9ad8\u5e76\u53d1\u7684\u60c5\u51b5,\u6d41\u91cf\u6fc0\u589e,\u7f51\u5361\u7f13\u51b2\u533a\u6ee1\u4e86,\u5f80\u7f51\u5361\u7f13\u51b2\u533a\u91cc\u6324\u7684\u7f51\u7edc\u5305\u901f\u5ea6\u8fdc\u5927\u4e8eOS\u53d6\u7684\u901f\u5ea6... \u65b0\u7684\u7f51\u7edc\u5305\u8fdb\u4e0d\u4e86\u7f13\u51b2\u533a,\u5c31\u4f1a\u51fa\u73b0\u6ea2\u51fa.. overruns\u503c\u5347\u9ad8.. \u8fd9\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u5c31\u8bbf\u95ee\u4e0d\u8fdb\u6765\u4e86,\u7528\u6237\u7b49\u5f85\u65f6\u95f4\u8f83\u957f,\u4f53\u9a8c\u5f88\u5dee!! \u6392\u9664\u7f51\u7edc\u7684\u5e72\u6270 \"\"\" step1:\u67e5\u770b\u662f\u5426\u8fde\u63a5\u7f51\u7ebf \"\"\" [ root@localhost ~ ] # mii-tool eth0 eth0: negotiated 1000baseT-FD flow-control, link ok \"\"\" step2:\u67e5\u770b\u5de5\u4f5c\u6a21\u5f0f\u662f\u5426\u6b63\u5e38 \"\"\" [ root@localhost ~ ] # ethtool eth0 | egrep 'Speed|Duplex' Speed: 1000Mb/s ## -- \u5343\u5146\u7f51\u5361 Duplex: Full ## -- Full \u4ee3\u8868\u5168\u53cc\u5de5 half\u7684\u8bdd\u4ee3\u8868\u534a\u53cc\u5de5 \"\"\" step3:\u67e5\u770b\u7f51\u5361\u4e0eMTU\u662f\u5426\u5339\u914d \"\"\" [ root@localhost ~ ] # ifconfig eth0 | grep mtu eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 \"\"\" step4:\u67e5\u770bCRC\u6821\u9a8c\u662f\u5426\u6b63\u5e38 \"\"\" [ root@localhost ~ ] # ethtool -S eth0 | grep crc rx_crc_errors: 0 ## -- crc\u9519\u8bef\u503c\u5927\u901a\u5e38\u662f\u56e0\u4e3a\u670d\u52a1\u5668\u5916\u90e8\u7684\u7f51\u7edc\u73af\u5883\u6709\u95ee\u9898\u5bfc\u81f4\u7684 Speed\u3001Duplex\u3001CRC\u4e4b\u7c7b\u7684\u90fd\u6ca1\u95ee\u9898,\u57fa\u672c\u53ef\u4ee5\u6392\u9664\u7269\u7406\u5c42\u9762\u7684\u5e72\u6270 \u7f51\u7edc\u6ca1\u95ee\u9898, \u90a3\u4e48\u95ee\u9898\u5c31\u51fa\u73b0\u5728\u670d\u52a1\u5668\u4e0a\u4e86 \u3010\u76d1\u6d4boverruns\u503c\u3011 while true ; do ifconfig eth0 | grep RX | grep overruns ; sleep 0 .5 ; clear ; done \u76d1\u6d4b\u7684\u65f6\u5019,\u67d0\u4e00\u65f6\u523b,overruns\u8fbe\u5230\u4e86\u4e0a\u767e,\u53c8\u964d\u4e86\u4e0b\u6765 ( TCP\u91cd\u65b0\u53d1\u5305\u4e86 ) ,\u4e0d\u7528\u8fc7\u4e8e\u62c5\u5fc3 \u82e5\u503c\u4e00\u76f4\u4e00\u76f4\u5728\u589e\u957f,\u610f\u5473\u7740\u5728\u4e00\u76f4\u7d2f\u79ef\u6ea2\u51fa\u7684\u5305,\u7528\u6237\u4e00\u76f4\u8bbf\u95ee\u4e0d\u8fdb\u6765,\u4f53\u9a8c\u6781\u5dee.. \u89e3\u51b3\u65b9\u6848: \u4f4e\u914d\u7248 -- \u5355\u53f0\u670d\u52a1\u5668,\u8c03\u5927\u7f13\u51b2\u533a.. \u7f13\u51b2\u533a\u6700\u9ad84096,\u4e0d\u591f\u4e86\u548b\u6574\uff1f\u4e00\u4e2a\u7f51\u5361\u7684\u6027\u80fd\u6709\u6781\u9650\u7684,\u7528\u591a\u4e2a\u7f51\u5361 -- \u5782\u76f4\u6269\u5c55 \u9ad8\u914d\u7248 --\u52a0\u673a\u5b50,\u96c6\u7fa4\u5316\u4f5c\u4e1a,\u591a\u53f0\u673a\u5668\u6297\u538b\u529b,\u6d41\u91cf\u5c31\u88ab\u5206\u6563\u4e86. -- \u6c34\u5e73\u6269\u5c55!!! So!\u5f00\u53d1\u4e0d\u80fd\u9119\u89c6\u8fd0\u7ef4,\u5f00\u53d1\u7684\u8f6f\u4ef6\u518d\u597d,\u6700\u591a\u652f\u6301\u51e0\u5343\u5e76\u53d1,\u4f46\u8fd0\u7ef4\u96c6\u7fa4\u5316\u4f5c\u4e1a\u80fd\u628a\u8f6f\u4ef6\u7684\u5e76\u53d1\u6027\u80fd\u653e\u5927\u51e0\u5341\u4e0a\u767e\u500d.. [ root@localhost ~ ] # ethtool -g eth0 # -- \u67e5\u770b Ring parameters for eth0: Pre-set maximums: RX: 4096 # -- \u63a5\u6536\u7684\u7f13\u51b2\u533a\u5927\u5c0f RX Mini: 0 RX Jumbo: 0 TX: 4096 # -- \u4f20\u8f93\u7684\u7f13\u51b2\u533a\u5927\u5c0f Current hardware settings: # -- \u5f53\u524d\u786c\u4ef6\u7684\u8bbe\u7f6e RX: 256 RX Mini: 0 RX Jumbo: 0 TX: 256 ethtool -G eth0 rx 2048 # \u8bbe\u7f6e\u8c03\u5927 ethtool -G eth0 tx 2048 # \u8bbe\u7f6e\u8c03\u5927 Ps:\u8fd8\u53ef\u4ee5\u60f3\u7740\u5c06\u7f51\u5361\u964d\u901f..\u8fd9\u60f3\u6cd5\u633a\u5947\u602a\u7684Hhhh","title":"\u89e3\u51b3\u8fc7\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_10","text":"","title":"\u7f51\u5361\u76f8\u5173\u914d\u7f6e\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#ifcfg-eth0","text":"vim /etc/sysconfig/network-scripts/ifcfg-eth0 systemctl restart network \u91cd\u542f\u7f51\u7edc\u670d\u52a1\u4f1a\u53bb\u52a0\u8f7d\u8fd9\u4e9b\u914d\u7f6e\u6587\u4ef6 \u25b2 \u5fc5\u8981\u5b57\u6bb5 \"\"\" BOOTPROTO\u82e5\u8bbe\u7f6e\u4e3adchp,\u8868\u660e\u52a8\u6001\u83b7\u53d6IP\u5730\u5740,\u5728\u79df\u7ea6\u65f6\u95f4\u5185IP\u5730\u5740\u4e0d\u4f1a\u53d8..\u5230\u671f\u4e86\u540e\u91cd\u65b0\u5206\u914dIP.. IPADDR\u3001NETMASK\u3001GATEWAY\u3001DNS1\u3001DNS2\u8fd9\u51e0\u4e2a\u5b57\u6bb5\u53ea\u6709\u5728BOOTPROTO\u7684\u503c\u4e3astatic\u6216none\u65f6\u624d\u4f1a\u751f\u6548.. IPADDR\u3001NETMASK\u4fdd\u8bc1\u4e86\u5c40\u57df\u7f51\u91cc\u7684\u901a\u4fe1,GATEWAY\u3001DNS1\u3001DNS2\u4fdd\u8bc1\u4e86\u4e0e\u5916\u7f51\u7684\u901a\u4fe1. IPADDR\u7684\u914d\u7f6e\u8981\u6ce8\u610f,vm\u7f51\u5361\u82e5\u7528\u7684\u6865\u63a5\u6a21\u5f0f\u8981\u9632\u6b62\u5360\u7528\u5176\u4ed6\u8bbe\u5907\u7684IP,\u82e5\u7528\u7684NAT\u6a21\u5f0f\u6ca1\u5173\u7cfb. DNS\u7684\u5730\u5740\u6700\u591a\u914d\u7f6e3\u4e2a,\u914d\u7f6e\u540e\u4f1a\u5199\u5165/etc/resolv.conf\u6587\u4ef6\u4e2d GATEWAY\u7684\u503c\u53ef\u4ee5\u901a\u8fc7`route -n`\u547d\u4ee4\u67e5\u770b\u8def\u7531\u5668\u4e0a\u914d\u7f6e\u7684\u7f51\u5173\u5730\u5740; \u4f01\u4e1a\u91cc\u901a\u5e38\u662f\u96c6\u7fa4\u5316\u4f5c\u4e1a,so,BOOTPROTO\u7684\u503c\u90fd\u4f1a\u662fstatic!!!!!! Ps:\u53ef\u4ee5\u5148DHCP\u52a8\u6001\u83b7\u53d6IP,\u7136\u540e\u5728\u9759\u6001\u914d\u7f6e\u65f6,\u53bb\u67e5\u770b/etc/resolv.conf\u6587\u4ef6\u91cc\u9762\u5df2\u8bbe\u7f6e\u7684DNS(nameserver\u5b57\u6bb5\u7684\u503c) \u901a\u5e38\u662f8.8.8.8 \u548c \u7f51\u5173\u7684\u5730\u5740 NM_CONTROLLED\u53ef\u4ee5\u4e0d\u6dfb\u52a0,\u524d\u63d0\u662f\u6267\u884c\u547d\u4ee4 systemctl stop NetworkManger systemctl disable NetworkManger \"\"\" TYPE = \"Ethernet\" ## -- Ethernet\u7c7b\u578b\u8868\u660e\u662f\u4ee5\u592a\u7f51\u5361\uff01 BOOTPROTO = \"static\" ## -- none \u6216\u8005 static \u90fd\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u9759\u6001IP IPADDR = 192 .168.0.100 ## -- IP\u5730\u5740 NETMASK = 255 .255.255.0 ## -- IP\u63a9\u7801\u5730\u5740 GATEWAY = 192 .168.0.254 ## -- \u7f51\u5173\u5730\u5740 DNS1 = 192 .168.0.254 ## -- \u7b2c\u4e00\u4e2aDNS\u5730\u5740 DNS2 = 8 .8.8.8 ## -- \u7b2c\u4e8c\u4e2aDNS\u5730\u5740 NAME = \"eth0\" ## -- \u540d\u5b57 DEVICE = \"eth0\" ## -- \u8bbe\u5907\u540d ONBOOT = \"yes\" ## -- \u4ee3\u8868\u7f51\u5361\u662f\u5426\u8ddf\u7740NETWORK\u7f51\u7edc\u670d\u52a1\u7684\u542f\u52a8\u800c\u6fc0\u6d3b NM_CONTROLLED = \"no\" ## -- \u8868\u660e\u7f51\u5361\u4e0d\u53d7NetworkManager\u670d\u52a1\u7684\u5f71\u54cd \u25b2 \u5176\u4ed6\u4e0d\u5fc5\u8981\u5b57\u6bb5 ## -- \u914d\u7f6e\u7f51\u5361\u8def\u7531\u6587\u4ef6\u7684\u65f6\u5019\u9700\u8981\u8fdb\u884c\u6b64\u5b57\u6bb5\u7684\u8bbe\u7f6e \u8868\u793aDHCP\u7684\u8def\u7531\u914d\u7f6e\u4e0d\u751f\u6548!! DEFROUTE = \"no\" ## -- \u914d\u7f6e\u7f51\u5361\u8def\u7531\u6587\u4ef6\u7684\u65f6\u5019\u9700\u8981\u8fdb\u884c\u6b64\u5b57\u6bb5\u7684\u8bbe\u7f6e \u503c\u4e3ano\u8868\u793aDHCP\u8bbe\u7f6e\u7684\u8def\u7531\u5141\u8bb8\u88ab\u8986\u76d6!! PEERROUTES = \"no\" ## -- \u7f51\u5361\u7684MAC\u5730\u5740\u4fe1\u606f,centos7\u91cc\u6ca1\u6709,centos6\u91cc\u6709 HWADDR = 14 :da:e9:eb:a9:61 ## -- \u662f\u5426\u5141\u8bb8\u666e\u901a\u7528\u6237\u542f\u52a8\u6216\u8005\u505c\u6b62\u8be5\u7f51\u5361 USERCTL = no ## -- \u662f\u5426\u5728\u8be5\u7f51\u5361\u4e0a\u542f\u52a8IPV6\u7684\u529f\u80fd IPV6INIT = no \u3000\u3000\u3000\u3000\u3000\u3000\u3000 ## --\u662f\u5426\u5141\u8bb8\u7f51\u5361\u5728\u542f\u52a8\u65f6\u5411DHCP\u670d\u52a1\u5668\u67e5\u8be2DNS\u4fe1\u606f,\u8be5\u5b57\u6bb5\u4e86\u89e3\u5373\u53ef # \u8bbe\u7f6e\u4e3ayes\u65f6,\u6b64\u6587\u4ef6\u8bbe\u7f6e\u7684DNS\u5c06\u8986\u76d6/etc/resolv.conf # BOOTPROTO\u82e5\u8bbe\u7f6e\u4e3adchp(\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684DNS1\u662f\u4e0d\u751f\u6548\u7684),\u5219\u9ed8\u8ba4\u4e3ayes,dhcp\u7684dns\u4f1a\u8986\u76d6/etc/resolv.conf PEERDNS = yes \u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 ## -- \u82e5\u51b2\u7a81,\u53ef\u4ee5\u76f4\u63a5\u5220\u9664 UUID = \"3919d7da-ef03-40a0-814e-d78c047e1f87\"","title":"\u89e3\u6790 ifcfg-eth0\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#ifcfg-eth1","text":"# -- \u53ef\u4ee5\u53d1\u73b0\u53ea\u6709\u7f51\u5361eth0\u7684\u914d\u7f6e\u6587\u4ef6,\u867d\u7136\u65b0\u589e\u4e86eth1\u7f51\u5361,\u4f46\u7cfb\u7edf\u5e76\u6ca1\u6709\u81ea\u52a8\u4e3a\u5b83\u751f\u6210\u914d\u7f6e\u6587\u4ef6,\u6240\u4ee5eth1\u662f\u4e34\u65f6\u7684 [ root@localhost ~ ] # ls /etc/sysconfig/network-scripts | grep ifcfg-eth ifcfg-eth0 cd /etc/sysconfig/network-scripts/ cp ifcfg-eth0 ifcfg-eth1 vim ifcfg-eth1 \"\"\" \u82e5\u4e0d\u60f3\u901a\u8fc7172.16.150.100\u8fd9\u4e2aIP\u5730\u5740\u8bbf\u95ee\u5916\u7f51\u5c31\u6ca1\u5fc5\u8981\u6307\u5b9aGATEWAY\u7f51\u5173\u7b49\u5b57\u6bb5\u4fe1\u606f \u771f\u6b63\u7684\u751f\u4ea7\u73af\u5883\u91cc,\u4e5f\u4e0d\u4f1a\u7ed9\u6bcf\u5757\u7f51\u5361\u914d\u7f6e\u7f51\u5173,\u4e00\u5757\u7f51\u5361\u914d\u7f6e\u4e86\u5c31\u884c\u4e86 So,\u6211\u4eec\u53ef\u4ee5\u5c06eth0\u7f51\u5361\u7528\u4e8e\u5916\u7f51\u901a\u4fe1,eth1\u7f51\u5361\u7528\u4e8e\u5185\u7f51\u901a\u4fe1... \"\"\" TYPE = \"Ethernet\" BOOTPROTO = \"static\" IPADDR = 172 .16.150.100 NETMASK = 255 .255.255.0 #GATEWAY = 172.16.150.2 #DNS1 = 172.16.150.2 #DNS2 = 8.8.8.8 NAME = \"eth1\" DEVICE = \"eth1\" ONBOOT = \"yes\" NM_CONTROLLED = \"no\"","title":"\u914d\u7f6eifcfg-eth1\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#dns","text":"/etc/resolv.conf DNS\u89e3\u6790\u6587\u4ef6, \u53ef\u8bbe\u7f6eDNS\u6307\u5411,\u6700\u591a3\u4e2a /etc/hosts \u672c\u5730\u540d\u79f0\u89e3\u6790\u6587\u4ef6, \u4f18\u5148\u4e8eDNS\u89e3\u6790\u6587\u4ef6 DNS\u67e5\u8be2\u987a\u5e8f \u6d4f\u89c8\u5668DNS\u7f13\u5b58 --> \u672c\u5730\u7cfb\u7edfDNS\u7f13\u5b58 --> \u672c\u5730\u8ba1\u7b97\u673aHOSTS\u6587\u4ef6 --> ISP DNS\u7f13\u5b58 --> \u9012\u5f52or\u8fed\u4ee3\u641c\u7d22 \u25b2 \u4e00\u4e2a\u5c0f\u5b9e\u9a8c,\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/hosts \u5728\u672b\u5c3e\u6dfb\u52a01.1.1.1 www.baidu.com [ root@localhost ~ ] # ping www.baidu.com PING www.a.shifen.com ( 14 .215.177.39 ) 56 ( 84 ) bytes of data. ... ... [ root@localhost ~ ] # ping www.baidu.com PING www.baidu.com ( 1 .1.1.1 ) 56 ( 84 ) bytes of data. # -- \u767e\u5ea6\u57df\u540d\u88ab\u89e3\u6790\u6210\u4e861.1.1.1 ... ... \u67d0\u516c\u53f8\u7528A B C D E..HI..\u7b4920\u53f0\u673a\u5668\u642d\u5efa\u4e86\u4e00\u4e2a\u96c6\u7fa4!! A\u8981\u8ddf\u5176\u5b83\u673a\u5668\u901a\u4fe1,\u9700\u8981\u77e5\u9053\u76ee\u6807\u4e3b\u673a\u7684IP\u5730\u5740.. \u5e76\u4e14\u5728\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u76ee\u6807\u4e3b\u673a\u7684IP.. \u8fd9\u6837\u505a\u4e0d\u597d,\u4e00\u65b9\u9762IP\u5730\u5740\u96be\u8bb0 ; \u53e6\u4e00\u65b9\u9762\u4e3b\u673a\u7684IP\u5730\u5740\u65e5\u540e\u53ef\u80fd\u4f1a\u53d8..\u4e00\u53d8,20\u53f0\u4e3b\u673a\u91cd\u65b0\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u5f88\u9ebb\u70e6.. \u6700\u89c4\u8303\u7684\u505a\u6cd5: \u5728\u516c\u53f8\u5185\u90e8\u81ea\u5df1\u642d\u5efa\u4e2aDNS\u670d\u52a1 ; \u4f1a\u5148\u7ed9\u8fd920\u53f0\u673a\u5668\u6bcf\u53f0\u673a\u5668\u8d77\u4e2a\u540d\u5b57,\u4e5f\u5c31\u662f\u57df\u540d,\u6bcf\u4e2a\u57df\u540d\u5bf9\u5e94\u4e00\u4e2aIP\u5730\u5740\u8bb0\u5f55\u5728DNS\u670d\u52a1\u5668\u4e2d.. ` hostnamectl set-hostname egon.xxx.com ` \u6c38\u4e45\u8bbe\u7f6e\u4e3b\u673a\u540d. \u8fd9\u6837\u4e00\u6765,\u914d\u7f6e\u6587\u4ef6\u4e2d\u53ea\u9700\u8981\u4f7f\u7528\u57df\u540d\u5373\u53ef,\u5f53A\u4e3b\u673a\u4e0e\u96c6\u7fa4\u4e2d\u5176\u4ed6\u673a\u5668\u901a\u4fe1\u65f6,\u4f1a\u53bb\u81ea\u5df1\u642d\u5efa\u7684DNS\u670d\u52a1\u5668\u4e0a\u67e5\u4e00\u67e5\u5bf9\u5e94\u7684\u57df\u540d\u89e3\u6790.. \u5f53\u67d0\u4e2a\u4e3b\u673a\u7684IP\u5730\u5740\u53d8\u4e86,\u96c6\u7fa4\u4e2d20\u7ea7\u53f0\u673a\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4e0d\u9700\u8981\u52a8,\u6539DNS\u670d\u52a1\u5668\u4e0a\u7684\u67d0\u6761\u89e3\u6790\u8bb0\u5f55\u5373\u53ef.. \u56e0\u4e3a\u662f\u5185\u90e8\u642d\u5efa\u7684DNS\u670d\u52a1\u5668,\u57df\u540d\u8fd8\u4e0d\u7528\u6ce8\u518c.. \u4e5f\u4fbf\u4e8e\u96c6\u7fa4\u4e2d\u589e\u52a0\u4e3b\u673a\u65f6\u7684\u64cd\u4f5c.. \u642d\u5efa\u4e2aDNS\u670d\u52a1\u4e0d\u4ec5\u53ef\u4ee5\u589e\u52a0\u53ef\u6269\u5c55\u6027,DNS\u670d\u52a1\u5668\u8fd8\u53ef\u4ee5\u505a\u8d1f\u8f7d\u5747\u8861\u7b49.. \u5077\u61d2\u7684\u505a\u6cd5: \u4e0d\u642d\u5efaDNS\u670d\u52a1,\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5c0620\u53f0\u673a\u5668\u7684\u89e3\u6790\u8bb0\u5f55\u5199\u5165/etc/hosts\u6587\u4ef6,\u518d\u7ed9\u6bcf\u53f0\u673a\u5668\u90fd\u53d1\u9001\u4e00\u4efd,\u4f46\u610f\u5473\u7740\u6bcf\u6b21\u6539\u52a8,\u6bcf\u53f0\u673a\u5668\u90fd\u8981\u540c\u6b65\u4e00\u4e0b.. ( \u6709\u4e00\u4e9b\u81ea\u52a8\u5316\u7ba1\u7406\u5de5\u5177,\u6539\u52a8\u4ee5\u540e\u53ef\u81ea\u52a8\u6279\u91cf\u7684\u6bcf\u53f0\u673a\u5668\u90fd\u4f20\u4e00\u4efd )","title":"DNS\u76f8\u5173\u914d\u7f6e\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#etcservices","text":"\u8bb0\u5f55\u4e86\u6bcf\u4e00\u4e2a\u8f6f\u4ef6\u8ddf\u5b83\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\u4ee5\u53ca\u534f\u8bae \u5e38\u89c1\u7684\u670d\u52a1\u7aef\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7 \u670d\u52a1\u7aef \u7aef\u53e3\u53f7 dhcp 67 dns 53 mysql 3306 ssh 22 grep '^ftp\\|^ssh' / etc / services","title":"/etc/services"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_11","text":"\u4ea4\u6362: \u6307\u540c\u7f51\u7edc\u8bbf\u95ee. \u591a\u53f0\u4e3b\u673a\u5904\u4e8e\u540c\u4e00\u4e2aLAN/\u4ea4\u6362\u673a/\u5c40\u57df\u7f51\u4e2d,\u914d\u7f6e\u540c\u7f51\u6bb5\u7684\u4e0d\u540cip\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u4fe1,\u4e8c\u5c42\u7f51\u7edc\u672c\u8d28\u662f\u57fa\u4e8emac\u5730\u5740\u7684\u901a\u4fe1,\u4e0d\u9700\u8981\u8fdb\u884c\u8f6c\u53d1,\u8fd9\u91cc\u9ed8\u8ba4\u4ea4\u6362\u673a\u672a\u5212\u5206\u8fc7vlan( \u5373\u4e0d\u8ba8\u8bba\u4e09\u5c42\u4ea4\u6362 ).. \u8def\u7531: \u6307\u8de8\u7f51\u7edc\u8bbf\u95ee\u7684\u8def\u5f84\u9009\u62e9. \u82e5\u8981\u4e0e\u5916\u7f51\u901a\u4fe1,\u5c31\u9700\u8981\u8f6c\u53d1/\u8def\u7531.. \u8def\u7531\u5668\u4e0a\u914d\u7f6e\u7684\u6709\u7f51\u5173.. \u7f51\u5173\u6709\u4e2a\u7279\u70b9, \u81f3\u5c11\u5f97\u6709\u4e24\u4e2a\u5730\u5740, \u5bf9\u5185\u5f97\u6709\u4e00\u4e2a\u5c40\u57df\u7f51\u5730\u5740, \u5bf9\u5916\u5f97\u6709\u4e00\u4e2a\u5916\u7f51\u5730\u5740..","title":"\u4ea4\u6362\u4e0e\u8def\u7531"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#linux","text":"","title":"Linux\u4e3b\u673a\u5145\u5f53\u8def\u7531"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_12","text":"\u5c06\u4e00\u53f0linux\u4e3b\u673aA\u5f53\u4f5c\u8def\u7531\u7684 \u4e09\u5927\u524d\u63d0 : 1> \u4e3b\u673aA\u81f3\u5c11\u5f97\u6709\u4e24\u5757\u7f51\u5361\u5206\u522b\u8fde\u63a5\u4e0d\u540c\u7684\u7f51\u6bb5; (A\u4e3b\u673a\u8fde\u63a5\u7684\u4e0d\u540c\u7f51\u6bb5\u91cc\u7684\u4e3b\u673a\u90fd\u5fc5\u987b\u5c06\u7f51\u5173\u6307\u5411\u4e3b\u673aA) 2> \u4e3b\u673aA\u5f00\u542f\u8def\u7531\u8f6c\u53d1\u529f\u80fd(\u9ed8\u8ba4\u662f\u5173\u95ed\u7684); echo 1 > /proc/sys/net/ipv4/ip_forward \u4e34\u65f6\u6253\u5f00. 3> \u5728\u8be5linux\u4e3b\u673a\u4e0a\u6dfb\u52a0\u6b63\u786e\u7684\u8def\u7531\u89c4\u5219/\u7b56\u7565..","title":"\u4e09\u5927\u524d\u63d0"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_13","text":"A\u4e3b\u673a\u7684linux OS\u5de6\u624b\u7f51\u53611,\u53f3\u624b\u7f51\u53612,\u8fde\u63a5\u4e24\u4e2a\u4e0d\u540c\u7684\u7f51\u6bb5..(B\u4e3b\u673a\u5904\u4e8e\u7f51\u6bb51,C\u4e3b\u673a\u5904\u4e8e\u7f51\u6bb52) B\u3001C\u5904\u4e8e\u4e0d\u540c\u7f51\u6bb5,\u662f\u4e0d\u80fd\u76f4\u63a5\u901a\u4fe1\u7684, A\u53ef\u4ee5\u4f5c\u4e3aBC\u4e4b\u95f4\u4e92\u901a\u7684\u6865\u6881.. B < > A < > C \u4e3b\u673aB\u53d1\u9001\u4e86\u4e2a\u6570\u636e\u5305,\u4f1a\u4ece\u7f51\u53611\u8fdb\u6765\u7684, A\u4e3b\u673a\u7684linux\u5185\u6838\u4f1a\u5148\u5224\u65ad\u6b64\u5305\u662f\u4e0d\u662f\u7ed9\u672c\u673a\u7684, \u4e0d\u662f\u7684\u8bdd\u5c31\u6b63\u5e38\u7684\u4e22\u6389.. \u82e5\u662f\u7ed9\u672c\u673a\u7684: \u60c5\u51b51: \u8be5\u6570\u636e\u5305\u5c31\u662f\u660e\u786e\u7684\u7ed9\u672c\u673a\u4e0a\u5c42\u7684\u5e94\u7528\u7a0b\u5e8f\u7684; \u6570\u636e\u5305\u6d41\u5411: \u7f51\u53611 - \u64cd\u4f5c\u7cfb\u7edf(A\u4e3b\u673a\u7684 \u5185\u6838\u7a7a\u95f4 ) - \u5e94\u7528\u7a0b\u5e8f(A\u4e3b\u673a\u7684 \u7528\u6237\u7a7a\u95f4 ) \u60c5\u51b51> \u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u5b8c\u6570\u636e\u5305\u5c31\u7ed3\u675f\u4e86,\u4e0d\u9700\u8981\u8fd4\u56de\u6570\u636e\u5305; \u60c5\u51b52> \u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u5b8c\u6570\u636e\u5305\u4ea7\u751f\u4e86\u65b0\u7684\u7ed3\u679c,\u65b0\u7684\u6570\u636e\u5305\u4eceA\u7684\u7528\u6237\u7a7a\u95f4\u4e22\u5230\u4e86A\u7684\u5185\u6838\u7a7a\u95f4.. \u5185\u6838\u518d\u5224\u65ad\u65b0\u7684\u6570\u636e\u5305\u4ece\u54ea\u4e2a\u7f51\u5361\u53d1\u51fa\u53bb... \u65b0\u6570\u636e\u5305\u7684\u76ee\u6807\u4e3b\u673a\u662fC\u5c31\u4ece\u7f51\u53612\u51fa\u53bb;\u662fB\u5c31\u4ece\u7f51\u53611\u539f\u8def\u8fd4\u56de... \u60c5\u51b52: \u5c06\u672c\u673a\u7684OS Linux\u5f53\u4f5c\u8def\u7531\u5668\u4f7f\u7528,\u6570\u636e\u5305\u4e0d\u4f1a\u8fdb\u5165A\u4e3b\u673a\u7684\u7528\u6237\u7a7a\u95f4,\u6570\u636e\u5305\u4f1a\u4ece\u7f51\u53612\u51fa\u53bb,\u8f6c\u53d1\u7ed9C; # -- \u53ef\u4ee5\u770b\u5230 linux\u4e3b\u673a\u7684\u8def\u7531\u8f6c\u53d1\u529f\u80fd\u9ed8\u8ba4\u662f\u5173\u95ed\u7684 0\u5173\u95ed 1\u5f00\u542f [ root@localhost ~ ] # cat /proc/sys/net/ipv4/ip_forward 0","title":"\u8f6c\u53d1\u6d41\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_14","text":"route\u547d\u4ee4","title":"\u7f51\u5173/\u8def\u7531"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_15","text":"Linux\u4e0a\u7684\u8def\u7531\u5206\u4e3a3\u79cd: 1> \u4e3b\u673a\u8def\u7531 : \u660e\u786e\u6307\u5b9a\u4e86\u5230\u8fbe\u67d0\u53f0\u4e3b\u673a\u5e94\u8be5\u600e\u4e48\u8d70.. \u4e3b\u673a\u8def\u7531\u4e5f\u53eb\u505a\u9759\u6001\u8def\u7531 \u63a9\u7801\u4f4d32\u4f4d 2> \u7f51\u7edc\u8def\u7531 : \u6307\u660e\u5230\u67d0\u7c7b\u7f51\u7edc\u600e\u4e48\u8d70, \u7cbe\u786e\u5230\u4e86\u67d0\u4e2a\u7f51\u6bb5.. \u63a9\u7801\u4f4d\u5c0f\u4e8e32\u4f4d 3> \u9ed8\u8ba4\u8def\u7531 : \u4e0d\u8d70\u4e3b\u673a\u8def\u7531\u7684\u548c\u7f51\u7edc\u8def\u7531\u7684, \u5168\u90e8\u90fd\u8d70\u9ed8\u8ba4\u8def\u7531. \u63a9\u7801\u5168\u4e3a0 \u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u8def\u7531\u4e00\u822c\u79f0\u4e3a\u7f51\u5173.. \u56de\u987e\u4e0b, \u5b50\u7f51\u63a9\u7801\u4e0eIP\u5730\u5740\u505a\u4e0e\u8fd0\u7b97\u53ef\u4ee5\u7b97\u51fa\u7f51\u7edc\u5730\u5740(\u540c1\u4e3a1,\u5426\u5219\u4e3a0).. \u4e00\u4e2aB\u7c7b\u7684IP\u5730\u5740,\u5b50\u7f51\u63a9\u7801\u81f3\u5c11\u662f8\u4f4d,IP\u5730\u5740\u7684\u7f51\u7edc\u4f4d\u5411\u4e3b\u673a\u4f4d\u501f\u4f4d(\u501f\u7684\u53eb\u505a\u5b50\u7f51\u4f4d)\u6765\u5212\u5206\u5b50\u7f51.. \u5b50\u7f51\u63a9\u7801\u8d8a\u77ed\u610f\u5473\u7740\u5212\u5206\u7684\u5b50\u7f51\u6570\u8d8a\u5c11, \u6bcf\u4e2a\u5b50\u7f51\u7684\u8303\u56f4(\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u7684\u4e3b\u673a\u4e2a\u6570)\u5c31\u8d8a\u5927; \u53cd\u4e4b\u5219\u76f8\u53cd!!! \u4f18\u5148\u7ea7:(\u6839\u636e\u7cbe\u786e\u5ea6\u5224\u65ad\u7684) \u4e3b\u673a\u8def\u7531 > \u7f51\u7edc\u8def\u7531 > \u9ed8\u8ba4\u8def\u7531 \u82e5\u8def\u7531\u6761\u76ee\u7684\u63a9\u7801\u957f\u5ea6\u76f8\u540c, \u5219\u6bd4\u8f83\u8282\u70b9\u4e4b\u95f4\u7684\u7ba1\u7406\u8ddd\u79bb(\u6bd4\u5982metric), \u7ba1\u7406\u8ddd\u79bb\u77ed\u7684\u751f\u6548 \u4e3e\u4e2a\u6817\u5b50, 1.1.1.10/32 32\u4f4d\u7684\u63a9\u7801\u610f\u5473\u7740IP\u5730\u5740\u7684\u524d32\u4f4d\u90fd\u662f\u7f51\u7edc\u53f7,\u6ca1\u6709\u5269\u4e0b\u4e3b\u673a\u4f4d,\u4e0d\u80fd\u501f\u4f4d,\u8be5IP\u4e5f\u5c31\u4e0d\u80fd\u5212\u5206\u4efb\u4f55\u7684\u5b50\u7f51.. 1.1.1.10\u7f51\u6bb5\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u673a\u5668... \u53ea\u6709\u5b83\u81ea\u5df1.. \u7cbe\u786e\u5230\u4e86\u4e00\u53f0\u673a\u5668!!!","title":"\u5206\u7c7b\u3001\u4f18\u5148\u7ea7"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_16","text":"route -n -n\u9009\u9879\u8868\u793a\u4e0d\u89e3\u6790\u4e3b\u673a\u540d Destination: \u53bb\u5f80\u76ee\u6807,\u76ee\u7684\u5730 0.0.0.0/0 \u4ee3\u8868\u6240\u6709\u7684IP\u5730\u5740\u90fd\u662f\u76ee\u7684\u5730 Gateway: \u4e0b\u4e00\u8df3(\u4e0b\u4e00\u6b65\u4ea4\u7ed9\u8c01\u505a\u8f6c\u53d1) 0.0.0.0\u8868\u660e\u6ca1\u6709\u4e0b\u4e00\u8df3,\u901a\u8fc7Iface\u6307\u5b9a\u7684\u7f51\u5361\u5f80\u5c40\u57df\u7f51\u91cc\u4e00\u4e22. \u8c01\u6536\u5230\u7b97\u8c01\u7684,\u6536\u5230\u7684\u90a3\u53f0\u4e3b\u673a\u4e0d\u4f1a\u5c06\u8be5\u6570\u636e\u5305\u505a\u4e0b\u4e00\u8df3\u7684\u8f6c\u53d1. 172.16.150.2 \u6307\u5b9a\u4e86\u7f51\u5173IP \u8868\u660e\u7f51\u5173\u4f1a\u5b89\u6392\u4e0b\u4e00\u8df3 169.254.0.0 \u662f\u4fdd\u7559\u7f51\u5173 Genmask: \u5b50\u7f51\u63a9\u7801 Flags: \u6807\u5fd7\u4f4d U \u6b64\u8def\u7531\u89c4\u5219\u6b63\u5728\u751f\u6548 G \u7f51\u5173 H \u4e3b\u673a\u8def\u7531 Metric: \u603b\u5171\u7ecf\u5386\u591a\u5c11\u8df3 Iface: \u4ece\u54ea\u4e2a\u7f51\u5361\u51fa\u53bb ## -- \u8fd9\u4e9b\u4fe1\u606f\u662f\u4eceDHCP\u91cc\u83b7\u53d6\u5230\u7684,\u82e5\u4e0d\u60f3\u8981DHCP\u7684,\u60f3\u81ea\u5df1\u914d\u7f6e\u7684\u751f\u6548,\u5219\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff01 [ root@localhost ~ ] # route -n Kernel IP routing table # -- \u5185\u6838IP\u8def\u7531\u8868 Destination Gateway Genmask Flags Metric Ref Use Iface 0 .0.0.0 172 .16.150.2 0 .0.0.0 UG 0 0 0 eth0 169 .254.0.0 0 .0.0.0 255 .255.0.0 U 1002 0 0 eth0 # --\u4fdd\u7559\u7f51\u5173,\u4e86\u89e3 172 .16.150.0 0 .0.0.0 255 .255.255.0 U 0 0 0 eth0 192 .168.122.0 0 .0.0.0 255 .255.255.0 U 0 0 0 virbr0","title":"\u67e5\u770b\u8def\u7531\u8868\u4fe1\u606f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_17","text":"eth0\u7f51\u5361 -- inet 172 .16.150.131 netmask 255 .255.255.0 \u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\u4e00\u6761\u7f51\u7edc\u8def\u7531!!! ` route add -net 192 .168.0.0/24 dev eth0 ` \u4e3a\u4f55\u53ea\u8981\u6dfb\u52a0\u4e00\u4e2aip\u5730\u5740,\u5c31\u4f1a\u9ed8\u8ba4\u589e\u52a0\u4e00\u4e2a\u8be5ip\u5730\u5740\u7684\u7f51\u6bb5\u8def\u7531\uff1f 1> \u6dfb\u52a0/\u5220\u9664\u4e3b\u673a\u8def\u7531,\u7cbe\u786e\u5230\u4e00\u4e2aIP\u5730\u5740 route add -host 1.1.1.10/32 dev eth0 -- \u4e0d\u9700\u8981\u8f6c\u53d1\u5219\u6307\u5b9adev route add -host 1.1.1.11/32 gw 172.16.150.2 -- \u82e5\u9700\u8981\u8f6c\u53d1,\u6307\u5b9agw route del -host 1.1.1.10/32 2> \u6dfb\u52a0/\u5220\u9664\u7f51\u7edc\u8def\u7531 route add -net 2.2.2.0/24 dev eth0 route del -net 2.2.2.0/24 3> \u5220\u9664/\u6dfb\u52a0\u9ed8\u8ba4\u8def\u7531 route del default route add -net 0.0.0.0/0 gw 172.16.150.2 \u6216\u8005 route add default gw 172.16.150.2 systemctl restart network \u91cd\u542f\u7f51\u7edc\u914d\u7f6e\u540e, \u4e0a\u8ff0\u7684\u8bbe\u7f6e\u5931\u6548","title":"\u6dfb\u52a0/\u5220\u9664\u8def\u7531"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_18","text":"vim /etc/syconfig/network-scripts/route-eth0 \u6ce8\u610f: 1 > \u65b0\u589e\u4e00\u4e2a\u8def\u7531\u914d\u7f6e\u6587\u4ef6,\u524d\u63d0\u9700\u8981\u4e00\u4e2a\u76f8\u5bf9\u5e94\u7684\u540d\u4e3aifcfg-eth0\u7684\u7f51\u5361\u914d\u7f6e\u6587\u4ef6 \u540d\u5b57\u8981\u5bf9\u5e94\u4e0a\u54e6! route-ethX, \u8981\u4ece\u54ea\u4e2a\u63a5\u53e3\u51fa\u53bbX\u5c31\u662f\u51e0 2 > \u5728\u6587\u4ef6\u4e2d\u914d\u7f6e\u6c38\u4e45\u9ed8\u8ba4\u8def\u7531, \u5219\u5fc5\u987b\u4fdd\u8bc1\u6240\u6709\u4f7f\u7528\u4e86DHCP\u670d\u52a1\u7684\u7f51\u5361\u914d\u7f6e\u6587\u4ef6ifcfg-ethX\u4e2d\u7684 DEFROUTE\u6307\u4ee4\u8bbe\u7f6e\u4e3a \"no\" ,\u8868\u660eDHCP\u7684\u8def\u7531\u914d\u7f6e\u4e0d\u751f\u6548 ; PEERROUTES\u6307\u4ee4\u8bbe\u7f6e\u4e3a \"no\" ,\u8868\u793aDHCP\u8bbe\u7f6e\u7684\u8def\u7531\u5141\u8bb8\u88ab\u8986\u76d6. \u914d\u7f6e\u89c4\u5219:\u6bcf\u4e00\u884c\u4e00\u4e2a\u8def\u7531\u6761\u76ee, \u5148\u662f\u8981\u5230\u8fbe\u7684\u76ee\u6807, \u7136\u540e\u662fvia\u5173\u952e\u5b57,\u6700\u540e\u662f\u4e0b\u4e00\u8df3\u5730\u5740. \u8981\u6c42\u4e0b\u4e00\u8df3\u5fc5\u987b\u80fd\u5230\u8fbe,\u4e14\u4e00\u822c\u90fd\u548cethX\u540c\u7f51\u6bb5.. \u4f8b\u5982eth0\u7f51\u5361\u7684IP\u5730\u5740\u662f192.168.10.123,,\u8981\u901a\u8fc7\u7f51\u5361eth0\u51fa\u53bb\u5230\u8fbe10.0.0.10,, \u90a3\u4e48\u4e0b\u4e00\u8df3\u7684\u5730\u5740\u8981\u548ceth0\u7684\u5730\u5740\u5728\u540c\u7f51\u6bb5 ..\u5982192.168.10.222 ... \u770b\u8ba1\u7b97\u673a\u7f51\u7edc\u4e4b\u7f51\u7edc\u5c42.md \u4e2d \u7f51\u7edc\u5c42\u6574\u4e2a\u6d41\u7a0b \u8fd9\u90e8\u5206\u7684\u5185\u5bb9, \u6ce8\u610f\u56fe\u4e2d\u7684\u8def\u7531\u56681\u7684IP 192.168.100.4 \u548c\u8def\u7531\u56682\u7684IP 192.168.100.5 !! # -- \u9ed8\u8ba4\u8def\u7531 default via 192 .168.100.1 dev eth0 0 .0.0.0/0 via 192 .168.100.1 dev eth0 # -- \u7f51\u6bb5\u8def\u7531 192 .168.10.0/24 via 192 .168.100.1 dev eth0 # -- \u4e3b\u673a\u8def\u7531,\u5728centos7\u4e2d dev\u5f97\u6307\u5b9a 192 .168.100.52/32 via 192 .168.100.33 dev eth0 \u914d\u7f6e\u5b8c\u540e, \u91cd\u542fnetwork\u670d\u52a1\u5373\u53ef\u7acb\u5373\u751f\u6548...","title":"\u914d\u7f6e\u6c38\u4e45\u8def\u7531"},{"location":"1_linux%E5%9F%BA%E7%A1%80/16_%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#_19","text":"\u7565.. \u5b9e\u9a8c\u8be6\u89c1 https://zhuanlan.zhihu.com/p/337256553 \u8ba9\u6211\u5077\u5077\u61d2,\u4e3b\u8981\u662f\u5f00\u53d1\u771f\u5c31\u7528\u4e0d\u5230... \u8def\u7531\u7684\u914d\u7f6e\u53c8\u5f88\u7e41\u7410.. \u6709\u70b9\u7d2f, \u7406\u8bba\u65b9\u9762\u662f\u6574\u7406\u89c4\u6574\u4e86\u7684\uff01\uff01\uff01","title":"\u8def\u7531\u5b9e\u9a8c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/","text":"shell\u4ecb\u7ecd \u00b6 shell\u662f\u4e00\u95e8\u52a8\u6001\u3001\u5f31\u7c7b\u578b\u3001\u89e3\u91ca\u578b\u7684\u8bed\u8a00 \u8ba1\u7b97\u673a\u4f53\u7cfb\u67b6\u6784 \u00b6 \u547d\u4ee4 shell\u89e3\u91ca\u5668 ( \u8fdb\u4e00\u6b65\u5c01\u88c5\u6210\u547d\u4ee4 ) \u7cfb\u7edf\u8c03\u7528\u63a5\u53e3 ( \u662f\u5bf9OS\u5185\u6838\u7684\u5c01\u88c5 ) OS\u5185\u6838 \u786c\u4ef6 shell\u811a\u672c\u8fd0\u884c\u6b65\u9aa4 \u00b6 \u524d\u63d0: \u5f53\u524d\u7528\u6237\u9700\u8981\u5bf9\u811a\u672c\u6587\u4ef6\u62e5\u6709r\u548cx\u6743\u9650 \u6267\u884c\u7684\u4e24\u79cd\u65b9\u5f0f: \u5728a.sh\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u4e0b -- ` bash a.sh ` \u4efb\u4e00\u76ee\u5f55\u4e0b -- ` /root/a.sh ` \u73b0\u5728\u7528\u7684shell\u89e3\u91ca\u5668\u90fd\u662fBash,\u4e00\u4e2ashell\u811a\u672c\u8fd0\u884c\u7684\u4e09\u4e2a\u6b65\u9aa4: 1 > \u5148\u542f\u52a8bash\u89e3\u91ca\u5668 2 > bash\u89e3\u91ca\u5668\u4f1a\u628aa.sh\u7684\u5185\u5bb9\u4ece\u786c\u76d8\u8bfb\u5165\u5185\u5b58 3 > bash\u89e3\u91ca\u5668\u540e\u8bc6\u522b\u521a\u521a\u8bfb\u5165\u5185\u5b58\u4e2d\u7684\u5185\u5bb9,\u5e76\u9010\u884c\u89e3\u91ca\u6267\u884cshell\u4ee3\u7801. Ps: \u50cf\u540c\u4e3a\u89e3\u91ca\u578b\u8bed\u8a00\u7684python,\u5e95\u5c42\u5e76\u53d1\u7684\u7279\u6027\u3001\u5b57\u7b26\u7f16\u7801\u7684\u95ee\u9898\u90fd\u4e0e\u8fd9\u4e09\u4e2a\u6b65\u9aa4\u6709\u5173. \u53d8\u91cf \u00b6 \u5b9a\u4e49 \u53d8\u91cf: height=172 \u8bbf\u95ee \u53d8\u91cf: echo $height echo ${height} (\u63a8\u8350) \u4fee\u6539 \u53d8\u91cf: height=180 \u5220\u9664 \u53d8\u91cf: unset height \u53d8\u91cf\u503c\u7684 \u7c7b\u578b : \u6574\u578b\u3001\u6d6e\u70b9\u578b\u3001\u5b57\u7b26\u4e32 \u7528\u6765\u5199shell\u811a\u672c,\u8fd9\u4e09\u513f\u5c31\u591f\u7528\u4e86.. \u5f15\u53f7\u5bf9\u53d8\u91cf\u7684\u5f71\u54cd \u53cc\u5f15\u53f7\u3001 \u5355\u5f15\u53f7 : \u90fd\u53ef\u7528\u4e8e\u5b9a\u4e49\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u53d8\u91cf.. \u5728python\u91cc\u6ca1\u533a\u522b,\u5728shell\u91cc\u5355\u5f15\u53f7\u5b9a\u4e49\u7684\u53eb\u505a\u786c\u5f15\u7528.. \u786c\u5f15\u7528 \u662f\u6307\u5c06\u5f15\u53f7\u5305\u88f9\u7684\u7279\u6b8a\u5b57\u7b26\u90fd\u5f53\u4f5c\u662f\u666e\u901a\u5b57\u7b26.. x=\"\\$123\" \u7b49\u540c\u4e8e y='$123' \u53cd\u5f15\u53f7: \u53d6\u67d0\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c touch `date \"+%F\"`.txt \u7b49\u540c\u4e8e touch $(date \"+%F\").txt \u53cd\u5f15\u53f7\u4e0d\u80fd\u5d4c\u5957, $()\u53ef\u4ee5... \u7cfb\u7edf\u53d8\u91cf : PS1 \u6307\u7684\u5c31\u662f[root@localhost ~] HOSTNAME \u5185\u7f6e\u4e3b\u673a\u540d\u7684\u540d\u5b57 USER \u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u540d ... ... ... \"\"\" shell\u91cc\u5b9a\u4e49\u53d8\u91cf,\u8d4b\u503c\u7b26\u53f7\u201c=\u201d\u4e24\u8fb9\u4e0d\u80fd\u6709\u7a7a\u683c;python\u5efa\u8bae\u6709\u7a7a\u683cHhh \"\"\" [ root@localhost ~ ] # height=172 ## -- \u5b9a\u4e49 [ root@localhost ~ ] # echo $height ## -- \u8bbf\u95ee/\u53d6\u503c 172 [ root@localhost ~ ] # height=180 ## -- \u4fee\u6539 [ root@localhost ~ ] # echo $height 180 [ root@localhost ~ ] # echo ${height}cm ## -- \u5efa\u8bae\u7528{}\u5c06\u8981\u8bbf\u95ee\u7684\u53d8\u91cf\u5305\u88f9\u8d77\u6765 180cm [ root@localhost ~ ] # touch `date \"+%F\"`.txt [ root@localhost ~ ] # ll 2022-08-29.txt -rw-r--r-- 1 root root 0 8\u6708 29 20 :55 2022 -08-29.txt [ root@localhost ~ ] # touch $(date \"+%F\").bak [ root@localhost ~ ] # ll 2022-08-29.bak -rw-r--r-- 1 root root 0 8\u6708 29 20 :57 2022 -08-29.bak \u53d8\u91cf\u4f5c\u7528\u57df \u00b6 \u53d8\u91cf\u4f5c\u7528\u57df\u5373\u53d8\u91cf\u7684\u751f\u6548\u8303\u56f4 \u5168\u5c40\u53d8\u91cf \u00b6 \u5168\u5c40\u53d8\u91cf\u53ea\u5728\u5f53\u524dshell\u8fdb\u7a0b(\u4e0d\u5305\u542b\u8be5\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b)\u91cc\u751f\u6548!!! [ root@localhost ~ ] # x=1000 [ root@localhost ~ ] # echo $x 1000 [ root@localhost ~ ] # echo $y ## -- bash\u8fdb\u7a0b\u4e2d\u4e00\u5f00\u59cb\u662f\u6ca1\u6709\u53d8\u91cfy\u7684\u5b58\u5728\u7684 [ root@localhost ~ ] # vim b.sh [ root@localhost ~ ] # cat b.sh echo $x y = 10000 [ root@localhost ~ ] # bash b.sh ## -- \u8d77\u4e86\u4e2a\u65b0\u7684bash\u8fdb\u7a0b,\u6587\u4ef6\u91cc\u9762\u7684\u4ee3\u7801\u5728\u65b0\u7ec8\u7aef\u91cc\u8fd0\u884c [ root@localhost ~ ] # chmod u+x b.sh [ root@localhost ~ ] # ./b.sh ## -- \u5f00\u8d77\u4e86\u4e00\u4e2a\u5b50shell\u8fdb\u7a0b,\u5728\u65b0\u7684\u8fdb\u7a0b\u91cc\u6267\u884c\u7684 [ root@localhost ~ ] # source b.sh ## -- source\u76f8\u5f53\u4e8e\u5c06\u6587\u4ef6\u4e2d\u7684\u4e24\u884c\u4ee3\u7801\u62ff\u51fa\u6765\u5728\u5f53\u524d\u7ec8\u7aef\u8fd0\u884c 1000 [ root@localhost ~ ] # echo $y ## -- so,\u53ef\u4ee5\u8bbf\u95ee\u5230y\u7684\u503c 10000 [ root@localhost ~ ] # bash ## -- \u8fdb\u5165\u4e00\u4e2a\u65b0\u7ec8\u7aef [ root@localhost ~ ] # echo $y [ root@localhost ~ ] # exit exit [ root@localhost ~ ] # echo $y 10000 export \u00b6 \u901a\u8fc7 export \u53d8\u91cf ,\u53ef\u4ee5\u5c06\u6b64\u53d8\u91cf\u7ee7\u627f\u5230\u5b50\u5b50\u5b59\u5b59... \u8ddf 9_\u6743\u9650\u7ba1\u7406\u4e4bsu\u4e0esudo.md\u4e2d \u914d\u7f6e\u6587\u4ef6\u7684\u5999\u7528 \u90a3\u90e8\u5206\u7684\u77e5\u8bc6\u70b9\u53ef\u4ee5\u547c\u5e94\u8d77\u6765.. \"\"\" x\u53d8\u91cf \u7b2c\u4e00\u5c42 111 \u7b2c\u4e8c\u5c42 222 \u7b2c\u4e09\u5c42 333 \u6709\u5c31\u7528\u81ea\u5df1\u7684,\u6ca1\u6709\u5219\u7ee7\u627f\u6700\u8fd1\u7684\u7236\u7c7b\u7684x\u503c; exit\u9000\u51fa\u672c\u5c42\u5230\u4e0a\u4e00\u5c42,\u67e5\u770bx\u53d8\u91cf\u7684\u503c,\u4e5f\u662f\u4ee5\u672c\u5c42\u6709\u6ca1\u6709,\u6ca1\u6709\u518d\u5f80\u4e0a\u5c42\u770b\u7684\u903b\u8f91\u67e5\u770b.. \u4e0d\u4f1a\u8bf4,\u7b2c\u4e09\u5c42\u7684x\u503c\u53d8\u4e3a333,\u7b2c\u4e00\u5c42\u7b2c\u4e8c\u5c42\u7684\u503c\u90fd\u53d8\u4e3a\u4e86333.. \"\"\" [ root@localhost ~ ] # x=111 [ root@localhost ~ ] # export x [ root@localhost ~ ] # bash [ root@localhost ~ ] # echo $x 111 [ root@localhost ~ ] # x=222 [ root@localhost ~ ] # bash [ root@localhost ~ ] # echo $x 222 [ root@localhost ~ ] # x=333 [ root@localhost ~ ] # exit exit [ root@localhost ~ ] # echo $x 222 [ root@localhost ~ ] # exit exit [ root@localhost ~ ] # echo $x 111 \u5143\u5b57\u7b26 \u00b6 \\([ ]\u3001\\) (( )) \u00b6 $[ ] \u7b49\u540c\u4e8e $(( )) \u53ea\u652f\u6301\u6574\u6570\u7684\u52a0\u51cf\u4e58\u9664\u53d6\u4f59+-*/%\u8fd0\u7b97,\u4e0d\u80fd\u505a\u6d6e\u70b9\u6570\u7684 x = 10 y = 20 z = $ [ $x + $y ] z = $(( $x + $y )) z = $ [ $x / $y ] z = $(( $x + $y )) ## -- \u503c\u4e3a0 z = $ [ 10 + 20 ] z = $(( 10 + 20 )) ## -- \u53ef\u4ee5\u76f4\u63a5\u5199\u503c bc\u8f6f\u4ef6\u5305 \"\"\" \u6d6e\u70b9\u6570\u7684\u8fd0\u7b97\u9700\u8981\u501f\u52a9bc\u8f6f\u4ef6\u5305 yum install bc -y \"\"\" ## -- scale\u6307\u5b9a\u4fdd\u7559\u51e0\u4f4d\u5c0f\u6570 \u4e0d\u4f1a\u56db\u820d\u4e94\u5165 [ root@localhost ~ ] # echo \"scale=2;10/3\"|bc 3 .33 ## -- \u6709\u4e2a\u5f0a\u7aef,.33\u5728\u505a\u8fd0\u7b97\u65f6,\u4e0d\u4f1a\u8bc6\u522b\u62100.33 [ root@localhost ~ ] # res=`echo \"scale=2;1/3\"|bc` [ root@localhost ~ ] # echo $res .33 [ root@localhost ~ ] # echo $[ $res * 100 ] -bash: .33 * 100 : \u8bed\u6cd5\u9519\u8bef: \u671f\u5f85\u64cd\u4f5c\u6570 \uff08\u9519\u8bef\u7b26\u53f7\u662f \".33 * 100 \" \uff09 ## -- \u89e3\u51b3: \u501f\u52a9cut\u505a\u5206\u5272\u5904\u7406 ## echo $(echo \"scale=2;1/3\"|bc|cut -d. -f2)% [ root@localhost ~ ] # echo `echo \"scale=2;1/3\"|bc|cut -d. -f2`% 33 % \u7ec3\u4e60:\u8ba1\u7b97\u5185\u5b58\u7684\u53ef\u7528\u7387(\u767e\u5206\u6bd4) [ root@localhost ~ ] # free total used free shared buff/cache available Mem: 995640 169672 522184 8192 303784 676212 Swap: 2097148 0 2097148 # awk\u9ed8\u8ba4\u7a7a\u683c\u5206\u5272,NR\u6307\u5b9a\u7b2c2\u884c [ root@localhost ~ ] # avail=$(free | awk 'NR==2{print $7}') [ root@localhost ~ ] # total=$(free | awk 'NR==2{print $2}') [ root@localhost ~ ] # echo $avail $total 675564 995640 [ root@localhost ~ ] # per=`echo \"scale=2;$avail/$total\"|bc|cut -d. -f2` [ root@localhost ~ ] # echo ${per}% 67 % \u5176\u4ed6\u5143\u5b57\u7b26 \u00b6 sed\u3001grep\u3001awk\u6587\u4ef6\u5904\u7406\u4e09\u5251\u5ba2\u8fd9\u4e09\u4e2a\u547d\u4ee4\u5de5\u5177\u662f\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4f7f\u7528\u7684!! \u5176\u4f59\u7684\u547d\u4ee4\u6682\u4e14\u53ea\u80fd\u4f7f\u7528\u5143\u5b57\u7b26\uff01 \u5143\u5b57\u7b26 \u542b\u4e49 ~ \u5bb6\u76ee\u5f55 `` \u53d6\u547d\u4ee4\u8fd0\u884c\u7ed3\u679c,\u4e0d\u53ef\u5d4c\u5957 $() \u53d6\u547d\u4ee4\u8fd0\u884c\u7ed3\u679c,\u53ef\u4ee5\u5d4c\u5957 $(()) \u6216\u8005 $[] \u91cc\u9762\u53ef\u4ee5\u505a\u6574\u6570\u8fd0\u7b97 ${} \u754c\u5b9a\u8fb9\u754c,\u5305\u542b touch {1..6}{d,e,f}.txt 6*3=18\u79cd\u53ef\u80fd $? \u4e0a\u4e00\u6761\u547d\u4ee4\u662f\u5426\u8fd0\u884c\u6210\u529f,\u503c\u4e3a0\u6210\u529f,\u975e0\u5931\u8d25.. () \u62ec\u53f7\u91cc\u5199\u547d\u4ee4,\u4ee3\u8868\u5728\u5b50shell\u4e2d\u63d0\u4ea4\u4efb\u52a1 \uff1f \u4ee3\u8868\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26,\u4e0d\u80fd\u6307\u5b9a ll /test/?.txt [] \u53d6\u5176\u4e2d\u4efb\u4e00\u4e00\u4e2a\u5b57\u7b26 \u4e5f\u53ef\u4ee5\u505a\u6d4b\u8bd5\u7528(\u7ed3\u5408$?\u4f7f\u7528), test\u547d\u4ee4 ! \u6216\u8005 ^ \u53d6\u53cd,\u5728[]\u53f7\u91cc\u4f7f\u7528 - \u4ee3\u8868\u8303\u56f4 & \u653e\u5728\u547d\u4ee4\u672b\u5c3e\u610f\u5473\u7740\u547d\u4ee4\u540e\u53f0\u8fd0\u884c; && \u5e76\u4e14 \u7c7b\u4f3c\u4e8eand \u540c\u771f\u4e3a\u771f(\u627e\u9519\u7684 \u9047\u9519\u5219\u505c) || \u6216\u8005 \u7c7b\u4f3c\u4e8eor \u6709\u771f\u4e3a\u771f(\u627e\u5bf9\u7684 \u9047\u5bf9\u5219\u505c) ; \u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u6267\u884c,\u54ea\u6015\u4e2d\u9014\u5931\u8d25,\u540e\u9762\u7684\u7167\u5e38\u8fd0\u884c * \u4ee3\u8868\u6240\u6709 = \u8d4b\u503c == \u5224\u65ad\u503c\u662f\u5426\u76f8\u7b49 \\ \u8f6c\u4e49 : \u8fd9\u4e5f\u662f\u4e2a\u547d\u4ee4,\u8ddftrue\u4e00\u6837 \u8fd0\u884c\u7ed3\u679c\u6c38\u8fdc\u4e3a\u771f [ !12 ][ ^21 ] .txt ## -- \u6587\u4ef6\u540d\u7531\u4e24\u4e2a\u5b57\u7b26\u7ec4\u6210,\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0d\u662f1\u548c2,\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e0d\u662f2\u548c1,\u5e76\u4ee5.txt\u7ed3\u5c3e\u7684\u6587\u4ef6 [ 0 -9a-z ] .txt ## -- 0-9,a-z\u4e2d\u4efb\u4e00\u5b57\u7b26 echooo 123 && pwd ## &&\u5de6\u8fb9\u547d\u4ee4\u51fa\u9519,&&\u53f3\u8fb9\u547d\u4ee4\u662f\u4e0d\u4f1a\u8fd0\u884c\u7684 echooo 123 || pwd ## ||\u5de6\u8fb9\u547d\u4ee4\u5931\u8d25,&&\u53f3\u8fb9\u547d\u4ee4\u662f\u4f1a\u8fd0\u884c\u7684 [ root@localhost ~ ] # : [ root@localhost ~ ] # echo $? 0 [ root@localhost ~ ] # true [ root@localhost ~ ] # echo $? 0 \u6761\u4ef6\u6d4b\u8bd5 \u00b6 \u25b2 \u5b57\u7b26\u4e32\u7684\u5224\u65ad ## -- [ \"egon\" = \"123\" ] \u6ce8\u610f:\u9519\u4e86\u4e5f\u4e0d\u4f1a\u6709\u63d0\u793a\u4fe1\u606f\u7684 [ root@localhost ~ ] # name=\"egon\" [ root@localhost ~ ] # [ $name = \"egon111\" ] ## -- \u8bb0\u5f97\u91cc\u9762\u7684\u7a7a\u683c [ root@localhost ~ ] # echo $? ## -- $?\u8868\u660e\u4e0a\u4e00\u6761\u547d\u4ee4\u662f\u5426\u8fd0\u884c\u6210\u529f 0\u4e3a\u6210\u529f,\u975e0\u5931\u8d25 1 [ root@localhost ~ ] # [ $name = \"egon\" ] [ root@localhost ~ ] # echo $? 0 [ root@localhost ~ ] # [ $name != \"egon111\" ] [ root@localhost ~ ] # echo $? 0 [ root@localhost ~ ] # [ \"aa\" != \"aa\" ] && echo \"ok\" || echo \"no\" no [ root@localhost ~ ] # [ \"aa\" = \"aa\" ] && echo \"ok\" || echo \"no\" ok \u25b2 \u6570\u5b57\u7684\u5224\u65ad -eq \u7b49\u4e8e -gt \u5927\u4e8e> -ge \u5927\u4e8e\u7b49\u4e8e> = -lt \u5c0f\u4e8e -le \u5c0f\u4e8e\u7b49\u4e8e -ne \u4e0d\u7b49\u4e8e [ root@localhost ~ ] # [ 3 -lt 5 ] [ root@localhost ~ ] # echo $? 0 \u25b2 \u6587\u4ef6\u7684\u5224\u65ad -f \u5b58\u5728\u5e76\u4e14\u5f97\u662f\u4e2a\u6807\u51c6\u6587\u4ef6 -e \u6587\u4ef6\u5b58\u5728,\u4e0d\u7ba1\u7c7b\u578b [ root@localhost ~ ] # [ -f /root/a.sh ] [ root@localhost ~ ] # echo $? 0 \u7ec3\u4e60:\u767b\u5f55\u811a\u672c [ root@localhost ~ ] # vim login.sh [ root@localhost ~ ] # cat login.sh #!/bin/bash read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:\" username read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:\" password ## -- \u5bf9 && \u8fd0\u884c ; \u9519 && \u4e0d\u8fd0\u884c ; \u5bf9 || \u4e0d\u8fd0\u884c ; \u9519 || \u8fd0\u884c [ $username = \"egon\" ] && [ $password = 123 ] && echo \"\u8ba4\u8bc1\u6210\u529f\" || echo \"\u8ba4\u8bc1\u5931\u8d25\" [ root@localhost ~ ] # bash login.sh \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:egon \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123 \u8ba4\u8bc1\u6210\u529f [ root@localhost ~ ] # bash login.sh \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:dc \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123 \u8ba4\u8bc1\u5931\u8d25 \u6d41\u7a0b\u63a7\u5236 \u00b6 if\u5224\u65ad \u00b6 \u547d\u4ee41 \u547d\u4ee42 if \u6761\u4ef61;then \u4ee3\u7801 elif \u6761\u4ef62;then \u4ee3\u7801 elif \u6761\u4ef63;then \u4ee3\u7801 else \u4ee3\u7801 fi \u547d\u4ee43 [ root@localhost ~ ] # vim if1.sh [ root@localhost ~ ] # cat if1.sh #!/bin/bash # -- \u5355\u5206\u652f if [ 10 -gt 3 ] ; then echo \"10>3? yes\" fi # -- \u53cc\u5206\u652f if [ 3 -gt 10 ] ; then echo \"ok\" else echo \"3>10? no\" fi # -- \u591a\u5206\u652f read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u6210\u7ee9: \" score if [ $score -ge 90 ] ; then echo \"\u4f18\u79c0\" # -- \u53ef\u4ee5\u4f18\u5316\u5224\u65ad\u6761\u4ef6 \u80fd\u8d70\u5230\u8fd9\u4e00\u6b65 score\u503c\u80af\u5b9a\u662f\u5c0f\u4e8e90\u7684 elif [ $score -ge 80 ];then elif [ $score -ge 80 ] && [ $score -lt 90 ] ; then echo \"\u826f\u597d\" elif [ $score -ge 70 ] && [ $score -lt 80 ] ; then echo \"\u4e00\u822c\" else echo \"\u5f88\u5dee\" fi [ root@localhost ~ ] # bash if1.sh 10 >3? yes 3 >10? no \u8bf7\u8f93\u5165\u60a8\u7684\u6210\u7ee9: 76 \u4e00\u822c while\u5faa\u73af \u00b6 [ root@localhost ~ ] # vim while.sh [ root@localhost ~ ] # bash while.sh \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:dc \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123456 \u8ba4\u8bc1\u5931\u8d25 \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:egon \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123 \u8ba4\u8bc1\u6210\u529f [ root@localhost ~ ] # cat while.sh #!/bin/bash while true do read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:\" username read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:\" password if [ $username = \"egon\" ] && [ $password = 123 ] ; then echo \"\u8ba4\u8bc1\u6210\u529f\" break else echo \"\u8ba4\u8bc1\u5931\u8d25\" fi done [ root@localhost ~ ] # vim while2.sh [ root@localhost ~ ] # bash while2.sh 0 1 2 [ root@localhost ~ ] # cat while2.sh #!/bin/bash count = 0 while [ $count -lt 3 ] ; do echo $count ## -- \u7b49\u540c\u4e8e count = $[ $count + 1 ] (( count++ )) done Ps: shell\u811a\u672c\u7684\u7f29\u8fdb control +v \u4e0a\u4e0b\u9009\u62e9\u7f29\u8fdb\u884c shift+i \u56db\u4e2a\u7a7a\u683c\u5148\u7f29\u8fdb\u7b2c\u4e00\u884c \u4e24\u4e0besc\u5b9e\u73b0\u9009\u62e9\u7684\u884c\u5168\u90e8\u7f29\u8fdb.. for\u5faa\u73af \u00b6 [ root@localhost ~ ] # seq 1 3 1 2 3 [ root@localhost ~ ] # vim for.sh [ root@localhost ~ ] # cat for.sh #!/bin/bash # -- \u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26,\u4f9d\u6b21\u8bfb1 2 3 4 5\u8d4b\u503c\u7ed9\u53d8\u91cfi # -- \u7b49\u540c\u4e8e for i in `seq 1 5` # -- \u7b49\u540c\u4e8e for i in {1..5} for i in 1 2 3 4 5 do # -- \u5f53i\u7684\u503c\u4e3a4\u65f6,\u901a\u8fc7break\u8df3\u51fa\u5faa\u73af if [ $i -eq 4 ] ; then break fi echo $i done for i in ` ls /root | grep .sh ` do echo $i done [ root@localhost ~ ] # bash for.sh 1 2 3 for .sh \u7ec3\u4e60 \u00b6 \u6848\u4f8b1: \u521b\u5efacheck_network.sh\u68c0\u6d4b\u662f\u5426\u80fd\u8fde\u901a\u67d0\u4e2aIP \"\"\" #!/bin/bash ping -c 5 www.baidu.com &> /dev/null if [ $? -eq 0 ];then echo \" network ok \" else echo \" network error \" fi \"\"\" [ root@localhost ~ ] # vim check_network.sh [ root@localhost ~ ] # bash check_network.sh network ok \u6848\u4f8b2: \u68c0\u6d4b\u540c\u7f51\u6bb5\u54ea\u4e9bIP\u80fdping\u901a(\u5e76\u53d1) #!/bin/bash for i in { 3 ..254 } do # -- \u6b64\u65b9\u6848,\u4e00\u6761\u6761\u7684\u68c0\u6d4b\u592a\u6162\u4e86!!! # ping -c 1 172.16.150.$i &> /dev/null # if [ $? -eq 0 ];then # echo \"172.16.150.$i up\" # -- \u6ce8\u610f,\u82e5\u7528\u5355\u5f15\u53f7,$\u5c31\u6ca1\u6709\u53d6\u503c\u4e4b\u610f\u5566 # else # echo \"172.16.150.$i down\" # fi # -- \u77ac\u95f4200\u591a\u6761ping\u547d\u4ee4\u5168\u90e8\u63d0\u4ea4\u5230\u540e\u53f0,\u5b9e\u73b0\u5e76\u53d1\u8fd0\u884c # -- \u7b49\u540c\u4e8e ping -c 1 172.16.150.$i &> /dev/null && echo \"172.16.150.$i up\" >> /tmp/ip.log || echo \"172.16.150.$i down\" >> /tmp/ip.log & ( ping -c 1 172 .16.150. $i & > /dev/null if [ $? -eq 0 ] ; then echo \"172.16.150. $i up\" >> /tmp/ip.log else echo \"172.16.150. $i down\" >> /tmp/ip.log fi ) & done","title":"shell\u57fa\u7840"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#shell","text":"shell\u662f\u4e00\u95e8\u52a8\u6001\u3001\u5f31\u7c7b\u578b\u3001\u89e3\u91ca\u578b\u7684\u8bed\u8a00","title":"shell\u4ecb\u7ecd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_1","text":"\u547d\u4ee4 shell\u89e3\u91ca\u5668 ( \u8fdb\u4e00\u6b65\u5c01\u88c5\u6210\u547d\u4ee4 ) \u7cfb\u7edf\u8c03\u7528\u63a5\u53e3 ( \u662f\u5bf9OS\u5185\u6838\u7684\u5c01\u88c5 ) OS\u5185\u6838 \u786c\u4ef6","title":"\u8ba1\u7b97\u673a\u4f53\u7cfb\u67b6\u6784"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#shell_1","text":"\u524d\u63d0: \u5f53\u524d\u7528\u6237\u9700\u8981\u5bf9\u811a\u672c\u6587\u4ef6\u62e5\u6709r\u548cx\u6743\u9650 \u6267\u884c\u7684\u4e24\u79cd\u65b9\u5f0f: \u5728a.sh\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u4e0b -- ` bash a.sh ` \u4efb\u4e00\u76ee\u5f55\u4e0b -- ` /root/a.sh ` \u73b0\u5728\u7528\u7684shell\u89e3\u91ca\u5668\u90fd\u662fBash,\u4e00\u4e2ashell\u811a\u672c\u8fd0\u884c\u7684\u4e09\u4e2a\u6b65\u9aa4: 1 > \u5148\u542f\u52a8bash\u89e3\u91ca\u5668 2 > bash\u89e3\u91ca\u5668\u4f1a\u628aa.sh\u7684\u5185\u5bb9\u4ece\u786c\u76d8\u8bfb\u5165\u5185\u5b58 3 > bash\u89e3\u91ca\u5668\u540e\u8bc6\u522b\u521a\u521a\u8bfb\u5165\u5185\u5b58\u4e2d\u7684\u5185\u5bb9,\u5e76\u9010\u884c\u89e3\u91ca\u6267\u884cshell\u4ee3\u7801. Ps: \u50cf\u540c\u4e3a\u89e3\u91ca\u578b\u8bed\u8a00\u7684python,\u5e95\u5c42\u5e76\u53d1\u7684\u7279\u6027\u3001\u5b57\u7b26\u7f16\u7801\u7684\u95ee\u9898\u90fd\u4e0e\u8fd9\u4e09\u4e2a\u6b65\u9aa4\u6709\u5173.","title":"shell\u811a\u672c\u8fd0\u884c\u6b65\u9aa4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_2","text":"\u5b9a\u4e49 \u53d8\u91cf: height=172 \u8bbf\u95ee \u53d8\u91cf: echo $height echo ${height} (\u63a8\u8350) \u4fee\u6539 \u53d8\u91cf: height=180 \u5220\u9664 \u53d8\u91cf: unset height \u53d8\u91cf\u503c\u7684 \u7c7b\u578b : \u6574\u578b\u3001\u6d6e\u70b9\u578b\u3001\u5b57\u7b26\u4e32 \u7528\u6765\u5199shell\u811a\u672c,\u8fd9\u4e09\u513f\u5c31\u591f\u7528\u4e86.. \u5f15\u53f7\u5bf9\u53d8\u91cf\u7684\u5f71\u54cd \u53cc\u5f15\u53f7\u3001 \u5355\u5f15\u53f7 : \u90fd\u53ef\u7528\u4e8e\u5b9a\u4e49\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u53d8\u91cf.. \u5728python\u91cc\u6ca1\u533a\u522b,\u5728shell\u91cc\u5355\u5f15\u53f7\u5b9a\u4e49\u7684\u53eb\u505a\u786c\u5f15\u7528.. \u786c\u5f15\u7528 \u662f\u6307\u5c06\u5f15\u53f7\u5305\u88f9\u7684\u7279\u6b8a\u5b57\u7b26\u90fd\u5f53\u4f5c\u662f\u666e\u901a\u5b57\u7b26.. x=\"\\$123\" \u7b49\u540c\u4e8e y='$123' \u53cd\u5f15\u53f7: \u53d6\u67d0\u6761\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c touch `date \"+%F\"`.txt \u7b49\u540c\u4e8e touch $(date \"+%F\").txt \u53cd\u5f15\u53f7\u4e0d\u80fd\u5d4c\u5957, $()\u53ef\u4ee5... \u7cfb\u7edf\u53d8\u91cf : PS1 \u6307\u7684\u5c31\u662f[root@localhost ~] HOSTNAME \u5185\u7f6e\u4e3b\u673a\u540d\u7684\u540d\u5b57 USER \u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u540d ... ... ... \"\"\" shell\u91cc\u5b9a\u4e49\u53d8\u91cf,\u8d4b\u503c\u7b26\u53f7\u201c=\u201d\u4e24\u8fb9\u4e0d\u80fd\u6709\u7a7a\u683c;python\u5efa\u8bae\u6709\u7a7a\u683cHhh \"\"\" [ root@localhost ~ ] # height=172 ## -- \u5b9a\u4e49 [ root@localhost ~ ] # echo $height ## -- \u8bbf\u95ee/\u53d6\u503c 172 [ root@localhost ~ ] # height=180 ## -- \u4fee\u6539 [ root@localhost ~ ] # echo $height 180 [ root@localhost ~ ] # echo ${height}cm ## -- \u5efa\u8bae\u7528{}\u5c06\u8981\u8bbf\u95ee\u7684\u53d8\u91cf\u5305\u88f9\u8d77\u6765 180cm [ root@localhost ~ ] # touch `date \"+%F\"`.txt [ root@localhost ~ ] # ll 2022-08-29.txt -rw-r--r-- 1 root root 0 8\u6708 29 20 :55 2022 -08-29.txt [ root@localhost ~ ] # touch $(date \"+%F\").bak [ root@localhost ~ ] # ll 2022-08-29.bak -rw-r--r-- 1 root root 0 8\u6708 29 20 :57 2022 -08-29.bak","title":"\u53d8\u91cf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_3","text":"\u53d8\u91cf\u4f5c\u7528\u57df\u5373\u53d8\u91cf\u7684\u751f\u6548\u8303\u56f4","title":"\u53d8\u91cf\u4f5c\u7528\u57df"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_4","text":"\u5168\u5c40\u53d8\u91cf\u53ea\u5728\u5f53\u524dshell\u8fdb\u7a0b(\u4e0d\u5305\u542b\u8be5\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b)\u91cc\u751f\u6548!!! [ root@localhost ~ ] # x=1000 [ root@localhost ~ ] # echo $x 1000 [ root@localhost ~ ] # echo $y ## -- bash\u8fdb\u7a0b\u4e2d\u4e00\u5f00\u59cb\u662f\u6ca1\u6709\u53d8\u91cfy\u7684\u5b58\u5728\u7684 [ root@localhost ~ ] # vim b.sh [ root@localhost ~ ] # cat b.sh echo $x y = 10000 [ root@localhost ~ ] # bash b.sh ## -- \u8d77\u4e86\u4e2a\u65b0\u7684bash\u8fdb\u7a0b,\u6587\u4ef6\u91cc\u9762\u7684\u4ee3\u7801\u5728\u65b0\u7ec8\u7aef\u91cc\u8fd0\u884c [ root@localhost ~ ] # chmod u+x b.sh [ root@localhost ~ ] # ./b.sh ## -- \u5f00\u8d77\u4e86\u4e00\u4e2a\u5b50shell\u8fdb\u7a0b,\u5728\u65b0\u7684\u8fdb\u7a0b\u91cc\u6267\u884c\u7684 [ root@localhost ~ ] # source b.sh ## -- source\u76f8\u5f53\u4e8e\u5c06\u6587\u4ef6\u4e2d\u7684\u4e24\u884c\u4ee3\u7801\u62ff\u51fa\u6765\u5728\u5f53\u524d\u7ec8\u7aef\u8fd0\u884c 1000 [ root@localhost ~ ] # echo $y ## -- so,\u53ef\u4ee5\u8bbf\u95ee\u5230y\u7684\u503c 10000 [ root@localhost ~ ] # bash ## -- \u8fdb\u5165\u4e00\u4e2a\u65b0\u7ec8\u7aef [ root@localhost ~ ] # echo $y [ root@localhost ~ ] # exit exit [ root@localhost ~ ] # echo $y 10000","title":"\u5168\u5c40\u53d8\u91cf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#export","text":"\u901a\u8fc7 export \u53d8\u91cf ,\u53ef\u4ee5\u5c06\u6b64\u53d8\u91cf\u7ee7\u627f\u5230\u5b50\u5b50\u5b59\u5b59... \u8ddf 9_\u6743\u9650\u7ba1\u7406\u4e4bsu\u4e0esudo.md\u4e2d \u914d\u7f6e\u6587\u4ef6\u7684\u5999\u7528 \u90a3\u90e8\u5206\u7684\u77e5\u8bc6\u70b9\u53ef\u4ee5\u547c\u5e94\u8d77\u6765.. \"\"\" x\u53d8\u91cf \u7b2c\u4e00\u5c42 111 \u7b2c\u4e8c\u5c42 222 \u7b2c\u4e09\u5c42 333 \u6709\u5c31\u7528\u81ea\u5df1\u7684,\u6ca1\u6709\u5219\u7ee7\u627f\u6700\u8fd1\u7684\u7236\u7c7b\u7684x\u503c; exit\u9000\u51fa\u672c\u5c42\u5230\u4e0a\u4e00\u5c42,\u67e5\u770bx\u53d8\u91cf\u7684\u503c,\u4e5f\u662f\u4ee5\u672c\u5c42\u6709\u6ca1\u6709,\u6ca1\u6709\u518d\u5f80\u4e0a\u5c42\u770b\u7684\u903b\u8f91\u67e5\u770b.. \u4e0d\u4f1a\u8bf4,\u7b2c\u4e09\u5c42\u7684x\u503c\u53d8\u4e3a333,\u7b2c\u4e00\u5c42\u7b2c\u4e8c\u5c42\u7684\u503c\u90fd\u53d8\u4e3a\u4e86333.. \"\"\" [ root@localhost ~ ] # x=111 [ root@localhost ~ ] # export x [ root@localhost ~ ] # bash [ root@localhost ~ ] # echo $x 111 [ root@localhost ~ ] # x=222 [ root@localhost ~ ] # bash [ root@localhost ~ ] # echo $x 222 [ root@localhost ~ ] # x=333 [ root@localhost ~ ] # exit exit [ root@localhost ~ ] # echo $x 222 [ root@localhost ~ ] # exit exit [ root@localhost ~ ] # echo $x 111","title":"export"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_5","text":"","title":"\u5143\u5b57\u7b26"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_6","text":"$[ ] \u7b49\u540c\u4e8e $(( )) \u53ea\u652f\u6301\u6574\u6570\u7684\u52a0\u51cf\u4e58\u9664\u53d6\u4f59+-*/%\u8fd0\u7b97,\u4e0d\u80fd\u505a\u6d6e\u70b9\u6570\u7684 x = 10 y = 20 z = $ [ $x + $y ] z = $(( $x + $y )) z = $ [ $x / $y ] z = $(( $x + $y )) ## -- \u503c\u4e3a0 z = $ [ 10 + 20 ] z = $(( 10 + 20 )) ## -- \u53ef\u4ee5\u76f4\u63a5\u5199\u503c bc\u8f6f\u4ef6\u5305 \"\"\" \u6d6e\u70b9\u6570\u7684\u8fd0\u7b97\u9700\u8981\u501f\u52a9bc\u8f6f\u4ef6\u5305 yum install bc -y \"\"\" ## -- scale\u6307\u5b9a\u4fdd\u7559\u51e0\u4f4d\u5c0f\u6570 \u4e0d\u4f1a\u56db\u820d\u4e94\u5165 [ root@localhost ~ ] # echo \"scale=2;10/3\"|bc 3 .33 ## -- \u6709\u4e2a\u5f0a\u7aef,.33\u5728\u505a\u8fd0\u7b97\u65f6,\u4e0d\u4f1a\u8bc6\u522b\u62100.33 [ root@localhost ~ ] # res=`echo \"scale=2;1/3\"|bc` [ root@localhost ~ ] # echo $res .33 [ root@localhost ~ ] # echo $[ $res * 100 ] -bash: .33 * 100 : \u8bed\u6cd5\u9519\u8bef: \u671f\u5f85\u64cd\u4f5c\u6570 \uff08\u9519\u8bef\u7b26\u53f7\u662f \".33 * 100 \" \uff09 ## -- \u89e3\u51b3: \u501f\u52a9cut\u505a\u5206\u5272\u5904\u7406 ## echo $(echo \"scale=2;1/3\"|bc|cut -d. -f2)% [ root@localhost ~ ] # echo `echo \"scale=2;1/3\"|bc|cut -d. -f2`% 33 % \u7ec3\u4e60:\u8ba1\u7b97\u5185\u5b58\u7684\u53ef\u7528\u7387(\u767e\u5206\u6bd4) [ root@localhost ~ ] # free total used free shared buff/cache available Mem: 995640 169672 522184 8192 303784 676212 Swap: 2097148 0 2097148 # awk\u9ed8\u8ba4\u7a7a\u683c\u5206\u5272,NR\u6307\u5b9a\u7b2c2\u884c [ root@localhost ~ ] # avail=$(free | awk 'NR==2{print $7}') [ root@localhost ~ ] # total=$(free | awk 'NR==2{print $2}') [ root@localhost ~ ] # echo $avail $total 675564 995640 [ root@localhost ~ ] # per=`echo \"scale=2;$avail/$total\"|bc|cut -d. -f2` [ root@localhost ~ ] # echo ${per}% 67 %","title":"\\([ ]\u3001\\)(( ))"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_7","text":"sed\u3001grep\u3001awk\u6587\u4ef6\u5904\u7406\u4e09\u5251\u5ba2\u8fd9\u4e09\u4e2a\u547d\u4ee4\u5de5\u5177\u662f\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4f7f\u7528\u7684!! \u5176\u4f59\u7684\u547d\u4ee4\u6682\u4e14\u53ea\u80fd\u4f7f\u7528\u5143\u5b57\u7b26\uff01 \u5143\u5b57\u7b26 \u542b\u4e49 ~ \u5bb6\u76ee\u5f55 `` \u53d6\u547d\u4ee4\u8fd0\u884c\u7ed3\u679c,\u4e0d\u53ef\u5d4c\u5957 $() \u53d6\u547d\u4ee4\u8fd0\u884c\u7ed3\u679c,\u53ef\u4ee5\u5d4c\u5957 $(()) \u6216\u8005 $[] \u91cc\u9762\u53ef\u4ee5\u505a\u6574\u6570\u8fd0\u7b97 ${} \u754c\u5b9a\u8fb9\u754c,\u5305\u542b touch {1..6}{d,e,f}.txt 6*3=18\u79cd\u53ef\u80fd $? \u4e0a\u4e00\u6761\u547d\u4ee4\u662f\u5426\u8fd0\u884c\u6210\u529f,\u503c\u4e3a0\u6210\u529f,\u975e0\u5931\u8d25.. () \u62ec\u53f7\u91cc\u5199\u547d\u4ee4,\u4ee3\u8868\u5728\u5b50shell\u4e2d\u63d0\u4ea4\u4efb\u52a1 \uff1f \u4ee3\u8868\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26,\u4e0d\u80fd\u6307\u5b9a ll /test/?.txt [] \u53d6\u5176\u4e2d\u4efb\u4e00\u4e00\u4e2a\u5b57\u7b26 \u4e5f\u53ef\u4ee5\u505a\u6d4b\u8bd5\u7528(\u7ed3\u5408$?\u4f7f\u7528), test\u547d\u4ee4 ! \u6216\u8005 ^ \u53d6\u53cd,\u5728[]\u53f7\u91cc\u4f7f\u7528 - \u4ee3\u8868\u8303\u56f4 & \u653e\u5728\u547d\u4ee4\u672b\u5c3e\u610f\u5473\u7740\u547d\u4ee4\u540e\u53f0\u8fd0\u884c; && \u5e76\u4e14 \u7c7b\u4f3c\u4e8eand \u540c\u771f\u4e3a\u771f(\u627e\u9519\u7684 \u9047\u9519\u5219\u505c) || \u6216\u8005 \u7c7b\u4f3c\u4e8eor \u6709\u771f\u4e3a\u771f(\u627e\u5bf9\u7684 \u9047\u5bf9\u5219\u505c) ; \u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u6267\u884c,\u54ea\u6015\u4e2d\u9014\u5931\u8d25,\u540e\u9762\u7684\u7167\u5e38\u8fd0\u884c * \u4ee3\u8868\u6240\u6709 = \u8d4b\u503c == \u5224\u65ad\u503c\u662f\u5426\u76f8\u7b49 \\ \u8f6c\u4e49 : \u8fd9\u4e5f\u662f\u4e2a\u547d\u4ee4,\u8ddftrue\u4e00\u6837 \u8fd0\u884c\u7ed3\u679c\u6c38\u8fdc\u4e3a\u771f [ !12 ][ ^21 ] .txt ## -- \u6587\u4ef6\u540d\u7531\u4e24\u4e2a\u5b57\u7b26\u7ec4\u6210,\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0d\u662f1\u548c2,\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e0d\u662f2\u548c1,\u5e76\u4ee5.txt\u7ed3\u5c3e\u7684\u6587\u4ef6 [ 0 -9a-z ] .txt ## -- 0-9,a-z\u4e2d\u4efb\u4e00\u5b57\u7b26 echooo 123 && pwd ## &&\u5de6\u8fb9\u547d\u4ee4\u51fa\u9519,&&\u53f3\u8fb9\u547d\u4ee4\u662f\u4e0d\u4f1a\u8fd0\u884c\u7684 echooo 123 || pwd ## ||\u5de6\u8fb9\u547d\u4ee4\u5931\u8d25,&&\u53f3\u8fb9\u547d\u4ee4\u662f\u4f1a\u8fd0\u884c\u7684 [ root@localhost ~ ] # : [ root@localhost ~ ] # echo $? 0 [ root@localhost ~ ] # true [ root@localhost ~ ] # echo $? 0","title":"\u5176\u4ed6\u5143\u5b57\u7b26"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_8","text":"\u25b2 \u5b57\u7b26\u4e32\u7684\u5224\u65ad ## -- [ \"egon\" = \"123\" ] \u6ce8\u610f:\u9519\u4e86\u4e5f\u4e0d\u4f1a\u6709\u63d0\u793a\u4fe1\u606f\u7684 [ root@localhost ~ ] # name=\"egon\" [ root@localhost ~ ] # [ $name = \"egon111\" ] ## -- \u8bb0\u5f97\u91cc\u9762\u7684\u7a7a\u683c [ root@localhost ~ ] # echo $? ## -- $?\u8868\u660e\u4e0a\u4e00\u6761\u547d\u4ee4\u662f\u5426\u8fd0\u884c\u6210\u529f 0\u4e3a\u6210\u529f,\u975e0\u5931\u8d25 1 [ root@localhost ~ ] # [ $name = \"egon\" ] [ root@localhost ~ ] # echo $? 0 [ root@localhost ~ ] # [ $name != \"egon111\" ] [ root@localhost ~ ] # echo $? 0 [ root@localhost ~ ] # [ \"aa\" != \"aa\" ] && echo \"ok\" || echo \"no\" no [ root@localhost ~ ] # [ \"aa\" = \"aa\" ] && echo \"ok\" || echo \"no\" ok \u25b2 \u6570\u5b57\u7684\u5224\u65ad -eq \u7b49\u4e8e -gt \u5927\u4e8e> -ge \u5927\u4e8e\u7b49\u4e8e> = -lt \u5c0f\u4e8e -le \u5c0f\u4e8e\u7b49\u4e8e -ne \u4e0d\u7b49\u4e8e [ root@localhost ~ ] # [ 3 -lt 5 ] [ root@localhost ~ ] # echo $? 0 \u25b2 \u6587\u4ef6\u7684\u5224\u65ad -f \u5b58\u5728\u5e76\u4e14\u5f97\u662f\u4e2a\u6807\u51c6\u6587\u4ef6 -e \u6587\u4ef6\u5b58\u5728,\u4e0d\u7ba1\u7c7b\u578b [ root@localhost ~ ] # [ -f /root/a.sh ] [ root@localhost ~ ] # echo $? 0 \u7ec3\u4e60:\u767b\u5f55\u811a\u672c [ root@localhost ~ ] # vim login.sh [ root@localhost ~ ] # cat login.sh #!/bin/bash read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:\" username read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:\" password ## -- \u5bf9 && \u8fd0\u884c ; \u9519 && \u4e0d\u8fd0\u884c ; \u5bf9 || \u4e0d\u8fd0\u884c ; \u9519 || \u8fd0\u884c [ $username = \"egon\" ] && [ $password = 123 ] && echo \"\u8ba4\u8bc1\u6210\u529f\" || echo \"\u8ba4\u8bc1\u5931\u8d25\" [ root@localhost ~ ] # bash login.sh \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:egon \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123 \u8ba4\u8bc1\u6210\u529f [ root@localhost ~ ] # bash login.sh \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:dc \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123 \u8ba4\u8bc1\u5931\u8d25","title":"\u6761\u4ef6\u6d4b\u8bd5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_9","text":"","title":"\u6d41\u7a0b\u63a7\u5236"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#if","text":"\u547d\u4ee41 \u547d\u4ee42 if \u6761\u4ef61;then \u4ee3\u7801 elif \u6761\u4ef62;then \u4ee3\u7801 elif \u6761\u4ef63;then \u4ee3\u7801 else \u4ee3\u7801 fi \u547d\u4ee43 [ root@localhost ~ ] # vim if1.sh [ root@localhost ~ ] # cat if1.sh #!/bin/bash # -- \u5355\u5206\u652f if [ 10 -gt 3 ] ; then echo \"10>3? yes\" fi # -- \u53cc\u5206\u652f if [ 3 -gt 10 ] ; then echo \"ok\" else echo \"3>10? no\" fi # -- \u591a\u5206\u652f read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u6210\u7ee9: \" score if [ $score -ge 90 ] ; then echo \"\u4f18\u79c0\" # -- \u53ef\u4ee5\u4f18\u5316\u5224\u65ad\u6761\u4ef6 \u80fd\u8d70\u5230\u8fd9\u4e00\u6b65 score\u503c\u80af\u5b9a\u662f\u5c0f\u4e8e90\u7684 elif [ $score -ge 80 ];then elif [ $score -ge 80 ] && [ $score -lt 90 ] ; then echo \"\u826f\u597d\" elif [ $score -ge 70 ] && [ $score -lt 80 ] ; then echo \"\u4e00\u822c\" else echo \"\u5f88\u5dee\" fi [ root@localhost ~ ] # bash if1.sh 10 >3? yes 3 >10? no \u8bf7\u8f93\u5165\u60a8\u7684\u6210\u7ee9: 76 \u4e00\u822c","title":"if\u5224\u65ad"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#while","text":"[ root@localhost ~ ] # vim while.sh [ root@localhost ~ ] # bash while.sh \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:dc \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123456 \u8ba4\u8bc1\u5931\u8d25 \u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:egon \u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:123 \u8ba4\u8bc1\u6210\u529f [ root@localhost ~ ] # cat while.sh #!/bin/bash while true do read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d:\" username read -p \"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801:\" password if [ $username = \"egon\" ] && [ $password = 123 ] ; then echo \"\u8ba4\u8bc1\u6210\u529f\" break else echo \"\u8ba4\u8bc1\u5931\u8d25\" fi done [ root@localhost ~ ] # vim while2.sh [ root@localhost ~ ] # bash while2.sh 0 1 2 [ root@localhost ~ ] # cat while2.sh #!/bin/bash count = 0 while [ $count -lt 3 ] ; do echo $count ## -- \u7b49\u540c\u4e8e count = $[ $count + 1 ] (( count++ )) done Ps: shell\u811a\u672c\u7684\u7f29\u8fdb control +v \u4e0a\u4e0b\u9009\u62e9\u7f29\u8fdb\u884c shift+i \u56db\u4e2a\u7a7a\u683c\u5148\u7f29\u8fdb\u7b2c\u4e00\u884c \u4e24\u4e0besc\u5b9e\u73b0\u9009\u62e9\u7684\u884c\u5168\u90e8\u7f29\u8fdb..","title":"while\u5faa\u73af"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#for","text":"[ root@localhost ~ ] # seq 1 3 1 2 3 [ root@localhost ~ ] # vim for.sh [ root@localhost ~ ] # cat for.sh #!/bin/bash # -- \u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26,\u4f9d\u6b21\u8bfb1 2 3 4 5\u8d4b\u503c\u7ed9\u53d8\u91cfi # -- \u7b49\u540c\u4e8e for i in `seq 1 5` # -- \u7b49\u540c\u4e8e for i in {1..5} for i in 1 2 3 4 5 do # -- \u5f53i\u7684\u503c\u4e3a4\u65f6,\u901a\u8fc7break\u8df3\u51fa\u5faa\u73af if [ $i -eq 4 ] ; then break fi echo $i done for i in ` ls /root | grep .sh ` do echo $i done [ root@localhost ~ ] # bash for.sh 1 2 3 for .sh","title":"for\u5faa\u73af"},{"location":"1_linux%E5%9F%BA%E7%A1%80/17_shell%E5%9F%BA%E7%A1%80/#_10","text":"\u6848\u4f8b1: \u521b\u5efacheck_network.sh\u68c0\u6d4b\u662f\u5426\u80fd\u8fde\u901a\u67d0\u4e2aIP \"\"\" #!/bin/bash ping -c 5 www.baidu.com &> /dev/null if [ $? -eq 0 ];then echo \" network ok \" else echo \" network error \" fi \"\"\" [ root@localhost ~ ] # vim check_network.sh [ root@localhost ~ ] # bash check_network.sh network ok \u6848\u4f8b2: \u68c0\u6d4b\u540c\u7f51\u6bb5\u54ea\u4e9bIP\u80fdping\u901a(\u5e76\u53d1) #!/bin/bash for i in { 3 ..254 } do # -- \u6b64\u65b9\u6848,\u4e00\u6761\u6761\u7684\u68c0\u6d4b\u592a\u6162\u4e86!!! # ping -c 1 172.16.150.$i &> /dev/null # if [ $? -eq 0 ];then # echo \"172.16.150.$i up\" # -- \u6ce8\u610f,\u82e5\u7528\u5355\u5f15\u53f7,$\u5c31\u6ca1\u6709\u53d6\u503c\u4e4b\u610f\u5566 # else # echo \"172.16.150.$i down\" # fi # -- \u77ac\u95f4200\u591a\u6761ping\u547d\u4ee4\u5168\u90e8\u63d0\u4ea4\u5230\u540e\u53f0,\u5b9e\u73b0\u5e76\u53d1\u8fd0\u884c # -- \u7b49\u540c\u4e8e ping -c 1 172.16.150.$i &> /dev/null && echo \"172.16.150.$i up\" >> /tmp/ip.log || echo \"172.16.150.$i down\" >> /tmp/ip.log & ( ping -c 1 172 .16.150. $i & > /dev/null if [ $? -eq 0 ] ; then echo \"172.16.150. $i up\" >> /tmp/ip.log else echo \"172.16.150. $i down\" >> /tmp/ip.log fi ) & done","title":"\u7ec3\u4e60"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/","text":"Crond\u7b80\u4ecb \u00b6 \u5b9a\u65f6\u4efb\u52a1: \u6307\u5b9a\u67d0\u4e2a\u65e5\u671f\u6216\u65f6\u95f4\u5468\u671f\u6027\u7684\u6267\u884c\u6307\u4ee4 \u53c2\u8003\u6587\u6863\u94fe\u63a5: https://zhuanlan.zhihu.com/p/338375307 Crond\u662fLinux\u7cfb\u7edf\u4e2d\u7528\u6765\u5b9a\u671f\u6267\u884c\u547d\u4ee4\u6216\u811a\u672c\u7684\u4e00\u79cd\u670d\u52a1\u8f6f\u4ef6, \u4e00\u822c\u60c5\u51b5\u4e0b, \u6211\u4eec\u5b89\u88c5\u5b8cCentOS\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u540e, \u9ed8\u8ba4\u4fbf\u4f1a\u542f\u52a8Crond\u4efb\u52a1\u8c03\u5ea6\u670d\u52a1... Crond\u670d\u52a1\u4f1a\u5b9a\u671f(\u9ed8\u8ba4\u6bcf\u5206\u949f\u68c0\u67e5\u4e00\u6b21)\u68c0\u67e5\u7cfb\u7edf\u4e2d\u662f\u5426\u6709\u8981\u6267\u884c\u7684\u4efb\u52a1\u5de5\u4f5c, \u82e5\u6709, \u4fbf\u4f1a\u6839\u636e\u5176\u9884\u5148\u8bbe\u5b9a\u7684\u5b9a\u65f6\u4efb\u52a1\u89c4\u5219\u81ea\u52a8\u6267\u884c\u8be5\u5b9a\u65f6\u4efb\u52a1\u5de5\u4f5c... [ root@localhost ~ ] # ps -ef | grep crond | grep -v grep root 1081 1 0 09 :03 ? 00 :00:00 /usr/sbin/crond -n Crond\u4f7f\u7528\u573a\u666f \u00b6 \u5b9a\u671f\u5907\u4efd\u6570\u636e, \u5b9a\u671f\u6267\u884c\u811a\u672c\u7a0b\u5e8f \u7cfb\u7edf\u7ea7\u522b\u7684\u5b9a\u65f6\u4efb\u52a1 \u4e34\u65f6\u6587\u4ef6\u6e05\u7406\u4f8b/tmp\u548c/var/tmp\u7b49\u3001\u7cfb\u7edf\u4fe1\u606f\u91c7\u96c6\u3001\u65e5\u5fd7\u6587\u4ef6\u5207\u5272 \u7528\u6237\u7ea7\u522b\u7684\u5b9a\u65f6\u4efb\u52a1 \u5b9a\u65f6\u5411\u4e92\u8054\u7f51\u540c\u6b65\u65f6\u95f4\u3001\u5b9a\u65f6\u5907\u4efd\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u3001\u5b9a\u65f6\u5907\u4efd\u6570\u636e\u5e93\u7684\u6570\u636e #!bin/bash mem_total = ` free -m | awk 'NR==2 {print $2}' ` mem_used = ` free -m | awk 'NR==2 {print $3}' ` mem_free = ` free -m | awk 'NR==2 {print $4}' ` mem_percent = ` free -m | awk 'NR==2 {printf \"%.2f%\\n\", ($3/$2)*100}' ` echo \"---- mem check info ----\" echo \"\u603b\u5185\u5b58(M): $mem_total \" echo \"\u5df2\u4f7f\u7528(M): $mem_used \" echo \"\u5269\u4f59\u91cf(M): $mem_free \" echo \"\u4f7f\u7528\u7387: $mem_percent \" [ root@localhost ~ ] # bash mem_check.sh ---- mem check info ---- \u603b\u5185\u5b58 ( M ) : 972 \u5df2\u4f7f\u7528 ( M ) : 208 \u5269\u4f59\u91cf ( M ) : 425 \u4f7f\u7528\u7387: 21 .40% # -- \u4eca\u5929\u5907\u4efd\u6628\u5929\u7684 cp /var/log/messages /var/log/messages- $( date +%Y%m%d -d '-1 day' ) \u5b9a\u65f6\u4efb\u52a1\u7ba1\u7406 \u00b6 /etc/crontab \u00b6 \u5206\u949f \u5c0f\u65f6 \u65e5 \u6708 \u5468 * \u8868\u793a\u4efb\u610f\u7684(\u5206\u65f6\u65e5\u6708\u5468)\u90fd\u4f1a\u8fd0\u884c - \u8868\u793a\u4e00\u4e2a\u65f6\u95f4\u8303\u56f4, eg 5-7\u70b9 , \u8868\u793a\u5206\u9694\u65f6\u6bb5, \u59826,0,4\u8868\u793a\u5468\u516d\u3001\u65e5\u3001\u56db /1 \u8868\u793a\u6bcf\u9694n\u5355\u4f4d\u65f6\u95f4, \u5982*/10 \u6bcf10\u5206\u949f [ root@localhost ~ ] # cat /etc/crontab SHELL = /bin/bash PATH = /sbin:/bin:/usr/sbin:/usr/bin MAILTO = root # For details see man 4 crontabs # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed \u53ef\u4ee5\u5728\u6b64\u6587\u4ef6\u91cc\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1,\u4ea6\u53ef\u4ee5crontab -e \u521b\u5efa\u5b9a\u65f6\u4efb\u52a1 * * * * * echo \"hello world\" >> /tmp/1.txt # -- \u6bcf\u5206\u949f\u5f801.txt\u6587\u4ef6\u5199\u5165\u4e00\u6b21\"hello world\" \u7f16\u5199\u4e3e\u4f8b \u00b6 \u5206\u949f \u5c0f\u65f6 \u65e5 \u6708 \u5468 00 02 * * * ## -- \u6bcf\u5929\u7684\u51cc\u66682\u70b9\u6574\u6267\u884c 00 02 1 * * ## -- \u6bcf\u6708\u76841\u65e5\u7684\u51cc\u66682\u70b9\u6574\u6267\u884c 00 02 14 2 * ## -- \u6bcf\u5e74\u76842\u670814\u65e5\u51cc\u66682\u70b9\u6267\u884c 00 02 * * 7 ## -- \u6bcf\u5468\u5929\u7684\u51cc\u66682\u70b9\u6574\u6267\u884c 00 02 * 6 5 ## -- \u6bcf\u5e74\u76846\u6708\u5468\u4e94\u51cc\u66682\u70b9\u6267\u884c 00 02 14 * 7 ## -- \u6bcf\u670814\u65e5\u6216\u6bcf\u5468\u65e5\u7684\u51cc\u66682\u70b9\u90fd\u6267\u884c 00 02 14 2 7 ## -- \u6bcf\u5e74\u76842\u670814\u65e5\u6216\u6bcf\u5e742\u6708\u7684\u5468\u5929\u7684\u51cc\u66682\u70b9\u6267\u884c */10 02 * * * ## -- \u6bcf\u5929\u51cc\u66682\u70b9,\u6bcf\u969410\u5206\u949f\u6267\u884c\u4e00\u6b21 * * * * * ## -- \u6bcf\u5206\u949f\u90fd\u6267\u884c 00 00 14 2 * ## -- \u6bcf\u5e742\u670814\u65e5\u7684\u51cc\u6668\u6267\u884c\u547d\u4ee4 */5 * * * * ## -- \u6bcf\u96945\u5206\u949f\u6267\u884c\u4e00\u6b21 00 02 * 1 ,5,8 * ## -- \u6bcf\u5e74\u76841\u67085\u67088\u6708\u51cc\u66682\u70b9\u6267\u884c 00 02 1 -8 * * ## -- \u6bcf\u67081\u53f7\u52308\u53f7\u51cc\u66682\u70b9\u6267\u884c 00 21 * * * ## -- \u6bcf\u5929\u665a\u4e0a21:00\u6267\u884c 45 4 1 ,10,22 * * ## -- \u6bcf\u67081\u300110\u300122\u65e5\u76844:45\u6267\u884c 45 4 1 -10 * * ## -- \u6bcf\u67081\u523010\u65e5\u76844:45\u6267\u884c 3 ,15 8 -11 */2 * * ## -- \u6bcf\u9694\u4e24\u5929\u7684\u4e0a\u53488\u70b9\u523011\u70b9\u7684\u7b2c3\u548c\u7b2c15\u5206\u949f\u6267\u884c 0 23 -7/2 * * * ## -- \u665a\u4e0a11\u70b9\u5230\u65e9\u4e0a7\u70b9\u4e4b\u95f4,\u6bcf\u9694\u4e24\u5c0f\u65f6\u6267\u884c 15 21 * * 1 -5 ## -- \u5468\u4e00\u5230\u5468\u4e94\u6bcf\u5929\u665a\u4e0a21:15\u6267\u884c \u547d\u4ee4\u9009\u9879 \u00b6 -e \u7f16\u8f91\u5b9a\u65f6\u4efb\u52a1 -l \u67e5\u770b\u5b9a\u65f6\u4efb\u52a1 -r \u5220\u9664\u5b9a\u65f6\u4efb\u52a1 -u \u6307\u5b9a\u5176\u4ed6\u7528\u6237 [ root@localhost ~ ] # crontab -l * * * * * echo \"hello world\" >> /tmp/1.txt \u5b9a\u65f6\u4efb\u52a1\u5b9e\u8df5 \u00b6 \u25b2 \u4f7f\u7528root\u7528\u6237\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\u65f6\u95f4\u540c\u6b65. ## -- step1:\u5b89\u88c5nptdate\u5305 yum install -y ntpdate ## -- step2:\u6d4b\u8bd5\u65f6\u95f4\u540c\u6b65\u547d\u4ee4 (\u8fd4\u56de\u7ed3\u679c\u6ca1\u6709\u62a5\u9519\u5373\u53ef) [ root@localhost ~ ] # ntpdate ntp.aliyun.com 30 Aug 20 :45:19 ntpdate [ 11577 ] : adjust time server 203 .107.6.88 offset 0 .178911 sec ## -- step3:\u786e\u5b9a\u547d\u4ee4\u6240\u5728\u76ee\u5f55 \u5728 /etc/crontab\u6587\u4ef6\u7684PATH\u5b57\u6bb5\u6240\u5305\u542b\u7684\u76ee\u5f55\u4e0b ## -- \u4e0d\u5728\u7684\u8bdd,\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1\u65f6\u5019,\u53ef\u7528\u7edd\u5bf9\u8def\u5f84\u89e3\u51b3\uff01\uff01 [ root@localhost ~ ] # cat /etc/crontab | grep PATH PATH = /sbin:/bin:/usr/sbin:/usr/bin [ root@localhost ~ ] # which ntpdate /usr/sbin/ntpdate ## -- step4:\u914d\u7f6e\u5e76\u67e5\u770b\u5b9a\u65f6\u4efb\u52a1 [ root@localhost ~ ] # crontab -e crontab: installing new crontab [ root@localhost ~ ] # crontab -l # -- \u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\u65f6\u95f4\u540c\u6b65 \u6700\u597d\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 /usr/sbin/ntpdate ntp.aliyun.com */5 * * * * ntpdate ntp.aliyun.com \u25b2 \u5907\u4efd\u6848\u4f8b \u9700\u6c42: \u63d0\u524d\u51c6\u5907\u5907\u4efd\u6587\u4ef6\u76ee\u5f55,\u547d\u540d\u89c4\u5219: /backup/web01_172.16.150.131_2022-08-30 \u6253\u5305\u5907\u4efd\u6587\u4ef6: \u540d\u5b57 2022-08-30_hostname_etc.tar.gz \u9a8c\u8bc1\u6587\u4ef6\u662f\u5426\u5b8c\u6574 \u5c06\u9a8c\u8bc1\u7ed3\u679c\u53d1\u9001\u5230\u90ae\u7bb1 \u5b58\u653e\u5907\u4efd\u5185\u5bb9\u7684\u76ee\u5f55\u8981\u6c42\u53ea\u4fdd\u75593\u5929\u7684\u6570\u636e \u6bcf\u5929\u7684\u51cc\u66683\u70b950\u6267\u884c\u8be5\u5907\u4efd \u811a\u672c\u6587\u4ef6 bei.sh \u7684\u5185\u5bb9\u5982\u4e0b: #!bin/bash hostname = ` hostname ` ip = ` hostname -I | awk '{print $1}' ` date = ` date +%F ` mkdir -p /backup/ ${ hostname } _ ${ ip } _ ${ date } tar zcf /backup/ ${ hostname } _ ${ ip } _ ${ date } / ${ date } _ ${ hostname } _etc.tar.gz /etc md5sum /backup/ ${ hostname } _ ${ ip } _ ${ date } / ${ date } _ ${ hostname } _etc.tar.gz > /backup/flag.txt md5sum -c /backup/flag.txt > /backup/mail.txt # -- \u5c06\u9a8c\u8bc1\u7ed3\u679c\u53d1\u9001\u5230\u90ae\u7bb1 \u6b64\u8fc7\u7a0b\u7565. find /backup/ -type f -mtime +3 | xargs rm -rf \u5199\u5165\u5b9a\u65f6\u4efb\u52a1: crontab -e # -- \u5199\u5165\u547d\u4ee4 50 3 * * * /bin/bash ~/bei.sh \u5b9a\u65f6\u4efb\u52a1\u7f16\u5199 \u00b6 \u601d\u8def \u00b6 1 .\u624b\u52a8\u6267\u884c\u547d\u4ee4,\u7136\u540e\u4fdd\u7559\u6267\u884c\u6210\u529f\u7684\u7ed3\u679c 2 .\u7f16\u5199\u811a\u672c \u811a\u672c\u9700\u8981\u7edf\u4e00\u8def\u5f84/scripts \u811a\u672c\u5185\u5bb9\u590d\u5236\u6267\u884c\u6210\u529f\u7684\u547d\u4ee4 ( \u51cf\u5c11\u6bcf\u4e2a\u73af\u8282\u51fa\u9519\u51e0\u7387 ) \u811a\u672c\u5185\u5bb9\u5c3d\u53ef\u80fd\u7684\u4f18\u5316,\u4f7f\u7528\u4e00\u4e9b\u53d8\u91cf\u6216\u7b80\u5355\u7684\u5224\u65ad\u8bed\u53e5 \u811a\u672c\u6267\u884c\u7684\u8f93\u51fa\u4fe1\u606f\u53ef\u4ee5\u91cd\u5b9a\u5411\u81f3\u5176\u5b83\u4f4d\u7f6e\u4fdd\u7559\u6216\u5199\u5165/dev/null 3 .\u6267\u884c\u811a\u672c \u4f7f\u7528bash\u547d\u4ee4\u6267\u884c,\u9632\u6b62\u811a\u672c\u6ca1\u6709\u589e\u52a0\u6267\u884c\u6743\u9650 ( /usr/bin/bash /bin/bash ) \u6267\u884c\u811a\u672c\u6210\u529f\u540e,\u590d\u5236\u8be5\u6267\u884c\u7684\u547d\u4ee4,\u4ee5\u4fbf\u5199\u5165cron 4 .\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1 \u52a0\u4e0a\u5fc5\u8981\u7684\u6ce8\u91ca\u4fe1\u606f, \u4eba\u3001\u65f6\u95f4\u3001\u4efb\u52a1 \u8bbe\u5b9a\u5b9a\u65f6\u4efb\u52a1\u6267\u884c\u7684\u5468\u671f \u7c98\u8d34\u6267\u884c\u811a\u672c\u7684\u547d\u4ee4 ( \u4e0d\u8981\u624b\u6572 ) 5 .\u8c03\u8bd5\u5b9a\u65f6\u4efb\u52a1 \u589e\u52a0\u4efb\u52a1\u9891\u7387\u6d4b\u8bd5 \u68c0\u67e5\u73af\u5883\u53d8\u91cf\u95ee\u9898 ( \u6700\u597d\u5728\u811a\u672c\u4e2d\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u53d8\u91cfPATH ) \u68c0\u67e5crond\u670d\u52a1\u65e5\u5fd7 /var/log/cron \u6ce8\u610f\u70b9 \u00b6 1 > \u5b9a\u65f6\u4efb\u52a1\u89c4\u5219\u914d\u7f6e\u4e00\u5b9a\u8981\u52a0\u6ce8\u91ca 2 > \u5b9a\u65f6\u4efb\u52a1\u91cc\u9762\u5c3d\u91cf\u4f7f\u7528\u811a\u672c 3 > \u8fd0\u884c\u811a\u672c\u4e60\u60ef\u6027\u7684\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 \u7528\u6237\u7684\u5b9a\u65f6\u4efb\u52a1\u4e2d\u7684\u6587\u4ef6\u9ed8\u8ba4\u5b58\u653e\u5728\u5f53\u524d\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u6bd4\u5982: /bin/bash ~/bei.sh bash\u547d\u4ee4\u7528\u7684\u7edd\u5bf9\u8def\u5f84 4 > \u811a\u672c\u6216\u8005\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u5c3d\u91cf\u5c06\u6709\u7528\u7684\u5b9a\u4e49\u5230\u6307\u5b9a\u65e5\u5fd7,\u6ca1\u7528\u7684\u5b9a\u4e49\u5230\u7a7a 5 > \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8f93\u51fa \u6bd4\u5982: tar -zcvf etc.tar.gz /etc f\u9009\u9879\u4f1a\u8f93\u51fa\u6253\u5305\u7684\u8fc7\u7a0b,\u6ca1\u5fc5\u8981\u52a0\u8fd9\u4e2a\u9009\u9879 6 > \u6253\u5305\u538b\u7f29\u547d\u4ee4\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 7 > \u7cfb\u7edf\u4e0e\u547d\u4ee4\u4f4d\u7f6e\u6709\u5173\u7684\u73af\u5883\u53d8\u91cf\u95ee\u9898,\u5efa\u8bae\u811a\u672c\u4e2d\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u53d8\u91cfPATH 8 > \u5b9a\u65f6\u4efb\u52a1\u4e2ddate\u547d\u4ee4\u7684\u767e\u5206\u53f7\u9700\u8f6c\u4e49\u624d\u80fd\u4f7f\u7528","title":"crond\u8ba1\u5212\u4efb\u52a1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#crond","text":"\u5b9a\u65f6\u4efb\u52a1: \u6307\u5b9a\u67d0\u4e2a\u65e5\u671f\u6216\u65f6\u95f4\u5468\u671f\u6027\u7684\u6267\u884c\u6307\u4ee4 \u53c2\u8003\u6587\u6863\u94fe\u63a5: https://zhuanlan.zhihu.com/p/338375307 Crond\u662fLinux\u7cfb\u7edf\u4e2d\u7528\u6765\u5b9a\u671f\u6267\u884c\u547d\u4ee4\u6216\u811a\u672c\u7684\u4e00\u79cd\u670d\u52a1\u8f6f\u4ef6, \u4e00\u822c\u60c5\u51b5\u4e0b, \u6211\u4eec\u5b89\u88c5\u5b8cCentOS\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u540e, \u9ed8\u8ba4\u4fbf\u4f1a\u542f\u52a8Crond\u4efb\u52a1\u8c03\u5ea6\u670d\u52a1... Crond\u670d\u52a1\u4f1a\u5b9a\u671f(\u9ed8\u8ba4\u6bcf\u5206\u949f\u68c0\u67e5\u4e00\u6b21)\u68c0\u67e5\u7cfb\u7edf\u4e2d\u662f\u5426\u6709\u8981\u6267\u884c\u7684\u4efb\u52a1\u5de5\u4f5c, \u82e5\u6709, \u4fbf\u4f1a\u6839\u636e\u5176\u9884\u5148\u8bbe\u5b9a\u7684\u5b9a\u65f6\u4efb\u52a1\u89c4\u5219\u81ea\u52a8\u6267\u884c\u8be5\u5b9a\u65f6\u4efb\u52a1\u5de5\u4f5c... [ root@localhost ~ ] # ps -ef | grep crond | grep -v grep root 1081 1 0 09 :03 ? 00 :00:00 /usr/sbin/crond -n","title":"Crond\u7b80\u4ecb"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#crond_1","text":"\u5b9a\u671f\u5907\u4efd\u6570\u636e, \u5b9a\u671f\u6267\u884c\u811a\u672c\u7a0b\u5e8f \u7cfb\u7edf\u7ea7\u522b\u7684\u5b9a\u65f6\u4efb\u52a1 \u4e34\u65f6\u6587\u4ef6\u6e05\u7406\u4f8b/tmp\u548c/var/tmp\u7b49\u3001\u7cfb\u7edf\u4fe1\u606f\u91c7\u96c6\u3001\u65e5\u5fd7\u6587\u4ef6\u5207\u5272 \u7528\u6237\u7ea7\u522b\u7684\u5b9a\u65f6\u4efb\u52a1 \u5b9a\u65f6\u5411\u4e92\u8054\u7f51\u540c\u6b65\u65f6\u95f4\u3001\u5b9a\u65f6\u5907\u4efd\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u3001\u5b9a\u65f6\u5907\u4efd\u6570\u636e\u5e93\u7684\u6570\u636e #!bin/bash mem_total = ` free -m | awk 'NR==2 {print $2}' ` mem_used = ` free -m | awk 'NR==2 {print $3}' ` mem_free = ` free -m | awk 'NR==2 {print $4}' ` mem_percent = ` free -m | awk 'NR==2 {printf \"%.2f%\\n\", ($3/$2)*100}' ` echo \"---- mem check info ----\" echo \"\u603b\u5185\u5b58(M): $mem_total \" echo \"\u5df2\u4f7f\u7528(M): $mem_used \" echo \"\u5269\u4f59\u91cf(M): $mem_free \" echo \"\u4f7f\u7528\u7387: $mem_percent \" [ root@localhost ~ ] # bash mem_check.sh ---- mem check info ---- \u603b\u5185\u5b58 ( M ) : 972 \u5df2\u4f7f\u7528 ( M ) : 208 \u5269\u4f59\u91cf ( M ) : 425 \u4f7f\u7528\u7387: 21 .40% # -- \u4eca\u5929\u5907\u4efd\u6628\u5929\u7684 cp /var/log/messages /var/log/messages- $( date +%Y%m%d -d '-1 day' )","title":"Crond\u4f7f\u7528\u573a\u666f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_1","text":"","title":"\u5b9a\u65f6\u4efb\u52a1\u7ba1\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#etccrontab","text":"\u5206\u949f \u5c0f\u65f6 \u65e5 \u6708 \u5468 * \u8868\u793a\u4efb\u610f\u7684(\u5206\u65f6\u65e5\u6708\u5468)\u90fd\u4f1a\u8fd0\u884c - \u8868\u793a\u4e00\u4e2a\u65f6\u95f4\u8303\u56f4, eg 5-7\u70b9 , \u8868\u793a\u5206\u9694\u65f6\u6bb5, \u59826,0,4\u8868\u793a\u5468\u516d\u3001\u65e5\u3001\u56db /1 \u8868\u793a\u6bcf\u9694n\u5355\u4f4d\u65f6\u95f4, \u5982*/10 \u6bcf10\u5206\u949f [ root@localhost ~ ] # cat /etc/crontab SHELL = /bin/bash PATH = /sbin:/bin:/usr/sbin:/usr/bin MAILTO = root # For details see man 4 crontabs # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed \u53ef\u4ee5\u5728\u6b64\u6587\u4ef6\u91cc\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1,\u4ea6\u53ef\u4ee5crontab -e \u521b\u5efa\u5b9a\u65f6\u4efb\u52a1 * * * * * echo \"hello world\" >> /tmp/1.txt # -- \u6bcf\u5206\u949f\u5f801.txt\u6587\u4ef6\u5199\u5165\u4e00\u6b21\"hello world\"","title":"/etc/crontab"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_2","text":"\u5206\u949f \u5c0f\u65f6 \u65e5 \u6708 \u5468 00 02 * * * ## -- \u6bcf\u5929\u7684\u51cc\u66682\u70b9\u6574\u6267\u884c 00 02 1 * * ## -- \u6bcf\u6708\u76841\u65e5\u7684\u51cc\u66682\u70b9\u6574\u6267\u884c 00 02 14 2 * ## -- \u6bcf\u5e74\u76842\u670814\u65e5\u51cc\u66682\u70b9\u6267\u884c 00 02 * * 7 ## -- \u6bcf\u5468\u5929\u7684\u51cc\u66682\u70b9\u6574\u6267\u884c 00 02 * 6 5 ## -- \u6bcf\u5e74\u76846\u6708\u5468\u4e94\u51cc\u66682\u70b9\u6267\u884c 00 02 14 * 7 ## -- \u6bcf\u670814\u65e5\u6216\u6bcf\u5468\u65e5\u7684\u51cc\u66682\u70b9\u90fd\u6267\u884c 00 02 14 2 7 ## -- \u6bcf\u5e74\u76842\u670814\u65e5\u6216\u6bcf\u5e742\u6708\u7684\u5468\u5929\u7684\u51cc\u66682\u70b9\u6267\u884c */10 02 * * * ## -- \u6bcf\u5929\u51cc\u66682\u70b9,\u6bcf\u969410\u5206\u949f\u6267\u884c\u4e00\u6b21 * * * * * ## -- \u6bcf\u5206\u949f\u90fd\u6267\u884c 00 00 14 2 * ## -- \u6bcf\u5e742\u670814\u65e5\u7684\u51cc\u6668\u6267\u884c\u547d\u4ee4 */5 * * * * ## -- \u6bcf\u96945\u5206\u949f\u6267\u884c\u4e00\u6b21 00 02 * 1 ,5,8 * ## -- \u6bcf\u5e74\u76841\u67085\u67088\u6708\u51cc\u66682\u70b9\u6267\u884c 00 02 1 -8 * * ## -- \u6bcf\u67081\u53f7\u52308\u53f7\u51cc\u66682\u70b9\u6267\u884c 00 21 * * * ## -- \u6bcf\u5929\u665a\u4e0a21:00\u6267\u884c 45 4 1 ,10,22 * * ## -- \u6bcf\u67081\u300110\u300122\u65e5\u76844:45\u6267\u884c 45 4 1 -10 * * ## -- \u6bcf\u67081\u523010\u65e5\u76844:45\u6267\u884c 3 ,15 8 -11 */2 * * ## -- \u6bcf\u9694\u4e24\u5929\u7684\u4e0a\u53488\u70b9\u523011\u70b9\u7684\u7b2c3\u548c\u7b2c15\u5206\u949f\u6267\u884c 0 23 -7/2 * * * ## -- \u665a\u4e0a11\u70b9\u5230\u65e9\u4e0a7\u70b9\u4e4b\u95f4,\u6bcf\u9694\u4e24\u5c0f\u65f6\u6267\u884c 15 21 * * 1 -5 ## -- \u5468\u4e00\u5230\u5468\u4e94\u6bcf\u5929\u665a\u4e0a21:15\u6267\u884c","title":"\u7f16\u5199\u4e3e\u4f8b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_3","text":"-e \u7f16\u8f91\u5b9a\u65f6\u4efb\u52a1 -l \u67e5\u770b\u5b9a\u65f6\u4efb\u52a1 -r \u5220\u9664\u5b9a\u65f6\u4efb\u52a1 -u \u6307\u5b9a\u5176\u4ed6\u7528\u6237 [ root@localhost ~ ] # crontab -l * * * * * echo \"hello world\" >> /tmp/1.txt","title":"\u547d\u4ee4\u9009\u9879"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_4","text":"\u25b2 \u4f7f\u7528root\u7528\u6237\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\u65f6\u95f4\u540c\u6b65. ## -- step1:\u5b89\u88c5nptdate\u5305 yum install -y ntpdate ## -- step2:\u6d4b\u8bd5\u65f6\u95f4\u540c\u6b65\u547d\u4ee4 (\u8fd4\u56de\u7ed3\u679c\u6ca1\u6709\u62a5\u9519\u5373\u53ef) [ root@localhost ~ ] # ntpdate ntp.aliyun.com 30 Aug 20 :45:19 ntpdate [ 11577 ] : adjust time server 203 .107.6.88 offset 0 .178911 sec ## -- step3:\u786e\u5b9a\u547d\u4ee4\u6240\u5728\u76ee\u5f55 \u5728 /etc/crontab\u6587\u4ef6\u7684PATH\u5b57\u6bb5\u6240\u5305\u542b\u7684\u76ee\u5f55\u4e0b ## -- \u4e0d\u5728\u7684\u8bdd,\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1\u65f6\u5019,\u53ef\u7528\u7edd\u5bf9\u8def\u5f84\u89e3\u51b3\uff01\uff01 [ root@localhost ~ ] # cat /etc/crontab | grep PATH PATH = /sbin:/bin:/usr/sbin:/usr/bin [ root@localhost ~ ] # which ntpdate /usr/sbin/ntpdate ## -- step4:\u914d\u7f6e\u5e76\u67e5\u770b\u5b9a\u65f6\u4efb\u52a1 [ root@localhost ~ ] # crontab -e crontab: installing new crontab [ root@localhost ~ ] # crontab -l # -- \u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\u65f6\u95f4\u540c\u6b65 \u6700\u597d\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 /usr/sbin/ntpdate ntp.aliyun.com */5 * * * * ntpdate ntp.aliyun.com \u25b2 \u5907\u4efd\u6848\u4f8b \u9700\u6c42: \u63d0\u524d\u51c6\u5907\u5907\u4efd\u6587\u4ef6\u76ee\u5f55,\u547d\u540d\u89c4\u5219: /backup/web01_172.16.150.131_2022-08-30 \u6253\u5305\u5907\u4efd\u6587\u4ef6: \u540d\u5b57 2022-08-30_hostname_etc.tar.gz \u9a8c\u8bc1\u6587\u4ef6\u662f\u5426\u5b8c\u6574 \u5c06\u9a8c\u8bc1\u7ed3\u679c\u53d1\u9001\u5230\u90ae\u7bb1 \u5b58\u653e\u5907\u4efd\u5185\u5bb9\u7684\u76ee\u5f55\u8981\u6c42\u53ea\u4fdd\u75593\u5929\u7684\u6570\u636e \u6bcf\u5929\u7684\u51cc\u66683\u70b950\u6267\u884c\u8be5\u5907\u4efd \u811a\u672c\u6587\u4ef6 bei.sh \u7684\u5185\u5bb9\u5982\u4e0b: #!bin/bash hostname = ` hostname ` ip = ` hostname -I | awk '{print $1}' ` date = ` date +%F ` mkdir -p /backup/ ${ hostname } _ ${ ip } _ ${ date } tar zcf /backup/ ${ hostname } _ ${ ip } _ ${ date } / ${ date } _ ${ hostname } _etc.tar.gz /etc md5sum /backup/ ${ hostname } _ ${ ip } _ ${ date } / ${ date } _ ${ hostname } _etc.tar.gz > /backup/flag.txt md5sum -c /backup/flag.txt > /backup/mail.txt # -- \u5c06\u9a8c\u8bc1\u7ed3\u679c\u53d1\u9001\u5230\u90ae\u7bb1 \u6b64\u8fc7\u7a0b\u7565. find /backup/ -type f -mtime +3 | xargs rm -rf \u5199\u5165\u5b9a\u65f6\u4efb\u52a1: crontab -e # -- \u5199\u5165\u547d\u4ee4 50 3 * * * /bin/bash ~/bei.sh","title":"\u5b9a\u65f6\u4efb\u52a1\u5b9e\u8df5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_5","text":"","title":"\u5b9a\u65f6\u4efb\u52a1\u7f16\u5199"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_6","text":"1 .\u624b\u52a8\u6267\u884c\u547d\u4ee4,\u7136\u540e\u4fdd\u7559\u6267\u884c\u6210\u529f\u7684\u7ed3\u679c 2 .\u7f16\u5199\u811a\u672c \u811a\u672c\u9700\u8981\u7edf\u4e00\u8def\u5f84/scripts \u811a\u672c\u5185\u5bb9\u590d\u5236\u6267\u884c\u6210\u529f\u7684\u547d\u4ee4 ( \u51cf\u5c11\u6bcf\u4e2a\u73af\u8282\u51fa\u9519\u51e0\u7387 ) \u811a\u672c\u5185\u5bb9\u5c3d\u53ef\u80fd\u7684\u4f18\u5316,\u4f7f\u7528\u4e00\u4e9b\u53d8\u91cf\u6216\u7b80\u5355\u7684\u5224\u65ad\u8bed\u53e5 \u811a\u672c\u6267\u884c\u7684\u8f93\u51fa\u4fe1\u606f\u53ef\u4ee5\u91cd\u5b9a\u5411\u81f3\u5176\u5b83\u4f4d\u7f6e\u4fdd\u7559\u6216\u5199\u5165/dev/null 3 .\u6267\u884c\u811a\u672c \u4f7f\u7528bash\u547d\u4ee4\u6267\u884c,\u9632\u6b62\u811a\u672c\u6ca1\u6709\u589e\u52a0\u6267\u884c\u6743\u9650 ( /usr/bin/bash /bin/bash ) \u6267\u884c\u811a\u672c\u6210\u529f\u540e,\u590d\u5236\u8be5\u6267\u884c\u7684\u547d\u4ee4,\u4ee5\u4fbf\u5199\u5165cron 4 .\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1 \u52a0\u4e0a\u5fc5\u8981\u7684\u6ce8\u91ca\u4fe1\u606f, \u4eba\u3001\u65f6\u95f4\u3001\u4efb\u52a1 \u8bbe\u5b9a\u5b9a\u65f6\u4efb\u52a1\u6267\u884c\u7684\u5468\u671f \u7c98\u8d34\u6267\u884c\u811a\u672c\u7684\u547d\u4ee4 ( \u4e0d\u8981\u624b\u6572 ) 5 .\u8c03\u8bd5\u5b9a\u65f6\u4efb\u52a1 \u589e\u52a0\u4efb\u52a1\u9891\u7387\u6d4b\u8bd5 \u68c0\u67e5\u73af\u5883\u53d8\u91cf\u95ee\u9898 ( \u6700\u597d\u5728\u811a\u672c\u4e2d\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u53d8\u91cfPATH ) \u68c0\u67e5crond\u670d\u52a1\u65e5\u5fd7 /var/log/cron","title":"\u601d\u8def"},{"location":"1_linux%E5%9F%BA%E7%A1%80/18_crond%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/#_7","text":"1 > \u5b9a\u65f6\u4efb\u52a1\u89c4\u5219\u914d\u7f6e\u4e00\u5b9a\u8981\u52a0\u6ce8\u91ca 2 > \u5b9a\u65f6\u4efb\u52a1\u91cc\u9762\u5c3d\u91cf\u4f7f\u7528\u811a\u672c 3 > \u8fd0\u884c\u811a\u672c\u4e60\u60ef\u6027\u7684\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 \u7528\u6237\u7684\u5b9a\u65f6\u4efb\u52a1\u4e2d\u7684\u6587\u4ef6\u9ed8\u8ba4\u5b58\u653e\u5728\u5f53\u524d\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u6bd4\u5982: /bin/bash ~/bei.sh bash\u547d\u4ee4\u7528\u7684\u7edd\u5bf9\u8def\u5f84 4 > \u811a\u672c\u6216\u8005\u547d\u4ee4\u7684\u6267\u884c\u7ed3\u679c\u5c3d\u91cf\u5c06\u6709\u7528\u7684\u5b9a\u4e49\u5230\u6307\u5b9a\u65e5\u5fd7,\u6ca1\u7528\u7684\u5b9a\u4e49\u5230\u7a7a 5 > \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8f93\u51fa \u6bd4\u5982: tar -zcvf etc.tar.gz /etc f\u9009\u9879\u4f1a\u8f93\u51fa\u6253\u5305\u7684\u8fc7\u7a0b,\u6ca1\u5fc5\u8981\u52a0\u8fd9\u4e2a\u9009\u9879 6 > \u6253\u5305\u538b\u7f29\u547d\u4ee4\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 7 > \u7cfb\u7edf\u4e0e\u547d\u4ee4\u4f4d\u7f6e\u6709\u5173\u7684\u73af\u5883\u53d8\u91cf\u95ee\u9898,\u5efa\u8bae\u811a\u672c\u4e2d\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u53d8\u91cfPATH 8 > \u5b9a\u65f6\u4efb\u52a1\u4e2ddate\u547d\u4ee4\u7684\u767e\u5206\u53f7\u9700\u8f6c\u4e49\u624d\u80fd\u4f7f\u7528","title":"\u6ce8\u610f\u70b9"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/","text":"\u7cfb\u7edf\u4f18\u5316\u53c2\u8003\u94fe\u63a5: https://zhuanlan.zhihu.com/p/340313062 \u5185\u5fc3OS: \u8fd0\u7ef4\u597d\u5403\u7ecf\u9a8c.. \u96be\u9053\u5f00\u53d1\u4e0d\u5403\u7ecf\u9a8c\u561b\uff1f\u53ef\u611f\u89c9\u8fd0\u7ef4\u6bd4\u5f00\u53d1\u66f4\u7e41\u7410\u4e00\u4e22\u4e22.. \u8fd0\u7ef4\u4e0d\u7b80\u5355\u554a!! \u82e5\u51e0\u5e74\u540e\u6211\u5f00\u53d1\u4e0d\u8f6c\u8fd0\u7ef4,\u90a3\u6211\u5f97\u53bb\u8003\u4e2a\u7814... \u8fdb\u884cpython AI\u65b9\u9762\u7684\u7cfb\u7edf\u5316\u5b66\u4e60 \u8def\u6f2b\u6f2b\u5176\u4fee\u8fdc\u516e.. \u5b66\u5230\u8001\u6d3b\u5230\u8001... yum\u6e90\u5904\u7406\u4e0e\u5e38\u7528\u8f6f\u4ef6\u5305\u5b89\u88c5 \u00b6 \u6ce8\u610f : \u82e5\u4ece\u5934\u63a5\u624b\u9879\u76ee, \u5c06\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u5b89\u88c5\u7684\u5305\u7f13\u5b58\u672c\u5730,\u5c06\u6240\u6709\u4e3b\u673a\u4e0a\u7684\u8f6f\u4ef6\u5305\u6c47\u603b\u5230\u4e00\u8d77, \u505a\u6210\u4e00\u4e2a\u81ea\u5df1\u7684yum\u6e90\u7528\u6765\u540e\u671f\u4f7f\u7528. \u82e5\u4e2d\u9014\u63a5\u624b\u9879\u76ee,\u8fdb\u884c\u5347\u7ea7\u65f6, \u6d4b\u8bd5\u73af\u5883\u5148\u5012\u817e\u4e00\u904d,\u5c06\u56de\u6eda\u65b9\u6848\u5168\u90fd\u5199\u597d,\u4e00\u65e6\u51fa\u95ee\u9898,\u81ea\u52a8\u8fd0\u884c\u811a\u672c\u56de\u6eda.. \u7136\u540e\u7ebf\u4e0a\u73af\u5883\u5347\u7ea7,\u6700\u5f00\u59cb\u53ea\u5347\u51e0\u53f0,\u89c2\u5bdf\u4e00\u4e24\u5468,\u518d\u6162\u6162\u6269\u5927\u5347\u7ea7\u89c4\u6a21.. # -- 1.\u5c06\u7cfb\u7edf\u9ed8\u8ba4\u7684yum\u6e90\u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u5f55\u4e0b mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup # -- 2.\u4e0b\u8f7daliyun\u7684Base\u6e90\u548cepel\u6e90 curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo yum update -y # -- \u521a\u88c5\u5b8c\u7cfb\u7edf\u540e\u5c31\u7acb\u5373\u6267\u884c,\u5f80\u540e\u5c31\u4e0d\u8981\u8f7b\u6613\u6267\u884c\u6b64\u547d\u4ee4\u5566 # -- 3.\u5b89\u88c5\u5e38\u7528\u7684\u8f6f\u4ef6\u5305 yum -y install tree nmap sysstat lrzsz telnet bash-completion bash-completion-extras vim lsof net-tools rsync ntpdate nfs-utils \u89c4\u8303\u7cfb\u7edf\u4e3b\u673a\u540d \u00b6 \u4e3b\u673a\u540d\u901a\u5e38\u4f1a\u4e0e /etc/hosts \u6587\u4ef6\u642d\u914d\u4f7f\u7528.. \u8fdb\u800c\u5b9e\u73b0\u96c6\u7fa4\u4e3b\u673a\u4e4b\u95f4\u76f8\u4e92\u7528\u4e3b\u673a\u540d\u89e3\u6790.. hostnamectl set-hostname \u4e3b\u673a\u540d # -- \u4e3b\u673a\u540d\u80fd\u591f\u53cd\u6620\u51fa\u4e3b\u673a\u7684\u4f5c\u7528\u5373\u53ef vim /etc/hosts # -- \u7f16\u8f91\u597d\u4e4b\u540e,\u6bcf\u53f0\u673a\u5668\u90fd\u53d1\u4e00\u4efd hosts\u6587\u4ef6\u5145\u5f53\u7684\u5c31\u662fDNS\u670d\u52a1\u5668\u7684\u89d2\u8272 172 .16.10.11 nc1 ceph-deploy # -- IP\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u4e3b\u673a\u540d 172 .16.10.12 nc2 172 .16.10.13 nc3 172 .16.10.14 cs1 172 .16.10.15 cs2 172 .16.10.16 cs3 ssh\u79d8\u94a5\u767b\u5f55 \u00b6 ssh-keygen # -- \u751f\u6210\u79c1\u94a5\u4e0e\u516c\u94a5 \u751f\u6210\u65f6\u5019\u8fd8\u53ef\u4ee5\u52a0\u4e2a\u5bc6\u7801,\u8fd9\u6837\u7684\u8bdd,\u5bc6\u94a5\u8fde\u63a5\u65f6,\u5c31\u9700\u8981\u8f93\u5165\u8fd9\u4e2a\u5bc6\u7801 ssh-copy-id -i root@\u670d\u52a1\u7aefip\u5730\u5740 # -- \u628a\u81ea\u5df1\u7684\u516c\u94a5\u4e0a\u4f20\u5230\u670d\u52a1\u7aef ssh root@\u670d\u52a1\u7aefip\u5730\u5740 # -- \u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u670d\u52a1\u7aef(\u4f1a\u901a\u8fc7\u5bc6\u94a5\u7684\u65b9\u5f0f\u8fde\u63a5,\u4e0d\u518d\u8f93\u5165\u670d\u52a1\u7aef\u7684\u8d26\u53f7\u548c\u5bc6\u7801) \"\"\" \u5bc6\u94a5\u767b\u5f55: \u901a\u5e38\u4f1a\u5728\u5ba2\u6237\u7aef\u751f\u6210\u516c\u94a5\u548c\u79c1\u94a5.. \u5c06\u516c\u94a5\u4e0a\u4f20\u7ed9\u670d\u52a1\u5668,\u5f80\u540e\u5ba2\u6237\u7aef\u94fe\u63a5\u670d\u52a1\u7aef\u7684\u65f6\u5019,\u5c31\u901a\u8fc7\u79c1\u94a5\u94fe\u63a5\u5373\u53ef. 1> xshell\u5ba2\u6237\u7aef\u5bf9\u5e94\u670d\u52a1\u7aef\u7684\u8f6f\u4ef6openssh-server. xshell\u53ef\u901a\u8fc7\u5bc6\u94a5\u767b\u5f55. xshell\u914d\u7f6e\u5bc6\u94a5\u767b\u5f55\u540e,\u5728\u670d\u52a1\u7aef\u53ef\u4ee5\u7981\u7528\u4f20\u7edf\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u5f55.. `vim /etc/ssh/sshd_config` \u5c06PasswordAuthentication yes \u6539\u4e3a PasswordAuthentication no 2> \u4e3b\u673aA\u3001\u4e3b\u673aB..\u90fd\u53ef\u4ee5\u901a\u8fc7\u5bc6\u94a5\u767b\u5f55\u4e3b\u673aM(AB\u5c06\u8be5\u5ba2\u6237\u7aef\u7684\u516c\u94a5\u7ed9M\u5c31\u884c) \u8fc7\u7a0b\u7565. \u96c6\u7fa4\u4e4b\u95f4,\u4e3b\u673a\u4e0e\u4e3b\u673a\u76f8\u8fde\u901a\u5e38\u79c1\u94a5\u4e0d\u4f1a\u518d\u52a0\u4e2a\u5bc6\u7801.. \u4e3b\u673aA: `ssh root@\u4e3b\u673aM\u7684ip\u5730\u5740 \u547d\u4ee4` # -- \u5b9e\u73b0\u81ea\u52a8\u5316 \"\"\" \u5173\u95edSELinux \u00b6 \"\"\" SELinux(Security-Enhanced Linux)\u662f\u7f8e\u56fd\u56fd\u5bb6\u5b89\u5168\u5c40(NSA)\u5bf9\u4e8e\u5f3a\u5236\u8bbf\u95ee\u63a7\u5236\u7684\u5b9e\u73b0. \u8fd9\u4e2a\u529f\u80fd\u8ba9\u7cfb\u7edf\u7ba1\u7406\u5458\u53c8\u7231\u53c8\u6068,\u8fd9\u91cc\u6211\u4eec\u8fd8\u662f\u628a\u5b83\u7ed9\u5173\u95ed\u4e86\u5427,\u81f3\u4e8e\u5b89\u5168\u95ee\u9898,\u540e\u9762\u901a\u8fc7\u5176\u4ed6\u624b\u6bb5\u6765\u89e3\u51b3,\u8fd9\u4e5f\u662f\u5927\u591a\u6570\u751f\u4ea7\u73af\u5883\u7684\u505a\u6cd5,\u5982\u679c\u975e\u8981\u5f00\u542f\u4e5f\u662f\u53ef\u4ee5\u7684. \"\"\" setenforce 0 # -- \u4e34\u65f6\u5173\u95ed sed 's#SELINUX=enforcing#SELINUX=disabled#g' /etc/selinux/config # -- \u6c38\u4e45\u914d\u7f6e,\u91cd\u542f\u751f\u6548 grep \"disabled\" /etc/selinux/config # -- \u68c0\u67e5\u7ed3\u679c \u5173\u95ed\u9632\u706b\u5899\u6216\u8005\u5f00\u53d1\u5bf9\u5e94\u7684\u7aef\u53e3 \u00b6 \"\"\" \u5173\u95ed\u9632\u706b\u5899\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9\u521d\u5b66\u8005\u5b66\u4e60\u66f4\u65b9\u4fbf. \u5c06\u6765\u5728\u5b66\u4e86Firewalld\u6280\u672f\u540e\u53ef\u518d\u7edf\u4e00\u5f00\u542f. \u5728\u4f01\u4e1a\u73af\u5883\u4e2d,\u4e00\u822c\u53ea\u6709\u914d\u7f6e\u5916\u7f51IP\u7684linux\u670d\u52a1\u5668\u624d\u9700\u8981\u5f00\u542f\u9632\u706b\u5899,\u4f46\u5373\u4f7f\u662f\u6709\u5916\u7f51IP,\u5bf9\u4e8e\u9ad8\u5e76\u53d1\u9ad8\u6d41\u91cf\u7684\u4e1a\u52a1\u670d\u52a1\u5668\u4ecd\u662f\u4e0d\u80fd\u5f00\u7684,\u56e0\u4e3a\u4f1a\u6709\u8f83\u5927\u6027\u80fd\u635f\u5931,\u5bfc\u81f4\u7f51\u7ad9\u8bbf\u95ee\u5f88\u6162,\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ea\u80fd\u5728\u524d\u7aef\u52a0\u66f4\u597d\u7684\u786c\u4ef6\u9632\u706b\u5899\u4e86.. \"\"\" # -- \u4e34\u65f6\u5173\u95ed systemctl stop firewalld # -- \u8bbe\u7f6e\u5f00\u673a\u4e0d\u542f\u52a8 systemctl disable firewalld \u914d\u7f6entp\u670d\u52a1,\u540c\u6b65\u7cfb\u7edf\u65f6\u95f4 \u00b6 # -- \u7ed9\u5b9a\u65f6\u4efb\u52a1\u52a0\u4e0a\u6ce8\u91ca echo '#Timing synchronization time' >> /var/spool/cron/root # -- \u5b9a\u65f6\u4efb\u52a1 echo '0 */1 * * * /usr/sbin/ntpdate ntp1.aliyun.com &>/dev/null' >> /var/spool/cron/root # -- \u68c0\u67e5\u7ed3\u679c crontab -l ulimit \u00b6 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528ulimit\u547d\u4ee4\u5bf9\u7cfb\u7edf\u8d44\u6e90\u8fdb\u884c\u63a7\u5236,\u662f\u4e34\u65f6\u7684\u914d\u7f6e \u9009\u9879 \u00b6 \u8bbe\u7f6e\u6bcf\u4e2a\u7528\u6237\u7ea7/\u666e\u901a\u7528\u6237\u6240\u80fd\u6253\u5f00\u7684\u6700\u5927\u8fdb\u7a0b\u6570\u76ee: -u \u9009\u9879 ulimit -u 3 \u8bbe\u7f6e \u6bcf\u4e2a \u7528\u6237\u7ea7/\u666e\u901a\u7528\u6237\u5f00\u542f\u7684 \u6bcf\u4e2a\u8fdb\u7a0b \u6240\u80fd\u5206\u914d\u5230\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26/\u6587\u4ef6\u53e5\u67c4\u6570\u91cf: -n \u9009\u9879 \"\"\" \u6587\u4ef6\u63cf\u8ff0\u7b26\u662flinux\u72ec\u6709\u7684\u673a\u5236,\u6bcf\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6,\u7ed9\u6253\u5f00\u7684\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u7f16\u53f7(\u4e0d\u662finode\uff01\uff01\uff01) \u5177\u4f53\u6765\u8bf4,\u8fdb\u7a0b\u6bcf\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6,OS\u5185\u6838\u5c31\u4f1a\u4e3a\u8be5\u6253\u5f00\u7684\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u7f16\u53f7(\u975e\u8d1f\u6574\u6570),\u8be5\u7f16\u53f7\u79f0\u4e4b\u4e3a\u6587\u4ef6\u63cf\u8ff0\u7b26\u6216\u8005\u6587\u4ef6handle. \u6587\u4ef6\u6253\u5f00\u540e\u7684\u5904\u7406\u903b\u8f91: \u8fdb\u7a0b->\u6587\u4ef6\u63cf\u8ff0\u7b26->\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838->\u4e00\u4e2a\u5177\u4f53\u7684\u6587\u4ef6 \u5373\u5185\u6838(kernel)\u5c31\u662f\u5229\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26(file descriptor)\u6765\u8bbf\u95ee\u6587\u4ef6 \u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u6570\u76ee\u662f\u53ef\u4ee5\u8bbe\u7f6e\u7684 \u4e00\u65e6\u8bbe\u7f6e\u8fc7\u5c0f,\u8fdb\u7a0b\u4f1a\u968f\u7740\u6253\u5f00\u7684\u6587\u4ef6\u6570\u589e\u591a,\u56e0\u4e3a\u8fbe\u5230\u4e86\u6587\u4ef6\u63cf\u8ff0\u7684\u4e0a\u9650\u800c\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6,\u4ece\u800c\u629b\u51fa\u5f02\u5e38 \"\"\" # -- \u6ce8\u610f\u662f\u540c\u65f6\u6253\u5f00!!!\u4ec0\u4e48\u573a\u666f\u4e00\u4e2a\u8fdb\u7a0b\u4f1a\u540c\u65f6\u6253\u5f00\u4e0a\u5343\u4e0a\u4e07\u4e2a\u6587\u4ef6\uff1f # \u9ad8\u5e76\u53d1!!\u8fbe\u5230\u4e0a\u9650,\u6253\u4e0d\u5f00\u6587\u4ef6\u4e86,\u7528\u6237\u62ff\u4e0d\u5230\u6570\u636e..\u8fdb\u7a0b\u62a5IO\u9519\u8bef. ulimit -n 12 # -- \u9ed8\u8ba4\u662f1024\u4e2a \u6587\u4ef6\u63cf\u8ff0\u7b26 \u00b6 [ root@localhost ~ ] # vim fd.py [ root@localhost ~ ] # cat fd.py import time import os print ( os.getpid ()) with open ( 'a.txt' ,mode = 'wt' ) as f1,open ( 'b.txt' ,mode = 'wt' ) as f2: time.sleep ( 1000 ) [ root@localhost ~ ] # python fd.py & [ 1 ] 14762 \"\"\" /proc \u8fdb\u7a0b\u865a\u62df\u6587\u4ef6\u7cfb\u7edf; /proc/14762 \u653e\u7f6e\u8be5\u8fdb\u7a0b\u76f8\u5173\u7684\u6240\u6709\u6587\u4ef6; /proc/14762/fd \u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6. \u4e00\u4e2a\u8fdb\u7a0b\u53ef\u901a\u8fc7\u6587\u4ef6\u63cf\u8ff0\u7b26(\u6570\u5b57)\u5173\u8054\u6253\u5f00\u7684\u6587\u4ef6 \u8981\u6ce8\u610f\u7684\u662f,\u8be5\u8fdb\u7a0b\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u6570\u91cf\u4e0e\u8be5\u8fdb\u7a0b\u6253\u5f00\u6587\u4ef6\u7684\u6570\u76ee\u4e0d\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff01\uff01\uff01 \"\"\" [ root@localhost ~ ] # cat /proc/14762/fd \u603b\u7528\u91cf 0 # -- \u6ce8\u610f\u54e6!! \u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u5bf9\u5e94\u540c\u4e00\u4e2a\u6587\u4ef6,\u8fd9\u91cc0 1 2 \u6307\u6587\u4ef6\u9700\u8981\u7ec8\u7aef\u7684\u8f93\u5165,\u6587\u4ef6\u4ea7\u751f\u7684\u7ed3\u679c\u9700\u8981\u8f93\u51fa\u5230\u7ec8\u7aef # -- \u4e00\u4e2a\u8fdb\u7a0b\u4ea7\u751f\u9ed8\u8ba4\u5c31\u4f1a\u5e26\u7740 0 1 2 \u8fd9\u4e09\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26 # -- \u8fd9\u4e5f\u8ddflinux\u4e00\u5207\u7686\u6587\u4ef6 \u4ee5\u53ca \u91cd\u5b9a\u5411\u7684\u77e5\u8bc6\u5bf9\u5e94\u4e86\u8d77\u6765 \u829c\u6e56\uff5e lrwx------ 1 root root 64 8\u6708 31 10 :59 0 -> /dev/pts/1 # -- /dev/pts/1\u662f\u5f53\u524d\u6240\u5728\u7ec8\u7aef \u6807\u51c6\u8f93\u5165 lrwx------ 1 root root 64 8\u6708 31 10 :59 1 -> /dev/pts/1 # -- \u6807\u51c6\u6b63\u786e\u8f93\u51fa lrwx------ 1 root root 64 8\u6708 31 10 :59 2 -> /dev/pts/1 # -- \u6807\u51c6\u9519\u8bef\u8f93\u51fa l-wx------ 1 root root 64 8\u6708 31 10 :59 3 -> /root/a.txt l-wx------ 1 root root 64 8\u6708 31 10 :59 4 -> /root/b.txt \u6c38\u4e45\u914d\u7f6e \u00b6 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 /etc/security/limits.conf # -- \u52a0\u5927\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e0e\u6700\u5927\u6253\u5f00\u7684\u8fdb\u7a0b\u6570 \"\"\" <domain><type><item><value> <domain> \u8868\u793a\u8981\u9650\u5236\u7684\u7528\u6237 <type> \u8bbe\u5b9a\u7c7b\u578b <item> \u8868\u793a\u53ef\u9009\u7684\u8d44\u6e90 <value> \u8868\u793a\u8981\u9650\u5236\u7684\u503c \"\"\" # -- 102400\u901a\u5e38\u591f\u7528\u4e86.\u6ca1\u6709\u4e00\u4e2a\u56fa\u5b9a\u7684\u6807\u51c6,\u8bbe\u7f6e\u5927\u4e86,\u82e5\u8fdb\u7a0bbug\u4f1a\u65e0\u9650\u5360\u7528\u8d44\u6e90,\u4e0d\u5b89\u5168 \u8bbe\u7f6e\u5c0f\u4e86\u4e0d\u591f\u7528,\u8981\u6743\u8861. [ root@localhost ~ ] # cat >>/etc/security/limits.conf<<EOF > * soft nofile 102400 > * hard nofile 102400 > * soft nproc 102400 > * hard nproc 102400 > EOF # -- \u91cd\u542f\u67e5\u770b [ root@localhost ~ ] # ulimit -u 102400 [ root@localhost ~ ] # ulimit -n 102400 \"\"\" Ps: \u8fd8\u6709\u4e2a\u914d\u7f6e\u6587\u4ef6\u66f4\u7cbe\u7ec6. /etc/security/limits.d/20-nproc.conf \u8be5\u6587\u4ef6\u53ea\u7528\u4e8e\u63a7\u5236\u7528\u6237\u6700\u591a\u540c\u65f6\u6253\u5f00\u7684\u8fdb\u7a0b\u6570\u76ee,\u4f18\u5148\u7ea7\u9ad8\u4e8e/etc/security/limits.conf \u91cd\u542f\u540e,\u4fee\u6539\u751f\u6548.. \"\"\" [ root@egon ~ ] # cat /etc/security/limits.d/20-nproc.conf egon1 soft nproc 3 # \u7528\u6237egon1\u6700\u591a\u540c\u65f6\u5f003\u4e2a\u8fdb\u7a0b egon2 soft nproc 4 # \u7528\u6237egon2\u6700\u591a\u540c\u65f6\u5f004\u4e2a\u8fdb\u7a0b * soft nproc 5 # \u5176\u4ed6\u7528\u6237\u6700\u591a\u540c\u65f6\u5f005\u4e2a\u8fdb\u7a0b root soft nproc unlimited # root\u7528\u6237\u65e0\u9650\u5236 \u5176\u4ed6 \u00b6 \u25cb \u5f00\u542fVT\u548cHT VT \u865a\u62df\u5316\u4e4b\u610f, Linux\u865a\u62df\u51fa\u591a\u4e2aOS\u8fd0\u884c\u5728\u4e00\u4e2a\u4e3b\u673a\u4e4b\u4e0a.. HT \u8d85\u7ebf\u7a0b\u6280\u672f... Ps: \u5b9e\u4f53\u673a\u624d\u4f1a\u914d\u7f6e,\u82e5\u7528\u7684\u963f\u91cc\u4e91(\u672c\u8eab\u5c31\u662fvm)\u662f\u4e0d\u9700\u8981\u914d\u7f6e\u7684.. \u25cb \u5173\u95ed\u5b9e\u4f53\u673a\u7684CPU\u8282\u80fd \u25cb \u5173\u95edNetworkManager \u8fdb\u884c\u7f51\u5361\u7ed1\u5b9a\u7684\u8bdd,\u5fc5\u987b\u5173\u6389 \u25cb Jumbo frames \u4e07\u5146\u7f51\u5361MTU=9000,\u4ea4\u6362\u673a\u4e5f\u8981\u8fdb\u884c\u76f8\u5e94\u7684\u8bbe\u7f6e \u25cb \u8c03\u6574swappiness linux\u5185\u5b58\u591f\u7528,\u6709\u65f6\u5019\u4e5f\u4f1a\u4f7f\u7528swap\u5206\u533a..(linux\u5e95\u5c42\u7b97\u6cd5\u51b3\u5b9a\u7684) \u4f46\u4f1a\u5bfc\u81f4\u6027\u80fd\u6548\u7387\u964d\u4f4e.. \u6240\u4ee5\u5728\u5185\u5b58\u591f\u7528\u7684\u65f6\u5019,\u8ba9\u5b83\u5c3d\u53ef\u80fd\u7684\u5c11\u7528swap\u5206\u533a.. \u5efa\u8bae\u8c03\u6574\u4e3a10 echo \"vm.swappiness = 10\" | tee -a /etc/sysctl.conf sysctl -p \u6216\u8005 reboot \u6c38\u4e45\u751f\u6548 \u25cb \u8c03\u6574Kernel pid max \u5185\u6838\u6700\u5927\u7684pid\u4e2a\u6570","title":"\u7cfb\u7edf\u4f18\u5316"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#yum","text":"\u6ce8\u610f : \u82e5\u4ece\u5934\u63a5\u624b\u9879\u76ee, \u5c06\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u5b89\u88c5\u7684\u5305\u7f13\u5b58\u672c\u5730,\u5c06\u6240\u6709\u4e3b\u673a\u4e0a\u7684\u8f6f\u4ef6\u5305\u6c47\u603b\u5230\u4e00\u8d77, \u505a\u6210\u4e00\u4e2a\u81ea\u5df1\u7684yum\u6e90\u7528\u6765\u540e\u671f\u4f7f\u7528. \u82e5\u4e2d\u9014\u63a5\u624b\u9879\u76ee,\u8fdb\u884c\u5347\u7ea7\u65f6, \u6d4b\u8bd5\u73af\u5883\u5148\u5012\u817e\u4e00\u904d,\u5c06\u56de\u6eda\u65b9\u6848\u5168\u90fd\u5199\u597d,\u4e00\u65e6\u51fa\u95ee\u9898,\u81ea\u52a8\u8fd0\u884c\u811a\u672c\u56de\u6eda.. \u7136\u540e\u7ebf\u4e0a\u73af\u5883\u5347\u7ea7,\u6700\u5f00\u59cb\u53ea\u5347\u51e0\u53f0,\u89c2\u5bdf\u4e00\u4e24\u5468,\u518d\u6162\u6162\u6269\u5927\u5347\u7ea7\u89c4\u6a21.. # -- 1.\u5c06\u7cfb\u7edf\u9ed8\u8ba4\u7684yum\u6e90\u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u5f55\u4e0b mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup # -- 2.\u4e0b\u8f7daliyun\u7684Base\u6e90\u548cepel\u6e90 curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo yum update -y # -- \u521a\u88c5\u5b8c\u7cfb\u7edf\u540e\u5c31\u7acb\u5373\u6267\u884c,\u5f80\u540e\u5c31\u4e0d\u8981\u8f7b\u6613\u6267\u884c\u6b64\u547d\u4ee4\u5566 # -- 3.\u5b89\u88c5\u5e38\u7528\u7684\u8f6f\u4ef6\u5305 yum -y install tree nmap sysstat lrzsz telnet bash-completion bash-completion-extras vim lsof net-tools rsync ntpdate nfs-utils","title":"yum\u6e90\u5904\u7406\u4e0e\u5e38\u7528\u8f6f\u4ef6\u5305\u5b89\u88c5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#_1","text":"\u4e3b\u673a\u540d\u901a\u5e38\u4f1a\u4e0e /etc/hosts \u6587\u4ef6\u642d\u914d\u4f7f\u7528.. \u8fdb\u800c\u5b9e\u73b0\u96c6\u7fa4\u4e3b\u673a\u4e4b\u95f4\u76f8\u4e92\u7528\u4e3b\u673a\u540d\u89e3\u6790.. hostnamectl set-hostname \u4e3b\u673a\u540d # -- \u4e3b\u673a\u540d\u80fd\u591f\u53cd\u6620\u51fa\u4e3b\u673a\u7684\u4f5c\u7528\u5373\u53ef vim /etc/hosts # -- \u7f16\u8f91\u597d\u4e4b\u540e,\u6bcf\u53f0\u673a\u5668\u90fd\u53d1\u4e00\u4efd hosts\u6587\u4ef6\u5145\u5f53\u7684\u5c31\u662fDNS\u670d\u52a1\u5668\u7684\u89d2\u8272 172 .16.10.11 nc1 ceph-deploy # -- IP\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u4e3b\u673a\u540d 172 .16.10.12 nc2 172 .16.10.13 nc3 172 .16.10.14 cs1 172 .16.10.15 cs2 172 .16.10.16 cs3","title":"\u89c4\u8303\u7cfb\u7edf\u4e3b\u673a\u540d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#ssh","text":"ssh-keygen # -- \u751f\u6210\u79c1\u94a5\u4e0e\u516c\u94a5 \u751f\u6210\u65f6\u5019\u8fd8\u53ef\u4ee5\u52a0\u4e2a\u5bc6\u7801,\u8fd9\u6837\u7684\u8bdd,\u5bc6\u94a5\u8fde\u63a5\u65f6,\u5c31\u9700\u8981\u8f93\u5165\u8fd9\u4e2a\u5bc6\u7801 ssh-copy-id -i root@\u670d\u52a1\u7aefip\u5730\u5740 # -- \u628a\u81ea\u5df1\u7684\u516c\u94a5\u4e0a\u4f20\u5230\u670d\u52a1\u7aef ssh root@\u670d\u52a1\u7aefip\u5730\u5740 # -- \u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u670d\u52a1\u7aef(\u4f1a\u901a\u8fc7\u5bc6\u94a5\u7684\u65b9\u5f0f\u8fde\u63a5,\u4e0d\u518d\u8f93\u5165\u670d\u52a1\u7aef\u7684\u8d26\u53f7\u548c\u5bc6\u7801) \"\"\" \u5bc6\u94a5\u767b\u5f55: \u901a\u5e38\u4f1a\u5728\u5ba2\u6237\u7aef\u751f\u6210\u516c\u94a5\u548c\u79c1\u94a5.. \u5c06\u516c\u94a5\u4e0a\u4f20\u7ed9\u670d\u52a1\u5668,\u5f80\u540e\u5ba2\u6237\u7aef\u94fe\u63a5\u670d\u52a1\u7aef\u7684\u65f6\u5019,\u5c31\u901a\u8fc7\u79c1\u94a5\u94fe\u63a5\u5373\u53ef. 1> xshell\u5ba2\u6237\u7aef\u5bf9\u5e94\u670d\u52a1\u7aef\u7684\u8f6f\u4ef6openssh-server. xshell\u53ef\u901a\u8fc7\u5bc6\u94a5\u767b\u5f55. xshell\u914d\u7f6e\u5bc6\u94a5\u767b\u5f55\u540e,\u5728\u670d\u52a1\u7aef\u53ef\u4ee5\u7981\u7528\u4f20\u7edf\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u5f55.. `vim /etc/ssh/sshd_config` \u5c06PasswordAuthentication yes \u6539\u4e3a PasswordAuthentication no 2> \u4e3b\u673aA\u3001\u4e3b\u673aB..\u90fd\u53ef\u4ee5\u901a\u8fc7\u5bc6\u94a5\u767b\u5f55\u4e3b\u673aM(AB\u5c06\u8be5\u5ba2\u6237\u7aef\u7684\u516c\u94a5\u7ed9M\u5c31\u884c) \u8fc7\u7a0b\u7565. \u96c6\u7fa4\u4e4b\u95f4,\u4e3b\u673a\u4e0e\u4e3b\u673a\u76f8\u8fde\u901a\u5e38\u79c1\u94a5\u4e0d\u4f1a\u518d\u52a0\u4e2a\u5bc6\u7801.. \u4e3b\u673aA: `ssh root@\u4e3b\u673aM\u7684ip\u5730\u5740 \u547d\u4ee4` # -- \u5b9e\u73b0\u81ea\u52a8\u5316 \"\"\"","title":"ssh\u79d8\u94a5\u767b\u5f55"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#selinux","text":"\"\"\" SELinux(Security-Enhanced Linux)\u662f\u7f8e\u56fd\u56fd\u5bb6\u5b89\u5168\u5c40(NSA)\u5bf9\u4e8e\u5f3a\u5236\u8bbf\u95ee\u63a7\u5236\u7684\u5b9e\u73b0. \u8fd9\u4e2a\u529f\u80fd\u8ba9\u7cfb\u7edf\u7ba1\u7406\u5458\u53c8\u7231\u53c8\u6068,\u8fd9\u91cc\u6211\u4eec\u8fd8\u662f\u628a\u5b83\u7ed9\u5173\u95ed\u4e86\u5427,\u81f3\u4e8e\u5b89\u5168\u95ee\u9898,\u540e\u9762\u901a\u8fc7\u5176\u4ed6\u624b\u6bb5\u6765\u89e3\u51b3,\u8fd9\u4e5f\u662f\u5927\u591a\u6570\u751f\u4ea7\u73af\u5883\u7684\u505a\u6cd5,\u5982\u679c\u975e\u8981\u5f00\u542f\u4e5f\u662f\u53ef\u4ee5\u7684. \"\"\" setenforce 0 # -- \u4e34\u65f6\u5173\u95ed sed 's#SELINUX=enforcing#SELINUX=disabled#g' /etc/selinux/config # -- \u6c38\u4e45\u914d\u7f6e,\u91cd\u542f\u751f\u6548 grep \"disabled\" /etc/selinux/config # -- \u68c0\u67e5\u7ed3\u679c","title":"\u5173\u95edSELinux"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#_2","text":"\"\"\" \u5173\u95ed\u9632\u706b\u5899\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9\u521d\u5b66\u8005\u5b66\u4e60\u66f4\u65b9\u4fbf. \u5c06\u6765\u5728\u5b66\u4e86Firewalld\u6280\u672f\u540e\u53ef\u518d\u7edf\u4e00\u5f00\u542f. \u5728\u4f01\u4e1a\u73af\u5883\u4e2d,\u4e00\u822c\u53ea\u6709\u914d\u7f6e\u5916\u7f51IP\u7684linux\u670d\u52a1\u5668\u624d\u9700\u8981\u5f00\u542f\u9632\u706b\u5899,\u4f46\u5373\u4f7f\u662f\u6709\u5916\u7f51IP,\u5bf9\u4e8e\u9ad8\u5e76\u53d1\u9ad8\u6d41\u91cf\u7684\u4e1a\u52a1\u670d\u52a1\u5668\u4ecd\u662f\u4e0d\u80fd\u5f00\u7684,\u56e0\u4e3a\u4f1a\u6709\u8f83\u5927\u6027\u80fd\u635f\u5931,\u5bfc\u81f4\u7f51\u7ad9\u8bbf\u95ee\u5f88\u6162,\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ea\u80fd\u5728\u524d\u7aef\u52a0\u66f4\u597d\u7684\u786c\u4ef6\u9632\u706b\u5899\u4e86.. \"\"\" # -- \u4e34\u65f6\u5173\u95ed systemctl stop firewalld # -- \u8bbe\u7f6e\u5f00\u673a\u4e0d\u542f\u52a8 systemctl disable firewalld","title":"\u5173\u95ed\u9632\u706b\u5899\u6216\u8005\u5f00\u53d1\u5bf9\u5e94\u7684\u7aef\u53e3"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#ntp","text":"# -- \u7ed9\u5b9a\u65f6\u4efb\u52a1\u52a0\u4e0a\u6ce8\u91ca echo '#Timing synchronization time' >> /var/spool/cron/root # -- \u5b9a\u65f6\u4efb\u52a1 echo '0 */1 * * * /usr/sbin/ntpdate ntp1.aliyun.com &>/dev/null' >> /var/spool/cron/root # -- \u68c0\u67e5\u7ed3\u679c crontab -l","title":"\u914d\u7f6entp\u670d\u52a1,\u540c\u6b65\u7cfb\u7edf\u65f6\u95f4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#ulimit","text":"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528ulimit\u547d\u4ee4\u5bf9\u7cfb\u7edf\u8d44\u6e90\u8fdb\u884c\u63a7\u5236,\u662f\u4e34\u65f6\u7684\u914d\u7f6e","title":"ulimit"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#_3","text":"\u8bbe\u7f6e\u6bcf\u4e2a\u7528\u6237\u7ea7/\u666e\u901a\u7528\u6237\u6240\u80fd\u6253\u5f00\u7684\u6700\u5927\u8fdb\u7a0b\u6570\u76ee: -u \u9009\u9879 ulimit -u 3 \u8bbe\u7f6e \u6bcf\u4e2a \u7528\u6237\u7ea7/\u666e\u901a\u7528\u6237\u5f00\u542f\u7684 \u6bcf\u4e2a\u8fdb\u7a0b \u6240\u80fd\u5206\u914d\u5230\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26/\u6587\u4ef6\u53e5\u67c4\u6570\u91cf: -n \u9009\u9879 \"\"\" \u6587\u4ef6\u63cf\u8ff0\u7b26\u662flinux\u72ec\u6709\u7684\u673a\u5236,\u6bcf\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6,\u7ed9\u6253\u5f00\u7684\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u7f16\u53f7(\u4e0d\u662finode\uff01\uff01\uff01) \u5177\u4f53\u6765\u8bf4,\u8fdb\u7a0b\u6bcf\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6,OS\u5185\u6838\u5c31\u4f1a\u4e3a\u8be5\u6253\u5f00\u7684\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u7f16\u53f7(\u975e\u8d1f\u6574\u6570),\u8be5\u7f16\u53f7\u79f0\u4e4b\u4e3a\u6587\u4ef6\u63cf\u8ff0\u7b26\u6216\u8005\u6587\u4ef6handle. \u6587\u4ef6\u6253\u5f00\u540e\u7684\u5904\u7406\u903b\u8f91: \u8fdb\u7a0b->\u6587\u4ef6\u63cf\u8ff0\u7b26->\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838->\u4e00\u4e2a\u5177\u4f53\u7684\u6587\u4ef6 \u5373\u5185\u6838(kernel)\u5c31\u662f\u5229\u7528\u6587\u4ef6\u63cf\u8ff0\u7b26(file descriptor)\u6765\u8bbf\u95ee\u6587\u4ef6 \u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u6570\u76ee\u662f\u53ef\u4ee5\u8bbe\u7f6e\u7684 \u4e00\u65e6\u8bbe\u7f6e\u8fc7\u5c0f,\u8fdb\u7a0b\u4f1a\u968f\u7740\u6253\u5f00\u7684\u6587\u4ef6\u6570\u589e\u591a,\u56e0\u4e3a\u8fbe\u5230\u4e86\u6587\u4ef6\u63cf\u8ff0\u7684\u4e0a\u9650\u800c\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6,\u4ece\u800c\u629b\u51fa\u5f02\u5e38 \"\"\" # -- \u6ce8\u610f\u662f\u540c\u65f6\u6253\u5f00!!!\u4ec0\u4e48\u573a\u666f\u4e00\u4e2a\u8fdb\u7a0b\u4f1a\u540c\u65f6\u6253\u5f00\u4e0a\u5343\u4e0a\u4e07\u4e2a\u6587\u4ef6\uff1f # \u9ad8\u5e76\u53d1!!\u8fbe\u5230\u4e0a\u9650,\u6253\u4e0d\u5f00\u6587\u4ef6\u4e86,\u7528\u6237\u62ff\u4e0d\u5230\u6570\u636e..\u8fdb\u7a0b\u62a5IO\u9519\u8bef. ulimit -n 12 # -- \u9ed8\u8ba4\u662f1024\u4e2a","title":"\u9009\u9879"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#_4","text":"[ root@localhost ~ ] # vim fd.py [ root@localhost ~ ] # cat fd.py import time import os print ( os.getpid ()) with open ( 'a.txt' ,mode = 'wt' ) as f1,open ( 'b.txt' ,mode = 'wt' ) as f2: time.sleep ( 1000 ) [ root@localhost ~ ] # python fd.py & [ 1 ] 14762 \"\"\" /proc \u8fdb\u7a0b\u865a\u62df\u6587\u4ef6\u7cfb\u7edf; /proc/14762 \u653e\u7f6e\u8be5\u8fdb\u7a0b\u76f8\u5173\u7684\u6240\u6709\u6587\u4ef6; /proc/14762/fd \u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6. \u4e00\u4e2a\u8fdb\u7a0b\u53ef\u901a\u8fc7\u6587\u4ef6\u63cf\u8ff0\u7b26(\u6570\u5b57)\u5173\u8054\u6253\u5f00\u7684\u6587\u4ef6 \u8981\u6ce8\u610f\u7684\u662f,\u8be5\u8fdb\u7a0b\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u6570\u91cf\u4e0e\u8be5\u8fdb\u7a0b\u6253\u5f00\u6587\u4ef6\u7684\u6570\u76ee\u4e0d\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff01\uff01\uff01 \"\"\" [ root@localhost ~ ] # cat /proc/14762/fd \u603b\u7528\u91cf 0 # -- \u6ce8\u610f\u54e6!! \u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u5bf9\u5e94\u540c\u4e00\u4e2a\u6587\u4ef6,\u8fd9\u91cc0 1 2 \u6307\u6587\u4ef6\u9700\u8981\u7ec8\u7aef\u7684\u8f93\u5165,\u6587\u4ef6\u4ea7\u751f\u7684\u7ed3\u679c\u9700\u8981\u8f93\u51fa\u5230\u7ec8\u7aef # -- \u4e00\u4e2a\u8fdb\u7a0b\u4ea7\u751f\u9ed8\u8ba4\u5c31\u4f1a\u5e26\u7740 0 1 2 \u8fd9\u4e09\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26 # -- \u8fd9\u4e5f\u8ddflinux\u4e00\u5207\u7686\u6587\u4ef6 \u4ee5\u53ca \u91cd\u5b9a\u5411\u7684\u77e5\u8bc6\u5bf9\u5e94\u4e86\u8d77\u6765 \u829c\u6e56\uff5e lrwx------ 1 root root 64 8\u6708 31 10 :59 0 -> /dev/pts/1 # -- /dev/pts/1\u662f\u5f53\u524d\u6240\u5728\u7ec8\u7aef \u6807\u51c6\u8f93\u5165 lrwx------ 1 root root 64 8\u6708 31 10 :59 1 -> /dev/pts/1 # -- \u6807\u51c6\u6b63\u786e\u8f93\u51fa lrwx------ 1 root root 64 8\u6708 31 10 :59 2 -> /dev/pts/1 # -- \u6807\u51c6\u9519\u8bef\u8f93\u51fa l-wx------ 1 root root 64 8\u6708 31 10 :59 3 -> /root/a.txt l-wx------ 1 root root 64 8\u6708 31 10 :59 4 -> /root/b.txt","title":"\u6587\u4ef6\u63cf\u8ff0\u7b26"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#_5","text":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 /etc/security/limits.conf # -- \u52a0\u5927\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e0e\u6700\u5927\u6253\u5f00\u7684\u8fdb\u7a0b\u6570 \"\"\" <domain><type><item><value> <domain> \u8868\u793a\u8981\u9650\u5236\u7684\u7528\u6237 <type> \u8bbe\u5b9a\u7c7b\u578b <item> \u8868\u793a\u53ef\u9009\u7684\u8d44\u6e90 <value> \u8868\u793a\u8981\u9650\u5236\u7684\u503c \"\"\" # -- 102400\u901a\u5e38\u591f\u7528\u4e86.\u6ca1\u6709\u4e00\u4e2a\u56fa\u5b9a\u7684\u6807\u51c6,\u8bbe\u7f6e\u5927\u4e86,\u82e5\u8fdb\u7a0bbug\u4f1a\u65e0\u9650\u5360\u7528\u8d44\u6e90,\u4e0d\u5b89\u5168 \u8bbe\u7f6e\u5c0f\u4e86\u4e0d\u591f\u7528,\u8981\u6743\u8861. [ root@localhost ~ ] # cat >>/etc/security/limits.conf<<EOF > * soft nofile 102400 > * hard nofile 102400 > * soft nproc 102400 > * hard nproc 102400 > EOF # -- \u91cd\u542f\u67e5\u770b [ root@localhost ~ ] # ulimit -u 102400 [ root@localhost ~ ] # ulimit -n 102400 \"\"\" Ps: \u8fd8\u6709\u4e2a\u914d\u7f6e\u6587\u4ef6\u66f4\u7cbe\u7ec6. /etc/security/limits.d/20-nproc.conf \u8be5\u6587\u4ef6\u53ea\u7528\u4e8e\u63a7\u5236\u7528\u6237\u6700\u591a\u540c\u65f6\u6253\u5f00\u7684\u8fdb\u7a0b\u6570\u76ee,\u4f18\u5148\u7ea7\u9ad8\u4e8e/etc/security/limits.conf \u91cd\u542f\u540e,\u4fee\u6539\u751f\u6548.. \"\"\" [ root@egon ~ ] # cat /etc/security/limits.d/20-nproc.conf egon1 soft nproc 3 # \u7528\u6237egon1\u6700\u591a\u540c\u65f6\u5f003\u4e2a\u8fdb\u7a0b egon2 soft nproc 4 # \u7528\u6237egon2\u6700\u591a\u540c\u65f6\u5f004\u4e2a\u8fdb\u7a0b * soft nproc 5 # \u5176\u4ed6\u7528\u6237\u6700\u591a\u540c\u65f6\u5f005\u4e2a\u8fdb\u7a0b root soft nproc unlimited # root\u7528\u6237\u65e0\u9650\u5236","title":"\u6c38\u4e45\u914d\u7f6e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/19_%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/#_6","text":"\u25cb \u5f00\u542fVT\u548cHT VT \u865a\u62df\u5316\u4e4b\u610f, Linux\u865a\u62df\u51fa\u591a\u4e2aOS\u8fd0\u884c\u5728\u4e00\u4e2a\u4e3b\u673a\u4e4b\u4e0a.. HT \u8d85\u7ebf\u7a0b\u6280\u672f... Ps: \u5b9e\u4f53\u673a\u624d\u4f1a\u914d\u7f6e,\u82e5\u7528\u7684\u963f\u91cc\u4e91(\u672c\u8eab\u5c31\u662fvm)\u662f\u4e0d\u9700\u8981\u914d\u7f6e\u7684.. \u25cb \u5173\u95ed\u5b9e\u4f53\u673a\u7684CPU\u8282\u80fd \u25cb \u5173\u95edNetworkManager \u8fdb\u884c\u7f51\u5361\u7ed1\u5b9a\u7684\u8bdd,\u5fc5\u987b\u5173\u6389 \u25cb Jumbo frames \u4e07\u5146\u7f51\u5361MTU=9000,\u4ea4\u6362\u673a\u4e5f\u8981\u8fdb\u884c\u76f8\u5e94\u7684\u8bbe\u7f6e \u25cb \u8c03\u6574swappiness linux\u5185\u5b58\u591f\u7528,\u6709\u65f6\u5019\u4e5f\u4f1a\u4f7f\u7528swap\u5206\u533a..(linux\u5e95\u5c42\u7b97\u6cd5\u51b3\u5b9a\u7684) \u4f46\u4f1a\u5bfc\u81f4\u6027\u80fd\u6548\u7387\u964d\u4f4e.. \u6240\u4ee5\u5728\u5185\u5b58\u591f\u7528\u7684\u65f6\u5019,\u8ba9\u5b83\u5c3d\u53ef\u80fd\u7684\u5c11\u7528swap\u5206\u533a.. \u5efa\u8bae\u8c03\u6574\u4e3a10 echo \"vm.swappiness = 10\" | tee -a /etc/sysctl.conf sysctl -p \u6216\u8005 reboot \u6c38\u4e45\u751f\u6548 \u25cb \u8c03\u6574Kernel pid max \u5185\u6838\u6700\u5927\u7684pid\u4e2a\u6570","title":"\u5176\u4ed6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","text":"Shell\u4ecb\u7ecd \u00b6 \u6ce8\u610f\u54e6,\u63d0\u53cashell,\u53ef\u80fd\u6307\u7684\u662f shell\u547d\u4ee4/shell\u7f16\u7a0b\u8bed\u8a00 ,\u4e5f\u53ef\u80fd\u6307\u7684\u662f shell\u89e3\u91ca\u5668 .. [\u5c42\u5c42\u5c01\u88c5] : \u786c\u4ef6 -- \u5185\u6838 -- \u7cfb\u7edf\u63a5\u53e3 -- shell\u89e3\u91ca\u5668 \u6700\u540e, shell\u547d\u4ee4\u8c03\u7528 \u5373shell\u89e3\u91ca\u5668\u662f\u5bf9\u7cfb\u7edf\u63a5\u53e3\u7684\u5c01\u88c5!(\u5728\u7cfb\u7edf\u63a5\u53e3\u5916\u53c8\u52a0\u4e86\u4e00\u5c42\u58f3.) shell\u53ea\u662f\u4e00\u79cd\u7edf\u79f0,\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u7684\u662f\u4e00\u79cdshell\u540d\u4e3a bash\u89e3\u91ca\u5668 .. \u7528shell\u8bed\u8a00\u5199\u51fa\u6765\u7684\u7a0b\u5e8f(\u4e00\u5806shell\u547d\u4ee4\u7ec4\u5408\u5728\u4e00\u8d77)\u901a\u5e38\u79f0\u4e4b\u4e3a shell\u811a\u672c .. Ps: \u5e38\u89c1\u7684shell\u89e3\u91ca\u5668 -- sh\u3001bash\u3001dash\u7b49 shell\u5b9e\u73b0\u5bf9linux\u7684\u7ba1\u7406: 1 > \u6587\u4ef6\u7ba1\u7406 ( linux\u4e00\u5207\u7686\u6587\u4ef6 ) 2 > \u7528\u6237\u4e0e\u6743\u9650\u7ba1\u7406 3 > \u8fdb\u7a0b\u7ba1\u7406 4 > \u78c1\u76d8\u7ba1\u7406 5 > \u7f51\u7edc\u7ba1\u7406 6 > \u8f6f\u4ef6\u7ba1\u7406 [ POSIX ] \u5168\u79f0 -- \u53ef\u79fb\u690d\u7684\u64cd\u4f5c\u7cfb\u7edf\u63a5\u53e3 Linux\u652f\u6301\u7684POSIX\u662f\u4e00\u79cd\u89c4\u8303,\u4fdd\u8bc1\u8f6f\u4ef6\u7684\u53ef\u79fb\u690d\u6027.. ( \u8ba9\u5f00\u53d1\u7684\u8f6f\u4ef6\u53ef\u4ee5\u5728unix\u3001mac\u3001centos..\u4e0a\u90fd\u8fd0\u884c\u6210\u529f ) \u7b80\u5355\u53ef\u4ee5\u7406\u89e3POSIX\u6807\u51c6\u662f\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u8bbe\u8ba1API\u65f6\u9075\u5faa\u7684\u89c4\u8303,\u4e00\u5957\u89c4\u8303\u7684\u7cfb\u7edf\u8c03\u7528\u96c6 Shell\u4ea4\u4e92\u5f0f\u73af\u5883 \u00b6 shell\u89e3\u91ca\u5668\u7684\u4ea4\u4e92\u5f0f\u73af\u5883, \u7528\u4e8e\u6267\u884c\u4e00\u7cfb\u5217\u547d\u4ee4\u6765\u95f4\u63a5\u7ba1\u7406\u786c\u4ef6.. \u547d\u4ee4\u63d0\u793a\u7b26 \u00b6 [ root@xxx ~ ] # [ root@xxx ~ ] $ | \u63d0\u793a\u7b26 | \u542b\u4e49 | | ------ | ------------------------------------------------- | | root | \u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 | | @ | \u5206\u9694\u7b26 | | xxx | \u4e3b\u673a\u540d | | \uff5e | \u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939/\u8def\u5f84 \u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4e2a\u4eba\u6587\u4ef6\u5939,\u5bb6\u76ee\u5f55/\u4e3b\u76ee\u5f55 | | # | \u8d85\u7ea7\u7ba1\u7406\u5458\u7528\u6237 | | $ | \u666e\u901a\u7528\u6237 | Ps: unix\u8ba4\u4e3a\u547d\u4ee4\u8fd0\u884c\u5b8c\u6bd5\u540e\u6ca1\u6709\u63d0\u793a\u4fbf\u662f\u6700\u597d\u7684\u63d0\u793a,\u5373\u7ed3\u679c\u6b63\u786e, linux\u7ee7\u627f\u4e86unix\u7684\u4f18\u826f\u4f20\u7edf.. \u6dfb\u52a0\u8d26\u6237/\u4fee\u6539\u5bc6\u7801 \u00b6 <\u6dfb\u52a0\u8d26\u6237,\u8bbe\u7f6eor\u4fee\u6539\u8d26\u6237\u5bc6\u7801> # -- \u4ea4\u4e92\u5f0f [ root@localhost ~ ] # useradd dc [ root@localhost ~ ] # passwd dc # \u4ea4\u4e92\u5f0f\u8f93\u5165 \u66f4\u6539\u7528\u6237 dc \u7684\u5bc6\u7801. \u65b0\u7684 \u5bc6\u7801: \u65e0\u6548\u7684\u5bc6\u7801: \u5bc6\u7801\u5c11\u4e8e 8 \u4e2a\u5b57\u7b26 \u91cd\u65b0\u8f93\u5165\u65b0\u7684\u5bc6\u7801: passwd\uff1a\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0. # -- \u975e\u4ea4\u4e92\u5f0f # echo \u6253\u5370 # \uff5c\u7ba1\u9053 \u3010\u7cbe\u9ad3--\u5171\u4eab\u5185\u5b58\u3011 # \u5de6\u8fb9\u547d\u4ee4\u8fd0\u884c\u540e\u662f\u4e00\u4e2a\u8fdb\u7a0b,\u8fd0\u884c\u4ea7\u751f\u7684\u7ed3\u679c\u653e\u5230\u4e86\u7ba1\u9053\u4e2d;\u53f3\u8fb9\u7684\u547d\u4ee4\u4ece\u7ba1\u9053\u4e2d\u53d6\u51fa\u7ed3\u679c\u505a\u540e\u7eed\u7ed3\u679c # \u8fdb\u7a0b\u4e0e\u8fdb\u7a0b\u4e4b\u95f4\u662f\u76f8\u4e92\u9694\u79bb\u7684,\u4f46\uff5c\u7ba1\u9053\u5b9e\u73b0\u4e86\u5171\u4eab\u5185\u5b58\uff01\uff01\uff01 # \u6ce8\u610f\u54e6,\u6240\u6709\u7684\u547d\u4ee4\u53ef\u4ee5\u5f80\u7ba1\u9053\u91cc\u4e22\u4e1c\u897f\u4f46\u4e0d\u662f\u6240\u6709\u547d\u4ee4\u53ef\u4ee5\u4ece\u7ba1\u9053\u91cc\u53d6\u4e1c\u897f! # \u90a3\u548b\u529e\u5462\uff1fxargs\u53ef\u4ee5\u4f7f\u4e0d\u652f\u6301\u4ece\u7ba1\u9053\u53d6\u4e1c\u897f\u7684\u547d\u4ee4\u53d8\u5f97\u652f\u6301 # --stdin\u6807\u51c6\u8f93\u5165,\u800c\u4e0d\u662f\u4ea4\u4e92\u5f0f\u7684\u952e\u76d8\u8f93\u5165 [ root@localhost ~ ] # echo \"123456\" | passwd dc --stdin \u66f4\u6539\u7528\u6237 dc \u7684\u5bc6\u7801. passwd: \u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0. Shell\u547d\u4ee4\u7684\u8bed\u6cd5\u683c\u5f0f \u00b6 \u7531\u4e09\u90e8\u5206\u7ec4\u6210 1> \u547d\u4ee4(\u5fc5\u9009): \u5c31\u662f\u4e00\u4e2a\u5355\u8bcd,\u5bf9\u5e94\u7740\u4e00\u4e2a\u529f\u80fd/\u7a0b\u5e8f. \u8fd0\u884c\u4e00\u6761\u547d\u4ee4\u5c31\u662f\u542f\u52a8\u4e86\u4e00\u4e2a\u8fdb\u7a0b! 2> \u9009\u9879(\u53ef\u9009): \u5bf9\u547d\u4ee4\u7684\u63cf\u8ff0,\u63a7\u5236\u547d\u4ee4\u5982\u4f55\u5177\u4f53\u7684\u8fd0\u884c \u901a\u5e38\u4ee5 - -- + \u5f00\u5934 3> \u53c2\u6570(\u53ef\u9009): \u547d\u4ee4\u7684\u64cd\u4f5c\u5bf9\u8c61 linux\u662f\u5355\u6839\u7ed3\u6784,\u6240\u6709\u7684\u6587\u4ef6\u5939\u90fd\u662f / \u7684\u540e\u4ee3! ls # \u9ed8\u8ba4\u662f\u5bb6\u76ee\u5f55 ls -l # \u7528\u5217\u8868\u7684\u683c\u5f0f ls -l /boot # \u7528\u5217\u8868\u5f62\u5f0f\u67e5\u770b/boot\u6587\u4ef6\u5939\u4e0b\u7684\u5185\u5bb9 bash\u7279\u6027 \u00b6 Tab\u547d\u4ee4\u8865\u5168 \u00b6 \u6309Tab\u952e\u8865\u5168, \u591a\u4e2a\u7684\u8bdd\u8fde\u6309\u4e24\u4e0b,\u4f1a\u63d0\u793a\u6240\u6709... \u547d\u4ee4 \u548c \u6587\u4ef6\u8def\u5f84 \u90fd\u80fd\u8865\u5168\uff01\uff01 \u5feb\u6377\u952e \u00b6 1> ctrl + l \u6216\u8005 clear --- \u6e05\u5c4f 2> ctrl + c --- \u7ec8\u6b62\u547d\u4ee4\u7684\u8fd0\u884c 3> ctrl + d \u6216\u8005 exit --- \u9000\u51fa\u767b\u5f55 ctrl + d --- \u547d\u4ee4\u884c\u8f93\u5165\u4e86\u547d\u4ee4,\u5c06\u5149\u6807\u6240\u5728\u5b57\u7b26\u5f80\u540e\u4e00\u4e2a\u4e2a\u7684\u5220\u9664 4> ctrl + a --- \u5149\u6807\u5feb\u901f\u56de\u5230\u547d\u4ee4\u884c\u9996 5> ctrl + e --- \u5149\u6807\u5feb\u901f\u56de\u5230\u547d\u4ee4\u884c\u5c3e \u5386\u53f2\u547d\u4ee4 \u00b6 history \u67e5\u770b\u5386\u53f2\u547d\u4ee4 history -c echo \"\" > ~/.bash_history \u6e05\u7a7a\u5386\u53f2\u547d\u4ee4 \u200b \u7b2c\u4e00\u4e2a\u4f1a\u6e05\u9664\u5f53\u524d\u7528\u6237\u6572\u8fc7\u7684\u6240\u6709\u547d\u4ee4; \u7b2c\u4e8c\u4e2a\u4f1a\u6e05\u9664\u5f53\u524d\u7528\u6237\u6b64\u6b21\u767b\u5f55\u4e4b\u524d\u6572\u8fc7\u7684\u8bb0\u5f55,\u5373 \u9000\u51fa\u767b\u5f55\u65f6\u624d\u4f1a\u8bb0\u5f55 \u5230\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b\u7684\u4e00\u4e2a\u540d\u4e3a .bash_history \u7684\u9690\u85cf\u6587\u4ef6\u4e2d \u200b !6 \u6267\u884c\u5386\u53f2\u547d\u4ee4\u4e2d\u7b2c6\u6761\u547d\u4ee4 \u200b !cat \u641c\u7d22\u5386\u53f2\u547d\u4ee4\u4e2d\u6700\u8fd1\u4e00\u4e2a\u4ee5cat\u5b57\u7b26\u5f00\u5934\u7684\u547d\u4ee4 \u200b !$ \u53d6\u4e0a\u6761\u547d\u4ee4\u7684 \u6700\u540e\u4e00\u4e2a \u53c2\u6570. [ root@172 ~ ] # history 1 clear 2 ls 3 cat /etc/passwd 4 clear 5 history 6 cat /etc/sysconfig/network-scripts/ifcfg-ens33 7 history [ root@172 ~ ] # !6 ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # !cat # \u8fd0\u884c\u7684\u662f\u6700\u8fd1\u7684\u90a3\u6761\u4ee5cat\u5f00\u5934\u7684\u5386\u53f2\u547d\u4ee4 ... ... ... [ root@172 ~ ] # ls /boot/ /opt/ /boot/: config-3.10.0-1160.66.1.el7.x86_64 config-3.10.0-1160.el7.x86_64 efi grub grub2 initramfs-0-rescue-be87405afe3b480da138503ccab0ebd2.img initramfs-3.10.0-1160.66.1.el7.x86_64.img initramfs-3.10.0-1160.el7.x86_64.img symvers-3.10.0-1160.66.1.el7.x86_64.gz symvers-3.10.0-1160.el7.x86_64.gz System.map-3.10.0-1160.66.1.el7.x86_64 System.map-3.10.0-1160.el7.x86_64 vmlinuz-0-rescue-be87405afe3b480da138503ccab0ebd2 vmlinuz-3.10.0-1160.66.1.el7.x86_64 vmlinuz-3.10.0-1160.el7.x86_64 /opt/: rh [ root@172 ~ ] # ls !$ ls /opt/ rh \u522b\u540d \u00b6 \u547d\u4ee4\u5c31\u662f\u7a0b\u5e8f,\u672c\u8d28\u5c31\u662f\u4ee3\u7801\u6587\u4ef6..\u5219\u80af\u5b9a\u4f1a\u6709\u8def\u5f84 \u6bd4\u5982: \u67e5\u770bls\u547d\u4ee4\u6240\u5728\u6587\u4ef6\u7684\u8def\u5f84/\u4f4d\u7f6e which ls \u5373\u5728linux\u4e0a\u5b89\u88c5\u597d\u8f6f\u4ef6,\u5c31\u662f\u65b0\u589e\u4e86\u4e9b\u8bb8\u547d\u4ee4\uff01\uff01 \u5982\u4f55\u53d6\u6d88\u522b\u540d\u6765\u8fd0\u884c\u547d\u4ee4 which ls \u67e5\u770b\u547d\u4ee4\u7684\u5b8c\u6574\u8def\u5f84,\u7136\u540e\u4ee5 \u7edd\u5bf9\u8def\u5f84/\u5b8c\u6574\u8def\u5f84 \u7684\u65b9\u5f0f\u8fd0\u884c; \u52a0\u53f3\u659c\u6760 \\ls unalias dc \u7ed9\u67d0\u6761\u547d\u4ee4\u8bbe\u7f6e\u522b\u540d alias dc=\"ls /etc/sysconfig/network-scripts/ifcfg-ens33\" \u6ce8\u610f\u54e6! \u6211\u4eec\u7ed9\u547d\u4ee4\u8bbe\u7f6e\u7684\u522b\u540d\u662f\u4e34\u65f6\u751f\u6548\u7684,\u6ca1\u6709\u5199\u5230\u6587\u4ef6\u91cc,\u91cd\u542f\u540e\u5c31\u6ca1\u4e86.. (linux\u4e2d\u901a\u5e38\u547d\u4ee4\u7684\u4fee\u6539\u90fd\u662f\u4e34\u65f6\u7684, \u6709\u4e2a\u522b\u547d\u4ee4\u9664\u5916..) # \u67e5\u770bls\u547d\u4ee4\u6587\u4ef6\u7684\u8def\u5f84 [ root@172 ~ ] # which ls # ls\u9ed8\u8ba4\u8bbe\u7f6e\u7684\u6709\u522b\u540d alias ls = 'ls --color=auto' /usr/bin/ls [ root@172 ~ ] # ls # \u6709\u989c\u8272(\u6587\u4ef6\u5939) anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # /usr/bin/ls --color=auto # \u6709\u989c\u8272 anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # /usr/bin/ls # \u6ca1\u6709\u989c\u8272 \u53d6\u6d88ls\u547d\u4ee4\u7684\u522b\u540d\u7684\u65b9\u5f0f\u4e00 anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # \\ls # \u6ca1\u6709\u989c\u8272 \u53d6\u6d88ls\u547d\u4ee4\u7684\u522b\u540d\u7684\u65b9\u5f0f\u4e8c anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # alias dc=\"ls /etc/sysconfig/network-scripts/ifcfg-ens33\" [ root@172 ~ ] # ls /etc/sysconfig/network-scripts/ifcfg-ens33 /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@172 ~ ] # dc /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@172 ~ ] # alias alias cp = 'cp -i' alias dc = 'ls /etc/sysconfig/network-scripts/ifcfg-ens33' alias egrep = 'egrep --color=auto' alias fgrep = 'fgrep --color=auto' alias grep = 'grep --color=auto' alias l. = 'ls -d .* --color=auto' alias ll = 'ls -l --color=auto' alias ls = 'ls --color=auto' alias mv = 'mv -i' alias rm = 'rm -i' alias which = 'alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde' [ root@172 ~ ] # unalias dc \u547d\u4ee4\u67e5\u627e\u4f18\u5148\u7ea7 \u00b6 path\u53ef\u4ee5\u5b58\u653e\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u5939\uff01\uff01 hash\u8868\u547d\u4ee4\u7f13\u5b58\u673a\u5236.. bash\u67e5\u627e\u547d\u4ee4\u987a\u5e8f ==>\u4ee5\u8def\u5f84(\u7edd\u5bf9\u8def\u5f84,\u76f8\u5bf9\u8def\u5f84)\u5f00\u59cb\u547d\u4ee4 \u4f8b\u5982: /bin/ls \u6216 cd /bin; ./ls ==> alias \u522b\u540d ==> Compound Commands \u590d\u5408\u547d\u4ee4 ==> function ==> build_in \u5185\u7f6e\u547d\u4ee4 \u5982 cd,kill,pwd,alias,echo\u7b49 \u53ef\u4ee5\u7528\"type -a \u547d\u4ee4\"\u67e5\u770b ==> hash ==> $PATH \u73af\u5883\u53d8\u91cf \u67e5\u770b\u73af\u5883\u53d8\u91cfecho $PATH ==> error: command not found bash\u5185\u7f6e\u7684\u547d\u4ee4 \u00b6 \u25b2 bash\u89e3\u91ca\u5668\u5185\u5d4c/\u5185\u7f6e/\u81ea\u5e26\u7684\u547d\u4ee4 [ root@172 ~ ] # type pwd pwd \u662f shell \u5185\u5d4c [ root@172 ~ ] # type cd cd \u662f shell \u5185\u5d4c [ root@172 ~ ] # type echo echo \u662f shell \u5185\u5d4c [ root@172 ~ ] # type ifconfig # ifconfig\u4e0d\u662f\u5185\u5d4c\u547d\u4ee4,\u662f\u4ece\u5b89\u88c5\u7684\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5305net-tools\u4e2d\u6765\u7684 ifconfig \u662f /usr/sbin/ifconfig [ root@172 ~ ] # type ls # ls\u4e0d\u662f\u5185\u5d4c\u547d\u4ee4 ls \u662f ` ls --color = auto ' \u7684\u522b\u540d [ root@172 ~ ] # type /usr/bin/ls /usr/bin/ls \u662f /usr/bin/ls \u590d\u5408\u547d\u4ee4 \u00b6 \u25b2 <\u590d\u5408\u547d\u4ee4> # do ... done \u770b\u8d77\u6765\u53ea\u6709\u4e00\u6761,\u5b9e\u5219\u662f\u56db\u6761 [ root@172 ~ ] # for((i=0;i<=3;i++))do echo 123;done 123 123 123 123 \u51fd\u6570 \u00b6 \u25b2 <\u51fd\u6570> # \u6ce8\u610f{}\u5de6\u53f3\u4e24\u8fb9\u6709\u7a7a\u683c [ root@172 ~ ] # function f(){ echo 123; echo 456; } [ root@172 ~ ] # f 123 456 path\u73af\u5883\u53d8\u91cf \u00b6 Q: \u60f3\u5728\u4efb\u610f\u5730\u65b9,\u4e0d\u52a0\u524d\u7f00/\u4e0d\u4ee5\u7edd\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8fd0\u884c\u67d0\u6761\u547d\u4ee4/\u65b0\u5b89\u88c5\u7684\u8f6f\u4ef6,\u600e\u4e48\u641e\uff1f A: \u628a\u65b0\u5b89\u88c5\u7684\u8f6f\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u5939\u6dfb\u52a0\u5230PATH\u91cc\uff01 \u25b2 <path\u73af\u5883\u53d8\u91cf> path\u73af\u5883\u53d8\u91cf\u7684\u503c\u5728\u6587\u4ef6\u91cc. # echo\"\u6253\u5370\"PATH\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u7684\u503c $\u7b26\u53f7\u662f\u53d6PATH\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u7684\u503c # \u6253\u5370\u7ed3\u679c\u662f\u7528\":\"\u5206\u9694\u7684 # \u6211\u4eec\u77e5\u9053ls\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u8def\u5f84\u662f/usr/bin/ls \u6240\u4ee5\u5728\u547d\u4ee4\u884c\u8f93\u5165ls,\u4f1a\u53bbPATH\u91cc\u9762\u627e,\u5728/usr/bin\u4e2d\u627e\u5230\u5566 # path\u91cc\u9762\u5305\u542bbash\u5185\u7f6e\u7684\u4ee5\u53ca\u4ece\u5b89\u88c5\u7684\u7b2c\u4e09\u65b9\u5305\u91cc\u5f97\u5230\u7684\u547d\u4ee4 \u5373path\u53ef\u4ee5\u5b58\u653e\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u5939\uff01\uff01 [ root@172 ~ ] # echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin hash \u00b6 \u25b2 <hash> \u80fd\u4ece\u5185\u5b58\u53d6\u5c31\u522b\u4ece\u786c\u76d8\u53d6,\u6240\u4ee5linux\u4e2d\u4e00\u5f20hash\u8868. hash\u8868\u7f13\u5b58\u7684\u662f: \u6211\u4eec\u89e3\u9501PATH\u4ece\u786c\u76d8\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7684\u547d\u4ee4 [ root@172 ~ ] # hash -r # \u6e05\u7a7ahash\u8868 [ root@172 ~ ] # hash hash: \u54c8\u5e0c\u8868\u4e3a\u7a7a [ root@172 ~ ] # ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # hash \u547d\u4e2d \u547d\u4ee4 1 /usr/bin/ls \u67e5\u770b\u547d\u4ee4\u5e2e\u52a9\u4fe1\u606f \u00b6 \u5c0f\u767d\u4e00\u4e0a\u6765,\u4e0d\u8981\u76f4\u63a5\u53bb\u7814\u7a76\u5b98\u65b9\u6587\u6863,\u76f4\u63a5 \u4ece\u5165\u95e8\u5230\u653e\u5f03 Hhhh. \u7b2c\u4e00\u9009\u62e9\u662f\u767e\u5ea6\u8c37\u6b4c. \u5b98\u65b9\u6587\u6863\u8ffd\u6c42\u7684\u662f\u9762\u9762\u4ff1\u5230,\u7528\u4e8e\u6df1\u5165\u7814\u7a76\u548c\u7ea0\u9519\u7528\u7684... 1> Baidu, Google 2> -- help ls --help \u6709\u4e9b\u547d\u4ee4\u6ca1\u6709\u63d0\u4f9b--help\u9009\u9879; \u7ed3\u679c\u6ca1\u6709man\u547d\u4ee4\u5168\u9762 3> help\u547d\u4ee4 4> man\u624b\u518c man ls man -a ls eg: man cp \u5e95\u90e8\u8f93\u5165/-f\u4f1a\u5c06\u6240\u6709\u7684-f\u5730\u65b9\u9ad8\u4eae \u6309n\u8df3\u8f6c\u5230\u4e0b\u4e00\u4e2a \u57fa\u7840\u5e38\u7528\u547d\u4ee4 \u00b6 \u8bbe\u7f6e\u4e3b\u673a\u540d \u00b6 \u25cb \u67e5\u770b\u4e3b\u673a\u540d: hostname Ps: vim /etc/hosts \u96c6\u7fa4\u91cc\u9762\u7684\u4e3b\u673a\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u6837\u7684hosts\u6587\u4ef6,\u901a\u8fc7\u4e3b\u673a\u540d\u8fdb\u884c\u901a\u4fe1.. \u25cb \u4fee\u6539\u4e3b\u673a\u540d: \u65b9\u5f0f\u4e00(\u6c38\u4e45\u4fee\u6539, \u7acb\u5373\u751f\u6548): hostnamectl set-hostname web01 \u65b9\u5f0f\u4e8c(\u6c38\u4e45\u4fee\u6539, \u91cd\u542f\u751f\u6548): vim /etc/hostname \u8bbe\u7f6e\u9ed8\u8ba4\u542f\u52a8\u7ea7\u522b \u00b6 # \u5f00\u673a\u542f\u52a8\u7ea7\u522b\u53d8\u4e3a5 \u56fe\u5f62\u754c\u9762 systemctl set-default graphical.target # \u5f00\u673a\u542f\u52a8\u7ea7\u522b\u53d8\u4e3a3 \u5b57\u7b26\u7ec8\u7aef systemctl set-default multi-user.target # \u91cd\u542f\u673a\u5668 reboot # \u8865\u5145: \u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u7684\u53d1\u5e03\u7684\u7248\u672c\u4fe1\u606f [ root@localhost ~ ] # cat /etc/redhat-release CentOS Linux release 7 .9.2009 ( Core ) [ root@localhost ~ ] # uname -a Linux localhost.localdomain 3 .10.0-1160.66.1.el7.x86_64 1 SMP Wed May 18 16 :02:34 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux [ root@localhost ~ ] # uname -r \u67e5\u770bOS\u5185\u6838\u7248\u672c 3 .10.0-1160.66.1.el7.x86_64 \u8bbe\u7f6e\u65f6\u95f4 \u00b6 \u96c6\u7fa4\u5316\u4f5c\u4e1a\u8bbe\u7f6e\u65f6\u95f4\u662f\u5f88\u91cd\u8981\u7684,\u5c31\u50cf\u6253\u4ed7\u4e00\u6837,\u8981\u5bf9\u8868\u561b! \u25cb \u67e5\u770b\u65f6\u533a: timedatectl status \u25cb \u5217\u51fa\u53ef\u7528\u65f6\u533a: timedatectl list-timezones \u25cb \u8bbe\u7f6e\u65f6\u533a: timedatectl set-timezone \"Asia/Shanghai\" timedatectl set-timezone UTC \u25cb \u67e5\u770bOS\u7684\u7cfb\u7edf\u65f6\u95f4: date \u25cb \u8bbe\u7f6e\u67e5\u770b\u7cfb\u7edf\u65f6\u95f4\u663e\u793a\u7684\u683c\u5f0f: date \"+%Y-%m-%d %H:%M:%S\" \u25cb \u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4: date -s \"2022-02-22 22:22:22\" \u25cb \u67e5\u770b\u786c\u4ef6\u65f6\u95f4: hwclock \u25cb \u4ece\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4: hwclock -s \u25cb \u4ece\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f: hwclock -w \u6709\u4e2a\u5199\u5230\u786c\u4ef6CMOS\u7684\u8fc7\u7a0b,\u4f1a\u7b49\u4e00\u4f1a.. \u25cb \u5c06\u4e24\u4e2a\u65f6\u95f4\u4e0e\u516c\u7f51\u4e0a\u7684\u65f6\u95f4\u670d\u52a1\u5668\u8fdb\u884c\u540c\u6b65! ntpdate ntp1.aliyun.com Ps: \u82e5\u4e3b\u673a\u4e0a\u6709ntp\u670d\u52a1,\u91cd\u542f\u540e\u4f1a\u81ea\u52a8\u5e2e\u5fd9\u540c\u6b65...\u6240\u4ee5\u5bf9\u4e24\u4e2a\u65f6\u95f4\u7684\u4fee\u6539\u4f1a\u5931\u6548. timedatectl set-ntp no \u5173\u95ed\u9ed8\u8ba4\u7684\u65f6\u95f4\u540c\u6b65 timedatectl set-ntp true \u5f00\u59cb\u81ea\u52a8\u65f6\u95f4\u540c\u6b65\u5230\u8fdc\u7a0bNTP\u670d\u52a1\u5668 timedatectl set-ntp false \u7981\u7528NTP\u65f6\u95f4\u540c\u6b65 CST\u4ee3\u8868\u662f\u4e2d\u56fd\u4e1c\u516b\u533a\u7684\u65f6\u95f4 ; UTC\u4ee3\u8868\u7684\u662f\u4e16\u754c\u6807\u51c6\u65f6\u95f4,\u7ecf\u8fc7\u82f1\u56fd\u683c\u6797\u5c3c\u6cbb\u5929\u6587\u53f0\u7684\u4e00\u6761\u7ecf\u7ebf,\u672c\u521d\u5b50\u5348\u7ebf UTC\u6bd4CST\u65e9,\u76f8\u5dee8\u5c0f\u65f6. \u5728Linux\u4e2d\u65f6\u95f4\u5206\u4e24\u79cd \u786c\u4ef6\u65f6\u95f4: BIOS\u4e0a\u7684\u65f6\u95f4,\u65ad\u7535\u540e\u65f6\u95f4\u82af\u7247\u7b97\u7684\u65f6\u95f4,\u901a\u8fc7BIOS\u754c\u9762\u67e5\u770b\u7684\u8bdd,\u4f1a\u53d1\u73b0\u786c\u4ef6\u4f7f\u7528\u7684\u662fUTC \u7cfb\u7edf\u65f6\u95f4: \u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u95f4 \u6211\u4eec\u4f7f\u7528\u7684\u662fCST \u6240\u4ee5\u5f00\u673a\u540e,OS\u4f1a\u8bfb\u53d6BIOS\u4e0a\u7684\u65f6\u95f4,\u5728\u5b83\u57fa\u7840\u4e0a\u52a08\u5c0f\u65f6.. [ root@localhost ~ ] # date 2022\u5e74 07\u6708 05\u65e5 \u661f\u671f\u4e8c 15 :04:55 CST [ root@localhost ~ ] # date \"+%Y-%m-%d %H:%M:%S\" 2022 -07-05 15 :12:44 [ root@localhost ~ ] # date -s \"2022-02-22 22:22:22\" 2022\u5e74 02\u6708 22\u65e5 \u661f\u671f\u4e8c 22 :22:22 CST [ root@localhost ~ ] # hwclock 2022\u5e7407\u670805\u65e5 \u661f\u671f\u4e8c 15\u65f637\u520609\u79d2 -0.383665 \u79d2 [ root@localhost ~ ] # hwclock -s [ root@localhost ~ ] # date 2022\u5e74 07\u6708 05\u65e5 \u661f\u671f\u4e8c 15 :37:14 CST [ root@localhost ~ ] # ntpdate ntp1.aliyun.com 5 Jul 15 :42:19 ntpdate [ 4648 ] : adjust time server 120 .25.115.20 offset 0 .147526 sec <\u540c\u6b65\u5931\u8d25\u6392\u9519\u601d\u8def \u7f51\u7edc\u95ee\u9898> \u7f51\u7edc\u6392\u9664\u5177\u4f53\u6b65\u9aa4\u67e5\u770b: https://zhuanlan.zhihu.com/p/337256553 step1: ping ntp1.aliyun.com \u82e5ping\u4e0d\u901a,\u8fd9\u6d89\u53ca\u5230\u5916\u7f51,\u90a3\u5c31\u8ddf\u7f51\u5173\u6709\u5173 step2: route -n \u62ff\u5230\u7f51\u5173\u5730\u5740172.16.150.2 step3: ping 172.16.150.2 \u82e5ping\u4e0d\u901a,\u786e\u5b9a\u7f51\u5173\u7684\u95ee\u9898,\u770b\u7f51\u5361\u6709\u65e0\u5173\u8054\u4e0a\u3001\u770b\u672c\u5730\u7f51\u7edc\u9002\u914d\u5668VMnet8\u662f\u5426\u542f\u7528 step4: \u5728CentOS\u7cfb\u7edf\u4e0a,\u76ee\u524d\u6709NetworkManager\u548cnetwork\u4e24\u79cd\u7f51\u7edc\u7ba1\u7406\u5de5\u5177 \u4f9d\u6b21\u6267\u884c\u4e0b\u9762\u4e09\u6761\u547d\u4ee4: systemctl stop NetworkManager # \u5173\u6389 systemctl disable NetworkManager # \u5f00\u673a\u4e0d\u542f\u52a8 systemctl restart network # \u91cd\u542f\u7f51\u7edc\u670d\u52a1 step5: \u540c\u6b65\u5931\u8d25,\u8fd8\u6709\u53ef\u80fd\u662fSElinux\u9632\u706b\u5899\u7684\u95ee\u9898. shutdown \u00b6 \u6ce8\u9500\u767b\u5f55\u7684\u8d26\u53f7 logout exit ctrl+d \u5173\u673a init 0 \u7ea7\u522b0 poweroff \u65ad\u7535\u6e90 shutdown -h now shutdown -h 0 \u7acb\u523b\u5173\u673a shutdown -h 11:30 \u5b9a\u70b9\u5173\u673a shutdown -h 10 10\u5206\u949f\u540e\u5173\u673a halt \u5173\u6389\u7684\u662fOS\u7684\u8fd0\u884c,\u8fd8\u9700\u8981\u81ea\u5df1\u65ad\u7535.. \u91cd\u542f init 6 \u7ea7\u522b6 shutdown -r now \u53d6\u6d88\u6b63\u5728\u8fdb\u884c\u7684\u5173\u673a\u6216\u91cd\u542f shutdown -c","title":"\u521d\u8bc6shell\u4e0e\u57fa\u7840\u5e38\u7528\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#shell","text":"\u6ce8\u610f\u54e6,\u63d0\u53cashell,\u53ef\u80fd\u6307\u7684\u662f shell\u547d\u4ee4/shell\u7f16\u7a0b\u8bed\u8a00 ,\u4e5f\u53ef\u80fd\u6307\u7684\u662f shell\u89e3\u91ca\u5668 .. [\u5c42\u5c42\u5c01\u88c5] : \u786c\u4ef6 -- \u5185\u6838 -- \u7cfb\u7edf\u63a5\u53e3 -- shell\u89e3\u91ca\u5668 \u6700\u540e, shell\u547d\u4ee4\u8c03\u7528 \u5373shell\u89e3\u91ca\u5668\u662f\u5bf9\u7cfb\u7edf\u63a5\u53e3\u7684\u5c01\u88c5!(\u5728\u7cfb\u7edf\u63a5\u53e3\u5916\u53c8\u52a0\u4e86\u4e00\u5c42\u58f3.) shell\u53ea\u662f\u4e00\u79cd\u7edf\u79f0,\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u7684\u662f\u4e00\u79cdshell\u540d\u4e3a bash\u89e3\u91ca\u5668 .. \u7528shell\u8bed\u8a00\u5199\u51fa\u6765\u7684\u7a0b\u5e8f(\u4e00\u5806shell\u547d\u4ee4\u7ec4\u5408\u5728\u4e00\u8d77)\u901a\u5e38\u79f0\u4e4b\u4e3a shell\u811a\u672c .. Ps: \u5e38\u89c1\u7684shell\u89e3\u91ca\u5668 -- sh\u3001bash\u3001dash\u7b49 shell\u5b9e\u73b0\u5bf9linux\u7684\u7ba1\u7406: 1 > \u6587\u4ef6\u7ba1\u7406 ( linux\u4e00\u5207\u7686\u6587\u4ef6 ) 2 > \u7528\u6237\u4e0e\u6743\u9650\u7ba1\u7406 3 > \u8fdb\u7a0b\u7ba1\u7406 4 > \u78c1\u76d8\u7ba1\u7406 5 > \u7f51\u7edc\u7ba1\u7406 6 > \u8f6f\u4ef6\u7ba1\u7406 [ POSIX ] \u5168\u79f0 -- \u53ef\u79fb\u690d\u7684\u64cd\u4f5c\u7cfb\u7edf\u63a5\u53e3 Linux\u652f\u6301\u7684POSIX\u662f\u4e00\u79cd\u89c4\u8303,\u4fdd\u8bc1\u8f6f\u4ef6\u7684\u53ef\u79fb\u690d\u6027.. ( \u8ba9\u5f00\u53d1\u7684\u8f6f\u4ef6\u53ef\u4ee5\u5728unix\u3001mac\u3001centos..\u4e0a\u90fd\u8fd0\u884c\u6210\u529f ) \u7b80\u5355\u53ef\u4ee5\u7406\u89e3POSIX\u6807\u51c6\u662f\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u8bbe\u8ba1API\u65f6\u9075\u5faa\u7684\u89c4\u8303,\u4e00\u5957\u89c4\u8303\u7684\u7cfb\u7edf\u8c03\u7528\u96c6","title":"Shell\u4ecb\u7ecd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#shell_1","text":"shell\u89e3\u91ca\u5668\u7684\u4ea4\u4e92\u5f0f\u73af\u5883, \u7528\u4e8e\u6267\u884c\u4e00\u7cfb\u5217\u547d\u4ee4\u6765\u95f4\u63a5\u7ba1\u7406\u786c\u4ef6..","title":"Shell\u4ea4\u4e92\u5f0f\u73af\u5883"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_1","text":"[ root@xxx ~ ] # [ root@xxx ~ ] $ | \u63d0\u793a\u7b26 | \u542b\u4e49 | | ------ | ------------------------------------------------- | | root | \u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 | | @ | \u5206\u9694\u7b26 | | xxx | \u4e3b\u673a\u540d | | \uff5e | \u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939/\u8def\u5f84 \u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4e2a\u4eba\u6587\u4ef6\u5939,\u5bb6\u76ee\u5f55/\u4e3b\u76ee\u5f55 | | # | \u8d85\u7ea7\u7ba1\u7406\u5458\u7528\u6237 | | $ | \u666e\u901a\u7528\u6237 | Ps: unix\u8ba4\u4e3a\u547d\u4ee4\u8fd0\u884c\u5b8c\u6bd5\u540e\u6ca1\u6709\u63d0\u793a\u4fbf\u662f\u6700\u597d\u7684\u63d0\u793a,\u5373\u7ed3\u679c\u6b63\u786e, linux\u7ee7\u627f\u4e86unix\u7684\u4f18\u826f\u4f20\u7edf..","title":"\u547d\u4ee4\u63d0\u793a\u7b26"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_2","text":"<\u6dfb\u52a0\u8d26\u6237,\u8bbe\u7f6eor\u4fee\u6539\u8d26\u6237\u5bc6\u7801> # -- \u4ea4\u4e92\u5f0f [ root@localhost ~ ] # useradd dc [ root@localhost ~ ] # passwd dc # \u4ea4\u4e92\u5f0f\u8f93\u5165 \u66f4\u6539\u7528\u6237 dc \u7684\u5bc6\u7801. \u65b0\u7684 \u5bc6\u7801: \u65e0\u6548\u7684\u5bc6\u7801: \u5bc6\u7801\u5c11\u4e8e 8 \u4e2a\u5b57\u7b26 \u91cd\u65b0\u8f93\u5165\u65b0\u7684\u5bc6\u7801: passwd\uff1a\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0. # -- \u975e\u4ea4\u4e92\u5f0f # echo \u6253\u5370 # \uff5c\u7ba1\u9053 \u3010\u7cbe\u9ad3--\u5171\u4eab\u5185\u5b58\u3011 # \u5de6\u8fb9\u547d\u4ee4\u8fd0\u884c\u540e\u662f\u4e00\u4e2a\u8fdb\u7a0b,\u8fd0\u884c\u4ea7\u751f\u7684\u7ed3\u679c\u653e\u5230\u4e86\u7ba1\u9053\u4e2d;\u53f3\u8fb9\u7684\u547d\u4ee4\u4ece\u7ba1\u9053\u4e2d\u53d6\u51fa\u7ed3\u679c\u505a\u540e\u7eed\u7ed3\u679c # \u8fdb\u7a0b\u4e0e\u8fdb\u7a0b\u4e4b\u95f4\u662f\u76f8\u4e92\u9694\u79bb\u7684,\u4f46\uff5c\u7ba1\u9053\u5b9e\u73b0\u4e86\u5171\u4eab\u5185\u5b58\uff01\uff01\uff01 # \u6ce8\u610f\u54e6,\u6240\u6709\u7684\u547d\u4ee4\u53ef\u4ee5\u5f80\u7ba1\u9053\u91cc\u4e22\u4e1c\u897f\u4f46\u4e0d\u662f\u6240\u6709\u547d\u4ee4\u53ef\u4ee5\u4ece\u7ba1\u9053\u91cc\u53d6\u4e1c\u897f! # \u90a3\u548b\u529e\u5462\uff1fxargs\u53ef\u4ee5\u4f7f\u4e0d\u652f\u6301\u4ece\u7ba1\u9053\u53d6\u4e1c\u897f\u7684\u547d\u4ee4\u53d8\u5f97\u652f\u6301 # --stdin\u6807\u51c6\u8f93\u5165,\u800c\u4e0d\u662f\u4ea4\u4e92\u5f0f\u7684\u952e\u76d8\u8f93\u5165 [ root@localhost ~ ] # echo \"123456\" | passwd dc --stdin \u66f4\u6539\u7528\u6237 dc \u7684\u5bc6\u7801. passwd: \u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0.","title":"\u6dfb\u52a0\u8d26\u6237/\u4fee\u6539\u5bc6\u7801"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#shell_2","text":"\u7531\u4e09\u90e8\u5206\u7ec4\u6210 1> \u547d\u4ee4(\u5fc5\u9009): \u5c31\u662f\u4e00\u4e2a\u5355\u8bcd,\u5bf9\u5e94\u7740\u4e00\u4e2a\u529f\u80fd/\u7a0b\u5e8f. \u8fd0\u884c\u4e00\u6761\u547d\u4ee4\u5c31\u662f\u542f\u52a8\u4e86\u4e00\u4e2a\u8fdb\u7a0b! 2> \u9009\u9879(\u53ef\u9009): \u5bf9\u547d\u4ee4\u7684\u63cf\u8ff0,\u63a7\u5236\u547d\u4ee4\u5982\u4f55\u5177\u4f53\u7684\u8fd0\u884c \u901a\u5e38\u4ee5 - -- + \u5f00\u5934 3> \u53c2\u6570(\u53ef\u9009): \u547d\u4ee4\u7684\u64cd\u4f5c\u5bf9\u8c61 linux\u662f\u5355\u6839\u7ed3\u6784,\u6240\u6709\u7684\u6587\u4ef6\u5939\u90fd\u662f / \u7684\u540e\u4ee3! ls # \u9ed8\u8ba4\u662f\u5bb6\u76ee\u5f55 ls -l # \u7528\u5217\u8868\u7684\u683c\u5f0f ls -l /boot # \u7528\u5217\u8868\u5f62\u5f0f\u67e5\u770b/boot\u6587\u4ef6\u5939\u4e0b\u7684\u5185\u5bb9","title":"Shell\u547d\u4ee4\u7684\u8bed\u6cd5\u683c\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#bash","text":"","title":"bash\u7279\u6027"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#tab","text":"\u6309Tab\u952e\u8865\u5168, \u591a\u4e2a\u7684\u8bdd\u8fde\u6309\u4e24\u4e0b,\u4f1a\u63d0\u793a\u6240\u6709... \u547d\u4ee4 \u548c \u6587\u4ef6\u8def\u5f84 \u90fd\u80fd\u8865\u5168\uff01\uff01","title":"Tab\u547d\u4ee4\u8865\u5168"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_3","text":"1> ctrl + l \u6216\u8005 clear --- \u6e05\u5c4f 2> ctrl + c --- \u7ec8\u6b62\u547d\u4ee4\u7684\u8fd0\u884c 3> ctrl + d \u6216\u8005 exit --- \u9000\u51fa\u767b\u5f55 ctrl + d --- \u547d\u4ee4\u884c\u8f93\u5165\u4e86\u547d\u4ee4,\u5c06\u5149\u6807\u6240\u5728\u5b57\u7b26\u5f80\u540e\u4e00\u4e2a\u4e2a\u7684\u5220\u9664 4> ctrl + a --- \u5149\u6807\u5feb\u901f\u56de\u5230\u547d\u4ee4\u884c\u9996 5> ctrl + e --- \u5149\u6807\u5feb\u901f\u56de\u5230\u547d\u4ee4\u884c\u5c3e","title":"\u5feb\u6377\u952e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_4","text":"history \u67e5\u770b\u5386\u53f2\u547d\u4ee4 history -c echo \"\" > ~/.bash_history \u6e05\u7a7a\u5386\u53f2\u547d\u4ee4 \u200b \u7b2c\u4e00\u4e2a\u4f1a\u6e05\u9664\u5f53\u524d\u7528\u6237\u6572\u8fc7\u7684\u6240\u6709\u547d\u4ee4; \u7b2c\u4e8c\u4e2a\u4f1a\u6e05\u9664\u5f53\u524d\u7528\u6237\u6b64\u6b21\u767b\u5f55\u4e4b\u524d\u6572\u8fc7\u7684\u8bb0\u5f55,\u5373 \u9000\u51fa\u767b\u5f55\u65f6\u624d\u4f1a\u8bb0\u5f55 \u5230\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b\u7684\u4e00\u4e2a\u540d\u4e3a .bash_history \u7684\u9690\u85cf\u6587\u4ef6\u4e2d \u200b !6 \u6267\u884c\u5386\u53f2\u547d\u4ee4\u4e2d\u7b2c6\u6761\u547d\u4ee4 \u200b !cat \u641c\u7d22\u5386\u53f2\u547d\u4ee4\u4e2d\u6700\u8fd1\u4e00\u4e2a\u4ee5cat\u5b57\u7b26\u5f00\u5934\u7684\u547d\u4ee4 \u200b !$ \u53d6\u4e0a\u6761\u547d\u4ee4\u7684 \u6700\u540e\u4e00\u4e2a \u53c2\u6570. [ root@172 ~ ] # history 1 clear 2 ls 3 cat /etc/passwd 4 clear 5 history 6 cat /etc/sysconfig/network-scripts/ifcfg-ens33 7 history [ root@172 ~ ] # !6 ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # !cat # \u8fd0\u884c\u7684\u662f\u6700\u8fd1\u7684\u90a3\u6761\u4ee5cat\u5f00\u5934\u7684\u5386\u53f2\u547d\u4ee4 ... ... ... [ root@172 ~ ] # ls /boot/ /opt/ /boot/: config-3.10.0-1160.66.1.el7.x86_64 config-3.10.0-1160.el7.x86_64 efi grub grub2 initramfs-0-rescue-be87405afe3b480da138503ccab0ebd2.img initramfs-3.10.0-1160.66.1.el7.x86_64.img initramfs-3.10.0-1160.el7.x86_64.img symvers-3.10.0-1160.66.1.el7.x86_64.gz symvers-3.10.0-1160.el7.x86_64.gz System.map-3.10.0-1160.66.1.el7.x86_64 System.map-3.10.0-1160.el7.x86_64 vmlinuz-0-rescue-be87405afe3b480da138503ccab0ebd2 vmlinuz-3.10.0-1160.66.1.el7.x86_64 vmlinuz-3.10.0-1160.el7.x86_64 /opt/: rh [ root@172 ~ ] # ls !$ ls /opt/ rh","title":"\u5386\u53f2\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_5","text":"\u547d\u4ee4\u5c31\u662f\u7a0b\u5e8f,\u672c\u8d28\u5c31\u662f\u4ee3\u7801\u6587\u4ef6..\u5219\u80af\u5b9a\u4f1a\u6709\u8def\u5f84 \u6bd4\u5982: \u67e5\u770bls\u547d\u4ee4\u6240\u5728\u6587\u4ef6\u7684\u8def\u5f84/\u4f4d\u7f6e which ls \u5373\u5728linux\u4e0a\u5b89\u88c5\u597d\u8f6f\u4ef6,\u5c31\u662f\u65b0\u589e\u4e86\u4e9b\u8bb8\u547d\u4ee4\uff01\uff01 \u5982\u4f55\u53d6\u6d88\u522b\u540d\u6765\u8fd0\u884c\u547d\u4ee4 which ls \u67e5\u770b\u547d\u4ee4\u7684\u5b8c\u6574\u8def\u5f84,\u7136\u540e\u4ee5 \u7edd\u5bf9\u8def\u5f84/\u5b8c\u6574\u8def\u5f84 \u7684\u65b9\u5f0f\u8fd0\u884c; \u52a0\u53f3\u659c\u6760 \\ls unalias dc \u7ed9\u67d0\u6761\u547d\u4ee4\u8bbe\u7f6e\u522b\u540d alias dc=\"ls /etc/sysconfig/network-scripts/ifcfg-ens33\" \u6ce8\u610f\u54e6! \u6211\u4eec\u7ed9\u547d\u4ee4\u8bbe\u7f6e\u7684\u522b\u540d\u662f\u4e34\u65f6\u751f\u6548\u7684,\u6ca1\u6709\u5199\u5230\u6587\u4ef6\u91cc,\u91cd\u542f\u540e\u5c31\u6ca1\u4e86.. (linux\u4e2d\u901a\u5e38\u547d\u4ee4\u7684\u4fee\u6539\u90fd\u662f\u4e34\u65f6\u7684, \u6709\u4e2a\u522b\u547d\u4ee4\u9664\u5916..) # \u67e5\u770bls\u547d\u4ee4\u6587\u4ef6\u7684\u8def\u5f84 [ root@172 ~ ] # which ls # ls\u9ed8\u8ba4\u8bbe\u7f6e\u7684\u6709\u522b\u540d alias ls = 'ls --color=auto' /usr/bin/ls [ root@172 ~ ] # ls # \u6709\u989c\u8272(\u6587\u4ef6\u5939) anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # /usr/bin/ls --color=auto # \u6709\u989c\u8272 anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # /usr/bin/ls # \u6ca1\u6709\u989c\u8272 \u53d6\u6d88ls\u547d\u4ee4\u7684\u522b\u540d\u7684\u65b9\u5f0f\u4e00 anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # \\ls # \u6ca1\u6709\u989c\u8272 \u53d6\u6d88ls\u547d\u4ee4\u7684\u522b\u540d\u7684\u65b9\u5f0f\u4e8c anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # alias dc=\"ls /etc/sysconfig/network-scripts/ifcfg-ens33\" [ root@172 ~ ] # ls /etc/sysconfig/network-scripts/ifcfg-ens33 /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@172 ~ ] # dc /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@172 ~ ] # alias alias cp = 'cp -i' alias dc = 'ls /etc/sysconfig/network-scripts/ifcfg-ens33' alias egrep = 'egrep --color=auto' alias fgrep = 'fgrep --color=auto' alias grep = 'grep --color=auto' alias l. = 'ls -d .* --color=auto' alias ll = 'ls -l --color=auto' alias ls = 'ls --color=auto' alias mv = 'mv -i' alias rm = 'rm -i' alias which = 'alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde' [ root@172 ~ ] # unalias dc","title":"\u522b\u540d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_6","text":"path\u53ef\u4ee5\u5b58\u653e\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u5939\uff01\uff01 hash\u8868\u547d\u4ee4\u7f13\u5b58\u673a\u5236.. bash\u67e5\u627e\u547d\u4ee4\u987a\u5e8f ==>\u4ee5\u8def\u5f84(\u7edd\u5bf9\u8def\u5f84,\u76f8\u5bf9\u8def\u5f84)\u5f00\u59cb\u547d\u4ee4 \u4f8b\u5982: /bin/ls \u6216 cd /bin; ./ls ==> alias \u522b\u540d ==> Compound Commands \u590d\u5408\u547d\u4ee4 ==> function ==> build_in \u5185\u7f6e\u547d\u4ee4 \u5982 cd,kill,pwd,alias,echo\u7b49 \u53ef\u4ee5\u7528\"type -a \u547d\u4ee4\"\u67e5\u770b ==> hash ==> $PATH \u73af\u5883\u53d8\u91cf \u67e5\u770b\u73af\u5883\u53d8\u91cfecho $PATH ==> error: command not found","title":"\u547d\u4ee4\u67e5\u627e\u4f18\u5148\u7ea7"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#bash_1","text":"\u25b2 bash\u89e3\u91ca\u5668\u5185\u5d4c/\u5185\u7f6e/\u81ea\u5e26\u7684\u547d\u4ee4 [ root@172 ~ ] # type pwd pwd \u662f shell \u5185\u5d4c [ root@172 ~ ] # type cd cd \u662f shell \u5185\u5d4c [ root@172 ~ ] # type echo echo \u662f shell \u5185\u5d4c [ root@172 ~ ] # type ifconfig # ifconfig\u4e0d\u662f\u5185\u5d4c\u547d\u4ee4,\u662f\u4ece\u5b89\u88c5\u7684\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5305net-tools\u4e2d\u6765\u7684 ifconfig \u662f /usr/sbin/ifconfig [ root@172 ~ ] # type ls # ls\u4e0d\u662f\u5185\u5d4c\u547d\u4ee4 ls \u662f ` ls --color = auto ' \u7684\u522b\u540d [ root@172 ~ ] # type /usr/bin/ls /usr/bin/ls \u662f /usr/bin/ls","title":"bash\u5185\u7f6e\u7684\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_7","text":"\u25b2 <\u590d\u5408\u547d\u4ee4> # do ... done \u770b\u8d77\u6765\u53ea\u6709\u4e00\u6761,\u5b9e\u5219\u662f\u56db\u6761 [ root@172 ~ ] # for((i=0;i<=3;i++))do echo 123;done 123 123 123 123","title":"\u590d\u5408\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_8","text":"\u25b2 <\u51fd\u6570> # \u6ce8\u610f{}\u5de6\u53f3\u4e24\u8fb9\u6709\u7a7a\u683c [ root@172 ~ ] # function f(){ echo 123; echo 456; } [ root@172 ~ ] # f 123 456","title":"\u51fd\u6570"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#path","text":"Q: \u60f3\u5728\u4efb\u610f\u5730\u65b9,\u4e0d\u52a0\u524d\u7f00/\u4e0d\u4ee5\u7edd\u5bf9\u8def\u5f84\u7684\u65b9\u5f0f\u8fd0\u884c\u67d0\u6761\u547d\u4ee4/\u65b0\u5b89\u88c5\u7684\u8f6f\u4ef6,\u600e\u4e48\u641e\uff1f A: \u628a\u65b0\u5b89\u88c5\u7684\u8f6f\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u5939\u6dfb\u52a0\u5230PATH\u91cc\uff01 \u25b2 <path\u73af\u5883\u53d8\u91cf> path\u73af\u5883\u53d8\u91cf\u7684\u503c\u5728\u6587\u4ef6\u91cc. # echo\"\u6253\u5370\"PATH\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u7684\u503c $\u7b26\u53f7\u662f\u53d6PATH\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u7684\u503c # \u6253\u5370\u7ed3\u679c\u662f\u7528\":\"\u5206\u9694\u7684 # \u6211\u4eec\u77e5\u9053ls\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u8def\u5f84\u662f/usr/bin/ls \u6240\u4ee5\u5728\u547d\u4ee4\u884c\u8f93\u5165ls,\u4f1a\u53bbPATH\u91cc\u9762\u627e,\u5728/usr/bin\u4e2d\u627e\u5230\u5566 # path\u91cc\u9762\u5305\u542bbash\u5185\u7f6e\u7684\u4ee5\u53ca\u4ece\u5b89\u88c5\u7684\u7b2c\u4e09\u65b9\u5305\u91cc\u5f97\u5230\u7684\u547d\u4ee4 \u5373path\u53ef\u4ee5\u5b58\u653e\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u5939\uff01\uff01 [ root@172 ~ ] # echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin","title":"path\u73af\u5883\u53d8\u91cf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#hash","text":"\u25b2 <hash> \u80fd\u4ece\u5185\u5b58\u53d6\u5c31\u522b\u4ece\u786c\u76d8\u53d6,\u6240\u4ee5linux\u4e2d\u4e00\u5f20hash\u8868. hash\u8868\u7f13\u5b58\u7684\u662f: \u6211\u4eec\u89e3\u9501PATH\u4ece\u786c\u76d8\u6587\u4ef6\u4e2d\u8bfb\u53d6\u7684\u547d\u4ee4 [ root@172 ~ ] # hash -r # \u6e05\u7a7ahash\u8868 [ root@172 ~ ] # hash hash: \u54c8\u5e0c\u8868\u4e3a\u7a7a [ root@172 ~ ] # ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@172 ~ ] # hash \u547d\u4e2d \u547d\u4ee4 1 /usr/bin/ls","title":"hash"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_9","text":"\u5c0f\u767d\u4e00\u4e0a\u6765,\u4e0d\u8981\u76f4\u63a5\u53bb\u7814\u7a76\u5b98\u65b9\u6587\u6863,\u76f4\u63a5 \u4ece\u5165\u95e8\u5230\u653e\u5f03 Hhhh. \u7b2c\u4e00\u9009\u62e9\u662f\u767e\u5ea6\u8c37\u6b4c. \u5b98\u65b9\u6587\u6863\u8ffd\u6c42\u7684\u662f\u9762\u9762\u4ff1\u5230,\u7528\u4e8e\u6df1\u5165\u7814\u7a76\u548c\u7ea0\u9519\u7528\u7684... 1> Baidu, Google 2> -- help ls --help \u6709\u4e9b\u547d\u4ee4\u6ca1\u6709\u63d0\u4f9b--help\u9009\u9879; \u7ed3\u679c\u6ca1\u6709man\u547d\u4ee4\u5168\u9762 3> help\u547d\u4ee4 4> man\u624b\u518c man ls man -a ls eg: man cp \u5e95\u90e8\u8f93\u5165/-f\u4f1a\u5c06\u6240\u6709\u7684-f\u5730\u65b9\u9ad8\u4eae \u6309n\u8df3\u8f6c\u5230\u4e0b\u4e00\u4e2a","title":"\u67e5\u770b\u547d\u4ee4\u5e2e\u52a9\u4fe1\u606f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_10","text":"","title":"\u57fa\u7840\u5e38\u7528\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_11","text":"\u25cb \u67e5\u770b\u4e3b\u673a\u540d: hostname Ps: vim /etc/hosts \u96c6\u7fa4\u91cc\u9762\u7684\u4e3b\u673a\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u6837\u7684hosts\u6587\u4ef6,\u901a\u8fc7\u4e3b\u673a\u540d\u8fdb\u884c\u901a\u4fe1.. \u25cb \u4fee\u6539\u4e3b\u673a\u540d: \u65b9\u5f0f\u4e00(\u6c38\u4e45\u4fee\u6539, \u7acb\u5373\u751f\u6548): hostnamectl set-hostname web01 \u65b9\u5f0f\u4e8c(\u6c38\u4e45\u4fee\u6539, \u91cd\u542f\u751f\u6548): vim /etc/hostname","title":"\u8bbe\u7f6e\u4e3b\u673a\u540d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_12","text":"# \u5f00\u673a\u542f\u52a8\u7ea7\u522b\u53d8\u4e3a5 \u56fe\u5f62\u754c\u9762 systemctl set-default graphical.target # \u5f00\u673a\u542f\u52a8\u7ea7\u522b\u53d8\u4e3a3 \u5b57\u7b26\u7ec8\u7aef systemctl set-default multi-user.target # \u91cd\u542f\u673a\u5668 reboot # \u8865\u5145: \u67e5\u770b\u64cd\u4f5c\u7cfb\u7edf\u7684\u53d1\u5e03\u7684\u7248\u672c\u4fe1\u606f [ root@localhost ~ ] # cat /etc/redhat-release CentOS Linux release 7 .9.2009 ( Core ) [ root@localhost ~ ] # uname -a Linux localhost.localdomain 3 .10.0-1160.66.1.el7.x86_64 1 SMP Wed May 18 16 :02:34 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux [ root@localhost ~ ] # uname -r \u67e5\u770bOS\u5185\u6838\u7248\u672c 3 .10.0-1160.66.1.el7.x86_64","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u542f\u52a8\u7ea7\u522b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_13","text":"\u96c6\u7fa4\u5316\u4f5c\u4e1a\u8bbe\u7f6e\u65f6\u95f4\u662f\u5f88\u91cd\u8981\u7684,\u5c31\u50cf\u6253\u4ed7\u4e00\u6837,\u8981\u5bf9\u8868\u561b! \u25cb \u67e5\u770b\u65f6\u533a: timedatectl status \u25cb \u5217\u51fa\u53ef\u7528\u65f6\u533a: timedatectl list-timezones \u25cb \u8bbe\u7f6e\u65f6\u533a: timedatectl set-timezone \"Asia/Shanghai\" timedatectl set-timezone UTC \u25cb \u67e5\u770bOS\u7684\u7cfb\u7edf\u65f6\u95f4: date \u25cb \u8bbe\u7f6e\u67e5\u770b\u7cfb\u7edf\u65f6\u95f4\u663e\u793a\u7684\u683c\u5f0f: date \"+%Y-%m-%d %H:%M:%S\" \u25cb \u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4: date -s \"2022-02-22 22:22:22\" \u25cb \u67e5\u770b\u786c\u4ef6\u65f6\u95f4: hwclock \u25cb \u4ece\u786c\u4ef6\u65f6\u949f\u8bbe\u7f6e\u7cfb\u7edf\u65f6\u95f4: hwclock -s \u25cb \u4ece\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8bbe\u7f6e\u786c\u4ef6\u65f6\u949f: hwclock -w \u6709\u4e2a\u5199\u5230\u786c\u4ef6CMOS\u7684\u8fc7\u7a0b,\u4f1a\u7b49\u4e00\u4f1a.. \u25cb \u5c06\u4e24\u4e2a\u65f6\u95f4\u4e0e\u516c\u7f51\u4e0a\u7684\u65f6\u95f4\u670d\u52a1\u5668\u8fdb\u884c\u540c\u6b65! ntpdate ntp1.aliyun.com Ps: \u82e5\u4e3b\u673a\u4e0a\u6709ntp\u670d\u52a1,\u91cd\u542f\u540e\u4f1a\u81ea\u52a8\u5e2e\u5fd9\u540c\u6b65...\u6240\u4ee5\u5bf9\u4e24\u4e2a\u65f6\u95f4\u7684\u4fee\u6539\u4f1a\u5931\u6548. timedatectl set-ntp no \u5173\u95ed\u9ed8\u8ba4\u7684\u65f6\u95f4\u540c\u6b65 timedatectl set-ntp true \u5f00\u59cb\u81ea\u52a8\u65f6\u95f4\u540c\u6b65\u5230\u8fdc\u7a0bNTP\u670d\u52a1\u5668 timedatectl set-ntp false \u7981\u7528NTP\u65f6\u95f4\u540c\u6b65 CST\u4ee3\u8868\u662f\u4e2d\u56fd\u4e1c\u516b\u533a\u7684\u65f6\u95f4 ; UTC\u4ee3\u8868\u7684\u662f\u4e16\u754c\u6807\u51c6\u65f6\u95f4,\u7ecf\u8fc7\u82f1\u56fd\u683c\u6797\u5c3c\u6cbb\u5929\u6587\u53f0\u7684\u4e00\u6761\u7ecf\u7ebf,\u672c\u521d\u5b50\u5348\u7ebf UTC\u6bd4CST\u65e9,\u76f8\u5dee8\u5c0f\u65f6. \u5728Linux\u4e2d\u65f6\u95f4\u5206\u4e24\u79cd \u786c\u4ef6\u65f6\u95f4: BIOS\u4e0a\u7684\u65f6\u95f4,\u65ad\u7535\u540e\u65f6\u95f4\u82af\u7247\u7b97\u7684\u65f6\u95f4,\u901a\u8fc7BIOS\u754c\u9762\u67e5\u770b\u7684\u8bdd,\u4f1a\u53d1\u73b0\u786c\u4ef6\u4f7f\u7528\u7684\u662fUTC \u7cfb\u7edf\u65f6\u95f4: \u64cd\u4f5c\u7cfb\u7edf\u7684\u65f6\u95f4 \u6211\u4eec\u4f7f\u7528\u7684\u662fCST \u6240\u4ee5\u5f00\u673a\u540e,OS\u4f1a\u8bfb\u53d6BIOS\u4e0a\u7684\u65f6\u95f4,\u5728\u5b83\u57fa\u7840\u4e0a\u52a08\u5c0f\u65f6.. [ root@localhost ~ ] # date 2022\u5e74 07\u6708 05\u65e5 \u661f\u671f\u4e8c 15 :04:55 CST [ root@localhost ~ ] # date \"+%Y-%m-%d %H:%M:%S\" 2022 -07-05 15 :12:44 [ root@localhost ~ ] # date -s \"2022-02-22 22:22:22\" 2022\u5e74 02\u6708 22\u65e5 \u661f\u671f\u4e8c 22 :22:22 CST [ root@localhost ~ ] # hwclock 2022\u5e7407\u670805\u65e5 \u661f\u671f\u4e8c 15\u65f637\u520609\u79d2 -0.383665 \u79d2 [ root@localhost ~ ] # hwclock -s [ root@localhost ~ ] # date 2022\u5e74 07\u6708 05\u65e5 \u661f\u671f\u4e8c 15 :37:14 CST [ root@localhost ~ ] # ntpdate ntp1.aliyun.com 5 Jul 15 :42:19 ntpdate [ 4648 ] : adjust time server 120 .25.115.20 offset 0 .147526 sec <\u540c\u6b65\u5931\u8d25\u6392\u9519\u601d\u8def \u7f51\u7edc\u95ee\u9898> \u7f51\u7edc\u6392\u9664\u5177\u4f53\u6b65\u9aa4\u67e5\u770b: https://zhuanlan.zhihu.com/p/337256553 step1: ping ntp1.aliyun.com \u82e5ping\u4e0d\u901a,\u8fd9\u6d89\u53ca\u5230\u5916\u7f51,\u90a3\u5c31\u8ddf\u7f51\u5173\u6709\u5173 step2: route -n \u62ff\u5230\u7f51\u5173\u5730\u5740172.16.150.2 step3: ping 172.16.150.2 \u82e5ping\u4e0d\u901a,\u786e\u5b9a\u7f51\u5173\u7684\u95ee\u9898,\u770b\u7f51\u5361\u6709\u65e0\u5173\u8054\u4e0a\u3001\u770b\u672c\u5730\u7f51\u7edc\u9002\u914d\u5668VMnet8\u662f\u5426\u542f\u7528 step4: \u5728CentOS\u7cfb\u7edf\u4e0a,\u76ee\u524d\u6709NetworkManager\u548cnetwork\u4e24\u79cd\u7f51\u7edc\u7ba1\u7406\u5de5\u5177 \u4f9d\u6b21\u6267\u884c\u4e0b\u9762\u4e09\u6761\u547d\u4ee4: systemctl stop NetworkManager # \u5173\u6389 systemctl disable NetworkManager # \u5f00\u673a\u4e0d\u542f\u52a8 systemctl restart network # \u91cd\u542f\u7f51\u7edc\u670d\u52a1 step5: \u540c\u6b65\u5931\u8d25,\u8fd8\u6709\u53ef\u80fd\u662fSElinux\u9632\u706b\u5899\u7684\u95ee\u9898.","title":"\u8bbe\u7f6e\u65f6\u95f4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/1_%E5%88%9D%E8%AF%86shell%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#shutdown","text":"\u6ce8\u9500\u767b\u5f55\u7684\u8d26\u53f7 logout exit ctrl+d \u5173\u673a init 0 \u7ea7\u522b0 poweroff \u65ad\u7535\u6e90 shutdown -h now shutdown -h 0 \u7acb\u523b\u5173\u673a shutdown -h 11:30 \u5b9a\u70b9\u5173\u673a shutdown -h 10 10\u5206\u949f\u540e\u5173\u673a halt \u5173\u6389\u7684\u662fOS\u7684\u8fd0\u884c,\u8fd8\u9700\u8981\u81ea\u5df1\u65ad\u7535.. \u91cd\u542f init 6 \u7ea7\u522b6 shutdown -r now \u53d6\u6d88\u6b63\u5728\u8fdb\u884c\u7684\u5173\u673a\u6216\u91cd\u542f shutdown -c","title":"shutdown"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/","text":"\u6839\u76ee\u5f55\u7ed3\u6784 \u00b6 \u76ee\u5f55\u6307\u7684\u5c31\u662f\u6587\u4ef6\u5939 Ps: \u6587\u4ef6\u5939\u91cc\u5b58\u653e\u7684\u662f\u5177\u4f53\u6709\u54ea\u4e9b\u6587\u4ef6;\u6587\u4ef6\u91cc\u5b58\u653e\u7684\u662f\u5177\u4f53\u7684\u6570\u636e. Windows: \u4ee5\u591a\u6839\u7684\u65b9\u5f0f\u7ec4\u7ec7\u6587\u4ef6 C: D: E: Linux : \u4ee5\u5355\u6839\u7684\u65b9\u5f0f\u7ec4\u7ec7\u6587\u4ef6 / \u662f\u4ee5\u6811\u5f62\u7684\u7ed3\u6784\u6765\u7ec4\u7ec7\u6587\u4ef6 \u25a0 bin -> usr/bin \u666e\u901a\u7528\u6237\u4f7f\u7528\u7684\u547d\u4ee4 Ps: -> \u4ee3\u8868 \u6839\u4e0b\u7684bin\u6587\u4ef6\u5939 /bin \u662f /usr/bin \u6587\u4ef6\u5939\u7684 \u5feb\u6377\u65b9\u5f0f .. \u5b98\u65b9\u79f0\u4e3a \u8f6f\u94fe\u63a5 \u25a0 sbin -> usr/sbin \u7ba1\u7406\u5458\u4f7f\u7528\u7684\u547d\u4ee4 \u25a0 boot \u5b58\u653e\u542f\u52a8\u76f8\u5173\u7684\u6587\u4ef6 \u4f8b\u5982 kernel\u5185\u6838, grub\u5f15\u5bfc\u88c5\u8f7d\u7a0b\u5e8f \u25a0 dev \u8bbe\u5907\u6587\u4ef6 /dev/sda \u786c\u76d8 s\u6307\u786c\u76d8\u63a5\u53e3SCSI;d\u662fdisk\u786c\u76d8;a\u4ee3\u8868\u7b2c\u4e00\u5757 /dev/cdrom /dev/sr0 \u5149\u9a71\u5149\u76d8\u955c\u50cf\u8bbe\u5907 \u7528\u6765\u4e3a\u6211\u4eec\u7684\u64cd\u4f5c\u7cfb\u7edf\u8865\u5145\u5305,\u56e0\u4e3a\u6700\u5c0f\u5316\u5b89\u88c5\u53ea\u662f\u5c06\u4e00\u90e8\u5206\u5185\u5bb9\u5199\u5165\u5230\u4e86\u786c\u76d8 /dev/null \u9ed1\u6d1e\u6587\u4ef6,\u628a\u4e0d\u60f3\u8981\u663e\u793a\u7684\u5185\u5bb9\u4e22\u5165\u9ed1\u6d1e..\u53ea\u8fdb\u4e0d\u51fa \u901a\u5e38\u5199\u811a\u672c\u8f6f\u4ef6\u7684\u65f6\u5019\u4f1a\u7528 /dev/pts/0 \u865a\u62df\u7684Bash Shell\u7ec8\u7aef,\u63d0\u4f9b\u7ed9\u8fdc\u7a0b\u7528\u6237\u4f7f\u7528 aa0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u7ec8\u7aef 1\u4ee3\u8868\u7b2c2\u4e2a\u7ec8\u7aef \u4ee5\u6b64\u7c7b\u63a8 \u25a0 etc \u914d\u7f6e\u6587\u4ef6,\u5f88\u91cd\u8981,\u7cfb\u7edf\u7ea7\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u90fd\u5728\u8fd9\u91cc /etc/hostname \u7cfb\u7edf\u4e3b\u673a\u540d\u914d\u7f6e\u6587\u4ef6 /etc/sysconfig/network-scripts/ifcfg-ens33 \u7f51\u5361\u914d\u7f6e\u6587\u4ef6 /etc/resolv.conf \u6307\u5b9a\u8fdc\u7a0bDNS\u7684\u5730\u5740 /etc/hosts \u672c\u673a\u7684\u57df\u540d\u89e3\u6790\u6587\u4ef6 /etc/sysconfig/selinux SELINUX\u914d\u7f6e\u6587\u4ef6 \u25a0 home /home/dc \u666e\u901a\u7528\u6237dc\u7684\u5bb6\u76ee\u5f55 \u25a0 root /root \u7ba1\u7406\u5458root\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u25a0 lib -> usr/lib lib64 -> usr/lib64 \u5e93\u6587\u4ef6 \u91cc\u9762\u65f6\u64cd\u4f5c\u7cfb\u7edf\u8fd9\u4e2a\u8f6f\u4ef6\u6240\u5f15\u7528\u6240\u4f9d\u8d56\u7684\u5e93 \u25a0 media mnt opt \u90fd\u662f\u7a7a\u6587\u4ef6\u5939 \u79fb\u52a8\u8bbe\u5907(eg U\u76d8)\u7684 \u6302\u8f7d\u70b9 media\u662f\u9ed8\u8ba4\u7684 \u25a0 proc process\u7684\u7f29\u5199,\u653e\u7684\u662f\u8fdb\u7a0b\u76f8\u5173\u7684\u5185\u5bb9 /proc/sys/net/ipv4 \u5185\u6838\u53c2\u6570\u4f18\u5316\u6587\u4ef6 cat /proc/sys/net/ipv4 /tcp_max_syn_backlog \u534a\u8fde\u63a5\u6c60 \u25a0 run \u5b58\u653e\u7a0b\u5e8f\u8fd0\u884c\u540e\u6240\u4ea7\u751f\u7684pid(\u8fdb\u7a0b\u7f16\u53f7)\u6587\u4ef6 \u25a0 srv \u7269\u7406\u8bbe\u5907\u4ea7\u751f\u7684\u4e00\u4e9b\u6587\u4ef6 \u7a7a\u6587\u4ef6\u5939 \u25a0 sys \u786c\u4ef6\u8bbe\u5907\u7684\u9a71\u52a8\u7a0b\u5e8f\u4fe1\u606f,\u4e0d\u8981\u52a8\u5b83 \u25a0 tmp \u4e34\u65f6\u5b58\u653e\u6587\u4ef6,\u7c7b\u4f3c\u4e8e\u56de\u6536\u7ad9,\u7cfb\u7edf\u4f1a\u5b9a\u65f6\u5220\u9664\u8be5\u76ee\u5f55\u4e0b\u957f\u65f6\u95f4\u6ca1\u6709\u8bbf\u95ee\u7684\u6587\u4ef6 \u25a0 usr \u4e0e\u7cfb\u7edf\u6709\u5173\u7684\u6587\u4ef6,\u76f8\u5f53\u4e8eC:\\Windows \u25a0 var \u5b58\u653e\u7684\u662f\u4e00\u4e9b\u53d8\u5316\u6587\u4ef6 eg: \u6570\u636e\u5e93\u3001\u65e5\u5fd7\u3001\u90ae\u4ef6\u7b49 /var/lib/mysql mysql /var/ftp vsftpd /var/spool/mail mail /var/spool/cron cron log /var/log \u7cfb\u7edf\u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 /var/log/messages \u7cfb\u7edf\u65e5\u5fd7 /var/log/secure \u7cfb\u7edf\u767b\u5f55\u65e5\u5fd7 /var/tmp \u4e34\u65f6\u6587\u4ef6(\u4e3b\u8981\u662f\u7a0b\u5e8f\u4ea7\u751f\u7684\u4e34\u65f6\u6587\u4ef6) Ps: tail -f /var/log/messages \u52a8\u6001\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6 [ root@localhost ~ ] # ls -l / \u603b\u7528\u91cf 28 lrwxrwxrwx. 1 root root 7 6\u6708 30 18 :17 bin -> usr/bin dr-xr-xr-x. 5 root root 4096 6\u6708 30 23 :49 boot drwxr-xr-x 21 root root 3360 7\u6708 4 22 :54 dev drwxr-xr-x. 144 root root 8192 7\u6708 5 14 :39 etc drwxr-xr-x. 4 root root 32 7\u6708 4 16 :51 home lrwxrwxrwx. 1 root root 7 6\u6708 30 18 :17 lib -> usr/lib lrwxrwxrwx. 1 root root 9 6\u6708 30 18 :17 lib64 -> usr/lib64 drwxr-xr-x. 2 root root 6 4\u6708 11 2018 media drwxr-xr-x. 3 root root 18 6\u6708 30 23 :42 mnt drwxr-xr-x. 3 root root 16 6\u6708 30 18 :25 opt dr-xr-xr-x 214 root root 0 7\u6708 4 22 :54 proc dr-xr-x---. 14 root root 4096 7\u6708 4 22 :55 root drwxr-xr-x 41 root root 1240 7\u6708 5 15 :58 run lrwxrwxrwx. 1 root root 8 6\u6708 30 18 :17 sbin -> usr/sbin drwxr-xr-x. 2 root root 6 4\u6708 11 2018 srv dr-xr-xr-x 13 root root 0 7\u6708 5 18 :23 sys drwxrwxrwt. 31 root root 4096 7\u6708 5 17 :42 tmp drwxr-xr-x. 13 root root 155 6\u6708 30 18 :17 usr drwxr-xr-x. 21 root root 4096 6\u6708 30 18 :47 var [ root@localhost ~ ] # which ls alias ls = 'ls --color=auto' /usr/bin/ls [ root@localhost ~ ] # /usr/bin/ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # /bin/ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 # [TCP\u7684\u534a\u8fde\u63a5\u6c60] # grep\u8fc7\u6ee4\u7b5b\u9009.. # \u5185\u6838\u76f8\u5f53\u4e00\u90e8\u5206\u7684\u4f18\u5316,\u5373\u4e0e\u7f51\u7edc\u53c2\u6570\u4f18\u5316\u76f8\u5173\u7684\u6587\u4ef6 \u90fd\u5728 /proc/sys/net/ipv4 \u8be5\u6587\u4ef6\u5939\u4e0b\u9762 [ root@localhost ~ ] # ls /proc/sys/net/ipv4/ | grep backlog tcp_max_syn_backlog [ root@localhost ~ ] # cat /proc/sys/net/ipv4/tcp_max_syn_backlog 128 # `pwd` \u67e5\u770b\u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939\u7684\u5b8c\u6574\u8def\u5f84 [ root@localhost ~ ] # pwd /root # `cd` \u5207\u6362\u6587\u4ef6\u5939 [ root@localhost ~ ] # cd /root \u8def\u5f84 \u00b6 \u7edd\u5bf9\u8def\u5f84 : \u8def\u5f84\u662f\u4ece\u6839\u5f00\u59cb\u7684,\u5373\u4ee5 / \u4f5c\u4e3a\u524d\u7f00 eg: /etc/sysconfig/network-scripts/ \u53ea\u6709\u7b2c\u4e00\u4e2a\u53f3\u659c\u6760\u4ee3\u8868\u6839\u6587\u4ef6\u5939, \u5176\u4f59\u7684\u90fd\u662f\u8def\u5f84\u5206\u9694\u7b26 /etc/////sysconfig///////network-scripts \u4e0e /etc/sysconfig/network-scripts \u6548\u679c\u662f\u4e00\u6837\u7684! \u76f8\u5bf9\u8def\u5f84 : \u53ea\u8981\u8def\u5f84\u4e0d\u662f\u4ee5 / \u5f00\u5934, \u4f1a\u4ee5\u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939\u7684\u8def\u5f84\u4e3a\u5f00\u5934\" \u5373pwd\u7684\u7ed3\u679c \"\u8fdb\u884c\u62fc\u63a5 [ root@localhost ~ ] # pwd /root # \u8fdb\u884c\u62fc\u63a5 \u76f8\u5f53\u4e8e\u8bbf\u95ee\u8def\u5f84 /root/etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost ~ ] # ls etc/sysconfig/network-scripts/ifcfg-ens33 ls: \u65e0\u6cd5\u8bbf\u95eeetc/sysconfig/network-scripts/ifcfg-ens33: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 [ root@localhost ~ ] # cd /etc/ [ root@localhost etc ] # pwd /etc # \u8fdb\u884c\u62fc\u63a5 \u76f8\u5f53\u4e8e\u8bbf\u95ee\u8def\u5f84 /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost etc ] # ls sysconfig/network-scripts/ifcfg-ens33 sysconfig/network-scripts/ifcfg-ens33 . \u94fe\u63a5\u5230\u5f53\u524d\u76ee\u5f55 .. \u94fe\u63a5\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55 ~ \u5f53\u524d\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u82e5\u662f\u7ba1\u7406\u5458: \uff5e/anaconda-ks.cfg\u7b49\u540c\u4e8e/root/anaconda-ks.cfg \u6587\u4ef6\u64cd\u4f5c\u57fa\u7840\u547d\u4ee4 \u00b6 \u547d\u4ee4\u8fde\u63a5\u7684\u4e24\u79cd\u65b9\u5f0f \u00b6 \u547d\u4ee4\u8fde\u63a5\u7684\u4e24\u79cd\u65b9\u5f0f: 1 > \u5206\u53f7\u8fde\u63a5 -- \u4ece\u5de6\u5f80\u53f3\u4f9d\u6b21\u8fd0\u884c,\u4e0d\u7ba1\u662f\u5426\u51fa\u9519 ls ; pwd ; echo 123 2 > && \u7b26\u53f7\u8fde\u63a5 -- \u4ece\u5de6\u5f80\u53f3\u4f9d\u6b21\u8fd0\u884c,\u76f4\u5230\u51fa\u9519,\u540e\u9762\u7684\u5c31\u4e0d\u4f1a\u518d\u8fd0\u884c\u5566 ls && pwd && echo 123 pwd \u00b6 \u67e5\u770b\u5f53\u524d\u6240\u5728\u76ee\u5f55 pwd \u67e5\u770b\u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939\u8def\u5f84 cd \u00b6 \u5207\u6362\u76ee\u5f55 cd \u9ed8\u8ba4\u5207\u56de\u5bb6\u76ee\u5f55 cd \uff5e \u5207\u5230\u5bb6\u76ee\u5f55 cd - \u5207\u5230\u4e0a\u4e00\u6b21\u6240\u5728\u6587\u4ef6\u5939/\u76ee\u5f55 cd . \u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0d\u52a8 cd .. \u5207\u5230\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939 [ root@localhost ~ ] # cd /etc/sysconfig/network-scripts/ [ root@localhost network-scripts ] # cd . [ root@localhost network-scripts ] # cd .. [ root@localhost sysconfig ] # ls \u00b6 \u6d4f\u89c8 ls -l \u6587\u4ef6 \u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u7684\u5177\u4f53\u4fe1\u606f ls -l \u6587\u4ef6\u5939 \u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u5939\u4e0b\u7684\u5b50\u6587\u4ef6\u4e0e\u5b50\u6587\u4ef6\u5939\u7684\u4fe1\u606f ls -dl \u6587\u4ef6\u5939 \u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u5939/\u76ee\u5f55\u672c\u8eab\u7684\u4fe1\u606f \u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u4e0a\u4e00\u7ea7 -l \u6765\u8fbe\u5230\u76f8\u540c\u7684\u76ee\u7684,\u4f46\u7ed3\u679c\u4e0d\u662f\u5f88\u76f4\u63a5 ls -al \u6d4f\u89c8\u7684\u7ed3\u679c\u4e2d\u5305\u542b\u9690\u85cf\u6587\u4ef6 \u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u90fd\u6709\u4e24\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\u5939 . \u548c .. \"\"\" \u6587\u4ef6\u7c7b\u578b\u548c\u6743\u9650 -rw-r--r-- \u786c\u94fe\u63a5\u7684\u4e2a\u6570 1 \u5c5e\u4e3b(\u6587\u4ef6\u4e3b\u4eba) root \u5c5e\u7ec4(\u7528\u6237\u7ec4) root \uff08\u7b80\u5355\u7406\u89e3\u5c31\u662f\u54ea\u4e2a\u90e8\u95e8\uff09 \u6587\u4ef6\u5b57\u8282\u5927\u5c0f 2351 \u521b\u5efa\u4fee\u6539\u65f6\u95f4 7\u67084\u65e5 16:51 \u6587\u4ef6\u540d/\u6587\u4ef6\u8def\u5f84 /etc/passwd \u6572\u9ed1\u677f: linux\u4e0d\u662f\u4ee5\u6587\u4ef6\u7684\u540e\u7f00\u540d\u6765\u533a\u5206\u6587\u4ef6\u7c7b\u578b\u7684,\u800c\u662f\u4ee5ls -l\u7684\u9996\u4f4d\u6765\u533a\u5206\u7684 -rw-r--r-- - \u6587\u672c\u6587\u4ef6 d \u76ee\u5f55/\u6587\u4ef6\u5939 l link\u8f6f\u8fde\u63a5 \u540e\u9762\u76849\u4f4d\u8868\u793a\u6743\u9650 3\u4f4d\u4e3a\u4e00\u7ec4,\u6587\u4ef6\u4e3b\u4eba\u3001\u7528\u6237\u7ec4\u3001\u5176\u4ed6\u4eba(\u4e0d\u662f\u6587\u4ef6\u4e3b\u4eba,\u4e5f\u4e0d\u662f\u7ec4\u91cc\u7684\u7528\u6237) r \u8bfb; -- cat\u53ef\u4ee5\u770b\u91cc\u9762\u7684\u5185\u5bb9 w \u5199; -- \u5728\u6587\u4ef6\u5939\u91cc\u521b\u5efa\u5220\u9664\u5b50\u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939,vim\u4fee\u6539\u6587\u4ef6\u5185\u5bb9 x \u6267\u884c; -- \u6587\u4ef6\u53ef\u80fd\u662f\u4e00\u6761\u547d\u4ee4,\u80fd\u5426\u8fd0\u884c \u80fd\u5426\u5207\u6362cd\u5230\u6b64\u6587\u4ef6 Ps: -rw-r--r--. \u82e5\u6700\u540e\u8fd8\u6709\u4e2a\u70b9,\u8868\u793a\u6b64\u6587\u4ef6\u662f\u5728SElinux\u5df2\u52a0\u8f7d\u72b6\u6001\u4e0b\u521b\u5efa,\u6b64\u6587\u4ef6\u53d7SElinux\u7684\u7ba1\u5236 \"\"\" [ root@localhost sysconfig ] # ls -l /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 4 16 :51 /etc/passwd [ root@localhost / ] # ls -dl /etc drwxr-xr-x. 144 root root 8192 7\u6708 5 21 :32 /etc [ root@localhost / ] # ls -a . .autorelabel boot etc lib media opt root sbin sys usr .. bin dev home lib64 mnt proc run srv tmp var tree \u00b6 \u67e5\u770b\u76ee\u5f55\u6811 linux\u4e00\u5207\u7686\u6587\u4ef6,\u7b3c\u7edf\u6765\u8bf4,\u6587\u4ef6\u5939\u672c\u8eab\u4e5f\u662f\u4e00\u79cd\u6587\u4ef6Hhhh yum install tree -y tree /boot/ \u663e\u793a\u6240\u6709\u6587\u4ef6,\u4e0d\u5305\u62ec\u9690\u85cf\u6587\u4ef6 tree -a /boot/ \u663e\u793a\u6240\u6709\u6587\u4ef6,\u5305\u62ec\u9690\u85cf\u6587\u4ef6 tree -ad /boot/ \u53ea\u663e\u793a\u6587\u4ef6\u5939,\u4e0d\u663e\u793a\u6587\u4ef6 tree -L 1 /boot/ \u904d\u5386\u76ee\u5f55\u7684\u6700\u5927\u5c42\u6570,-L\u540e\u5e94\u8be5\u662f\u5927\u4e8e0\u7684\u6b63\u6574\u6570 \u8fd9\u91cc\u662f1 \u8868\u793a\u53ea\u663e\u793a/boot/\u7684\u513f\u5b50 tree -F \u76ee\u5f55 -F \u5728\u6761\u76ee\u540e\u52a0\u4e0a\u6587\u4ef6\u7c7b\u578b\u7684\u6307\u793a\u7b26\u53f7,\u4f8b\u5982\u4f1a\u5728\u663e\u793a\u51fa\u7684\u76ee\u5f55\u540e\u9762\u52a0\u4e0a\u5de6\u659c\u6760/ # \u81ea\u4e2a\u513f\u5728\u5bb6\u76ee\u5f55\u4e0b\u521b\u5efa\u4e86tree_test\u76ee\u5f55,\u4ee5\u4fbf\u5b9e\u9a8c [ root@localhost ~ ] # tree ~/tree_test/ /root/tree_test/ \u2514\u2500\u2500 a \u2514\u2500\u2500 b 2 directories, 0 files [ root@localhost ~ ] # tree -a ~/tree_test/ /root/tree_test/ \u251c\u2500\u2500 a \u2502 \u251c\u2500\u2500 b \u2502 \u2514\u2500\u2500 .c \u2514\u2500\u2500 .a.txt 3 directories, 1 file [ root@localhost ~ ] # tree -ad ~/tree_test/ /root/tree_test/ \u2514\u2500\u2500 a \u251c\u2500\u2500 b \u2514\u2500\u2500 .c 3 directories [ root@localhost ~ ] # tree -L 1 ~/tree_test/ /root/tree_test/ \u2514\u2500\u2500 a 1 directory, 0 files [ root@localhost ~ ] # tree -aL 1 ~/tree_test/ /root/tree_test/ \u251c\u2500\u2500 a \u2514\u2500\u2500 .a.txt 1 directory, 1 file [ root@localhost ~ ] # tree -aF ~/tree_test/ /root/tree_test/ \u251c\u2500\u2500 a/ \u2502 \u251c\u2500\u2500 b/ \u2502 \u2514\u2500\u2500 .c/ \u2514\u2500\u2500 .a.txt 3 directories, 1 file \u521b\u5efa \u00b6 touch \u00b6 touch\u521b\u5efa\u7684\u662f\u666e\u901a\u6587\u672c\u6587\u4ef6 ,\u4e0e\u6587\u4ef6\u540e\u7f00\u540d\u65e0\u5173!!!\u540e\u7f00\u540d\u4ec5\u4ec5\u662f\u4e3a\u4e86\u4fbf\u4e8e\u8bc6\u522b\u7684. \u6211\u4eec\u4e60\u60ef\u4e8e\u901a\u5e38\u662f\u52a0txt\u7684\u540e\u7f00. \u53ef\u4ee5\u7528\u7edd\u5bf9\u8def\u5f84, \u82e5\u7528\u76f8\u5bf9\u8def\u5f84\u7684\u8bdd,\u5c31\u5efa\u5728\u5f53\u524d\u4f4d\u7f6e\u5566.. touch file1.txt \u65e0\u5219\u521b\u5efa,\u6709\u5219\u4fee\u6539\u6587\u4ef6\u7684\u65f6\u95f4 \u6279\u91cf\u521b\u5efa\u6587\u4ef6 touch a.txt b.txt c.txt touch {d,e,f}.txt touch {1..6}.txt touch {a..c}.txt touch {1..3}{a..b}.txt \u4f1a\u8fdb\u884c\u6392\u5217\u7ec4\u5408!\u8fd9\u91cc\u5171\u4f1a\u67096\u4e2a\u6587\u4ef6 touch ego{n,N}.txt \u76f8\u5f53\u4e8e touch egon.txt egoN.txt [ root@localhost opt ] # touch a.txt b.txt c.txt [ root@localhost opt ] # ls a.txt b.txt c.txt [ root@localhost opt ] # touch {d,e,f}.txt [ root@localhost opt ] # ls a.txt b.txt c.txt d.txt e.txt f.txt [ root@localhost opt ] # rm -rf # \u6ce8\u610f\u54e6,\u65e0\u6548!\u6ca1\u5565\u6548\u679c.. [ root@localhost opt ] # rm -rf b.txt [ root@localhost opt ] # rm -rf * # \u7b49\u540c\u4e8e touch /opt/{1..6}.txt [ root@localhost opt ] # touch {1..6}.txt [ root@localhost opt ] # ls 1 .txt 2 .txt 3 .txt 4 .txt 5 .txt 6 .txt [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # touch {a..d}.txt [ root@localhost opt ] # ls a.txt b.txt c.txt d.txt [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # touch {1..3}{a..b}.txt [ root@localhost opt ] # ls 1a.txt 1b.txt 2a.txt 2b.txt 3a.txt 3b.txt \"\"\" rm -rf * \u5220\u9664\u5f53\u524dopt\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u5185\u5bb9 r\u9012\u5f52\u5220,\u5220\u6587\u4ef6\u5939\u5fc5\u987b\u52a0; f\u5f3a\u5236\u5220,\u4e0d\u7ba1\u662f\u5220\u6587\u4ef6\u8fd8\u662f\u6587\u4ef6\u5939\u90fd\u4e0d\u4f1a\u8be2\u95ee\u662f\u5426\u5220\u9664,\u4e0d\u4f1a\u63d0\u793a\u5566\uff01 \"\"\" [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 0 mkdir \u00b6 mkdir \u201cmake diretory\u201d \u7528\u4e8e\u521b\u5efa\u6587\u4ef6\u5939/\u76ee\u5f55 \u25cb \u76f8\u5bf9\u8def\u5f84\u4e0e\u7edd\u5bf9\u8def\u5f84\u521b\u5efa\u76ee\u5f55 \u25cb \u7ed3\u5408\u82b1\u62ec\u53f7\u6279\u91cf\u521b\u5efa\u76ee\u5f55 \u25cb -v \u53cd\u9988\u521b\u5efa\u6210\u529f\u7684\u4fe1\u606f \u25cb -p \u6839\u636e\u8def\u5f84 \u9012\u5f52\u7684\u521b\u5efa \u76ee\u5f55 # \u7edd\u5bf9\u8def\u5f84\u521b\u5efa\u76ee\u5f55 [ root@localhost / ] # mkdir /opt/test [ root@localhost / ] # cd /opt/test # \u76f8\u5bf9\u8def\u5f84\u521b\u5efa\u76ee\u5f55 [ root@localhost test ] # mkdir a b [ root@localhost test ] # ls a b # \u7edd\u5bf9\u8def\u5f84\u7ed3\u5408{}\u82b1\u62ec\u53f7 [ root@localhost test ] # mkdir /opt/test/{c,d} [ root@localhost test ] # ls a b c d # -v \u53cd\u9988\u521b\u5efa\u7684\u4fe1\u606f [ root@localhost test ] # mkdir -v {mmm,nnn} mkdir: \u5df2\u521b\u5efa\u76ee\u5f55 \"mmm\" mkdir: \u5df2\u521b\u5efa\u76ee\u5f55 \"nnn\" [ root@localhost test ] # ls a b c d mmm nnn # \u56e0\u4e3aa\u6587\u4ef6\u5939\u4e0b\u6ca1\u6709b\u6587\u4ef6\u5939 \u6240\u4ee5c\u6587\u4ef6\u5939\u521b\u5efa\u5931\u8d25 [ root@localhost test ] # mkdir a/b/c mkdir: \u65e0\u6cd5\u521b\u5efa\u76ee\u5f55 \"a/b/c\" : \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 # -p \u9012\u5f52\u7684\u521b\u5efa\u6587\u4ef6\u5939 [ root@localhost test ] # mkdir -p a/b/c [ root@localhost test ] # mkdir -p /opt/test/x/y/z [ root@localhost test ] # tree . \u251c\u2500\u2500 a \u2502 \u2514\u2500\u2500 b \u2502 \u2514\u2500\u2500 c \u251c\u2500\u2500 b \u251c\u2500\u2500 c \u251c\u2500\u2500 d \u251c\u2500\u2500 mmm \u251c\u2500\u2500 nnn \u2514\u2500\u2500 x \u2514\u2500\u2500 y \u2514\u2500\u2500 z 11 directories, 0 files \u590d\u5236 \u00b6 cp \u00b6 cp \"copy\" \u7528\u4e8e\u590d\u5236\u6587\u4ef6\u3001\u6587\u4ef6\u5939/\u76ee\u5f55.. \u539f\u7406: \u627e\u5230\u6e90\u6587\u4ef6,\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u6587\u4ef6,\u5c06\u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u51fa\u6765\u5199\u5230\u65b0\u6587\u4ef6\u4e2d. cp \u56db\u5927\u9009\u9879 -r\uff5c-a\uff5c-f \uff5c-i cp \u6587\u4ef6\u6e90\u8def\u5f84 \u6587\u4ef6\u76ee\u6807\u8def\u5f84 cp /etc/passwd . \u628apasswd\u6587\u4ef6\u62f7\u8d1d\u5230\u5f53\u524d\u6587\u4ef6\u5939\u4e0b, \u65b0\u6587\u4ef6\u540d\u4e0d\u53d8 cp /etc/passwd ./h.txt \u628apasswd\u6587\u4ef6\u62f7\u8d1d\u5230/opt\u6587\u4ef6\u5939\u4e0b, \u65b0\u6587\u4ef6\u540d\u547d\u540d\u4e3ah.txt [ root@localhost opt ] # pwd /opt [ root@localhost opt ] # ls [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 0 \"\"\" \u8fd9\u91cc\u7684.\u6307\u4ee3\u5f53\u524d\u6240\u5728\u76ee\u5f55/opt cp /etc/passwd ./h.txt \u7b49\u540c\u4e8e cp /etc/passwd /opt/h.txt \"\"\" [ root@localhost opt ] # cp /etc/passwd . # \u62f7\u8d1d\u8fc7\u6765\u4e0d\u6539\u540d [ root@localhost opt ] # cp /etc/passwd ./h.txt # \u62f7\u8d1d\u8fc7\u6765\u5e76\u6539\u540d h.txt\u6587\u4ef6\u4e0d\u7528\u4e8b\u5148\u5b58\u5728 [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 8 -rw-r--r-- 1 root root 2351 7\u6708 6 17 :07 h.txt -rw-r--r-- 1 root root 2351 7\u6708 6 17 :06 passwd \"\"\" /opt\u4e0b\u6ca1\u6709test\u6587\u4ef6\u5939,\u6240\u4ee5\u5931\u8d25 \"\"\" [ root@localhost opt ] # cp /etc/passwd ./test/h2.txt cp: \u65e0\u6cd5\u521b\u5efa\u666e\u901a\u6587\u4ef6 \"./test/h2.txt\" : \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 cp -r \u00b6 cp -r \u6e90\u6587\u4ef6\u5939 \u76ee\u6807\u6587\u4ef6\u5939 # \u76ee\u6807\u6587\u4ef6\u5939\u4e0b\u6709\u4e2a\u8ddf\u6e90\u6587\u4ef6\u5939\u540c\u540d\u7684\u5b50\u6587\u4ef6\u5939 cp -r \u6e90\u6587\u4ef6\u5939/* \u76ee\u6807\u6587\u4ef6\u5939 # \u628a\u6e90\u6587\u4ef6\u5939\u7684\u5b50\u5b50\u5b59\u5b59\u62f7\u8d1d\u5230\u76ee\u6807\u6587\u4ef6\u5939\u4e0b,\u4e0d\u5305\u62ec\u6e90\u6587\u4ef6\u5939\u8fd9\u4e00\u5c42 \u6572\u9ed1\u677f! \u62f7\u8d1d\u6587\u4ef6\u5939\u5fc5\u987b\u52a0 -r \"\"\" \u6ce8\u610f\u54e6,\u8fd9\u91cc\u662f\u628a\u6839\u76ee\u5f55\u4e0b\u7684boot\u6587\u4ef6\u5939\u62f7\u8d1d\u5230\u4e86opt\u6587\u4ef6\u5939\u4e0b,\u8fd8\u5e26\u7740boot\u8fd9\u4e2a\u6587\u4ef6\u5939 \"\"\" [ root@localhost opt ] # cp -r /boot/ /opt [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 4 dr-xr-xr-x 5 root root 4096 7\u6708 6 17 :31 boot \"\"\" \u6709\u53ef\u80fd,\u6211\u4eec\u7684\u9700\u6c42\u662f\u5c06boot\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u5185\u5bb9(\u5373boot\u7684\u5b50\u5b50\u5b59\u5b59)\u62f7\u8d1d\u5230 opt\u6587\u4ef6\u5939\u91cc,\u4e0d\u9700\u8981boot\u8fd9\u4e00\u5c42\u6587\u4ef6\u5939 \"\"\" [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 0 [ root@localhost opt ] # cp -r /boot/* /opt [ root@localhost opt ] # ls config-3.10.0-1160.66.1.el7.x86_64 config-3.10.0-1160.el7.x86_64 efi grub grub2 initramfs-0-rescue-be87405afe3b480da138503ccab0ebd2.img initramfs-3.10.0-1160.66.1.el7.x86_64.img initramfs-3.10.0-1160.el7.x86_64.img symvers-3.10.0-1160.66.1.el7.x86_64.gz symvers-3.10.0-1160.el7.x86_64.gz System.map-3.10.0-1160.66.1.el7.x86_64 System.map-3.10.0-1160.el7.x86_64 vmlinuz-0-rescue-be87405afe3b480da138503ccab0ebd2 vmlinuz-3.10.0-1160.66.1.el7.x86_64 vmlinuz-3.10.0-1160.el7.x86_64 cp -a \u00b6 \u62f7\u8d1d\u8fc7\u7a0b\u4e2d\u5c06\u6240\u6709\u7684\u4fe1\u606f\u4e00\u6478\u4e00\u6837\u7684\u7ed9\u65b0\u6587\u4ef6 cp -a /home/dc/a.txt /mnt/b.txt \u25b3 \u666e\u901a\u7528\u6237dc\u5728\u5bb6\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u4ef6a.txt [ dc@localhost ~ ] $ pwd /home/dc [ dc@localhost ~ ] $ ls [ dc@localhost ~ ] $ touch a.txt [ dc@localhost ~ ] $ ll \u603b\u7528\u91cf 0 -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 a.txt \u25b3 root\u7528\u6237\u662f\u7ba1\u7406\u5458,\u662f\u6709\u6743\u9650\u770b\u5230\u666e\u901a\u7528\u6237dc\u5bb6\u76ee\u5f55\u91cc\u7684\u5185\u5bb9\u7684 \"\"\" root\u7528\u6237\u901a\u8fc7\u62f7\u8d1ddc\u5bb6\u76ee\u5f55\u4e0b\u7684a.txt\u6587\u4ef6\u5230/mnt/\u6587\u4ef6\u5939\u4e0b, \u53d1\u73b0\u62f7\u8d1d\u6587\u4ef6\u7684 \u6240\u5c5e\u4eba\u548c\u7528\u6237\u7ec4 \u90fd\u4ecedc\u53d8\u6210\u4e86root \u56e0\u4e3a\u662froot\u6267\u884c\u7684cp\u547d\u4ee4 \"\"\" [ root@localhost ~ ] # pwd /root [ root@localhost ~ ] # ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # ll /home/dc/a.txt -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 /home/dc/a.txt [ root@localhost ~ ] # cp /home/dc/a.txt /mnt/ [ root@localhost ~ ] # ll /mnt/a.txt -rw-r--r-- 1 root root 0 7\u6708 6 21 :37 /mnt/a.txt \"\"\" \u82e5\u60f3\u5728\u62f7\u8d1d\u8fc7\u7a0b\u4e2d\u5c06\u6240\u6709\u7684\u4fe1\u606f\u4e00\u6478\u4e00\u6837\u7684\u7ed9\u65b0\u6587\u4ef6,\u9700\u8981\u52a0 -a \u9009\u9879 \u6ce8\u610f: \u5fc5\u987b\u662froot\u7528\u6237\u64cd\u4f5c\u624d\u6709\u7528,\u666e\u901a\u7528\u6237\u52a0-a\u9009\u9879\u65e0\u6548 \"\"\" [ root@localhost ~ ] # cp -a /home/dc/a.txt /mnt/b.txt [ root@localhost ~ ] # ll /mnt/b.txt -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 /mnt/b.txt cp -f \u00b6 -f\u9009\u9879\u4e0e\u6743\u9650\u6253\u4e86\u4e2a\u4ea4\u9053 cp -f /opt/test/a.txt /opt/test1/a.txt \u5f53\u524d\u7528\u6237\u5bf9\u76ee\u6807\u6587\u4ef6\u5939 /test1 \u6709wx\u6743\u9650 ( \u8fd9\u662f\u5927\u524d\u63d0!!! ) \u4f46\u662f\u5f53\u524d\u7528\u6237\u5bf9\u76ee\u6807\u6587\u4ef6 /test1/a.txt \u6ca1\u6709\u5199\u6743\u9650. \u5728\u62f7\u8d1d\u65f6\u5019,cp\u547d\u4ee4\u53ef\u4ee5\u52a0\u4e0a -f \u9009\u9879, -f\u9009\u9879\u4f1a\u5148\u6267\u884c rm -rf /test1/a.txt \u5220\u9664\u76ee\u6807\u6587\u4ef6,\u518d\u6267\u884c cp /opt/test/a.txt /opt/test1 !!! \"\"\" \u25b3 \u767b\u5f55root\u8d26\u6237,\u8fdb\u884c\u4ee5\u4e0b\u7684\u51c6\u5907\u5de5\u4f5c root\u7528\u6237\u5728opt\u7a7a\u6587\u4ef6\u5939\u91cc\u521b\u5efa\u4e86test\u4e0etest1\u6587\u4ef6\u5939,\u5e76\u5728\u4e24\u4e2a\u6587\u4ef6\u5939\u91cc\u90fd\u521b\u5efa\u4e86\u540d\u4e3aa.txt\u7684\u6587\u4ef6 \u5f80test/a.txt\u8f93\u5165\u5185\u5bb9'000';\u5f80test1/a.txt\u8f93\u5165\u5185\u5bb9'111' \"\"\" [ root@localhost opt ] # mkdir test test1 [ root@localhost opt ] # touch test/a.txt [ root@localhost opt ] # touch test1/a.txt [ root@localhost opt ] # echo \"000\" > test/a.txt [ root@localhost opt ] # echo \"111\" > test1/a.txt [ root@localhost opt ] # cat test/a.txt 000 [ root@localhost opt ] # cat test1/a.txt 111 [ root@localhost opt ] # ll -d test1/ drwxr-xr-x 2 root root 19 7\u6708 6 22 :20 test1/ [ root@localhost opt ] # ll test/a.txt -rw-r--r-- 1 root root 4 7\u6708 6 22 :21 test/a.txt [ root@localhost opt ] # ll test1/a.txt -rw-r--r-- 1 root root 4 7\u6708 6 22 :21 test1/a.txt \"\"\" \u6211\u4eec\u77e5\u9053cp\u62f7\u8d1d\u7684\u672c\u8d28\u662f:\u627e\u5230\u6e90\u6587\u4ef6,\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u6587\u4ef6,\u5c06\u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u51fa\u6765\u5199\u5230\u65b0\u6587\u4ef6\u4e2d. \u73b0\u5728\u767b\u5f55\u4e86\u7528\u6237m,\u5bf9\u4e0b\u9762\u8fd9\u4e24\u79cd\u60c5\u51b5\u8fdb\u884c\u5206\u6790 \u2605 \u60c5\u51b51> rm -rf /opt/test1/a.txt # \u6ce8\u610f\u54e6,\u8fd9\u91cc\u5148\u628atest1\u6587\u4ef6\u5939\u4e0b\u7684a.txt\u6587\u4ef6\u5220\u9664\u6389\u5566 [root@localhost opt]# tree . \u251c\u2500\u2500 test \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test1 2 directories, 1 files cp /opt/test/a.txt /opt/test1 \u7528\u6237m\u9700\u8981\u6709\u5bf9/opt/test/a.txt\u6587\u4ef6\u62e5\u6709\u8bfb\u6743\u9650 \u4ee5\u53ca \u5bf9/opt/test1\u6587\u4ef6\u62e5\u6709x\u53ef\u6267\u884c\u6743\u9650(\u5207\u8fdbtest1\u8fd9\u4e2a\u76ee\u5f55)\u548cw\u5199\u6743\u9650(\u5f80test1\u6587\u4ef6\u5939\u91cc\u5199\u5165\u65b0\u6587\u4ef6a.txt) \u53ea\u662fcp\u64cd\u4f5c\u7684\u8bdd,\u7528\u6237m\u5bf9/opt/test1\u7684\u5199\u6743\u9650\u7684\u8bdd\u6ca1\u5fc5\u8981\u6709 \u4f46\u901a\u8fc7\u89c2\u5bdf /opt/test1\u7684\u6743\u9650\u4e3a drwxr-xr-x \u53d1\u73b0\u73b0\u5728\u9664\u4e86root\u7528\u6237\u7684\u5176\u4ed6\u7528\u6237\u5bf9test1\u6587\u4ef6\u5939\u90fd\u6ca1\u5199\u6743\u9650 \u6240\u4ee5\u7528\u6237m\u662f\u666e\u901a\u7528\u6237dc\u65f6.\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u4f1a\u53cd\u9988\u6743\u9650\u4e0d\u591f. [dc@localhost ~] $ cp /opt/test/a.txt /opt/test1 cp: \u65e0\u6cd5\u521b\u5efa\u666e\u901a\u6587\u4ef6\" /opt/test1/a.txt \": \u6743\u9650\u4e0d\u591f [\u89e3\u51b3\u65b9\u6848]:\u7528root\u8d26\u6237\u66f4\u6539\u5176\u5b83\u7528\u6237(\u7528\u6237dc)\u5bf9test1\u6587\u4ef6\u5939\u7684\u6743\u9650,\u8ba9\u5176\u81f3\u5c11\u62e5\u6709\u5199\u6743\u9650\u548c\u6267\u884c\u6743\u9650 -wx # \u8fd9\u91cc\u8ba9\u5176\u4ed6\u7528\u6237\u62e5\u6709r\u6743\u9650,\u662f\u65b9\u4fbf\u666e\u901a\u7528\u6237dc\u4f7f\u7528tree\u4ee5\u53cals\u547d\u4ee4\u67e5\u770btest1\u6587\u4ef6\u5939 [root@localhost opt]# chmod o=rwx test1/ [root@localhost opt]# ll -d test1/ drwxr-xrwx 2 root root 19 7\u6708 6 22:58 test1/ \u767b\u5f55\u666e\u901a\u7528\u6237dc,\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4.. [dc@localhost ~] $ cp /opt/test/a.txt /opt/test1/ [dc@localhost ~] $ tree /opt /opt \u251c\u2500\u2500 test \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test1 \u2514\u2500\u2500 a.txt 2 directories, 2 files # \u8fd9\u662fdc\u7528\u6237\u6267\u884c\u62f7\u8d1d\u547d\u4ee4\u521b\u5efa\u7684\u6587\u4ef6a.txt \u6240\u4ee5\u5176\u7528\u6237\u548c\u7528\u6237\u7ec4\u90fd\u662fdc [dc@localhost ~] $ ll /opt/test1/a.txt -rw-r--r-- 1 dc dc 4 7\u6708 6 22:58 /opt/test1/a.txt [dc@localhost ~] $ cat /opt/test1/a.txt 000 \u2605 \u60c5\u51b52> [root@localhost opt]# tree . \u251c\u2500\u2500 test \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test1 \u2514\u2500\u2500 a.txt 2 directories, 2 files [root@localhost opt]# ll -d /opt/test1 drwxr-xr-x 2 root root 19 7\u6708 6 23:35 /opt/test1 [root@localhost opt]# ll /opt/test1/a.txt -rw-r--r-- 1 root root 4 7\u6708 6 23:35 /opt/test1/a.txt cp /opt/test/a.txt /opt/test1/a.txt \u7528\u6237m\u9700\u8981\u6709\u5bf9/opt/test/a.txt\u6587\u4ef6\u62e5\u6709\u8bfb\u6743\u9650,\u4ee5\u53ca\u5bf9/opt/test1/a.txt\u62e5\u6709\u5199\u6743\u9650 \u4f46\u901a\u8fc7\u89c2\u5bdf/opt/test1/a.txt\u7684\u6743\u9650\u4e3a-rw-r--r--,\u53d1\u73b0\u5176\u4ed6\u7528\u6237\u5bf9\u6b64\u6587\u4ef6\u53ea\u6709\u8bfb\u6743\u9650.. \u82e5\u7528\u6237m\u662f\u666e\u901a\u7528\u6237dc,\u6267\u884c cp /opt/test/a.txt /opt/test1/a.txt \u7406\u60f3\u60c5\u51b5\u4e0b,linux\u5e95\u5c42\u4f1a\u5c06\u6e90\u6587\u4ef6\u8bfb\u51fa\u6765\u5f80\u65b0\u6587\u4ef6\u91cc\u9762\u5199,\u65b0\u6587\u4ef6\u82e5\u5df2\u7ecf\u5b58\u5728,\u5c31\u4e0d\u4f1a\u65b0\u521b\u5efa\u5566,\u4f1a\u8986\u76d6\u6389.. \u4f46\u6743\u9650\u4e0d\u591f\u554a\uff01\uff01\uff01 # \u6700\u76f4\u767d\u7684\u539f\u56e0,a.txt\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\u4e86,dc\u7528\u6237\u6ca1\u6709\u5f80\u91cc\u9762\u5199\u7684\u6743\u9650 [dc@localhost ~] $ cp /opt/test/a.txt /opt/test1/a.txt cp: \u65e0\u6cd5\u521b\u5efa\u666e\u901a\u6587\u4ef6\" /opt/test1/a.txt \": \u6743\u9650\u4e0d\u591f [\u89e3\u51b3\u65b9\u6848] cp\u4f7f\u7528\u9009\u9879 -f \u5982\u679c\u6709\u9700\u8981,\u5220\u9664\u5df2\u5b58\u5728\u7684\u76ee\u7684\u6587\u4ef6.. \u76f8\u5f53\u4e8e\u53d8\u6210\u60c5\u51b5\u4e00\u7684\u6837\u5b50!! # \u4f46\u4f9d\u7136\u63d0\u793a\u6743\u9650\u4e0d\u591f,\u90a3\u662f\u56e0\u4e3a\u5176\u4ed6\u7528\u6237\u5bf9/opt/test1\u6ca1\u6709\u5199\u6743\u9650\u5bfc\u81f4\u7684 [dc@localhost ~] $ cp -f /opt/test/a.txt /opt/test1/a.txt cp: \u65e0\u6cd5\u5220\u9664\" /opt/test1/a.txt \": \u6743\u9650\u4e0d\u591f # \u6dfb\u52a0\u5176\u4ed6\u7528\u6237\u5bf9/opt/test1\u7684\u5199\u6743\u9650 [root@localhost opt]# chmod o=rwx test1/ [root@localhost opt]# ll -d test1/ drwxr-xrwx 2 root root 19 7\u6708 6 23:35 test1/ # \u518d\u6267\u884c\u547d\u4ee4 [dc@localhost ~] $ cp -f /opt/test/a.txt /opt/test1/a.txt [dc@localhost ~] $ cat /opt/test1/a.txt 000 \"\"\" cp -i \u00b6 -i \u9009\u9879\u4e0e\u4ea4\u4e92\u6709\u5173,\u7ed9\u63d0\u793a \u6709\u7684\u7cfb\u7edf\u5728\u5b89\u88c5\u7684\u65f6\u5019, cp - i \u7684 alias\u522b\u540d\u5c31\u662fcp, \u4e5f\u5c31\u662f\u8bf4\u5728\u6267\u884c cp \u7684\u65f6\u5019, \u5176\u5b9e\u662f\u6267\u884c\u7684 cp -i # \u5904\u4e8e\u5b89\u5168\u8003\u8651,root\u7528\u6237\u4e0b\u5bf9cp\u547d\u4ee4\u6709\u6539\u9020,\u4f46\u666e\u901a\u7528\u6237\u4e0b\u6ca1\u6709\u5bf9cp\u547d\u4ee4\u7684\u6539\u9020!! [ root@localhost mnt ] # alias alias cp = 'cp -i' alias mv = 'mv -i' alias rm = 'rm -i' ... ... ... [ root@localhost mnt ] # mkdir a b [ root@localhost mnt ] # touch a/m.txt [ root@localhost mnt ] # touch b/m.txt [ root@localhost mnt ] # echo \"111\" > a/m.txt [ root@localhost mnt ] # echo \"222\" > b/m.txt [ root@localhost mnt ] # cat a/m.txt 111 [ root@localhost mnt ] # cat b/m.txt 222 [ root@localhost mnt ] # cp a/m.txt b/m.txt cp\uff1a\u662f\u5426\u8986\u76d6 \"b/m.txt\" \uff1f n \u4e0d\u60f3\u8981\u63d0\u793a\u7684\u89e3\u51b3\u65b9\u6848: 1 > unalias cp 2 > /usr/bin/cp 3 > \\c p a/m.txt b/m.txt \u79fb\u52a8\u4e0e\u5220\u9664 \u00b6 mv \u00b6 \u7c7b\u4f3c\u4e8ewindow\u91cc\u7684\u526a\u5207.. \u25a0 \u79fb\u52a8\u6587\u4ef6 [ root@localhost mnt ] # mkdir test1 test2 [ root@localhost mnt ] # touch test1/a.txt [ root@localhost mnt ] # touch test1/b.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u251c\u2500\u2500 a.txt \u2502 \u2514\u2500\u2500 b.txt \u2514\u2500\u2500 test2 2 directories, 2 files [ root@localhost mnt ] # mv test1/a.txt test2/ [ root@localhost mnt ] # mv test1/b.txt test2/bbb.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2514\u2500\u2500 test2 \u251c\u2500\u2500 a.txt \u2514\u2500\u2500 bbb.txt 2 directories, 2 files # \u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u7ed9\u6587\u4ef6\u6539\u540d\u7684\u64cd\u4f5c [ root@localhost mnt ] # mv test1/a.txt test1/b.txt \u25a0 \u79fb\u52a8\u6587\u4ef6\u5939 [ root@localhost mnt ] # mkdir -p test1/a/b/c [ root@localhost mnt ] # mkdir test2 [ root@localhost mnt ] # touch test1/a/b/c/a.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 a \u2502 \u2514\u2500\u2500 b \u2502 \u2514\u2500\u2500 c \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test2 5 directories, 1 file [ root@localhost mnt ] # mv test1/a/ test2/ [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2514\u2500\u2500 test2 \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 c \u2514\u2500\u2500 a.txt 5 directories, 1 file # \u4e3a\u79fb\u52a8\u7684\u6587\u4ef6\u5939\u91cd\u65b0\u547d\u4e86\u540d.. [ root@localhost mnt ] # mv test2/a/ test1/xxx [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 xxx \u2502 \u2514\u2500\u2500 b \u2502 \u2514\u2500\u2500 c \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test2 5 directories, 1 file \u25a0 \u79fb\u52a8\u6587\u4ef6\u5939\u5185\u5bb9(\u5b50\u5b50\u5b59\u5b59),\u4e0d\u5305\u62ec\u6587\u4ef6\u5939\u8fd9\u4e00\u5c42 [ root@localhost mnt ] # mkdir -p test1/mmm [ root@localhost mnt ] # mkdir test2/ [ root@localhost mnt ] # touch test1/mmm/{1..3}.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 mmm \u2502 \u251c\u2500\u2500 1 .txt \u2502 \u251c\u2500\u2500 2 .txt \u2502 \u2514\u2500\u2500 3 .txt \u2514\u2500\u2500 test2 3 directories, 3 files # mmm\u6587\u4ef6\u5939\u8fd8\u5728,mmm\u6587\u4ef6\u5939\u7684\u5b50\u5b50\u5b59\u5b59\u88ab\u79fb\u52a8\u8d70\u4e86 [ root@localhost mnt ] # mv test1/mmm/* test2/ [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 mmm \u2514\u2500\u2500 test2 \u251c\u2500\u2500 1 .txt \u251c\u2500\u2500 2 .txt \u2514\u2500\u2500 3 .txt 3 directories, 3 files rm \u00b6 \u6ce8\u610f! rm \u7684 -f\u9009\u9879 \u4e0e cp\u7684 -f\u9009\u9879\u662f\u4e0d\u4e00\u6837\u7684!!! rm -rf -r \u9012\u5f52 -f force\u5f3a\u5236 \u8fd9\u4f1a\u4f7f-i\u4e0d\u751f\u6548\u5566! -v \u8be6\u7ec6\u8fc7\u7a0b,\u4f1a\u544a\u8bc9\u4f60\u5220\u9664\u4e86\u54ea\u4e9b\u5185\u5bb9. \u67e5\u770b\u6587\u4ef6\u5185\u5bb9 \u00b6 \u25b3 \u6570\u636e\u51c6\u5907 [ root@localhost mnt ] # mkdir test [ root@localhost mnt ] # touch test/a.txt [ root@localhost mnt ] # vim test/a.txt \"\"\" 111 222 333 444 555 666 aaa bbb \"\"\" cat \u00b6 -n \u663e\u793a\u884c\u53f7 -A \u5305\u62ec\u63a7\u5236\u5b57\u7b26(\u6362\u884c\u7b26 /n \u4ee3\u8868\u6362\u884c) Ps: linux\u4e0bcat\u67e5\u770b\u663e\u793a\u4e3a $ ; Window\u4e0b\u4e3a ^M$ [ root@localhost mnt ] # cat -An test/a.txt 1 111 $ 2 222 $ 3 333 $ 4 444 $ 5 555 $ 6 666 $ 7 aaa$ 8 bbb$ head \u00b6 \u53ea\u67e5\u770b\u6587\u4ef6\u7684\u5934\u51e0\u884c,\u9ed8\u8ba4\u662f\u593410\u884c. # \u5199\u6210 head -3 /etc/passwd \u6548\u679c\u662f\u4e00\u6837\u7684 [ root@localhost mnt ] # head -n 3 test/a.txt 111 222 333 tail \u00b6 \u53ea\u67e5\u770b\u6587\u4ef6\u7684\u672b\u5c3e\u51e0\u884c,\u9ed8\u8ba4\u662f\u540e10\u884c. tail -f /mnt/test/a.txt \u52a8\u6001\u76d1\u6d4b\u67d0\u4e2a\u6587\u4ef6\u7684\u53d8\u5316! \u53ea\u8981\u5f80\u6587\u4ef6\u91cc \u65b0\u589e \u5185\u5bb9,\u5b83\u5c31\u4f1a\u53d8\u5316! \u6ce8\u610f\uff01\uff01\uff01 vim\u7684\u539f\u7406\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4e00\u4e0b\u5b50\u4ece\u786c\u76d8\u5168\u90e8\u8bfb\u5230\u5185\u5b58\u4e2d,\u5728\u5185\u5b58\u4e2d\u6539\u5b8c\u540e,\u518d\u4e00\u6b21\u6027\u5168\u90e8\u8986\u76d6\u786c\u76d8\u7684\u539f\u6587\u4ef6.. So, vim\u7f16\u8f91\u4e0d\u662f\u5728\u539f\u6709\u7684\u57fa\u7840\u4e0a\u65b0\u589e!!\u7c7b\u4f3c\u7684\u6709 pycharm\u3001word\u7b49\u539f\u7406\u4e00\u81f4.. \u6240\u4ee5\u5207\u8bb0\u5728\u7ebf\u4e0a\u73af\u5883\u522b\u7528vim\u6253\u5f00\u4e00\u4e2a\u5927\u6587\u4ef6!\u5185\u5b58\u88ab\u6324\u7206,\u76f4\u63a5\u5361\u6b7b... \u90a3\u5982\u4f55\u65b0\u589e\uff1f\u7528 echo \u547d\u4ee4.. \u4e00\u4e2a > \u7684\u8bdd\u662f\u8986\u76d6; \u4e24\u4e2a > \u662f\u5f80\u6587\u4ef6\u5185\u5bb9\u672b\u5c3e\u8ffd\u52a0\u5185\u5bb9! [ root@localhost mnt ] # tail -n 4 test/a.txt 555 666 aaa bbb [ root@localhost mnt ] # tail -n 4 test/a.txt | head -2 555 666 \u5176\u4ed6 \u00b6 less \u53ef\u4ee5\u4e0a\u4e0b\u952e\u6765\u56de\u7ffb\u9875\u67e5\u770b more \u6309\u7a7a\u683c\u952e\u4e00\u9875\u9875\u7ffb, \u6709\u767e\u5206\u6bd4\u663e\u793a..","title":"\u6587\u4ef6\u7ba1\u7406\u4e4b\u57fa\u7840\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_1","text":"\u76ee\u5f55\u6307\u7684\u5c31\u662f\u6587\u4ef6\u5939 Ps: \u6587\u4ef6\u5939\u91cc\u5b58\u653e\u7684\u662f\u5177\u4f53\u6709\u54ea\u4e9b\u6587\u4ef6;\u6587\u4ef6\u91cc\u5b58\u653e\u7684\u662f\u5177\u4f53\u7684\u6570\u636e. Windows: \u4ee5\u591a\u6839\u7684\u65b9\u5f0f\u7ec4\u7ec7\u6587\u4ef6 C: D: E: Linux : \u4ee5\u5355\u6839\u7684\u65b9\u5f0f\u7ec4\u7ec7\u6587\u4ef6 / \u662f\u4ee5\u6811\u5f62\u7684\u7ed3\u6784\u6765\u7ec4\u7ec7\u6587\u4ef6 \u25a0 bin -> usr/bin \u666e\u901a\u7528\u6237\u4f7f\u7528\u7684\u547d\u4ee4 Ps: -> \u4ee3\u8868 \u6839\u4e0b\u7684bin\u6587\u4ef6\u5939 /bin \u662f /usr/bin \u6587\u4ef6\u5939\u7684 \u5feb\u6377\u65b9\u5f0f .. \u5b98\u65b9\u79f0\u4e3a \u8f6f\u94fe\u63a5 \u25a0 sbin -> usr/sbin \u7ba1\u7406\u5458\u4f7f\u7528\u7684\u547d\u4ee4 \u25a0 boot \u5b58\u653e\u542f\u52a8\u76f8\u5173\u7684\u6587\u4ef6 \u4f8b\u5982 kernel\u5185\u6838, grub\u5f15\u5bfc\u88c5\u8f7d\u7a0b\u5e8f \u25a0 dev \u8bbe\u5907\u6587\u4ef6 /dev/sda \u786c\u76d8 s\u6307\u786c\u76d8\u63a5\u53e3SCSI;d\u662fdisk\u786c\u76d8;a\u4ee3\u8868\u7b2c\u4e00\u5757 /dev/cdrom /dev/sr0 \u5149\u9a71\u5149\u76d8\u955c\u50cf\u8bbe\u5907 \u7528\u6765\u4e3a\u6211\u4eec\u7684\u64cd\u4f5c\u7cfb\u7edf\u8865\u5145\u5305,\u56e0\u4e3a\u6700\u5c0f\u5316\u5b89\u88c5\u53ea\u662f\u5c06\u4e00\u90e8\u5206\u5185\u5bb9\u5199\u5165\u5230\u4e86\u786c\u76d8 /dev/null \u9ed1\u6d1e\u6587\u4ef6,\u628a\u4e0d\u60f3\u8981\u663e\u793a\u7684\u5185\u5bb9\u4e22\u5165\u9ed1\u6d1e..\u53ea\u8fdb\u4e0d\u51fa \u901a\u5e38\u5199\u811a\u672c\u8f6f\u4ef6\u7684\u65f6\u5019\u4f1a\u7528 /dev/pts/0 \u865a\u62df\u7684Bash Shell\u7ec8\u7aef,\u63d0\u4f9b\u7ed9\u8fdc\u7a0b\u7528\u6237\u4f7f\u7528 aa0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u7ec8\u7aef 1\u4ee3\u8868\u7b2c2\u4e2a\u7ec8\u7aef \u4ee5\u6b64\u7c7b\u63a8 \u25a0 etc \u914d\u7f6e\u6587\u4ef6,\u5f88\u91cd\u8981,\u7cfb\u7edf\u7ea7\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u90fd\u5728\u8fd9\u91cc /etc/hostname \u7cfb\u7edf\u4e3b\u673a\u540d\u914d\u7f6e\u6587\u4ef6 /etc/sysconfig/network-scripts/ifcfg-ens33 \u7f51\u5361\u914d\u7f6e\u6587\u4ef6 /etc/resolv.conf \u6307\u5b9a\u8fdc\u7a0bDNS\u7684\u5730\u5740 /etc/hosts \u672c\u673a\u7684\u57df\u540d\u89e3\u6790\u6587\u4ef6 /etc/sysconfig/selinux SELINUX\u914d\u7f6e\u6587\u4ef6 \u25a0 home /home/dc \u666e\u901a\u7528\u6237dc\u7684\u5bb6\u76ee\u5f55 \u25a0 root /root \u7ba1\u7406\u5458root\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u25a0 lib -> usr/lib lib64 -> usr/lib64 \u5e93\u6587\u4ef6 \u91cc\u9762\u65f6\u64cd\u4f5c\u7cfb\u7edf\u8fd9\u4e2a\u8f6f\u4ef6\u6240\u5f15\u7528\u6240\u4f9d\u8d56\u7684\u5e93 \u25a0 media mnt opt \u90fd\u662f\u7a7a\u6587\u4ef6\u5939 \u79fb\u52a8\u8bbe\u5907(eg U\u76d8)\u7684 \u6302\u8f7d\u70b9 media\u662f\u9ed8\u8ba4\u7684 \u25a0 proc process\u7684\u7f29\u5199,\u653e\u7684\u662f\u8fdb\u7a0b\u76f8\u5173\u7684\u5185\u5bb9 /proc/sys/net/ipv4 \u5185\u6838\u53c2\u6570\u4f18\u5316\u6587\u4ef6 cat /proc/sys/net/ipv4 /tcp_max_syn_backlog \u534a\u8fde\u63a5\u6c60 \u25a0 run \u5b58\u653e\u7a0b\u5e8f\u8fd0\u884c\u540e\u6240\u4ea7\u751f\u7684pid(\u8fdb\u7a0b\u7f16\u53f7)\u6587\u4ef6 \u25a0 srv \u7269\u7406\u8bbe\u5907\u4ea7\u751f\u7684\u4e00\u4e9b\u6587\u4ef6 \u7a7a\u6587\u4ef6\u5939 \u25a0 sys \u786c\u4ef6\u8bbe\u5907\u7684\u9a71\u52a8\u7a0b\u5e8f\u4fe1\u606f,\u4e0d\u8981\u52a8\u5b83 \u25a0 tmp \u4e34\u65f6\u5b58\u653e\u6587\u4ef6,\u7c7b\u4f3c\u4e8e\u56de\u6536\u7ad9,\u7cfb\u7edf\u4f1a\u5b9a\u65f6\u5220\u9664\u8be5\u76ee\u5f55\u4e0b\u957f\u65f6\u95f4\u6ca1\u6709\u8bbf\u95ee\u7684\u6587\u4ef6 \u25a0 usr \u4e0e\u7cfb\u7edf\u6709\u5173\u7684\u6587\u4ef6,\u76f8\u5f53\u4e8eC:\\Windows \u25a0 var \u5b58\u653e\u7684\u662f\u4e00\u4e9b\u53d8\u5316\u6587\u4ef6 eg: \u6570\u636e\u5e93\u3001\u65e5\u5fd7\u3001\u90ae\u4ef6\u7b49 /var/lib/mysql mysql /var/ftp vsftpd /var/spool/mail mail /var/spool/cron cron log /var/log \u7cfb\u7edf\u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 /var/log/messages \u7cfb\u7edf\u65e5\u5fd7 /var/log/secure \u7cfb\u7edf\u767b\u5f55\u65e5\u5fd7 /var/tmp \u4e34\u65f6\u6587\u4ef6(\u4e3b\u8981\u662f\u7a0b\u5e8f\u4ea7\u751f\u7684\u4e34\u65f6\u6587\u4ef6) Ps: tail -f /var/log/messages \u52a8\u6001\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6 [ root@localhost ~ ] # ls -l / \u603b\u7528\u91cf 28 lrwxrwxrwx. 1 root root 7 6\u6708 30 18 :17 bin -> usr/bin dr-xr-xr-x. 5 root root 4096 6\u6708 30 23 :49 boot drwxr-xr-x 21 root root 3360 7\u6708 4 22 :54 dev drwxr-xr-x. 144 root root 8192 7\u6708 5 14 :39 etc drwxr-xr-x. 4 root root 32 7\u6708 4 16 :51 home lrwxrwxrwx. 1 root root 7 6\u6708 30 18 :17 lib -> usr/lib lrwxrwxrwx. 1 root root 9 6\u6708 30 18 :17 lib64 -> usr/lib64 drwxr-xr-x. 2 root root 6 4\u6708 11 2018 media drwxr-xr-x. 3 root root 18 6\u6708 30 23 :42 mnt drwxr-xr-x. 3 root root 16 6\u6708 30 18 :25 opt dr-xr-xr-x 214 root root 0 7\u6708 4 22 :54 proc dr-xr-x---. 14 root root 4096 7\u6708 4 22 :55 root drwxr-xr-x 41 root root 1240 7\u6708 5 15 :58 run lrwxrwxrwx. 1 root root 8 6\u6708 30 18 :17 sbin -> usr/sbin drwxr-xr-x. 2 root root 6 4\u6708 11 2018 srv dr-xr-xr-x 13 root root 0 7\u6708 5 18 :23 sys drwxrwxrwt. 31 root root 4096 7\u6708 5 17 :42 tmp drwxr-xr-x. 13 root root 155 6\u6708 30 18 :17 usr drwxr-xr-x. 21 root root 4096 6\u6708 30 18 :47 var [ root@localhost ~ ] # which ls alias ls = 'ls --color=auto' /usr/bin/ls [ root@localhost ~ ] # /usr/bin/ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # /bin/ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 # [TCP\u7684\u534a\u8fde\u63a5\u6c60] # grep\u8fc7\u6ee4\u7b5b\u9009.. # \u5185\u6838\u76f8\u5f53\u4e00\u90e8\u5206\u7684\u4f18\u5316,\u5373\u4e0e\u7f51\u7edc\u53c2\u6570\u4f18\u5316\u76f8\u5173\u7684\u6587\u4ef6 \u90fd\u5728 /proc/sys/net/ipv4 \u8be5\u6587\u4ef6\u5939\u4e0b\u9762 [ root@localhost ~ ] # ls /proc/sys/net/ipv4/ | grep backlog tcp_max_syn_backlog [ root@localhost ~ ] # cat /proc/sys/net/ipv4/tcp_max_syn_backlog 128 # `pwd` \u67e5\u770b\u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939\u7684\u5b8c\u6574\u8def\u5f84 [ root@localhost ~ ] # pwd /root # `cd` \u5207\u6362\u6587\u4ef6\u5939 [ root@localhost ~ ] # cd /root","title":"\u6839\u76ee\u5f55\u7ed3\u6784"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_2","text":"\u7edd\u5bf9\u8def\u5f84 : \u8def\u5f84\u662f\u4ece\u6839\u5f00\u59cb\u7684,\u5373\u4ee5 / \u4f5c\u4e3a\u524d\u7f00 eg: /etc/sysconfig/network-scripts/ \u53ea\u6709\u7b2c\u4e00\u4e2a\u53f3\u659c\u6760\u4ee3\u8868\u6839\u6587\u4ef6\u5939, \u5176\u4f59\u7684\u90fd\u662f\u8def\u5f84\u5206\u9694\u7b26 /etc/////sysconfig///////network-scripts \u4e0e /etc/sysconfig/network-scripts \u6548\u679c\u662f\u4e00\u6837\u7684! \u76f8\u5bf9\u8def\u5f84 : \u53ea\u8981\u8def\u5f84\u4e0d\u662f\u4ee5 / \u5f00\u5934, \u4f1a\u4ee5\u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939\u7684\u8def\u5f84\u4e3a\u5f00\u5934\" \u5373pwd\u7684\u7ed3\u679c \"\u8fdb\u884c\u62fc\u63a5 [ root@localhost ~ ] # pwd /root # \u8fdb\u884c\u62fc\u63a5 \u76f8\u5f53\u4e8e\u8bbf\u95ee\u8def\u5f84 /root/etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost ~ ] # ls etc/sysconfig/network-scripts/ifcfg-ens33 ls: \u65e0\u6cd5\u8bbf\u95eeetc/sysconfig/network-scripts/ifcfg-ens33: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 [ root@localhost ~ ] # cd /etc/ [ root@localhost etc ] # pwd /etc # \u8fdb\u884c\u62fc\u63a5 \u76f8\u5f53\u4e8e\u8bbf\u95ee\u8def\u5f84 /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost etc ] # ls sysconfig/network-scripts/ifcfg-ens33 sysconfig/network-scripts/ifcfg-ens33 . \u94fe\u63a5\u5230\u5f53\u524d\u76ee\u5f55 .. \u94fe\u63a5\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55 ~ \u5f53\u524d\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u82e5\u662f\u7ba1\u7406\u5458: \uff5e/anaconda-ks.cfg\u7b49\u540c\u4e8e/root/anaconda-ks.cfg","title":"\u8def\u5f84"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_3","text":"","title":"\u6587\u4ef6\u64cd\u4f5c\u57fa\u7840\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_4","text":"\u547d\u4ee4\u8fde\u63a5\u7684\u4e24\u79cd\u65b9\u5f0f: 1 > \u5206\u53f7\u8fde\u63a5 -- \u4ece\u5de6\u5f80\u53f3\u4f9d\u6b21\u8fd0\u884c,\u4e0d\u7ba1\u662f\u5426\u51fa\u9519 ls ; pwd ; echo 123 2 > && \u7b26\u53f7\u8fde\u63a5 -- \u4ece\u5de6\u5f80\u53f3\u4f9d\u6b21\u8fd0\u884c,\u76f4\u5230\u51fa\u9519,\u540e\u9762\u7684\u5c31\u4e0d\u4f1a\u518d\u8fd0\u884c\u5566 ls && pwd && echo 123","title":"\u547d\u4ee4\u8fde\u63a5\u7684\u4e24\u79cd\u65b9\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#pwd","text":"\u67e5\u770b\u5f53\u524d\u6240\u5728\u76ee\u5f55 pwd \u67e5\u770b\u5f53\u524d\u6240\u5728\u6587\u4ef6\u5939\u8def\u5f84","title":"pwd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cd","text":"\u5207\u6362\u76ee\u5f55 cd \u9ed8\u8ba4\u5207\u56de\u5bb6\u76ee\u5f55 cd \uff5e \u5207\u5230\u5bb6\u76ee\u5f55 cd - \u5207\u5230\u4e0a\u4e00\u6b21\u6240\u5728\u6587\u4ef6\u5939/\u76ee\u5f55 cd . \u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0d\u52a8 cd .. \u5207\u5230\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939 [ root@localhost ~ ] # cd /etc/sysconfig/network-scripts/ [ root@localhost network-scripts ] # cd . [ root@localhost network-scripts ] # cd .. [ root@localhost sysconfig ] #","title":"cd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#ls","text":"\u6d4f\u89c8 ls -l \u6587\u4ef6 \u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u7684\u5177\u4f53\u4fe1\u606f ls -l \u6587\u4ef6\u5939 \u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u5939\u4e0b\u7684\u5b50\u6587\u4ef6\u4e0e\u5b50\u6587\u4ef6\u5939\u7684\u4fe1\u606f ls -dl \u6587\u4ef6\u5939 \u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u5939/\u76ee\u5f55\u672c\u8eab\u7684\u4fe1\u606f \u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u4e0a\u4e00\u7ea7 -l \u6765\u8fbe\u5230\u76f8\u540c\u7684\u76ee\u7684,\u4f46\u7ed3\u679c\u4e0d\u662f\u5f88\u76f4\u63a5 ls -al \u6d4f\u89c8\u7684\u7ed3\u679c\u4e2d\u5305\u542b\u9690\u85cf\u6587\u4ef6 \u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u90fd\u6709\u4e24\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6\u5939 . \u548c .. \"\"\" \u6587\u4ef6\u7c7b\u578b\u548c\u6743\u9650 -rw-r--r-- \u786c\u94fe\u63a5\u7684\u4e2a\u6570 1 \u5c5e\u4e3b(\u6587\u4ef6\u4e3b\u4eba) root \u5c5e\u7ec4(\u7528\u6237\u7ec4) root \uff08\u7b80\u5355\u7406\u89e3\u5c31\u662f\u54ea\u4e2a\u90e8\u95e8\uff09 \u6587\u4ef6\u5b57\u8282\u5927\u5c0f 2351 \u521b\u5efa\u4fee\u6539\u65f6\u95f4 7\u67084\u65e5 16:51 \u6587\u4ef6\u540d/\u6587\u4ef6\u8def\u5f84 /etc/passwd \u6572\u9ed1\u677f: linux\u4e0d\u662f\u4ee5\u6587\u4ef6\u7684\u540e\u7f00\u540d\u6765\u533a\u5206\u6587\u4ef6\u7c7b\u578b\u7684,\u800c\u662f\u4ee5ls -l\u7684\u9996\u4f4d\u6765\u533a\u5206\u7684 -rw-r--r-- - \u6587\u672c\u6587\u4ef6 d \u76ee\u5f55/\u6587\u4ef6\u5939 l link\u8f6f\u8fde\u63a5 \u540e\u9762\u76849\u4f4d\u8868\u793a\u6743\u9650 3\u4f4d\u4e3a\u4e00\u7ec4,\u6587\u4ef6\u4e3b\u4eba\u3001\u7528\u6237\u7ec4\u3001\u5176\u4ed6\u4eba(\u4e0d\u662f\u6587\u4ef6\u4e3b\u4eba,\u4e5f\u4e0d\u662f\u7ec4\u91cc\u7684\u7528\u6237) r \u8bfb; -- cat\u53ef\u4ee5\u770b\u91cc\u9762\u7684\u5185\u5bb9 w \u5199; -- \u5728\u6587\u4ef6\u5939\u91cc\u521b\u5efa\u5220\u9664\u5b50\u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939,vim\u4fee\u6539\u6587\u4ef6\u5185\u5bb9 x \u6267\u884c; -- \u6587\u4ef6\u53ef\u80fd\u662f\u4e00\u6761\u547d\u4ee4,\u80fd\u5426\u8fd0\u884c \u80fd\u5426\u5207\u6362cd\u5230\u6b64\u6587\u4ef6 Ps: -rw-r--r--. \u82e5\u6700\u540e\u8fd8\u6709\u4e2a\u70b9,\u8868\u793a\u6b64\u6587\u4ef6\u662f\u5728SElinux\u5df2\u52a0\u8f7d\u72b6\u6001\u4e0b\u521b\u5efa,\u6b64\u6587\u4ef6\u53d7SElinux\u7684\u7ba1\u5236 \"\"\" [ root@localhost sysconfig ] # ls -l /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 4 16 :51 /etc/passwd [ root@localhost / ] # ls -dl /etc drwxr-xr-x. 144 root root 8192 7\u6708 5 21 :32 /etc [ root@localhost / ] # ls -a . .autorelabel boot etc lib media opt root sbin sys usr .. bin dev home lib64 mnt proc run srv tmp var","title":"ls"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#tree","text":"\u67e5\u770b\u76ee\u5f55\u6811 linux\u4e00\u5207\u7686\u6587\u4ef6,\u7b3c\u7edf\u6765\u8bf4,\u6587\u4ef6\u5939\u672c\u8eab\u4e5f\u662f\u4e00\u79cd\u6587\u4ef6Hhhh yum install tree -y tree /boot/ \u663e\u793a\u6240\u6709\u6587\u4ef6,\u4e0d\u5305\u62ec\u9690\u85cf\u6587\u4ef6 tree -a /boot/ \u663e\u793a\u6240\u6709\u6587\u4ef6,\u5305\u62ec\u9690\u85cf\u6587\u4ef6 tree -ad /boot/ \u53ea\u663e\u793a\u6587\u4ef6\u5939,\u4e0d\u663e\u793a\u6587\u4ef6 tree -L 1 /boot/ \u904d\u5386\u76ee\u5f55\u7684\u6700\u5927\u5c42\u6570,-L\u540e\u5e94\u8be5\u662f\u5927\u4e8e0\u7684\u6b63\u6574\u6570 \u8fd9\u91cc\u662f1 \u8868\u793a\u53ea\u663e\u793a/boot/\u7684\u513f\u5b50 tree -F \u76ee\u5f55 -F \u5728\u6761\u76ee\u540e\u52a0\u4e0a\u6587\u4ef6\u7c7b\u578b\u7684\u6307\u793a\u7b26\u53f7,\u4f8b\u5982\u4f1a\u5728\u663e\u793a\u51fa\u7684\u76ee\u5f55\u540e\u9762\u52a0\u4e0a\u5de6\u659c\u6760/ # \u81ea\u4e2a\u513f\u5728\u5bb6\u76ee\u5f55\u4e0b\u521b\u5efa\u4e86tree_test\u76ee\u5f55,\u4ee5\u4fbf\u5b9e\u9a8c [ root@localhost ~ ] # tree ~/tree_test/ /root/tree_test/ \u2514\u2500\u2500 a \u2514\u2500\u2500 b 2 directories, 0 files [ root@localhost ~ ] # tree -a ~/tree_test/ /root/tree_test/ \u251c\u2500\u2500 a \u2502 \u251c\u2500\u2500 b \u2502 \u2514\u2500\u2500 .c \u2514\u2500\u2500 .a.txt 3 directories, 1 file [ root@localhost ~ ] # tree -ad ~/tree_test/ /root/tree_test/ \u2514\u2500\u2500 a \u251c\u2500\u2500 b \u2514\u2500\u2500 .c 3 directories [ root@localhost ~ ] # tree -L 1 ~/tree_test/ /root/tree_test/ \u2514\u2500\u2500 a 1 directory, 0 files [ root@localhost ~ ] # tree -aL 1 ~/tree_test/ /root/tree_test/ \u251c\u2500\u2500 a \u2514\u2500\u2500 .a.txt 1 directory, 1 file [ root@localhost ~ ] # tree -aF ~/tree_test/ /root/tree_test/ \u251c\u2500\u2500 a/ \u2502 \u251c\u2500\u2500 b/ \u2502 \u2514\u2500\u2500 .c/ \u2514\u2500\u2500 .a.txt 3 directories, 1 file","title":"tree"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_5","text":"","title":"\u521b\u5efa"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#touch","text":"touch\u521b\u5efa\u7684\u662f\u666e\u901a\u6587\u672c\u6587\u4ef6 ,\u4e0e\u6587\u4ef6\u540e\u7f00\u540d\u65e0\u5173!!!\u540e\u7f00\u540d\u4ec5\u4ec5\u662f\u4e3a\u4e86\u4fbf\u4e8e\u8bc6\u522b\u7684. \u6211\u4eec\u4e60\u60ef\u4e8e\u901a\u5e38\u662f\u52a0txt\u7684\u540e\u7f00. \u53ef\u4ee5\u7528\u7edd\u5bf9\u8def\u5f84, \u82e5\u7528\u76f8\u5bf9\u8def\u5f84\u7684\u8bdd,\u5c31\u5efa\u5728\u5f53\u524d\u4f4d\u7f6e\u5566.. touch file1.txt \u65e0\u5219\u521b\u5efa,\u6709\u5219\u4fee\u6539\u6587\u4ef6\u7684\u65f6\u95f4 \u6279\u91cf\u521b\u5efa\u6587\u4ef6 touch a.txt b.txt c.txt touch {d,e,f}.txt touch {1..6}.txt touch {a..c}.txt touch {1..3}{a..b}.txt \u4f1a\u8fdb\u884c\u6392\u5217\u7ec4\u5408!\u8fd9\u91cc\u5171\u4f1a\u67096\u4e2a\u6587\u4ef6 touch ego{n,N}.txt \u76f8\u5f53\u4e8e touch egon.txt egoN.txt [ root@localhost opt ] # touch a.txt b.txt c.txt [ root@localhost opt ] # ls a.txt b.txt c.txt [ root@localhost opt ] # touch {d,e,f}.txt [ root@localhost opt ] # ls a.txt b.txt c.txt d.txt e.txt f.txt [ root@localhost opt ] # rm -rf # \u6ce8\u610f\u54e6,\u65e0\u6548!\u6ca1\u5565\u6548\u679c.. [ root@localhost opt ] # rm -rf b.txt [ root@localhost opt ] # rm -rf * # \u7b49\u540c\u4e8e touch /opt/{1..6}.txt [ root@localhost opt ] # touch {1..6}.txt [ root@localhost opt ] # ls 1 .txt 2 .txt 3 .txt 4 .txt 5 .txt 6 .txt [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # touch {a..d}.txt [ root@localhost opt ] # ls a.txt b.txt c.txt d.txt [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # touch {1..3}{a..b}.txt [ root@localhost opt ] # ls 1a.txt 1b.txt 2a.txt 2b.txt 3a.txt 3b.txt \"\"\" rm -rf * \u5220\u9664\u5f53\u524dopt\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u5185\u5bb9 r\u9012\u5f52\u5220,\u5220\u6587\u4ef6\u5939\u5fc5\u987b\u52a0; f\u5f3a\u5236\u5220,\u4e0d\u7ba1\u662f\u5220\u6587\u4ef6\u8fd8\u662f\u6587\u4ef6\u5939\u90fd\u4e0d\u4f1a\u8be2\u95ee\u662f\u5426\u5220\u9664,\u4e0d\u4f1a\u63d0\u793a\u5566\uff01 \"\"\" [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 0","title":"touch"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#mkdir","text":"mkdir \u201cmake diretory\u201d \u7528\u4e8e\u521b\u5efa\u6587\u4ef6\u5939/\u76ee\u5f55 \u25cb \u76f8\u5bf9\u8def\u5f84\u4e0e\u7edd\u5bf9\u8def\u5f84\u521b\u5efa\u76ee\u5f55 \u25cb \u7ed3\u5408\u82b1\u62ec\u53f7\u6279\u91cf\u521b\u5efa\u76ee\u5f55 \u25cb -v \u53cd\u9988\u521b\u5efa\u6210\u529f\u7684\u4fe1\u606f \u25cb -p \u6839\u636e\u8def\u5f84 \u9012\u5f52\u7684\u521b\u5efa \u76ee\u5f55 # \u7edd\u5bf9\u8def\u5f84\u521b\u5efa\u76ee\u5f55 [ root@localhost / ] # mkdir /opt/test [ root@localhost / ] # cd /opt/test # \u76f8\u5bf9\u8def\u5f84\u521b\u5efa\u76ee\u5f55 [ root@localhost test ] # mkdir a b [ root@localhost test ] # ls a b # \u7edd\u5bf9\u8def\u5f84\u7ed3\u5408{}\u82b1\u62ec\u53f7 [ root@localhost test ] # mkdir /opt/test/{c,d} [ root@localhost test ] # ls a b c d # -v \u53cd\u9988\u521b\u5efa\u7684\u4fe1\u606f [ root@localhost test ] # mkdir -v {mmm,nnn} mkdir: \u5df2\u521b\u5efa\u76ee\u5f55 \"mmm\" mkdir: \u5df2\u521b\u5efa\u76ee\u5f55 \"nnn\" [ root@localhost test ] # ls a b c d mmm nnn # \u56e0\u4e3aa\u6587\u4ef6\u5939\u4e0b\u6ca1\u6709b\u6587\u4ef6\u5939 \u6240\u4ee5c\u6587\u4ef6\u5939\u521b\u5efa\u5931\u8d25 [ root@localhost test ] # mkdir a/b/c mkdir: \u65e0\u6cd5\u521b\u5efa\u76ee\u5f55 \"a/b/c\" : \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 # -p \u9012\u5f52\u7684\u521b\u5efa\u6587\u4ef6\u5939 [ root@localhost test ] # mkdir -p a/b/c [ root@localhost test ] # mkdir -p /opt/test/x/y/z [ root@localhost test ] # tree . \u251c\u2500\u2500 a \u2502 \u2514\u2500\u2500 b \u2502 \u2514\u2500\u2500 c \u251c\u2500\u2500 b \u251c\u2500\u2500 c \u251c\u2500\u2500 d \u251c\u2500\u2500 mmm \u251c\u2500\u2500 nnn \u2514\u2500\u2500 x \u2514\u2500\u2500 y \u2514\u2500\u2500 z 11 directories, 0 files","title":"mkdir"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_6","text":"","title":"\u590d\u5236"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cp","text":"cp \"copy\" \u7528\u4e8e\u590d\u5236\u6587\u4ef6\u3001\u6587\u4ef6\u5939/\u76ee\u5f55.. \u539f\u7406: \u627e\u5230\u6e90\u6587\u4ef6,\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u6587\u4ef6,\u5c06\u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u51fa\u6765\u5199\u5230\u65b0\u6587\u4ef6\u4e2d. cp \u56db\u5927\u9009\u9879 -r\uff5c-a\uff5c-f \uff5c-i cp \u6587\u4ef6\u6e90\u8def\u5f84 \u6587\u4ef6\u76ee\u6807\u8def\u5f84 cp /etc/passwd . \u628apasswd\u6587\u4ef6\u62f7\u8d1d\u5230\u5f53\u524d\u6587\u4ef6\u5939\u4e0b, \u65b0\u6587\u4ef6\u540d\u4e0d\u53d8 cp /etc/passwd ./h.txt \u628apasswd\u6587\u4ef6\u62f7\u8d1d\u5230/opt\u6587\u4ef6\u5939\u4e0b, \u65b0\u6587\u4ef6\u540d\u547d\u540d\u4e3ah.txt [ root@localhost opt ] # pwd /opt [ root@localhost opt ] # ls [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 0 \"\"\" \u8fd9\u91cc\u7684.\u6307\u4ee3\u5f53\u524d\u6240\u5728\u76ee\u5f55/opt cp /etc/passwd ./h.txt \u7b49\u540c\u4e8e cp /etc/passwd /opt/h.txt \"\"\" [ root@localhost opt ] # cp /etc/passwd . # \u62f7\u8d1d\u8fc7\u6765\u4e0d\u6539\u540d [ root@localhost opt ] # cp /etc/passwd ./h.txt # \u62f7\u8d1d\u8fc7\u6765\u5e76\u6539\u540d h.txt\u6587\u4ef6\u4e0d\u7528\u4e8b\u5148\u5b58\u5728 [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 8 -rw-r--r-- 1 root root 2351 7\u6708 6 17 :07 h.txt -rw-r--r-- 1 root root 2351 7\u6708 6 17 :06 passwd \"\"\" /opt\u4e0b\u6ca1\u6709test\u6587\u4ef6\u5939,\u6240\u4ee5\u5931\u8d25 \"\"\" [ root@localhost opt ] # cp /etc/passwd ./test/h2.txt cp: \u65e0\u6cd5\u521b\u5efa\u666e\u901a\u6587\u4ef6 \"./test/h2.txt\" : \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55","title":"cp"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cp-r","text":"cp -r \u6e90\u6587\u4ef6\u5939 \u76ee\u6807\u6587\u4ef6\u5939 # \u76ee\u6807\u6587\u4ef6\u5939\u4e0b\u6709\u4e2a\u8ddf\u6e90\u6587\u4ef6\u5939\u540c\u540d\u7684\u5b50\u6587\u4ef6\u5939 cp -r \u6e90\u6587\u4ef6\u5939/* \u76ee\u6807\u6587\u4ef6\u5939 # \u628a\u6e90\u6587\u4ef6\u5939\u7684\u5b50\u5b50\u5b59\u5b59\u62f7\u8d1d\u5230\u76ee\u6807\u6587\u4ef6\u5939\u4e0b,\u4e0d\u5305\u62ec\u6e90\u6587\u4ef6\u5939\u8fd9\u4e00\u5c42 \u6572\u9ed1\u677f! \u62f7\u8d1d\u6587\u4ef6\u5939\u5fc5\u987b\u52a0 -r \"\"\" \u6ce8\u610f\u54e6,\u8fd9\u91cc\u662f\u628a\u6839\u76ee\u5f55\u4e0b\u7684boot\u6587\u4ef6\u5939\u62f7\u8d1d\u5230\u4e86opt\u6587\u4ef6\u5939\u4e0b,\u8fd8\u5e26\u7740boot\u8fd9\u4e2a\u6587\u4ef6\u5939 \"\"\" [ root@localhost opt ] # cp -r /boot/ /opt [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 4 dr-xr-xr-x 5 root root 4096 7\u6708 6 17 :31 boot \"\"\" \u6709\u53ef\u80fd,\u6211\u4eec\u7684\u9700\u6c42\u662f\u5c06boot\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u5185\u5bb9(\u5373boot\u7684\u5b50\u5b50\u5b59\u5b59)\u62f7\u8d1d\u5230 opt\u6587\u4ef6\u5939\u91cc,\u4e0d\u9700\u8981boot\u8fd9\u4e00\u5c42\u6587\u4ef6\u5939 \"\"\" [ root@localhost opt ] # rm -rf * [ root@localhost opt ] # ls -l \u603b\u7528\u91cf 0 [ root@localhost opt ] # cp -r /boot/* /opt [ root@localhost opt ] # ls config-3.10.0-1160.66.1.el7.x86_64 config-3.10.0-1160.el7.x86_64 efi grub grub2 initramfs-0-rescue-be87405afe3b480da138503ccab0ebd2.img initramfs-3.10.0-1160.66.1.el7.x86_64.img initramfs-3.10.0-1160.el7.x86_64.img symvers-3.10.0-1160.66.1.el7.x86_64.gz symvers-3.10.0-1160.el7.x86_64.gz System.map-3.10.0-1160.66.1.el7.x86_64 System.map-3.10.0-1160.el7.x86_64 vmlinuz-0-rescue-be87405afe3b480da138503ccab0ebd2 vmlinuz-3.10.0-1160.66.1.el7.x86_64 vmlinuz-3.10.0-1160.el7.x86_64","title":"cp -r"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cp-a","text":"\u62f7\u8d1d\u8fc7\u7a0b\u4e2d\u5c06\u6240\u6709\u7684\u4fe1\u606f\u4e00\u6478\u4e00\u6837\u7684\u7ed9\u65b0\u6587\u4ef6 cp -a /home/dc/a.txt /mnt/b.txt \u25b3 \u666e\u901a\u7528\u6237dc\u5728\u5bb6\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u4ef6a.txt [ dc@localhost ~ ] $ pwd /home/dc [ dc@localhost ~ ] $ ls [ dc@localhost ~ ] $ touch a.txt [ dc@localhost ~ ] $ ll \u603b\u7528\u91cf 0 -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 a.txt \u25b3 root\u7528\u6237\u662f\u7ba1\u7406\u5458,\u662f\u6709\u6743\u9650\u770b\u5230\u666e\u901a\u7528\u6237dc\u5bb6\u76ee\u5f55\u91cc\u7684\u5185\u5bb9\u7684 \"\"\" root\u7528\u6237\u901a\u8fc7\u62f7\u8d1ddc\u5bb6\u76ee\u5f55\u4e0b\u7684a.txt\u6587\u4ef6\u5230/mnt/\u6587\u4ef6\u5939\u4e0b, \u53d1\u73b0\u62f7\u8d1d\u6587\u4ef6\u7684 \u6240\u5c5e\u4eba\u548c\u7528\u6237\u7ec4 \u90fd\u4ecedc\u53d8\u6210\u4e86root \u56e0\u4e3a\u662froot\u6267\u884c\u7684cp\u547d\u4ee4 \"\"\" [ root@localhost ~ ] # pwd /root [ root@localhost ~ ] # ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # ll /home/dc/a.txt -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 /home/dc/a.txt [ root@localhost ~ ] # cp /home/dc/a.txt /mnt/ [ root@localhost ~ ] # ll /mnt/a.txt -rw-r--r-- 1 root root 0 7\u6708 6 21 :37 /mnt/a.txt \"\"\" \u82e5\u60f3\u5728\u62f7\u8d1d\u8fc7\u7a0b\u4e2d\u5c06\u6240\u6709\u7684\u4fe1\u606f\u4e00\u6478\u4e00\u6837\u7684\u7ed9\u65b0\u6587\u4ef6,\u9700\u8981\u52a0 -a \u9009\u9879 \u6ce8\u610f: \u5fc5\u987b\u662froot\u7528\u6237\u64cd\u4f5c\u624d\u6709\u7528,\u666e\u901a\u7528\u6237\u52a0-a\u9009\u9879\u65e0\u6548 \"\"\" [ root@localhost ~ ] # cp -a /home/dc/a.txt /mnt/b.txt [ root@localhost ~ ] # ll /mnt/b.txt -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 /mnt/b.txt","title":"cp -a"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cp-f","text":"-f\u9009\u9879\u4e0e\u6743\u9650\u6253\u4e86\u4e2a\u4ea4\u9053 cp -f /opt/test/a.txt /opt/test1/a.txt \u5f53\u524d\u7528\u6237\u5bf9\u76ee\u6807\u6587\u4ef6\u5939 /test1 \u6709wx\u6743\u9650 ( \u8fd9\u662f\u5927\u524d\u63d0!!! ) \u4f46\u662f\u5f53\u524d\u7528\u6237\u5bf9\u76ee\u6807\u6587\u4ef6 /test1/a.txt \u6ca1\u6709\u5199\u6743\u9650. \u5728\u62f7\u8d1d\u65f6\u5019,cp\u547d\u4ee4\u53ef\u4ee5\u52a0\u4e0a -f \u9009\u9879, -f\u9009\u9879\u4f1a\u5148\u6267\u884c rm -rf /test1/a.txt \u5220\u9664\u76ee\u6807\u6587\u4ef6,\u518d\u6267\u884c cp /opt/test/a.txt /opt/test1 !!! \"\"\" \u25b3 \u767b\u5f55root\u8d26\u6237,\u8fdb\u884c\u4ee5\u4e0b\u7684\u51c6\u5907\u5de5\u4f5c root\u7528\u6237\u5728opt\u7a7a\u6587\u4ef6\u5939\u91cc\u521b\u5efa\u4e86test\u4e0etest1\u6587\u4ef6\u5939,\u5e76\u5728\u4e24\u4e2a\u6587\u4ef6\u5939\u91cc\u90fd\u521b\u5efa\u4e86\u540d\u4e3aa.txt\u7684\u6587\u4ef6 \u5f80test/a.txt\u8f93\u5165\u5185\u5bb9'000';\u5f80test1/a.txt\u8f93\u5165\u5185\u5bb9'111' \"\"\" [ root@localhost opt ] # mkdir test test1 [ root@localhost opt ] # touch test/a.txt [ root@localhost opt ] # touch test1/a.txt [ root@localhost opt ] # echo \"000\" > test/a.txt [ root@localhost opt ] # echo \"111\" > test1/a.txt [ root@localhost opt ] # cat test/a.txt 000 [ root@localhost opt ] # cat test1/a.txt 111 [ root@localhost opt ] # ll -d test1/ drwxr-xr-x 2 root root 19 7\u6708 6 22 :20 test1/ [ root@localhost opt ] # ll test/a.txt -rw-r--r-- 1 root root 4 7\u6708 6 22 :21 test/a.txt [ root@localhost opt ] # ll test1/a.txt -rw-r--r-- 1 root root 4 7\u6708 6 22 :21 test1/a.txt \"\"\" \u6211\u4eec\u77e5\u9053cp\u62f7\u8d1d\u7684\u672c\u8d28\u662f:\u627e\u5230\u6e90\u6587\u4ef6,\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u6587\u4ef6,\u5c06\u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u51fa\u6765\u5199\u5230\u65b0\u6587\u4ef6\u4e2d. \u73b0\u5728\u767b\u5f55\u4e86\u7528\u6237m,\u5bf9\u4e0b\u9762\u8fd9\u4e24\u79cd\u60c5\u51b5\u8fdb\u884c\u5206\u6790 \u2605 \u60c5\u51b51> rm -rf /opt/test1/a.txt # \u6ce8\u610f\u54e6,\u8fd9\u91cc\u5148\u628atest1\u6587\u4ef6\u5939\u4e0b\u7684a.txt\u6587\u4ef6\u5220\u9664\u6389\u5566 [root@localhost opt]# tree . \u251c\u2500\u2500 test \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test1 2 directories, 1 files cp /opt/test/a.txt /opt/test1 \u7528\u6237m\u9700\u8981\u6709\u5bf9/opt/test/a.txt\u6587\u4ef6\u62e5\u6709\u8bfb\u6743\u9650 \u4ee5\u53ca \u5bf9/opt/test1\u6587\u4ef6\u62e5\u6709x\u53ef\u6267\u884c\u6743\u9650(\u5207\u8fdbtest1\u8fd9\u4e2a\u76ee\u5f55)\u548cw\u5199\u6743\u9650(\u5f80test1\u6587\u4ef6\u5939\u91cc\u5199\u5165\u65b0\u6587\u4ef6a.txt) \u53ea\u662fcp\u64cd\u4f5c\u7684\u8bdd,\u7528\u6237m\u5bf9/opt/test1\u7684\u5199\u6743\u9650\u7684\u8bdd\u6ca1\u5fc5\u8981\u6709 \u4f46\u901a\u8fc7\u89c2\u5bdf /opt/test1\u7684\u6743\u9650\u4e3a drwxr-xr-x \u53d1\u73b0\u73b0\u5728\u9664\u4e86root\u7528\u6237\u7684\u5176\u4ed6\u7528\u6237\u5bf9test1\u6587\u4ef6\u5939\u90fd\u6ca1\u5199\u6743\u9650 \u6240\u4ee5\u7528\u6237m\u662f\u666e\u901a\u7528\u6237dc\u65f6.\u6267\u884c\u8fd9\u6761\u547d\u4ee4\u4f1a\u53cd\u9988\u6743\u9650\u4e0d\u591f. [dc@localhost ~] $ cp /opt/test/a.txt /opt/test1 cp: \u65e0\u6cd5\u521b\u5efa\u666e\u901a\u6587\u4ef6\" /opt/test1/a.txt \": \u6743\u9650\u4e0d\u591f [\u89e3\u51b3\u65b9\u6848]:\u7528root\u8d26\u6237\u66f4\u6539\u5176\u5b83\u7528\u6237(\u7528\u6237dc)\u5bf9test1\u6587\u4ef6\u5939\u7684\u6743\u9650,\u8ba9\u5176\u81f3\u5c11\u62e5\u6709\u5199\u6743\u9650\u548c\u6267\u884c\u6743\u9650 -wx # \u8fd9\u91cc\u8ba9\u5176\u4ed6\u7528\u6237\u62e5\u6709r\u6743\u9650,\u662f\u65b9\u4fbf\u666e\u901a\u7528\u6237dc\u4f7f\u7528tree\u4ee5\u53cals\u547d\u4ee4\u67e5\u770btest1\u6587\u4ef6\u5939 [root@localhost opt]# chmod o=rwx test1/ [root@localhost opt]# ll -d test1/ drwxr-xrwx 2 root root 19 7\u6708 6 22:58 test1/ \u767b\u5f55\u666e\u901a\u7528\u6237dc,\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4.. [dc@localhost ~] $ cp /opt/test/a.txt /opt/test1/ [dc@localhost ~] $ tree /opt /opt \u251c\u2500\u2500 test \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test1 \u2514\u2500\u2500 a.txt 2 directories, 2 files # \u8fd9\u662fdc\u7528\u6237\u6267\u884c\u62f7\u8d1d\u547d\u4ee4\u521b\u5efa\u7684\u6587\u4ef6a.txt \u6240\u4ee5\u5176\u7528\u6237\u548c\u7528\u6237\u7ec4\u90fd\u662fdc [dc@localhost ~] $ ll /opt/test1/a.txt -rw-r--r-- 1 dc dc 4 7\u6708 6 22:58 /opt/test1/a.txt [dc@localhost ~] $ cat /opt/test1/a.txt 000 \u2605 \u60c5\u51b52> [root@localhost opt]# tree . \u251c\u2500\u2500 test \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test1 \u2514\u2500\u2500 a.txt 2 directories, 2 files [root@localhost opt]# ll -d /opt/test1 drwxr-xr-x 2 root root 19 7\u6708 6 23:35 /opt/test1 [root@localhost opt]# ll /opt/test1/a.txt -rw-r--r-- 1 root root 4 7\u6708 6 23:35 /opt/test1/a.txt cp /opt/test/a.txt /opt/test1/a.txt \u7528\u6237m\u9700\u8981\u6709\u5bf9/opt/test/a.txt\u6587\u4ef6\u62e5\u6709\u8bfb\u6743\u9650,\u4ee5\u53ca\u5bf9/opt/test1/a.txt\u62e5\u6709\u5199\u6743\u9650 \u4f46\u901a\u8fc7\u89c2\u5bdf/opt/test1/a.txt\u7684\u6743\u9650\u4e3a-rw-r--r--,\u53d1\u73b0\u5176\u4ed6\u7528\u6237\u5bf9\u6b64\u6587\u4ef6\u53ea\u6709\u8bfb\u6743\u9650.. \u82e5\u7528\u6237m\u662f\u666e\u901a\u7528\u6237dc,\u6267\u884c cp /opt/test/a.txt /opt/test1/a.txt \u7406\u60f3\u60c5\u51b5\u4e0b,linux\u5e95\u5c42\u4f1a\u5c06\u6e90\u6587\u4ef6\u8bfb\u51fa\u6765\u5f80\u65b0\u6587\u4ef6\u91cc\u9762\u5199,\u65b0\u6587\u4ef6\u82e5\u5df2\u7ecf\u5b58\u5728,\u5c31\u4e0d\u4f1a\u65b0\u521b\u5efa\u5566,\u4f1a\u8986\u76d6\u6389.. \u4f46\u6743\u9650\u4e0d\u591f\u554a\uff01\uff01\uff01 # \u6700\u76f4\u767d\u7684\u539f\u56e0,a.txt\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\u4e86,dc\u7528\u6237\u6ca1\u6709\u5f80\u91cc\u9762\u5199\u7684\u6743\u9650 [dc@localhost ~] $ cp /opt/test/a.txt /opt/test1/a.txt cp: \u65e0\u6cd5\u521b\u5efa\u666e\u901a\u6587\u4ef6\" /opt/test1/a.txt \": \u6743\u9650\u4e0d\u591f [\u89e3\u51b3\u65b9\u6848] cp\u4f7f\u7528\u9009\u9879 -f \u5982\u679c\u6709\u9700\u8981,\u5220\u9664\u5df2\u5b58\u5728\u7684\u76ee\u7684\u6587\u4ef6.. \u76f8\u5f53\u4e8e\u53d8\u6210\u60c5\u51b5\u4e00\u7684\u6837\u5b50!! # \u4f46\u4f9d\u7136\u63d0\u793a\u6743\u9650\u4e0d\u591f,\u90a3\u662f\u56e0\u4e3a\u5176\u4ed6\u7528\u6237\u5bf9/opt/test1\u6ca1\u6709\u5199\u6743\u9650\u5bfc\u81f4\u7684 [dc@localhost ~] $ cp -f /opt/test/a.txt /opt/test1/a.txt cp: \u65e0\u6cd5\u5220\u9664\" /opt/test1/a.txt \": \u6743\u9650\u4e0d\u591f # \u6dfb\u52a0\u5176\u4ed6\u7528\u6237\u5bf9/opt/test1\u7684\u5199\u6743\u9650 [root@localhost opt]# chmod o=rwx test1/ [root@localhost opt]# ll -d test1/ drwxr-xrwx 2 root root 19 7\u6708 6 23:35 test1/ # \u518d\u6267\u884c\u547d\u4ee4 [dc@localhost ~] $ cp -f /opt/test/a.txt /opt/test1/a.txt [dc@localhost ~] $ cat /opt/test1/a.txt 000 \"\"\"","title":"cp -f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cp-i","text":"-i \u9009\u9879\u4e0e\u4ea4\u4e92\u6709\u5173,\u7ed9\u63d0\u793a \u6709\u7684\u7cfb\u7edf\u5728\u5b89\u88c5\u7684\u65f6\u5019, cp - i \u7684 alias\u522b\u540d\u5c31\u662fcp, \u4e5f\u5c31\u662f\u8bf4\u5728\u6267\u884c cp \u7684\u65f6\u5019, \u5176\u5b9e\u662f\u6267\u884c\u7684 cp -i # \u5904\u4e8e\u5b89\u5168\u8003\u8651,root\u7528\u6237\u4e0b\u5bf9cp\u547d\u4ee4\u6709\u6539\u9020,\u4f46\u666e\u901a\u7528\u6237\u4e0b\u6ca1\u6709\u5bf9cp\u547d\u4ee4\u7684\u6539\u9020!! [ root@localhost mnt ] # alias alias cp = 'cp -i' alias mv = 'mv -i' alias rm = 'rm -i' ... ... ... [ root@localhost mnt ] # mkdir a b [ root@localhost mnt ] # touch a/m.txt [ root@localhost mnt ] # touch b/m.txt [ root@localhost mnt ] # echo \"111\" > a/m.txt [ root@localhost mnt ] # echo \"222\" > b/m.txt [ root@localhost mnt ] # cat a/m.txt 111 [ root@localhost mnt ] # cat b/m.txt 222 [ root@localhost mnt ] # cp a/m.txt b/m.txt cp\uff1a\u662f\u5426\u8986\u76d6 \"b/m.txt\" \uff1f n \u4e0d\u60f3\u8981\u63d0\u793a\u7684\u89e3\u51b3\u65b9\u6848: 1 > unalias cp 2 > /usr/bin/cp 3 > \\c p a/m.txt b/m.txt","title":"cp -i"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_7","text":"","title":"\u79fb\u52a8\u4e0e\u5220\u9664"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#mv","text":"\u7c7b\u4f3c\u4e8ewindow\u91cc\u7684\u526a\u5207.. \u25a0 \u79fb\u52a8\u6587\u4ef6 [ root@localhost mnt ] # mkdir test1 test2 [ root@localhost mnt ] # touch test1/a.txt [ root@localhost mnt ] # touch test1/b.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u251c\u2500\u2500 a.txt \u2502 \u2514\u2500\u2500 b.txt \u2514\u2500\u2500 test2 2 directories, 2 files [ root@localhost mnt ] # mv test1/a.txt test2/ [ root@localhost mnt ] # mv test1/b.txt test2/bbb.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2514\u2500\u2500 test2 \u251c\u2500\u2500 a.txt \u2514\u2500\u2500 bbb.txt 2 directories, 2 files # \u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u7ed9\u6587\u4ef6\u6539\u540d\u7684\u64cd\u4f5c [ root@localhost mnt ] # mv test1/a.txt test1/b.txt \u25a0 \u79fb\u52a8\u6587\u4ef6\u5939 [ root@localhost mnt ] # mkdir -p test1/a/b/c [ root@localhost mnt ] # mkdir test2 [ root@localhost mnt ] # touch test1/a/b/c/a.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 a \u2502 \u2514\u2500\u2500 b \u2502 \u2514\u2500\u2500 c \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test2 5 directories, 1 file [ root@localhost mnt ] # mv test1/a/ test2/ [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2514\u2500\u2500 test2 \u2514\u2500\u2500 a \u2514\u2500\u2500 b \u2514\u2500\u2500 c \u2514\u2500\u2500 a.txt 5 directories, 1 file # \u4e3a\u79fb\u52a8\u7684\u6587\u4ef6\u5939\u91cd\u65b0\u547d\u4e86\u540d.. [ root@localhost mnt ] # mv test2/a/ test1/xxx [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 xxx \u2502 \u2514\u2500\u2500 b \u2502 \u2514\u2500\u2500 c \u2502 \u2514\u2500\u2500 a.txt \u2514\u2500\u2500 test2 5 directories, 1 file \u25a0 \u79fb\u52a8\u6587\u4ef6\u5939\u5185\u5bb9(\u5b50\u5b50\u5b59\u5b59),\u4e0d\u5305\u62ec\u6587\u4ef6\u5939\u8fd9\u4e00\u5c42 [ root@localhost mnt ] # mkdir -p test1/mmm [ root@localhost mnt ] # mkdir test2/ [ root@localhost mnt ] # touch test1/mmm/{1..3}.txt [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 mmm \u2502 \u251c\u2500\u2500 1 .txt \u2502 \u251c\u2500\u2500 2 .txt \u2502 \u2514\u2500\u2500 3 .txt \u2514\u2500\u2500 test2 3 directories, 3 files # mmm\u6587\u4ef6\u5939\u8fd8\u5728,mmm\u6587\u4ef6\u5939\u7684\u5b50\u5b50\u5b59\u5b59\u88ab\u79fb\u52a8\u8d70\u4e86 [ root@localhost mnt ] # mv test1/mmm/* test2/ [ root@localhost mnt ] # tree . \u251c\u2500\u2500 test1 \u2502 \u2514\u2500\u2500 mmm \u2514\u2500\u2500 test2 \u251c\u2500\u2500 1 .txt \u251c\u2500\u2500 2 .txt \u2514\u2500\u2500 3 .txt 3 directories, 3 files","title":"mv"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#rm","text":"\u6ce8\u610f! rm \u7684 -f\u9009\u9879 \u4e0e cp\u7684 -f\u9009\u9879\u662f\u4e0d\u4e00\u6837\u7684!!! rm -rf -r \u9012\u5f52 -f force\u5f3a\u5236 \u8fd9\u4f1a\u4f7f-i\u4e0d\u751f\u6548\u5566! -v \u8be6\u7ec6\u8fc7\u7a0b,\u4f1a\u544a\u8bc9\u4f60\u5220\u9664\u4e86\u54ea\u4e9b\u5185\u5bb9.","title":"rm"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_8","text":"\u25b3 \u6570\u636e\u51c6\u5907 [ root@localhost mnt ] # mkdir test [ root@localhost mnt ] # touch test/a.txt [ root@localhost mnt ] # vim test/a.txt \"\"\" 111 222 333 444 555 666 aaa bbb \"\"\"","title":"\u67e5\u770b\u6587\u4ef6\u5185\u5bb9"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#cat","text":"-n \u663e\u793a\u884c\u53f7 -A \u5305\u62ec\u63a7\u5236\u5b57\u7b26(\u6362\u884c\u7b26 /n \u4ee3\u8868\u6362\u884c) Ps: linux\u4e0bcat\u67e5\u770b\u663e\u793a\u4e3a $ ; Window\u4e0b\u4e3a ^M$ [ root@localhost mnt ] # cat -An test/a.txt 1 111 $ 2 222 $ 3 333 $ 4 444 $ 5 555 $ 6 666 $ 7 aaa$ 8 bbb$","title":"cat"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#head","text":"\u53ea\u67e5\u770b\u6587\u4ef6\u7684\u5934\u51e0\u884c,\u9ed8\u8ba4\u662f\u593410\u884c. # \u5199\u6210 head -3 /etc/passwd \u6548\u679c\u662f\u4e00\u6837\u7684 [ root@localhost mnt ] # head -n 3 test/a.txt 111 222 333","title":"head"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#tail","text":"\u53ea\u67e5\u770b\u6587\u4ef6\u7684\u672b\u5c3e\u51e0\u884c,\u9ed8\u8ba4\u662f\u540e10\u884c. tail -f /mnt/test/a.txt \u52a8\u6001\u76d1\u6d4b\u67d0\u4e2a\u6587\u4ef6\u7684\u53d8\u5316! \u53ea\u8981\u5f80\u6587\u4ef6\u91cc \u65b0\u589e \u5185\u5bb9,\u5b83\u5c31\u4f1a\u53d8\u5316! \u6ce8\u610f\uff01\uff01\uff01 vim\u7684\u539f\u7406\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4e00\u4e0b\u5b50\u4ece\u786c\u76d8\u5168\u90e8\u8bfb\u5230\u5185\u5b58\u4e2d,\u5728\u5185\u5b58\u4e2d\u6539\u5b8c\u540e,\u518d\u4e00\u6b21\u6027\u5168\u90e8\u8986\u76d6\u786c\u76d8\u7684\u539f\u6587\u4ef6.. So, vim\u7f16\u8f91\u4e0d\u662f\u5728\u539f\u6709\u7684\u57fa\u7840\u4e0a\u65b0\u589e!!\u7c7b\u4f3c\u7684\u6709 pycharm\u3001word\u7b49\u539f\u7406\u4e00\u81f4.. \u6240\u4ee5\u5207\u8bb0\u5728\u7ebf\u4e0a\u73af\u5883\u522b\u7528vim\u6253\u5f00\u4e00\u4e2a\u5927\u6587\u4ef6!\u5185\u5b58\u88ab\u6324\u7206,\u76f4\u63a5\u5361\u6b7b... \u90a3\u5982\u4f55\u65b0\u589e\uff1f\u7528 echo \u547d\u4ee4.. \u4e00\u4e2a > \u7684\u8bdd\u662f\u8986\u76d6; \u4e24\u4e2a > \u662f\u5f80\u6587\u4ef6\u5185\u5bb9\u672b\u5c3e\u8ffd\u52a0\u5185\u5bb9! [ root@localhost mnt ] # tail -n 4 test/a.txt 555 666 aaa bbb [ root@localhost mnt ] # tail -n 4 test/a.txt | head -2 555 666","title":"tail"},{"location":"1_linux%E5%9F%BA%E7%A1%80/2_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/#_9","text":"less \u53ef\u4ee5\u4e0a\u4e0b\u952e\u6765\u56de\u7ffb\u9875\u67e5\u770b more \u6309\u7a7a\u683c\u952e\u4e00\u9875\u9875\u7ffb, \u6709\u767e\u5206\u6bd4\u663e\u793a..","title":"\u5176\u4ed6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/","text":"\u672c\u5c0f\u8282\u4e3b\u8981\u9610\u8ff0vim\u56db\u5927\u6a21\u5f0f\u5bf9\u6587\u4ef6\u7684\u4e00\u7cfb\u5217\u64cd\u4f5c \u901a\u5e38\u4f7f\u7528vim\u6587\u672c\u7f16\u8f91\u5668\u4fee\u6539\u914d\u7f6e\u3001\u5199\u811a\u672c\u6587\u4ef6.. vi\u662f\u9ed8\u8ba4\u5b89\u88c5\u7684,\u5efa\u8bae\u4f7f\u7528vim, yum install vim -y \u547d\u4ee4\u884c\u6a21\u5f0f \u00b6 \u6253\u5f00\u6587\u4ef6\u5c31\u8fdb\u5165\u4e86\u6b64\u6a21\u5f0f. \u5feb\u6377\u952e \u6548\u679c $ (\u6309shift + 4) \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u7684\u672b\u5c3e \u6309\u6570\u5b570 \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u7684\u5f00\u5934 dd (\u6309\u4e24\u4e0b\u5b57\u6bcdd) \u5220\u9664\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c ndd (n\u4e3a\u6570\u5b57) eg: \u6309\u4e0b\u6570\u5b573,\u7136\u540e\u6309\u4e24\u4e0bd. \u90a3\u4e48\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c\u8fde\u540c\u4e0b\u65b9\u7684\u4e24\u884c\u4f1a\u4e00\u540c\u88ab\u5220\u9664\u6389\uff01 \u7f16\u8f91\u5668\u5de6\u4e0b\u89d2\u4f1a\u63d0\u793a \u5c11\u4e863\u884c u (\u6309\u4e0b\u5b57\u6bcd\u5c0fu) \u540e\u9000 (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+z\u7684\u56de\u9000\u64cd\u4f5c) ctrl + r \u524d\u8fdb (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+y\u7684\u524d\u8fdb\u64cd\u4f5c) \u6ce8\u610f: mac\u4e0b\u662fcontrol + r yy (\u6309\u4e24\u4e0b\u5b57\u6bcdy) \u590d\u5236\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+c) nyy (n\u4e3a\u6570\u5b57) eg: \u6309\u4e0b\u6570\u5b573,\u7136\u540e\u6309\u4e24\u4e0bd. \u90a3\u4e48\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c\u8fde\u540c\u4e0b\u65b9\u7684\u4e24\u884c\u4f1a\u4e00\u540c\u88ab\u590d\u5236\uff01 \u7f16\u8f91\u5668\u5de6\u4e0b\u89d2\u4f1a\u63d0\u793a \u590d\u5236\u4e863\u884c p (\u6309\u4e0b\u5b57\u6bcd\u5c0fp) \u5c06\u5df2\u7ecf\u590d\u5236\u7684\u6570\u636e\u7c98\u8d34\u5728\u5149\u6807\u6240\u5728\u884c\u7684\u4e0b\u4e00\u884c (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+v \u53ef\u4ee5\u591a\u6b21\u7c98\u8d34) \u82e5\u662f\u591a\u884c\u7684\u8bdd \u7f16\u8f91\u5668\u5de6\u4e0b\u89d2\u4f1a\u63d0\u793a \u591a\u4e86n\u884c P (\u6309shift + p) \u5c06\u5df2\u7ecf\u590d\u5236\u7684\u6570\u636e\u7c98\u8d34\u5728\u5149\u6807\u6240\u5728\u884c\u7684\u4e0a\u4e00\u884c Ps: \u5947\u6deb\u6280\u5de7 -- 100000000yy\u590d\u5236\u6574\u4e2a\u6587\u4ef6\u5185\u5bb9; (n)yy + (n)p \u5feb\u901f\u589e\u5927\u6587\u4ef6. \u5149\u6807\u5b9a\u4f4d \u00b6 0 \u884c\u5934 $ \u884c\u5c3e gg \u6587\u4ef6\u7b2c\u4e00\u884c\u884c\u5934 G \u6587\u4ef6\u6700\u540e\u4e00\u884c\u884c\u5934 (n)G \u6587\u4ef6\u7684\u7b2cn\u884c\u884c\u5934 Ps: \u6269\u5c55\u6a21\u5f0f\u4e0b :n \u4e00\u6837\u7684\u5b9a\u4f4d\u5230\u6587\u4ef6\u7684\u7b2cn\u884c H \u6b64\u5c4f\u5185\u5bb9\u7b2c\u4e00\u884c\u884c\u5934 M \u6b64\u5c4f\u5185\u5bb9\u4e2d\u592e\u884c\u884c\u5934 L \u6b64\u5c4f\u5185\u5bb9\u6700\u540e\u4e00\u884c\u884c\u5934 \u6587\u672c\u7f16\u8f91 \u00b6 (n)dd + p \u526a\u5207 (n)yy + p \u590d\u5236\u7c98\u8d34 u \u56de\u9000 ctrl + r / control + r \u5feb\u8fdb \u5173\u952e\u5b57\u67e5\u627e \u00b6 /string \u5feb\u901f\u67e5\u627e\u6587\u4ef6\u4e2d\u6240\u6709\u7684string\u5355\u8bcd(\u4f1a\u9ad8\u4eae\u663e\u793a \u6309n\u4e0b\u4e00\u4e2a \u6309N\u4e0a\u4e00\u4e2a) Ps: \u8bbe\u7f6e\u73af\u5883 :set ic \u540e, \u5173\u952e\u5b57\u7684\u67e5\u627e \u4f1a\u5ffd\u7565\u5927\u5c0f\u5199! \u7f16\u8f91/\u63d2\u5165\u6a21\u5f0f \u00b6 \u8f93\u5165a\u3001i\u3001o\u4e4b\u4e00\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f a \u5728<\u5149\u6807\u4e4b \u540e >\u8fdb\u884c\u6dfb\u52a0 i \u5728<\u5149\u6807\u4e4b \u524d >\u8fdb\u884c\u63d2\u5165 o \u5728<\u5f53\u524d\u5149\u6807\u6240\u5728\u884c\u4e4b\u4e0b>\u5f00\u542f\u65b0\u7684\u4e00\u884c \u5728\u7f16\u8f91\u6a21\u5f0f\u4e0b, ctrl/control + w \u662f\u8fd4\u56de\u529f\u80fd\uff01 Ps: \u4f7f\u7528 ESC\u952e \u8fd4\u56de\u547d\u4ee4\u884c\u6a21\u5f0f \u53ef\u89c6\u5757\u6a21\u5f0f \u00b6 \u4e25\u683c\u6765\u8bf4\u8fd8\u6709\u4e00\u4e2a \u53ef\u89c6\u5757\u6a21\u5f0f , \u4e3b\u8981\u7528\u4e8e\u6279\u91cf\u52a0\u51cf\u6ce8\u91ca\u7684 \u524d\u63d0: \u6ce8\u91ca\u7684\u884c\u9700\u8981\u6574\u9f50\u6392\u5217 \u5728\u547d\u4ee4\u6a21\u5f0f\u4e0b,\u6309 ctrl + v / control +v \u8fdb\u5165\u53ef\u89c6\u5757\u6a21\u5f0f \u6279\u91cf\u5220\u9664\u6ce8\u91ca \u00b6 1> \u4e0a\u4e0b\u952e\u9009\u4e2d#\u53f7 2> \u6309\u4e0bd\u952e \u6279\u91cf\u6dfb\u52a0\u6ce8\u91ca \u00b6 \u5148\u5c06\u5149\u6807\u79fb\u52a8\u5230\u9700\u8981\u52a0\u6ce8\u91ca\u7684\u7b2c\u4e00\u884c\u5f00\u5934\u7684\u4f4d\u7f6e 1> \u4e0a\u4e0b\u952e\u9009\u4e2d\u7b2c\u4e00\u5217 2> shift + i ,\u7136\u540e\u8f93\u5165#\u53f7 3> \u8fde\u7eed\u6309\u4e24\u4e0bESC Ps: shell\u811a\u672c\u7684\u7f29\u8fdb control +v \u4e0a\u4e0b\u9009\u62e9\u7f29\u8fdb\u884c shift+i \u56db\u4e2a\u7a7a\u683c\u5148\u7f29\u8fdb\u7b2c\u4e00\u884c \u4e24\u4e0besc \u9009\u62e9\u7684\u884c\u5168\u90e8\u7f29\u8fdb.. \u6269\u5c55/\u672b\u884c\u6a21\u5f0f \u00b6 \u5728\u547d\u4ee4\u884c\u6a21\u5f0f\u4e0b\u8f93\u5165\u5192\u53f7\u8fdb\u5165\u672b\u884c\u6a21\u5f0f \u4fdd\u5b58\u9000\u51fa \u00b6 :wq \u4fdd\u5b58\u5e76\u9000\u51fa :w \u4fdd\u5b58\u540e\u7ee7\u7eed\u4fee\u6539 :q! \u4fee\u6539\u7684\u5185\u5bb9\u4e0d\u60f3\u8981\u4e86,\u6587\u4ef6\u6062\u590d\u4e0a\u4e00\u6b21\u4fdd\u5b58\u65f6\u7684\u6837\u5b50.\u9000\u51fa. :wq! \u4e0e\u6587\u4ef6\u6743\u9650\u6709\u5173 \u5206root\u7ba1\u7406\u5458\u548c\u666e\u901a\u7528\u6237dc\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba.. Ps: wq \u53ef\u4ee5\u7528 x \u6765\u4ee3\u66ff\uff01\uff01 \u25b2 \u51c6\u5907\u6570\u636e: root\u7528\u6237\u521b\u5efa\u4e86\u4e00\u4e2aa.txt\u6587\u4ef6,\u6dfb\u52a0\u6587\u672c111,\u5e76\u4fee\u6539\u5176\u6743\u9650\u4e3a ---------- \u6ca1\u6709\u4eba\u5bf9\u5176\u6709\u4efb\u4f55\u6743\u9650. \u4f46\u8981\u6ce8\u610f,root\u7528\u6237\u53ef\u4ee5\u4e3a\u6240\u6b32\u4e3a,\u53ef\u4e0d\u7528\u7ba1\u6587\u4ef6\u6743\u9650\u662f\u548b\u6837\u7684.. \u6240\u4ee5,\u53ef\u4ee5\u53d1\u73b0root\u7528\u6237\u5bf9a.txt\u6587\u4ef6\u4f7f\u7528\u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u7684\u547d\u4ee4\u4e0d\u4f1a\u6709\u6743\u9650\u95ee\u9898. \u800c\u666e\u901a\u7528\u6237dc\u4f7f\u7528\u5c31\u4f1a\u8bf4\u6743\u9650\u4e0d\u591f. \u56e0\u4e3adc\u5bf9\u6587\u4ef6a.txt\u6ca1\u6709\u4efb\u4f55\u6743\u9650! \u4f46\u4e0d\u7ba1\u662froot\u8fd8\u662fdc\u90fd\u53ef\u4ee5\u901a\u8fc7vim\u547d\u4ee4\u8fdb\u5165\u6b64\u6587\u4ef6.. \u4f46\u662f\u666e\u901a\u7528\u6237dc\u8fdb\u5165\u540e\u663e\u793a\u7684\u662f\u7a7a\u767d,\u4e0d\u4f1a\u6709\u4efb\u4f55\u5185\u5bb9\uff01\uff01 [ root@localhost mnt ] # touch a.txt [ root@localhost mnt ] # echo 111 > a.txt [ root@localhost mnt ] # ll \u603b\u7528\u91cf 4 -rw-r--r-- 1 root root 4 7\u6708 7 18 :15 a.txt [ root@localhost mnt ] # chmod 000 a.txt [ root@localhost mnt ] # ll \u603b\u7528\u91cf 4 ---------- 1 root root 4 7\u6708 7 18 :15 a.txt \u25b2 \u666e\u901a\u7528\u6237dc # \u53ef\u4ee5\u53d1\u73b0a.txt\u6587\u4ef6\u662f\u6709\u5185\u5bb9\u7684 [ dc@localhost mnt ] $ ll \u603b\u7528\u91cf 4 ---------- 1 root root 4 7\u6708 7 18 :15 a.txt [ dc@localhost mnt ] $ cat a.txt cat: a.txt: \u6743\u9650\u4e0d\u591f [ dc@localhost mnt ] $ tail a.txt tail: \u65e0\u6cd5\u6253\u5f00 \"a.txt\" \u8bfb\u53d6\u6570\u636e: \u6743\u9650\u4e0d\u591f # \u4f46\u901a\u8fc7vim\u6253\u5f00\u5565\u4e5f\u6ca1\u6709 # Ps: \u82e5root\u7528\u6237\u4fee\u6539a.txt\u6587\u4ef6\u6743\u9650\u4e3achmod o=r a.txt; # dc\u7528\u6237\u662f\u53ef\u4ee5\u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u7684,vim\u8fdb\u5165\u540e\u4f1a\u663e\u793a\u6587\u4ef6\u5168\u90e8\u5185\u5bb9,\u4f46\u4fee\u6539\u5565\u7684\u4e0d\u4f1a\u6210\u529f.\u6743\u9650\u4e0d\u591f. [ dc@localhost mnt ] $ vim a.txt \u8bd5\u56fe\u63d2\u5165\u5185\u5bb9\u540e,\u53d1\u73b0\u53ea\u80fd :q! \u5176\u4f59\u7684\u90fd\u65e0\u6548.. \u8868\u660e\u666e\u901a\u7528\u6237dc\u538b\u6839\u5c31\u5bf9\u6b64\u6587\u4ef6\u4e0d\u80fd\u9020\u6210\u4efb\u4f55\u5f71\u54cd. \u25b2 root\u7528\u6237 [ root@localhost mnt ] # cat a.txt 111 [ root@localhost mnt ] # vim a.txt \u63d2\u5165\u5185\u5bb9222\u540e,\u4f7f\u7528 :wq! \u5f3a\u5236\u4fdd\u5b58\u9000\u51fa. [ root@localhost mnt ] # cat a.txt 111 222 [ root@localhost mnt ] # ll \u603b\u7528\u91cf 4 ---------- 1 root root 8 7\u6708 7 18 :21 a.txt \u66ff\u6362\u5355\u8bcd \u00b6 % 1,3 ,3 1,$ s/\u88ab\u66ff\u6362/\u66ff\u6362\u6210/gi 111111egon1111 egon222222 EGON 22eGoN 33333 egon33333 egon333 444xxx444xxxxx 55555xxx 6666egon666 #77777777 #88888888 \u6572\u9ed1\u677f !! \u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53bb\u5168\u6587\u5339\u914d\u6211\u4eec\u8981\u66ff\u6362\u7684\u6587\u672c\uff01\uff01 (egon ^egon egon$) \u25bc \u5c06\u6587\u4ef6\u4e2d\u7684\u5355\u8bcdegon(\u5ffd\u7565\u5927\u5c0f\u5199,\u9ed8\u8ba4\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684)\u5168\u90e8\u66ff\u6362\u6210yyds egon222222 EGON 22eGoN ------> yyds222222 yyds 22yyds :% s/egon/yyds/gi \u89e3\u6790: % \u4ee3\u8868\u6240\u6709\u884c; s\u66ff\u6362; /\u5206\u9694\u7b26(\u7528#\u3001@\u90fd\u53ef\u4ee5); \u82e5\u4e0d\u52a0g,\u5219\u53ea\u4f1a\u66ff\u6362\u6bcf\u4e00\u884c\u7b2c\u4e00\u4e2a\u5339\u914d\u5230\u7684egon.. \u82e5\u52a0g\u4ee3\u8868\u6bcf\u4e00\u884c\u4e2d\u6240\u6709\u7684egon\u90fd\u8981\u66ff\u6362\u6389. \u6709\u70b9\u6b63\u5219\u91cc\u8d2a\u5a6a\u6a21\u5f0f\u90a3\u5473\uff01 \u52a0i\u4ee3\u8868\u5ffd\u7565\u5927\u5c0f\u5199\uff01 Ps: \u4e5f\u53ef\u4ee5\u901a\u8fc7 :set ic ; :% s/egon/yyds/g \u8fd9\u4e24\u6761\u547d\u4ee4\u8fbe\u5230\u540c\u6837\u7684\u6548\u679c\uff01\uff01 \u25bc \u5c06\u6587\u4ef6\u5355\u72ec\u67d0\u4e00\u884c(eg \u7b2c\u4e09\u884c)\u91cc\u7684egon\u5168\u90e8\u66ff\u6362\u6210EGON :3 s/egon/EGON/g \u25bc \u5c06\u6587\u4ef6\u8fde\u7eed\u51e0\u884c(eg \u7b2c\u4e00\u884c\u5230\u7b2c\u56db\u884c; \u7b2c\u4e09\u884c\u5230\u6700\u540e\u4e00\u884c)\u91cc\u7684egon\u5168\u90e8\u66ff\u6362\u6210EGON :1,4 s/egon/EGON/g ; :,4 s/egon/EGON/g \u4e0d\u6307\u5b9a\u5f00\u5934,\u9ed8\u8ba4\u5f00\u5934\u5c31\u662f1 :3,$ s/egon/EGON/g \u25bc \u5c06\u5168\u6587\u4e2d\u5904\u4e8e\u6bcf\u884c\u5f00\u5934\u7684egon\u66ff\u6362\u6210EGON egon222222 egon -----> EGON222222 egon :% s/^egon/EGON/g \u5176\u5b9e\u8fd9\u79cd\u9700\u6c42\u4e0b,\u52a0\u4e0d\u52a0g\u6548\u679c\u90fd\u4e00\u6837.. \u25bc \u5c06\u5168\u6587\u4e2d\u5904\u4e8e\u6bcf\u884c\u7ed3\u5c3e\u7684egon\u66ff\u6362\u6210EGON egon222222 egon -----> egon222222 EGON :% s/egon$/EGON/ \u25bc \u53ef\u4ee5\u8fbe\u5230\u6279\u91cf\u5220\u9664\u6ce8\u91ca\u7684\u76ee\u7684 :4,8 s/^#// \u5c064-8\u884c\u7684\u4ee5\uff03\u5f00\u5934\u7684\u66ff\u6362\u4e3a\u7a7a Ps: \u6587\u4ef6\u4e2d\u51718\u884c,\u82e5\u5199\u7684\u662f 4,9 \u4f1a\u62a5\u9519 E16:\u65e0\u6548\u7684\u8303\u56f4 \u8bfb\u5165\u6587\u4ef6/\u5199\u6587\u4ef6 \u00b6 \u25bc \u5c06\u6587\u4ef63\u52305\u884c\u7684\u5185\u5bb9\u62f7\u8d1d\u4e00\u4efd\u53e6\u5b58\u4e3aa.txt \u82e5a.txt\u5df2\u7ecf\u4e8b\u5148\u5b58\u5728,\u5219\u9700\u8981 w! \u5f3a\u5236\u53e6\u5b58\u4e3a.. \u662f\u8986\u76d6\u7684\u6548\u679c! :3,5 w /mnt/a.txt :3,5 w! /mnt/a.txt \u25bc \u5c06\u5176\u4ed6\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u5230\u5f53\u524d\u6587\u4ef6\u5149\u6807\u6240\u5728\u884c\u7684\u4e0b\u4e00\u884c.. :r /mnt/a.txt \u8bbe\u7f6e\u73af\u5883 \u00b6 :set nu \u8bbe\u7f6e\u884c\u53f7 :set nonu \u53d6\u6d88\u8bbe\u7f6e\u884c\u53f7 :set ic \u5ffd\u7565\u5927\u5c0f\u5199 :set noic \u53d6\u6d88\u5ffd\u7565\u5927\u5c0f\u5199 :set ai \u81ea\u52a8\u7f29\u8fdb (\u56de\u8f66\u540e\u7684\u6362\u884c\u4fdd\u6301\u8ddf\u4e0a\u4e00\u884c\u76f8\u540c\u7684\u7f29\u8fdb) :set noai \u53d6\u6d88\u81ea\u52a8\u7f29\u8fdb \u4e0a\u8ff0\u7684\u4fee\u6539\u90fd\u662f\u4e34\u65f6\u4fee\u6539,\u60f3\u8981\u6c38\u4e45\u4fee\u6539,\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u25b3 \u5bf9\u6240\u6709\u7528\u6237\u751f\u6548 vim /etc/vimrc \u6309G\u8df3\u5230\u6587\u4ef6\u6700\u540e\u4e00\u884c \u6839\u636e\u9700\u6c42\u52a0\u5165\u4e00\u4e0b\u4e09\u884c\u6587\u672c. set nu set ic set ai \u25b3 \u53ea\u5bf9\u5f53\u524d\u7684\u7528\u6237\u751f\u6548 vim ~/.vimrc \u82e5\u6b64\u6587\u4ef6\u6ca1\u6709,\u5728vim\u6253\u5f00\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa\uff01\u540c\u7406,\u6839\u636e\u9700\u6c42\u52a0\u5165\u4e09\u884c\u6587\u672c.. \u5176\u4ed6 \u00b6 : 3,7 d \u5220\u9664\u6587\u672c3-7\u884c\u5185\u5bb9 :2,4 co 11 \u5c062\u52304\u884c\u7684\u5185\u5bb9\u590d\u5236\u5230\u7b2c11\u884c\u7684\u4e0b\u9762 \u6587\u4ef6\u5bf9\u6bd4 \u00b6 diff < \u5c0f\u4e8e\u53f7\u4ee3\u8868\u5de6\u8fb9\u8fb9\u6587\u4ef6 > \u5927\u4e8e\u53f7\u4ee3\u8868\u53f3\u8fb9\u6587\u4ef6 diff - u \u5236\u4f5c\u8865\u4e01\u6587\u4ef6, \u901a\u5e38\u4f1a\u5236\u4f5c\u4e24\u4e2a\u8865\u4e01\u6587\u4ef6! patch \u6253\u8865\u4e01 vimdiff \u4ee5vim\u65b9\u5f0f\u6253\u5f00\u4e24\u4e2a\u6587\u4ef6\u5bf9\u6bd4, \u9ad8\u4eae\u663e\u793a\u4e0d\u540c\u7684\u5185\u5bb9 \u6570\u636e\u51c6\u5907 [ root@localhost mnt ] # cat a.txt 111 22 [ root@localhost mnt ] # cat b.txt 111 222 333 diff \u00b6 [ root@localhost mnt ] # diff a.txt b.txt 2c2,3 < 22 --- > 222 > 333 \u25b3 patch.diff \"\u8865\u4e01\u6587\u4ef6\" \u4fdd\u5b58\u4e24\u4e2a\u6587\u4ef6\u4e0d\u4e00\u6837\u7684\u5730\u65b9! ( \u6587\u4ef6\u540d\u968f\u4fbf\u547d\u540d ) \u8fd9\u4e2a\u8865\u4e01\u6587\u4ef6\u662f\u4ee5\u653e\u5728\u540e\u9762\u7684\u90a3\u4e2a\u6587\u4ef6 ( \u8fd9\u91cc\u662fb.txt ) \u4e3a\u51c6\u7684. \u6240\u4ee5\u8fd9\u4e2a\u8865\u4e01\u6587\u4ef6\u4f1a\u7528\u4e8e\u7ed9\u524d\u9762\u90a3\u4e2a\u6587\u4ef6 ( \u8fd9\u91cc\u662fa.txt ) \u6253\u8865\u4e01. [ root@localhost mnt ] # diff -u a.txt b.txt > patch.diff [ root@localhost mnt ] # cat patch.diff --- a.txt 2022 -07-12 17 :04:44.339129438 +0800 +++ b.txt 2022 -07-12 17 :04:46.035147935 +0800 @@ -1,2 +1,3 @@ 111 -22 +222 +333 \u25b3 \u5b89\u88c5patch\u5305 -- \u7528\u4e8e\u6253\u8865\u4e01 \u901a\u5e38\u5728\u6253\u8865\u4e01\u4e4b\u524d\u4f1a\u5236\u4f5c\u4e24\u4e2a\u8865\u4e01\u6587\u4ef6,\u4fbf\u4e8e\u6587\u4ef6\u6253\u597d\u8865\u4e01\u540e\u56de\u6eaf! diff -u a.txt b.txt > patch_b.diff diff -u b.txt a.txt > patch_a.diff \u8fd9\u6837\u7684\u8bdd,a.txt\u6587\u4ef6\u901a\u8fc7patch_b.diff\u6253\u597d\u8865\u4e01\u540e,\u8fd8\u53ef\u4ee5\u901a\u8fc7patch_a.diff\u8fd8\u539f! [ root@localhost mnt ] # yum install patch -y # \u7ed9a.txt\u6253\u8865\u4e01 a.txt\u4f1a\u53d8\u5f97\u8ddfb.txt\u4e00\u6837 [ root@localhost mnt ] # patch a.txt patch.diff patching file a.txt [ root@localhost mnt ] # cat a.txt 111 222 333 vimdiff \u00b6 [ root@localhost mnt ] # vimdiff a.txt b.txt \u8fd8\u6709 2 \u4e2a\u6587\u4ef6\u7b49\u5f85\u7f16\u8f91 Ps : control + ww \u5728\u547d\u4ee4\u884c\u6a21\u5f0f\u4e0b\u5b9e\u73b0\u4e24\u4e2a\u6587\u4ef6\u4e4b\u95f4\u5207\u6362! \u25a0 \u540c\u65f6\u7f16\u8f91\u591a\u4e2a\u6587\u4ef6! vim -o \u6587\u4ef61 \u6587\u4ef62 # \u6c34\u5e73\u5206\u9694 vim -O \u6587\u4ef61 \u6587\u4ef62 # \u5782\u76f4\u5206\u9694 \u547d\u4ee4\u884c\u6a21\u5f0f\u4e0b\u4f7f\u7528ctrl + ww\u5207\u6362 vi/vim\u6267\u884c\u8fc7\u7a0b \u00b6 \u89e3\u51b3vim\u975e\u6b63\u5e38\u9000\u51fa\u65f6\u6587\u4ef6\u4fdd\u5b58\u7684\u95ee\u9898\uff01 \u7ed3\u5408 5_\u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf \u4e2d\u7684Q/A\u5c0f\u8282\u8f85\u52a9\u7406\u89e3.. \u6709\u5fc5\u8981\u518d\u6b21\u8bf4\u660e: vim\u7684\u539f\u7406\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4e00\u4e0b\u5b50\u4ece\u786c\u76d8\u5168\u90e8\u8bfb\u5230\u5185\u5b58\u4e2d,\u5728\u5185\u5b58\u4e2d\u6539\u5b8c\u540e,\u518d\u4e00\u6b21\u6027\u5168\u90e8\u8986\u76d6\u786c\u76d8\u7684\u539f\u6587\u4ef6.. Vim\u975e\u6b63\u5e38\u9000\u51fa, \u7f16\u8f91a.txt\u6587\u4ef6\u7684\u65f6\u5019\u65ad\u5f00\u8fde\u63a5(\u65ad\u7f51\u6216\u65ad\u7535), \u91cd\u65b0\u8fde\u63a5\u670d\u52a1\u5668, \u518d\u6b21vim\u7f16\u8f91\u6587\u4ef6. \u4f1a\u63d0\u793a\u53d1\u73b0\u4ea4\u6362\u6587\u4ef6... Q\u9000\u51fa. \u25b3 \u4e0d\u60f3\u8fd8\u539f\u975e\u6b63\u5e38\u9000\u51fa\u65f6\u7684\u4fee\u6539,\u5220\u9664\u4ea4\u6362\u6587\u4ef6\u5373\u53ef rm -rf /mnt/.a.txt.swp \u25b3 \u8fd8\u539f\u975e\u6b63\u5e38\u9000\u51fa\u65f6\u7684\u4fee\u6539,\u547d\u4ee4\u884c\u8f93\u5165\u547d\u4ee4 vim -r a.txt \u7136\u540e\u8fdb\u884c\u7f16\u8f91.. \u518d\u6b21\u91cd\u65b0\u6253\u5f00\u65f6,\u8fd8\u63d0\u793a\u53d1\u73b0\u4ea4\u6362\u6587\u4ef6,\u76f4\u63a5\u6309d\u5220\u9664\u4ea4\u6362\u6587\u4ef6,\u518d\u8fdb\u5165\u5373\u53ef.. sed \u00b6 stream editor \u6d41\u5f0f\u7f16\u8f91\u5668 \u4e3b\u8981\u64c5\u957f\u5bf9\u6587\u4ef6\u7684\u7f16\u8f91\u64cd\u4f5c, \u6211\u4eec\u53ef\u4ee5\u4e8b\u5148\u5b9a\u5236\u597d\u7f16\u8f91\u6587\u4ef6\u7684\u6307\u4ee4, \u7136\u540e\u8ba9sed\u81ea\u52a8\u5b8c\u6210\u5bf9\u6587\u4ef6\u7684\u6574\u4f53\u7f16\u8f91 sed\u7684\u6d41\u5f0f\u8fc7\u7a0b \u00b6 Q: \u4e3a\u4f55sed\u4f1a\u79f0\u4f5c\u6d41\u5f0f/sed\u6d41\u5f0f\u7684\u539f\u7406/sed\u6d41\u5f0f\u7f16\u8f91\u5668\u7684\u6574\u4f53\u6d41\u7a0b\uff1f A: \u4e00\u6761sed\u547d\u4ee4\u662f\u4e00\u4e2a\u8f6f\u4ef6,\u4e00\u65e6\u8fd0\u884c\u8d77\u6765\u5c31\u4f1a\u542f\u7528\u4e00\u4e2a\u8fdb\u7a0b,\u8fdb\u7a0b\u4f1a\u5360\u7528\u4e00\u5757\u5185\u5b58\u7a7a\u95f4; \u8fd9\u5757\u5185\u5b58\u4f1a\u81ea\u52a8\u8fdb\u884c\u4e00\u4e2a\u9694\u65ad, \u5de6\u8fb9\u7684\u79f0\u4e3a\u6a21\u5f0f\u7a7a\u95f4\u3001\u53f3\u8fb9\u7684\u79f0\u4e3a\u4fdd\u6301\u7a7a\u95f4( \u4fdd\u6301\u7a7a\u95f4\u6682\u4e14\u4e0d\u8ba8\u8bba ); sed\u5904\u7406\u7684\u6587\u4ef6\u662f\u653e\u5728\u786c\u76d8\u4e0a\u7684,sed\u4f1a\u4e00\u884c\u884c\u7684\u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9\u5230\u6a21\u5f0f\u7a7a\u95f4; \u4e00\u884c\u884c\u7684\u6309\u7167\u4e8b\u5148\u5236\u5b9a\u7684\u89c4\u5219( \u5b9a\u4f4d+\u5177\u4f53\u64cd\u4f5c )\u5904\u7406,\u5904\u7406\u5b8c\u540e\u82e5\u6a21\u5f0f\u7a7a\u95f4\u6709\u5185\u5bb9,\u4f1a\u6d41\u5230\u5c4f\u5e55\u4e2d\u8fdb\u884c\u663e\u793a. \u5177\u4f53\u6765\u8bf4: step 1> \u82e5\u6b64\u884c\u4e0d\u7b26\u5408\u5b9a\u4f4d,\u5c06\u4e0d\u4f1a\u8fdb\u884c\u4efb\u4f55\u5904\u7406; \u82e5\u6b64\u884c\u7b26\u5408\u5b9a\u4f4d,\u5c06\u4f1a\u6309\u7167\u5177\u4f53\u64cd\u4f5c\u8fdb\u884c\u5904\u7406; ( \u6240\u8c13\u7684\u5904\u7406 \"p\" \u5c06\u6240\u6709\u884c\u6253\u5370\u5230\u5c4f\u5e55\u4e2d. \"1,2s/egon/BIGEGON/g'\" \u5bf91\u52302\u884c\u7684\u5185\u5bb9\u8fdb\u884c\u66ff\u6362 ) step 2> \u4e0d\u7ba1\u662f\u5426\u7b26\u5408\u5b9a\u4f4d,\u6700\u540e\u82e5\u6a21\u5f0f\u7a7a\u95f4\u91cc\u6709\u5185\u5bb9\u5c06\u4f1a\u8fdb\u884c \u9ed8\u8ba4\u8f93\u51fa ,\u6d41\u5230\u5c4f\u5e55\u5f53\u4e2d! ( \u4e3a\u4f55\u8fd9\u6837\u8bf4,\u56e0\u4e3a\"d\"\u7684\u8bdd,\u76f4\u63a5\u5220\u9664,\u8fd9\u884c\u5185\u5bb9\u5c31\u4e0d\u4f1a\u7559\u5b58\u5728\u6a21\u5f0f\u7a7a\u95f4. ) Ps: \u4e0a\u8ff0\u8fc7\u7a0b\u4e0d\u4f1a\u6539\u53d8\u786c\u76d8\u4e2d\u539f\u6709\u6587\u4ef6\u7684\u5185\u5bb9!! \u9664\u975e\u7528\u4e86 -i \u9009\u9879 sed\u4e0evim\u5bf9\u6bd4 \u00b6 Q: \u4ec0\u4e48\u65f6\u5019\u7528sed? A: \u6210\u6279\u6b21\u7684\u5904\u7406; \u5904\u7406\u5927\u6587\u4ef6. 1> sed\u53ef\u4ee5\u628a\u5904\u7406\u6587\u4ef6\u7684\u89c4\u5219\u4e8b\u5148\u5199\u597d, \u7136\u540e\u7528\u540c\u4e00\u5957\u89c4\u5219\u7f16\u8f91\u591a\u4e2a\u6587\u4ef6; \u800cvim\u53ea\u80fd\u4e00\u4e2a\u4e00\u4e2a\u8fdb\u884c\u7f16\u8f91 2> sed\u5904\u7406\u6587\u4ef6,\u4e00\u6b21\u53ea\u5904\u7406\u4e00\u884c, \u5373\u540c\u4e00\u65f6\u95f4\u5185\u5b58\u4e2d\u53ea\u6709\u6587\u4ef6\u7684\u4e00\u884c\u5185\u5bb9 . \u65e0\u8bba\u6587\u4ef6\u591a\u5927,\u90fd\u4e0d\u4f1a\u5bf9\u5185\u5b58\u9020\u6210\u8fc7\u5927\u7684\u538b\u529b \u547d\u4ee4\u4f7f\u7528 \u00b6 sed \u9009\u9879 \u89c4\u5219 \u6587\u4ef6\u8def\u5f84 [\u9009\u9879] -n \u53d6\u6d88\u9ed8\u8ba4\u8f93\u51fa -r \u652f\u6301\u6269\u5c55\u6b63\u5219\u5143\u5b57\u7b26 -i \u5c06\u5904\u7406\u89c4\u5219\u5e94\u7528\u5230 \u6587\u4ef6 \u5f53\u4e2d\u53bb,\u771f\u6b63\u7684\u5b8c\u6210\u4e86\u7f16\u8f91, \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u6210\u6539\u53d8\u4e86\u8f93\u51fa\u6d41\u5411. -i \u7684\u5e95\u5c42\u539f\u7406 : \u5c06\u672c\u5e94\u6253\u5370\u5230\u5c4f\u5e55\u7684\u5185\u5bb9\u5199\u5165\u4e86\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6,\u628a\u539f\u6587\u4ef6\u4e00\u5220,\u628a\u4e34\u65f6\u6587\u4ef6\u6539\u540d\u4e3a\u539f\u6587\u4ef6\u7684\u540d\u5b57, \u901f\u5ea6\u975e\u5e38\u5feb,\u770b\u6837\u5b50\u5c31\u50cf\u662f \u8986\u76d6 \u4e86\u539f\u6587\u4ef6. \u901a\u5e38\u4f1a\u5728\u8c03\u8bd5\u5b8c\u6bd5\u786e\u4fdd\u6ca1\u6709\u95ee\u9898\u540e\u518d\u52a0-i\u9009\u9879! [\u89c4\u5219] '\u5b9a\u4f4d/\u5339\u914d+\u547d\u4ee4/\u5177\u4f53\u64cd\u4f5c' \u4e0d\u5199\u5b9a\u4f4d\u4ee3\u8868\u5b9a\u4f4d\u6240\u6709\u884c \u884c\u5b9a\u4f4d 1 \u5b9a\u4f4d\u5230\u7b2c\u4e00\u884c 1,3 \u4ece\u7b2c1\u884c\u5230\u7b2c3\u884c \u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4f4d -- / / \u4e24\u4e2a\u5de6\u659c\u6760\u8fdb\u884c\u5305\u88f9. /egon/ \u5305\u542begon\u7684\u884c /^egon/ \u4ee5egon\u5f00\u5934\u7684\u884c /egon$/ \u4ee5egon\u7ed3\u5c3e\u7684\u884c \u6570\u5b57+\u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4f4d 1,8 1\u52308\u884c 1,/egon/ \u53d6\u4ece\u7b2c1\u884c\u5230\u9996\u6b21\u5339\u914d\u5230/egon/\u7684\u884c \u5177\u4f53\u64cd\u4f5c \u200b d \u200b p \u200b s/\u5339\u914d\u5185\u5bb9/\u66ff\u6362\u5185\u5bb9/gi -- s\u540e\u9762\u4e09\u4e2a\u5de6\u659c\u6760 Ps: \u547d\u4ee4\u53ef\u4ee5\u7528;\u53f7\u8fde\u63a5\u591a\u6761 \u5982 sed \"1d;3d;5d\" a.txt \u4ee3\u8868\u5220\u96641,3,5\u884c [ root@localhost mnt ] # cat b.txt egon1111 22222egon 3333egon33333 4444xxx44444 5555xxx55555xxxx555xxx 6666egon6666egon666egon 777Egon7777eGOn7777eGoN \u3010 ; \u5206\u53f7\u8fde\u63a5\u591a\u6761\u547d\u4ee4\u3011 \u25b2 \u5c06\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u548c\u7b2c\u4e09\u884c\u8fdb\u884c\u6253\u5370\u5904\u7406 [ root@localhost mnt ] # sed \"1p;3p\" b.txt egon1111 egon1111 22222egon 3333egon33333 3333egon33333 4444xxx44444 5555xxx55555xxxx555xxx 6666egon6666egon666egon 777Egon7777eGOn7777eGoN \u3010-n \u53d6\u6d88\u9ed8\u8ba4\u8f93\u51fa\u3011 [ root@localhost mnt ] # sed -n \"\" b.txt [ root@localhost mnt ] # sed -n \"1p;3p\" b.txt egon1111 3333egon33333 \u3010\u6b63\u5219\u5b9a\u4f4d\u3011 \u25b2 \u5220\u9664\u6587\u4ef6\u4e2d\u4ee5egon\u7ed3\u5c3e\u7684\u884c \u8fc7\u7a0b: \u7b2c\u4e00\u884c\u8fdb\u6765\u540e,\u6b63\u5219\u5b9a\u4f4d/egon$/\u5931\u8d25,\u76f4\u63a5\u9ed8\u8ba4\u8f93\u51fa ; \u7b2c\u4e8c\u884c\u8fdb\u6765\u540e,\u5b9a\u4f4d\u6210\u529f,\u6309\u7167\u5177\u4f53\u7684\u64cd\u4f5c\u6307\u4ee4d\u76f4\u63a5\u5e72\u6389,\u6ca1\u6709\u9ed8\u8ba4\u8f93\u51fa\u4e86.. \u5269\u4f59\u884c\u540c\u7406. [ root@localhost mnt ] # sed \"/egon$/d\" b.txt egon1111 3333egon33333 4444xxx44444 5555xxx55555xxxx555xxx 777Egon7777eGOn7777eGoN Ps: sed \"/^egon/p\" b.txt sed \"/egon/p\" b.txt sed \"1,/egon $ /d\" b.txt \u7b2c\u4e00\u884c\u5230\u9996\u6b21\u5b9a\u4f4d\u5230\u4ee5egon\u7ed3\u5c3e\u7684\u884c\u5168\u90e8\u5220\u9664 \u3010s\u66ff\u6362\u64cd\u4f5c\u3011 \u25cf \u4e0d\u5ffd\u7565\u5927\u5c0f\u5199,\u61d2\u60f0\u5339\u914d ( \u5f53\u524d\u8bfb\u5165\u6a21\u5f0f\u7a7a\u95f4\u7684\u884c\u4ece\u5de6\u5230\u53f3\u627e\u5230\u7b2c\u4e00\u4e2aegon\u5c31\u4e0d\u5f80\u540e\u9762\u627e\u4e86 ) [ root@localhost mnt ] # sed \"s/egon/EGON/\" b.txt EGON1111 22222EGON 3333EGON33333 4444xxx44444 5555xxx55555xxxx555xxx 6666EGON6666egon666egon 777Egon7777eGOn7777eGoN \u25cf \u4e0d\u5ffd\u7565\u5927\u5c0f\u5199,\u5168\u5c40\u5339\u914d [ root@localhost mnt ] # sed \"s/egon/EGON/g\" b.txt EGON1111 22222EGON 3333EGON33333 4444xxx44444 5555xxx55555xxxx555xxx 6666EGON6666EGON666EGON 777Egon7777eGOn7777eGoN \u25cf \u5ffd\u7565\u5927\u5c0f\u5199,\u5168\u5c40\u5339\u914d [ root@localhost mnt ] # sed \"s/egon/EGON/gi\" b.txt EGON1111 22222EGON 3333EGON33333 4444xxx44444 5555xxx55555xxxx555xxx 6666EGON6666EGON666EGON 777EGON7777EGON7777EGON \u3010sed\u4f7f\u7528\u7ba1\u9053\u5904\u7406\u5176\u4ed6\u547d\u4ee4\u7684\u7ed3\u679c\u3011 [ root@localhost mnt ] # ifconfig | sed \"s/ens33/eth0/\" eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) ... ... ... [ root@localhost mnt ] # ifconfig | sed -i \"s/ens33/eth0/\" sed: \u6ca1\u6709\u8f93\u5165\u6587\u4ef6 # -i \u9009\u9879\u4f5c\u7528\u76ee\u6807\u662f\u6587\u4ef6 awk \u00b6 \u4e8b\u5b9e\u4e0aawk\u662f\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00,\u53ef\u4ee5\u72ec\u7acb\u5b8c\u6210\u5f88\u5f3a\u5927\u7684\u64cd\u4f5c.. \u4e3b\u8981\u64c5\u957f\u5904\u7406\u6709\u89c4\u5f8b\u7684\u6587\u672c(eg /etc/passwd ), \u5bf9\u5176\u505a\u4e00\u4e9b\u683c\u5f0f\u5316\u7684\u5904\u7406! \u547d\u4ee4\u6784\u6210 \u00b6 awk \u9009\u9879 \"\u89c4\u5219\" \u6587\u4ef6\u8def\u5f84 awk\u4e0esed\u76f8\u6bd4, \u6ca1\u6709\u9ed8\u8ba4\u8f93\u51fa ; awk\u5f3a\u5927\u5728\u4e8e \u6bb5\u7684\u6982\u5ff5 (\u6bb5\u53ef\u4ee5\u5e94\u7528\u4e8e\u5b9a\u4f4d\u4ee5\u53ca\u5177\u4f53\u64cd\u4f5c\u7684\u547d\u4ee4). [\u9009\u9879] -F \u6307\u5b9a\u5206\u9694\u7b26,\u4e0d\u5199\u6b64\u9009\u9879\u9ed8\u8ba4\u5c31\u662f\u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26 [\u89c4\u5219] '\u5b9a\u4f4d+\u547d\u4ee4/\u5177\u4f53\u64cd\u4f5c' \u6ce8\u610f: \u89c4\u5219\u5f97\u7528 \u5355\u5f15\u53f7 \u5305\u88f9... \u6ca1\u6709\u5b9a\u4f4d\u5219\u4ee3\u8868\u5b9a\u4f4d\u6240\u6709\u884c \u884c\u5b9a\u4f4d NR == 1 \u4ee3\u8868\u5b9a\u4f4d\u5230\u7b2c\u4e00\u884c NR>=3&&NR<=5 \u4ee3\u8868\u5b9a\u4f4d\u5230\u7b2c\u4e09\u884c\u5230\u7b2c\u4e94\u884c &&\u5e76\u4e14 NR<=3||NR>=8 \u4ee3\u8868\u5b9a\u4f4d\u5230\u7b2c\u4e09\u884c\u5230\u7b2c\u4e94\u884c ||\u6216\u8005 \u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4f4d -- sed\u53ef\u4ee5\u7684awk\u4e5f\u53ef\u4ee5 $5 ~ /root/ \u6458\u53d6\u8bfb\u5165\u5185\u5b58\u7684\u884c\u7684\u7b2c6\u6bb5\u8fdb\u884c\u6b63\u5219\u5b9a\u4f4d,\u82e5\u7b2c5\u6bb5\u7684\u5185\u5bb9\u5305\u542broot\u5219\u5b9a\u4f4d\u6210\u529f $5 !~ /root/ \u5b9a\u4f4d\u7b2c5\u6bb5\u4e0d\u5305\u542broot\u7684\u884c $1==\"root\" \u6bcf\u4e00\u884c\u8fdb\u6765\u540e,\u53ea\u6bd4\u8f83\u7b2c\u4e00\u6bb5. \u6ce8\u610froot\u7528\u53cc\u5f15\u53f7\u5305\u88f9\u8d77\u6765\u4e86\u54e6! \u200b \u547d\u4ee4/\u5177\u4f53\u64cd\u4f5c {print $3,$5} \u6253\u5370\u5b9a\u4f4d\u7684\u884c\u4ee5\u6307\u5b9a\u5206\u9694\u7b26\u5206\u9694\u7684\u7b2c3\u6bb5\u548c\u7b2c5\u6bb5\u7684\u5185\u5bb9 awk\u5185\u7f6e\u7684\u53d8\u91cf NR \u8bfb\u5165\u7684\u662f\u7b2c\u4e00\u884c,NR\u7684\u503c\u4e3a1;\u8bfb\u5165\u7684\u662f\u7b2cn\u884c,NR\u7684\u503c\u4e3an; $0 \u4e00\u6574\u884c\u7684\u5185\u5bb9 NF \u4ee5-F\u5206\u9694\u7b26\u5206\u9694\u7684\u6bb5\u6570 \u5de5\u4f5c\u6d41\u7a0b \u00b6 [ root@localhost mnt ] # head -10 /etc/passwd > test.txt [ root@localhost mnt ] # ls test.txt [ root@localhost mnt ] # cat test.txt root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin operator:x:11:0:operator:/root:/sbin/nologin step1: awk\u4f1a\u8bfb\u53d6\u6587\u4ef6\u7684\u4e00\u884c\u5185\u5bb9\u7136\u540e\u8d4b\u503c\u7ed9 \\(0 step2: \u7136\u540eawk\u4f1a\u4ee5-F\u6307\u5b9a\u7684\u5206\u9694\u7b26\u5c06\u8be5\u884c\u5207\u5206\u6210n\u6bb5,\u6700\u591a\u53ef\u4ee5\u8fbe\u5230100\u6bb5,\u7b2c\u4e00\u6bb5\u7ed9\\) 1,\u7b2c\u4e8c\u6bb5\u7ed9$2,\u4ee5\u6b64\u7c7b\u63a8 step3: print\u8f93\u51fa\u8be5\u884c\u7684\u7b2c\u4e00\u6bb5\u548c\u7b2c\u4e09\u6bb5 step4: \u91cd\u590d\u6b65\u9aa41,2,3\u76f4\u5230\u6587\u4ef6\u5185\u5bb9\u8bfb\u5b8c Ps \u6b64\u5904\u5b9a\u4f4d\u7684\u662f\u6240\u6709\u884c,\u6240\u4ee5\u6bcf\u884c\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u7ecf\u5386\u4e0a\u8ff0\u6d41\u7a0b.. ( \u53ea\u4f1a\u5bf9\u5b9a\u4f4d\u7684\u884c\u8fdb\u884c\u5177\u4f53\u7684\u64cd\u4f5c!! ) [ root@localhost mnt ] # awk -F: '{print $1,$3}' test.txt root 0 bin 1 daemon 2 adm 3 lp 4 sync 5 shutdown 6 halt 7 mail 8 operator 11 \u884c\u5b9a\u4f4d \u00b6 \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u7684\u7b2c\u4e09\u884c [ root@localhost mnt ] # awk -F: 'NR==3{print $1,$3}' test.txt daemon 2 # \u7b49\u540c\u4e8e sed -n '3p' test.txt [ root@localhost mnt ] # awk -F: 'NR==3{print $0}' test.txt daemon:x:2:2:daemon:/sbin:/sbin/nologin \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e09\u884c\u5230\u7b2c\u4e94\u884c [ root@localhost mnt ] # awk -F: 'NR>=3&&NR<=5{print $1,$3}' test.txt daemon 2 adm 3 lp 4 \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u884c\u53f7\u5c0f\u4e8e\u7b49\u4e8e3\u6216\u8005\u5927\u4e8e\u7b49\u4e8e8\u7684\u884c [ root@localhost mnt ] # awk -F: 'NR<=3||NR>=8{print $1,$3}' test.txt root 0 bin 1 daemon 2 halt 7 mail 8 operator 11 \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u76843\u30015\u30017\u884c [ root@localhost mnt ] # awk -F: 'NR==3||NR==5||NR==7{print $1,$3}' test.txt daemon 2 lp 4 shutdown 6 \u6b63\u5219\u5b9a\u4f4d \u00b6 \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u4ee5nologin\u7ed3\u5c3e\u7684\u884c [ root@localhost mnt ] # awk -F: '/nologin$/{print $1}' test.txt bin daemon adm lp mail operator \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: '/root/{print $0}' test.txt root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7b2c5\u6bb5\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: '$5~/root/{print $0}' test.txt root:x:0:0:root:/root:/bin/bash \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7b2c5\u6bb5\u4e0d\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: '$5!~/root/{print $0}' test.txt bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin operator:x:11:0:operator:/root:/sbin/nologin \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7b2c1\u6bb5\u4e3aroot\u7684\u884c [ root@localhost mnt ] # awk -F: '$1==\"root\"{print $0}' test.txt root:x:0:0:root:/root:/bin/bash \u25b2 \u7efc\u5408\u8003\u5bdf: \u5b9a\u4f4d\u6587\u4ef6\u7b2c1\u52304\u884c\u4e14\u7b2c5\u6bb5\u4e0d\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: 'NR>=1&&NR<=4&&$5!~/root/{print $0}' test.txt bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin \u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26 \u00b6 [ root@localhost mnt ] # cat a.txt a b c d e f g h i g k l [ root@localhost mnt ] # awk -F\" \" '{print $1,$2}' a.txt a b d e h i [ root@localhost mnt ] # awk '{print $1,$2}' a.txt a b d e h i \u25b2 \u53d6\u7b2c\u4e00\u5757\u7f51\u5361\u7684IP\u5730\u5740 [ root@localhost mnt ] # ifconfig ens33: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) ... ... ... [ root@localhost mnt ] # ifconfig | awk 'NR==2{print $2}' 172 .16.150.131 [ root@localhost mnt ] # ifconfig | awk 'NR==2{print $2}' | awk -F. '{print $1}' 172 NF\u7684\u5999\u7528 \u00b6 \u25b2 \u6bcf\u4e00\u884c\u7684\u5206\u9694\u6bb5\u6570\u4e0d\u4e00\u6837,\u6253\u5370\u884c\u53f7\u548c\u6bcf\u884c\u5206\u9694\u7684\u6bb5\u6570\u4ee5\u53ca\u6bcf\u884c\u7684\u6700\u540e\u4e00\u6bb5\u548c\u5012\u6570\u7b2c\u4e8c\u6bb5\u7684\u5185\u5bb9 [ root@localhost mnt ] # cat b.txt a:b:c d:e f:g:h:i:j k:l:M:n o:p [ root@localhost mnt ] # awk -F: '{print NR,NF,$NF,$(NF-1)}' b.txt 1 3 c b 2 2 e d 3 5 j i 4 4 n M 5 2 p o grep \u00b6 grep\u66f4\u64c5\u957f\u8fc7\u6ee4\u5185\u5bb9, < grep\u6ca1\u6709\u884c\u5b9a\u4f4d\u7684\u6982\u5ff5,\u4f5c\u7528\u7684\u5c31\u662f\u6574\u4e2a\u6587\u4ef6! > grep \u9009\u9879 \"\u8fc7\u6ee4\u89c4\u5219/\u6b63\u5219\" \u6587\u4ef6\u8def\u5f84 [\u9009\u9879] -n \u5728\u8fc7\u6ee4\u51fa\u7684\u6bcf\u4e00\u884c\u524d\u9762\u52a0\u4e0a\u5b83\u5728\u6e90\u6587\u4ef6\u4e2d\u7684\u884c\u53f7 -i \u5ffd\u7565\u5927\u5c0f\u5199 -l \u5982\u679c\u6587\u4ef6\u7684\u67d0\u4e00\u884c\u7b26\u5408\u8fc7\u6ee4\u89c4\u5219, \u5219\u53ea\u5c06\u6587\u4ef6\u540d\u6253\u5370\u51fa\u6765, \u5931\u8d25\u5219\u4e0d\u6253\u5370 -r \u9012\u5f52\u6587\u4ef6\u5939\u91cc\u7684\u6587\u4ef6 Ps: \u901a\u5e38 -rl \u4e00\u8d77\u7528 grep -rl 'root' /etc \u67d0\u4e2a\u6587\u4ef6\u5939\u91cc\u6709\u4e00\u5806\u6587\u4ef6,\u5f53\u5fd8\u8bb0\u4e86\u67d0\u4e2a\u914d\u7f6e\u9879\u5728\u54ea\u4e2a\u6587\u4ef6\u91cc\u65f6\u53ef\u4ee5\u7528. -v \u8fc7\u6ee4\u6389 , \u5176\u4f59\u7684\u9009\u9879\u90fd\u662f\u8fc7\u6ee4\u51fa\u7b26\u5408\u89c4\u5219\u7684\u884c. [\u8fc7\u6ee4\u89c4\u5219] \u672c\u8d28\u5c31\u662f\u6b63\u5219, \u73b0\u76ee\u524d\u53ea\u9700\u8981\u638c\u63e1 /egon/ /^egon/ /egon$/ \u5373\u53ef. [ root@localhost opt ] # grep -rl 'egon' /etc /etc/udev/hwdb.bin [ root@localhost opt ] # grep -n 'bash$' /etc/passwd 1 :root:x:0:0:root:/root:/bin/bash 44 :onepiece:x:1000:1000:OnePiece:/home/onepiece:/bin/bash 45 :dc:x:1001:1001::/home/dc:/bin/bash [ root@localhost opt ] # ifconfig ens33 | grep 'netmask' inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 [ root@localhost opt ] # ps aux | grep \"ssh\" root 1093 0 .0 0 .0 112984 392 ? Ss 7\u670811 0 :00 /usr/sbin/sshd -D root 1881 0 .0 0 .0 72552 48 ? Ss 7\u670811 0 :06 /usr/bin/ssh-agent /bin... root 32633 0 .0 0 .2 163888 2004 ? Ss 10 :53 0 :04 sshd: root@pts/1 root 41008 0 .0 0 .0 112824 988 pts/1 R+ 22 :50 0 :00 grep --color = auto ssh # \u7b49\u540c\u4e8e ps aux | grep \"[s]sh\" [ root@localhost opt ] # ps aux | grep \"ssh\" | grep -v \"grep\" root 1093 0 .0 0 .0 112984 392 ? Ss 7\u670811 0 :00 /usr/sbin/sshd -D root 1881 0 .0 0 .0 72552 48 ? Ss 7\u670811 0 :06 /usr/bin/ssh-agent /bin... root 32633 0 .0 0 .2 163888 2004 ? Ss 10 :53 0 :04 sshd: root@pts/1 linux\u4e0a\u67e5\u770b\u6240\u6709\u7684\u8fdb\u7a0b ps aux ; \u5f3a\u5236\u6740\u6b7b\u67d0\u4e2a\u8fdb\u7a0b kill -9 \u8fdb\u7a0b\u53f7 ; windows\u4e0a\u67e5\u770b\u8fdb\u7a0b\u5e76\u8fc7\u6ee4 tasklist | findstr \"WeChat.exe\" ; \u6740\u6b7b\u8fdb\u7a0b taskkill /F /PID \u8fdb\u7a0b\u53f7 \u6587\u672c\u5904\u7406\u4e09\u5251\u5ba2 sed\u3001awk\u3001grep \u5728\u540e\u7eed\u7684shell\u7f16\u7a0b\u91cc\u4f1a\u8be6\u89e3\u5b83\u4ee8! (\u5982\u679c\u4f1a\u7cfb\u7edf\u5b66\u4e60shell\u7f16\u7a0b\u7684\u8bdd)","title":"\u6587\u4ef6\u7ba1\u7406\u4e4b\u56db\u5927\u6a21\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_1","text":"\u6253\u5f00\u6587\u4ef6\u5c31\u8fdb\u5165\u4e86\u6b64\u6a21\u5f0f. \u5feb\u6377\u952e \u6548\u679c $ (\u6309shift + 4) \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u7684\u672b\u5c3e \u6309\u6570\u5b570 \u5149\u6807\u79fb\u52a8\u5230\u5f53\u524d\u884c\u7684\u5f00\u5934 dd (\u6309\u4e24\u4e0b\u5b57\u6bcdd) \u5220\u9664\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c ndd (n\u4e3a\u6570\u5b57) eg: \u6309\u4e0b\u6570\u5b573,\u7136\u540e\u6309\u4e24\u4e0bd. \u90a3\u4e48\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c\u8fde\u540c\u4e0b\u65b9\u7684\u4e24\u884c\u4f1a\u4e00\u540c\u88ab\u5220\u9664\u6389\uff01 \u7f16\u8f91\u5668\u5de6\u4e0b\u89d2\u4f1a\u63d0\u793a \u5c11\u4e863\u884c u (\u6309\u4e0b\u5b57\u6bcd\u5c0fu) \u540e\u9000 (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+z\u7684\u56de\u9000\u64cd\u4f5c) ctrl + r \u524d\u8fdb (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+y\u7684\u524d\u8fdb\u64cd\u4f5c) \u6ce8\u610f: mac\u4e0b\u662fcontrol + r yy (\u6309\u4e24\u4e0b\u5b57\u6bcdy) \u590d\u5236\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+c) nyy (n\u4e3a\u6570\u5b57) eg: \u6309\u4e0b\u6570\u5b573,\u7136\u540e\u6309\u4e24\u4e0bd. \u90a3\u4e48\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c\u8fde\u540c\u4e0b\u65b9\u7684\u4e24\u884c\u4f1a\u4e00\u540c\u88ab\u590d\u5236\uff01 \u7f16\u8f91\u5668\u5de6\u4e0b\u89d2\u4f1a\u63d0\u793a \u590d\u5236\u4e863\u884c p (\u6309\u4e0b\u5b57\u6bcd\u5c0fp) \u5c06\u5df2\u7ecf\u590d\u5236\u7684\u6570\u636e\u7c98\u8d34\u5728\u5149\u6807\u6240\u5728\u884c\u7684\u4e0b\u4e00\u884c (\u76f8\u5f53\u4e8ewindows\u4e0bctrl+v \u53ef\u4ee5\u591a\u6b21\u7c98\u8d34) \u82e5\u662f\u591a\u884c\u7684\u8bdd \u7f16\u8f91\u5668\u5de6\u4e0b\u89d2\u4f1a\u63d0\u793a \u591a\u4e86n\u884c P (\u6309shift + p) \u5c06\u5df2\u7ecf\u590d\u5236\u7684\u6570\u636e\u7c98\u8d34\u5728\u5149\u6807\u6240\u5728\u884c\u7684\u4e0a\u4e00\u884c Ps: \u5947\u6deb\u6280\u5de7 -- 100000000yy\u590d\u5236\u6574\u4e2a\u6587\u4ef6\u5185\u5bb9; (n)yy + (n)p \u5feb\u901f\u589e\u5927\u6587\u4ef6.","title":"\u547d\u4ee4\u884c\u6a21\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_2","text":"0 \u884c\u5934 $ \u884c\u5c3e gg \u6587\u4ef6\u7b2c\u4e00\u884c\u884c\u5934 G \u6587\u4ef6\u6700\u540e\u4e00\u884c\u884c\u5934 (n)G \u6587\u4ef6\u7684\u7b2cn\u884c\u884c\u5934 Ps: \u6269\u5c55\u6a21\u5f0f\u4e0b :n \u4e00\u6837\u7684\u5b9a\u4f4d\u5230\u6587\u4ef6\u7684\u7b2cn\u884c H \u6b64\u5c4f\u5185\u5bb9\u7b2c\u4e00\u884c\u884c\u5934 M \u6b64\u5c4f\u5185\u5bb9\u4e2d\u592e\u884c\u884c\u5934 L \u6b64\u5c4f\u5185\u5bb9\u6700\u540e\u4e00\u884c\u884c\u5934","title":"\u5149\u6807\u5b9a\u4f4d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_3","text":"(n)dd + p \u526a\u5207 (n)yy + p \u590d\u5236\u7c98\u8d34 u \u56de\u9000 ctrl + r / control + r \u5feb\u8fdb","title":"\u6587\u672c\u7f16\u8f91"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_4","text":"/string \u5feb\u901f\u67e5\u627e\u6587\u4ef6\u4e2d\u6240\u6709\u7684string\u5355\u8bcd(\u4f1a\u9ad8\u4eae\u663e\u793a \u6309n\u4e0b\u4e00\u4e2a \u6309N\u4e0a\u4e00\u4e2a) Ps: \u8bbe\u7f6e\u73af\u5883 :set ic \u540e, \u5173\u952e\u5b57\u7684\u67e5\u627e \u4f1a\u5ffd\u7565\u5927\u5c0f\u5199!","title":"\u5173\u952e\u5b57\u67e5\u627e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_5","text":"\u8f93\u5165a\u3001i\u3001o\u4e4b\u4e00\u8fdb\u5165\u63d2\u5165\u6a21\u5f0f a \u5728<\u5149\u6807\u4e4b \u540e >\u8fdb\u884c\u6dfb\u52a0 i \u5728<\u5149\u6807\u4e4b \u524d >\u8fdb\u884c\u63d2\u5165 o \u5728<\u5f53\u524d\u5149\u6807\u6240\u5728\u884c\u4e4b\u4e0b>\u5f00\u542f\u65b0\u7684\u4e00\u884c \u5728\u7f16\u8f91\u6a21\u5f0f\u4e0b, ctrl/control + w \u662f\u8fd4\u56de\u529f\u80fd\uff01 Ps: \u4f7f\u7528 ESC\u952e \u8fd4\u56de\u547d\u4ee4\u884c\u6a21\u5f0f","title":"\u7f16\u8f91/\u63d2\u5165\u6a21\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_6","text":"\u4e25\u683c\u6765\u8bf4\u8fd8\u6709\u4e00\u4e2a \u53ef\u89c6\u5757\u6a21\u5f0f , \u4e3b\u8981\u7528\u4e8e\u6279\u91cf\u52a0\u51cf\u6ce8\u91ca\u7684 \u524d\u63d0: \u6ce8\u91ca\u7684\u884c\u9700\u8981\u6574\u9f50\u6392\u5217 \u5728\u547d\u4ee4\u6a21\u5f0f\u4e0b,\u6309 ctrl + v / control +v \u8fdb\u5165\u53ef\u89c6\u5757\u6a21\u5f0f","title":"\u53ef\u89c6\u5757\u6a21\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_7","text":"1> \u4e0a\u4e0b\u952e\u9009\u4e2d#\u53f7 2> \u6309\u4e0bd\u952e","title":"\u6279\u91cf\u5220\u9664\u6ce8\u91ca"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_8","text":"\u5148\u5c06\u5149\u6807\u79fb\u52a8\u5230\u9700\u8981\u52a0\u6ce8\u91ca\u7684\u7b2c\u4e00\u884c\u5f00\u5934\u7684\u4f4d\u7f6e 1> \u4e0a\u4e0b\u952e\u9009\u4e2d\u7b2c\u4e00\u5217 2> shift + i ,\u7136\u540e\u8f93\u5165#\u53f7 3> \u8fde\u7eed\u6309\u4e24\u4e0bESC Ps: shell\u811a\u672c\u7684\u7f29\u8fdb control +v \u4e0a\u4e0b\u9009\u62e9\u7f29\u8fdb\u884c shift+i \u56db\u4e2a\u7a7a\u683c\u5148\u7f29\u8fdb\u7b2c\u4e00\u884c \u4e24\u4e0besc \u9009\u62e9\u7684\u884c\u5168\u90e8\u7f29\u8fdb..","title":"\u6279\u91cf\u6dfb\u52a0\u6ce8\u91ca"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_9","text":"\u5728\u547d\u4ee4\u884c\u6a21\u5f0f\u4e0b\u8f93\u5165\u5192\u53f7\u8fdb\u5165\u672b\u884c\u6a21\u5f0f","title":"\u6269\u5c55/\u672b\u884c\u6a21\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_10","text":":wq \u4fdd\u5b58\u5e76\u9000\u51fa :w \u4fdd\u5b58\u540e\u7ee7\u7eed\u4fee\u6539 :q! \u4fee\u6539\u7684\u5185\u5bb9\u4e0d\u60f3\u8981\u4e86,\u6587\u4ef6\u6062\u590d\u4e0a\u4e00\u6b21\u4fdd\u5b58\u65f6\u7684\u6837\u5b50.\u9000\u51fa. :wq! \u4e0e\u6587\u4ef6\u6743\u9650\u6709\u5173 \u5206root\u7ba1\u7406\u5458\u548c\u666e\u901a\u7528\u6237dc\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba.. Ps: wq \u53ef\u4ee5\u7528 x \u6765\u4ee3\u66ff\uff01\uff01 \u25b2 \u51c6\u5907\u6570\u636e: root\u7528\u6237\u521b\u5efa\u4e86\u4e00\u4e2aa.txt\u6587\u4ef6,\u6dfb\u52a0\u6587\u672c111,\u5e76\u4fee\u6539\u5176\u6743\u9650\u4e3a ---------- \u6ca1\u6709\u4eba\u5bf9\u5176\u6709\u4efb\u4f55\u6743\u9650. \u4f46\u8981\u6ce8\u610f,root\u7528\u6237\u53ef\u4ee5\u4e3a\u6240\u6b32\u4e3a,\u53ef\u4e0d\u7528\u7ba1\u6587\u4ef6\u6743\u9650\u662f\u548b\u6837\u7684.. \u6240\u4ee5,\u53ef\u4ee5\u53d1\u73b0root\u7528\u6237\u5bf9a.txt\u6587\u4ef6\u4f7f\u7528\u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u7684\u547d\u4ee4\u4e0d\u4f1a\u6709\u6743\u9650\u95ee\u9898. \u800c\u666e\u901a\u7528\u6237dc\u4f7f\u7528\u5c31\u4f1a\u8bf4\u6743\u9650\u4e0d\u591f. \u56e0\u4e3adc\u5bf9\u6587\u4ef6a.txt\u6ca1\u6709\u4efb\u4f55\u6743\u9650! \u4f46\u4e0d\u7ba1\u662froot\u8fd8\u662fdc\u90fd\u53ef\u4ee5\u901a\u8fc7vim\u547d\u4ee4\u8fdb\u5165\u6b64\u6587\u4ef6.. \u4f46\u662f\u666e\u901a\u7528\u6237dc\u8fdb\u5165\u540e\u663e\u793a\u7684\u662f\u7a7a\u767d,\u4e0d\u4f1a\u6709\u4efb\u4f55\u5185\u5bb9\uff01\uff01 [ root@localhost mnt ] # touch a.txt [ root@localhost mnt ] # echo 111 > a.txt [ root@localhost mnt ] # ll \u603b\u7528\u91cf 4 -rw-r--r-- 1 root root 4 7\u6708 7 18 :15 a.txt [ root@localhost mnt ] # chmod 000 a.txt [ root@localhost mnt ] # ll \u603b\u7528\u91cf 4 ---------- 1 root root 4 7\u6708 7 18 :15 a.txt \u25b2 \u666e\u901a\u7528\u6237dc # \u53ef\u4ee5\u53d1\u73b0a.txt\u6587\u4ef6\u662f\u6709\u5185\u5bb9\u7684 [ dc@localhost mnt ] $ ll \u603b\u7528\u91cf 4 ---------- 1 root root 4 7\u6708 7 18 :15 a.txt [ dc@localhost mnt ] $ cat a.txt cat: a.txt: \u6743\u9650\u4e0d\u591f [ dc@localhost mnt ] $ tail a.txt tail: \u65e0\u6cd5\u6253\u5f00 \"a.txt\" \u8bfb\u53d6\u6570\u636e: \u6743\u9650\u4e0d\u591f # \u4f46\u901a\u8fc7vim\u6253\u5f00\u5565\u4e5f\u6ca1\u6709 # Ps: \u82e5root\u7528\u6237\u4fee\u6539a.txt\u6587\u4ef6\u6743\u9650\u4e3achmod o=r a.txt; # dc\u7528\u6237\u662f\u53ef\u4ee5\u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u7684,vim\u8fdb\u5165\u540e\u4f1a\u663e\u793a\u6587\u4ef6\u5168\u90e8\u5185\u5bb9,\u4f46\u4fee\u6539\u5565\u7684\u4e0d\u4f1a\u6210\u529f.\u6743\u9650\u4e0d\u591f. [ dc@localhost mnt ] $ vim a.txt \u8bd5\u56fe\u63d2\u5165\u5185\u5bb9\u540e,\u53d1\u73b0\u53ea\u80fd :q! \u5176\u4f59\u7684\u90fd\u65e0\u6548.. \u8868\u660e\u666e\u901a\u7528\u6237dc\u538b\u6839\u5c31\u5bf9\u6b64\u6587\u4ef6\u4e0d\u80fd\u9020\u6210\u4efb\u4f55\u5f71\u54cd. \u25b2 root\u7528\u6237 [ root@localhost mnt ] # cat a.txt 111 [ root@localhost mnt ] # vim a.txt \u63d2\u5165\u5185\u5bb9222\u540e,\u4f7f\u7528 :wq! \u5f3a\u5236\u4fdd\u5b58\u9000\u51fa. [ root@localhost mnt ] # cat a.txt 111 222 [ root@localhost mnt ] # ll \u603b\u7528\u91cf 4 ---------- 1 root root 8 7\u6708 7 18 :21 a.txt","title":"\u4fdd\u5b58\u9000\u51fa"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_11","text":"% 1,3 ,3 1,$ s/\u88ab\u66ff\u6362/\u66ff\u6362\u6210/gi 111111egon1111 egon222222 EGON 22eGoN 33333 egon33333 egon333 444xxx444xxxxx 55555xxx 6666egon666 #77777777 #88888888 \u6572\u9ed1\u677f !! \u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53bb\u5168\u6587\u5339\u914d\u6211\u4eec\u8981\u66ff\u6362\u7684\u6587\u672c\uff01\uff01 (egon ^egon egon$) \u25bc \u5c06\u6587\u4ef6\u4e2d\u7684\u5355\u8bcdegon(\u5ffd\u7565\u5927\u5c0f\u5199,\u9ed8\u8ba4\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684)\u5168\u90e8\u66ff\u6362\u6210yyds egon222222 EGON 22eGoN ------> yyds222222 yyds 22yyds :% s/egon/yyds/gi \u89e3\u6790: % \u4ee3\u8868\u6240\u6709\u884c; s\u66ff\u6362; /\u5206\u9694\u7b26(\u7528#\u3001@\u90fd\u53ef\u4ee5); \u82e5\u4e0d\u52a0g,\u5219\u53ea\u4f1a\u66ff\u6362\u6bcf\u4e00\u884c\u7b2c\u4e00\u4e2a\u5339\u914d\u5230\u7684egon.. \u82e5\u52a0g\u4ee3\u8868\u6bcf\u4e00\u884c\u4e2d\u6240\u6709\u7684egon\u90fd\u8981\u66ff\u6362\u6389. \u6709\u70b9\u6b63\u5219\u91cc\u8d2a\u5a6a\u6a21\u5f0f\u90a3\u5473\uff01 \u52a0i\u4ee3\u8868\u5ffd\u7565\u5927\u5c0f\u5199\uff01 Ps: \u4e5f\u53ef\u4ee5\u901a\u8fc7 :set ic ; :% s/egon/yyds/g \u8fd9\u4e24\u6761\u547d\u4ee4\u8fbe\u5230\u540c\u6837\u7684\u6548\u679c\uff01\uff01 \u25bc \u5c06\u6587\u4ef6\u5355\u72ec\u67d0\u4e00\u884c(eg \u7b2c\u4e09\u884c)\u91cc\u7684egon\u5168\u90e8\u66ff\u6362\u6210EGON :3 s/egon/EGON/g \u25bc \u5c06\u6587\u4ef6\u8fde\u7eed\u51e0\u884c(eg \u7b2c\u4e00\u884c\u5230\u7b2c\u56db\u884c; \u7b2c\u4e09\u884c\u5230\u6700\u540e\u4e00\u884c)\u91cc\u7684egon\u5168\u90e8\u66ff\u6362\u6210EGON :1,4 s/egon/EGON/g ; :,4 s/egon/EGON/g \u4e0d\u6307\u5b9a\u5f00\u5934,\u9ed8\u8ba4\u5f00\u5934\u5c31\u662f1 :3,$ s/egon/EGON/g \u25bc \u5c06\u5168\u6587\u4e2d\u5904\u4e8e\u6bcf\u884c\u5f00\u5934\u7684egon\u66ff\u6362\u6210EGON egon222222 egon -----> EGON222222 egon :% s/^egon/EGON/g \u5176\u5b9e\u8fd9\u79cd\u9700\u6c42\u4e0b,\u52a0\u4e0d\u52a0g\u6548\u679c\u90fd\u4e00\u6837.. \u25bc \u5c06\u5168\u6587\u4e2d\u5904\u4e8e\u6bcf\u884c\u7ed3\u5c3e\u7684egon\u66ff\u6362\u6210EGON egon222222 egon -----> egon222222 EGON :% s/egon$/EGON/ \u25bc \u53ef\u4ee5\u8fbe\u5230\u6279\u91cf\u5220\u9664\u6ce8\u91ca\u7684\u76ee\u7684 :4,8 s/^#// \u5c064-8\u884c\u7684\u4ee5\uff03\u5f00\u5934\u7684\u66ff\u6362\u4e3a\u7a7a Ps: \u6587\u4ef6\u4e2d\u51718\u884c,\u82e5\u5199\u7684\u662f 4,9 \u4f1a\u62a5\u9519 E16:\u65e0\u6548\u7684\u8303\u56f4","title":"\u66ff\u6362\u5355\u8bcd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_12","text":"\u25bc \u5c06\u6587\u4ef63\u52305\u884c\u7684\u5185\u5bb9\u62f7\u8d1d\u4e00\u4efd\u53e6\u5b58\u4e3aa.txt \u82e5a.txt\u5df2\u7ecf\u4e8b\u5148\u5b58\u5728,\u5219\u9700\u8981 w! \u5f3a\u5236\u53e6\u5b58\u4e3a.. \u662f\u8986\u76d6\u7684\u6548\u679c! :3,5 w /mnt/a.txt :3,5 w! /mnt/a.txt \u25bc \u5c06\u5176\u4ed6\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u5230\u5f53\u524d\u6587\u4ef6\u5149\u6807\u6240\u5728\u884c\u7684\u4e0b\u4e00\u884c.. :r /mnt/a.txt","title":"\u8bfb\u5165\u6587\u4ef6/\u5199\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_13","text":":set nu \u8bbe\u7f6e\u884c\u53f7 :set nonu \u53d6\u6d88\u8bbe\u7f6e\u884c\u53f7 :set ic \u5ffd\u7565\u5927\u5c0f\u5199 :set noic \u53d6\u6d88\u5ffd\u7565\u5927\u5c0f\u5199 :set ai \u81ea\u52a8\u7f29\u8fdb (\u56de\u8f66\u540e\u7684\u6362\u884c\u4fdd\u6301\u8ddf\u4e0a\u4e00\u884c\u76f8\u540c\u7684\u7f29\u8fdb) :set noai \u53d6\u6d88\u81ea\u52a8\u7f29\u8fdb \u4e0a\u8ff0\u7684\u4fee\u6539\u90fd\u662f\u4e34\u65f6\u4fee\u6539,\u60f3\u8981\u6c38\u4e45\u4fee\u6539,\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u25b3 \u5bf9\u6240\u6709\u7528\u6237\u751f\u6548 vim /etc/vimrc \u6309G\u8df3\u5230\u6587\u4ef6\u6700\u540e\u4e00\u884c \u6839\u636e\u9700\u6c42\u52a0\u5165\u4e00\u4e0b\u4e09\u884c\u6587\u672c. set nu set ic set ai \u25b3 \u53ea\u5bf9\u5f53\u524d\u7684\u7528\u6237\u751f\u6548 vim ~/.vimrc \u82e5\u6b64\u6587\u4ef6\u6ca1\u6709,\u5728vim\u6253\u5f00\u65f6\u4f1a\u81ea\u52a8\u521b\u5efa\uff01\u540c\u7406,\u6839\u636e\u9700\u6c42\u52a0\u5165\u4e09\u884c\u6587\u672c..","title":"\u8bbe\u7f6e\u73af\u5883"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_14","text":": 3,7 d \u5220\u9664\u6587\u672c3-7\u884c\u5185\u5bb9 :2,4 co 11 \u5c062\u52304\u884c\u7684\u5185\u5bb9\u590d\u5236\u5230\u7b2c11\u884c\u7684\u4e0b\u9762","title":"\u5176\u4ed6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_15","text":"diff < \u5c0f\u4e8e\u53f7\u4ee3\u8868\u5de6\u8fb9\u8fb9\u6587\u4ef6 > \u5927\u4e8e\u53f7\u4ee3\u8868\u53f3\u8fb9\u6587\u4ef6 diff - u \u5236\u4f5c\u8865\u4e01\u6587\u4ef6, \u901a\u5e38\u4f1a\u5236\u4f5c\u4e24\u4e2a\u8865\u4e01\u6587\u4ef6! patch \u6253\u8865\u4e01 vimdiff \u4ee5vim\u65b9\u5f0f\u6253\u5f00\u4e24\u4e2a\u6587\u4ef6\u5bf9\u6bd4, \u9ad8\u4eae\u663e\u793a\u4e0d\u540c\u7684\u5185\u5bb9 \u6570\u636e\u51c6\u5907 [ root@localhost mnt ] # cat a.txt 111 22 [ root@localhost mnt ] # cat b.txt 111 222 333","title":"\u6587\u4ef6\u5bf9\u6bd4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#diff","text":"[ root@localhost mnt ] # diff a.txt b.txt 2c2,3 < 22 --- > 222 > 333 \u25b3 patch.diff \"\u8865\u4e01\u6587\u4ef6\" \u4fdd\u5b58\u4e24\u4e2a\u6587\u4ef6\u4e0d\u4e00\u6837\u7684\u5730\u65b9! ( \u6587\u4ef6\u540d\u968f\u4fbf\u547d\u540d ) \u8fd9\u4e2a\u8865\u4e01\u6587\u4ef6\u662f\u4ee5\u653e\u5728\u540e\u9762\u7684\u90a3\u4e2a\u6587\u4ef6 ( \u8fd9\u91cc\u662fb.txt ) \u4e3a\u51c6\u7684. \u6240\u4ee5\u8fd9\u4e2a\u8865\u4e01\u6587\u4ef6\u4f1a\u7528\u4e8e\u7ed9\u524d\u9762\u90a3\u4e2a\u6587\u4ef6 ( \u8fd9\u91cc\u662fa.txt ) \u6253\u8865\u4e01. [ root@localhost mnt ] # diff -u a.txt b.txt > patch.diff [ root@localhost mnt ] # cat patch.diff --- a.txt 2022 -07-12 17 :04:44.339129438 +0800 +++ b.txt 2022 -07-12 17 :04:46.035147935 +0800 @@ -1,2 +1,3 @@ 111 -22 +222 +333 \u25b3 \u5b89\u88c5patch\u5305 -- \u7528\u4e8e\u6253\u8865\u4e01 \u901a\u5e38\u5728\u6253\u8865\u4e01\u4e4b\u524d\u4f1a\u5236\u4f5c\u4e24\u4e2a\u8865\u4e01\u6587\u4ef6,\u4fbf\u4e8e\u6587\u4ef6\u6253\u597d\u8865\u4e01\u540e\u56de\u6eaf! diff -u a.txt b.txt > patch_b.diff diff -u b.txt a.txt > patch_a.diff \u8fd9\u6837\u7684\u8bdd,a.txt\u6587\u4ef6\u901a\u8fc7patch_b.diff\u6253\u597d\u8865\u4e01\u540e,\u8fd8\u53ef\u4ee5\u901a\u8fc7patch_a.diff\u8fd8\u539f! [ root@localhost mnt ] # yum install patch -y # \u7ed9a.txt\u6253\u8865\u4e01 a.txt\u4f1a\u53d8\u5f97\u8ddfb.txt\u4e00\u6837 [ root@localhost mnt ] # patch a.txt patch.diff patching file a.txt [ root@localhost mnt ] # cat a.txt 111 222 333","title":"diff"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#vimdiff","text":"[ root@localhost mnt ] # vimdiff a.txt b.txt \u8fd8\u6709 2 \u4e2a\u6587\u4ef6\u7b49\u5f85\u7f16\u8f91 Ps : control + ww \u5728\u547d\u4ee4\u884c\u6a21\u5f0f\u4e0b\u5b9e\u73b0\u4e24\u4e2a\u6587\u4ef6\u4e4b\u95f4\u5207\u6362! \u25a0 \u540c\u65f6\u7f16\u8f91\u591a\u4e2a\u6587\u4ef6! vim -o \u6587\u4ef61 \u6587\u4ef62 # \u6c34\u5e73\u5206\u9694 vim -O \u6587\u4ef61 \u6587\u4ef62 # \u5782\u76f4\u5206\u9694 \u547d\u4ee4\u884c\u6a21\u5f0f\u4e0b\u4f7f\u7528ctrl + ww\u5207\u6362","title":"vimdiff"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#vivim","text":"\u89e3\u51b3vim\u975e\u6b63\u5e38\u9000\u51fa\u65f6\u6587\u4ef6\u4fdd\u5b58\u7684\u95ee\u9898\uff01 \u7ed3\u5408 5_\u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf \u4e2d\u7684Q/A\u5c0f\u8282\u8f85\u52a9\u7406\u89e3.. \u6709\u5fc5\u8981\u518d\u6b21\u8bf4\u660e: vim\u7684\u539f\u7406\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4e00\u4e0b\u5b50\u4ece\u786c\u76d8\u5168\u90e8\u8bfb\u5230\u5185\u5b58\u4e2d,\u5728\u5185\u5b58\u4e2d\u6539\u5b8c\u540e,\u518d\u4e00\u6b21\u6027\u5168\u90e8\u8986\u76d6\u786c\u76d8\u7684\u539f\u6587\u4ef6.. Vim\u975e\u6b63\u5e38\u9000\u51fa, \u7f16\u8f91a.txt\u6587\u4ef6\u7684\u65f6\u5019\u65ad\u5f00\u8fde\u63a5(\u65ad\u7f51\u6216\u65ad\u7535), \u91cd\u65b0\u8fde\u63a5\u670d\u52a1\u5668, \u518d\u6b21vim\u7f16\u8f91\u6587\u4ef6. \u4f1a\u63d0\u793a\u53d1\u73b0\u4ea4\u6362\u6587\u4ef6... Q\u9000\u51fa. \u25b3 \u4e0d\u60f3\u8fd8\u539f\u975e\u6b63\u5e38\u9000\u51fa\u65f6\u7684\u4fee\u6539,\u5220\u9664\u4ea4\u6362\u6587\u4ef6\u5373\u53ef rm -rf /mnt/.a.txt.swp \u25b3 \u8fd8\u539f\u975e\u6b63\u5e38\u9000\u51fa\u65f6\u7684\u4fee\u6539,\u547d\u4ee4\u884c\u8f93\u5165\u547d\u4ee4 vim -r a.txt \u7136\u540e\u8fdb\u884c\u7f16\u8f91.. \u518d\u6b21\u91cd\u65b0\u6253\u5f00\u65f6,\u8fd8\u63d0\u793a\u53d1\u73b0\u4ea4\u6362\u6587\u4ef6,\u76f4\u63a5\u6309d\u5220\u9664\u4ea4\u6362\u6587\u4ef6,\u518d\u8fdb\u5165\u5373\u53ef..","title":"vi/vim\u6267\u884c\u8fc7\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#sed","text":"stream editor \u6d41\u5f0f\u7f16\u8f91\u5668 \u4e3b\u8981\u64c5\u957f\u5bf9\u6587\u4ef6\u7684\u7f16\u8f91\u64cd\u4f5c, \u6211\u4eec\u53ef\u4ee5\u4e8b\u5148\u5b9a\u5236\u597d\u7f16\u8f91\u6587\u4ef6\u7684\u6307\u4ee4, \u7136\u540e\u8ba9sed\u81ea\u52a8\u5b8c\u6210\u5bf9\u6587\u4ef6\u7684\u6574\u4f53\u7f16\u8f91","title":"sed"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#sed_1","text":"Q: \u4e3a\u4f55sed\u4f1a\u79f0\u4f5c\u6d41\u5f0f/sed\u6d41\u5f0f\u7684\u539f\u7406/sed\u6d41\u5f0f\u7f16\u8f91\u5668\u7684\u6574\u4f53\u6d41\u7a0b\uff1f A: \u4e00\u6761sed\u547d\u4ee4\u662f\u4e00\u4e2a\u8f6f\u4ef6,\u4e00\u65e6\u8fd0\u884c\u8d77\u6765\u5c31\u4f1a\u542f\u7528\u4e00\u4e2a\u8fdb\u7a0b,\u8fdb\u7a0b\u4f1a\u5360\u7528\u4e00\u5757\u5185\u5b58\u7a7a\u95f4; \u8fd9\u5757\u5185\u5b58\u4f1a\u81ea\u52a8\u8fdb\u884c\u4e00\u4e2a\u9694\u65ad, \u5de6\u8fb9\u7684\u79f0\u4e3a\u6a21\u5f0f\u7a7a\u95f4\u3001\u53f3\u8fb9\u7684\u79f0\u4e3a\u4fdd\u6301\u7a7a\u95f4( \u4fdd\u6301\u7a7a\u95f4\u6682\u4e14\u4e0d\u8ba8\u8bba ); sed\u5904\u7406\u7684\u6587\u4ef6\u662f\u653e\u5728\u786c\u76d8\u4e0a\u7684,sed\u4f1a\u4e00\u884c\u884c\u7684\u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9\u5230\u6a21\u5f0f\u7a7a\u95f4; \u4e00\u884c\u884c\u7684\u6309\u7167\u4e8b\u5148\u5236\u5b9a\u7684\u89c4\u5219( \u5b9a\u4f4d+\u5177\u4f53\u64cd\u4f5c )\u5904\u7406,\u5904\u7406\u5b8c\u540e\u82e5\u6a21\u5f0f\u7a7a\u95f4\u6709\u5185\u5bb9,\u4f1a\u6d41\u5230\u5c4f\u5e55\u4e2d\u8fdb\u884c\u663e\u793a. \u5177\u4f53\u6765\u8bf4: step 1> \u82e5\u6b64\u884c\u4e0d\u7b26\u5408\u5b9a\u4f4d,\u5c06\u4e0d\u4f1a\u8fdb\u884c\u4efb\u4f55\u5904\u7406; \u82e5\u6b64\u884c\u7b26\u5408\u5b9a\u4f4d,\u5c06\u4f1a\u6309\u7167\u5177\u4f53\u64cd\u4f5c\u8fdb\u884c\u5904\u7406; ( \u6240\u8c13\u7684\u5904\u7406 \"p\" \u5c06\u6240\u6709\u884c\u6253\u5370\u5230\u5c4f\u5e55\u4e2d. \"1,2s/egon/BIGEGON/g'\" \u5bf91\u52302\u884c\u7684\u5185\u5bb9\u8fdb\u884c\u66ff\u6362 ) step 2> \u4e0d\u7ba1\u662f\u5426\u7b26\u5408\u5b9a\u4f4d,\u6700\u540e\u82e5\u6a21\u5f0f\u7a7a\u95f4\u91cc\u6709\u5185\u5bb9\u5c06\u4f1a\u8fdb\u884c \u9ed8\u8ba4\u8f93\u51fa ,\u6d41\u5230\u5c4f\u5e55\u5f53\u4e2d! ( \u4e3a\u4f55\u8fd9\u6837\u8bf4,\u56e0\u4e3a\"d\"\u7684\u8bdd,\u76f4\u63a5\u5220\u9664,\u8fd9\u884c\u5185\u5bb9\u5c31\u4e0d\u4f1a\u7559\u5b58\u5728\u6a21\u5f0f\u7a7a\u95f4. ) Ps: \u4e0a\u8ff0\u8fc7\u7a0b\u4e0d\u4f1a\u6539\u53d8\u786c\u76d8\u4e2d\u539f\u6709\u6587\u4ef6\u7684\u5185\u5bb9!! \u9664\u975e\u7528\u4e86 -i \u9009\u9879","title":" sed\u7684\u6d41\u5f0f\u8fc7\u7a0b "},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#sedvim","text":"Q: \u4ec0\u4e48\u65f6\u5019\u7528sed? A: \u6210\u6279\u6b21\u7684\u5904\u7406; \u5904\u7406\u5927\u6587\u4ef6. 1> sed\u53ef\u4ee5\u628a\u5904\u7406\u6587\u4ef6\u7684\u89c4\u5219\u4e8b\u5148\u5199\u597d, \u7136\u540e\u7528\u540c\u4e00\u5957\u89c4\u5219\u7f16\u8f91\u591a\u4e2a\u6587\u4ef6; \u800cvim\u53ea\u80fd\u4e00\u4e2a\u4e00\u4e2a\u8fdb\u884c\u7f16\u8f91 2> sed\u5904\u7406\u6587\u4ef6,\u4e00\u6b21\u53ea\u5904\u7406\u4e00\u884c, \u5373\u540c\u4e00\u65f6\u95f4\u5185\u5b58\u4e2d\u53ea\u6709\u6587\u4ef6\u7684\u4e00\u884c\u5185\u5bb9 . \u65e0\u8bba\u6587\u4ef6\u591a\u5927,\u90fd\u4e0d\u4f1a\u5bf9\u5185\u5b58\u9020\u6210\u8fc7\u5927\u7684\u538b\u529b","title":"sed\u4e0evim\u5bf9\u6bd4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_16","text":"sed \u9009\u9879 \u89c4\u5219 \u6587\u4ef6\u8def\u5f84 [\u9009\u9879] -n \u53d6\u6d88\u9ed8\u8ba4\u8f93\u51fa -r \u652f\u6301\u6269\u5c55\u6b63\u5219\u5143\u5b57\u7b26 -i \u5c06\u5904\u7406\u89c4\u5219\u5e94\u7528\u5230 \u6587\u4ef6 \u5f53\u4e2d\u53bb,\u771f\u6b63\u7684\u5b8c\u6210\u4e86\u7f16\u8f91, \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u6210\u6539\u53d8\u4e86\u8f93\u51fa\u6d41\u5411. -i \u7684\u5e95\u5c42\u539f\u7406 : \u5c06\u672c\u5e94\u6253\u5370\u5230\u5c4f\u5e55\u7684\u5185\u5bb9\u5199\u5165\u4e86\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6,\u628a\u539f\u6587\u4ef6\u4e00\u5220,\u628a\u4e34\u65f6\u6587\u4ef6\u6539\u540d\u4e3a\u539f\u6587\u4ef6\u7684\u540d\u5b57, \u901f\u5ea6\u975e\u5e38\u5feb,\u770b\u6837\u5b50\u5c31\u50cf\u662f \u8986\u76d6 \u4e86\u539f\u6587\u4ef6. \u901a\u5e38\u4f1a\u5728\u8c03\u8bd5\u5b8c\u6bd5\u786e\u4fdd\u6ca1\u6709\u95ee\u9898\u540e\u518d\u52a0-i\u9009\u9879! [\u89c4\u5219] '\u5b9a\u4f4d/\u5339\u914d+\u547d\u4ee4/\u5177\u4f53\u64cd\u4f5c' \u4e0d\u5199\u5b9a\u4f4d\u4ee3\u8868\u5b9a\u4f4d\u6240\u6709\u884c \u884c\u5b9a\u4f4d 1 \u5b9a\u4f4d\u5230\u7b2c\u4e00\u884c 1,3 \u4ece\u7b2c1\u884c\u5230\u7b2c3\u884c \u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4f4d -- / / \u4e24\u4e2a\u5de6\u659c\u6760\u8fdb\u884c\u5305\u88f9. /egon/ \u5305\u542begon\u7684\u884c /^egon/ \u4ee5egon\u5f00\u5934\u7684\u884c /egon$/ \u4ee5egon\u7ed3\u5c3e\u7684\u884c \u6570\u5b57+\u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4f4d 1,8 1\u52308\u884c 1,/egon/ \u53d6\u4ece\u7b2c1\u884c\u5230\u9996\u6b21\u5339\u914d\u5230/egon/\u7684\u884c \u5177\u4f53\u64cd\u4f5c \u200b d \u200b p \u200b s/\u5339\u914d\u5185\u5bb9/\u66ff\u6362\u5185\u5bb9/gi -- s\u540e\u9762\u4e09\u4e2a\u5de6\u659c\u6760 Ps: \u547d\u4ee4\u53ef\u4ee5\u7528;\u53f7\u8fde\u63a5\u591a\u6761 \u5982 sed \"1d;3d;5d\" a.txt \u4ee3\u8868\u5220\u96641,3,5\u884c [ root@localhost mnt ] # cat b.txt egon1111 22222egon 3333egon33333 4444xxx44444 5555xxx55555xxxx555xxx 6666egon6666egon666egon 777Egon7777eGOn7777eGoN \u3010 ; \u5206\u53f7\u8fde\u63a5\u591a\u6761\u547d\u4ee4\u3011 \u25b2 \u5c06\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u548c\u7b2c\u4e09\u884c\u8fdb\u884c\u6253\u5370\u5904\u7406 [ root@localhost mnt ] # sed \"1p;3p\" b.txt egon1111 egon1111 22222egon 3333egon33333 3333egon33333 4444xxx44444 5555xxx55555xxxx555xxx 6666egon6666egon666egon 777Egon7777eGOn7777eGoN \u3010-n \u53d6\u6d88\u9ed8\u8ba4\u8f93\u51fa\u3011 [ root@localhost mnt ] # sed -n \"\" b.txt [ root@localhost mnt ] # sed -n \"1p;3p\" b.txt egon1111 3333egon33333 \u3010\u6b63\u5219\u5b9a\u4f4d\u3011 \u25b2 \u5220\u9664\u6587\u4ef6\u4e2d\u4ee5egon\u7ed3\u5c3e\u7684\u884c \u8fc7\u7a0b: \u7b2c\u4e00\u884c\u8fdb\u6765\u540e,\u6b63\u5219\u5b9a\u4f4d/egon$/\u5931\u8d25,\u76f4\u63a5\u9ed8\u8ba4\u8f93\u51fa ; \u7b2c\u4e8c\u884c\u8fdb\u6765\u540e,\u5b9a\u4f4d\u6210\u529f,\u6309\u7167\u5177\u4f53\u7684\u64cd\u4f5c\u6307\u4ee4d\u76f4\u63a5\u5e72\u6389,\u6ca1\u6709\u9ed8\u8ba4\u8f93\u51fa\u4e86.. \u5269\u4f59\u884c\u540c\u7406. [ root@localhost mnt ] # sed \"/egon$/d\" b.txt egon1111 3333egon33333 4444xxx44444 5555xxx55555xxxx555xxx 777Egon7777eGOn7777eGoN Ps: sed \"/^egon/p\" b.txt sed \"/egon/p\" b.txt sed \"1,/egon $ /d\" b.txt \u7b2c\u4e00\u884c\u5230\u9996\u6b21\u5b9a\u4f4d\u5230\u4ee5egon\u7ed3\u5c3e\u7684\u884c\u5168\u90e8\u5220\u9664 \u3010s\u66ff\u6362\u64cd\u4f5c\u3011 \u25cf \u4e0d\u5ffd\u7565\u5927\u5c0f\u5199,\u61d2\u60f0\u5339\u914d ( \u5f53\u524d\u8bfb\u5165\u6a21\u5f0f\u7a7a\u95f4\u7684\u884c\u4ece\u5de6\u5230\u53f3\u627e\u5230\u7b2c\u4e00\u4e2aegon\u5c31\u4e0d\u5f80\u540e\u9762\u627e\u4e86 ) [ root@localhost mnt ] # sed \"s/egon/EGON/\" b.txt EGON1111 22222EGON 3333EGON33333 4444xxx44444 5555xxx55555xxxx555xxx 6666EGON6666egon666egon 777Egon7777eGOn7777eGoN \u25cf \u4e0d\u5ffd\u7565\u5927\u5c0f\u5199,\u5168\u5c40\u5339\u914d [ root@localhost mnt ] # sed \"s/egon/EGON/g\" b.txt EGON1111 22222EGON 3333EGON33333 4444xxx44444 5555xxx55555xxxx555xxx 6666EGON6666EGON666EGON 777Egon7777eGOn7777eGoN \u25cf \u5ffd\u7565\u5927\u5c0f\u5199,\u5168\u5c40\u5339\u914d [ root@localhost mnt ] # sed \"s/egon/EGON/gi\" b.txt EGON1111 22222EGON 3333EGON33333 4444xxx44444 5555xxx55555xxxx555xxx 6666EGON6666EGON666EGON 777EGON7777EGON7777EGON \u3010sed\u4f7f\u7528\u7ba1\u9053\u5904\u7406\u5176\u4ed6\u547d\u4ee4\u7684\u7ed3\u679c\u3011 [ root@localhost mnt ] # ifconfig | sed \"s/ens33/eth0/\" eth0: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) ... ... ... [ root@localhost mnt ] # ifconfig | sed -i \"s/ens33/eth0/\" sed: \u6ca1\u6709\u8f93\u5165\u6587\u4ef6 # -i \u9009\u9879\u4f5c\u7528\u76ee\u6807\u662f\u6587\u4ef6","title":"\u547d\u4ee4\u4f7f\u7528"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#awk","text":"\u4e8b\u5b9e\u4e0aawk\u662f\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00,\u53ef\u4ee5\u72ec\u7acb\u5b8c\u6210\u5f88\u5f3a\u5927\u7684\u64cd\u4f5c.. \u4e3b\u8981\u64c5\u957f\u5904\u7406\u6709\u89c4\u5f8b\u7684\u6587\u672c(eg /etc/passwd ), \u5bf9\u5176\u505a\u4e00\u4e9b\u683c\u5f0f\u5316\u7684\u5904\u7406!","title":"awk"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_17","text":"awk \u9009\u9879 \"\u89c4\u5219\" \u6587\u4ef6\u8def\u5f84 awk\u4e0esed\u76f8\u6bd4, \u6ca1\u6709\u9ed8\u8ba4\u8f93\u51fa ; awk\u5f3a\u5927\u5728\u4e8e \u6bb5\u7684\u6982\u5ff5 (\u6bb5\u53ef\u4ee5\u5e94\u7528\u4e8e\u5b9a\u4f4d\u4ee5\u53ca\u5177\u4f53\u64cd\u4f5c\u7684\u547d\u4ee4). [\u9009\u9879] -F \u6307\u5b9a\u5206\u9694\u7b26,\u4e0d\u5199\u6b64\u9009\u9879\u9ed8\u8ba4\u5c31\u662f\u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26 [\u89c4\u5219] '\u5b9a\u4f4d+\u547d\u4ee4/\u5177\u4f53\u64cd\u4f5c' \u6ce8\u610f: \u89c4\u5219\u5f97\u7528 \u5355\u5f15\u53f7 \u5305\u88f9... \u6ca1\u6709\u5b9a\u4f4d\u5219\u4ee3\u8868\u5b9a\u4f4d\u6240\u6709\u884c \u884c\u5b9a\u4f4d NR == 1 \u4ee3\u8868\u5b9a\u4f4d\u5230\u7b2c\u4e00\u884c NR>=3&&NR<=5 \u4ee3\u8868\u5b9a\u4f4d\u5230\u7b2c\u4e09\u884c\u5230\u7b2c\u4e94\u884c &&\u5e76\u4e14 NR<=3||NR>=8 \u4ee3\u8868\u5b9a\u4f4d\u5230\u7b2c\u4e09\u884c\u5230\u7b2c\u4e94\u884c ||\u6216\u8005 \u6b63\u5219\u8868\u8fbe\u5f0f\u5b9a\u4f4d -- sed\u53ef\u4ee5\u7684awk\u4e5f\u53ef\u4ee5 $5 ~ /root/ \u6458\u53d6\u8bfb\u5165\u5185\u5b58\u7684\u884c\u7684\u7b2c6\u6bb5\u8fdb\u884c\u6b63\u5219\u5b9a\u4f4d,\u82e5\u7b2c5\u6bb5\u7684\u5185\u5bb9\u5305\u542broot\u5219\u5b9a\u4f4d\u6210\u529f $5 !~ /root/ \u5b9a\u4f4d\u7b2c5\u6bb5\u4e0d\u5305\u542broot\u7684\u884c $1==\"root\" \u6bcf\u4e00\u884c\u8fdb\u6765\u540e,\u53ea\u6bd4\u8f83\u7b2c\u4e00\u6bb5. \u6ce8\u610froot\u7528\u53cc\u5f15\u53f7\u5305\u88f9\u8d77\u6765\u4e86\u54e6! \u200b \u547d\u4ee4/\u5177\u4f53\u64cd\u4f5c {print $3,$5} \u6253\u5370\u5b9a\u4f4d\u7684\u884c\u4ee5\u6307\u5b9a\u5206\u9694\u7b26\u5206\u9694\u7684\u7b2c3\u6bb5\u548c\u7b2c5\u6bb5\u7684\u5185\u5bb9 awk\u5185\u7f6e\u7684\u53d8\u91cf NR \u8bfb\u5165\u7684\u662f\u7b2c\u4e00\u884c,NR\u7684\u503c\u4e3a1;\u8bfb\u5165\u7684\u662f\u7b2cn\u884c,NR\u7684\u503c\u4e3an; $0 \u4e00\u6574\u884c\u7684\u5185\u5bb9 NF \u4ee5-F\u5206\u9694\u7b26\u5206\u9694\u7684\u6bb5\u6570","title":"\u547d\u4ee4\u6784\u6210"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_18","text":"[ root@localhost mnt ] # head -10 /etc/passwd > test.txt [ root@localhost mnt ] # ls test.txt [ root@localhost mnt ] # cat test.txt root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin operator:x:11:0:operator:/root:/sbin/nologin step1: awk\u4f1a\u8bfb\u53d6\u6587\u4ef6\u7684\u4e00\u884c\u5185\u5bb9\u7136\u540e\u8d4b\u503c\u7ed9 \\(0 step2: \u7136\u540eawk\u4f1a\u4ee5-F\u6307\u5b9a\u7684\u5206\u9694\u7b26\u5c06\u8be5\u884c\u5207\u5206\u6210n\u6bb5,\u6700\u591a\u53ef\u4ee5\u8fbe\u5230100\u6bb5,\u7b2c\u4e00\u6bb5\u7ed9\\) 1,\u7b2c\u4e8c\u6bb5\u7ed9$2,\u4ee5\u6b64\u7c7b\u63a8 step3: print\u8f93\u51fa\u8be5\u884c\u7684\u7b2c\u4e00\u6bb5\u548c\u7b2c\u4e09\u6bb5 step4: \u91cd\u590d\u6b65\u9aa41,2,3\u76f4\u5230\u6587\u4ef6\u5185\u5bb9\u8bfb\u5b8c Ps \u6b64\u5904\u5b9a\u4f4d\u7684\u662f\u6240\u6709\u884c,\u6240\u4ee5\u6bcf\u884c\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u7ecf\u5386\u4e0a\u8ff0\u6d41\u7a0b.. ( \u53ea\u4f1a\u5bf9\u5b9a\u4f4d\u7684\u884c\u8fdb\u884c\u5177\u4f53\u7684\u64cd\u4f5c!! ) [ root@localhost mnt ] # awk -F: '{print $1,$3}' test.txt root 0 bin 1 daemon 2 adm 3 lp 4 sync 5 shutdown 6 halt 7 mail 8 operator 11","title":"\u5de5\u4f5c\u6d41\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_19","text":"\u25b2 \u5b9a\u4f4d\u6587\u4ef6\u7684\u7b2c\u4e09\u884c [ root@localhost mnt ] # awk -F: 'NR==3{print $1,$3}' test.txt daemon 2 # \u7b49\u540c\u4e8e sed -n '3p' test.txt [ root@localhost mnt ] # awk -F: 'NR==3{print $0}' test.txt daemon:x:2:2:daemon:/sbin:/sbin/nologin \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e09\u884c\u5230\u7b2c\u4e94\u884c [ root@localhost mnt ] # awk -F: 'NR>=3&&NR<=5{print $1,$3}' test.txt daemon 2 adm 3 lp 4 \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u884c\u53f7\u5c0f\u4e8e\u7b49\u4e8e3\u6216\u8005\u5927\u4e8e\u7b49\u4e8e8\u7684\u884c [ root@localhost mnt ] # awk -F: 'NR<=3||NR>=8{print $1,$3}' test.txt root 0 bin 1 daemon 2 halt 7 mail 8 operator 11 \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u76843\u30015\u30017\u884c [ root@localhost mnt ] # awk -F: 'NR==3||NR==5||NR==7{print $1,$3}' test.txt daemon 2 lp 4 shutdown 6","title":"\u884c\u5b9a\u4f4d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_20","text":"\u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u4ee5nologin\u7ed3\u5c3e\u7684\u884c [ root@localhost mnt ] # awk -F: '/nologin$/{print $1}' test.txt bin daemon adm lp mail operator \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: '/root/{print $0}' test.txt root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7b2c5\u6bb5\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: '$5~/root/{print $0}' test.txt root:x:0:0:root:/root:/bin/bash \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7b2c5\u6bb5\u4e0d\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: '$5!~/root/{print $0}' test.txt bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin operator:x:11:0:operator:/root:/sbin/nologin \u25b2 \u5b9a\u4f4d\u6587\u4ef6\u4e2d\u7b2c1\u6bb5\u4e3aroot\u7684\u884c [ root@localhost mnt ] # awk -F: '$1==\"root\"{print $0}' test.txt root:x:0:0:root:/root:/bin/bash \u25b2 \u7efc\u5408\u8003\u5bdf: \u5b9a\u4f4d\u6587\u4ef6\u7b2c1\u52304\u884c\u4e14\u7b2c5\u6bb5\u4e0d\u5305\u542broot\u7684\u884c [ root@localhost mnt ] # awk -F: 'NR>=1&&NR<=4&&$5!~/root/{print $0}' test.txt bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin","title":"\u6b63\u5219\u5b9a\u4f4d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#_21","text":"[ root@localhost mnt ] # cat a.txt a b c d e f g h i g k l [ root@localhost mnt ] # awk -F\" \" '{print $1,$2}' a.txt a b d e h i [ root@localhost mnt ] # awk '{print $1,$2}' a.txt a b d e h i \u25b2 \u53d6\u7b2c\u4e00\u5757\u7f51\u5361\u7684IP\u5730\u5740 [ root@localhost mnt ] # ifconfig ens33: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) ... ... ... [ root@localhost mnt ] # ifconfig | awk 'NR==2{print $2}' 172 .16.150.131 [ root@localhost mnt ] # ifconfig | awk 'NR==2{print $2}' | awk -F. '{print $1}' 172","title":"\u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#nf","text":"\u25b2 \u6bcf\u4e00\u884c\u7684\u5206\u9694\u6bb5\u6570\u4e0d\u4e00\u6837,\u6253\u5370\u884c\u53f7\u548c\u6bcf\u884c\u5206\u9694\u7684\u6bb5\u6570\u4ee5\u53ca\u6bcf\u884c\u7684\u6700\u540e\u4e00\u6bb5\u548c\u5012\u6570\u7b2c\u4e8c\u6bb5\u7684\u5185\u5bb9 [ root@localhost mnt ] # cat b.txt a:b:c d:e f:g:h:i:j k:l:M:n o:p [ root@localhost mnt ] # awk -F: '{print NR,NF,$NF,$(NF-1)}' b.txt 1 3 c b 2 2 e d 3 5 j i 4 4 n M 5 2 p o","title":"NF\u7684\u5999\u7528"},{"location":"1_linux%E5%9F%BA%E7%A1%80/3_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%9B%9B%E5%A4%A7%E6%A8%A1%E5%BC%8F/#grep","text":"grep\u66f4\u64c5\u957f\u8fc7\u6ee4\u5185\u5bb9, < grep\u6ca1\u6709\u884c\u5b9a\u4f4d\u7684\u6982\u5ff5,\u4f5c\u7528\u7684\u5c31\u662f\u6574\u4e2a\u6587\u4ef6! > grep \u9009\u9879 \"\u8fc7\u6ee4\u89c4\u5219/\u6b63\u5219\" \u6587\u4ef6\u8def\u5f84 [\u9009\u9879] -n \u5728\u8fc7\u6ee4\u51fa\u7684\u6bcf\u4e00\u884c\u524d\u9762\u52a0\u4e0a\u5b83\u5728\u6e90\u6587\u4ef6\u4e2d\u7684\u884c\u53f7 -i \u5ffd\u7565\u5927\u5c0f\u5199 -l \u5982\u679c\u6587\u4ef6\u7684\u67d0\u4e00\u884c\u7b26\u5408\u8fc7\u6ee4\u89c4\u5219, \u5219\u53ea\u5c06\u6587\u4ef6\u540d\u6253\u5370\u51fa\u6765, \u5931\u8d25\u5219\u4e0d\u6253\u5370 -r \u9012\u5f52\u6587\u4ef6\u5939\u91cc\u7684\u6587\u4ef6 Ps: \u901a\u5e38 -rl \u4e00\u8d77\u7528 grep -rl 'root' /etc \u67d0\u4e2a\u6587\u4ef6\u5939\u91cc\u6709\u4e00\u5806\u6587\u4ef6,\u5f53\u5fd8\u8bb0\u4e86\u67d0\u4e2a\u914d\u7f6e\u9879\u5728\u54ea\u4e2a\u6587\u4ef6\u91cc\u65f6\u53ef\u4ee5\u7528. -v \u8fc7\u6ee4\u6389 , \u5176\u4f59\u7684\u9009\u9879\u90fd\u662f\u8fc7\u6ee4\u51fa\u7b26\u5408\u89c4\u5219\u7684\u884c. [\u8fc7\u6ee4\u89c4\u5219] \u672c\u8d28\u5c31\u662f\u6b63\u5219, \u73b0\u76ee\u524d\u53ea\u9700\u8981\u638c\u63e1 /egon/ /^egon/ /egon$/ \u5373\u53ef. [ root@localhost opt ] # grep -rl 'egon' /etc /etc/udev/hwdb.bin [ root@localhost opt ] # grep -n 'bash$' /etc/passwd 1 :root:x:0:0:root:/root:/bin/bash 44 :onepiece:x:1000:1000:OnePiece:/home/onepiece:/bin/bash 45 :dc:x:1001:1001::/home/dc:/bin/bash [ root@localhost opt ] # ifconfig ens33 | grep 'netmask' inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 [ root@localhost opt ] # ps aux | grep \"ssh\" root 1093 0 .0 0 .0 112984 392 ? Ss 7\u670811 0 :00 /usr/sbin/sshd -D root 1881 0 .0 0 .0 72552 48 ? Ss 7\u670811 0 :06 /usr/bin/ssh-agent /bin... root 32633 0 .0 0 .2 163888 2004 ? Ss 10 :53 0 :04 sshd: root@pts/1 root 41008 0 .0 0 .0 112824 988 pts/1 R+ 22 :50 0 :00 grep --color = auto ssh # \u7b49\u540c\u4e8e ps aux | grep \"[s]sh\" [ root@localhost opt ] # ps aux | grep \"ssh\" | grep -v \"grep\" root 1093 0 .0 0 .0 112984 392 ? Ss 7\u670811 0 :00 /usr/sbin/sshd -D root 1881 0 .0 0 .0 72552 48 ? Ss 7\u670811 0 :06 /usr/bin/ssh-agent /bin... root 32633 0 .0 0 .2 163888 2004 ? Ss 10 :53 0 :04 sshd: root@pts/1 linux\u4e0a\u67e5\u770b\u6240\u6709\u7684\u8fdb\u7a0b ps aux ; \u5f3a\u5236\u6740\u6b7b\u67d0\u4e2a\u8fdb\u7a0b kill -9 \u8fdb\u7a0b\u53f7 ; windows\u4e0a\u67e5\u770b\u8fdb\u7a0b\u5e76\u8fc7\u6ee4 tasklist | findstr \"WeChat.exe\" ; \u6740\u6b7b\u8fdb\u7a0b taskkill /F /PID \u8fdb\u7a0b\u53f7 \u6587\u672c\u5904\u7406\u4e09\u5251\u5ba2 sed\u3001awk\u3001grep \u5728\u540e\u7eed\u7684shell\u7f16\u7a0b\u91cc\u4f1a\u8be6\u89e3\u5b83\u4ee8! (\u5982\u679c\u4f1a\u7cfb\u7edf\u5b66\u4e60shell\u7f16\u7a0b\u7684\u8bdd)","title":"grep"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/","text":"find \u00b6 \u6587\u4ef6\u67e5\u627e\u547d\u4ee4 find \u76ee\u5f55 [-name;-size;-maxdepth;-mtime;-user;-group;-type;-inum;-perm] ... \u627e\u5230\u540e\u7684\u5904\u7406\u52a8\u4f5c -print -ls -ok -delete -exec \u6309\u6587\u4ef6\u540d \u00b6 \u4f1a\u5728\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u9012\u5f52\u67e5\u627e.. \"ifcfg-ens33\" \u786e\u5207\u7684\u6587\u4ef6\u540d; \"ifcfg-*\" \u4ee5 *ifcfg- * \u5f00\u5934\u7684\u6587\u4ef6\u540d -i \u5ffd\u7565\u6587\u4ef6\u540d\u7684\u5927\u5c0f\u5199. [ root@localhost opt ] # find /etc -name \"ifcfg-ens33\" /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost opt ] # find /etc -name \"ifcfg-*\" /etc/sysconfig/network-scripts/ifcfg-lo /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost opt ] # find /etc -iname \"ifcfg-ens33\" /etc/sysconfig/network-scripts/ifcfg-ens33 \u6309\u6587\u4ef6\u5927\u5c0f \u00b6 find man ; / -size \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f find /etc -size 3M # \u6587\u4ef6\u5927\u4e8e3M \u7b49\u540c\u4e8e find /etc -size 3M -print find /etc -size +3M # \u6587\u4ef6\u7b49\u4e8e3M \u9ed8\u8ba4\u540e\u9762\u4f1a\u52a0 -print find /etc -size -3M # \u6587\u4ef6\u5c0f\u4e8e3M find /etc -size +3M -ls # \u627e\u5230\u6587\u4ef6\u540e -ls \u663e\u793a\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f \u3010\u4e86\u89e3\u3011 \u82e5\u67e5\u627e\u7684\u6587\u4ef6\u5927\u5c0f\u4ee5b\u4e3a\u5355\u4f4d,\u6ce8\u610f\u8fd9\u91cc\u7684b\u4e0d\u662f\u5b57\u8282\u4e4b\u610f,\u8fd9\u91cc\u76841b\u4e3a512\u4e2a\u5b57\u8282. \u4e0d\u5199\u5355\u4f4d,\u9ed8\u8ba4\u4e5f\u662f\u4ee5b\u4e3a\u5927\u5c0f\u5355\u4f4d. 512bytes\u5373\u673a\u68b0\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u7684\u6700\u5c0f\u5355\u4f4d1\u4e2a\u6247\u533a\u7684\u5927\u5c0f.. \u901a\u4fd7\u70b9,1b\u4e3a1\u4e2a\u6247\u533a. \u82e5\u67e5\u627e\u547d\u4ee4\u4e3a find . -size 2b \u90a3\u4e48\u53ea\u8981\u6b64\u6587\u4ef6\u5360\u636e\u4e24\u4e2a\u6247\u533a\u7684\u5927\u5c0f,\u5927\u5c0f\u5904\u4e8e512bytes-1024bytes\u90fd\u4f1a\u88ab\u67e5\u627e\u5230. \u3010\u6269\u5c55 \u8fdb\u884c\u9a8c\u8bc1\u3011\u9020\u4e00\u4e2a1024bytes\u548c513\u5b57\u8282\u7684\u6587\u4ef6 \"\"\" if inputfile\u8f93\u5165\u6587\u4ef6 /dev/zero\u6b64\u8bbe\u5907\u6587\u4ef6\u5f80\u5916\u4ea7\u751f0 of outputfile\u8f93\u51fa\u6587\u4ef6 bs blocksize\u5757\u5927\u5c0f \u9ed8\u8ba4\u5355\u4f4d\u662f\u5b57\u8282 count \u6709\u591a\u5c11\u5757 \u6ce8\u610f:\u8f93\u51fa\u6587\u4ef6\u662f\u6ca1\u6709\u5185\u5bb9\u7684,\u8fd9\u662f\u4e00\u79cd\u865a\u62df\u7684\u6982\u5ff5,\u53ea\u662f\u5c06\u8fd9\u4e2a\u6587\u4ef6\u586b\u5145\u5230\u6307\u5b9a\u5927\u5c0f. \"\"\" [ root@localhost opt ] # dd if=/dev/zero of=b.txt bs=1024 count=1 \u8bb0\u5f55\u4e861+0 \u7684\u8bfb\u5165 \u8bb0\u5f55\u4e861+0 \u7684\u5199\u51fa 1024\u5b57\u8282 ( 1 .0 kB ) \u5df2\u590d\u5236\uff0c0.00648155 \u79d2\uff0c158 kB/\u79d2 [ root@localhost opt ] # dd if=/dev/zero of=c.txt bs=513 count=1 \u8bb0\u5f55\u4e861+0 \u7684\u8bfb\u5165 \u8bb0\u5f55\u4e861+0 \u7684\u5199\u51fa 513\u5b57\u8282 ( 513 B ) \u5df2\u590d\u5236\uff0c0.000407585 \u79d2\uff0c1.3 MB/\u79d2 [ root@localhost opt ] # cat b.txt [ root@localhost opt ] # ll \u603b\u7528\u91cf 8 -rw-r--r-- 1 root root 1024 7\u6708 14 11 :07 b.txt -rw-r--r-- 1 root root 513 7\u6708 14 11 :11 c.txt [ root@localhost opt ] # find . -size 2 -ls 35589993 4 -rw-r--r-- 1 root root 1024 7\u6708 14 11 :07 ./b.txt 35589994 4 -rw-r--r-- 1 root root 513 7\u6708 14 11 :11 ./c.txt \u6587\u4ef6\u67e5\u627e\u6df1\u5ea6 \u00b6 \u9ed8\u8ba4\u4f1a\u9012\u5f52\u67e5\u627e\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5c42\u7ea7.. \u53ef\u901a\u8fc7 -maxdepth levels \u8bbe\u7f6e\u5c42\u7ea7. # /\u6839\u76ee\u5f55 ; -maxdepth 5\u5c42\u7ea7 ; -a\u5e76\u4e14 ; -name \"ifcfg-*\" \u6587\u4ef6\u540d # \u53ef\u4e0d\u52a0-a,\u9ed8\u8ba4\u5c31\u662f-a. \u5e76\u5217\u5173\u7cfb\u540c\u65f6\u6210\u7acb. # \u8865\u5145: -o \u6216\u8005. \u6761\u4ef6\u6210\u7acb\u4e00\u4e2a\u5373\u53ef [ root@localhost opt ] # find / -maxdepth 5 -a -name \"ifcfg-*\" /etc/sysconfig/network-scripts/ifcfg-lo /etc/sysconfig/network-scripts/ifcfg-ens33 \u6309\u65f6\u95f4\u67e5\u627e \u00b6 atime \u6700\u8fd1\u8bbf\u95ee; mtime \u6700\u8fd1\u66f4\u6539; ctime\u6700\u8fd1\u6539\u52a8. Ps: \u5728\u540e\u7eed\u6743\u9650\u90e8\u5206\u4f1a\u8be6\u7ec6\u8bb2\u89e3\u4ec0\u4e48\u7684\u53d8\u5316\u4f1a\u5bfc\u81f4\u8fd9\u4e09\u79cd\u65f6\u95f4\u7684\u6539\u52a8. find /etc -mtime +3 # \u4fee\u6539\u65f6\u95f4\u8d85\u8fc73\u5929 find /etc -mtime 3 # \u4fee\u6539\u65f6\u95f4\u7b49\u4e8e3\u5929 find /etc -mtime -3 # \u4fee\u6539\u65f6\u95f43\u5929\u4ee5\u5185 \u6309\u6587\u4ef6\u5c5e\u4e3b\u3001\u5c5e\u7ec4 \u00b6 find /home -user egon # \u5c5e\u4e3b\u662fegon\u7684\u6587\u4ef6 find /home -group it # \u5c5e\u7ec4\u662fit\u7ec4\u7684\u6587\u4ef6 find /home -user egon -group it \u7b49\u540c\u4e8e find /home -user egon -a -group it find /home -user egon -o -group it \"\"\" \u6bcf\u521b\u5efa\u4e00\u4e2a\u7528\u6237,\u4f1a\u5728/etc/passwd\u6dfb\u52a0\u7528\u6237\u7684\u5c5e\u4e3b\u4fe1\u606f,\u5728/etc/group\u6dfb\u52a0\u5c5e\u7ec4\u4fe1\u606f. \"\"\" find /home -nouser # \u7528\u6237\u8fd8\u5b58\u5728 \u4f46\u5728/etc/passwd\u4e2d\u5220\u9664\u4e86\u8bb0\u5f55 find /home -nogroup # \u7528\u6237\u8fd8\u5b58\u5728 \u4f46\u5728/etc/group\u4e2d\u5220\u9664\u4e86\u8bb0\u5f55 \u3010\u8865\u5145\u3011 ` id root ` \u67e5\u770broot\u7528\u6237\u7684\u4fe1\u606f [ root@localhost opt ] # id root uid = 0 ( root ) gid = 0 ( root ) \u7ec4 = 0 ( root ) [ root@localhost opt ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) \u6309\u6587\u4ef6\u7c7b\u578b \u00b6 find /dev -type f # f\u666e\u901a\u6587\u4ef6 find /dev -type d # d\u76ee\u5f55 find /dev -type l # l\u94fe\u63a5 find /dev -type b # b\u5757\u8bbe\u5907 find /dev -type c # c\u5b57\u7b26\u8bbe\u5907 find /dev -type s # s\u5957\u63a5\u5b57 \u901a\u5e38\u4ee5.sock\u7ed3\u5c3e find /dev -type p # p\u7ba1\u9053\u6587\u4ef6 inode\u53f7\u3001\u6587\u4ef6\u6743\u9650 \u00b6 find / -inum 1811 # \u6839\u636einode\u53f7\u67e5\u627e: -inum n find . -perm -600 -ls # \u6309\u6587\u4ef6\u6743\u9650: -perm find\u7ed3\u5408xargs \u00b6 xargs\u7684\u53c2\u8003\u6587\u6863: https://zhuanlan.zhihu.com/p/340804463 !!!!!! \u25b2 \u5220\u9664\u6ca1\u6709\u5c5e\u4e3b\u548c\u5c5e\u7ec4\u7684\u6587\u4ef6 \"\"\" rm -rf \u672c\u8eab\u662f\u4e0d\u652f\u6301\u4ece\u7ba1\u9053\u91cc\u53d6\u4e1c\u897f\u7684 \u9700\u8981\u52a0\u4e0a\u53c2\u6570 xargs \u4ece\u7ba1\u9053\u91cc\u8bfb\u53d6\u53c2\u6570\u4ea4\u7ed9 rm -rf\u547d\u4ee4 \"\"\" find /home -nouser -nogroup | xargs rm -rf \"\"\" \u7b49\u540c\u4e8e \u4ee5\u4e0b\u4e09\u6761\u547d\u4ee4\u7686\u53ef find /home -nouser -nogroup -delete find /home -nouser -nogroup -exec rm -rf {} \\; # \u975e\u4ea4\u4e92\u5f0f \u6ce8\u610f-exec\u614e\u7528\uff01 find /home -nouser -nogroup -ok rm -rf {} \\; # \u4ea4\u4e92\u5f0f(\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8981\u95ee\u662f\u5426\u786e\u5b9a\u5220\u9664) \u6ce8\u610f: \u8fd9\u91cc\u7684 cp rm \u6700\u540e \\; \u662f\u56fa\u5b9a\u5199\u6cd5. \"\"\" \u25b2 \u5c06\u627e\u5230\u7684\u6587\u4ef6\u79fb\u52a8\u3001\u590d\u5236\u3001\u66f4\u6539\u6743\u9650 \"\"\" xargs -I \u8d1f\u8d23\u4ece\u7ba1\u9053\u91cc\u628a\u7ed3\u679c\u62ff\u51fa\u6765,\u91c7\u96c6\u597d\u4e22\u5230{}\u82b1\u62ec\u53f7\u91cc \u8fd9\u6837\u7684\u8bdd,\u53ea\u8981\u7528\u82b1\u62ec\u53f7\u5c31\u4ee3\u8868\u7528\u7ba1\u9053\u5de6\u8fb9\u547d\u4ee4\u7684\u7ed3\u679c \"\"\" [ root@localhost opt ] # find /etc -name \"ifcfg-*\" | xargs -I {} cp -rf {} /opt [ root@localhost opt ] # ls ifcfg-ens33 ifcfg-lo \"\"\" \u7b49\u540c\u4e8e find /etc -name \" ifcfg-* \" -exec cp -rf {} /opt \\; \"\"\" find /test -name \"ifcfg-ens33\" | xargs -I {} mv {} /ttt find /ttt -name \"ifcfg*\" | xargs -I {} chmod 666 {} \u4e0a\u4f20\u4e0e\u4e0b\u8f7d \u00b6 wget\u4e0b\u8f7d \u00b6 wget -O \u672c\u5730\u8def\u5f84 \u8fdc\u7a0b\u5305\u94fe\u63a5\u5730\u5740 \u672a\u6307\u5b9a\u672c\u5730\u8def\u5f84,\u9ed8\u8ba4\u662f\u4e0b\u8f7d\u5230\u5f53\u524d\u76ee\u5f55;\u6307\u5b9a\u672c\u5730\u8def\u5f84\u53ef\u4ee5\u6307\u5b9a\u4e0b\u8f7d\u8f6f\u4ef6\u7684\u547d\u540d. Ps: \u6d4f\u89c8\u5668\u5728\u5b98\u7f51\u70b9\u51fb\u5c31\u80fd\u4e0b\u8f7d\u7684\u8f6f\u4ef6\u5305\u8fde\u63a5\u3001\u53f3\u952e\u590d\u5236\u7684\u56fe\u7247\u94fe\u63a5\u90fd\u80fd\u901a\u8fc7wget\u4e0b\u8f7d.. wget http://nginx.org/download/nginx-1.22.0.tar.gz wget -O /opt/nginx.tar.gz http://nginx.org/download/nginx-1.22.0.tar.gz [ root@localhost opt ] # wget -O ./1.jpg https://pics5.baidu.com/feed/6a600c338744ebf8ef9d643e6a39b9226159a708.jpeg?token=64b2865816ad2b3b0e49faf1fd43d8d5 [ root@localhost opt ] # ls 1 .jpg nginx-1.22.0.tar.gz nginx.tar.gz \"\"\" \u5982\u679cwget\u4e0b\u8f7d\u63d0\u793a\u65e0\u6cd5\u5efa\u7acbSSL\u8fde\u63a5,\u5219\u52a0\u4e0a\u9009\u9879--no-check-certificate!!! wget --no-check-certificate -O \u672c\u5730\u8def\u5f84 \u8fdc\u7a0b\u5305\u94fe\u63a5\u5730\u5740 \"\"\" curl\u6d4b\u8bd5 \u00b6 curl\u547d\u4ee4\u662f\u4e00\u4e2a\u5229\u7528URL\u89c4\u5219\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177. curl\u7684\u4e3b\u8981\u529f\u80fd\u7528\u4e8e\u6d4b\u8bd5\uff01 \u4e0b\u8f7d \uff1a curl -o \u6587\u4ef6\u8def\u5f84 \u8fdc\u7a0b\u94fe\u63a5 \u4e0b\u8f7d\u6210\u529f\u540e,\u6587\u4ef6\u4f1a\u4fdd\u5b58\u672c\u5730. <\u6d4b\u8bd5> \uff1a curl \u8fdc\u7a0b\u94fe\u63a5 \u4f1a\u663e\u793a\u4e0b\u8f7d\u7684\u5185\u5bb9,\u4f46 \u6587\u4ef6\u4e0d\u4f1a\u4fdd\u5b58\u5230\u672c\u5730 \uff01\u4e0d\u5360\u7528\u672c\u5730\u786c\u76d8\u7a7a\u95f4. [ root@localhost opt ] # curl -o ./2.jpg https://pics5.baidu.com/feed/6a600c338744ebf8ef9d643e6a39b9226159a708.jpeg?token=64b2865816ad2b3b0e49faf1fd43d8d5 [ root@localhost opt ] # curl -o /opt/nginx2.tar.gz http://nginx.org/download/nginx-1.22.0.tar.gz % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 1048k 100 1048k 0 0 191k 0 0 :00:05 0 :00:05 --:--:-- 232k [ root@localhost opt ] # ls 1 .jpg 2 .jpg nginx-1.22.0.tar.gz nginx2.tar.gz nginx.tar.gz \"\"\" \u5982\u679ccurl\u9047\u5230\u4e0b\u8f7d\u63d0\u793a\u65e0\u6cd5\u5efa\u7acbSSL\u94fe\u63a5,\u4f7f\u7528-k\u9009\u9879\u6216\u8005--insecure curl -k -o \u672c\u5730\u8def\u5f84 \u8fdc\u7a0b\u5305\u94fe\u63a5\u5730\u5740 \"\"\" \u3010\u538b\u529b\u6d4b\u8bd5\u3011\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e0d\u65ad\u7684\u5411\u767e\u5ea6\u7f51\u9875\u53d1\u9001\u8bf7\u6c42. \u6084\u6084\u8bdd: \u4e0a\u7f51\u5c31\u662f\u4e00\u4e2a\u4e0d\u65ad\u4e0a\u4f20 ( \u6ce8\u518c,\u652f\u4ed8 ) \u4e0b\u8f7d ( \u6253\u5f00\u7f51\u9875 ) \u7684\u8fc7\u7a0b! [ root@localhost opt ] # while true; do curl https://www.baidu.com/; done sz/rz \u00b6 \u9700\u8981\u5148\u4e0b\u8f7d\u4f9d\u8d56\u7684\u8f6f\u4ef6\u5305 yum install lrzsz -y sz,rz \u662fLinux/Unix\u540c Windows \u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\u7684\u547d\u4ee4\u884c\u5de5\u5177 \"\"\" sz linux ==> windows \u25b2 \u5c06linux\u670d\u52a1\u5668\u4e0a\u9009\u5b9a\u7684\u6587\u4ef6\u4e0b\u8f7d/\u53d1\u9001\u5230windows\u7aef \u6ce8\u610f\u54e6,\u6709\u4e2a\u524d\u63d0,\u4f7f\u7528\u6b64\u547d\u4ee4\u7684\u6240\u5728\u7ec8\u7aef\u8981\u6709\u5f39\u51fa\u56fe\u5f62\u7a97\u53e3\u7684\u673a\u5236. \u6240\u4ee5windows\u4e0a\u7684xshll\u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5,\u4f46linux\u670d\u52a1\u5668\u4e0a\u7684\u7ec8\u7aef\u4f7f\u7528\u5c31\u4f1a\u51fa\u9519. \"\"\" [ root@localhost opt ] # sz nginx.tar.gz \"\"\" rz windows ==> linux \u25b2 \u8fd0\u884c\u8be5\u547d\u4ee4\u4f1a\u5f39\u51fa\u4e00\u4e2a\u6587\u4ef6\u9009\u62e9\u7a97\u53e3,\u4ece\u672c\u5730\u9009\u62e9\u6587\u4ef6\u4e0a\u4f20\u5230linux\u670d\u52a1\u5668. \u5982\u679clinux\u4e3b\u673a\u4e0a\u76ee\u6807\u6587\u4ef6\u540d\u5df2\u7ecf\u5b58\u5728,\u5219\u4e0a\u4f20\u5931\u8d25,\u53ef\u4ee5\u7528-E\u9009\u9879\u89e3\u51b3 rz -E \u91cd\u547d\u540d\u4f20\u5165\u6587\u4ef6,\u65b0\u6587\u4ef6\u540d\u5c06\u6dfb\u52a0\u4e00\u4e2a\u70b9\u548c\u4e00\u4e2a\u6570\u5b57(0..999\uff09 \"\"\" [ root@localhost opt ] # rz \u8f93\u51fa/\u5165\u4e0e\u91cd\u5b9a\u5411 \u00b6 > >>\u8f93\u51fa\u91cd\u5b9a\u5411 \u00b6 \u6b63\u5e38\u8f93\u51fa\u662f\u628a \u5185\u5bb9 \u8f93\u51fa\u5230\u663e\u793a\u5668\u4e0a,\u800c\u8f93\u51fa\u91cd\u5b9a\u5411\u662f \u628a\u5185\u5bb9\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d > \u8986\u76d6; >> \u8ffd\u52a0. 1> 2> &> ps: 1 2\u6307\u7684\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26 \u8be6\u89c119_\u7cfb\u7edf\u4f18\u5316.md ulimit \u90e8\u5206\u7684\u5185\u5bb9 [ root@localhost opt ] # ls [ root@localhost opt ] # ifconfig > a.txt [ root@localhost opt ] # head -5 a.txt ens33: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) RX packets 164409 bytes 161330384 ( 153 .8 MiB ) [ root@localhost opt ] # echo \"123\" >> a.txt [ root@localhost opt ] # pwd >> a.txt [ root@localhost opt ] # tail -2 a.txt 123 /opt [ root@localhost opt ] # echo \"haha\" > a.txt [ root@localhost opt ] # cat a.txt haha \u4e00\u6761\u547d\u4ee4\u7684\u6267\u884c\u4ea7\u751f\u7684\u7ed3\u679c\u5185\u5bb9\u53ef\u80fd\u662f\u6b63\u786e\u7684\u4e5f\u6709\u53ef\u80fd\u662f\u9519\u8bef\u7684. \u56e0\u800c\u5728linux\u4e2d, 0 \u4ee3\u8868\u6807\u51c6\u8f93\u5165; 1 \u4ee3\u8868\u6807\u51c6\u6b63\u786e\u8f93\u51fa; 2 \u4ee3\u8868\u6807\u51c6\u9519\u8bef\u8f93\u51fa. \"\"\" \u547d\u4ee4\u9519\u8bef\u7ed3\u679c\u662f\u4e0d\u80fd\u76f4\u63a5\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d\u7684. \u547d\u4ee4\u6b63\u786e\u7684\u7ed3\u679c\u53ef\u4ee5. \u5373\u5355\u72ec\u5199 > \u76f8\u5f53\u4e8e\u662f 1> \"\"\" [ root@localhost opt ] # ifconfig ensxx ensxx: error fetching interface information: Device not found [ root@localhost opt ] # ifconfig ensxx > b.txt ensxx: error fetching interface information: Device not found \u25b2 \u5c06\u547d\u4ee4\u6b63\u786e\u7684\u7ed3\u679c\u8f93\u5230a.txt\u91cc,\u9519\u8bef\u7684\u7ed3\u679c\u8f93\u5230b.txt\u91cc \u6ce8\u610f: 1> 2> 1\u548c2\u4e0e>\u4e2d\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c! \u8fbe\u5230\u8f93\u51fa\u7ed3\u679c\u5206\u6d41\u7684\u6548\u679c. [ root@localhost opt ] # ifconfig ensxx 1>a.txt 2>b.txt [ root@localhost opt ] # cat a.txt [ root@localhost opt ] # cat b.txt ensxx: error fetching interface information: Device not found \u25b2 \u5c06\u547d\u4ee4\u4e0d\u7ba1\u6b63\u786e\u8fd8\u662f\u9519\u8bef\u7684\u7ed3\u679c\u90fd\u8f93\u51fa\u5230\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d Ps: \u8fd8\u6709\u4e00\u79cd\u5199\u6cd5\u80fd\u8fbe\u5230\u4e00\u6837\u7684\u6548\u679c ( \u4e86\u89e3\u5373\u53ef ) ` ifconfig ensxx > c.txt 2 & >1 ` [ root@localhost opt ] # ifconfig ensxx &> c.txt [ root@localhost opt ] # pwd &>> c.txt [ root@localhost opt ] # cat c.txt ensxx: error fetching interface information: Device not found /opt Q: \u4ec0\u4e48\u65f6\u5019\u4f7f\u7528 &> &>> ? A: 1> \u53ea\u9700\u8981\u6b64\u547d\u4ee4\u5b8c\u6210\u67d0\u4e2a\u64cd\u4f5c,\u5e76\u4e14\u9a8c\u8bc1\u540e\u5f88\u6e05\u695a\u7684\u77e5\u9053\u6b64\u547d\u4ee4\u7684\u7ed3\u679c\u662f\u6ca1\u6709\u95ee\u9898; \u5f53\u628a\u6b64\u547d\u4ee4\u653e\u5230\u811a\u672c\u7a0b\u5e8f\u91cc\u65f6,\u5c31\u4e0d\u9700\u8981\u8f93\u51fa\u7ed3\u679c\u5566. eg ls &>/dev/null \u76f4\u63a5 \u4e22\u5230\u9ed1\u6d1e\u6587\u4ef6 \u91cc. 2> \u4e00\u5806\u547d\u4ee4\u7684\u7ed3\u679c(\u811a\u672c\u6587\u4ef6/\u7a0b\u5e8f) &>> \u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u91cc,\u65b9\u4fbf\u67e5\u770b. < <<\u8f93\u5165\u91cd\u5b9a\u5411 \u00b6 [ root@localhost opt ] # cat /etc/hostname localhost.localdomain [ root@localhost opt ] # echo 111 > d.txt [ root@localhost opt ] # cat d.txt 111 \u25bc \u8868\u793a\u5f80d.txt\u91cc\u8986\u76d6\u7684\u5185\u5bb9\u6765\u81ea/etc/hostname\u6587\u4ef6 \u7b49\u540c\u4e8e cat /etc/hostname > d.txt [ root@localhost opt ] # cat > d.txt < /etc/hostname [ root@localhost opt ] # cat d.txt localhost.localdomain \u25bc \u8868\u793a\u5f80d.txt\u91cc\u8ffd\u52a0\u7684\u5185\u5bb9\u6765\u81ea/etc/hostname\u6587\u4ef6 \u7b49\u540c\u4e8e cat /etc/hostname >> d.txt [ root@localhost opt ] # cat >> d.txt < /etc/hostname [ root@localhost opt ] # cat d.txt localhost.localdomain localhost.localdomain \u25bc \u7b49\u5f85\u952e\u76d8\u7684\u8f93\u5165 EOF\u8868\u793a\u7ed3\u675f\u8f93\u5165,\u8fd9\u4e2a\u53ef\u4ee5\u81ea\u5df1\u8bbe\u5b9a. \u5efa\u8bae\u7528EOF. [ root@localhost opt ] # cat > d.txt << EOF > 111 > 222 > EOF [ root@localhost opt ] # cat d.txt 111 222 [ root@localhost opt ] # cat >> d.txt << AAA > 333 > 444 > AAA [ root@localhost opt ] # cat d.txt 111 222 333 444 \u5b57\u7b26\u5904\u7406\u547d\u4ee4 \u00b6 sort \u6392\u5e8f \u00b6 \u7528\u4e8e\u5c06\u6587\u4ef6\u5185\u5bb9\u52a0\u4ee5\u6392\u5e8f -t \u6307\u5b9a\u5206\u5272\u7b26, \u9ed8\u8ba4\u662f\u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26 -n \u6309\u7167\u6570\u503c\u7684\u5927\u5c0f\u6392\u5e8f \u6307\u5b9a\u540e11\u662f\u6570\u503c11,\u800c\u4e0d\u662f\u5b57\u7b26\u4e3211 -k \u4ee5\u67d0\u5217\u8fdb\u884c\u6392\u5e8f k2\u5c31\u662f\u7b2c\u4e8c\u5217 -r \u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u6765\u6392\u5e8f [\u65e0\u5e8f\u6570\u636e\u51c6\u5907] [ root@localhost opt ] # cat >> file.txt <<EOF > b:3 > c:2 > a:4 > d:1 > f:11 > EOF [ root@localhost opt ] # cat file.txt b:3 c:2 a:4 d:1 f:11 [\u9ed8\u8ba4\u4ee5ACSII\u5b57\u7b26\u8868\u6bd4\u5927\u5c0f] \u6bcf\u4e2a\u5b57\u7b26\u90fd\u4f1a\u5bf9\u5e94\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u5b57,\u5728\u8ba1\u7b97\u673a\u91cc\u4f1a\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u4f53\u73b0. \u5b57\u7b26\u4e32\u7b2c\u4e00\u4e2a\u5b57\u7b26\u6bd4\u8f83\u51fa\u6765\u4e86,\u5c31\u4e0d\u4f1a\u6bd4\u8f83\u7b2c\u4e8c\u4e2a\u5566.. python\u4e2d\u4e5f\u662f. [ root@localhost opt ] # sort file.txt a:4 b:3 c:2 d:1 f:11 [\u4ee5\u5192\u53f7\u53f3\u8fb9\u7684\u6570\u503c\u6bd4\u5927\u5c0f] \u82e5\u4e0d\u6307\u5b9a-n,\u4f1a\u88ab\u5f53\u4f5c\u5b57\u7b26\u4e32,\u7528ACSII\u7801\u6bd4\u8f83. [ root@localhost opt ] # sort -t \":\" -n -k2 file.txt d:1 c:2 b:3 a:4 f:11 [ root@localhost opt ] # sort -t \":\" -k2 file.txt d:1 f:11 c:2 b:3 a:4 [-r\u53cd\u5411\u6392\u5e8f] [ root@localhost opt ] # sort -t \":\" -n -r -k2 file.txt f:11 a:4 b:3 c:2 d:1 uniq \u53bb\u91cd \u00b6 \u53bb\u91cd. \u7528\u4e8e\u68c0\u67e5\u53ca\u5220\u9664\u6587\u672c\u6587\u4ef6\u4e2d \u76f8\u90bb\u91cd\u590d \u51fa\u73b0\u7684\u884c\u5217, \u6240\u4ee5\u4e00\u822c\u4e0e sort \u547d\u4ee4\u7ed3\u5408\u4f7f\u7528 -c \u5728\u6bcf\u5217\u65c1\u8fb9\u663e\u793a\u8be5\u884c\u91cd\u590d\u51fa\u73b0\u7684\u6b21\u6570 -d \u4ec5\u663e\u793a\u91cd\u590d\u51fa\u73b0\u7684\u884c\u5217 -u \u4ec5\u663e\u793a\u51fa\u4e00\u6b21\u7684\u884c\u5217 [ root@localhost opt ] # cat file.txt hello 123 hello 123 123 func \"\"\" \u6ce8\u610f\u89c2\u5bdf,\u76f4\u63a5\u4f7f\u7528uniq\u547d\u4ee4,\u53ea\u4f1a\u4f7f\u539f\u6570\u636e\u4e2d\u76f8\u90bb\u7684\u4e24\u4e2a123\u53bb\u91cd. \u6240\u4ee5\u9700\u8981sort\u547d\u4ee4\u5c06\u91cd\u590d\u7684\u5168\u90e8\u653e\u5230\u4e00\u8d77 \"\"\" [ root@localhost opt ] # uniq file.txt hello 123 hello 123 func [ root@localhost opt ] # sort file.txt | uniq 123 func hello [ root@localhost opt ] # sort file.txt | uniq -c 3 123 1 func 2 hello [ root@localhost opt ] # sort file.txt | uniq -d 123 hello [ root@localhost opt ] # sort file.txt | uniq -u func cut \u5206\u5272 \u00b6 \u7528\u6765\u663e\u793a\u884c\u4e2d\u7684\u6307\u5b9a\u90e8\u5206,\u5220\u9664\u6587\u4ef6\u4e2d\u6307\u5b9a\u5b57\u6bb5 cut\u652f\u6301\u7ba1\u9053\u7b26! \u5410\u69fd : awk\u5b8c\u5168\u53ef\u4ee5\u53d6\u4ee3cut\u7684\u529f\u80fd -d \u6307\u5b9a\u5b57\u6bb5\u7684\u5206\u9694\u7b26 -f \u663e\u793a\u6307\u5b9a\u5206\u6bb5\u7684\u5185\u5bb9 -f1-3 -f1,3,4 [ root@localhost opt ] # head -1 /etc/passwd root:x:0:0:root:/root:/bin/bash [ root@localhost opt ] # head -1 /etc/passwd | cut -d \":\" -f1,3,4,6 root:0:0:/root \"\"\" -f1,2,3 \u7b49\u540c\u4e8e -f1-3 \"\"\" Ps: \u5206\u9694\u7b26\u662f\u7a7a\u683c \u5fc5\u987b\u7528\u5f15\u53f7 cut -d \" \" ; \u5176\u4f59\u7684\u90fd\u53ef\u4ee5\u4e0d\u7528\u5f15\u53f7 cut -d: cut -d; tr \u66ff\u6362\u5220\u9664 \u00b6 \u7528\u4e8e\u66ff\u6362\u6216\u5220\u9664. \u6ce8\u610f: \u66ff\u6362\u7684\u5b57\u7b26\u662f\u4e00\u4e00\u5bf9\u5e94\u7684,\u4e0d\u662f\u6307\u6574\u4e2a\u5b57\u7b26\u4e32! tr\u662f\u652f\u6301\u7ba1\u9053\u7684. \u5410\u69fd : sed\u914d\u5408\u7ba1\u9053\u4e5f\u80fd\u8fbe\u5230\u540c\u6837\u7684\u66ff\u6362\u6548\u679c. [ root@localhost opt ] # head -1 /etc/passwd root:x:0:0:root:/root:/bin/bash \"\"\" \u66ff\u6362 \u6ce8\u610f: \u66ff\u6362\u7684\u5b57\u7b26\u662f\u4e00\u4e00\u5bf9\u5e94\u7684,\u4e0d\u662f\u6574\u4e2a\u5b57\u7b26\u4e32! \"\"\" [ root@localhost opt ] # head -1 /etc/passwd |tr \"root\" \"ROOT\" ROOT:x:0:0:ROOT:/ROOT:/bin/bash [ root@localhost opt ] # echo \"hello egon yyds\" > a.txt [ root@localhost opt ] # cat a.txt hello egon yyds [ root@localhost opt ] # tr \"egon\" \"ABCD\" < a.txt hAllC ABCD yyds \"\"\" \u5220\u9664 \"\"\" [ root@localhost opt ] # head -1 /etc/passwd |tr -d \"root\" :x:0:0::/:/bin/bash wc \u7edf\u8ba1 \u00b6 \u7528\u4e8e\u7edf\u8ba1,\u8ba1\u7b97\u6570\u5b57 wc\u662f\u652f\u6301\u7ba1\u9053\u7684 -c \u7edf\u8ba1\u6587\u4ef6\u7684Bytes\u6570 -l \u7edf\u8ba1\u6587\u4ef6\u7684\u884c\u6570 -w \u7edf\u8ba1\u6587\u4ef6\u4e2d\u5355\u8bcd\u7684\u4e2a\u6570, \u9ed8\u8ba4\u4ee5\u7a7a\u767d\u5b57\u7b26(\u5305\u62ec\u6362\u884c\u7b26)\u505a\u4e3a\u5206\u9694\u7b26 [ root@localhost opt ] # ll /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 4 16 :51 /etc/passwd [ root@localhost opt ] # wc -c /etc/passwd 2351 /etc/passwd [ root@localhost opt ] # wc -l /etc/passwd 45 /etc/passwd # \u7b49\u540c\u4e8e wc -l /etc/passwd | cut -d\" \" -f1 [ root@localhost opt ] # cat /etc/passwd | wc -l 45 [ root@localhost opt ] # cat file.txt abc_123 b_1_2 aaabb 111 ; ccc egonyyds [ root@localhost opt ] # wc -w file.txt 7 file.txt \"\"\" \u25b2 \u7edf\u8ba1\u7cfb\u7edf\u73b0\u76ee\u524d\u7cfb\u7edf\u4e2d\u6709\u591a\u5c11\u4e2a\u8fdb\u7a0b grep -v \" ps aux \" \u662f\u56e0\u4e3a\u5f53\u524d\u8fd9\u6761\u547d\u4ee4\u4e5f\u4f1a\u4ea7\u751f\u4e00\u4e2a\u8fdb\u7a0b \"\"\" [ root@localhost opt ] # ps aux | grep -v \"ps aux\" | wc -l 203 tar/zip \u00b6 \u6253\u5305\u4f1a\u5c06\u591a\u4e2a\u6587\u4ef6\u5f52\u96c6\u5230\u4e00\u8d77,\u538b\u7f29\u4f1a\u51cf\u5c11\u5360\u7528\u7684\u7a7a\u95f4. \u7528\u9014: (1)\u65b9\u4fbf\u52a0\u5feb\u7f51\u7edc\u4f20\u8f93; (2)\u505a\u5907\u4efd [\u65b9\u5f0f\u4e00 tar] \u6253\u5305: tar cvf bak.tar a.txt b.txt c.txt \u538b\u7f29: gzip bak.tar or bzip2 bak.tar \u6253\u5305\u538b\u7f29: tar cvzf bak.tar.gz a.txt b.txt c.txt tar cvjf bak.tar.bz2 a.txt b.txt c.txt \u89e3\u538b\u7f29: tar xvf \u6253\u5305\u538b\u7f29\u6587\u4ef6 -C \u89e3\u538b\u5230\u7684\u76ee\u5f55 \u9009\u9879 \u542b\u4e49 c \u521b\u5efa\u6253\u5305\u538b\u7f29\u6587\u4ef6 -- \u6253\u5305\u6587\u4ef6\u4ee5 .tar \u4e3a\u540e\u7f00 v \u663e\u793a\u6253\u5305\u7684\u8fc7\u7a0b f \u4e3a\u6253\u5305 or \u6253\u5305\u538b\u7f29\u540e\u7684\u6587\u4ef6\u547d\u540d / \u89e3\u538b\u7f29\u65f6\u6307\u5b9a\u9700\u8981\u89e3\u538b\u7684\u6253\u5305\u538b\u7f29\u6587\u4ef6 z \u4f7f\u7528gzip\u538b\u7f29\u7b97\u6cd5 -- \u4ee5 .gz \u7ed3\u5c3e j \u4f7f\u7528bzip2\u538b\u7f29\u7b97\u6cd5 -- \u4ee5 .bz2 \u7ed3\u5c3e x \u89e3\u538b\u7f29 -C \u6307\u5b9a\u89e3\u538b\u5230\u7684\u76ee\u5f55, \u6b64\u76ee\u5f55\u9700\u8981\u4e8b\u5148\u5b58\u5728 Ps: \u538b\u7f29\u5305\u7684\u540e\u7f00\u4e0d\u643a\u5e26\u4e0d\u4f1a\u62a5\u9519,\u4f46 \u7ea6\u5b9a\u4fd7\u6210\u8981\u643a\u5e26\u4fbf\u4e8e\u533a\u5206 ! \u666e\u901a\u6587\u4ef6\u538b\u7f29\u540e\u4f1a\u5c0f\u5f88\u591a;\u89c6\u9891\u6587\u4ef6\u538b\u7f29\u4e0d\u4e86\u591a\u5c11\u7a7a\u95f4..(\u538b\u7f29\u5c31\u662f\u6e05\u7406\u7a7a\u683c\u6362\u884c\u5565\u7684) [\u65b9\u5f0f\u4e8c zip] \u6253\u5305\u538b\u7f29: zip bak.zip a.txt b.txt c.txt \u89e3\u538b\u7f29: unzip bak.zip -d \u89e3\u538b\u5230\u7684\u76ee\u5f55 Ps: \u82e5\u5e0c\u671bwindows\u7684\u8f6f\u4ef6\u80fd\u88ablinux\u89e3\u538b,\u6216\u8005linux\u7684\u8f6f\u4ef6\u5305\u88abwindows\u80fd\u8bc6\u522b,\u9009\u62e9 zip \uff01 [\u6269\u5c55] \u6253\u5305\u538b\u7f29\u901a\u5e38\u7528\u4e8e\u5907\u4efd\u6587\u4ef6. \u5907\u4efd\u6587\u4ef6\u7684\u540d\u5b57\u5fc5\u987b\u89c1\u540d\u77e5\u610f\u4e14\u5e94\u8be5\u5e26\u4e0a\u65f6\u95f4\u3001\u4e3b\u673a\u540d\u4e4b\u7c7b ,\u4fbf\u4e8e\u6570\u636e\u6062\u590d\u65f6\u627e\u5230\u9700\u8981\u7684\u90a3\u4e2a\u65f6\u95f4\u70b9\u7684\u5907\u4efd. \"\"\" ``\u53cd\u5f15\u53f7\u4ee3\u8868\u83b7\u53d6\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c\uff01 \"\"\" tar czvf ` date + \"%Y_%m_%d_%H_%M_%S\" ` _bak.tar.gz /etc [ root@localhost opt ] # date +\"%Y_%m_%d_%H_%M_%S %p\" 2022_07_15_11_33_19 \u4e0a\u5348 date\u65f6\u95f4\u7684\u5177\u4f53\u4f7f\u7528: https://zhuanlan.zhihu.com/p/325728987 \u8be6\u60c5\u8bf7\u770b< 8 \u62d3\u5c55>\u90a3\u91cc \u6253\u5305\u538b\u7f29\u6587\u4ef6 \u00b6 \"\"\" \u6253\u5305\u7684\u76ee\u6807\u8def\u5f84\u5982\u679c\u662f\u7edd\u5bf9\u8def\u5f84,\u4f1a\u63d0\u793a tar:\u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d \u4f46\u8fd9\u63d0\u793a\u4e0d\u4f1a\u5f71\u54cd\u6253\u5305 \u53ef\u4ee5cd\u5230/etc\u76ee\u5f55\u4e0b\u5bf9\u6587\u4ef6\u8fdb\u884c\u6253\u5305,\u8fd9\u6837\u7684\u8bdd\u5c31\u4f1a\u5c11\u4e00\u5c42\u6587\u4ef6\u5939 \u6ce8\u610f\u89c2\u5bdf: bak.tar \u6253\u5305\u6587\u4ef6 10240\u4e2a\u5b57\u8282 bak.tar.gz \u6253\u5305\u538b\u7f29\u6587\u4ef6 1170\u4e2a\u5b57\u8282 \u518d\u89c2\u5bdf\u6253\u5305\u8fc7\u7a0b,\u5b83\u4f1a\u81ea\u52a8\u5e26\u6709\u6587\u4ef6\u7684\u6587\u4ef6\u5939. \"\"\" [ root@localhost opt ] # tar cvf bak.tar /etc/passwd /etc/hosts /etc/hostname tar: \u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d /etc/passwd /etc/hosts /etc/hostname [ root@localhost opt ] # ll \u603b\u7528\u91cf 12 -rw-r--r-- 1 root root 10240 7\u6708 15 10 :10 bak.tar [ root@localhost opt ] # gzip bak.tar [ root@localhost opt ] # ll \u603b\u7528\u91cf 4 -rw-r--r-- 1 root root 1170 7\u6708 15 10 :10 bak.tar.gz \"\"\" \u52a0P\u9009\u9879,\u5219\u2018tar:\u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d\u2019\u8fd9\u4e2a\u63d0\u793a\u4fe1\u606f\u4e0d\u4f1a\u518d\u663e\u793a \u6ce8\u610f\u89c2\u5bdf: bak2.tar.gz 1170\u5b57\u8282 bak3.tar.bz2 1180\u5b57\u8282 \u8bf4\u660egzip\u538b\u7f29\u7b97\u6cd5\u6bd4bzip2\u538b\u7f29\u7b97\u6cd5\u538b\u7f29\u7684\u66f4\u591a! \"\"\" tar cvzPf bak2.tar.gz /etc/passwd /etc/hosts /etc/hostname tar cvjPf bak3.tar.bz2 /etc/passwd /etc/hosts /etc/hostname [ root@localhost opt ] # ll \u603b\u7528\u91cf 16 -rw-r--r-- 1 root root 1170 7\u6708 15 10 :10 bak2.tar.gz -rw-r--r-- 1 root root 1180 7\u6708 15 10 :11 bak3.tar.bz2 -rw-r--r-- 1 root root 1170 7\u6708 15 10 :10 bak.tar.gz \u89e3\u538b\u7f29 \u00b6 \"\"\" \u65e0\u9700\u6307\u5b9a\u89e3\u538b\u7b97\u6cd5,tar\u4f1a\u81ea\u884c\u5224\u65ad,\u81ea\u52a8\u8c03\u7528gunzip\u548cbunzip2! \u4e0d\u6307\u5b9a-C,\u5219\u4f1a\u89e3\u538b\u5230\u5f53\u524d\u76ee\u5f55\u4e0b. \"\"\" [ root@localhost opt ] # mkdir test [ root@localhost opt ] # tar xvf bak.tar.gz -C /opt/test etc/passwd etc/hosts etc/hostname [ root@localhost opt ] # ll test/etc \u603b\u7528\u91cf 12 -rw-r--r-- 1 root root 22 6\u6708 30 18 :35 hostname -rw-r--r-- 1 root root 158 6\u6708 7 2013 hosts -rw-r--r-- 1 root root 2351 7\u6708 4 16 :51 passwd","title":"\u6587\u4ef6\u7ba1\u7406\u4e4b\u547d\u4ee4\u8865\u5145"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#find","text":"\u6587\u4ef6\u67e5\u627e\u547d\u4ee4 find \u76ee\u5f55 [-name;-size;-maxdepth;-mtime;-user;-group;-type;-inum;-perm] ... \u627e\u5230\u540e\u7684\u5904\u7406\u52a8\u4f5c -print -ls -ok -delete -exec","title":"find"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_1","text":"\u4f1a\u5728\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u9012\u5f52\u67e5\u627e.. \"ifcfg-ens33\" \u786e\u5207\u7684\u6587\u4ef6\u540d; \"ifcfg-*\" \u4ee5 *ifcfg- * \u5f00\u5934\u7684\u6587\u4ef6\u540d -i \u5ffd\u7565\u6587\u4ef6\u540d\u7684\u5927\u5c0f\u5199. [ root@localhost opt ] # find /etc -name \"ifcfg-ens33\" /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost opt ] # find /etc -name \"ifcfg-*\" /etc/sysconfig/network-scripts/ifcfg-lo /etc/sysconfig/network-scripts/ifcfg-ens33 [ root@localhost opt ] # find /etc -iname \"ifcfg-ens33\" /etc/sysconfig/network-scripts/ifcfg-ens33","title":"\u6309\u6587\u4ef6\u540d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_2","text":"find man ; / -size \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f find /etc -size 3M # \u6587\u4ef6\u5927\u4e8e3M \u7b49\u540c\u4e8e find /etc -size 3M -print find /etc -size +3M # \u6587\u4ef6\u7b49\u4e8e3M \u9ed8\u8ba4\u540e\u9762\u4f1a\u52a0 -print find /etc -size -3M # \u6587\u4ef6\u5c0f\u4e8e3M find /etc -size +3M -ls # \u627e\u5230\u6587\u4ef6\u540e -ls \u663e\u793a\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f \u3010\u4e86\u89e3\u3011 \u82e5\u67e5\u627e\u7684\u6587\u4ef6\u5927\u5c0f\u4ee5b\u4e3a\u5355\u4f4d,\u6ce8\u610f\u8fd9\u91cc\u7684b\u4e0d\u662f\u5b57\u8282\u4e4b\u610f,\u8fd9\u91cc\u76841b\u4e3a512\u4e2a\u5b57\u8282. \u4e0d\u5199\u5355\u4f4d,\u9ed8\u8ba4\u4e5f\u662f\u4ee5b\u4e3a\u5927\u5c0f\u5355\u4f4d. 512bytes\u5373\u673a\u68b0\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\u7684\u6700\u5c0f\u5355\u4f4d1\u4e2a\u6247\u533a\u7684\u5927\u5c0f.. \u901a\u4fd7\u70b9,1b\u4e3a1\u4e2a\u6247\u533a. \u82e5\u67e5\u627e\u547d\u4ee4\u4e3a find . -size 2b \u90a3\u4e48\u53ea\u8981\u6b64\u6587\u4ef6\u5360\u636e\u4e24\u4e2a\u6247\u533a\u7684\u5927\u5c0f,\u5927\u5c0f\u5904\u4e8e512bytes-1024bytes\u90fd\u4f1a\u88ab\u67e5\u627e\u5230. \u3010\u6269\u5c55 \u8fdb\u884c\u9a8c\u8bc1\u3011\u9020\u4e00\u4e2a1024bytes\u548c513\u5b57\u8282\u7684\u6587\u4ef6 \"\"\" if inputfile\u8f93\u5165\u6587\u4ef6 /dev/zero\u6b64\u8bbe\u5907\u6587\u4ef6\u5f80\u5916\u4ea7\u751f0 of outputfile\u8f93\u51fa\u6587\u4ef6 bs blocksize\u5757\u5927\u5c0f \u9ed8\u8ba4\u5355\u4f4d\u662f\u5b57\u8282 count \u6709\u591a\u5c11\u5757 \u6ce8\u610f:\u8f93\u51fa\u6587\u4ef6\u662f\u6ca1\u6709\u5185\u5bb9\u7684,\u8fd9\u662f\u4e00\u79cd\u865a\u62df\u7684\u6982\u5ff5,\u53ea\u662f\u5c06\u8fd9\u4e2a\u6587\u4ef6\u586b\u5145\u5230\u6307\u5b9a\u5927\u5c0f. \"\"\" [ root@localhost opt ] # dd if=/dev/zero of=b.txt bs=1024 count=1 \u8bb0\u5f55\u4e861+0 \u7684\u8bfb\u5165 \u8bb0\u5f55\u4e861+0 \u7684\u5199\u51fa 1024\u5b57\u8282 ( 1 .0 kB ) \u5df2\u590d\u5236\uff0c0.00648155 \u79d2\uff0c158 kB/\u79d2 [ root@localhost opt ] # dd if=/dev/zero of=c.txt bs=513 count=1 \u8bb0\u5f55\u4e861+0 \u7684\u8bfb\u5165 \u8bb0\u5f55\u4e861+0 \u7684\u5199\u51fa 513\u5b57\u8282 ( 513 B ) \u5df2\u590d\u5236\uff0c0.000407585 \u79d2\uff0c1.3 MB/\u79d2 [ root@localhost opt ] # cat b.txt [ root@localhost opt ] # ll \u603b\u7528\u91cf 8 -rw-r--r-- 1 root root 1024 7\u6708 14 11 :07 b.txt -rw-r--r-- 1 root root 513 7\u6708 14 11 :11 c.txt [ root@localhost opt ] # find . -size 2 -ls 35589993 4 -rw-r--r-- 1 root root 1024 7\u6708 14 11 :07 ./b.txt 35589994 4 -rw-r--r-- 1 root root 513 7\u6708 14 11 :11 ./c.txt","title":"\u6309\u6587\u4ef6\u5927\u5c0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_3","text":"\u9ed8\u8ba4\u4f1a\u9012\u5f52\u67e5\u627e\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5c42\u7ea7.. \u53ef\u901a\u8fc7 -maxdepth levels \u8bbe\u7f6e\u5c42\u7ea7. # /\u6839\u76ee\u5f55 ; -maxdepth 5\u5c42\u7ea7 ; -a\u5e76\u4e14 ; -name \"ifcfg-*\" \u6587\u4ef6\u540d # \u53ef\u4e0d\u52a0-a,\u9ed8\u8ba4\u5c31\u662f-a. \u5e76\u5217\u5173\u7cfb\u540c\u65f6\u6210\u7acb. # \u8865\u5145: -o \u6216\u8005. \u6761\u4ef6\u6210\u7acb\u4e00\u4e2a\u5373\u53ef [ root@localhost opt ] # find / -maxdepth 5 -a -name \"ifcfg-*\" /etc/sysconfig/network-scripts/ifcfg-lo /etc/sysconfig/network-scripts/ifcfg-ens33","title":"\u6587\u4ef6\u67e5\u627e\u6df1\u5ea6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_4","text":"atime \u6700\u8fd1\u8bbf\u95ee; mtime \u6700\u8fd1\u66f4\u6539; ctime\u6700\u8fd1\u6539\u52a8. Ps: \u5728\u540e\u7eed\u6743\u9650\u90e8\u5206\u4f1a\u8be6\u7ec6\u8bb2\u89e3\u4ec0\u4e48\u7684\u53d8\u5316\u4f1a\u5bfc\u81f4\u8fd9\u4e09\u79cd\u65f6\u95f4\u7684\u6539\u52a8. find /etc -mtime +3 # \u4fee\u6539\u65f6\u95f4\u8d85\u8fc73\u5929 find /etc -mtime 3 # \u4fee\u6539\u65f6\u95f4\u7b49\u4e8e3\u5929 find /etc -mtime -3 # \u4fee\u6539\u65f6\u95f43\u5929\u4ee5\u5185","title":"\u6309\u65f6\u95f4\u67e5\u627e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_5","text":"find /home -user egon # \u5c5e\u4e3b\u662fegon\u7684\u6587\u4ef6 find /home -group it # \u5c5e\u7ec4\u662fit\u7ec4\u7684\u6587\u4ef6 find /home -user egon -group it \u7b49\u540c\u4e8e find /home -user egon -a -group it find /home -user egon -o -group it \"\"\" \u6bcf\u521b\u5efa\u4e00\u4e2a\u7528\u6237,\u4f1a\u5728/etc/passwd\u6dfb\u52a0\u7528\u6237\u7684\u5c5e\u4e3b\u4fe1\u606f,\u5728/etc/group\u6dfb\u52a0\u5c5e\u7ec4\u4fe1\u606f. \"\"\" find /home -nouser # \u7528\u6237\u8fd8\u5b58\u5728 \u4f46\u5728/etc/passwd\u4e2d\u5220\u9664\u4e86\u8bb0\u5f55 find /home -nogroup # \u7528\u6237\u8fd8\u5b58\u5728 \u4f46\u5728/etc/group\u4e2d\u5220\u9664\u4e86\u8bb0\u5f55 \u3010\u8865\u5145\u3011 ` id root ` \u67e5\u770broot\u7528\u6237\u7684\u4fe1\u606f [ root@localhost opt ] # id root uid = 0 ( root ) gid = 0 ( root ) \u7ec4 = 0 ( root ) [ root@localhost opt ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc )","title":"\u6309\u6587\u4ef6\u5c5e\u4e3b\u3001\u5c5e\u7ec4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_6","text":"find /dev -type f # f\u666e\u901a\u6587\u4ef6 find /dev -type d # d\u76ee\u5f55 find /dev -type l # l\u94fe\u63a5 find /dev -type b # b\u5757\u8bbe\u5907 find /dev -type c # c\u5b57\u7b26\u8bbe\u5907 find /dev -type s # s\u5957\u63a5\u5b57 \u901a\u5e38\u4ee5.sock\u7ed3\u5c3e find /dev -type p # p\u7ba1\u9053\u6587\u4ef6","title":"\u6309\u6587\u4ef6\u7c7b\u578b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#inode","text":"find / -inum 1811 # \u6839\u636einode\u53f7\u67e5\u627e: -inum n find . -perm -600 -ls # \u6309\u6587\u4ef6\u6743\u9650: -perm","title":"inode\u53f7\u3001\u6587\u4ef6\u6743\u9650"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#findxargs","text":"xargs\u7684\u53c2\u8003\u6587\u6863: https://zhuanlan.zhihu.com/p/340804463 !!!!!! \u25b2 \u5220\u9664\u6ca1\u6709\u5c5e\u4e3b\u548c\u5c5e\u7ec4\u7684\u6587\u4ef6 \"\"\" rm -rf \u672c\u8eab\u662f\u4e0d\u652f\u6301\u4ece\u7ba1\u9053\u91cc\u53d6\u4e1c\u897f\u7684 \u9700\u8981\u52a0\u4e0a\u53c2\u6570 xargs \u4ece\u7ba1\u9053\u91cc\u8bfb\u53d6\u53c2\u6570\u4ea4\u7ed9 rm -rf\u547d\u4ee4 \"\"\" find /home -nouser -nogroup | xargs rm -rf \"\"\" \u7b49\u540c\u4e8e \u4ee5\u4e0b\u4e09\u6761\u547d\u4ee4\u7686\u53ef find /home -nouser -nogroup -delete find /home -nouser -nogroup -exec rm -rf {} \\; # \u975e\u4ea4\u4e92\u5f0f \u6ce8\u610f-exec\u614e\u7528\uff01 find /home -nouser -nogroup -ok rm -rf {} \\; # \u4ea4\u4e92\u5f0f(\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8981\u95ee\u662f\u5426\u786e\u5b9a\u5220\u9664) \u6ce8\u610f: \u8fd9\u91cc\u7684 cp rm \u6700\u540e \\; \u662f\u56fa\u5b9a\u5199\u6cd5. \"\"\" \u25b2 \u5c06\u627e\u5230\u7684\u6587\u4ef6\u79fb\u52a8\u3001\u590d\u5236\u3001\u66f4\u6539\u6743\u9650 \"\"\" xargs -I \u8d1f\u8d23\u4ece\u7ba1\u9053\u91cc\u628a\u7ed3\u679c\u62ff\u51fa\u6765,\u91c7\u96c6\u597d\u4e22\u5230{}\u82b1\u62ec\u53f7\u91cc \u8fd9\u6837\u7684\u8bdd,\u53ea\u8981\u7528\u82b1\u62ec\u53f7\u5c31\u4ee3\u8868\u7528\u7ba1\u9053\u5de6\u8fb9\u547d\u4ee4\u7684\u7ed3\u679c \"\"\" [ root@localhost opt ] # find /etc -name \"ifcfg-*\" | xargs -I {} cp -rf {} /opt [ root@localhost opt ] # ls ifcfg-ens33 ifcfg-lo \"\"\" \u7b49\u540c\u4e8e find /etc -name \" ifcfg-* \" -exec cp -rf {} /opt \\; \"\"\" find /test -name \"ifcfg-ens33\" | xargs -I {} mv {} /ttt find /ttt -name \"ifcfg*\" | xargs -I {} chmod 666 {}","title":"find\u7ed3\u5408xargs"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_7","text":"","title":"\u4e0a\u4f20\u4e0e\u4e0b\u8f7d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#wget","text":"wget -O \u672c\u5730\u8def\u5f84 \u8fdc\u7a0b\u5305\u94fe\u63a5\u5730\u5740 \u672a\u6307\u5b9a\u672c\u5730\u8def\u5f84,\u9ed8\u8ba4\u662f\u4e0b\u8f7d\u5230\u5f53\u524d\u76ee\u5f55;\u6307\u5b9a\u672c\u5730\u8def\u5f84\u53ef\u4ee5\u6307\u5b9a\u4e0b\u8f7d\u8f6f\u4ef6\u7684\u547d\u540d. Ps: \u6d4f\u89c8\u5668\u5728\u5b98\u7f51\u70b9\u51fb\u5c31\u80fd\u4e0b\u8f7d\u7684\u8f6f\u4ef6\u5305\u8fde\u63a5\u3001\u53f3\u952e\u590d\u5236\u7684\u56fe\u7247\u94fe\u63a5\u90fd\u80fd\u901a\u8fc7wget\u4e0b\u8f7d.. wget http://nginx.org/download/nginx-1.22.0.tar.gz wget -O /opt/nginx.tar.gz http://nginx.org/download/nginx-1.22.0.tar.gz [ root@localhost opt ] # wget -O ./1.jpg https://pics5.baidu.com/feed/6a600c338744ebf8ef9d643e6a39b9226159a708.jpeg?token=64b2865816ad2b3b0e49faf1fd43d8d5 [ root@localhost opt ] # ls 1 .jpg nginx-1.22.0.tar.gz nginx.tar.gz \"\"\" \u5982\u679cwget\u4e0b\u8f7d\u63d0\u793a\u65e0\u6cd5\u5efa\u7acbSSL\u8fde\u63a5,\u5219\u52a0\u4e0a\u9009\u9879--no-check-certificate!!! wget --no-check-certificate -O \u672c\u5730\u8def\u5f84 \u8fdc\u7a0b\u5305\u94fe\u63a5\u5730\u5740 \"\"\"","title":"wget\u4e0b\u8f7d"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#curl","text":"curl\u547d\u4ee4\u662f\u4e00\u4e2a\u5229\u7528URL\u89c4\u5219\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177. curl\u7684\u4e3b\u8981\u529f\u80fd\u7528\u4e8e\u6d4b\u8bd5\uff01 \u4e0b\u8f7d \uff1a curl -o \u6587\u4ef6\u8def\u5f84 \u8fdc\u7a0b\u94fe\u63a5 \u4e0b\u8f7d\u6210\u529f\u540e,\u6587\u4ef6\u4f1a\u4fdd\u5b58\u672c\u5730. <\u6d4b\u8bd5> \uff1a curl \u8fdc\u7a0b\u94fe\u63a5 \u4f1a\u663e\u793a\u4e0b\u8f7d\u7684\u5185\u5bb9,\u4f46 \u6587\u4ef6\u4e0d\u4f1a\u4fdd\u5b58\u5230\u672c\u5730 \uff01\u4e0d\u5360\u7528\u672c\u5730\u786c\u76d8\u7a7a\u95f4. [ root@localhost opt ] # curl -o ./2.jpg https://pics5.baidu.com/feed/6a600c338744ebf8ef9d643e6a39b9226159a708.jpeg?token=64b2865816ad2b3b0e49faf1fd43d8d5 [ root@localhost opt ] # curl -o /opt/nginx2.tar.gz http://nginx.org/download/nginx-1.22.0.tar.gz % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 1048k 100 1048k 0 0 191k 0 0 :00:05 0 :00:05 --:--:-- 232k [ root@localhost opt ] # ls 1 .jpg 2 .jpg nginx-1.22.0.tar.gz nginx2.tar.gz nginx.tar.gz \"\"\" \u5982\u679ccurl\u9047\u5230\u4e0b\u8f7d\u63d0\u793a\u65e0\u6cd5\u5efa\u7acbSSL\u94fe\u63a5,\u4f7f\u7528-k\u9009\u9879\u6216\u8005--insecure curl -k -o \u672c\u5730\u8def\u5f84 \u8fdc\u7a0b\u5305\u94fe\u63a5\u5730\u5740 \"\"\" \u3010\u538b\u529b\u6d4b\u8bd5\u3011\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e0d\u65ad\u7684\u5411\u767e\u5ea6\u7f51\u9875\u53d1\u9001\u8bf7\u6c42. \u6084\u6084\u8bdd: \u4e0a\u7f51\u5c31\u662f\u4e00\u4e2a\u4e0d\u65ad\u4e0a\u4f20 ( \u6ce8\u518c,\u652f\u4ed8 ) \u4e0b\u8f7d ( \u6253\u5f00\u7f51\u9875 ) \u7684\u8fc7\u7a0b! [ root@localhost opt ] # while true; do curl https://www.baidu.com/; done","title":"curl\u6d4b\u8bd5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#szrz","text":"\u9700\u8981\u5148\u4e0b\u8f7d\u4f9d\u8d56\u7684\u8f6f\u4ef6\u5305 yum install lrzsz -y sz,rz \u662fLinux/Unix\u540c Windows \u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\u7684\u547d\u4ee4\u884c\u5de5\u5177 \"\"\" sz linux ==> windows \u25b2 \u5c06linux\u670d\u52a1\u5668\u4e0a\u9009\u5b9a\u7684\u6587\u4ef6\u4e0b\u8f7d/\u53d1\u9001\u5230windows\u7aef \u6ce8\u610f\u54e6,\u6709\u4e2a\u524d\u63d0,\u4f7f\u7528\u6b64\u547d\u4ee4\u7684\u6240\u5728\u7ec8\u7aef\u8981\u6709\u5f39\u51fa\u56fe\u5f62\u7a97\u53e3\u7684\u673a\u5236. \u6240\u4ee5windows\u4e0a\u7684xshll\u4f7f\u7528\u6b64\u547d\u4ee4\u53ef\u4ee5,\u4f46linux\u670d\u52a1\u5668\u4e0a\u7684\u7ec8\u7aef\u4f7f\u7528\u5c31\u4f1a\u51fa\u9519. \"\"\" [ root@localhost opt ] # sz nginx.tar.gz \"\"\" rz windows ==> linux \u25b2 \u8fd0\u884c\u8be5\u547d\u4ee4\u4f1a\u5f39\u51fa\u4e00\u4e2a\u6587\u4ef6\u9009\u62e9\u7a97\u53e3,\u4ece\u672c\u5730\u9009\u62e9\u6587\u4ef6\u4e0a\u4f20\u5230linux\u670d\u52a1\u5668. \u5982\u679clinux\u4e3b\u673a\u4e0a\u76ee\u6807\u6587\u4ef6\u540d\u5df2\u7ecf\u5b58\u5728,\u5219\u4e0a\u4f20\u5931\u8d25,\u53ef\u4ee5\u7528-E\u9009\u9879\u89e3\u51b3 rz -E \u91cd\u547d\u540d\u4f20\u5165\u6587\u4ef6,\u65b0\u6587\u4ef6\u540d\u5c06\u6dfb\u52a0\u4e00\u4e2a\u70b9\u548c\u4e00\u4e2a\u6570\u5b57(0..999\uff09 \"\"\" [ root@localhost opt ] # rz","title":"sz/rz"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_8","text":"","title":"\u8f93\u51fa/\u5165\u4e0e\u91cd\u5b9a\u5411"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_9","text":"\u6b63\u5e38\u8f93\u51fa\u662f\u628a \u5185\u5bb9 \u8f93\u51fa\u5230\u663e\u793a\u5668\u4e0a,\u800c\u8f93\u51fa\u91cd\u5b9a\u5411\u662f \u628a\u5185\u5bb9\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d > \u8986\u76d6; >> \u8ffd\u52a0. 1> 2> &> ps: 1 2\u6307\u7684\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26 \u8be6\u89c119_\u7cfb\u7edf\u4f18\u5316.md ulimit \u90e8\u5206\u7684\u5185\u5bb9 [ root@localhost opt ] # ls [ root@localhost opt ] # ifconfig > a.txt [ root@localhost opt ] # head -5 a.txt ens33: flags = 4163 <UP,BROADCAST,RUNNING,MULTICAST> mtu 1500 inet 172 .16.150.131 netmask 255 .255.255.0 broadcast 172 .16.150.255 inet6 fe80::20c:29ff:fe90:303e prefixlen 64 scopeid 0x20<link> ether 00 :0c:29:90:30:3e txqueuelen 1000 ( Ethernet ) RX packets 164409 bytes 161330384 ( 153 .8 MiB ) [ root@localhost opt ] # echo \"123\" >> a.txt [ root@localhost opt ] # pwd >> a.txt [ root@localhost opt ] # tail -2 a.txt 123 /opt [ root@localhost opt ] # echo \"haha\" > a.txt [ root@localhost opt ] # cat a.txt haha \u4e00\u6761\u547d\u4ee4\u7684\u6267\u884c\u4ea7\u751f\u7684\u7ed3\u679c\u5185\u5bb9\u53ef\u80fd\u662f\u6b63\u786e\u7684\u4e5f\u6709\u53ef\u80fd\u662f\u9519\u8bef\u7684. \u56e0\u800c\u5728linux\u4e2d, 0 \u4ee3\u8868\u6807\u51c6\u8f93\u5165; 1 \u4ee3\u8868\u6807\u51c6\u6b63\u786e\u8f93\u51fa; 2 \u4ee3\u8868\u6807\u51c6\u9519\u8bef\u8f93\u51fa. \"\"\" \u547d\u4ee4\u9519\u8bef\u7ed3\u679c\u662f\u4e0d\u80fd\u76f4\u63a5\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d\u7684. \u547d\u4ee4\u6b63\u786e\u7684\u7ed3\u679c\u53ef\u4ee5. \u5373\u5355\u72ec\u5199 > \u76f8\u5f53\u4e8e\u662f 1> \"\"\" [ root@localhost opt ] # ifconfig ensxx ensxx: error fetching interface information: Device not found [ root@localhost opt ] # ifconfig ensxx > b.txt ensxx: error fetching interface information: Device not found \u25b2 \u5c06\u547d\u4ee4\u6b63\u786e\u7684\u7ed3\u679c\u8f93\u5230a.txt\u91cc,\u9519\u8bef\u7684\u7ed3\u679c\u8f93\u5230b.txt\u91cc \u6ce8\u610f: 1> 2> 1\u548c2\u4e0e>\u4e2d\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c! \u8fbe\u5230\u8f93\u51fa\u7ed3\u679c\u5206\u6d41\u7684\u6548\u679c. [ root@localhost opt ] # ifconfig ensxx 1>a.txt 2>b.txt [ root@localhost opt ] # cat a.txt [ root@localhost opt ] # cat b.txt ensxx: error fetching interface information: Device not found \u25b2 \u5c06\u547d\u4ee4\u4e0d\u7ba1\u6b63\u786e\u8fd8\u662f\u9519\u8bef\u7684\u7ed3\u679c\u90fd\u8f93\u51fa\u5230\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d Ps: \u8fd8\u6709\u4e00\u79cd\u5199\u6cd5\u80fd\u8fbe\u5230\u4e00\u6837\u7684\u6548\u679c ( \u4e86\u89e3\u5373\u53ef ) ` ifconfig ensxx > c.txt 2 & >1 ` [ root@localhost opt ] # ifconfig ensxx &> c.txt [ root@localhost opt ] # pwd &>> c.txt [ root@localhost opt ] # cat c.txt ensxx: error fetching interface information: Device not found /opt Q: \u4ec0\u4e48\u65f6\u5019\u4f7f\u7528 &> &>> ? A: 1> \u53ea\u9700\u8981\u6b64\u547d\u4ee4\u5b8c\u6210\u67d0\u4e2a\u64cd\u4f5c,\u5e76\u4e14\u9a8c\u8bc1\u540e\u5f88\u6e05\u695a\u7684\u77e5\u9053\u6b64\u547d\u4ee4\u7684\u7ed3\u679c\u662f\u6ca1\u6709\u95ee\u9898; \u5f53\u628a\u6b64\u547d\u4ee4\u653e\u5230\u811a\u672c\u7a0b\u5e8f\u91cc\u65f6,\u5c31\u4e0d\u9700\u8981\u8f93\u51fa\u7ed3\u679c\u5566. eg ls &>/dev/null \u76f4\u63a5 \u4e22\u5230\u9ed1\u6d1e\u6587\u4ef6 \u91cc. 2> \u4e00\u5806\u547d\u4ee4\u7684\u7ed3\u679c(\u811a\u672c\u6587\u4ef6/\u7a0b\u5e8f) &>> \u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\u91cc,\u65b9\u4fbf\u67e5\u770b.","title":"&gt; &gt;&gt;\u8f93\u51fa\u91cd\u5b9a\u5411"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_10","text":"[ root@localhost opt ] # cat /etc/hostname localhost.localdomain [ root@localhost opt ] # echo 111 > d.txt [ root@localhost opt ] # cat d.txt 111 \u25bc \u8868\u793a\u5f80d.txt\u91cc\u8986\u76d6\u7684\u5185\u5bb9\u6765\u81ea/etc/hostname\u6587\u4ef6 \u7b49\u540c\u4e8e cat /etc/hostname > d.txt [ root@localhost opt ] # cat > d.txt < /etc/hostname [ root@localhost opt ] # cat d.txt localhost.localdomain \u25bc \u8868\u793a\u5f80d.txt\u91cc\u8ffd\u52a0\u7684\u5185\u5bb9\u6765\u81ea/etc/hostname\u6587\u4ef6 \u7b49\u540c\u4e8e cat /etc/hostname >> d.txt [ root@localhost opt ] # cat >> d.txt < /etc/hostname [ root@localhost opt ] # cat d.txt localhost.localdomain localhost.localdomain \u25bc \u7b49\u5f85\u952e\u76d8\u7684\u8f93\u5165 EOF\u8868\u793a\u7ed3\u675f\u8f93\u5165,\u8fd9\u4e2a\u53ef\u4ee5\u81ea\u5df1\u8bbe\u5b9a. \u5efa\u8bae\u7528EOF. [ root@localhost opt ] # cat > d.txt << EOF > 111 > 222 > EOF [ root@localhost opt ] # cat d.txt 111 222 [ root@localhost opt ] # cat >> d.txt << AAA > 333 > 444 > AAA [ root@localhost opt ] # cat d.txt 111 222 333 444","title":"&lt; &lt;&lt;\u8f93\u5165\u91cd\u5b9a\u5411"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_11","text":"","title":"\u5b57\u7b26\u5904\u7406\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#sort","text":"\u7528\u4e8e\u5c06\u6587\u4ef6\u5185\u5bb9\u52a0\u4ee5\u6392\u5e8f -t \u6307\u5b9a\u5206\u5272\u7b26, \u9ed8\u8ba4\u662f\u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26 -n \u6309\u7167\u6570\u503c\u7684\u5927\u5c0f\u6392\u5e8f \u6307\u5b9a\u540e11\u662f\u6570\u503c11,\u800c\u4e0d\u662f\u5b57\u7b26\u4e3211 -k \u4ee5\u67d0\u5217\u8fdb\u884c\u6392\u5e8f k2\u5c31\u662f\u7b2c\u4e8c\u5217 -r \u4ee5\u76f8\u53cd\u7684\u987a\u5e8f\u6765\u6392\u5e8f [\u65e0\u5e8f\u6570\u636e\u51c6\u5907] [ root@localhost opt ] # cat >> file.txt <<EOF > b:3 > c:2 > a:4 > d:1 > f:11 > EOF [ root@localhost opt ] # cat file.txt b:3 c:2 a:4 d:1 f:11 [\u9ed8\u8ba4\u4ee5ACSII\u5b57\u7b26\u8868\u6bd4\u5927\u5c0f] \u6bcf\u4e2a\u5b57\u7b26\u90fd\u4f1a\u5bf9\u5e94\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u5b57,\u5728\u8ba1\u7b97\u673a\u91cc\u4f1a\u8f6c\u6362\u6210\u4e8c\u8fdb\u5236\u4f53\u73b0. \u5b57\u7b26\u4e32\u7b2c\u4e00\u4e2a\u5b57\u7b26\u6bd4\u8f83\u51fa\u6765\u4e86,\u5c31\u4e0d\u4f1a\u6bd4\u8f83\u7b2c\u4e8c\u4e2a\u5566.. python\u4e2d\u4e5f\u662f. [ root@localhost opt ] # sort file.txt a:4 b:3 c:2 d:1 f:11 [\u4ee5\u5192\u53f7\u53f3\u8fb9\u7684\u6570\u503c\u6bd4\u5927\u5c0f] \u82e5\u4e0d\u6307\u5b9a-n,\u4f1a\u88ab\u5f53\u4f5c\u5b57\u7b26\u4e32,\u7528ACSII\u7801\u6bd4\u8f83. [ root@localhost opt ] # sort -t \":\" -n -k2 file.txt d:1 c:2 b:3 a:4 f:11 [ root@localhost opt ] # sort -t \":\" -k2 file.txt d:1 f:11 c:2 b:3 a:4 [-r\u53cd\u5411\u6392\u5e8f] [ root@localhost opt ] # sort -t \":\" -n -r -k2 file.txt f:11 a:4 b:3 c:2 d:1","title":"sort \u6392\u5e8f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#uniq","text":"\u53bb\u91cd. \u7528\u4e8e\u68c0\u67e5\u53ca\u5220\u9664\u6587\u672c\u6587\u4ef6\u4e2d \u76f8\u90bb\u91cd\u590d \u51fa\u73b0\u7684\u884c\u5217, \u6240\u4ee5\u4e00\u822c\u4e0e sort \u547d\u4ee4\u7ed3\u5408\u4f7f\u7528 -c \u5728\u6bcf\u5217\u65c1\u8fb9\u663e\u793a\u8be5\u884c\u91cd\u590d\u51fa\u73b0\u7684\u6b21\u6570 -d \u4ec5\u663e\u793a\u91cd\u590d\u51fa\u73b0\u7684\u884c\u5217 -u \u4ec5\u663e\u793a\u51fa\u4e00\u6b21\u7684\u884c\u5217 [ root@localhost opt ] # cat file.txt hello 123 hello 123 123 func \"\"\" \u6ce8\u610f\u89c2\u5bdf,\u76f4\u63a5\u4f7f\u7528uniq\u547d\u4ee4,\u53ea\u4f1a\u4f7f\u539f\u6570\u636e\u4e2d\u76f8\u90bb\u7684\u4e24\u4e2a123\u53bb\u91cd. \u6240\u4ee5\u9700\u8981sort\u547d\u4ee4\u5c06\u91cd\u590d\u7684\u5168\u90e8\u653e\u5230\u4e00\u8d77 \"\"\" [ root@localhost opt ] # uniq file.txt hello 123 hello 123 func [ root@localhost opt ] # sort file.txt | uniq 123 func hello [ root@localhost opt ] # sort file.txt | uniq -c 3 123 1 func 2 hello [ root@localhost opt ] # sort file.txt | uniq -d 123 hello [ root@localhost opt ] # sort file.txt | uniq -u func","title":"uniq \u53bb\u91cd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#cut","text":"\u7528\u6765\u663e\u793a\u884c\u4e2d\u7684\u6307\u5b9a\u90e8\u5206,\u5220\u9664\u6587\u4ef6\u4e2d\u6307\u5b9a\u5b57\u6bb5 cut\u652f\u6301\u7ba1\u9053\u7b26! \u5410\u69fd : awk\u5b8c\u5168\u53ef\u4ee5\u53d6\u4ee3cut\u7684\u529f\u80fd -d \u6307\u5b9a\u5b57\u6bb5\u7684\u5206\u9694\u7b26 -f \u663e\u793a\u6307\u5b9a\u5206\u6bb5\u7684\u5185\u5bb9 -f1-3 -f1,3,4 [ root@localhost opt ] # head -1 /etc/passwd root:x:0:0:root:/root:/bin/bash [ root@localhost opt ] # head -1 /etc/passwd | cut -d \":\" -f1,3,4,6 root:0:0:/root \"\"\" -f1,2,3 \u7b49\u540c\u4e8e -f1-3 \"\"\" Ps: \u5206\u9694\u7b26\u662f\u7a7a\u683c \u5fc5\u987b\u7528\u5f15\u53f7 cut -d \" \" ; \u5176\u4f59\u7684\u90fd\u53ef\u4ee5\u4e0d\u7528\u5f15\u53f7 cut -d: cut -d;","title":"cut \u5206\u5272"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#tr","text":"\u7528\u4e8e\u66ff\u6362\u6216\u5220\u9664. \u6ce8\u610f: \u66ff\u6362\u7684\u5b57\u7b26\u662f\u4e00\u4e00\u5bf9\u5e94\u7684,\u4e0d\u662f\u6307\u6574\u4e2a\u5b57\u7b26\u4e32! tr\u662f\u652f\u6301\u7ba1\u9053\u7684. \u5410\u69fd : sed\u914d\u5408\u7ba1\u9053\u4e5f\u80fd\u8fbe\u5230\u540c\u6837\u7684\u66ff\u6362\u6548\u679c. [ root@localhost opt ] # head -1 /etc/passwd root:x:0:0:root:/root:/bin/bash \"\"\" \u66ff\u6362 \u6ce8\u610f: \u66ff\u6362\u7684\u5b57\u7b26\u662f\u4e00\u4e00\u5bf9\u5e94\u7684,\u4e0d\u662f\u6574\u4e2a\u5b57\u7b26\u4e32! \"\"\" [ root@localhost opt ] # head -1 /etc/passwd |tr \"root\" \"ROOT\" ROOT:x:0:0:ROOT:/ROOT:/bin/bash [ root@localhost opt ] # echo \"hello egon yyds\" > a.txt [ root@localhost opt ] # cat a.txt hello egon yyds [ root@localhost opt ] # tr \"egon\" \"ABCD\" < a.txt hAllC ABCD yyds \"\"\" \u5220\u9664 \"\"\" [ root@localhost opt ] # head -1 /etc/passwd |tr -d \"root\" :x:0:0::/:/bin/bash","title":"tr \u66ff\u6362\u5220\u9664"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#wc","text":"\u7528\u4e8e\u7edf\u8ba1,\u8ba1\u7b97\u6570\u5b57 wc\u662f\u652f\u6301\u7ba1\u9053\u7684 -c \u7edf\u8ba1\u6587\u4ef6\u7684Bytes\u6570 -l \u7edf\u8ba1\u6587\u4ef6\u7684\u884c\u6570 -w \u7edf\u8ba1\u6587\u4ef6\u4e2d\u5355\u8bcd\u7684\u4e2a\u6570, \u9ed8\u8ba4\u4ee5\u7a7a\u767d\u5b57\u7b26(\u5305\u62ec\u6362\u884c\u7b26)\u505a\u4e3a\u5206\u9694\u7b26 [ root@localhost opt ] # ll /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 4 16 :51 /etc/passwd [ root@localhost opt ] # wc -c /etc/passwd 2351 /etc/passwd [ root@localhost opt ] # wc -l /etc/passwd 45 /etc/passwd # \u7b49\u540c\u4e8e wc -l /etc/passwd | cut -d\" \" -f1 [ root@localhost opt ] # cat /etc/passwd | wc -l 45 [ root@localhost opt ] # cat file.txt abc_123 b_1_2 aaabb 111 ; ccc egonyyds [ root@localhost opt ] # wc -w file.txt 7 file.txt \"\"\" \u25b2 \u7edf\u8ba1\u7cfb\u7edf\u73b0\u76ee\u524d\u7cfb\u7edf\u4e2d\u6709\u591a\u5c11\u4e2a\u8fdb\u7a0b grep -v \" ps aux \" \u662f\u56e0\u4e3a\u5f53\u524d\u8fd9\u6761\u547d\u4ee4\u4e5f\u4f1a\u4ea7\u751f\u4e00\u4e2a\u8fdb\u7a0b \"\"\" [ root@localhost opt ] # ps aux | grep -v \"ps aux\" | wc -l 203","title":"wc \u7edf\u8ba1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#tarzip","text":"\u6253\u5305\u4f1a\u5c06\u591a\u4e2a\u6587\u4ef6\u5f52\u96c6\u5230\u4e00\u8d77,\u538b\u7f29\u4f1a\u51cf\u5c11\u5360\u7528\u7684\u7a7a\u95f4. \u7528\u9014: (1)\u65b9\u4fbf\u52a0\u5feb\u7f51\u7edc\u4f20\u8f93; (2)\u505a\u5907\u4efd [\u65b9\u5f0f\u4e00 tar] \u6253\u5305: tar cvf bak.tar a.txt b.txt c.txt \u538b\u7f29: gzip bak.tar or bzip2 bak.tar \u6253\u5305\u538b\u7f29: tar cvzf bak.tar.gz a.txt b.txt c.txt tar cvjf bak.tar.bz2 a.txt b.txt c.txt \u89e3\u538b\u7f29: tar xvf \u6253\u5305\u538b\u7f29\u6587\u4ef6 -C \u89e3\u538b\u5230\u7684\u76ee\u5f55 \u9009\u9879 \u542b\u4e49 c \u521b\u5efa\u6253\u5305\u538b\u7f29\u6587\u4ef6 -- \u6253\u5305\u6587\u4ef6\u4ee5 .tar \u4e3a\u540e\u7f00 v \u663e\u793a\u6253\u5305\u7684\u8fc7\u7a0b f \u4e3a\u6253\u5305 or \u6253\u5305\u538b\u7f29\u540e\u7684\u6587\u4ef6\u547d\u540d / \u89e3\u538b\u7f29\u65f6\u6307\u5b9a\u9700\u8981\u89e3\u538b\u7684\u6253\u5305\u538b\u7f29\u6587\u4ef6 z \u4f7f\u7528gzip\u538b\u7f29\u7b97\u6cd5 -- \u4ee5 .gz \u7ed3\u5c3e j \u4f7f\u7528bzip2\u538b\u7f29\u7b97\u6cd5 -- \u4ee5 .bz2 \u7ed3\u5c3e x \u89e3\u538b\u7f29 -C \u6307\u5b9a\u89e3\u538b\u5230\u7684\u76ee\u5f55, \u6b64\u76ee\u5f55\u9700\u8981\u4e8b\u5148\u5b58\u5728 Ps: \u538b\u7f29\u5305\u7684\u540e\u7f00\u4e0d\u643a\u5e26\u4e0d\u4f1a\u62a5\u9519,\u4f46 \u7ea6\u5b9a\u4fd7\u6210\u8981\u643a\u5e26\u4fbf\u4e8e\u533a\u5206 ! \u666e\u901a\u6587\u4ef6\u538b\u7f29\u540e\u4f1a\u5c0f\u5f88\u591a;\u89c6\u9891\u6587\u4ef6\u538b\u7f29\u4e0d\u4e86\u591a\u5c11\u7a7a\u95f4..(\u538b\u7f29\u5c31\u662f\u6e05\u7406\u7a7a\u683c\u6362\u884c\u5565\u7684) [\u65b9\u5f0f\u4e8c zip] \u6253\u5305\u538b\u7f29: zip bak.zip a.txt b.txt c.txt \u89e3\u538b\u7f29: unzip bak.zip -d \u89e3\u538b\u5230\u7684\u76ee\u5f55 Ps: \u82e5\u5e0c\u671bwindows\u7684\u8f6f\u4ef6\u80fd\u88ablinux\u89e3\u538b,\u6216\u8005linux\u7684\u8f6f\u4ef6\u5305\u88abwindows\u80fd\u8bc6\u522b,\u9009\u62e9 zip \uff01 [\u6269\u5c55] \u6253\u5305\u538b\u7f29\u901a\u5e38\u7528\u4e8e\u5907\u4efd\u6587\u4ef6. \u5907\u4efd\u6587\u4ef6\u7684\u540d\u5b57\u5fc5\u987b\u89c1\u540d\u77e5\u610f\u4e14\u5e94\u8be5\u5e26\u4e0a\u65f6\u95f4\u3001\u4e3b\u673a\u540d\u4e4b\u7c7b ,\u4fbf\u4e8e\u6570\u636e\u6062\u590d\u65f6\u627e\u5230\u9700\u8981\u7684\u90a3\u4e2a\u65f6\u95f4\u70b9\u7684\u5907\u4efd. \"\"\" ``\u53cd\u5f15\u53f7\u4ee3\u8868\u83b7\u53d6\u547d\u4ee4\u7684\u8fd0\u884c\u7ed3\u679c\uff01 \"\"\" tar czvf ` date + \"%Y_%m_%d_%H_%M_%S\" ` _bak.tar.gz /etc [ root@localhost opt ] # date +\"%Y_%m_%d_%H_%M_%S %p\" 2022_07_15_11_33_19 \u4e0a\u5348 date\u65f6\u95f4\u7684\u5177\u4f53\u4f7f\u7528: https://zhuanlan.zhihu.com/p/325728987 \u8be6\u60c5\u8bf7\u770b< 8 \u62d3\u5c55>\u90a3\u91cc","title":"tar/zip"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_12","text":"\"\"\" \u6253\u5305\u7684\u76ee\u6807\u8def\u5f84\u5982\u679c\u662f\u7edd\u5bf9\u8def\u5f84,\u4f1a\u63d0\u793a tar:\u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d \u4f46\u8fd9\u63d0\u793a\u4e0d\u4f1a\u5f71\u54cd\u6253\u5305 \u53ef\u4ee5cd\u5230/etc\u76ee\u5f55\u4e0b\u5bf9\u6587\u4ef6\u8fdb\u884c\u6253\u5305,\u8fd9\u6837\u7684\u8bdd\u5c31\u4f1a\u5c11\u4e00\u5c42\u6587\u4ef6\u5939 \u6ce8\u610f\u89c2\u5bdf: bak.tar \u6253\u5305\u6587\u4ef6 10240\u4e2a\u5b57\u8282 bak.tar.gz \u6253\u5305\u538b\u7f29\u6587\u4ef6 1170\u4e2a\u5b57\u8282 \u518d\u89c2\u5bdf\u6253\u5305\u8fc7\u7a0b,\u5b83\u4f1a\u81ea\u52a8\u5e26\u6709\u6587\u4ef6\u7684\u6587\u4ef6\u5939. \"\"\" [ root@localhost opt ] # tar cvf bak.tar /etc/passwd /etc/hosts /etc/hostname tar: \u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d /etc/passwd /etc/hosts /etc/hostname [ root@localhost opt ] # ll \u603b\u7528\u91cf 12 -rw-r--r-- 1 root root 10240 7\u6708 15 10 :10 bak.tar [ root@localhost opt ] # gzip bak.tar [ root@localhost opt ] # ll \u603b\u7528\u91cf 4 -rw-r--r-- 1 root root 1170 7\u6708 15 10 :10 bak.tar.gz \"\"\" \u52a0P\u9009\u9879,\u5219\u2018tar:\u4ece\u6210\u5458\u540d\u4e2d\u5220\u9664\u5f00\u5934\u7684\u201c/\u201d\u2019\u8fd9\u4e2a\u63d0\u793a\u4fe1\u606f\u4e0d\u4f1a\u518d\u663e\u793a \u6ce8\u610f\u89c2\u5bdf: bak2.tar.gz 1170\u5b57\u8282 bak3.tar.bz2 1180\u5b57\u8282 \u8bf4\u660egzip\u538b\u7f29\u7b97\u6cd5\u6bd4bzip2\u538b\u7f29\u7b97\u6cd5\u538b\u7f29\u7684\u66f4\u591a! \"\"\" tar cvzPf bak2.tar.gz /etc/passwd /etc/hosts /etc/hostname tar cvjPf bak3.tar.bz2 /etc/passwd /etc/hosts /etc/hostname [ root@localhost opt ] # ll \u603b\u7528\u91cf 16 -rw-r--r-- 1 root root 1170 7\u6708 15 10 :10 bak2.tar.gz -rw-r--r-- 1 root root 1180 7\u6708 15 10 :11 bak3.tar.bz2 -rw-r--r-- 1 root root 1170 7\u6708 15 10 :10 bak.tar.gz","title":"\u6253\u5305\u538b\u7f29\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/4_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85/#_13","text":"\"\"\" \u65e0\u9700\u6307\u5b9a\u89e3\u538b\u7b97\u6cd5,tar\u4f1a\u81ea\u884c\u5224\u65ad,\u81ea\u52a8\u8c03\u7528gunzip\u548cbunzip2! \u4e0d\u6307\u5b9a-C,\u5219\u4f1a\u89e3\u538b\u5230\u5f53\u524d\u76ee\u5f55\u4e0b. \"\"\" [ root@localhost opt ] # mkdir test [ root@localhost opt ] # tar xvf bak.tar.gz -C /opt/test etc/passwd etc/hosts etc/hostname [ root@localhost opt ] # ll test/etc \u603b\u7528\u91cf 12 -rw-r--r-- 1 root root 22 6\u6708 30 18 :35 hostname -rw-r--r-- 1 root root 158 6\u6708 7 2013 hosts -rw-r--r-- 1 root root 2351 7\u6708 4 16 :51 passwd","title":"\u89e3\u538b\u7f29"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/","text":"\u6587\u4ef6\u7cfb\u7edf\u4ecb\u7ecd \u00b6 \u6587\u4ef6\u7cfb\u7edffilesystem\u662f\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4e2d\u8d1f\u8d23\u7ec4\u7ec7\u7ba1\u7406\u78c1\u76d8\u7684\u7a0b\u5e8f. \u662fOS\u7684\u4e00\u90e8\u5206. \u5728\u8d77\u521d\u7ed9vm\u865a\u673a\u5b89\u88c5centos\u64cd\u4f5c\u7cfb\u7edf\u65f6,\u6211\u4eec\u5bf9\u786c\u76d8\u8fdb\u884c\u4e86\u5206\u533a eg / /boot swap \u6bcf\u4e00\u4e2a\u5206\u533a/\u5206\u9694\u69fd\u90fd\u9700\u8981\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7ba1\u7406. \u5e38\u89c1\u7684 \u6587\u4ef6\u7cfb\u7edf \u6709 xfs \u3001ext4 \u548c btrfs. \u53ef\u4ee5\u6bcf\u4e2a\u5206\u533a\u90fd\u7528\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf,\u4f46\u901a\u5e38\u90fd\u662f\u4e00\u6837\u7684.. centos7\u91cc\u7528\u7684\u662fxfs ; centos6\u53ca\u4ee5\u524d\u7528\u7684\u662fext4. xfs\u3001ext4\u90fd\u652f\u6301\u65e5\u5fd7 [\u4e86\u89e3\u77e5\u8bc6] \u5410\u69fd: \u542c\u5230egon\u8bf4\u4ed6\u4ee5\u524d\u505a\u8fc7cf,\u522b\u61f5\u903c\u4e86..\u5c31\u662f\u6307\u65e5\u5fd7\u6587\u4ef6\u7cfb\u7edfCLFS!(\u00b4\u25bd\uff40) Please be professional\uff01 xfs\u3001ext4\u90fd\u652f\u6301\u65e5\u5fd7,\u65e5\u5fd7\u7528\u4e8e\u8bb0\u5f55\u64cd\u4f5c.\u5185\u5b58\u5f80\u78c1\u76d8\u91cc\u5199\u6570\u636e\u7684\u65f6\u5019,\u4f1a\u5148\u5c06\u76f8\u5e94\u7684\u64cd\u4f5c\u8bb0\u5f55\u5728\u65e5\u5fd7\u91cc. Q:\u5982\u4f55\u6253\u9020\u4e00\u4e2a\u6781\u81f4\u7684CLFS\u65e5\u5fd7\u6587\u4ef6\u7cfb\u7edf\uff1f \u65e5\u5fd7\u6587\u4ef6\u7cfb\u7edf\u5148\u8bb0\u5f55\u64cd\u4f5c,\u518d\u5b8c\u6210\u6570\u636e\u7684\u5199\u5165..\u65ad\u7535\u540e\u53ef\u6839\u636e\u65e5\u5fd7\u7ee7\u7eed\u672a\u5b8c\u6210\u7684\u64cd\u4f5c.. A:\u51c6\u5907\u591a\u5757\u76d8,\u505aRAID(\u524d\u6587\"\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210\"\u90e8\u5206\u6709\u4ecb\u7ecd).\u7528\u4e24\u4e09\u5757\u56fa\u6001\u505a\u65e5\u5fd7,\u5176\u4ed6\u76d8\u5b58\u6570\u636e. CLFS\u7684\u7279\u70b9\u662f\u5199\u6570\u636e\u5148\u5f80\u505a\u65e5\u5fd7\u7684\u56fa\u6001\u91cc\u5199,\u65e5\u5fd7\u91cc\u4f1a\u8bb0\u5f55\u76f8\u5e94\u7684\u64cd\u4f5c,\u518d\u6839\u636e\u8fd9\u4e9b\u64cd\u4f5c\u5f80\u5176\u4ed6\u76d8\u91cc\u5199\u771f\u6b63\u7684\u6570\u636e. \u6b63\u56e0\u4e3a\u65e5\u5fd7\u91cc\u6709\u76f8\u5e94\u7684\u64cd\u4f5c\u8bb0\u5f55,\u6240\u4ee5\u53ef\u901a\u8fc7\u65e5\u5fd7\u6765\u5b8c\u6210\u6570\u636e\u7684\u56de\u590d.(\u89e3\u51b3\u7cfb\u7edf\u5d29\u6e83\u6216\u8005\u6389\u7535\u6570\u636e\u4e22\u5931\u7684\u95ee\u9898) Ps: \u63d0\u4e00\u5634,\u505araid\u5c06\u591a\u5757\u78c1\u76d8\u5408\u6210\u4e00\u5757,\u5bf9inode\u7684\u603b\u91cf\u6ca1\u6709\u5f71\u54cd,inode\u5f52\u6587\u4ef6\u7cfb\u7edf\u7ba1,\u662f\u4e00\u5b9a\u7684. xfs\u4e3a\u5565\u662f\u73b0\u5728\u7684\u4e3b\u6d41\uff1f 1> xfs\u7684\u5e95\u5c42\u6548\u7387\u6bd4ext4\u9ad8; 2> xfs\u652f\u6301\u5927\u800c\u591a\u7684\u6587\u4ef6! 3> btrfs(B-tree\u6587\u4ef6\u7cfb\u7edf)\u7684\u8bfb\u5199\u901f\u5ea6\u662f\u6700\u5feb\u7684,\u4f46\u5b83\u5bf9cpu\u5185\u5b58\u7684\u5360\u7528\u975e\u5e38\u5927.\u800c\u4e14\u6781\u4e0d\u7a33\u5b9a. Ps: \u4f5c\u4e3a\u4e13\u4e1a\u4eba\u58eb,\u63d0\u5206\u533a\u7684\u6982\u5ff5\u6bd4\u8f83\u5c11,\u90fd\u662f\u8bf4\u54ea\u54ea\u4e2a\u6587\u4ef6\u7cfb\u7edf,\u8981\u77e5\u9053, \u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e00\u5b9a\u662f\u5173\u8054\u4e00\u4e2a\u5177\u4f53\u7684\u5206\u533a. \"\"\" \u6587\u4ef6\u7cfb\u7edf \u6587\u4ef6\u7cfb\u7edf \u6587\u4ef6\u7cfb\u7edf \u5206\u533a1 \u5206\u533a2 \u5206\u533a3 \"\"\" [ root@localhost opt ] # ll /dev/sda brw-rw---- 1 root disk 8 , 0 7\u6708 4 22 :54 /dev/sda [ root@localhost opt ] # ll /dev/sda1 brw-rw---- 1 root disk 8 , 1 7\u6708 4 22 :54 /dev/sda1 [ root@localhost opt ] # ll /dev/sda2 brw-rw---- 1 root disk 8 , 2 7\u6708 4 22 :54 /dev/sda2 \"\"\" df \u5373disk filesystem\u4e4b\u610f \u67e5\u770b\u7684\u662f\u786c\u76d8\u7684\u6587\u4ef6\u7cfb\u7edf \u6ce8\u610f\u89c2\u5bdf\u7ed3\u679c,/dev/sda1\u8fd9\u4e00\u5206\u533a\u662f\u5728\u6587\u4ef6\u7cfb\u7edf\u8fd9\u4e00\u5217\u4e0b\u9762\u7684! /dev/sda1\u5360\u5728\u300a\u786c\u76d8\u7684\u89d2\u5ea6\u300b\u6307\u7684\u662f\u7b2c1\u4e2a\u5206\u9694\u69fd. /dev/sda1\u5360\u5728\u300a\u8f6f\u4ef6\u7684\u89d2\u5ea6\u300b\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf. \u6302\u8f7d\u70b9\u6253\u4e2a\u6bd4\u65b9,\u786c\u76d8\u662f\u4e2a\u6c34\u6876,\u7528\u6728\u677f\u8fdb\u884c\u4e86\u9694\u65ad,\u5212\u5206\u51fa\u6bcf\u4e2a\u533a\u57df\u90fd\u5b89\u88c5\u4e86\u4e2a\u6c34\u9f99\u5934\u7528\u4e8e\u51fa\u6c34. \u901a\u4fd7\u70b9\u6765\u8bb2\u6302\u8f7d\u70b9\u5c31\u662f\u6307\u6bcf\u4e2a\u5206\u533a\u6700\u4e0a\u5c42\u7684\u90a3\u4e2a\u6587\u4ef6\u5939.. \u5c31\u662f\u5206\u533a\u5173\u8054\u7684\u6587\u4ef6\u5939 eg: / /boot .. -h \u78c1\u76d8\u5bb9\u91cf,\u4ee5M\u3001G..\u66f4\u7f8e\u89c2 -i \u78c1\u76d8inode\u53f7\u4f7f\u7528\u60c5\u51b5 -T \u591a\u52a0\u4e00\u5217 \u6587\u4ef6\u7cfb\u7edf\u7684\u7c7b\u578b ps: mount\u547d\u4ee4\u53ef\u67e5\u770b\u6302\u8f7d\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f.. \"\"\" [ root@localhost opt ] # df -h -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b \u5bb9\u91cf \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 devtmpfs devtmpfs 470M 0 470M 0 % /dev tmpfs tmpfs 487M 0 487M 0 % /dev/shm tmpfs tmpfs 487M 15M 472M 4 % /run tmpfs tmpfs 487M 0 487M 0 % /sys/fs/cgroup /dev/mapper/centos-root xfs 17G 4 .6G 13G 27 % / /dev/sda1 xfs 1014M 212M 803M 21 % /boot tmpfs tmpfs 98M 40K 98M 1 % /run/user/0 [ root@localhost opt ] # df -i -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b Inode \u5df2\u7528 ( I ) \u53ef\u7528 ( I ) \u5df2\u7528 ( I ) % \u6302\u8f7d\u70b9 devtmpfs devtmpfs 120231 401 119830 1 % /dev tmpfs tmpfs 124455 1 124454 1 % /dev/shm tmpfs tmpfs 124455 961 123494 1 % /run tmpfs tmpfs 124455 16 124439 1 % /sys/fs/cgroup /dev/mapper/centos-root xfs 8910848 139846 8771002 2 % / /dev/sda1 xfs 524288 347 523941 1 % /boot tmpfs tmpfs 124455 23 124432 1 % /run/user/0 \u6587\u4ef6\u7cfb\u7edf\u5de5\u4f5c\u539f\u7406 \u00b6 \u6587\u4ef6 = \u6587\u4ef6\u5143\u6570\u636e + \u5b9e\u9645\u5185\u5bb9 block\u7684\u5206\u7c7b \u00b6 \u786c\u76d8\u7684\u6700\u5c0f\u5b58\u53d6\u5355\u4f4d -- \u6247\u533a(512kb) \u64cd\u4f5c\u7cfb\u7edf\u7684\u6700\u5c0f\u5b58\u53d6\u5355\u4f4d -- block\u5757(4k) Ps:\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\u8d1f\u8d23\u5c06\u78c1\u76d8\u7684\u591a\u6247\u533a\u7ec4\u7ec7\u6210\u4e00\u4e2a\u4e2a\u7684block\u5757,\u8fd9\u6837OS\u5c31\u53ef\u4ee5\u4e00\u6b21\u6027\u8bfb\u53d6\u4e00\u4e2a\"\u5757\"(block); \u5373\u4e00\u6b21\u6027\u8fde\u7eed\u8bfb\u53d6\u591a\u4e2a\u6247\u533a. \"\u5757\"\u7684\u5927\u5c0f,\u6700\u5e38\u89c1\u7684\u662f4KB,\u5373\u8fde\u7eed\u516b\u4e2asector\u7ec4\u6210\u4e00\u4e2ablock. \u5728\u6587\u4ef6\u7cfb\u7edf\u773c\u91cc,\u4e00\u4e2a\u5206\u533a\u5c31\u662f\u4e00\u5806block\u5757\uff01\u6587\u4ef6\u7cfb\u7edf\u5c06\u5b83\u4eec\u8fdb\u884c\u4e86\u5206\u7c7b: 1> superblock \u8d85\u7ea7\u533a\u5757 \u4e00\u4e2a : \u8bb0\u5f55\u6574\u4e2a\u6863\u6848\u7cfb\u7edf\u7684\u6574\u4f53\u4fe1\u606f,\u5305\u62ecinode\u4e0eblock\u7684\u603b\u91cf\u3001\u4f7f\u7528\u91cf\u3001\u5269\u4f59\u91cf\u7b49 \u521b\u5efa\u6587\u4ef6\u65f6,\u4f1a\u8ddfsuperblock\u7533\u8bf7inode\u548cdata block. 2> inode \u533a\u5757 \u591a\u4e2a : \u653e\u7f6e\u6587\u4ef6\u7684 \u5143\u4fe1\u606f \u5143\u6570\u636e - \u6743\u9650(rwx)\u3001\u62e5\u6709\u8005\u3001\u7fa4\u7ec4\u3001\u65f6\u95f4\u53c2\u6570\u7b49. \u5305\u62ec\u4e00\u4e2a\u6587\u4ef6\u88ab\u5206\u914d\u7684\u4e00\u4e2ainode\u53f7\u4ee5\u53ca\u8be5\u6587\u4ef6\u5bf9\u5e94\u7684\u4e00\u4e2a\u6216\u591a\u4e2adata block\u5757\u53f7\u7801; Ps:\u8bf4\u5728\u524d\u9762,\u4e00\u4e2a\u6587\u4ef6\u53ea\u80fd\u6709\u4e00\u4e2ainode\u53f7,\u4f46\u591a\u4e2a\u6587\u4ef6\u7684inode\u53f7\u53ef\u4ee5\u76f8\u540c -- \u786c\u94fe\u63a5 3> data block \u533a\u5757 \u5269\u4e0b\u7684 : \u82e5\u662f\u6587\u4ef6\u5939 \u653e\u7f6e\u5b50\u6587\u4ef6\u540d\u6216\u8005\u5b50\u6587\u4ef6\u5939\u540d\u7684 inode\u53f7 ; \u82e5\u662f\u6587\u4ef6 \u653e\u7f6e\u6587\u4ef6\u7684 \u5b9e\u9645\u5185\u5bb9 ; Ps: \u6bcf\u4e2ainode \u4e0edata block \u90fd\u6709\u81ea\u5df1\u7684\u7f16\u53f7 \u4e00\u4e2a\u6587\u4ef6 ( \u4e0d\u7ba1\u662f\u6587\u4ef6\u8fd8\u662f\u76ee\u5f55 ) \u5360\u7528\u4e00\u4e2ainode\u5757\u4ee5\u53ca\u4e00\u4e2a\u6216\u8005\u591a\u4e2adata block\u5757! \u6ce8\u610f\u54e6! \u4e00\u4e2a\u6587\u4ef6\u5939/\u76ee\u5f55\u4e5f\u7b97\u662f\u4e00\u4e2a\u6587\u4ef6! \u91cc\u9762\u5b58\u50a8\u7684\u662f\u5b50\u6587\u4ef6\u540d\u548c\u5b50\u6587\u4ef6\u5939\u540d\u7684inode\u7f16\u53f7! So, \u5728linux\u91cc\u6839\u672c\u5c31\u6ca1\u6709\u6587\u4ef6\u5939\u4e00\u8bf4,\u662f\u4e3a\u4e86\u65b9\u4fbf\u9610\u8ff0\u624d\u8fd9\u6837\u8bf4\u7684,\u5b9e\u9645\u4e0a\u5e94\u8be5\u53eb\u505a \u76ee\u5f55\u6587\u4ef6 ! \u8fd9\u6837\u79f0\u547c\u662f\u56e0\u4e3a\u6587\u4ef6\u5939\u91cc\u5b58\u653e\u7684\u662f\u5b50\u6587\u4ef6\u7684inode\u7f16\u53f7,\u5c31\u50cf\u662f\u4e66\u7684\u76ee\u5f55\u4e00\u6837\uff01 \u6587\u4ef6\u7684\u67e5\u627e \u00b6 cat /etc/passwd \u7684\u6574\u4f53\u8fc7\u7a0b\u5982\u4e0b: [ root@localhost opt ] # ls -i / 78150 bin 50331763 home 16778318 mnt 8877 run 16777288 tmp 64 boot 81 lib 33746122 opt 78154 sbin 33732779 usr 3 dev 83 lib64 1 proc 50331764 srv 50331713 var 16777281 etc 84 media 33574977 root 1 sys [ root@localhost opt ] # ls -di / 64 / [ root@localhost opt ] # ls -di /etc/ 16777281 /etc/ [ root@localhost opt ] # ls -i /etc/passwd 17500057 /etc/passwd Ps: \u8fd9\u5f20\u903b\u8f91\u56fe\u4e2dinode\u5757\u7684block\u7f16\u53f7\u662f\u5047\u8bbe\u7684,\u5bf9\u6574\u4f53\u7684\u63a8\u5bfc\u6d41\u7a0b\u6ca1\u6709\u5f71\u54cd.. step 1> \u9996\u5148, \u7cfb\u7edf\u627e\u5230\u8fd9\u4e2a\u6587\u4ef6\u540d\u5bf9\u5e94\u7684inode\u53f7\u7801; step 2> \u5176\u6b21, \u901a\u8fc7inode\u53f7\u7801,\u83b7\u53d6inode\u4fe1\u606f; step 3> \u6700\u540e, \u6839\u636einode\u4fe1\u606f, \u627e\u5230\u6587\u4ef6\u6570\u636e\u6240\u5728\u7684block,\u8bfb\u51fa\u6570\u636e cat /etc/passwd \u67e5\u627e\u7684\u6574\u4f53\u8fc7\u7a0b \u6839\u6587\u4ef6\u5939/ ; \u6587\u4ef6\u5939/etc ; \u6587\u4ef6/etc/passwd 1> OS\u7684\u6587\u4ef6\u7cfb\u7edf\u5148\u53bb\u95ee\u95eesuper block,\u77e5\u9053\u4e86\u6839\u76ee\u5f55/\u7684inode\u7f16\u53f7\u662f64, \u627e\u5230\u7f16\u53f7\u4e3a64\u7684inode\u5757,\u5728\u8be5\u5143\u4fe1\u606f\u91cc\u770b\u5230\u5176\u5bf9\u5e94\u7684data block\u7f16\u53f7\u662f555; \u627e\u5230\u6839\u76ee\u5f55/\u5bf9\u5e94\u7f16\u53f7\u4e3a555\u7684data block,\u91cc\u9762/etc\u6587\u4ef6\u5939\u5bf9\u5e94\u7684inode\u53f7\u662f16777281; 2> \u6587\u4ef6\u7cfb\u7edf\u627e\u5230\u7f16\u53f7\u4e3a16777281\u7684inode\u5757,\u67e5\u8be2\u5230\u5176\u5bf9\u5e94\u7684data block\u7f16\u53f7\u662f666, \u5728\u7f16\u53f7\u4e3a666\u7684data block,\u67e5\u8be2\u5230/etc/passwd\u6587\u4ef6\u5bf9\u5e94\u7684inode\u53f7\u662f17500057; 3> \u6587\u4ef6\u7cfb\u7edf\u627e\u5230\u7f16\u53f7\u4e3a17500057\u7684inode\u5757,\u67e5\u8be2\u5230\u5176\u5bf9\u5e94\u7684data block\u7f16\u53f7\u662f666\u3001777\u3001888, \u8fdb\u800c\u8bfb\u51fa\u6570\u636e.. Ps: \u67e5\u627e\u7684\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u8fd8\u8981\u8003\u8651\u6709\u65e0\u6743\u9650\u54e6(\u00b4\u25bd\uff40)!! \u4e0d\u7ba1\u662fxfs\u8fd8\u662fext,\u5e95\u5c42\u7684\u539f\u7406\u90fd\u662f\u8fd9\u6837\u7684,\u53ea\u4e0d\u8fc7,xfs\u5728\u6b64\u4e4b\u4e0a\u505a\u4e86\u4e00\u4e9b\u4f18\u5316\u63d0\u9ad8\u4e86\u8bfb\u5199\u6548\u7387.. xfs\u3001ext\u6587\u4ef6\u7cfb\u7edf\u90fd\u88ab\u79f0\u4f5c \u7d22\u5f15\u5f0f\u6587\u4ef6\u7cfb\u7edf (indexed allocation)\uff01 \u6587\u4ef6\u7684\u5220\u9664 \u00b6 Q: \u82e5\u9700\u8981\u5220\u9664 /etc/passwd \u6587\u4ef6,\u5220\u9664\u8fc7\u7a0b\u662f\u600e\u6837\u7684\u5462\uff1f A: \u5b9e\u9645\u4e0a\u6ca1\u6709\u5220\u9664\u8fd9\u4e00\u8bf4, \u786c\u76d8\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u8986\u76d6! \"\u5220\u9664\"\u6b64\u6587\u4ef6,\u4f1a\u5bfc\u81f4\u8be5\u6587\u4ef6\u5bf9\u5e94\u7684inode\u53f717500057,\u4ee5\u53ca\u5bf9\u5e94\u7684data block\u5757777 888 999\u5728superblock\u91cc\u90fd\u6807\u8bb0\u4e3afree\u81ea\u7531\u7a7a\u95f2\u72b6\u6001;\u8868\u660e\u5f53\u6709\u5176\u4ed6\u6570\u636e\u6587\u4ef6\u5f80\u786c\u76d8\u4e2d\u5199\u7684\u65f6\u5019,free\u72b6\u6001\u7684inode\u53f7\u548cdata block\u5757\u53ef\u4ee5\u5206\u522b\u5b58\u5176\u4ed6\u6587\u4ef6\u7684\u5143\u6570\u636e\u548c\u5185\u5bb9. \u4e5f\u5c31\u662f\u8bf4,\u5220\u9664\u4e00\u4e2a\u6587\u4ef6\u65f6,\u6587\u4ef6\u7684\u5143\u6570\u636e\u548c\u5185\u5bb9\u90fd\u8fd8\u5728\u786c\u76d8\u91cc\uff01 \u8fd8\u4f1a\u5c06\u76ee\u5f55\u6587\u4ef6/etc\u7684data block\u91cc\u9762, /etc/passwd\u6587\u4ef6\u4e0e\u5bf9\u5e94\u7684inode\u53f717500057\u7684\u7ed1\u5b9a\u5173\u7cfb\u6e05\u7406\u6389! So,\u56de\u590d\u6570\u636e\u7684\u539f\u7406,\u5c31\u662f\u5c06\u672a\u5220\u9664\u4e4b\u524d\u7684\u7ed1\u5b9a\u5173\u7cfb\u8fdb\u884c\u6062\u590d. \u6570\u636e\u56de\u590d\u4e00\u5b9a\u80fd\u56de\u590d\u56de\u6765\u5417\uff1f\u4e0d\u4e00\u5b9a! \u56e0\u4e3a\u88ab\u6807\u8bb0\u4e3afree\u7684\u5757\u88ab\u5206\u914d\u8d70\u4e86\u5c31\u6ca1\u529e\u6cd5\u5566.\u6570\u636e\u88ab\u8986\u76d6\u4e86. \u6240\u4ee5\u6570\u636e\u56de\u590d\u65f6\u4f1a\u95ee,\u5220\u9664\u6709\u591a\u4e45\u5566,\u5728\u6b64\u4e4b\u95f4\u6709\u6ca1\u6709\u505a\u5176\u4ed6\u64cd\u4f5c.. \u6587\u4ef6\u7cfb\u7edf\u6269\u5c55 \u00b6 inode\u4fe1\u606f \u00b6 \u6587\u4ef6\u7684 inode \u4e2d\u6587\u8bd1\u540d\u4e3a \"\u7d22\u5f15\u8282\u70b9\" , \u662fUNIX \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784, \u5176\u672c\u8d28\u662f\u7ed3\u6784\u4f53. [stat\u547d\u4ee4] \u53ef\u4ee5\u7528 stat \u547d\u4ee4, \u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7684inode\u4fe1\u606f! [ root@localhost opt ] # stat /etc/ \u6587\u4ef6\uff1a \"/etc/\" \u5927\u5c0f\uff1a8192 \u5757\uff1a24 IO \u5757\uff1a4096 \u76ee\u5f55 \u8bbe\u5907\uff1afd00h/64768d Inode\uff1a16777281 \u786c\u94fe\u63a5\uff1a144 \u6743\u9650\uff1a ( 0755 /drwxr-xr-x ) Uid\uff1a ( 0 / root ) Gid\uff1a ( 0 / root ) \u6700\u8fd1\u8bbf\u95ee\uff1a2022-07-18 09 :44:50.868295267 +0800 \u6700\u8fd1\u66f4\u6539\uff1a2022-07-15 22 :22:00.039036820 +0800 \u6700\u8fd1\u6539\u52a8\uff1a2022-07-15 22 :22:00.039036820 +0800 \u521b\u5efa\u65f6\u95f4\uff1a- [ root@localhost opt ] # stat /etc/passwd \u6587\u4ef6\uff1a \"/etc/passwd\" \u5927\u5c0f\uff1a2351 \u5757\uff1a8 IO \u5757\uff1a4096 \u666e\u901a\u6587\u4ef6 \u8bbe\u5907\uff1afd00h/64768d Inode\uff1a17500057 \u786c\u94fe\u63a5\uff1a1 \u6743\u9650\uff1a ( 0644 /-rw-r--r-- ) Uid\uff1a ( 0 / root ) Gid\uff1a ( 0 / root ) \u6700\u8fd1\u8bbf\u95ee\uff1a2022-07-18 07 :33:46.014207025 +0800 \u6700\u8fd1\u66f4\u6539\uff1a2022-07-15 10 :14:51.948530819 +0800 \u6700\u8fd1\u6539\u52a8\uff1a2022-07-15 10 :14:51.955530994 +0800 \u521b\u5efa\u65f6\u95f4\uff1a- \u4ece\u6839\u672c\u4e0a\u8bb2,inode\u4e2d\u5b58\u653e\u7684\u662f\u9664\u4e86\u6587\u4ef6\u7684\u540d\u5b57\u4ee5\u53ca\u6587\u4ef6\u771f\u5b9e\u5185\u5bb9\u4e4b\u5916\u6240\u6709\u6709\u5173\u6587\u4ef6\u7684\u4fe1\u606f/\u5143\u6570\u636e(metadata)! \u25cf inode \u7f16\u53f7 \u25cf \u7528\u6765\u8bc6\u522b\u6587\u4ef6\u7c7b\u578b,\u4ee5\u53ca\u7528\u4e8estat C\u51fd\u6570\u7684\u6a21\u5f0f\u4fe1\u606f \u25cf \u94fe\u63a5\u6570,\u5373\u6709\u591a\u5c11\u6587\u4ef6\u540d\u6307\u5411\u8fd9\u4e2ainode \u25cf \u5c5e\u4e3b\u7684ID(UID) \u25cf \u5c5e\u4e3b\u7684\u7ec4ID(GID) \u25cf \u6587\u4ef6\u7684\u5b57\u8282\u6570 \u25cf \u6587\u4ef6\u6240\u4f7f\u7528\u7684\u78c1\u76d8\u5757\u7684\u5b9e\u9645\u6570\u76ee \u25cf \u6587\u4ef6\u7684\u65f6\u95f4\u6233,\u5171\u6709\u4e09\u4e2a: ctime\u6307inode\u4e0a\u4e00\u6b21\u53d8\u52a8\u7684\u65f6\u95f4; mtime\u6307\u6587\u4ef6\u5185\u5bb9\u4e0a\u4e00\u6b21\u53d8\u52a8\u7684\u65f6\u95f4; atime\u6307\u6587\u4ef6\u4e0a\u4e00\u6b21\u6253\u5f00\u7684\u65f6\u95f4\u3002 \u25cf \u6307\u5411\u6570\u636e\u5757\u7684\u6307\u9488 \u6572\u9ed1\u677f! Linux\u7cfb\u7edf\u5185\u90e8\u4e0d\u4f7f\u7528\u6587\u4ef6\u540d, \u800c\u662f\u7528inode\u53f7\u7801\u6765\u8bc6\u522b\u6587\u4ef6. \u6bcf\u4e2ainode\u90fd\u6709\u4e00\u4e2a\u53f7\u7801. \u5bf9\u4e8e\u7cfb\u7edf\u6765\u8bf4,\u6587\u4ef6\u540d\u53ea\u662finode\u53f7\u7801\u4fbf\u4e8e\u8bc6\u522b\u7684\u522b\u79f0\u6216\u8005\u7ef0\u53f7. [\u4e09\u79cd\u65f6\u95f4] \u8be6\u89e3,atime\u3001mtime\u3001ctime\u7684\u533a\u522b\uff01 1> atime(access time):[\u8bbf\u95ee\u6587\u4ef6\u5185\u5bb9]\u7684\u65f6\u95f4. \u5bf9\u6587\u4ef6\u8fdb\u884c\u4e00\u6b21\u8bfb\u64cd\u4f5c,\u5b83\u7684\u8bbf\u95ee\u65f6\u95f4\u5c31\u4f1a\u6539\u53d8. eg: cat\u3001more\u7b49\u64cd\u4f5c,\u4f46\u662f\u50cf\u4e4b\u524d\u7684stat\u8fd8\u6709ls\u547d\u4ee4\u5bf9atime\u662f\u4e0d\u4f1a\u6709\u5f71\u54cd\u7684. \u56e0\u4e3astat\u3001ls\u8bbf\u95ee\u7684\u662f\u6587\u4ef6\u7684\u5143\u6570\u636e,\u6ca1\u6709\u8bbf\u95ee\u6587\u4ef6\u7684\u5185\u5bb9\uff01\uff01 2> mtime(modify time):[\u4fee\u6539\u6587\u4ef6\u5185\u5bb9]\u7684\u65f6\u95f4. \u6587\u4ef6\u7684\u5185\u5bb9\u88ab\u6700\u540e\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4,\u6211\u4eec\u7ecf\u5e38\u7528\u7684ls -l\u547d\u4ee4\u663e\u793a\u51fa\u6765\u7684\u6587\u4ef6\u65f6\u95f4\u5c31\u662f\u8fd9\u4e2a\u65f6\u95f4. \u5f53\u7528vim\u5bf9\u6587\u4ef6\u8fdb\u884c\u7f16\u8f91\u4e4b\u540e\u4fdd\u5b58,\u5b83\u7684mtime\u5c31\u4f1a\u76f8\u5e94\u7684\u6539\u53d8; eg: echo aa >> a.sh \u6216vim a.txt \u4fee\u6539\u5185\u5bb9 3> ctime(change time):[\u4fee\u6539\u6587\u4ef6]\u7684\u65f6\u95f4. \u901a\u4fd7\u70b9,\u6587\u4ef6\u4f46\u51e1\u6709\u4e00\u70b9\u6539\u52a8,\u4e0d\u7ba1\u662f\u5143\u6570\u636e\u8fd8\u662f\u5185\u5bb9\u7684\u6539\u52a8\u90fd\u4f1a\u5bfc\u81f4ctime\u7684\u6539\u53d8. eg: \u5f53\u4f7f\u7528chmod\u3001chown\u7b49\u6539\u53d8\u6587\u4ef6\u5c5e\u6027\u7684\u64cd\u4f5c\u662f\u4f1a\u6539\u53d8\u6587\u4ef6\u7684ctime\u7684. chmod +x a.txt \u25cb \u4f7f\u7528cat\u547d\u4ee4\u67e5\u770b\u6587\u4ef6\u540e,\u6587\u4ef6atime\u4f1a\u53d8\u66f4 \u25cb \u4f7f\u7528vim\u547d\u4ee4\u6253\u5f00\u6587\u4ef6\u53ea\u8981\u5728\u6269\u5c55\u6a21\u5f0f\u4e0bw\u540e,\u6587\u4ef6atime\u3001mtime\u3001ctime\u90fd\u4f1a\u53d8\u66f4. \u82e5vim\u6253\u5f00\u540e\u968f\u4fbf\u548b\u7f16\u8f91\u548b\u67e5\u770b\u53ea\u8981\u6ca1\u6709w\u4fdd\u5b58,\u90fd\u53ea\u662f\u5728\u5bf9\u5185\u5b58\u91cc\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c,\u6ca1\u6709\u5199\u5165\u786c\u76d8. \u5373\u53ea\u8981\u5728\u6269\u5c55\u6a21\u5f0f\u4e0bq\u6216q!,\u53ea\u4f1a\u53d8\u66f4atime. \u3010\u51b7\u77e5\u8bc6\u3011 \u4e5f\u8bb8\u4f60\u4f1a\u60ca\u5947\u7684\u53d1\u73b0\u7b2c\u4e00\u6b21\u540e\u518d\u8fde\u7eed\u51e0\u6b21cat/vim\u524d\u540e\u7684atime\u90fd\u6ca1\u6709\u53d8\u5316,\u8fd9\u662f\u56e0\u4e3alinux\u81ea\u5e26\u7684\u4f18\u5316\u673a\u5236\u5bfc\u81f4\u7684: cache \u7f13\u5b58 (\u8bfb) -- \u786c\u76d8\u4e2d\u7684\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7f13\u5b58; buffer \u7f13\u51b2\u533a (\u5199) -- \u6512\u4e00\u6ce2\u518d\u5f80\u786c\u76d8\u4e2d\u5199. PS:\u5728\u524d\u6587\u7684\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210\u4e2d\u6709\u9610\u8ff0. \u63d0\u4e00\u5634:sync\u547d\u4ee4\u4f1a\u5c06buffer\u7f13\u51b2\u533a\u7684\u6570\u636e\u5f3a\u5236\u5f80\u786c\u76d8\u4e2d\u5199. [inode\u5927\u5c0f] \u6ce8\u610f\u54e6! inode\u4e5f\u4f1a\u6d88\u8017\u786c\u76d8\u7a7a\u95f4\u7684. [\u76ee\u5f55\u9879] Linux\u7cfb\u7edf\u4e2d, \u76ee\u5f55(directory)\u4e5f\u662f\u4e00\u79cd\u6587\u4ef6. \u6253\u5f00\u76ee\u5f55,\u5b9e\u9645\u4e0a\u5c31\u662f\u6253\u5f00\u76ee\u5f55\u6587\u4ef6. \u76ee\u5f55\u6587\u4ef6\u7684\u7ed3\u6784\u975e\u5e38\u7b80\u5355, \u5c31\u662f\u4e00\u7cfb\u5217\u76ee\u5f55\u9879(dirent)\u7684\u5217\u8868. \u6bcf\u4e2a\u76ee\u5f55\u9879\u7531\u4e24\u90e8\u5206\u7ec4\u6210: \u6240\u5305\u542b\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u4ee5\u53ca\u8be5\u6587\u4ef6\u540d\u5bf9\u5e94\u7684inode\u53f7\u7801! FAT\u6587\u4ef6\u7cfb\u7edf \u00b6 U\u76d8\u4f7f\u7528\u7684\u6587\u4ef6/\u6863\u6848\u7cfb\u7edf\u4e00\u822c\u4e3aFAT\u683c\u5f0f. \u5b83\u5177\u6709\u4ee5\u4e0b\u7684\u7279\u70b9: 1> FAT\u6ca1\u6709\u533a\u5206superblock\u3001inode\u3001data block, \u5c31\u662f\u4e00\u5806\u7b80\u5355\u7684block!\u4f46\u4f9d\u65e7\u4f1a\u5bf9block\u8fdb\u884c\u7f16\u53f7. \u662f\u6ca1\u6709xfs\u3001ext\u90a3\u6837\u7684\u7d22\u5f15\u7684, \u4e00\u4e2ablock\u5757\u91cc\u5b58\u653e\u4e00\u5806(\u540d\u5b57\u5bf9\u5e94\u7684\u4e0b\u4e00\u8df3\u7684\u6570\u5b57)\u7684\u7ec4\u5408. 2> \u6b63\u56e0\u4e3aFAT\u6ca1\u6709inode\u7684\u5b58\u5728, \u6240\u4ee5FAT\u6ca1\u6709\u529e\u6cd5\u5c06\u8fd9\u4e2a\u6863\u6848\u7684\u6240\u6709block\u5728\u4e00\u5f00\u59cb\u5c31\u8bfb\u53d6\u51fa\u6765. \u6bcf\u4e2ablock\u53f7\u7801\u90fd\u8bb0\u5f55\u5728\u524d\u4e00\u4e2ablock\u5f53\u4e2d.\u53ea\u80fd\u4e00\u8df3\u4e00\u8df3\u7684\u67e5\u627e.\u592a\u6162\u592a\u7b28\u62d9\u4e86 TnT. \u5047\u8bbe\u6863\u6848\u7684\u8d44\u6599\u4f9d\u5e8f\u5199\u5165 1->7->4->15 \u8fd9\u56db\u4e2ablock\u53f7\u7801\u4e2d. \u63d0\u4e00\u5634,\u4e3a\u5565\u4f1a\u8fd9\u6837\u5199\u5165\u5462\uff1f\u540c\u4e00\u65f6\u95f4\u5f80\u786c\u76d8\u7684\u5199\u64cd\u4f5c\u5f88\u591a\u5bfc\u81f4\u7684.\u662f\u6309\u7167\u987a\u5e8f\u7a7f\u63d2\u7740\u6765\u7684. \u8fd9\u4e2a\u6863\u6848\u7cfb\u7edf\u6ca1\u6709\u529e\u6cd5\u4e00\u53e3\u6c14\u5c31\u77e5\u9053\u56db\u4e2ablock\u7684\u53f7\u7801,\u5b83\u5f97\u4e00\u4e2a\u4e00\u4e2a\u7684\u5c06block\u8bfb\u51fa\u540e,\u624d\u4f1a\u77e5\u9053\u4e0b\u4e00\u4e2ablock\u5728\u4f55\u5904! \u5982\u679c\u540c\u4e00\u4e2a\u6863\u6848\u8d44\u6599\u5199\u5165\u7684block\u5206\u6563\u7684\u592a\u8fc7\u5389\u5bb3\u8de8\u5ea6\u592a\u5927\u65f6, \u5219\u6211\u4eec\u7684\u78c1\u76d8\u8bfb\u53d6\u5934\u5c06\u65e0\u6cd5\u5728\u78c1\u76d8\u8f6c\u4e00\u5708\u5c31\u8bfb\u5230\u6240\u6709\u7684\u8d44\u6599.\u56e0\u6b64\u78c1\u76d8\u5c31\u4f1a\u591a\u8f6c\u597d\u51e0\u5708\u624d\u80fd\u5b8c\u6574\u7684\u8bfb\u53d6\u5230\u8fd9\u4e2a\u6863\u6848\u7684\u5185\u5bb9! \u3010\u78c1\u76d8\u788e\u7247\u6574\u7406\u3011 \u6b63\u56e0\u4e3a\u6863\u6848\u5199\u5165\u7684block\u592a\u8fc7\u4e8e\u79bb\u6563\u4e86,\u5bfc\u81f4\u6587\u4ef6\u7684\u8bfb\u53d6\u6548\u7387\u5f88\u5dee,\u6240\u4ee5\u9700\u8981\u5b9a\u671f\u8fdb\u884c\u788e\u7247\u6574\u7406\uff01 \u8bf4\u767d\u4e86,\u5c31\u662f\u5c06\u6587\u4ef6\u5b58\u7684\u76f8\u5e94\u7684\u7d27\u51d1\u4e00\u70b9.block\u5757\u8fde\u7eed\u4e00\u70b9. Q: \u90a3\u4e48\u50cfxfs\u3001ext\u6587\u4ef6\u7cfb\u7edf\u9700\u8981\u8fdb\u884c\u78c1\u76d8\u6574\u7406\u5417\uff1f A: \u5b83\u4eec\u662f\u7d22\u5f15\u6587\u4ef6\u7cfb\u7edf,\u901a\u5e38\u662f\u4e0d\u9700\u8981\u7684. \u4f46\u662f\u5982\u679c\u6863\u6848\u7cfb\u7edf\u4f7f\u7528\u592a\u4e45,\u5e38\u5e38\u5220\u9664/\u7f16\u8f91/\u65b0\u589e\u6863\u6848\u8bdd,\u662f\u53ef\u80fd\u4f1a\u9020\u6210\u6863\u6848\u8d44\u6599\u592a\u8fc7\u4e8e\u79bb\u6563\u7684\u95ee\u9898 \u6b64\u65f6\u5c31\u9700\u8981\u8fdb\u884c\u91cd\u6574\u4e00\u4e0b\uff01 Ps: windows\u5e38\u89c1\u7684\u6587\u4ef6\u7cfb\u7edf FAT\u3001NTFS\u3001VFAT\u3001MSDOS... \u78c1\u76d8\u6ee1\u7684\u4e24\u79cd\u60c5\u51b5 \u00b6 \u5e38\u8bc6: \u53ea\u8981\u6743\u9650\u591f, \u78c1\u76d8\u4e0a\u6709\u7a7a\u95f4\u4e00\u5b9a\u53ef\u4ee5\u521b\u5efa\u6587\u4ef6. \u8fd9\u4e2a\u662f\u9519\u7684!! (X) \u25b2 \u6587\u4ef6\u7cfb\u7edf/\u5206\u533a\u7684inode\u53f7 [ root@localhost opt ] # df -i -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b Inode \u5df2\u7528 ( I ) \u53ef\u7528 ( I ) \u5df2\u7528 ( I ) % \u6302\u8f7d\u70b9 devtmpfs devtmpfs 120231 401 119830 1 % /dev tmpfs tmpfs 124455 1 124454 1 % /dev/shm tmpfs tmpfs 124455 961 123494 1 % /run tmpfs tmpfs 124455 16 124439 1 % /sys/fs/cgroup /dev/mapper/centos-root xfs 8910848 139846 8771002 2 % / /dev/sda1 xfs 524288 347 523941 1 % /boot tmpfs tmpfs 124455 23 124432 1 % /run/user/0 \u25b2 \u6587\u4ef6\u7cfb\u7edf/\u5206\u533a\u7684\u78c1\u76d8\u5bb9\u91cf [ root@localhost opt ] # df -h -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b \u5bb9\u91cf \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 devtmpfs devtmpfs 470M 0 470M 0 % /dev tmpfs tmpfs 487M 0 487M 0 % /dev/shm tmpfs tmpfs 487M 15M 472M 4 % /run tmpfs tmpfs 487M 0 487M 0 % /sys/fs/cgroup /dev/mapper/centos-root xfs 17G 4 .6G 13G 27 % / /dev/sda1 xfs 1014M 212M 803M 21 % /boot tmpfs tmpfs 98M 40K 98M 1 % /run/user/0 \u60c5\u51b5\u4e00 : \u78c1\u76d8\u4e0a\u8fd8\u6709\u7a7a\u95f4,\u4f46\u78c1\u76d8\u4e0a\u5927\u91cf\u7684\u5c0f\u6587\u4ef6\u5bfc\u81f4inode\u53f7\u6ca1\u4e86. i=30000;while true;do touch /boot/$i.txt;echo $i.txt;((i++));done \u5f53/boot \u5206\u533a\u7684inode\u4f7f\u7528\u5b8c,\u518d\u521b\u5efa\u6587\u4ef6\u4f1a\u5931\u8d25,\u4f1a\u63d0\u793a\u8bbe\u5907\u4e0a\u6ca1\u6709\u7a7a\u95f4. \u9ed1\u79d1\u6280,\u8fd0\u884c\u4e0a\u65b9\u7684\u6d4b\u8bd5\u540e,\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef,\u5b9e\u65f6\u76d1\u6d4b/boot\u5206\u533ainode\u53f7\u4f7f\u7528\u60c5\u51b5: while true;do df -i;sleep 0.5;clear;done \u8fbe\u5230\u89c6\u89c9\u4e0a\u5237\u65b0\u7684\u6548\u679c,\u5b9e\u5219\u4e0d\u662f\u5237\u65b0. Ps: \u82e5\u4e0dsleep0.5\u79d2, cpu\u7684\u6d88\u8017\u4f1a\u5f88\u5927\u5f88\u5927, \u5f97\u8ba9\u5b83\u4f11\u606f0.5\u79d2,\u4e0d\u7136\u4f1a\u70e7\u8111 Hhhh. \u60c5\u51b5\u4e8c : inode\u53f7\u8fd8\u6709\u5f88\u591a,\u4f46\u67d0\u4e2a\u6587\u4ef6\u5f88\u5927,\u78c1\u76d8\u7684\u5bb9\u91cf\u88ab\u5360\u6ee1\u4e86. dd if=/dev/zero of=/boot/test.txt bs=300M count=1 dd if=/dev/zero of=/abc.txt bs=10M count=1 cp abc.txt /boot/ \u5931\u8d25,\u4f1a\u63d0\u793a\u8bbe\u5907\u4e0a\u6ca1\u6709\u7a7a\u95f4! [\u89e3\u51b3\u65b9\u6848] 1> \u5927\u91cf\u7684\u5c0f\u6587\u4ef6\u95ee\u9898:\u53ef\u80fd\u4f1a\u4f7finode\u8017\u5c3d, \u4f7f\u5f97\u6587\u4ef6\u6587\u6cd5\u521b\u5efa(\u78c1\u76d8\u5229\u7528\u7387\u4f4e) So,\u5bf9\u4e8e\u5c0f\u6587\u4ef6\u6bd4\u8f83\u591a\u7684\u573a\u666f,\u53ef\u5c06inode\u548cdata block\u5212\u5206\u5c0f\u4e00\u70b9; \u82e5innode\u5df2\u7ecf\u4e0d\u591f\u7528\u4e86,\u53ef\u5c06\u5c0f\u6587\u4ef6\u5907\u4efd\u5230\u5176\u4ed6\u5206\u533a... 2> \u5927\u6587\u4ef6\u95ee\u9898: \u4e00\u4e2a\u6587\u4ef6\u5360\u7528\u591a\u4e2adata block,\u4f7f\u5f97\u6587\u4ef6\u8bfb\u5199\u901f\u7387\u6162.\u53ef\u5c06data block\u5212\u5206\u5927\u70b9.\u4f7f\u7528xfs\u6587\u4ef6\u7cfb\u7edf. \u82e5\u5bb9\u91cf\u5df2\u7ecf\u4e0d\u591f\u7528\u4e86. \u601d\u8def\u4e00,\u5c06\u5927\u6587\u4ef6\u6253\u5305\u5907\u4efd\u8d70;\u601d\u8def\u4e8c,\u4f7f\u7528\u8f6f\u786c\u94fe\u63a5!!! \u8f6f\u786c\u94fe\u63a5 \u00b6 \u786c\u94fe\u63a5 \u00b6 \u786c\u94fe\u63a5(Hard Link)\u76f8\u5f53\u4e8e\u7ed9\u4e00\u4e2a\u6587\u4ef6\u8d77\u4e86\u4e00\u4e2a \u522b\u540d , \u4e0d\u540c\u7684\u6587\u4ef6\u540d\u53ef\u4ee5\u64cd\u4f5c\u540c\u4e00\u4efd\u6570\u636e. ln [\u539f\u6587\u4ef6] [\u76ee\u6807\u6587\u4ef6] 1> \u5bf9\u786c\u94fe\u63a5\u7684\u6e90\u6587\u4ef6\u6216\u76ee\u6807\u6587\u4ef6\u5185\u5bb9\u8fdb\u884c\u4fee\u6539,\u4f1a\u5f71\u54cd\u5230\u6240\u6709\u6587\u4ef6\u540d ; 2> \u786c\u94fe\u63a5\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u5177\u6709\u76f8\u540cinode,\u4f46\u6587\u4ef6\u540d\u4e0d\u540c: \u5373 \u4e00\u4e2a\u6587\u4ef6\u53ea\u80fd\u6709\u4e00\u4e2ainode\u53f7,\u4f46\u591a\u4e2a\u6587\u4ef6\u7684inode\u53f7\u53ef\u4ee5\u76f8\u540c 3> \u5220\u9664\u786c\u94fe\u63a5\u6216\u8005\u539f\u6587\u4ef6\u4e4b\u4e00,\u4e0d\u5f71\u54cd\u53e6\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u8bbf\u95ee, \u9664\u975e\u6240\u6709\u7684\u90fd\u5220\u9664\u6389. So,\u786c\u8fde\u63a5 \u5141\u8bb8\u4e00\u4e2a\u6587\u4ef6\u62e5\u6709\u591a\u4e2a\u6709\u6548\u8def\u5f84\u540d,\u8fd9\u6837\u7528\u6237\u5c31\u53ef\u4ee5\u5efa\u7acb\u786c\u94fe\u63a5\u5230\u91cd\u8981\u6587\u4ef6,\u4ee5\u9632\u6b62\u201c\u8bef\u5220\u201d. 4> \u5220\u9664\u6240\u6709\u786c\u94fe\u63a5, \u6570\u636e\u4f1a\u5728\u88ab\u78c1\u76d8\u68c0\u67e5\u6216\u8005\u65b0\u6570\u636e\u5199\u5165\u7684\u65f6\u5019\u5220\u9664\u56de\u6536. 5> \u901a\u8fc7rm \u2013f \u5220\u9664\u786c\u94fe\u63a5 6> \u76ee\u5f55\u4e0d\u53ef\u521b\u5efa\u786c\u94fe\u63a5, \u5e76\u4e14\u786c\u94fe\u63a5\u65e0\u6cd5\u8de8\u533a Ps: \u786c\u94fe\u63a5\u6709\u70b9\u50cfpython\u91cc\u51fd\u6570\u4f20\u9012\u4e2d\u9488\u5bf9\u53ef\u53d8\u7c7b\u578b\u7684\u5f15\u7528\u4f20\u9012... \"\"\" a.txt\u7684inode\u53f7\u662f35589975,`ll a.txt`\u53ef\u5f97\u77e5\u5b83\u67091\u4e2a\u786c\u94fe\u63a5. \"\"\" [ root@localhost opt ] # cat a.txt 123 [ root@localhost opt ] # ls -i a.txt 35589975 a.txt [ root@localhost opt ] # ll a.txt -rw-r--r-- 1 root root 4 7\u6708 19 10 :44 a.txt \"\"\" \u7528`ln`\u547d\u4ee4\u4e3aa.txt\u521b\u5efa\u4e00\u4e2a\u786c\u94fe\u63a5,\u8fd9\u6837\u7684\u8bdd,a.txt\u4e0eb.txt inode\u53f7\u3001\u786c\u94fe\u63a5\u6570\u3001\u6587\u4ef6\u5185\u5bb9\u90fd\u4e00\u6837\uff01 \u5373\u4e00\u4e2ainode\u53f7\u5173\u8054\u4e86\u4e24\u4e2a\u6587\u4ef6\u540d,\u4ee3\u8868\u540c\u4e00\u4efd\u6570\u636e\uff01 \"\"\" [ root@localhost opt ] # ln a.txt b.txt [ root@localhost opt ] # ls -i b.txt 35589975 b.txt [ root@localhost opt ] # ll a.txt -rw-r--r-- 2 root root 4 7\u6708 19 10 :44 a.txt [ root@localhost opt ] # ll b.txt -rw-r--r-- 2 root root 4 7\u6708 19 10 :44 b.txt [ root@localhost opt ] # cat b.txt 123 \"\"\" \u5bf9\u786c\u94fe\u63a5\u6587\u4ef6\u6216\u539f\u6587\u4ef6\u5185\u5bb9\u8fdb\u884c\u4fee\u6539,\u4f1a\u5f71\u54cd\u5230\u6240\u6709\u6587\u4ef6\u540d \"\"\" [ root@localhost opt ] # echo 666 >> a.txt [ root@localhost opt ] # cat a.txt 123 666 [ root@localhost opt ] # cat b.txt 123 666 \"\"\" \u5220\u9664\u539f\u6587\u4ef6a.txt, \u786c\u94fe\u63a5\u6587\u4ef6b.txt\u8fd8\u80fd\u7ee7\u7eed\u4f7f\u7528 \"\"\" [ root@localhost opt ] # rm -rf a.txt [ root@localhost opt ] # ll b.txt -rw-r--r-- 1 root root 8 7\u6708 19 10 :51 b.txt # \u6ce8\u610f,\u786c\u94fe\u63a5\u6570\u53d8\u4e3a\u4e861 \"\"\" \u76ee\u5f55\u4e0d\u53ef\u521b\u5efa\u786c\u94fe\u63a5 \"\"\" [ root@localhost opt ] # mkdir ./aaa [ root@localhost opt ] # ln ./aaa ./bbb ln: \"./aaa\" : \u4e0d\u5141\u8bb8\u5c06\u786c\u94fe\u63a5\u6307\u5411\u76ee\u5f55 \u8f6f\u94fe\u63a5 \u00b6 \u8f6f\u94fe\u63a5(Symbolic Link)\u6587\u4ef62\u76f8\u5f53\u4e8e\u662f\u6587\u4ef61\u7684\u4e00\u4e2a \u5feb\u6377\u65b9\u5f0f . \u6587\u4ef62\u6307\u5411\u6587\u4ef61\u7684\u8def\u5f84,\u800c\u4e0d\u662f\u6587\u4ef61\u7684inode\u53f7\u7801,\u6587\u4ef61\u7684inode\"\u786c\u94fe\u63a5\u6570\"\u4e0d\u4f1a\u56e0\u6b64\u53d1\u751f\u53d8\u5316. ln \u2013s [\u539f\u6587\u4ef6] [\u76ee\u6807\u6587\u4ef6] 1> \u5bf9\u8f6f\u94fe\u63a5\u7684\u6e90\u6587\u4ef6\u6216\u76ee\u6807\u6587\u4ef6\u5185\u5bb9\u8fdb\u884c\u4fee\u6539, \u4f1a\u5f71\u54cd\u5230\u6240\u6709\u6587\u4ef6\u540d ; 2> \u8f6f\u94fe\u63a5\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u5177\u6709\u4e0d\u540c\u7684inode\u53f7 3> \u5220\u9664\u8f6f\u8fde\u63a5\u6587\u4ef6\u7684\u6e90\u6587\u4ef6, \u8f6f\u94fe\u63a5\u6587\u4ef6\u5c06\u65e0\u6cd5\u4f7f\u7528, \u5e94\u8be5\u4e5f\u4e00\u8d77\u5220\u9664\u6389,\u4ee5\u4fbf\u56de\u6536 4> rm \u2013f \u5220\u9664\u8f6f\u94fe\u63a5 5> \u53ef\u4ee5\u5bf9\u76ee\u5f55\u521b\u5efa\u8f6f\u94fe\u63a5, \u5e76\u4e14\u8f6f\u94fe\u63a5\u53ef\u4ee5\u8de8\u5206\u533a \"\"\" \u4f7f\u7528\u547d\u4ee4`ln -s`\u4e3ac.txt\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5d.txt. \u76f8\u5f53\u4e8e\u521b\u5efa\u4e86\u4e00\u4e2a\u5feb\u6377\u65b9\u5f0f. \u6587\u4ef6d.txt\u7684\u5b58\u5728\u4f9d\u8d56\u4e8ec.txt \"\"\" [ root@localhost opt ] # cat c.txt 123 [ root@localhost opt ] # ln -s c.txt d.txt [ root@localhost opt ] # ls -i c.txt 34107380 c.txt [ root@localhost opt ] # ls -i d.txt 35311703 d.txt [ root@localhost opt ] # ll c.txt -rw-r--r-- 1 root root 4 7\u6708 19 16 :22 c.txt [ root@localhost opt ] # ll d.txt lrwxrwxrwx 1 root root 5 7\u6708 19 16 :22 d.txt -> c.txt [ root@localhost opt ] # echo 666 >> c.txt [ root@localhost opt ] # cat c.txt 123 666 [ root@localhost opt ] # cat d.txt 123 666 \"\"\" \u539f\u6587\u4ef6c.txt\u5220\u6389\u4e86,\u5176\u8f6f\u94fe\u63a5d.txt\u5c31\u4e0d\u80fd\u7528\u5566 \"\"\" [ root@localhost opt ] # rm -rf c.txt [ root@localhost opt ] # cat d.txt cat: d.txt: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 \"\"\" \u53ef\u4ee5\u5bf9\u76ee\u5f55\u521b\u5efa\u8f6f\u94fe\u63a5 \"\"\" [ root@localhost opt ] # mkdir ./aaa [ root@localhost opt ] # echo 111 > ./aaa/1.txt [ root@localhost opt ] # ln -s ./aaa ./bbb [ root@localhost opt ] # ll \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 19 7\u6708 19 17 :07 aaa lrwxrwxrwx 1 root root 5 7\u6708 19 17 :07 bbb -> ./aaa [ root@localhost opt ] # cat ./aaa/1.txt 111 [ root@localhost opt ] # cat ./bbb/1.txt 111 # \u5220\u9664\u8f6f\u94fe\u63a5/\u5feb\u6377\u65b9\u5f0fbbb\u76ee\u5f55\u5bf9aaa\u76ee\u5f55\u6ca1\u6709\u5f71\u54cd [ root@localhost opt ] # rm -rf ./bbb [ root@localhost opt ] # ls aaa 1 .txt # \u5220\u9664\u8f6f\u94fe\u63a5/\u5feb\u6377\u65b9\u5f0fbbb\u4e0b\u76841.txt\u6587\u4ef6\u5bf9aaa\u76ee\u5f55\u6709\u5f71\u54cd!!!!!!!!!!!!!!!!!!!!!!! [ root@localhost opt ] # ll \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 19 7\u6708 19 17 :13 aaa [ root@localhost opt ] # ln -s ./aaa ./bbb [ root@localhost opt ] # rm -rf ./bbb/1.txt [ root@localhost opt ] # ll aaa \u603b\u7528\u91cf 0 Q/A \u00b6 Q1: \u4e3a\u5565\u786c\u94fe\u63a5\u4e0d\u80fd\u8de8\u5206\u533a,\u8f6f\u94fe\u63a5\u53ef\u4ee5\uff1f\u4e3a\u5565\u76ee\u5f55\u6587\u4ef6\u4e0d\u80fd\u521b\u5efa\u786c\u94fe\u63a5,\u53ef\u4ee5\u521b\u5efa\u8f6f\u94fe\u63a5? A1: \u6362\u53e5\u8bdd\u6765\u8bf4,\u786c\u94fe\u63a5\u7684\u521b\u5efa\u5177\u6709\u5c40\u9650\u6027: \u540c\u4e00\u5206\u533a + \u666e\u901a\u6587\u4ef6 Ps: linux\u5224\u65ad\u67d0\u4e2a\u8def\u5f84\u7ed1\u5b9a\u7684\u5206\u533a\u662f\u4ece\u53f3\u5f80\u5de6\u627e\u7684,\u76f4\u5230\u8be5\u76ee\u5f55\u7ed1\u5b9a\u4e86\u5206\u533a. /etc/sysconfig/network-scripts/ifcfg-ens33 \u76f4\u5230\u627e\u5230\u5173\u8054\u5206\u533a\u7684\u6839/\u6587\u4ef6\u5939.. \u786c\u94fe\u63a5\u7684\u672c\u8d28\u662f\u5927\u5bb6\u6307\u5411\u540c\u4e00\u4e2ainode\u53f7,\u5173\u8054\u540c\u4e00\u4efd\u6570\u636e;\u6240\u4ee5\u786c\u94fe\u63a5\u4ec5\u9650\u4e8e\u5728\u540c\u4e00\u4e2a\u5206\u533a\u91cc\u5206\u914d.. \u5f88\u5bb9\u6613\u60f3\u5230\u5206\u533a1\u768410\u53f7inode\u4e0e\u5206\u533a2\u768410\u53f7inode\u6307\u5411\u7684data block\u53ef\u4e0d\u662f\u4e00\u6837\u7684.. \u800c\u5bf9\u76ee\u5f55\u6587\u4ef6\u521b\u5efa\u786c\u94fe\u63a5\u610f\u5473\u7740\u5bf9\u8be5\u76ee\u5f55\u6587\u4ef6\u7684\u5b50\u6587\u4ef6\u548c\u5b50\u76ee\u5f55\u6587\u4ef6\u90fd\u7528\u521b\u5efa\u786c\u94fe\u63a5,\u5f00\u9500\u5f88\u5927.. \u67e5\u9605\u8d44\u6599,\u5141\u8bb8\u76ee\u5f55\u7684\u786c\u94fe\u63a5\u53ef\u80fd\u4f1a\u6253\u7834\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u7684\u6709\u5411\u65e0\u73af\u56fe\u7ed3\u6784, \u53ef\u80fd\u521b\u5efa\u76ee\u5f55\u5faa\u73af, \u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4fsck\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u904d\u5386\u6587\u4ef6\u6811\u7684\u8f6f\u4ef6\u51fa\u9519... TnT \u53ef\u4ee5\u8bf4\u4eba\u8bdd\u561b\uff1f\u542c\u6c42\u4e0d\u61c2... \u4e0d\u6df1\u7a76\u4e86 \u800c\u8f6f\u94fe\u63a5\u652f\u6301\u8de8\u5206\u533a,\u662f\u56e0\u4e3a\u8f6f\u94fe\u63a5\u7684\u672c\u8d28\u662f\u6307\u5411\u6e90\u6587\u4ef6,\u4e0d\u6307\u5411inode\u53f7... \u6e90\u6587\u4ef6\u4e0e\u76ee\u6807\u6587\u4ef6/\u8f6f\u94fe\u63a5\u6587\u4ef6\u7684inode\u53f7\u4e0d\u540c Q2: \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5b8c\u540e,\u4e00\u5b9a\u8981\u91cd\u542f\u5bf9\u5e94\u7684\u8f6f\u4ef6\u624d\u80fd\u751f\u6548,\u4e3a\u4ec0\u4e48? A2: \u8f6f\u4ef6\u542f\u52a8\u8d77\u6765\u540e,\u9700\u8981\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u7684\u4fe1\u606f,\u4ee5\u6307\u5b9a\u7684\u65b9\u5f0f\u53bb\u8fd0\u884c. \u8bfb\u6587\u4ef6,\u4e0d\u662f\u901a\u8fc7\u6587\u4ef6\u540d\u8bfb\u53d6\u7684,\u9700\u8981\u901a\u8fc7inode\u53f7\u8bfb\u53d6.. vim\u4e00\u6539\u52a8\u914d\u7f6e\u6587\u4ef6,inode\u53f7\u5c31\u53d8\u4e86.. \u800c\u6b63\u5728\u8fd0\u884c\u7684\u8f6f\u4ef6\u8bfb\u53d6\u7684\u662f\u66f4\u6539\u4e4b\u524d\u7684\u5185\u5bb9..\u8bfb\u4e0d\u5230\u66f4\u6539\u7684\u5185\u5bb9. So,\u9700\u8981\u91cd\u65b0\u542f\u52a8\u8f6f\u4ef6,\u627e\u5230\u90a3\u4e2a\u65b0\u7684inode\u53f7,\u8bfb\u53d6\u4fee\u6539\u540e\u7684\u6570\u636e. Ps: \u6709\u4e9b\u8f6f\u4ef6\u4e0d\u7528\u91cd\u542f, \u79f0\u4e3a\"\u5e73\u6ed1\u91cd\u542f\". \u4e5f\u5c31\u662f\u8fd9\u4e2a\u8f6f\u4ef6\u6574\u4f53\u6ca1\u6709\u91cd\u542f,\u4f46\u6709\u4e00\u90e8\u5206\u662f\u91cd\u542f\u91cd\u65b0\u8bfb\u53d6\u6587\u4ef6\u4e86\u7684.. \"\"\" \u53ef\u4ee5\u53d1\u73b0,vim\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540e,test.conf\u7684inode\u53f7\u4f1a\u53d8! \u4e3a\u4ec0\u4e48\uff1fvim\u7684\u539f\u7406\u5bfc\u81f4\u7684,\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b: 1>\u6587\u4ef6\u5185\u5bb9\u4e00\u6b21\u6027\u8bfb\u5165\u5185\u5b58,\u4e00\u8fb9\u4fee\u6539\u4f1a\u4e00\u8fb9\u5c06\u6539\u52a8\u5199\u5165\u786c\u76d8\u4e0a\u521b\u5efa\u7684\u4e34\u65f6\u6587\u4ef6.test.conf.swp\u6587\u4ef6\u91cc\u9762\u53bb 2>\u6539\u52a8\u5b8c\u540e,:w,\u6587\u4ef6\u7cfb\u7edf\u4f1a\u5220\u9664\u786c\u76d8\u4e2d\u7684test.conf\u6e90\u6587\u4ef6; .test.conf.swp\u6587\u4ef6\u901a\u8fc7cp\u64cd\u4f5c\u6539\u540d\u4e3a\u6e90\u6587\u4ef6\u7684\u540d\u5b57 3>:q\u540e,\u4e34\u65f6\u6587\u4ef6.test.conf.swp\u5220\u9664.. \"\"\" [ root@localhost opt ] # vim test.conf [ root@localhost opt ] # cat test.conf 123 [ root@localhost opt ] # ls -i test.conf 34532550 test.conf [ root@localhost opt ] # vim test.conf [ root@localhost opt ] # cat test.conf 123 456 [ root@localhost opt ] # vim test.conf [ root@localhost opt ] # ls -i test.conf 35311703 test.conf \u3010\u9a8c\u8bc1vim\u539f\u7406\u7684\u64cd\u4f5c\u8fc7\u7a0b\u3011 \"\"\" \u53ef\u4ee5\u53d1\u73b0test.conf\u6587\u4ef6\u524d\u540e\u7684inode\u53f7\u662f\u6539\u53d8\u4e86\u7684. \"\"\" [ root@localhost opt ] # ls -i 1.txt 34107380 1 .txt [ root@localhost opt ] # ls -i test.conf 35311703 test.conf [ root@localhost opt ] # rm -rf test.conf [ root@localhost opt ] # cp 1.txt test.conf [ root@localhost opt ] # ls -i test.conf 34532550 test.conf Q3: \u603b\u7ed3\u4e0b\u8f6f\u786c\u94fe\u63a5\u7684\u5f02\u540c. A3: \u76f8\u540c\u70b9 - \u4fee\u6539\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9,\u5176\u5b83\u94fe\u63a5\u6587\u4ef6\u90fd\u8ddf\u7740\u6539. \u4e0d\u540c\u70b9 - 1> \u786c\u94fe\u63a5\u591a\u4e2a\u6587\u4ef6inode\u53f7\u4e00\u6837,\u8f6f\u94fe\u63a5\u7684\u591a\u4e2a\u6587\u4ef6inode\u53f7\u4e0d\u4e00\u6837; 2> \u5220\u9664\u6e90\u6587\u4ef6, \u786c\u94fe\u63a5\u4efb\u7136\u53ef\u7528,\u4f46\u8f6f\u94fe\u63a5\u5931\u6548 3> \u786c\u94fe\u63a5\u53ea\u80fd\u5bf9\u666e\u901a\u6587\u4ef6\u505a,\u800c\u4e14\u4e0d\u80fd\u8de8\u5206\u533a. \u8f6f\u94fe\u63a5\u53ef\u4ee5\u5bf9\u666e\u901a\u6587\u4ef6\u548c\u76ee\u5f55\u6587\u4ef6\u505a,\u800c\u4e14\u53ef\u4ee5\u8de8\u5206\u533a. \u8f6f\u94fe\u63a5\u89e3\u51b3\u78c1\u76d8\u6ee1 \u00b6 \u7b80\u5355\u7406\u89e3, \u786c\u76d8\u5206\u533a\u7684\u6302\u8f7d\u70b9\u5c31\u662f\u8f6f\u94fe\u63a5.. [ root@localhost ~ ] # df /dev/sda1 \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 /dev/sda1 1038336 216864 821472 21 % /boot \u5047\u8bbe/boot\u6587\u4ef6\u5939\u6ee1\u4e86(\u51c6\u786e\u70b9\u8bf4,\u662f /boot \u6302\u8f7d\u70b9\u5bf9\u5e94\u7684\u6587\u4ef6\u7cfb\u7edf/\u5206\u533a sda1 \u7684\u786c\u76d8\u7a7a\u95f4\u6ee1\u4e86).. \u4e5f\u5c31\u662f\u8bf4,\u521b\u5efa\u65b0\u6587\u4ef6 /boot/data/a.txt \u4ece\u53f3\u5f80\u5de6\u627e, \u8be5\u8def\u5f84\u5e94\u8be5\u5b58\u653e\u4e8esda1\u5206\u533a\u91cc.. \u4f46\u662fsda1\u5206\u533a\u6ee1\u4e86.. \u521b\u5efa\u6587\u4ef6\u5931\u8d25! \u4e8e\u662f\u4e4e, \u6211\u4eec\u4e70\u4e00\u5757\u786c\u76d8,\u5206\u533a\u505a\u597d\u6587\u4ef6\u7cfb\u7edf, \u5373\u65b0\u5efa\u4e00\u4e2a\u5206\u533a sdb1 , \u5176\u6302\u8f7d\u70b9\u4e3a /boot/data \u8fd9\u6837\u7684\u8bdd, /boot/data/a.txt \u6b64\u8def\u5f84\u4e0b\u7684a.txt\u6587\u4ef6\u5c31\u4f1a\u5b58\u653e\u4e0e sdb1\u5206\u533a\u91cc.. /dev/sda1 ----------- /boot /dev/sdb1 ----------- /boot/data \u6587\u4ef6\u8def\u5f84\u4e00\u5b9a\u8981\u6ce8\u610f\u8fa8\u522b\u5728\u54ea\u4e2a\u5206\u533a!\uff01 \u5728vm\u865a\u673a\u4e0a\u53ef\u4ee5\u8bbe\u7f6e\u65b0\u589e\u786c\u76d8..\u91cd\u542f\u751f\u6548. \u8ba1\u7b97\u673a\u4e0a\u662f\u652f\u6301\u70ed\u63d2\u62d4\u7684,\u8ba1\u7b97\u673a\u5f00\u673a\u72b6\u6001,\u63d2\u5165\u786c\u76d8\u4e5f\u80fd\u8bc6\u522b! ( \u7c7b\u4f3c\u4e8e\u6211\u901a\u8fc7USB\u63a5\u53e3\u63d2\u5165\u4e86\u4e00\u5757\u79fb\u52a8\u786c\u76d8,\u80fd\u8bc6\u522b\u6210\u529f ) \"\"\" \u53ef\u4ee5\u53d1\u73b0\u6709sda sdb\u4e24\u5757\u786c\u76d8 \u25cb sda1 sda2 \u662fsda\u8fd9\u5757\u786c\u76d8\u505a\u7684\u4e24\u4e2a\u5206\u533a \u25cb sdb\u4e0d\u5206\u533a\u7684\u8bdd,\u53ef\u4ee5\u6574\u4f53\u7b97\u4e00\u4e2a\u5206\u533a,\u4f46\u9700\u8981\u5bf9\u5176\u505a\u6587\u4ef6\u7cfb\u7edf,\u5e76\u5bf9\u5176\u6dfb\u52a0\u6302\u8f7d \"\"\" [ root@localhost ~ ] # ll /dev/sda # \u8fde\u7eedTab\u952e\u63d0\u793a sda sda1 sda2 sdb ## centos7\u91cc\u63a8\u8350\u7528xfs [ root@localhost ~ ] # mkfs.xfs /dev/sdb ... ... ... [ root@localhost ~ ] # mount /dev/sdb /boot/data \u25c6 \u6587\u4ef6\u8def\u5f84\u4e00\u5b9a\u8981\u533a\u5206\u5206\u533a! \"\"\" sdb\u786c\u76d8\u7684\u6302\u8f7d\u70b9\u4e3a/boot/data\u6587\u4ef6\u76ee\u5f55 \u5f80\u6b64\u8def\u5f84/boot/data/a.txt\u7684a.txt\u6587\u4ef6\u91cc\u5199\u5165\u5185\u5bb9 \u901a\u8fc7umount\u547d\u4ee4\u53d6\u6d88\u6302\u8f7d \u518dcat\u67e5\u770b,\u4f1a\u53d1\u73b0a.txt\u7684\u5185\u5bb9\u6d88\u5931 why\uff1f\u6302\u8f7d\u53d6\u6d88\u540e,\u6b64\u8def\u5f84\u4f1a\u53bb/boot\u6302\u8f7d\u70b9\u5bf9\u5e94\u7684sba1\u5206\u533a\u4e2d\u627e\u6570\u636e.\u800c\u4e0d\u662fsdb\u786c\u76d8\u5206\u533a\u4e2d\u627e. \u800c\u6070\u597dsba1\u5206\u533a\u7684\u6b64\u8def\u5f84\u4e0b\u6709a.txt\u6587\u4ef6,\u4f46\u6b64\u6587\u4ef6\u7684\u6587\u4ef6\u5927\u5c0f\u4e3a0. \"\"\" [ root@localhost ~ ] # echo \"Hhhhh\" > /boot/data/a.txt [ root@localhost ~ ] # cat /boot/data/a.txt Hhhhh # umount /boot/data \u4e5f\u662f\u4e00\u6837\u7684\u6548\u679c [ root@localhost ~ ] # umount /dev/sdb [ root@localhost ~ ] # cat /boot/data/a.txt [ root@localhost ~ ] # ll /boot/data/a.txt -rw-r--r-- 1 root root 0 7\u6708 20 23 :30 /boot/data/a.txt [ root@localhost ~ ] # echo \"123456\" > /boot/data/a.txt [ root@localhost ~ ] # cat /boot/data/a.txt 123456 [ root@localhost ~ ] # mount /dev/sdb /boot/data [ root@localhost ~ ] # cat /boot/data/a.txt Hhhhh","title":"\u6587\u4ef6\u7ba1\u7406\u4e4b\u6587\u4ef6\u7cfb\u7edf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_1","text":"\u6587\u4ef6\u7cfb\u7edffilesystem\u662f\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u4e2d\u8d1f\u8d23\u7ec4\u7ec7\u7ba1\u7406\u78c1\u76d8\u7684\u7a0b\u5e8f. \u662fOS\u7684\u4e00\u90e8\u5206. \u5728\u8d77\u521d\u7ed9vm\u865a\u673a\u5b89\u88c5centos\u64cd\u4f5c\u7cfb\u7edf\u65f6,\u6211\u4eec\u5bf9\u786c\u76d8\u8fdb\u884c\u4e86\u5206\u533a eg / /boot swap \u6bcf\u4e00\u4e2a\u5206\u533a/\u5206\u9694\u69fd\u90fd\u9700\u8981\u6587\u4ef6\u7cfb\u7edf\u8fdb\u884c\u7ba1\u7406. \u5e38\u89c1\u7684 \u6587\u4ef6\u7cfb\u7edf \u6709 xfs \u3001ext4 \u548c btrfs. \u53ef\u4ee5\u6bcf\u4e2a\u5206\u533a\u90fd\u7528\u4e0d\u540c\u7684\u6587\u4ef6\u7cfb\u7edf,\u4f46\u901a\u5e38\u90fd\u662f\u4e00\u6837\u7684.. centos7\u91cc\u7528\u7684\u662fxfs ; centos6\u53ca\u4ee5\u524d\u7528\u7684\u662fext4. xfs\u3001ext4\u90fd\u652f\u6301\u65e5\u5fd7 [\u4e86\u89e3\u77e5\u8bc6] \u5410\u69fd: \u542c\u5230egon\u8bf4\u4ed6\u4ee5\u524d\u505a\u8fc7cf,\u522b\u61f5\u903c\u4e86..\u5c31\u662f\u6307\u65e5\u5fd7\u6587\u4ef6\u7cfb\u7edfCLFS!(\u00b4\u25bd\uff40) Please be professional\uff01 xfs\u3001ext4\u90fd\u652f\u6301\u65e5\u5fd7,\u65e5\u5fd7\u7528\u4e8e\u8bb0\u5f55\u64cd\u4f5c.\u5185\u5b58\u5f80\u78c1\u76d8\u91cc\u5199\u6570\u636e\u7684\u65f6\u5019,\u4f1a\u5148\u5c06\u76f8\u5e94\u7684\u64cd\u4f5c\u8bb0\u5f55\u5728\u65e5\u5fd7\u91cc. Q:\u5982\u4f55\u6253\u9020\u4e00\u4e2a\u6781\u81f4\u7684CLFS\u65e5\u5fd7\u6587\u4ef6\u7cfb\u7edf\uff1f \u65e5\u5fd7\u6587\u4ef6\u7cfb\u7edf\u5148\u8bb0\u5f55\u64cd\u4f5c,\u518d\u5b8c\u6210\u6570\u636e\u7684\u5199\u5165..\u65ad\u7535\u540e\u53ef\u6839\u636e\u65e5\u5fd7\u7ee7\u7eed\u672a\u5b8c\u6210\u7684\u64cd\u4f5c.. A:\u51c6\u5907\u591a\u5757\u76d8,\u505aRAID(\u524d\u6587\"\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210\"\u90e8\u5206\u6709\u4ecb\u7ecd).\u7528\u4e24\u4e09\u5757\u56fa\u6001\u505a\u65e5\u5fd7,\u5176\u4ed6\u76d8\u5b58\u6570\u636e. CLFS\u7684\u7279\u70b9\u662f\u5199\u6570\u636e\u5148\u5f80\u505a\u65e5\u5fd7\u7684\u56fa\u6001\u91cc\u5199,\u65e5\u5fd7\u91cc\u4f1a\u8bb0\u5f55\u76f8\u5e94\u7684\u64cd\u4f5c,\u518d\u6839\u636e\u8fd9\u4e9b\u64cd\u4f5c\u5f80\u5176\u4ed6\u76d8\u91cc\u5199\u771f\u6b63\u7684\u6570\u636e. \u6b63\u56e0\u4e3a\u65e5\u5fd7\u91cc\u6709\u76f8\u5e94\u7684\u64cd\u4f5c\u8bb0\u5f55,\u6240\u4ee5\u53ef\u901a\u8fc7\u65e5\u5fd7\u6765\u5b8c\u6210\u6570\u636e\u7684\u56de\u590d.(\u89e3\u51b3\u7cfb\u7edf\u5d29\u6e83\u6216\u8005\u6389\u7535\u6570\u636e\u4e22\u5931\u7684\u95ee\u9898) Ps: \u63d0\u4e00\u5634,\u505araid\u5c06\u591a\u5757\u78c1\u76d8\u5408\u6210\u4e00\u5757,\u5bf9inode\u7684\u603b\u91cf\u6ca1\u6709\u5f71\u54cd,inode\u5f52\u6587\u4ef6\u7cfb\u7edf\u7ba1,\u662f\u4e00\u5b9a\u7684. xfs\u4e3a\u5565\u662f\u73b0\u5728\u7684\u4e3b\u6d41\uff1f 1> xfs\u7684\u5e95\u5c42\u6548\u7387\u6bd4ext4\u9ad8; 2> xfs\u652f\u6301\u5927\u800c\u591a\u7684\u6587\u4ef6! 3> btrfs(B-tree\u6587\u4ef6\u7cfb\u7edf)\u7684\u8bfb\u5199\u901f\u5ea6\u662f\u6700\u5feb\u7684,\u4f46\u5b83\u5bf9cpu\u5185\u5b58\u7684\u5360\u7528\u975e\u5e38\u5927.\u800c\u4e14\u6781\u4e0d\u7a33\u5b9a. Ps: \u4f5c\u4e3a\u4e13\u4e1a\u4eba\u58eb,\u63d0\u5206\u533a\u7684\u6982\u5ff5\u6bd4\u8f83\u5c11,\u90fd\u662f\u8bf4\u54ea\u54ea\u4e2a\u6587\u4ef6\u7cfb\u7edf,\u8981\u77e5\u9053, \u6bcf\u4e2a\u6587\u4ef6\u7cfb\u7edf\u4e00\u5b9a\u662f\u5173\u8054\u4e00\u4e2a\u5177\u4f53\u7684\u5206\u533a. \"\"\" \u6587\u4ef6\u7cfb\u7edf \u6587\u4ef6\u7cfb\u7edf \u6587\u4ef6\u7cfb\u7edf \u5206\u533a1 \u5206\u533a2 \u5206\u533a3 \"\"\" [ root@localhost opt ] # ll /dev/sda brw-rw---- 1 root disk 8 , 0 7\u6708 4 22 :54 /dev/sda [ root@localhost opt ] # ll /dev/sda1 brw-rw---- 1 root disk 8 , 1 7\u6708 4 22 :54 /dev/sda1 [ root@localhost opt ] # ll /dev/sda2 brw-rw---- 1 root disk 8 , 2 7\u6708 4 22 :54 /dev/sda2 \"\"\" df \u5373disk filesystem\u4e4b\u610f \u67e5\u770b\u7684\u662f\u786c\u76d8\u7684\u6587\u4ef6\u7cfb\u7edf \u6ce8\u610f\u89c2\u5bdf\u7ed3\u679c,/dev/sda1\u8fd9\u4e00\u5206\u533a\u662f\u5728\u6587\u4ef6\u7cfb\u7edf\u8fd9\u4e00\u5217\u4e0b\u9762\u7684! /dev/sda1\u5360\u5728\u300a\u786c\u76d8\u7684\u89d2\u5ea6\u300b\u6307\u7684\u662f\u7b2c1\u4e2a\u5206\u9694\u69fd. /dev/sda1\u5360\u5728\u300a\u8f6f\u4ef6\u7684\u89d2\u5ea6\u300b\u662f\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf. \u6302\u8f7d\u70b9\u6253\u4e2a\u6bd4\u65b9,\u786c\u76d8\u662f\u4e2a\u6c34\u6876,\u7528\u6728\u677f\u8fdb\u884c\u4e86\u9694\u65ad,\u5212\u5206\u51fa\u6bcf\u4e2a\u533a\u57df\u90fd\u5b89\u88c5\u4e86\u4e2a\u6c34\u9f99\u5934\u7528\u4e8e\u51fa\u6c34. \u901a\u4fd7\u70b9\u6765\u8bb2\u6302\u8f7d\u70b9\u5c31\u662f\u6307\u6bcf\u4e2a\u5206\u533a\u6700\u4e0a\u5c42\u7684\u90a3\u4e2a\u6587\u4ef6\u5939.. \u5c31\u662f\u5206\u533a\u5173\u8054\u7684\u6587\u4ef6\u5939 eg: / /boot .. -h \u78c1\u76d8\u5bb9\u91cf,\u4ee5M\u3001G..\u66f4\u7f8e\u89c2 -i \u78c1\u76d8inode\u53f7\u4f7f\u7528\u60c5\u51b5 -T \u591a\u52a0\u4e00\u5217 \u6587\u4ef6\u7cfb\u7edf\u7684\u7c7b\u578b ps: mount\u547d\u4ee4\u53ef\u67e5\u770b\u6302\u8f7d\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f.. \"\"\" [ root@localhost opt ] # df -h -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b \u5bb9\u91cf \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 devtmpfs devtmpfs 470M 0 470M 0 % /dev tmpfs tmpfs 487M 0 487M 0 % /dev/shm tmpfs tmpfs 487M 15M 472M 4 % /run tmpfs tmpfs 487M 0 487M 0 % /sys/fs/cgroup /dev/mapper/centos-root xfs 17G 4 .6G 13G 27 % / /dev/sda1 xfs 1014M 212M 803M 21 % /boot tmpfs tmpfs 98M 40K 98M 1 % /run/user/0 [ root@localhost opt ] # df -i -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b Inode \u5df2\u7528 ( I ) \u53ef\u7528 ( I ) \u5df2\u7528 ( I ) % \u6302\u8f7d\u70b9 devtmpfs devtmpfs 120231 401 119830 1 % /dev tmpfs tmpfs 124455 1 124454 1 % /dev/shm tmpfs tmpfs 124455 961 123494 1 % /run tmpfs tmpfs 124455 16 124439 1 % /sys/fs/cgroup /dev/mapper/centos-root xfs 8910848 139846 8771002 2 % / /dev/sda1 xfs 524288 347 523941 1 % /boot tmpfs tmpfs 124455 23 124432 1 % /run/user/0","title":"\u6587\u4ef6\u7cfb\u7edf\u4ecb\u7ecd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_2","text":"\u6587\u4ef6 = \u6587\u4ef6\u5143\u6570\u636e + \u5b9e\u9645\u5185\u5bb9","title":"\u6587\u4ef6\u7cfb\u7edf\u5de5\u4f5c\u539f\u7406"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#block","text":"\u786c\u76d8\u7684\u6700\u5c0f\u5b58\u53d6\u5355\u4f4d -- \u6247\u533a(512kb) \u64cd\u4f5c\u7cfb\u7edf\u7684\u6700\u5c0f\u5b58\u53d6\u5355\u4f4d -- block\u5757(4k) Ps:\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u7cfb\u7edf\u8d1f\u8d23\u5c06\u78c1\u76d8\u7684\u591a\u6247\u533a\u7ec4\u7ec7\u6210\u4e00\u4e2a\u4e2a\u7684block\u5757,\u8fd9\u6837OS\u5c31\u53ef\u4ee5\u4e00\u6b21\u6027\u8bfb\u53d6\u4e00\u4e2a\"\u5757\"(block); \u5373\u4e00\u6b21\u6027\u8fde\u7eed\u8bfb\u53d6\u591a\u4e2a\u6247\u533a. \"\u5757\"\u7684\u5927\u5c0f,\u6700\u5e38\u89c1\u7684\u662f4KB,\u5373\u8fde\u7eed\u516b\u4e2asector\u7ec4\u6210\u4e00\u4e2ablock. \u5728\u6587\u4ef6\u7cfb\u7edf\u773c\u91cc,\u4e00\u4e2a\u5206\u533a\u5c31\u662f\u4e00\u5806block\u5757\uff01\u6587\u4ef6\u7cfb\u7edf\u5c06\u5b83\u4eec\u8fdb\u884c\u4e86\u5206\u7c7b: 1> superblock \u8d85\u7ea7\u533a\u5757 \u4e00\u4e2a : \u8bb0\u5f55\u6574\u4e2a\u6863\u6848\u7cfb\u7edf\u7684\u6574\u4f53\u4fe1\u606f,\u5305\u62ecinode\u4e0eblock\u7684\u603b\u91cf\u3001\u4f7f\u7528\u91cf\u3001\u5269\u4f59\u91cf\u7b49 \u521b\u5efa\u6587\u4ef6\u65f6,\u4f1a\u8ddfsuperblock\u7533\u8bf7inode\u548cdata block. 2> inode \u533a\u5757 \u591a\u4e2a : \u653e\u7f6e\u6587\u4ef6\u7684 \u5143\u4fe1\u606f \u5143\u6570\u636e - \u6743\u9650(rwx)\u3001\u62e5\u6709\u8005\u3001\u7fa4\u7ec4\u3001\u65f6\u95f4\u53c2\u6570\u7b49. \u5305\u62ec\u4e00\u4e2a\u6587\u4ef6\u88ab\u5206\u914d\u7684\u4e00\u4e2ainode\u53f7\u4ee5\u53ca\u8be5\u6587\u4ef6\u5bf9\u5e94\u7684\u4e00\u4e2a\u6216\u591a\u4e2adata block\u5757\u53f7\u7801; Ps:\u8bf4\u5728\u524d\u9762,\u4e00\u4e2a\u6587\u4ef6\u53ea\u80fd\u6709\u4e00\u4e2ainode\u53f7,\u4f46\u591a\u4e2a\u6587\u4ef6\u7684inode\u53f7\u53ef\u4ee5\u76f8\u540c -- \u786c\u94fe\u63a5 3> data block \u533a\u5757 \u5269\u4e0b\u7684 : \u82e5\u662f\u6587\u4ef6\u5939 \u653e\u7f6e\u5b50\u6587\u4ef6\u540d\u6216\u8005\u5b50\u6587\u4ef6\u5939\u540d\u7684 inode\u53f7 ; \u82e5\u662f\u6587\u4ef6 \u653e\u7f6e\u6587\u4ef6\u7684 \u5b9e\u9645\u5185\u5bb9 ; Ps: \u6bcf\u4e2ainode \u4e0edata block \u90fd\u6709\u81ea\u5df1\u7684\u7f16\u53f7 \u4e00\u4e2a\u6587\u4ef6 ( \u4e0d\u7ba1\u662f\u6587\u4ef6\u8fd8\u662f\u76ee\u5f55 ) \u5360\u7528\u4e00\u4e2ainode\u5757\u4ee5\u53ca\u4e00\u4e2a\u6216\u8005\u591a\u4e2adata block\u5757! \u6ce8\u610f\u54e6! \u4e00\u4e2a\u6587\u4ef6\u5939/\u76ee\u5f55\u4e5f\u7b97\u662f\u4e00\u4e2a\u6587\u4ef6! \u91cc\u9762\u5b58\u50a8\u7684\u662f\u5b50\u6587\u4ef6\u540d\u548c\u5b50\u6587\u4ef6\u5939\u540d\u7684inode\u7f16\u53f7! So, \u5728linux\u91cc\u6839\u672c\u5c31\u6ca1\u6709\u6587\u4ef6\u5939\u4e00\u8bf4,\u662f\u4e3a\u4e86\u65b9\u4fbf\u9610\u8ff0\u624d\u8fd9\u6837\u8bf4\u7684,\u5b9e\u9645\u4e0a\u5e94\u8be5\u53eb\u505a \u76ee\u5f55\u6587\u4ef6 ! \u8fd9\u6837\u79f0\u547c\u662f\u56e0\u4e3a\u6587\u4ef6\u5939\u91cc\u5b58\u653e\u7684\u662f\u5b50\u6587\u4ef6\u7684inode\u7f16\u53f7,\u5c31\u50cf\u662f\u4e66\u7684\u76ee\u5f55\u4e00\u6837\uff01","title":"block\u7684\u5206\u7c7b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_3","text":"cat /etc/passwd \u7684\u6574\u4f53\u8fc7\u7a0b\u5982\u4e0b: [ root@localhost opt ] # ls -i / 78150 bin 50331763 home 16778318 mnt 8877 run 16777288 tmp 64 boot 81 lib 33746122 opt 78154 sbin 33732779 usr 3 dev 83 lib64 1 proc 50331764 srv 50331713 var 16777281 etc 84 media 33574977 root 1 sys [ root@localhost opt ] # ls -di / 64 / [ root@localhost opt ] # ls -di /etc/ 16777281 /etc/ [ root@localhost opt ] # ls -i /etc/passwd 17500057 /etc/passwd Ps: \u8fd9\u5f20\u903b\u8f91\u56fe\u4e2dinode\u5757\u7684block\u7f16\u53f7\u662f\u5047\u8bbe\u7684,\u5bf9\u6574\u4f53\u7684\u63a8\u5bfc\u6d41\u7a0b\u6ca1\u6709\u5f71\u54cd.. step 1> \u9996\u5148, \u7cfb\u7edf\u627e\u5230\u8fd9\u4e2a\u6587\u4ef6\u540d\u5bf9\u5e94\u7684inode\u53f7\u7801; step 2> \u5176\u6b21, \u901a\u8fc7inode\u53f7\u7801,\u83b7\u53d6inode\u4fe1\u606f; step 3> \u6700\u540e, \u6839\u636einode\u4fe1\u606f, \u627e\u5230\u6587\u4ef6\u6570\u636e\u6240\u5728\u7684block,\u8bfb\u51fa\u6570\u636e cat /etc/passwd \u67e5\u627e\u7684\u6574\u4f53\u8fc7\u7a0b \u6839\u6587\u4ef6\u5939/ ; \u6587\u4ef6\u5939/etc ; \u6587\u4ef6/etc/passwd 1> OS\u7684\u6587\u4ef6\u7cfb\u7edf\u5148\u53bb\u95ee\u95eesuper block,\u77e5\u9053\u4e86\u6839\u76ee\u5f55/\u7684inode\u7f16\u53f7\u662f64, \u627e\u5230\u7f16\u53f7\u4e3a64\u7684inode\u5757,\u5728\u8be5\u5143\u4fe1\u606f\u91cc\u770b\u5230\u5176\u5bf9\u5e94\u7684data block\u7f16\u53f7\u662f555; \u627e\u5230\u6839\u76ee\u5f55/\u5bf9\u5e94\u7f16\u53f7\u4e3a555\u7684data block,\u91cc\u9762/etc\u6587\u4ef6\u5939\u5bf9\u5e94\u7684inode\u53f7\u662f16777281; 2> \u6587\u4ef6\u7cfb\u7edf\u627e\u5230\u7f16\u53f7\u4e3a16777281\u7684inode\u5757,\u67e5\u8be2\u5230\u5176\u5bf9\u5e94\u7684data block\u7f16\u53f7\u662f666, \u5728\u7f16\u53f7\u4e3a666\u7684data block,\u67e5\u8be2\u5230/etc/passwd\u6587\u4ef6\u5bf9\u5e94\u7684inode\u53f7\u662f17500057; 3> \u6587\u4ef6\u7cfb\u7edf\u627e\u5230\u7f16\u53f7\u4e3a17500057\u7684inode\u5757,\u67e5\u8be2\u5230\u5176\u5bf9\u5e94\u7684data block\u7f16\u53f7\u662f666\u3001777\u3001888, \u8fdb\u800c\u8bfb\u51fa\u6570\u636e.. Ps: \u67e5\u627e\u7684\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u8fd8\u8981\u8003\u8651\u6709\u65e0\u6743\u9650\u54e6(\u00b4\u25bd\uff40)!! \u4e0d\u7ba1\u662fxfs\u8fd8\u662fext,\u5e95\u5c42\u7684\u539f\u7406\u90fd\u662f\u8fd9\u6837\u7684,\u53ea\u4e0d\u8fc7,xfs\u5728\u6b64\u4e4b\u4e0a\u505a\u4e86\u4e00\u4e9b\u4f18\u5316\u63d0\u9ad8\u4e86\u8bfb\u5199\u6548\u7387.. xfs\u3001ext\u6587\u4ef6\u7cfb\u7edf\u90fd\u88ab\u79f0\u4f5c \u7d22\u5f15\u5f0f\u6587\u4ef6\u7cfb\u7edf (indexed allocation)\uff01","title":"\u6587\u4ef6\u7684\u67e5\u627e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_4","text":"Q: \u82e5\u9700\u8981\u5220\u9664 /etc/passwd \u6587\u4ef6,\u5220\u9664\u8fc7\u7a0b\u662f\u600e\u6837\u7684\u5462\uff1f A: \u5b9e\u9645\u4e0a\u6ca1\u6709\u5220\u9664\u8fd9\u4e00\u8bf4, \u786c\u76d8\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u8986\u76d6! \"\u5220\u9664\"\u6b64\u6587\u4ef6,\u4f1a\u5bfc\u81f4\u8be5\u6587\u4ef6\u5bf9\u5e94\u7684inode\u53f717500057,\u4ee5\u53ca\u5bf9\u5e94\u7684data block\u5757777 888 999\u5728superblock\u91cc\u90fd\u6807\u8bb0\u4e3afree\u81ea\u7531\u7a7a\u95f2\u72b6\u6001;\u8868\u660e\u5f53\u6709\u5176\u4ed6\u6570\u636e\u6587\u4ef6\u5f80\u786c\u76d8\u4e2d\u5199\u7684\u65f6\u5019,free\u72b6\u6001\u7684inode\u53f7\u548cdata block\u5757\u53ef\u4ee5\u5206\u522b\u5b58\u5176\u4ed6\u6587\u4ef6\u7684\u5143\u6570\u636e\u548c\u5185\u5bb9. \u4e5f\u5c31\u662f\u8bf4,\u5220\u9664\u4e00\u4e2a\u6587\u4ef6\u65f6,\u6587\u4ef6\u7684\u5143\u6570\u636e\u548c\u5185\u5bb9\u90fd\u8fd8\u5728\u786c\u76d8\u91cc\uff01 \u8fd8\u4f1a\u5c06\u76ee\u5f55\u6587\u4ef6/etc\u7684data block\u91cc\u9762, /etc/passwd\u6587\u4ef6\u4e0e\u5bf9\u5e94\u7684inode\u53f717500057\u7684\u7ed1\u5b9a\u5173\u7cfb\u6e05\u7406\u6389! So,\u56de\u590d\u6570\u636e\u7684\u539f\u7406,\u5c31\u662f\u5c06\u672a\u5220\u9664\u4e4b\u524d\u7684\u7ed1\u5b9a\u5173\u7cfb\u8fdb\u884c\u6062\u590d. \u6570\u636e\u56de\u590d\u4e00\u5b9a\u80fd\u56de\u590d\u56de\u6765\u5417\uff1f\u4e0d\u4e00\u5b9a! \u56e0\u4e3a\u88ab\u6807\u8bb0\u4e3afree\u7684\u5757\u88ab\u5206\u914d\u8d70\u4e86\u5c31\u6ca1\u529e\u6cd5\u5566.\u6570\u636e\u88ab\u8986\u76d6\u4e86. \u6240\u4ee5\u6570\u636e\u56de\u590d\u65f6\u4f1a\u95ee,\u5220\u9664\u6709\u591a\u4e45\u5566,\u5728\u6b64\u4e4b\u95f4\u6709\u6ca1\u6709\u505a\u5176\u4ed6\u64cd\u4f5c..","title":"\u6587\u4ef6\u7684\u5220\u9664"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_5","text":"","title":"\u6587\u4ef6\u7cfb\u7edf\u6269\u5c55"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#inode","text":"\u6587\u4ef6\u7684 inode \u4e2d\u6587\u8bd1\u540d\u4e3a \"\u7d22\u5f15\u8282\u70b9\" , \u662fUNIX \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784, \u5176\u672c\u8d28\u662f\u7ed3\u6784\u4f53. [stat\u547d\u4ee4] \u53ef\u4ee5\u7528 stat \u547d\u4ee4, \u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7684inode\u4fe1\u606f! [ root@localhost opt ] # stat /etc/ \u6587\u4ef6\uff1a \"/etc/\" \u5927\u5c0f\uff1a8192 \u5757\uff1a24 IO \u5757\uff1a4096 \u76ee\u5f55 \u8bbe\u5907\uff1afd00h/64768d Inode\uff1a16777281 \u786c\u94fe\u63a5\uff1a144 \u6743\u9650\uff1a ( 0755 /drwxr-xr-x ) Uid\uff1a ( 0 / root ) Gid\uff1a ( 0 / root ) \u6700\u8fd1\u8bbf\u95ee\uff1a2022-07-18 09 :44:50.868295267 +0800 \u6700\u8fd1\u66f4\u6539\uff1a2022-07-15 22 :22:00.039036820 +0800 \u6700\u8fd1\u6539\u52a8\uff1a2022-07-15 22 :22:00.039036820 +0800 \u521b\u5efa\u65f6\u95f4\uff1a- [ root@localhost opt ] # stat /etc/passwd \u6587\u4ef6\uff1a \"/etc/passwd\" \u5927\u5c0f\uff1a2351 \u5757\uff1a8 IO \u5757\uff1a4096 \u666e\u901a\u6587\u4ef6 \u8bbe\u5907\uff1afd00h/64768d Inode\uff1a17500057 \u786c\u94fe\u63a5\uff1a1 \u6743\u9650\uff1a ( 0644 /-rw-r--r-- ) Uid\uff1a ( 0 / root ) Gid\uff1a ( 0 / root ) \u6700\u8fd1\u8bbf\u95ee\uff1a2022-07-18 07 :33:46.014207025 +0800 \u6700\u8fd1\u66f4\u6539\uff1a2022-07-15 10 :14:51.948530819 +0800 \u6700\u8fd1\u6539\u52a8\uff1a2022-07-15 10 :14:51.955530994 +0800 \u521b\u5efa\u65f6\u95f4\uff1a- \u4ece\u6839\u672c\u4e0a\u8bb2,inode\u4e2d\u5b58\u653e\u7684\u662f\u9664\u4e86\u6587\u4ef6\u7684\u540d\u5b57\u4ee5\u53ca\u6587\u4ef6\u771f\u5b9e\u5185\u5bb9\u4e4b\u5916\u6240\u6709\u6709\u5173\u6587\u4ef6\u7684\u4fe1\u606f/\u5143\u6570\u636e(metadata)! \u25cf inode \u7f16\u53f7 \u25cf \u7528\u6765\u8bc6\u522b\u6587\u4ef6\u7c7b\u578b,\u4ee5\u53ca\u7528\u4e8estat C\u51fd\u6570\u7684\u6a21\u5f0f\u4fe1\u606f \u25cf \u94fe\u63a5\u6570,\u5373\u6709\u591a\u5c11\u6587\u4ef6\u540d\u6307\u5411\u8fd9\u4e2ainode \u25cf \u5c5e\u4e3b\u7684ID(UID) \u25cf \u5c5e\u4e3b\u7684\u7ec4ID(GID) \u25cf \u6587\u4ef6\u7684\u5b57\u8282\u6570 \u25cf \u6587\u4ef6\u6240\u4f7f\u7528\u7684\u78c1\u76d8\u5757\u7684\u5b9e\u9645\u6570\u76ee \u25cf \u6587\u4ef6\u7684\u65f6\u95f4\u6233,\u5171\u6709\u4e09\u4e2a: ctime\u6307inode\u4e0a\u4e00\u6b21\u53d8\u52a8\u7684\u65f6\u95f4; mtime\u6307\u6587\u4ef6\u5185\u5bb9\u4e0a\u4e00\u6b21\u53d8\u52a8\u7684\u65f6\u95f4; atime\u6307\u6587\u4ef6\u4e0a\u4e00\u6b21\u6253\u5f00\u7684\u65f6\u95f4\u3002 \u25cf \u6307\u5411\u6570\u636e\u5757\u7684\u6307\u9488 \u6572\u9ed1\u677f! Linux\u7cfb\u7edf\u5185\u90e8\u4e0d\u4f7f\u7528\u6587\u4ef6\u540d, \u800c\u662f\u7528inode\u53f7\u7801\u6765\u8bc6\u522b\u6587\u4ef6. \u6bcf\u4e2ainode\u90fd\u6709\u4e00\u4e2a\u53f7\u7801. \u5bf9\u4e8e\u7cfb\u7edf\u6765\u8bf4,\u6587\u4ef6\u540d\u53ea\u662finode\u53f7\u7801\u4fbf\u4e8e\u8bc6\u522b\u7684\u522b\u79f0\u6216\u8005\u7ef0\u53f7. [\u4e09\u79cd\u65f6\u95f4] \u8be6\u89e3,atime\u3001mtime\u3001ctime\u7684\u533a\u522b\uff01 1> atime(access time):[\u8bbf\u95ee\u6587\u4ef6\u5185\u5bb9]\u7684\u65f6\u95f4. \u5bf9\u6587\u4ef6\u8fdb\u884c\u4e00\u6b21\u8bfb\u64cd\u4f5c,\u5b83\u7684\u8bbf\u95ee\u65f6\u95f4\u5c31\u4f1a\u6539\u53d8. eg: cat\u3001more\u7b49\u64cd\u4f5c,\u4f46\u662f\u50cf\u4e4b\u524d\u7684stat\u8fd8\u6709ls\u547d\u4ee4\u5bf9atime\u662f\u4e0d\u4f1a\u6709\u5f71\u54cd\u7684. \u56e0\u4e3astat\u3001ls\u8bbf\u95ee\u7684\u662f\u6587\u4ef6\u7684\u5143\u6570\u636e,\u6ca1\u6709\u8bbf\u95ee\u6587\u4ef6\u7684\u5185\u5bb9\uff01\uff01 2> mtime(modify time):[\u4fee\u6539\u6587\u4ef6\u5185\u5bb9]\u7684\u65f6\u95f4. \u6587\u4ef6\u7684\u5185\u5bb9\u88ab\u6700\u540e\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4,\u6211\u4eec\u7ecf\u5e38\u7528\u7684ls -l\u547d\u4ee4\u663e\u793a\u51fa\u6765\u7684\u6587\u4ef6\u65f6\u95f4\u5c31\u662f\u8fd9\u4e2a\u65f6\u95f4. \u5f53\u7528vim\u5bf9\u6587\u4ef6\u8fdb\u884c\u7f16\u8f91\u4e4b\u540e\u4fdd\u5b58,\u5b83\u7684mtime\u5c31\u4f1a\u76f8\u5e94\u7684\u6539\u53d8; eg: echo aa >> a.sh \u6216vim a.txt \u4fee\u6539\u5185\u5bb9 3> ctime(change time):[\u4fee\u6539\u6587\u4ef6]\u7684\u65f6\u95f4. \u901a\u4fd7\u70b9,\u6587\u4ef6\u4f46\u51e1\u6709\u4e00\u70b9\u6539\u52a8,\u4e0d\u7ba1\u662f\u5143\u6570\u636e\u8fd8\u662f\u5185\u5bb9\u7684\u6539\u52a8\u90fd\u4f1a\u5bfc\u81f4ctime\u7684\u6539\u53d8. eg: \u5f53\u4f7f\u7528chmod\u3001chown\u7b49\u6539\u53d8\u6587\u4ef6\u5c5e\u6027\u7684\u64cd\u4f5c\u662f\u4f1a\u6539\u53d8\u6587\u4ef6\u7684ctime\u7684. chmod +x a.txt \u25cb \u4f7f\u7528cat\u547d\u4ee4\u67e5\u770b\u6587\u4ef6\u540e,\u6587\u4ef6atime\u4f1a\u53d8\u66f4 \u25cb \u4f7f\u7528vim\u547d\u4ee4\u6253\u5f00\u6587\u4ef6\u53ea\u8981\u5728\u6269\u5c55\u6a21\u5f0f\u4e0bw\u540e,\u6587\u4ef6atime\u3001mtime\u3001ctime\u90fd\u4f1a\u53d8\u66f4. \u82e5vim\u6253\u5f00\u540e\u968f\u4fbf\u548b\u7f16\u8f91\u548b\u67e5\u770b\u53ea\u8981\u6ca1\u6709w\u4fdd\u5b58,\u90fd\u53ea\u662f\u5728\u5bf9\u5185\u5b58\u91cc\u7684\u6570\u636e\u8fdb\u884c\u64cd\u4f5c,\u6ca1\u6709\u5199\u5165\u786c\u76d8. \u5373\u53ea\u8981\u5728\u6269\u5c55\u6a21\u5f0f\u4e0bq\u6216q!,\u53ea\u4f1a\u53d8\u66f4atime. \u3010\u51b7\u77e5\u8bc6\u3011 \u4e5f\u8bb8\u4f60\u4f1a\u60ca\u5947\u7684\u53d1\u73b0\u7b2c\u4e00\u6b21\u540e\u518d\u8fde\u7eed\u51e0\u6b21cat/vim\u524d\u540e\u7684atime\u90fd\u6ca1\u6709\u53d8\u5316,\u8fd9\u662f\u56e0\u4e3alinux\u81ea\u5e26\u7684\u4f18\u5316\u673a\u5236\u5bfc\u81f4\u7684: cache \u7f13\u5b58 (\u8bfb) -- \u786c\u76d8\u4e2d\u7684\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7f13\u5b58; buffer \u7f13\u51b2\u533a (\u5199) -- \u6512\u4e00\u6ce2\u518d\u5f80\u786c\u76d8\u4e2d\u5199. PS:\u5728\u524d\u6587\u7684\u8ba1\u7b97\u673a\u786c\u4ef6\u7ec4\u6210\u4e2d\u6709\u9610\u8ff0. \u63d0\u4e00\u5634:sync\u547d\u4ee4\u4f1a\u5c06buffer\u7f13\u51b2\u533a\u7684\u6570\u636e\u5f3a\u5236\u5f80\u786c\u76d8\u4e2d\u5199. [inode\u5927\u5c0f] \u6ce8\u610f\u54e6! inode\u4e5f\u4f1a\u6d88\u8017\u786c\u76d8\u7a7a\u95f4\u7684. [\u76ee\u5f55\u9879] Linux\u7cfb\u7edf\u4e2d, \u76ee\u5f55(directory)\u4e5f\u662f\u4e00\u79cd\u6587\u4ef6. \u6253\u5f00\u76ee\u5f55,\u5b9e\u9645\u4e0a\u5c31\u662f\u6253\u5f00\u76ee\u5f55\u6587\u4ef6. \u76ee\u5f55\u6587\u4ef6\u7684\u7ed3\u6784\u975e\u5e38\u7b80\u5355, \u5c31\u662f\u4e00\u7cfb\u5217\u76ee\u5f55\u9879(dirent)\u7684\u5217\u8868. \u6bcf\u4e2a\u76ee\u5f55\u9879\u7531\u4e24\u90e8\u5206\u7ec4\u6210: \u6240\u5305\u542b\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u4ee5\u53ca\u8be5\u6587\u4ef6\u540d\u5bf9\u5e94\u7684inode\u53f7\u7801!","title":"inode\u4fe1\u606f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#fat","text":"U\u76d8\u4f7f\u7528\u7684\u6587\u4ef6/\u6863\u6848\u7cfb\u7edf\u4e00\u822c\u4e3aFAT\u683c\u5f0f. \u5b83\u5177\u6709\u4ee5\u4e0b\u7684\u7279\u70b9: 1> FAT\u6ca1\u6709\u533a\u5206superblock\u3001inode\u3001data block, \u5c31\u662f\u4e00\u5806\u7b80\u5355\u7684block!\u4f46\u4f9d\u65e7\u4f1a\u5bf9block\u8fdb\u884c\u7f16\u53f7. \u662f\u6ca1\u6709xfs\u3001ext\u90a3\u6837\u7684\u7d22\u5f15\u7684, \u4e00\u4e2ablock\u5757\u91cc\u5b58\u653e\u4e00\u5806(\u540d\u5b57\u5bf9\u5e94\u7684\u4e0b\u4e00\u8df3\u7684\u6570\u5b57)\u7684\u7ec4\u5408. 2> \u6b63\u56e0\u4e3aFAT\u6ca1\u6709inode\u7684\u5b58\u5728, \u6240\u4ee5FAT\u6ca1\u6709\u529e\u6cd5\u5c06\u8fd9\u4e2a\u6863\u6848\u7684\u6240\u6709block\u5728\u4e00\u5f00\u59cb\u5c31\u8bfb\u53d6\u51fa\u6765. \u6bcf\u4e2ablock\u53f7\u7801\u90fd\u8bb0\u5f55\u5728\u524d\u4e00\u4e2ablock\u5f53\u4e2d.\u53ea\u80fd\u4e00\u8df3\u4e00\u8df3\u7684\u67e5\u627e.\u592a\u6162\u592a\u7b28\u62d9\u4e86 TnT. \u5047\u8bbe\u6863\u6848\u7684\u8d44\u6599\u4f9d\u5e8f\u5199\u5165 1->7->4->15 \u8fd9\u56db\u4e2ablock\u53f7\u7801\u4e2d. \u63d0\u4e00\u5634,\u4e3a\u5565\u4f1a\u8fd9\u6837\u5199\u5165\u5462\uff1f\u540c\u4e00\u65f6\u95f4\u5f80\u786c\u76d8\u7684\u5199\u64cd\u4f5c\u5f88\u591a\u5bfc\u81f4\u7684.\u662f\u6309\u7167\u987a\u5e8f\u7a7f\u63d2\u7740\u6765\u7684. \u8fd9\u4e2a\u6863\u6848\u7cfb\u7edf\u6ca1\u6709\u529e\u6cd5\u4e00\u53e3\u6c14\u5c31\u77e5\u9053\u56db\u4e2ablock\u7684\u53f7\u7801,\u5b83\u5f97\u4e00\u4e2a\u4e00\u4e2a\u7684\u5c06block\u8bfb\u51fa\u540e,\u624d\u4f1a\u77e5\u9053\u4e0b\u4e00\u4e2ablock\u5728\u4f55\u5904! \u5982\u679c\u540c\u4e00\u4e2a\u6863\u6848\u8d44\u6599\u5199\u5165\u7684block\u5206\u6563\u7684\u592a\u8fc7\u5389\u5bb3\u8de8\u5ea6\u592a\u5927\u65f6, \u5219\u6211\u4eec\u7684\u78c1\u76d8\u8bfb\u53d6\u5934\u5c06\u65e0\u6cd5\u5728\u78c1\u76d8\u8f6c\u4e00\u5708\u5c31\u8bfb\u5230\u6240\u6709\u7684\u8d44\u6599.\u56e0\u6b64\u78c1\u76d8\u5c31\u4f1a\u591a\u8f6c\u597d\u51e0\u5708\u624d\u80fd\u5b8c\u6574\u7684\u8bfb\u53d6\u5230\u8fd9\u4e2a\u6863\u6848\u7684\u5185\u5bb9! \u3010\u78c1\u76d8\u788e\u7247\u6574\u7406\u3011 \u6b63\u56e0\u4e3a\u6863\u6848\u5199\u5165\u7684block\u592a\u8fc7\u4e8e\u79bb\u6563\u4e86,\u5bfc\u81f4\u6587\u4ef6\u7684\u8bfb\u53d6\u6548\u7387\u5f88\u5dee,\u6240\u4ee5\u9700\u8981\u5b9a\u671f\u8fdb\u884c\u788e\u7247\u6574\u7406\uff01 \u8bf4\u767d\u4e86,\u5c31\u662f\u5c06\u6587\u4ef6\u5b58\u7684\u76f8\u5e94\u7684\u7d27\u51d1\u4e00\u70b9.block\u5757\u8fde\u7eed\u4e00\u70b9. Q: \u90a3\u4e48\u50cfxfs\u3001ext\u6587\u4ef6\u7cfb\u7edf\u9700\u8981\u8fdb\u884c\u78c1\u76d8\u6574\u7406\u5417\uff1f A: \u5b83\u4eec\u662f\u7d22\u5f15\u6587\u4ef6\u7cfb\u7edf,\u901a\u5e38\u662f\u4e0d\u9700\u8981\u7684. \u4f46\u662f\u5982\u679c\u6863\u6848\u7cfb\u7edf\u4f7f\u7528\u592a\u4e45,\u5e38\u5e38\u5220\u9664/\u7f16\u8f91/\u65b0\u589e\u6863\u6848\u8bdd,\u662f\u53ef\u80fd\u4f1a\u9020\u6210\u6863\u6848\u8d44\u6599\u592a\u8fc7\u4e8e\u79bb\u6563\u7684\u95ee\u9898 \u6b64\u65f6\u5c31\u9700\u8981\u8fdb\u884c\u91cd\u6574\u4e00\u4e0b\uff01 Ps: windows\u5e38\u89c1\u7684\u6587\u4ef6\u7cfb\u7edf FAT\u3001NTFS\u3001VFAT\u3001MSDOS...","title":"FAT\u6587\u4ef6\u7cfb\u7edf"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_6","text":"\u5e38\u8bc6: \u53ea\u8981\u6743\u9650\u591f, \u78c1\u76d8\u4e0a\u6709\u7a7a\u95f4\u4e00\u5b9a\u53ef\u4ee5\u521b\u5efa\u6587\u4ef6. \u8fd9\u4e2a\u662f\u9519\u7684!! (X) \u25b2 \u6587\u4ef6\u7cfb\u7edf/\u5206\u533a\u7684inode\u53f7 [ root@localhost opt ] # df -i -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b Inode \u5df2\u7528 ( I ) \u53ef\u7528 ( I ) \u5df2\u7528 ( I ) % \u6302\u8f7d\u70b9 devtmpfs devtmpfs 120231 401 119830 1 % /dev tmpfs tmpfs 124455 1 124454 1 % /dev/shm tmpfs tmpfs 124455 961 123494 1 % /run tmpfs tmpfs 124455 16 124439 1 % /sys/fs/cgroup /dev/mapper/centos-root xfs 8910848 139846 8771002 2 % / /dev/sda1 xfs 524288 347 523941 1 % /boot tmpfs tmpfs 124455 23 124432 1 % /run/user/0 \u25b2 \u6587\u4ef6\u7cfb\u7edf/\u5206\u533a\u7684\u78c1\u76d8\u5bb9\u91cf [ root@localhost opt ] # df -h -T \u6587\u4ef6\u7cfb\u7edf \u7c7b\u578b \u5bb9\u91cf \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 devtmpfs devtmpfs 470M 0 470M 0 % /dev tmpfs tmpfs 487M 0 487M 0 % /dev/shm tmpfs tmpfs 487M 15M 472M 4 % /run tmpfs tmpfs 487M 0 487M 0 % /sys/fs/cgroup /dev/mapper/centos-root xfs 17G 4 .6G 13G 27 % / /dev/sda1 xfs 1014M 212M 803M 21 % /boot tmpfs tmpfs 98M 40K 98M 1 % /run/user/0 \u60c5\u51b5\u4e00 : \u78c1\u76d8\u4e0a\u8fd8\u6709\u7a7a\u95f4,\u4f46\u78c1\u76d8\u4e0a\u5927\u91cf\u7684\u5c0f\u6587\u4ef6\u5bfc\u81f4inode\u53f7\u6ca1\u4e86. i=30000;while true;do touch /boot/$i.txt;echo $i.txt;((i++));done \u5f53/boot \u5206\u533a\u7684inode\u4f7f\u7528\u5b8c,\u518d\u521b\u5efa\u6587\u4ef6\u4f1a\u5931\u8d25,\u4f1a\u63d0\u793a\u8bbe\u5907\u4e0a\u6ca1\u6709\u7a7a\u95f4. \u9ed1\u79d1\u6280,\u8fd0\u884c\u4e0a\u65b9\u7684\u6d4b\u8bd5\u540e,\u6253\u5f00\u53e6\u4e00\u4e2a\u7ec8\u7aef,\u5b9e\u65f6\u76d1\u6d4b/boot\u5206\u533ainode\u53f7\u4f7f\u7528\u60c5\u51b5: while true;do df -i;sleep 0.5;clear;done \u8fbe\u5230\u89c6\u89c9\u4e0a\u5237\u65b0\u7684\u6548\u679c,\u5b9e\u5219\u4e0d\u662f\u5237\u65b0. Ps: \u82e5\u4e0dsleep0.5\u79d2, cpu\u7684\u6d88\u8017\u4f1a\u5f88\u5927\u5f88\u5927, \u5f97\u8ba9\u5b83\u4f11\u606f0.5\u79d2,\u4e0d\u7136\u4f1a\u70e7\u8111 Hhhh. \u60c5\u51b5\u4e8c : inode\u53f7\u8fd8\u6709\u5f88\u591a,\u4f46\u67d0\u4e2a\u6587\u4ef6\u5f88\u5927,\u78c1\u76d8\u7684\u5bb9\u91cf\u88ab\u5360\u6ee1\u4e86. dd if=/dev/zero of=/boot/test.txt bs=300M count=1 dd if=/dev/zero of=/abc.txt bs=10M count=1 cp abc.txt /boot/ \u5931\u8d25,\u4f1a\u63d0\u793a\u8bbe\u5907\u4e0a\u6ca1\u6709\u7a7a\u95f4! [\u89e3\u51b3\u65b9\u6848] 1> \u5927\u91cf\u7684\u5c0f\u6587\u4ef6\u95ee\u9898:\u53ef\u80fd\u4f1a\u4f7finode\u8017\u5c3d, \u4f7f\u5f97\u6587\u4ef6\u6587\u6cd5\u521b\u5efa(\u78c1\u76d8\u5229\u7528\u7387\u4f4e) So,\u5bf9\u4e8e\u5c0f\u6587\u4ef6\u6bd4\u8f83\u591a\u7684\u573a\u666f,\u53ef\u5c06inode\u548cdata block\u5212\u5206\u5c0f\u4e00\u70b9; \u82e5innode\u5df2\u7ecf\u4e0d\u591f\u7528\u4e86,\u53ef\u5c06\u5c0f\u6587\u4ef6\u5907\u4efd\u5230\u5176\u4ed6\u5206\u533a... 2> \u5927\u6587\u4ef6\u95ee\u9898: \u4e00\u4e2a\u6587\u4ef6\u5360\u7528\u591a\u4e2adata block,\u4f7f\u5f97\u6587\u4ef6\u8bfb\u5199\u901f\u7387\u6162.\u53ef\u5c06data block\u5212\u5206\u5927\u70b9.\u4f7f\u7528xfs\u6587\u4ef6\u7cfb\u7edf. \u82e5\u5bb9\u91cf\u5df2\u7ecf\u4e0d\u591f\u7528\u4e86. \u601d\u8def\u4e00,\u5c06\u5927\u6587\u4ef6\u6253\u5305\u5907\u4efd\u8d70;\u601d\u8def\u4e8c,\u4f7f\u7528\u8f6f\u786c\u94fe\u63a5!!!","title":"\u78c1\u76d8\u6ee1\u7684\u4e24\u79cd\u60c5\u51b5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_7","text":"","title":"\u8f6f\u786c\u94fe\u63a5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_8","text":"\u786c\u94fe\u63a5(Hard Link)\u76f8\u5f53\u4e8e\u7ed9\u4e00\u4e2a\u6587\u4ef6\u8d77\u4e86\u4e00\u4e2a \u522b\u540d , \u4e0d\u540c\u7684\u6587\u4ef6\u540d\u53ef\u4ee5\u64cd\u4f5c\u540c\u4e00\u4efd\u6570\u636e. ln [\u539f\u6587\u4ef6] [\u76ee\u6807\u6587\u4ef6] 1> \u5bf9\u786c\u94fe\u63a5\u7684\u6e90\u6587\u4ef6\u6216\u76ee\u6807\u6587\u4ef6\u5185\u5bb9\u8fdb\u884c\u4fee\u6539,\u4f1a\u5f71\u54cd\u5230\u6240\u6709\u6587\u4ef6\u540d ; 2> \u786c\u94fe\u63a5\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u5177\u6709\u76f8\u540cinode,\u4f46\u6587\u4ef6\u540d\u4e0d\u540c: \u5373 \u4e00\u4e2a\u6587\u4ef6\u53ea\u80fd\u6709\u4e00\u4e2ainode\u53f7,\u4f46\u591a\u4e2a\u6587\u4ef6\u7684inode\u53f7\u53ef\u4ee5\u76f8\u540c 3> \u5220\u9664\u786c\u94fe\u63a5\u6216\u8005\u539f\u6587\u4ef6\u4e4b\u4e00,\u4e0d\u5f71\u54cd\u53e6\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u8bbf\u95ee, \u9664\u975e\u6240\u6709\u7684\u90fd\u5220\u9664\u6389. So,\u786c\u8fde\u63a5 \u5141\u8bb8\u4e00\u4e2a\u6587\u4ef6\u62e5\u6709\u591a\u4e2a\u6709\u6548\u8def\u5f84\u540d,\u8fd9\u6837\u7528\u6237\u5c31\u53ef\u4ee5\u5efa\u7acb\u786c\u94fe\u63a5\u5230\u91cd\u8981\u6587\u4ef6,\u4ee5\u9632\u6b62\u201c\u8bef\u5220\u201d. 4> \u5220\u9664\u6240\u6709\u786c\u94fe\u63a5, \u6570\u636e\u4f1a\u5728\u88ab\u78c1\u76d8\u68c0\u67e5\u6216\u8005\u65b0\u6570\u636e\u5199\u5165\u7684\u65f6\u5019\u5220\u9664\u56de\u6536. 5> \u901a\u8fc7rm \u2013f \u5220\u9664\u786c\u94fe\u63a5 6> \u76ee\u5f55\u4e0d\u53ef\u521b\u5efa\u786c\u94fe\u63a5, \u5e76\u4e14\u786c\u94fe\u63a5\u65e0\u6cd5\u8de8\u533a Ps: \u786c\u94fe\u63a5\u6709\u70b9\u50cfpython\u91cc\u51fd\u6570\u4f20\u9012\u4e2d\u9488\u5bf9\u53ef\u53d8\u7c7b\u578b\u7684\u5f15\u7528\u4f20\u9012... \"\"\" a.txt\u7684inode\u53f7\u662f35589975,`ll a.txt`\u53ef\u5f97\u77e5\u5b83\u67091\u4e2a\u786c\u94fe\u63a5. \"\"\" [ root@localhost opt ] # cat a.txt 123 [ root@localhost opt ] # ls -i a.txt 35589975 a.txt [ root@localhost opt ] # ll a.txt -rw-r--r-- 1 root root 4 7\u6708 19 10 :44 a.txt \"\"\" \u7528`ln`\u547d\u4ee4\u4e3aa.txt\u521b\u5efa\u4e00\u4e2a\u786c\u94fe\u63a5,\u8fd9\u6837\u7684\u8bdd,a.txt\u4e0eb.txt inode\u53f7\u3001\u786c\u94fe\u63a5\u6570\u3001\u6587\u4ef6\u5185\u5bb9\u90fd\u4e00\u6837\uff01 \u5373\u4e00\u4e2ainode\u53f7\u5173\u8054\u4e86\u4e24\u4e2a\u6587\u4ef6\u540d,\u4ee3\u8868\u540c\u4e00\u4efd\u6570\u636e\uff01 \"\"\" [ root@localhost opt ] # ln a.txt b.txt [ root@localhost opt ] # ls -i b.txt 35589975 b.txt [ root@localhost opt ] # ll a.txt -rw-r--r-- 2 root root 4 7\u6708 19 10 :44 a.txt [ root@localhost opt ] # ll b.txt -rw-r--r-- 2 root root 4 7\u6708 19 10 :44 b.txt [ root@localhost opt ] # cat b.txt 123 \"\"\" \u5bf9\u786c\u94fe\u63a5\u6587\u4ef6\u6216\u539f\u6587\u4ef6\u5185\u5bb9\u8fdb\u884c\u4fee\u6539,\u4f1a\u5f71\u54cd\u5230\u6240\u6709\u6587\u4ef6\u540d \"\"\" [ root@localhost opt ] # echo 666 >> a.txt [ root@localhost opt ] # cat a.txt 123 666 [ root@localhost opt ] # cat b.txt 123 666 \"\"\" \u5220\u9664\u539f\u6587\u4ef6a.txt, \u786c\u94fe\u63a5\u6587\u4ef6b.txt\u8fd8\u80fd\u7ee7\u7eed\u4f7f\u7528 \"\"\" [ root@localhost opt ] # rm -rf a.txt [ root@localhost opt ] # ll b.txt -rw-r--r-- 1 root root 8 7\u6708 19 10 :51 b.txt # \u6ce8\u610f,\u786c\u94fe\u63a5\u6570\u53d8\u4e3a\u4e861 \"\"\" \u76ee\u5f55\u4e0d\u53ef\u521b\u5efa\u786c\u94fe\u63a5 \"\"\" [ root@localhost opt ] # mkdir ./aaa [ root@localhost opt ] # ln ./aaa ./bbb ln: \"./aaa\" : \u4e0d\u5141\u8bb8\u5c06\u786c\u94fe\u63a5\u6307\u5411\u76ee\u5f55","title":"\u786c\u94fe\u63a5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_9","text":"\u8f6f\u94fe\u63a5(Symbolic Link)\u6587\u4ef62\u76f8\u5f53\u4e8e\u662f\u6587\u4ef61\u7684\u4e00\u4e2a \u5feb\u6377\u65b9\u5f0f . \u6587\u4ef62\u6307\u5411\u6587\u4ef61\u7684\u8def\u5f84,\u800c\u4e0d\u662f\u6587\u4ef61\u7684inode\u53f7\u7801,\u6587\u4ef61\u7684inode\"\u786c\u94fe\u63a5\u6570\"\u4e0d\u4f1a\u56e0\u6b64\u53d1\u751f\u53d8\u5316. ln \u2013s [\u539f\u6587\u4ef6] [\u76ee\u6807\u6587\u4ef6] 1> \u5bf9\u8f6f\u94fe\u63a5\u7684\u6e90\u6587\u4ef6\u6216\u76ee\u6807\u6587\u4ef6\u5185\u5bb9\u8fdb\u884c\u4fee\u6539, \u4f1a\u5f71\u54cd\u5230\u6240\u6709\u6587\u4ef6\u540d ; 2> \u8f6f\u94fe\u63a5\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u5177\u6709\u4e0d\u540c\u7684inode\u53f7 3> \u5220\u9664\u8f6f\u8fde\u63a5\u6587\u4ef6\u7684\u6e90\u6587\u4ef6, \u8f6f\u94fe\u63a5\u6587\u4ef6\u5c06\u65e0\u6cd5\u4f7f\u7528, \u5e94\u8be5\u4e5f\u4e00\u8d77\u5220\u9664\u6389,\u4ee5\u4fbf\u56de\u6536 4> rm \u2013f \u5220\u9664\u8f6f\u94fe\u63a5 5> \u53ef\u4ee5\u5bf9\u76ee\u5f55\u521b\u5efa\u8f6f\u94fe\u63a5, \u5e76\u4e14\u8f6f\u94fe\u63a5\u53ef\u4ee5\u8de8\u5206\u533a \"\"\" \u4f7f\u7528\u547d\u4ee4`ln -s`\u4e3ac.txt\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5d.txt. \u76f8\u5f53\u4e8e\u521b\u5efa\u4e86\u4e00\u4e2a\u5feb\u6377\u65b9\u5f0f. \u6587\u4ef6d.txt\u7684\u5b58\u5728\u4f9d\u8d56\u4e8ec.txt \"\"\" [ root@localhost opt ] # cat c.txt 123 [ root@localhost opt ] # ln -s c.txt d.txt [ root@localhost opt ] # ls -i c.txt 34107380 c.txt [ root@localhost opt ] # ls -i d.txt 35311703 d.txt [ root@localhost opt ] # ll c.txt -rw-r--r-- 1 root root 4 7\u6708 19 16 :22 c.txt [ root@localhost opt ] # ll d.txt lrwxrwxrwx 1 root root 5 7\u6708 19 16 :22 d.txt -> c.txt [ root@localhost opt ] # echo 666 >> c.txt [ root@localhost opt ] # cat c.txt 123 666 [ root@localhost opt ] # cat d.txt 123 666 \"\"\" \u539f\u6587\u4ef6c.txt\u5220\u6389\u4e86,\u5176\u8f6f\u94fe\u63a5d.txt\u5c31\u4e0d\u80fd\u7528\u5566 \"\"\" [ root@localhost opt ] # rm -rf c.txt [ root@localhost opt ] # cat d.txt cat: d.txt: \u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 \"\"\" \u53ef\u4ee5\u5bf9\u76ee\u5f55\u521b\u5efa\u8f6f\u94fe\u63a5 \"\"\" [ root@localhost opt ] # mkdir ./aaa [ root@localhost opt ] # echo 111 > ./aaa/1.txt [ root@localhost opt ] # ln -s ./aaa ./bbb [ root@localhost opt ] # ll \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 19 7\u6708 19 17 :07 aaa lrwxrwxrwx 1 root root 5 7\u6708 19 17 :07 bbb -> ./aaa [ root@localhost opt ] # cat ./aaa/1.txt 111 [ root@localhost opt ] # cat ./bbb/1.txt 111 # \u5220\u9664\u8f6f\u94fe\u63a5/\u5feb\u6377\u65b9\u5f0fbbb\u76ee\u5f55\u5bf9aaa\u76ee\u5f55\u6ca1\u6709\u5f71\u54cd [ root@localhost opt ] # rm -rf ./bbb [ root@localhost opt ] # ls aaa 1 .txt # \u5220\u9664\u8f6f\u94fe\u63a5/\u5feb\u6377\u65b9\u5f0fbbb\u4e0b\u76841.txt\u6587\u4ef6\u5bf9aaa\u76ee\u5f55\u6709\u5f71\u54cd!!!!!!!!!!!!!!!!!!!!!!! [ root@localhost opt ] # ll \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 19 7\u6708 19 17 :13 aaa [ root@localhost opt ] # ln -s ./aaa ./bbb [ root@localhost opt ] # rm -rf ./bbb/1.txt [ root@localhost opt ] # ll aaa \u603b\u7528\u91cf 0","title":"\u8f6f\u94fe\u63a5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#qa","text":"Q1: \u4e3a\u5565\u786c\u94fe\u63a5\u4e0d\u80fd\u8de8\u5206\u533a,\u8f6f\u94fe\u63a5\u53ef\u4ee5\uff1f\u4e3a\u5565\u76ee\u5f55\u6587\u4ef6\u4e0d\u80fd\u521b\u5efa\u786c\u94fe\u63a5,\u53ef\u4ee5\u521b\u5efa\u8f6f\u94fe\u63a5? A1: \u6362\u53e5\u8bdd\u6765\u8bf4,\u786c\u94fe\u63a5\u7684\u521b\u5efa\u5177\u6709\u5c40\u9650\u6027: \u540c\u4e00\u5206\u533a + \u666e\u901a\u6587\u4ef6 Ps: linux\u5224\u65ad\u67d0\u4e2a\u8def\u5f84\u7ed1\u5b9a\u7684\u5206\u533a\u662f\u4ece\u53f3\u5f80\u5de6\u627e\u7684,\u76f4\u5230\u8be5\u76ee\u5f55\u7ed1\u5b9a\u4e86\u5206\u533a. /etc/sysconfig/network-scripts/ifcfg-ens33 \u76f4\u5230\u627e\u5230\u5173\u8054\u5206\u533a\u7684\u6839/\u6587\u4ef6\u5939.. \u786c\u94fe\u63a5\u7684\u672c\u8d28\u662f\u5927\u5bb6\u6307\u5411\u540c\u4e00\u4e2ainode\u53f7,\u5173\u8054\u540c\u4e00\u4efd\u6570\u636e;\u6240\u4ee5\u786c\u94fe\u63a5\u4ec5\u9650\u4e8e\u5728\u540c\u4e00\u4e2a\u5206\u533a\u91cc\u5206\u914d.. \u5f88\u5bb9\u6613\u60f3\u5230\u5206\u533a1\u768410\u53f7inode\u4e0e\u5206\u533a2\u768410\u53f7inode\u6307\u5411\u7684data block\u53ef\u4e0d\u662f\u4e00\u6837\u7684.. \u800c\u5bf9\u76ee\u5f55\u6587\u4ef6\u521b\u5efa\u786c\u94fe\u63a5\u610f\u5473\u7740\u5bf9\u8be5\u76ee\u5f55\u6587\u4ef6\u7684\u5b50\u6587\u4ef6\u548c\u5b50\u76ee\u5f55\u6587\u4ef6\u90fd\u7528\u521b\u5efa\u786c\u94fe\u63a5,\u5f00\u9500\u5f88\u5927.. \u67e5\u9605\u8d44\u6599,\u5141\u8bb8\u76ee\u5f55\u7684\u786c\u94fe\u63a5\u53ef\u80fd\u4f1a\u6253\u7834\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u7684\u6709\u5411\u65e0\u73af\u56fe\u7ed3\u6784, \u53ef\u80fd\u521b\u5efa\u76ee\u5f55\u5faa\u73af, \u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4fsck\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u904d\u5386\u6587\u4ef6\u6811\u7684\u8f6f\u4ef6\u51fa\u9519... TnT \u53ef\u4ee5\u8bf4\u4eba\u8bdd\u561b\uff1f\u542c\u6c42\u4e0d\u61c2... \u4e0d\u6df1\u7a76\u4e86 \u800c\u8f6f\u94fe\u63a5\u652f\u6301\u8de8\u5206\u533a,\u662f\u56e0\u4e3a\u8f6f\u94fe\u63a5\u7684\u672c\u8d28\u662f\u6307\u5411\u6e90\u6587\u4ef6,\u4e0d\u6307\u5411inode\u53f7... \u6e90\u6587\u4ef6\u4e0e\u76ee\u6807\u6587\u4ef6/\u8f6f\u94fe\u63a5\u6587\u4ef6\u7684inode\u53f7\u4e0d\u540c Q2: \u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u5b8c\u540e,\u4e00\u5b9a\u8981\u91cd\u542f\u5bf9\u5e94\u7684\u8f6f\u4ef6\u624d\u80fd\u751f\u6548,\u4e3a\u4ec0\u4e48? A2: \u8f6f\u4ef6\u542f\u52a8\u8d77\u6765\u540e,\u9700\u8981\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u7684\u4fe1\u606f,\u4ee5\u6307\u5b9a\u7684\u65b9\u5f0f\u53bb\u8fd0\u884c. \u8bfb\u6587\u4ef6,\u4e0d\u662f\u901a\u8fc7\u6587\u4ef6\u540d\u8bfb\u53d6\u7684,\u9700\u8981\u901a\u8fc7inode\u53f7\u8bfb\u53d6.. vim\u4e00\u6539\u52a8\u914d\u7f6e\u6587\u4ef6,inode\u53f7\u5c31\u53d8\u4e86.. \u800c\u6b63\u5728\u8fd0\u884c\u7684\u8f6f\u4ef6\u8bfb\u53d6\u7684\u662f\u66f4\u6539\u4e4b\u524d\u7684\u5185\u5bb9..\u8bfb\u4e0d\u5230\u66f4\u6539\u7684\u5185\u5bb9. So,\u9700\u8981\u91cd\u65b0\u542f\u52a8\u8f6f\u4ef6,\u627e\u5230\u90a3\u4e2a\u65b0\u7684inode\u53f7,\u8bfb\u53d6\u4fee\u6539\u540e\u7684\u6570\u636e. Ps: \u6709\u4e9b\u8f6f\u4ef6\u4e0d\u7528\u91cd\u542f, \u79f0\u4e3a\"\u5e73\u6ed1\u91cd\u542f\". \u4e5f\u5c31\u662f\u8fd9\u4e2a\u8f6f\u4ef6\u6574\u4f53\u6ca1\u6709\u91cd\u542f,\u4f46\u6709\u4e00\u90e8\u5206\u662f\u91cd\u542f\u91cd\u65b0\u8bfb\u53d6\u6587\u4ef6\u4e86\u7684.. \"\"\" \u53ef\u4ee5\u53d1\u73b0,vim\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540e,test.conf\u7684inode\u53f7\u4f1a\u53d8! \u4e3a\u4ec0\u4e48\uff1fvim\u7684\u539f\u7406\u5bfc\u81f4\u7684,\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b: 1>\u6587\u4ef6\u5185\u5bb9\u4e00\u6b21\u6027\u8bfb\u5165\u5185\u5b58,\u4e00\u8fb9\u4fee\u6539\u4f1a\u4e00\u8fb9\u5c06\u6539\u52a8\u5199\u5165\u786c\u76d8\u4e0a\u521b\u5efa\u7684\u4e34\u65f6\u6587\u4ef6.test.conf.swp\u6587\u4ef6\u91cc\u9762\u53bb 2>\u6539\u52a8\u5b8c\u540e,:w,\u6587\u4ef6\u7cfb\u7edf\u4f1a\u5220\u9664\u786c\u76d8\u4e2d\u7684test.conf\u6e90\u6587\u4ef6; .test.conf.swp\u6587\u4ef6\u901a\u8fc7cp\u64cd\u4f5c\u6539\u540d\u4e3a\u6e90\u6587\u4ef6\u7684\u540d\u5b57 3>:q\u540e,\u4e34\u65f6\u6587\u4ef6.test.conf.swp\u5220\u9664.. \"\"\" [ root@localhost opt ] # vim test.conf [ root@localhost opt ] # cat test.conf 123 [ root@localhost opt ] # ls -i test.conf 34532550 test.conf [ root@localhost opt ] # vim test.conf [ root@localhost opt ] # cat test.conf 123 456 [ root@localhost opt ] # vim test.conf [ root@localhost opt ] # ls -i test.conf 35311703 test.conf \u3010\u9a8c\u8bc1vim\u539f\u7406\u7684\u64cd\u4f5c\u8fc7\u7a0b\u3011 \"\"\" \u53ef\u4ee5\u53d1\u73b0test.conf\u6587\u4ef6\u524d\u540e\u7684inode\u53f7\u662f\u6539\u53d8\u4e86\u7684. \"\"\" [ root@localhost opt ] # ls -i 1.txt 34107380 1 .txt [ root@localhost opt ] # ls -i test.conf 35311703 test.conf [ root@localhost opt ] # rm -rf test.conf [ root@localhost opt ] # cp 1.txt test.conf [ root@localhost opt ] # ls -i test.conf 34532550 test.conf Q3: \u603b\u7ed3\u4e0b\u8f6f\u786c\u94fe\u63a5\u7684\u5f02\u540c. A3: \u76f8\u540c\u70b9 - \u4fee\u6539\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9,\u5176\u5b83\u94fe\u63a5\u6587\u4ef6\u90fd\u8ddf\u7740\u6539. \u4e0d\u540c\u70b9 - 1> \u786c\u94fe\u63a5\u591a\u4e2a\u6587\u4ef6inode\u53f7\u4e00\u6837,\u8f6f\u94fe\u63a5\u7684\u591a\u4e2a\u6587\u4ef6inode\u53f7\u4e0d\u4e00\u6837; 2> \u5220\u9664\u6e90\u6587\u4ef6, \u786c\u94fe\u63a5\u4efb\u7136\u53ef\u7528,\u4f46\u8f6f\u94fe\u63a5\u5931\u6548 3> \u786c\u94fe\u63a5\u53ea\u80fd\u5bf9\u666e\u901a\u6587\u4ef6\u505a,\u800c\u4e14\u4e0d\u80fd\u8de8\u5206\u533a. \u8f6f\u94fe\u63a5\u53ef\u4ee5\u5bf9\u666e\u901a\u6587\u4ef6\u548c\u76ee\u5f55\u6587\u4ef6\u505a,\u800c\u4e14\u53ef\u4ee5\u8de8\u5206\u533a.","title":"Q/A"},{"location":"1_linux%E5%9F%BA%E7%A1%80/5_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#_10","text":"\u7b80\u5355\u7406\u89e3, \u786c\u76d8\u5206\u533a\u7684\u6302\u8f7d\u70b9\u5c31\u662f\u8f6f\u94fe\u63a5.. [ root@localhost ~ ] # df /dev/sda1 \u6587\u4ef6\u7cfb\u7edf 1K-\u5757 \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 /dev/sda1 1038336 216864 821472 21 % /boot \u5047\u8bbe/boot\u6587\u4ef6\u5939\u6ee1\u4e86(\u51c6\u786e\u70b9\u8bf4,\u662f /boot \u6302\u8f7d\u70b9\u5bf9\u5e94\u7684\u6587\u4ef6\u7cfb\u7edf/\u5206\u533a sda1 \u7684\u786c\u76d8\u7a7a\u95f4\u6ee1\u4e86).. \u4e5f\u5c31\u662f\u8bf4,\u521b\u5efa\u65b0\u6587\u4ef6 /boot/data/a.txt \u4ece\u53f3\u5f80\u5de6\u627e, \u8be5\u8def\u5f84\u5e94\u8be5\u5b58\u653e\u4e8esda1\u5206\u533a\u91cc.. \u4f46\u662fsda1\u5206\u533a\u6ee1\u4e86.. \u521b\u5efa\u6587\u4ef6\u5931\u8d25! \u4e8e\u662f\u4e4e, \u6211\u4eec\u4e70\u4e00\u5757\u786c\u76d8,\u5206\u533a\u505a\u597d\u6587\u4ef6\u7cfb\u7edf, \u5373\u65b0\u5efa\u4e00\u4e2a\u5206\u533a sdb1 , \u5176\u6302\u8f7d\u70b9\u4e3a /boot/data \u8fd9\u6837\u7684\u8bdd, /boot/data/a.txt \u6b64\u8def\u5f84\u4e0b\u7684a.txt\u6587\u4ef6\u5c31\u4f1a\u5b58\u653e\u4e0e sdb1\u5206\u533a\u91cc.. /dev/sda1 ----------- /boot /dev/sdb1 ----------- /boot/data \u6587\u4ef6\u8def\u5f84\u4e00\u5b9a\u8981\u6ce8\u610f\u8fa8\u522b\u5728\u54ea\u4e2a\u5206\u533a!\uff01 \u5728vm\u865a\u673a\u4e0a\u53ef\u4ee5\u8bbe\u7f6e\u65b0\u589e\u786c\u76d8..\u91cd\u542f\u751f\u6548. \u8ba1\u7b97\u673a\u4e0a\u662f\u652f\u6301\u70ed\u63d2\u62d4\u7684,\u8ba1\u7b97\u673a\u5f00\u673a\u72b6\u6001,\u63d2\u5165\u786c\u76d8\u4e5f\u80fd\u8bc6\u522b! ( \u7c7b\u4f3c\u4e8e\u6211\u901a\u8fc7USB\u63a5\u53e3\u63d2\u5165\u4e86\u4e00\u5757\u79fb\u52a8\u786c\u76d8,\u80fd\u8bc6\u522b\u6210\u529f ) \"\"\" \u53ef\u4ee5\u53d1\u73b0\u6709sda sdb\u4e24\u5757\u786c\u76d8 \u25cb sda1 sda2 \u662fsda\u8fd9\u5757\u786c\u76d8\u505a\u7684\u4e24\u4e2a\u5206\u533a \u25cb sdb\u4e0d\u5206\u533a\u7684\u8bdd,\u53ef\u4ee5\u6574\u4f53\u7b97\u4e00\u4e2a\u5206\u533a,\u4f46\u9700\u8981\u5bf9\u5176\u505a\u6587\u4ef6\u7cfb\u7edf,\u5e76\u5bf9\u5176\u6dfb\u52a0\u6302\u8f7d \"\"\" [ root@localhost ~ ] # ll /dev/sda # \u8fde\u7eedTab\u952e\u63d0\u793a sda sda1 sda2 sdb ## centos7\u91cc\u63a8\u8350\u7528xfs [ root@localhost ~ ] # mkfs.xfs /dev/sdb ... ... ... [ root@localhost ~ ] # mount /dev/sdb /boot/data \u25c6 \u6587\u4ef6\u8def\u5f84\u4e00\u5b9a\u8981\u533a\u5206\u5206\u533a! \"\"\" sdb\u786c\u76d8\u7684\u6302\u8f7d\u70b9\u4e3a/boot/data\u6587\u4ef6\u76ee\u5f55 \u5f80\u6b64\u8def\u5f84/boot/data/a.txt\u7684a.txt\u6587\u4ef6\u91cc\u5199\u5165\u5185\u5bb9 \u901a\u8fc7umount\u547d\u4ee4\u53d6\u6d88\u6302\u8f7d \u518dcat\u67e5\u770b,\u4f1a\u53d1\u73b0a.txt\u7684\u5185\u5bb9\u6d88\u5931 why\uff1f\u6302\u8f7d\u53d6\u6d88\u540e,\u6b64\u8def\u5f84\u4f1a\u53bb/boot\u6302\u8f7d\u70b9\u5bf9\u5e94\u7684sba1\u5206\u533a\u4e2d\u627e\u6570\u636e.\u800c\u4e0d\u662fsdb\u786c\u76d8\u5206\u533a\u4e2d\u627e. \u800c\u6070\u597dsba1\u5206\u533a\u7684\u6b64\u8def\u5f84\u4e0b\u6709a.txt\u6587\u4ef6,\u4f46\u6b64\u6587\u4ef6\u7684\u6587\u4ef6\u5927\u5c0f\u4e3a0. \"\"\" [ root@localhost ~ ] # echo \"Hhhhh\" > /boot/data/a.txt [ root@localhost ~ ] # cat /boot/data/a.txt Hhhhh # umount /boot/data \u4e5f\u662f\u4e00\u6837\u7684\u6548\u679c [ root@localhost ~ ] # umount /dev/sdb [ root@localhost ~ ] # cat /boot/data/a.txt [ root@localhost ~ ] # ll /boot/data/a.txt -rw-r--r-- 1 root root 0 7\u6708 20 23 :30 /boot/data/a.txt [ root@localhost ~ ] # echo \"123456\" > /boot/data/a.txt [ root@localhost ~ ] # cat /boot/data/a.txt 123456 [ root@localhost ~ ] # mount /dev/sdb /boot/data [ root@localhost ~ ] # cat /boot/data/a.txt Hhhhh","title":"\u8f6f\u94fe\u63a5\u89e3\u51b3\u78c1\u76d8\u6ee1"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/","text":"\u4ecb\u7ecd \u00b6 \u63a8\u5bfc\u8fc7\u7a0b \u00b6 OS - \u8fdb\u7a0b - \u8fdb\u7a0b\u4f7f\u7528\u6587\u4ef6 - \u8fdb\u7a0b\u6743\u9650 - \u7528\u6237 OS\u662f\u534f\u8c03\u7ba1\u7406\u786c\u4ef6\u8d44\u6e90\u4e0e\u4e0a\u5c42\u5e94\u7528\u7a0b\u5e8f\u7684\u8f6f\u4ef6. \u901a\u4fd7\u70b9,OS\u62ff\u7740\u786c\u4ef6\u8d44\u6e90\u7ed9\u4e0a\u5c42\u7684\u5e94\u7528\u7a0b\u5e8f\u7528 \u6bcf\u8fd0\u884c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u8fdb\u7a0b. So,\u518d\u51c6\u786e\u70b9,\u64cd\u4f5c\u7cfb\u7edf\u662f\u5728\u534f\u8c03\u7ba1\u7406\u4e00\u5806\u8fdb\u7a0b\u6765\u4f7f\u7528\u786c\u4ef6. OS\u624b\u63e1\u4e00\u5806\u8fdb\u7a0b, \u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c(\u8fdb\u7a0b)\u8fc7\u7a0b\u4e2d\u6d89\u53ca\u5230\u5bf9\u6570\u636e\u7684\u64cd\u4f5c.. \u800c\u6570\u636e\u662f\u786c\u76d8\u4e2d\u5b58\u653e\u7740\u7684\u4e00\u4e2a\u4e2a\u6587\u4ef6. \u4e0d\u540c\u7684\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u5bf9\u540c\u4e00\u4e2a\u6587\u4ef6\u6709\u4e0d\u540c\u7684\u8bfb\u5199\u6743\u9650. \u90a3\u5982\u4f55\u533a\u5206\u4e0d\u540c\u8fdb\u7a0b\u7684\u6743\u9650\uff1f \u522b\u95ee,\u95ee\u5c31\u662f\u5bf9\u6587\u4ef6\u7684\u6743\u9650! Linux\u4e2d\u4e00\u5207\u7686\u6587\u4ef6 _ ! \u8bd5\u60f3\u4e00\u4e0b,\u5982\u679c\u6ca1\u6709\u7528\u6237\u8fd9\u4e2a\u6982\u5ff5.\u6bcf\u4e2a\u6587\u4ef6\u7684\u5143\u6570\u636e\u91cc\u90fd\u8981\u8bb0\u5f55\u6bcf\u4e2a\u8fdb\u7a0b\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650.. \u82e5\u8fd0\u884c\u4e86100\u4e2a\u8fdb\u7a0b,\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8981\u8bb0\u5f55100\u4e2a\u8fdb\u7a0b\u6743\u9650.. It's very fool ! \u8fd9\u4f1a\u5bfc\u81f4\u6587\u4ef6\u7684\u5143\u6570\u636e\u975e\u5e38\u5927! \u8fd9\u4e00\u8bbe\u60f3\u8fd8\u672a\u8003\u8651\u4e0d\u540c\u4eba\u4f7f\u7528\u8fdb\u7a0b\u65f6,\u8fdb\u7a0b\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u8fd8\u4f1a\u4ea7\u751f\u53d8\u5316\u8fd9\u4e00\u53d8\u6570.. \u6362\u4e2a\u601d\u8def,\u5c06 Linux\u6240\u6709\u7684\u6587\u4ef6 \u90fd\u8bbe\u7f6e\u597d\u5176\u5173\u8054\u7684\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u5176\u4ed6\u4eba\u4ee5\u53ca\u5bf9\u5e94\u7684\u6743\u9650. \u518d\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u53bb\u8d77\u8fdb\u7a0b, \u8be5\u7528\u6237\u8fd0\u884c\u7684\u8fdb\u7a0b\u4e0e\u7528\u6237\u62e5\u6709\u7684\u6743\u9650\u4e00\u81f4.. \u5c31\u5f97\u5230\u4e86\u5b8c\u7f8e\u89e3\u51b3. \u7528\u6237 \u00b6 Q: \u7528\u6237\u662f\u4ec0\u4e48\uff1f A: \u7528\u6237\u662f\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u4e00\u79cd\u5b89\u5168\u673a\u5236,\u7528\u6237\u4e0e\u7ec4\u90fd\u662f\u6743\u9650\u7684\u5316\u8eab! Q: \u4e3a\u4f55\u8981\u6709\u7528\u6237\uff1f A: \u5212\u5206\u6743\u9650,\u589e\u5f3a\u5b89\u5168\u6027. \u8fdb\u7a0b\u5173\u8054\u7528\u6237,\u7528\u6237\u62e5\u6709\u6743\u9650,\u6743\u9650\u4f5c\u7528\u4e8e\u6587\u4ef6\u4e0a.** TnT \u6401\u8fd9\u7ed5\u53e3\u4ee4\u5450.. \u7528\u6237\u7ec4 \u00b6 \u7ec4\u4e5f\u5c31\u662f\u7c7b,\u4e00\u7c7b\u4eba\u62e5\u6709\u76f8\u540c\u7684\u6743\u9650.. \u4e3b\u7ec4: \u7528\u6237\u672c\u8eab\u6240\u5728\u7684\u90e8\u95e8 \u9644\u52a0\u7ec4: \u4e3a\u7528\u6237\u6dfb\u52a0\u7684\u90e8\u95e8 \u25b2 \u7528\u6237\u4e0e\u7ec4\u7684\u5173\u7cfb \u4e00\u5bf9\u4e00 : \u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u4e00\u4e2a\u7ec4,\u7528\u6237\u9ed8\u8ba4\u5728\u81ea\u5df1\u7684\u4e3b\u7ec4\u4e0b \u4e00\u5bf9\u591a : \u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u7ec4,\u7528\u6237\u53ea\u6709\u4e00\u4e2a\u4e3b\u7ec4,\u4f46\u53ef\u4ee5\u4e3a\u7528\u6237\u6dfb\u52a0\u591a\u4e2a\u9644\u52a0\u7ec4 \u591a\u5bf9\u591a : \u591a\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u7ec4. \u5373\u4e00\u4e2a\u7528\u6237\u5c5e\u4e8e\u591a\u4e2a\u7ec4,\u4e00\u4e2a\u7ec4\u91cc\u53ef\u4ee5\u6709\u591a\u4e2a\u7528\u6237 \u25b2 \u5bf9\u4e8elinux\u7cfb\u7edf\u6765\u8bf4,\u5b83\u53ef\u4e0d\u8ba4\u8bc6\u5565\u7528\u6237\u540d,\u7ec4\u540d,\u7528\u6237\u548c\u7ec4\u7684\u89d2\u8272\u662f\u901a\u8fc7 UID \u548c GID \u8bc6\u522b\u7684! \"\"\" `id`: \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u7528\u6237\u4fe1\u606f `id dc`: \u67e5\u770b\u6307\u5b9a\u7528\u6237dc\u7684\u7528\u6237\u4fe1\u606f `whoami`: \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 `who`: \u7528\u4e8e\u663e\u793a\u7cfb\u7edf\u4e2d\u6709\u54ea\u4e9b\u4f7f\u7528\u8005\u6b63\u5728\u4e0a\u9762 \"\"\" [ root@localhost ~ ] # id uid = 0 ( root ) gid = 0 ( root ) \u7ec4 = 0 ( root ) [ root@localhost ~ ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) [ root@localhost ~ ] # whoami root [ root@localhost ~ ] # who root :0 2022 -07-04 22 :55 ( :0 ) root pts/0 2022 -07-20 22 :08 ( 172 .16.150.1 ) UID ( User Identify ) :\u7528\u6237ID. \u6bcf\u521b\u5efa\u4e00\u4e2a\u7528\u6237,\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u4e2aUID. uid\u76f8\u5f53\u4e8e\u4e00\u4e2a\u4eba\u7684\u8eab\u4efd\u8bc1,\u7528\u6237\u540d\u5c31\u76f8\u5f53\u4e8e\u8fd9\u4e2a\u4eba\u7684\u540d\u5b57. GID ( Group Identify ) :\u7ec4ID. \u5982\u679c\u628a\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u5f53\u6210\u4e00\u5bb6\u516c\u53f8,uid\u76f8\u5f53\u4e8e\u67d0\u4eba\u7684\u5458\u5de5\u53f7,gid\u76f8\u5f53\u4e8e\u4ed6\u7684\u90e8\u95e8\u7f16\u53f7. \u7ec4 = 0 ( root ) :\u6307\u7684\u662f\u9644\u52a0\u7ec4.\u6ca1\u6709\u7684\u8bdd,\u9ed8\u8ba4\u662f\u4e3b\u7ec4. [ \u4e86\u89e3 ] centos7\u7cfb\u7edf\u4e4b\u524d\u7ea6\u5b9a uid:0 \u7531\u8d85\u7ea7\u7528\u6237\u6216\u5177\u5907\u8d85\u7ea7\u7528\u6237\u6743\u9650\u7684\u7528\u6237\u521b\u5efa\u7684\u7528\u6237,\u4e0d\u53d7\u6743\u9650\u7684\u538b\u5236 ( \uffe3\u25bd\uffe3 ) uid:1~499 \u7cfb\u7edf\u865a\u62df\u7528\u6237,\u4e0d\u80fd\u767b\u5f55,\u4ee5\u67d0\u79cd\u8eab\u4efd\u8d77\u8fdb\u7a0b,\u8ba9\u8fdb\u7a0b\u62e5\u6709\u6743\u9650. uid:500-65535 \u666e\u901a\u7528\u6237 centos7\u7cfb\u7edf\u7ea6\u5b9a\uff1a uid:0 \u8d85\u7ea7\u7ba1\u7406\u5458,\u6700\u9ad8\u6743\u9650,\u6709\u7740\u6781\u5f3a\u7684\u7834\u574f\u80fd\u529b,\u4e0d\u53d7\u6743\u9650\u7684\u538b\u5236 ( \uffe3\u25bd\uffe3 ) uid:1~200 \u7cfb\u7edf\u7528\u6237,\u7528\u6765\u8fd0\u884c\u7cfb\u7edf\u81ea\u5e26\u7684\u8fdb\u7a0b,\u9ed8\u8ba4\u5df2\u521b\u5efa uid:201~999 \u7cfb\u7edf\u7528\u6237,\u7528\u6765\u8fd0\u884c\u5b89\u88c5\u7684\u7a0b\u5e8f,\u6240\u4ee5\u6b64\u7c7b\u7528\u6237\u65e0\u9700\u767b\u5f55\u7cfb\u7edf uid:1000+ \u666e\u901a\u7528\u6237,\u6b63\u5e38\u53ef\u4ee5\u767b\u5f55\u7cfb\u7edf\u7684\u7528\u6237,\u6743\u9650\u6bd4\u8f83\u5c0f,\u80fd\u6267\u884c\u7684\u4efb\u52a1\u6709\u9650 Ps: root\u8d85\u7ea7\u7528\u6237\u662f\u4e0d\u53d7\u6743\u9650\u538b\u5236\u7684! \u5373\u4fbf\u67d0\u4e2a\u6587\u4ef6\u5bf9\u5b83\u6765\u8bf4\u6ca1\u6709\u8bfb\u6743\u9650,\u5b83\u4e5f\u53ef\u4ee5\u8bfb. \u54ea\u6015\u6709\u4e9b\u6587\u4ef6\u80fd\u963b\u6b62\u5b83\u5bf9\u5176\u7684\u4fee\u6539,\u4f46root\u8d26\u6237\u662f\u53ef\u4ee5\u4fee\u6539\u6743\u9650\u7684!!! \u7528\u6237\u89d2\u8272\u5212\u5206 \u00b6 \u7ec6\u5206\u5c5e\u4e3b u \u3001\u5c5e\u7ec4 g \u3001\u5176\u5b83\u4eba o \u5bf9\u6587\u4ef6\u7684\u6743\u9650: \u5c06\u7528\u6237\u5212\u5206\u4e3a\u4e09\u7c7b,\u4f7f\u4e0d\u540c\u7684\u89d2\u8272\u5bf9\u6b64\u6587\u4ef6\u90fd\u62e5\u6709\u76f8\u5bf9\u5e94\u7684\u6743\u9650. [ root@localhost ~ ] # ll /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 18 18 :12 /etc/passwd \"\"\" -rwxrw-r-- 1 egon IT 2351 7\u6708 18 18:12 /etc/passwd linux\u7cfb\u7edf\u628a\u6587\u4ef6\u6743\u9650\u5206\u4e3a\u4e86\u4e09\u7c7b:\u5c5e\u4e3b\u3001\u5c5e\u7ec4\u3001\u5176\u5b83\u4eba \u4e00\u4e2a\u7528\u6237\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u626b\u63cf\u7684\u4f18\u5148\u7ea7: \u25cb \u5148\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u4e3b \u25cb \u5728\u7b2c\u4e00\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u518d\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u7ec4 \u25cb \u5728\u7b2c\u4e8c\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u8be5\u7528\u6237\u5c5e\u4e8e\u5176\u4ed6\u4eba\u6743\u9650 \"\"\" 1 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65f6egon,egon\u6240\u5c5e\u7684\u90e8\u95e8\u662fIT\u90e8\u95e8. /etc/passwd\u7684\u62e5\u6709\u8005\u662fegon,\u90a3\u4e48egon\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u662frwx ; \u54ea\u6015egon\u5c5e\u4e8eIT\u90e8\u95e8,\u6587\u4ef6\u62e5\u6709\u8005\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e00\u4e9b. 2 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e0d\u662f\u6587\u4ef6\u7684\u62e5\u6709\u8005,\u662flili,lili\u662f\u5c5e\u4e8eIT\u90e8\u95e8\u7684,\u90a3\u4e48lili\u5bf9/etc/passwd\u7684\u6743\u9650\u4e3arw- 3 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65e2\u4e0d\u662f\u6587\u4ef6\u7684\u4e3b\u4eba,\u4e5f\u4e0d\u662fIT\u90e8\u95e8\u91cc\u7684,\u90a3\u4e48\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u4e3ar-- \u7528\u6237\u4e0e\u7ec4\u76f8\u5173\u6587\u4ef6 \u00b6 \u6587\u4ef6 \u76f8\u5173 /etc/passwd \u7528\u6237 /etc/shadow \u5bc6\u7801 /etc/group \u7ec4 /etc/gshadow \u7ec4\u5bc6\u7801 /etc/skel/ \u5bb6\u76ee\u5f55\u7684\u6a21\u7248 /home/\u7528\u6237\u540d \u7528\u6237\u7684\u5bb6\u76ee\u5f55 /var/spool/mail \u7528\u6237\u7684\u90ae\u7bb1\u6587\u4ef6 /etc/passwd \u00b6 useradd tom [ root@localhost ~ ] # head -1 /etc/passwd root:x:0:0:root:/root:/bin/bash \u6ce8\u610f: \u5728\u5b9e\u9a8c\u73af\u5883\u4e0b,\u5c06\u7b2c\u4e8c\u5217\u5bc6\u7801\u5360\u4f4d\u7b26\u8bbe\u7f6e\u4e3a\u7a7a..\u5c31\u4e0d\u9700\u8981\u5bc6\u7801\u767b\u5f55\u4e86... \u5728\u771f\u5b9e\u73af\u5883\u4e0b,\u8fd9\u662f\u5927\u5fcc!!!!!! root:x:0:0:root:/root:/bin/bash \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e867\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u540d/\u767b\u5f55\u540d 2 > \u7b2c\u4e8c\u5217: \u5bc6\u7801\u5360\u4f4d\u7b26, \u8fd9\u91cc\u662f\u4e00\u4e2ax, \u5176\u5b9e\u5bc6\u7801\u5df2\u88ab\u6620\u5c04\u5230/etc/shadow\u6587\u4ef6\u4e2d ; \u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u505a\uff1fBecause\u675c\u7edd\u5c06\u9e21\u86cb\u653e\u5728\u540c\u4e00\u4e2a\u7bee\u5b50\u91cc. \u90a3\u5c06\u5bc6\u7801\u52a0\u4e2a\u5bc6\u4e0d\u5c31\u884c\u4e86\u561b\uff1f\u5bc6\u7801\u5728\u53e6\u4e00\u4e2a\u7bee\u5b50/etc/shadow\u91cc\u786e\u5b9e\u52a0\u5bc6\u5566.\u5e76\u4e14\u9664\u4e86root,\u8c01\u4e5f\u6ca1\u6709\u6743\u9650. \u653e\u5728\u4e24\u4e2a\u7bee\u5b50\u91cc,\u9ed1\u5ba2\u8981\u7834\u89e3\u4e24\u4e2a\u6587\u4ef6\u7684\u6743\u9650,\u5e76\u4e14\u8981\u5bf9\u5bc6\u7801\u8fdb\u884c\u89e3\u5bc6.. [ root@localhost ~ ] # ll /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 18 18 :12 /etc/passwd [ root@localhost ~ ] # ll /etc/shadow ---------- 1 root root 1388 7\u6708 4 16 :53 /etc/shadow Ps:\u6d4f\u89c8\u5668\u5ba2\u6237\u7aef\u9ed8\u8ba4\u4f1a\u5c06\u8868\u5355\u91cc\u7684\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u540e\u518dpost\u7ed9\u670d\u52a1\u7aef.\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb. ( \u5373\u82e5C->S\u4f20\u8f93\u6570\u636e\u8fc7\u7a0b\u4e2d\u5305\u88ab\u622a\u83b7\u62ff\u8d70\u540e,\u4e2d\u95f4\u4eba\u4e0d\u80fd\u76f4\u63a5\u7528 ) \u5b9e\u5219,\u9ad8\u7ea7\u9ed1\u5ba2\u53ef\u4ee5\u81ea\u5df1\u5199\u6d4f\u89c8\u5668\u5ba2\u6237\u7aef,\u4e0d\u7136\u5176\u52a0\u5bc6,\u76f4\u63a5\u5bc6\u7801\u660e\u6587\u4f20\u8f93.. 3 > \u7b2c\u4e09\u5217: UID 4 > \u7b2c\u56db\u5217: GID 5 > \u7b2c\u4e94\u5217: \u7528\u6237\u7684\u63cf\u8ff0\u4fe1\u606f,\u53ef\u9009 6 > \u7b2c\u516d\u5217: \u7528\u6237\u7684\u5bb6\u76ee\u5f55\u6240\u5728\u4f4d\u7f6e ( \u5373\u4e2a\u4eba/\u79c1\u4eba\u6587\u4ef6\u5939 ) 7 > \u7b2c\u4e03\u5217: \u7528\u6237\u6240\u7528SHELL\u7684\u7c7b\u578b,\u4ee3\u8868\u7528\u6237\u767b\u5f55\u4e4b\u540e\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f /bin/bash \u767b\u5f55\u540e\u51fa\u73b0\u4ea4\u4e92\u5f0f\u7684\u754c\u9762,\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u547d\u4ee4 /sbin/nologin \u4e0d\u5141\u8bb8\u767b\u5f55.\u5c5e\u4e8e\u7cfb\u7edf\u7528\u6237. Ps: \u9664\u4e86/bin/bash\u6807\u8bc6\u7684\u7528\u6237\u5916,\u5176\u5b83\u90fd\u662f\u7cfb\u7edf\u7528\u6237.. /etc/shadow \u00b6 nobody:*:18353:0:99999:7::: onepiece:!!:19173:0:99999:7::: root: $ 6 $ l2UODot/le0BbEsQ9x7T0/ZUjclL9Zo7bjZ1::0:99999:7::: \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e869\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u540d/\u767b\u5f55\u540d,\u8fd9\u4e2a\u5b57\u6bb5\u662f\u975e\u7a7a\u7684 \u6587\u4ef6/etc/shadow\u4e0e/etc/passwd\u7684\u7528\u6237\u540d\u662f\u76f8\u540c\u7684,\u8fd9\u6837\u5c31\u5c06\u4e24\u6587\u4ef6\u7684\u7528\u6237\u8bb0\u5f55\u8054\u7cfb\u5230\u4e86\u4e00\u8d77 2 > \u7b2c\u4e8c\u5217: \u5bc6\u7801,\u8fd9\u4e2a\u5b57\u6bb5\u662f\u975e\u7a7a\u7684 * \u4ee3\u8868\u662f\u7cfb\u7edf\u7528\u6237/\u4e0d\u80fd\u767b\u5f55\u7684\u7528\u6237 !! \u4ee3\u8868\u8fd8\u672a\u8bbe\u7f6e\u5bc6\u7801,\u8d26\u53f7\u6ca1\u6709\u5bc6\u7801\u538b\u6839\u662f\u767b\u5f55\u4e0d\u4e0a\u7684 \u4e00\u5806\u5b57\u7b26\u4e32 \u52a0\u5bc6\u5bc6\u7801 3 > \u7b2c\u4e09\u5217: \u6700\u8fd1\u4fee\u6539\u5bc6\u7801\u7684\u65f6\u95f4 \u8fd9\u4e2a\u65f6\u95f4\u662f\u4eceUNIX\u5143\u5e741970\u5e7401\u670801\u65e5\u7b97\u8d77\u5230\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\u53e3\u4ee4/\u5bc6\u7801\u7684\u65f6\u95f4\u95f4\u9694 ( \u5929\u6570 ) \u60a8\u53ef\u4ee5\u901a\u8fc7passwd\u547d\u4ee4\u6765\u4fee\u6539\u7528\u6237\u7684\u5bc6\u7801,\u7136\u540e\u67e5\u770b/etc/shadow\u4e2d\u6b64\u5b57\u6bb5\u7684\u53d8\u5316 4 > \u7b2c\u56db\u5217: \u7528\u6237\u5bc6\u7801\u6700\u5c11\u591a\u5c11\u5929\u624d\u80fd\u4fee\u6539,\u5982\u679c\u8bbe\u7f6e\u4e3a0,\u5219\u7981\u7528\u6b64\u529f\u80fd. \u9ed8\u8ba4\u503c\u662f\u901a\u8fc7\u8bbe\u7f6e/etc/login.defs\u6587\u4ef6\u4e2d\u7684PASS_MIN_DAYS\u5b57\u6bb5\u8fdb\u884c\u5b9a\u4e49. 5 > \u7b2c\u4e94\u5217: \u6700\u591a\u591a\u5c11\u5929\u5c31\u5fc5\u987b\u6539\u5bc6\u7801\u4e86. \u9ed8\u8ba4\u503c\u662f\u901a\u8fc7\u8bbe\u7f6e/etc/login.defs\u6587\u4ef6\u4e2d\u7684PASS_MAX_DAYS\u5b57\u6bb5\u8fdb\u884c\u5b9a\u4e49. 6 > \u7b2c\u516d\u5217: \u63d0\u524d\u591a\u5c11\u5929\u544a\u77e5\u7528\u6237\u5bc6\u7801\u5c06\u8fc7\u671f. \u9ed8\u8ba4\u503c\u662f\u901a\u8fc7\u8bbe\u7f6e/etc/login.defs\u6587\u4ef6\u4e2d\u7684PASS_WARN_AGE\u5b57\u6bb5\u8fdb\u884c\u5b9a\u4e49. 7 > \u7b2c\u4e03\u5217: \u5728\u8d26\u53f7\u5931\u6548\u65e5\u671f\u5230\u4e86\u540e,\u8fd8\u53ef\u4ee5\u4f7f\u7528\u51e0\u5929. 8 > \u7b2c\u516b\u5217: \u8d26\u53f7\u5931\u6548\u65e5\u671f.\u82e5\u6b64\u5b57\u6bb5\u7684\u503c\u4e3a\u7a7a,\u8868\u660e\u5e10\u53f7\u6c38\u4e45\u53ef\u7528 ; 9 > \u7b2c\u4e5d\u5217: \u4fdd\u7559\u5b57\u6bb5,\u76ee\u524d\u4e3a\u7a7a,\u4ee5\u5907\u5c06\u6765Linux\u6269\u5c55\u4e4b\u7528 Ps: man shadow\u6765\u67e5\u770b\u5e2e\u52a9\u53ef\u4f1a\u5f97\u5230\u66f4\u4e3a\u8be6\u5c3d\u7684\u8d44\u6599. /etc/group \u00b6 \u6bcf\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u8be5\u7528\u6237\u7684\u4e3b\u7ec4,\u4e3b\u7ec4\u7684\u540d\u5b57\u4e0e\u7528\u6237\u540d\u76f8\u540c! (\u5373 useradd tom \u521b\u5efatom\u7528\u6237\u7684\u540c\u65f6\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3atom\u7684\u7ec4) [ root@localhost ~ ] # head -1 /etc/group root:x:0: \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e864\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u7ec4\u7684\u540d\u79f0 2 > \u7b2c\u4e8c\u5217: \u7528\u6237\u7ec4\u7684\u5bc6\u7801\u5360\u4f4d\u7b26 /etc/group\u7684\u5f71\u5b50\u6587\u4ef6\u662f/etc/gshadow 3 > \u7b2c\u4e09\u5217: \u7528\u6237\u7ec4\u7684ID/GID. \u6ce8\u610f:\u5458\u5de5\u7f16\u53f7001\u548c\u5176\u6240\u5728\u90e8\u95e8\u7684001\u7f16\u53f7\u662f\u4e24\u4e2a\u610f\u601d. 4 > \u7b2c\u56db\u5217: \u7ec4\u91cc\u6709\u54ea\u4e9b\u6210\u5458.\u7528\u9017\u53f7\u5206\u9694. \u82e5\u4e3a\u7a7a,\u4ee3\u8868\u4e0e\u8be5\u7528\u6237\u7ec4\u540d\u79f0\u540c\u540d\u7684\u7528\u6237\u7684\u9644\u52a0\u7ec4\u4e0e\u4e3b\u7ec4\u4e00\u6837. \u82e5\u4e0d\u4e3a\u7a7a,\u4f1a\u5c06\u8be5\u7ec4\u6dfb\u52a0\u5230\u7ec4\u6210\u5458\u7684\u9644\u52a0\u7ec4\u91cc. \u25b3 \u4e3atom\u7528\u6237\u7ec4\u6dfb\u52a0\u7ec4\u6210\u5458 \u4fee\u6539/etc/group\u6587\u4ef6\u5373\u53ef [ root@localhost ~ ] # tail -1 /etc/group tom:x:1003:dc,egon [ root@localhost ~ ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) ,1003 ( tom ) [ root@localhost ~ ] # id egon uid = 1002 ( root ) gid = 1002 ( root ) \u7ec4 = 1002 ( root ) ,1003 ( tom ) /etc/gshadow \u00b6 [ root@localhost ~ ] # tail -1 /etc/gshadow dc:!:: \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e864\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u7ec4\u7684\u540d\u79f0 2 > \u7b2c\u4e8c\u5217: \u7528\u6237\u7ec4\u7684\u5bc6\u7801 \u82e5\u4e3a\u7a7a\u6216! \u8868\u660e\u6ca1\u6709\u5bc6\u7801 3 > \u7b2c\u4e09\u5217: \u7528\u6237\u7ec4\u7ba1\u7406\u5458,\u7ec4\u957f \u8fd9\u4e2a\u5b57\u6bb5\u53ef\u4e3a\u7a7a \u82e5\u6709\u591a\u4e2a\u7528\u6237\u7ec4\u7ba1\u7406\u5458,\u7528\u9017\u53f7\u5206\u9694 4 > \u7b2c\u56db\u5217: \u7ec4\u91cc\u6709\u54ea\u4e9b\u6210\u5458.\u7528\u9017\u53f7\u5206\u9694. [ root@localhost ~ ] # ll /etc/gshadow ---------- 1 root root 800 7\u6708 4 16 :51 /etc/gshadow \u5176\u5b83 \u00b6 /etc/skel/ \u5bb6\u76ee\u5f55\u7684\u6a21\u7248 /home/\u7528\u6237\u540d \u7528\u6237\u7684\u5bb6\u76ee\u5f55 /var/spool/mail \u7528\u6237\u7684\u90ae\u7bb1\u6587\u4ef6 [/etc/skel] \u521b\u5efa\u4e00\u4e2a\u7528\u6237\u5728\u8be5\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b\u4ea7\u751f\u7684\u521d\u59cb\u6587\u4ef6\u90fd\u4f1a\u4ece\u8fd9\u4e2a\u8def\u5f84\u4e0b\u63d0\u53d6. \u5373\u4f1a\u5c06\u6b64\u8def\u5f84\u4e0b\u7684\u4e00\u5806\u6a21\u7248\u6587\u4ef6\u76f4\u63a5\u590d\u5236\u5230\u521b\u5efa\u7684\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b. [ root@localhost ~ ] # ll -a /etc/skel/ \u603b\u7528\u91cf 24 drwxr-xr-x. 3 root root 78 6\u6708 30 23 :41 . drwxr-xr-x. 144 root root 8192 7\u6708 22 11 :47 .. -rw-r--r--. 1 root root 18 11\u6708 25 2021 .bash_logout -rw-r--r--. 1 root root 193 11\u6708 25 2021 .bash_profile -rw-r--r--. 1 root root 231 11\u6708 25 2021 .bashrc drwxr-xr-x. 4 root root 39 6\u6708 30 18 :17 .mozilla [/etc/\u7528\u6237\u540d] [ root@localhost ~ ] # ll /home \u603b\u7528\u91cf 4 drwx------ 5 dc dc 205 7\u6708 8 18 :36 dc drwx------. 15 onepiece onepiece 4096 6\u6708 30 22 :54 onepiece [ root@localhost ~ ] # ll -a /home/dc \u603b\u7528\u91cf 40 drwx------ 5 dc dc 205 7\u6708 8 18 :36 . # \u5f53\u524d\u6587\u4ef6\u76ee\u5f55\u7684\u786c\u94fe\u63a5 drwxr-xr-x. 4 root root 32 7\u6708 4 16 :51 .. # \u4e0a\u4e00\u7ea7\u6587\u4ef6\u76ee\u5f55\u7684\u786c\u94fe\u63a5 -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 a.txt -rw-r--r-- 1 dc dc 12288 7\u6708 8 18 :36 .a.txt.swp -rw------- 1 dc dc 992 7\u6708 8 18 :36 .bash_history -rw-r--r-- 1 dc dc 18 11\u6708 25 2021 .bash_logout -rw-r--r-- 1 dc dc 193 11\u6708 25 2021 .bash_profile -rw-r--r-- 1 dc dc 231 11\u6708 25 2021 .bashrc drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .cache drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .config -rw------- 1 dc dc 39 7\u6708 6 22 :34 .lesshst drwxr-xr-x 4 dc dc 39 6\u6708 30 18 :17 .mozilla -rw------- 1 dc dc 1920 7\u6708 8 18 :36 .viminfo -rw-rw-r-- 1 dc dc 21 7\u6708 8 18 :35 .vimrc [/var/spool/mail] [ root@localhost ~ ] # ll -a /var/spool/mail \u603b\u7528\u91cf 0 drwxrwxr-x. 2 root mail 43 7\u6708 4 16 :51 . drwxr-xr-x. 12 root root 140 6\u6708 30 18 :25 .. -rw-rw---- 1 dc mail 0 7\u6708 4 16 :51 dc -rw-rw----. 1 onepiece mail 0 6\u6708 30 18 :55 onepiece -rw-rw----. 1 rpc mail 0 6\u6708 30 18 :20 rpc [ root@localhost ~ ] # ll -a /var/spool/mail/dc -rw-rw---- 1 dc mail 0 7\u6708 4 16 :51 /var/spool/mail/dc \u624b\u52a8\u521b\u5efa\u7528\u6237 \u00b6 \u5b9e\u9a8c\u76ee\u6807: \u901a\u8fc7\u4fee\u6539\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u540d\u4e3alufei\u7684\u7528\u6237 \u56db\u5927\u6b65\u9aa4. \u25b2 \u51c6\u5907\u7528\u6237\u4fe1\u606f [ root@localhost ~ ] # tail -1 /etc/passwd lufei:x:1004:1004::/home/lufei:/bin/bash \"\"\" \u53ef\u4ee5\u5236\u4f5c\u5bc6\u7801 openssl passwd\u7684\u4f5c\u7528\u662f\u7528\u6765\u8ba1\u7b97\u5bc6\u7801hash\u7684,\u76ee\u7684\u662f\u4e3a\u4e86\u9632\u6b62\u5bc6\u7801\u4ee5\u660e\u6587\u7684\u5f62\u5f0f\u51fa\u73b0\u3002 \u8bed\u6cd5\u683c\u5f0f: openssl passwd [option] passwd -1: \u8868\u793a\u91c7\u7528\u7684\u662fMD5\u52a0\u5bc6\u7b97\u6cd5\u3002 -salt: \u6307\u5b9asalt\u503c,\u4e0d\u4f7f\u7528\u968f\u673a\u4ea7\u751f\u7684salt. \u5728\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u65f6,\u5373\u4f7f\u5bc6\u7801\u4e00\u6837,salt\u4e0d\u4e00\u6837,\u6240\u8ba1\u7b97\u51fa\u6765\u7684hash\u503c\u4e5f\u4e0d\u4e00\u6837. \u9664\u975e\u5bc6\u7801\u4e00\u6837,salt\u503c\u4e5f\u4e00\u6837,\u8ba1\u7b97\u51fa\u6765\u7684hash\u503c\u624d\u4e00\u6837.salt\u4e3a8\u5b57\u8282\u7684\u5b57\u7b26\u4e32. \"\"\" ## \u6ce8\u610f'i have a dream' \u4e0d\u662f\u5bc6\u7801\u800c\u662f\u5bc6\u7801\u7684\u76d0,\u5207\u8bb0\u5bc6\u7801\u7684\u76d0\u91cc\u4e0d\u8981\u6709\u4e2d\u6587 [ root@localhost ~ ] # openssl passwd -1 -salt 'i have a dream' Password: ##\u8fd9\u91cc\u8f93\u5165\u7684\u662f\u5bc6\u7801123456 $1$i have a $UEsc7yzrB5DWmTvxRpTsp . ##\u8fd9\u662f\u751f\u6210\u7684\u5bc6\u6587\u5bc6\u7801 [ root@localhost ~ ] # vim /etc/shadow [ root@localhost ~ ] # tail -1 /etc/shadow ##\u653e\u660e\u6587\u5bc6\u7801\u662f\u65e0\u6548\u7684 lufei: $1$i have a $UEsc7yzrB5DWmTvxRpTsp .:19177:0:99999:7::: \u25b2 \u51c6\u5907\u7ec4\u4fe1\u606f [ root@localhost ~ ] # tail -1 /etc/group lufei:x:1004: [ root@localhost ~ ] # tail -1 /etc/gshadow lufei:!:: \u25b2 \u51c6\u5907\u5bb6\u76ee\u5f55 [ root@localhost ~ ] # mkdir /home/lufei [ root@localhost ~ ] # ll /home \u603b\u7528\u91cf 4 drwx------ 5 dc dc 205 7\u6708 8 18 :36 dc drwxr-xr-x 2 root root 6 7\u6708 25 09 :11 lufei drwx------. 15 onepiece onepiece 4096 6\u6708 30 22 :54 onepiece [ root@localhost ~ ] # chown lufei.lufei /home/lufei [ root@localhost ~ ] # chmod 700 /home/lufei [ root@localhost ~ ] # ll /home \u603b\u7528\u91cf 4 drwx------ 5 dc dc 205 7\u6708 8 18 :36 dc drwx------ 2 lufei lufei 6 7\u6708 25 09 :11 lufei drwx------. 15 onepiece onepiece 4096 6\u6708 30 22 :54 onepiece [ root@localhost ~ ] # ll -a /home/dc \u603b\u7528\u91cf 40 drwx------ 5 dc dc 205 7\u6708 8 18 :36 . drwxr-xr-x. 5 root root 45 7\u6708 25 09 :11 .. -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 a.txt -rw-r--r-- 1 dc dc 12288 7\u6708 8 18 :36 .a.txt.swp -rw------- 1 dc dc 992 7\u6708 8 18 :36 .bash_history # \u6b64\u6587\u4ef6\u81ea\u52a8\u4ea7\u751f,\u4e0e\u5386\u53f2\u8bb0\u5f55\u6709\u5173 -rw-r--r-- 1 dc dc 18 11\u6708 25 2021 .bash_logout -rw-r--r-- 1 dc dc 193 11\u6708 25 2021 .bash_profile -rw-r--r-- 1 dc dc 231 11\u6708 25 2021 .bashrc drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .cache drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .config -rw------- 1 dc dc 39 7\u6708 6 22 :34 .lesshst drwxr-xr-x 4 dc dc 39 6\u6708 30 18 :17 .mozilla -rw------- 1 dc dc 1920 7\u6708 8 18 :36 .viminfo -rw-rw-r-- 1 dc dc 21 7\u6708 8 18 :35 .vimrc \"\"\" .[!.]* []\u4e2d\u62ec\u53f7\u4ee3\u8868\u53d6\u5176\u4e2d\u4e4b\u4e00 !\u611f\u53f9\u53f7\u4ee3\u8868\u53d6\u53cd \u7b2c\u4e00\u4e2a\u662f\u70b9 \u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e0d\u662f\u70b9 \u5176\u4f59\u7684\u5b57\u7b26\u7231\u5565\u662f\u5565 \"\"\" [ root@localhost ~ ] # cp -ra /etc/skel/.[!.]* /home/lufei [ root@localhost ~ ] # ll -a /home/lufei \u603b\u7528\u91cf 12 drwx------ 3 lufei lufei 78 7\u6708 25 09 :26 . drwxr-xr-x. 5 root root 45 7\u6708 25 09 :11 .. -rw-r--r--. 1 root root 18 11\u6708 25 2021 .bash_logout -rw-r--r--. 1 root root 193 11\u6708 25 2021 .bash_profile -rw-r--r--. 1 root root 231 11\u6708 25 2021 .bashrc drwxr-xr-x. 4 root root 95 7\u6708 25 09 :17 .mozilla [ root@localhost ~ ] # chown lufei.lufei /home/lufei/.[!.]* [ root@localhost ~ ] # ll -a /home/lufei \u603b\u7528\u91cf 12 drwx------ 3 lufei lufei 78 7\u6708 25 09 :26 . drwxr-xr-x. 5 root root 45 7\u6708 25 09 :11 .. -rw-r--r--. 1 lufei lufei 18 11\u6708 25 2021 .bash_logout -rw-r--r--. 1 lufei lufei 193 11\u6708 25 2021 .bash_profile -rw-r--r--. 1 lufei lufei 231 11\u6708 25 2021 .bashrc drwxr-xr-x. 4 lufei lufei 95 7\u6708 25 09 :17 .mozilla \u25b2 \u51c6\u5907\u90ae\u7bb1 [ root@localhost ~ ] # ll /var/spool/mail/dc -rw-rw---- 1 dc mail 0 7\u6708 4 16 :51 /var/spool/mail/dc [ root@localhost ~ ] # touch /var/spool/mail/lufei [ root@localhost ~ ] # ll /var/spool/mail/lufei -rw-r--r-- 1 root root 0 7\u6708 25 09 :32 /var/spool/mail/lufei [ root@localhost ~ ] # chmod 660 /var/spool/mail/lufei [ root@localhost ~ ] # chown lufei.mail /var/spool/mail/lufei [ root@localhost ~ ] # ll /var/spool/mail/lufei -rw-rw---- 1 lufei mail 0 7\u6708 25 09 :32 /var/spool/mail/lufei \u25b2 \u9a8c\u8bc1 [ root@localhost ~ ] # exit \u767b\u51fa Connection to 172 .16.150.131 closed. One_Piece@DCdeMacBook-Air ~ % ssh lufei@172.16.150.131 lufei@172.16.150.131 ' s password: ## \u5bc6\u7801\u4e3a123456 Last login: Mon Jul 25 09 :40:07 2022 from 172 .16.150.1 [ lufei@localhost ~ ] $ \u7528\u6237\u7ba1\u7406\u547d\u4ee4 \u00b6 useradd \u00b6 \u6dfb\u52a0\u7528\u6237 \u5f53\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u65f6,\u82e5\u6ca1\u6709\u6307\u5b9a\u7528\u6237\u7684\u4e3b\u7ec4,\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u7684\u7ec4\u4f5c\u4e3a\u7528\u6237\u7684\u4e3b\u7ec4. \u5373\u5728 useradd user1 \u7684\u540c\u65f6,\u4f1a\u9ed8\u8ba4\u6267\u884c\u4e24\u6761\u547d\u4ee4: groupadd user1 ; usermod -g user1 user1 \u6572\u9ed1\u677f\uff01linux \u89c4\u5b9a \u4e00\u4e2a\u7528\u6237\u5fc5\u987b\u5728\u4e00\u4e2a\u7ec4\u5185,\u8be5\u7ec4\u79f0\u4e4b\u4e3a\u5b83\u7684\u4e3b\u7ec4. [\u4e00\u822c\u60c5\u51b5] \u25cb \u521b\u5efa\u7528\u6237 [ root@localhost ~ ] # useradd user1 \u25cb \u67e5\u770b\u7528\u6237 1 > ` id ` \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f 2 > ` id \u7528\u6237\u540d ` \u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u4fe1\u606f [ root@localhost ~ ] # id uid = 0 ( root ) gid = 0 ( root ) \u7ec4 = 0 ( root ) [ root@localhost ~ ] # id user1 uid = 2001 ( user1 ) gid = 2001 ( user1 ) \u7ec4 = 2001 ( user1 ) \u25cb \u8bbe\u5b9a\u4e0e\u4fee\u6539\u5bc6\u7801 1 > passwd # \u9ed8\u8ba4\u7ed9\u5f53\u524d\u5f53\u524d\u767b\u5f55\u7528\u6237\u4fee\u6539\u5bc6\u7801 2 > # root\u7528\u6237\u53ef\u4ee5\u7ed9\u81ea\u5df1\u4ee5\u53ca\u6240\u6709\u5176\u4ed6\u7528\u6237\u8bbe\u5b9a\u5bc6\u7801,\u666e\u901a\u7528\u6237\u53ea\u80fd\u8bbe\u5b9a\u81ea\u5df1\u7684\u5bc6\u7801 passwd \u7528\u6237\u540d # \u4ea4\u4e92\u5f0f echo \"\u5bc6\u7801\" | passwd --stdin \u7528\u6237\u540d # \u975e\u4ea4\u4e92\u5f0f,\u6b64\u547d\u4ee4\u53ea\u6709root\u7528\u6237\u80fd\u4f7f\u7528 [ root@localhost ~ ] # echo \"123456\" | passwd --stdin user1 \u66f4\u6539\u7528\u6237user1 \u7684\u5bc6\u7801 passwd: \u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0 \u25cb \u67e5\u770b\u767b\u5f55\u7528\u6237\u4fe1\u606f \"\"\" whoami \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u540d who \u67e5\u770b\u6240\u6709\u767b\u5f55\u7684\u7528\u6237\u4fe1\u606f \"\"\" [ root@localhost ~ ] # whoami root [ root@localhost ~ ] # who root :0 2022 -07-22 11 :40 ( :0 ) user1 pts/0 2022 -07-25 11 :00 ( 172 .16.150.1 ) lufei pts/1 2022 -07-25 10 :37 ( 172 .16.150.1 ) root pts/2 2022 -07-25 10 :54 ( 172 .16.150.1 ) dc pts/3 2022 -07-25 10 :55 ( 172 .16.150.1 ) [\u6307\u5b9a\u9009\u9879] \"\"\" \u529f\u80fd: \u65b0\u589e\u4e00\u4e2a\u7528\u6237. \u4e86\u89e3useradd\u547d\u4ee4\u7684\u5e38\u7528\u9009\u9879: \u2013u: \u6307\u5b9a\u7528\u6237\u7684UID \u2013g: \u6307\u5b9a\u7528\u6237\u6240\u5c5e\u7684\u4e3b\u7ec4 \u2013G: \u6307\u5b9a\u7528\u6237\u6240\u5c5e\u7684\u9644\u52a0\u7ec4 \u2013d: \u6307\u5b9a\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u2013c: \u6307\u5b9a\u7528\u6237\u7684\u5907\u6ce8\u4fe1\u606f \u2013s: \u6307\u5b9a\u7528\u6237\u6240\u7528\u7684shell -e: \u8d26\u53f7\u5931\u6548\u65e5\u671f -M: \u4e0d\u521b\u5efa\u5bb6\u76ee\u5f55,\u901a\u5e38\u5e94\u7528\u4e8e\u7cfb\u7edf\u7528\u6237,\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf -r: \u521b\u5efa\u7cfb\u7edf\u8d26\u6237,uid\u5e94\u5904\u4e8e\u7cfb\u7edf\u7528\u6237\u8303\u56f4\u5185(1000\u4ee5\u5185),\u9ed8\u8ba4\u5c31\u6ca1\u6709\u5bb6\u76ee\u5f55 \"\"\" ## \u6307\u5b9a\u9009\u9879\u521b\u5efa\u7528\u6237\u65f6\u5019,\u521b\u5efa\u7528\u6237\u7684\u4e3b\u7ec4\u548c\u9644\u52a0\u7ec4\u5bf9\u5e94\u7684\u7528\u6237\u7ec4\u5fc5\u987b\u4e8b\u5148\u5b58\u5728. [ root@localhost ~ ] # groupadd group1 [ root@localhost ~ ] # cat /etc/group | grep 1004 lufei:x:1004: [ root@localhost ~ ] # grep group1 /etc/group group1:x:1005: [ root@localhost ~ ] # useradd -u 2000 -g 1005 -G 1004 -d /home/likui -c \"\u8fd9\u662f\u674e\u9035\" -e \"2022-12-12\" -s /sbin/nologin likui [ root@localhost ~ ] # cat /etc/passwd | grep likui likui:x:2000:1005:\u8fd9\u662f\u674e\u9035:/home/likui:/sbin/nologin [ root@localhost ~ ] # id likui uid = 2000 ( likui ) gid = 1005 ( group1 ) \u7ec4 = 1005 ( group1 ) ,1004 ( lufei ) [ root@localhost ~ ] # grep 1004 /etc/group lufei:x:1004:likui [ root@localhost ~ ] # echo \"123456\" | passwd --stdin likui \u66f4\u6539\u7528\u6237 likui \u7684\u5bc6\u7801. passwd\uff1a\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0. !!!\u54ea\u6015\u4e3a\u674e\u9035\u8d26\u53f7\u8bbe\u7f6e\u4e86\u5bc6\u7801. \u767b\u5f55\u65f6\u4f1a\u663e\u793aThis account is currently not available.\u5f53\u524d\u8d26\u53f7\u4e0d\u53ef\u7528.Hhhh \u56e0\u4e3alikui\u767b\u5f55\u65f6\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f\u662f/sbin/nologin \u5b9e\u9645\u4e0a,\u5728\u5de5\u4f5c\u4e2d\u901a\u5e38\u4f1a\u901a\u8fc7\u9009\u9879 -r -s -M \u9020\u51fa\u4e00\u4e2a\u7cfb\u7edf\u7528\u6237,\u4e0d\u8ba9\u5176\u767b\u64cd\u4f5c\u7cfb\u7edf,\u7528\u4e8e\u542f\u8f6f\u4ef6\u670d\u52a1\u7528\u7684. \u56e0\u4e3a\u7cfb\u7edf\u6bcf\u591a\u4e00\u4e2a\u53ef\u767b\u5f55\u7684\u7528\u6237,\u5c31\u591a\u4e00\u4efd\u98ce\u9669.. \u6240\u4ee5\u4e00\u822c\u4e0d\u4f1a -u -g. ## \u521b\u5efa\u666e\u901a\u7528\u6237,\u4f46\u662f\u6ca1\u6709\u5bb6\u76ee\u5f55,\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf useradd -M -s /sbin/nologin xxx ## yyy\u5c5e\u4e8e\u7cfb\u7edf\u7528\u6237,uid\u5904\u4e8e\u7cfb\u7edf\u7528\u6237uid\u8303\u56f4\u5185 useradd -r -s /sbin/nologin yyy ## zzz\u5c5e\u4e8e\u7cfb\u7edf\u7528\u6237,uid\u5904\u4e8e\u7cfb\u7edf\u7528\u6237uid\u8303\u56f4\u5185,\u6ca1\u6709\u5bb6\u76ee\u5f55,\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf useradd -M -r -s /sbin/nologin zzz Ps: useradd\u521b\u5efa\u7528\u6237\u65f6,\u5bf9\u4e8e\u672a\u6307\u5b9a\u7684\u9009\u9879(-u\u3001-g\u7b49\u7b49), \u4f1a\u4ee5 /etc/login.defs \u3001 /etc/default/useradd \u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u4f5c\u4e3a\u53c2\u7167\u7269, \u8be6\u89c1 https://zhuanlan.zhihu.com/p/329789819 userdel \u00b6 \u5220\u9664\u7528\u6237 userdel user1 # \u5220\u9664\u7528\u6237user1,\u4f46\u4e0d\u5220\u9664\u7528\u6237\u5bb6\u76ee\u5f55\u548cmail userdel -r user1 # \u8981\u60f3\u5220\u5f7b\u5e95,\u52a0-r\u9009\u9879 Ps: \u5220\u9664likui\u7528\u6237,\u662f\u5220\u4e0d\u5e72\u51c0\u7684.\u521b\u5efalikui\u7528\u6237\u65f6\u624b\u52a8\u521b\u5efa\u7684\u7528\u6237\u7ec4\u4e0d\u4f1a\u81ea\u52a8\u5220\u9664. \u54ea\u6015\u5728\u521b\u5efalikui\u7528\u6237\u65f6,\u5f88\u7ec6\u8282\u7684\u6307\u5b9a\u4e86\u4e3b\u7ec4\u540d\u4e0e\u7528\u6237\u540d\u4e00\u6837,\u4e5f\u4e0d\u4f1a\u81ea\u52a8\u5220\u9664. So,\u6700\u597d\u4f7f\u7528useradd\u547d\u4ee4\u7684\u9ed8\u8ba4\u9009\u9879. \u5176\u5b9e\u6700\u91cd\u8981\u7684\u4e00\u70b9\u5c31\u662f\u8981\u660e\u767d\u54ea\u4e9b\u6587\u4ef6\u4e0e\u7528\u6237\u548c\u7ec4\u76f8\u5173!\u6ca1\u5220\u5e72\u51c0,\u5bf9\u5e94\u5220\u9664\u5c31\u597d\u5566!!! usermod \u00b6 \u4fee\u6539\u7528\u6237 ## \u540cuseradd\u53c2\u6570\u57fa\u4e00\u81f4,\u53ea\u4e0d\u8fc7useradd\u662f\u6dfb\u52a0,usermod\u662f\u4fee\u6539 -u \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u7684UID -g \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u4e3b\u7ec4 -G !!\u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u9644\u52a0\u7ec4,\u4f7f\u7528\u9017\u53f7\u9694\u5f00\u591a\u4e2a\u9644\u52a0\u7ec4 -a !!\u4ec5\u4e0e-G\u9009\u9879\u4e00\u8d77\u4f7f\u7528,\u4fee\u6539\u9644\u52a0\u7ec4. \u52a0-a\u6dfb\u52a0,\u4e0d\u52a0-a\u4ee3\u8868\u8986\u76d6 -d \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u5bb6\u76ee\u5f55 -c \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u6ce8\u91ca\u4fe1\u606f -s \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u7684bash shell -e \u4fee\u6539\u8fc7\u671f\u65f6\u95f4 -l \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u7684\u767b\u9646\u540d -L \u6307\u5b9a\u8981\u9501\u5b9a\u7684\u7528\u6237,\u6548\u679c -- \u65e0\u6cd5\u767b\u5f55 -U \u6307\u5b9a\u8981\u89e3\u9501\u7684\u7528\u6237 \u25b2 \u521b\u5efatom\u7528\u6237,\u4e3b\u7ec4\u4e3atom,\u9644\u52a0\u7ec4\u4e3ait\u3001sala\u3001hr [ root@localhost ~ ] # useradd tom [ root@localhost ~ ] # id tom uid = 2002 ( tom ) gid = 2002 ( tom ) \u7ec4 = 2002 ( tom ) [ root@localhost ~ ] # groupadd it [ root@localhost ~ ] # groupadd sale [ root@localhost ~ ] # groupadd hr [ root@localhost ~ ] # usermod -a -G it,sale,hr tom [ root@localhost ~ ] # id tom uid = 2002 ( tom ) gid = 2002 ( tom ) \u7ec4 = 2002 ( tom ) ,2003 ( it ) ,2004 ( sale ) ,2005 ( hr ) ## \u76f4\u63a5\u5e72\u6587\u4ef6\u4e5f\u9614\u4ee5\uff01\u4e5f\u80fd\u8fbe\u5230\u540c\u6837\u7684\u6548\u679c. [ root@localhost ~ ] # grep tom /etc/group tom:x:2002: it:x:2003:tom sale:x:2004:tom hr:x:2005:tom [ root@localhost ~ ] # grep tom /etc/gshadow tom:!:: it:!::tom sale:!::tom hr:!::tom \u25b2 \u4fee\u6539tom\u7528\u6237\u7684\u7528\u6237\u540d\u4e3aTOM [ root@localhost ~ ] # usermod -l TOM tom [ root@localhost ~ ] # id TOM uid = 2002 ( TOM ) gid = 2002 ( tom ) \u7ec4 = 2002 ( tom ) ,2003 ( it ) ,2004 ( sale ) ,2005 ( hr ) \u25b2 \u7ed9TOM\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\u4e3a123456. \u5e76\u9501\u5b9aTOM\u7528\u6237 ( \u6548\u679c:\u767b\u5f55\u4e0d\u4e0a ) /\u89e3\u9501TOM\u7528\u6237 [ root@localhost ~ ] # passwd TOM \u66f4\u6539\u7528\u6237TOM\u7684\u5bc6\u7801 \u65b0\u7684\u5bc6\u7801: \u65e0\u6548\u7684\u5bc6\u7801:\u5bc6\u7801\u5c11\u4e8e8\u4e2a\u5b57\u7b26 \u91cd\u65b0\u8f93\u5165\u65b0\u7684\u5bc6\u7801: passwd:\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0 [ root@localhost ~ ] # usermod -L TOM [ root@localhost ~ ] # usermod -U TOM \u7ec4\u7ba1\u7406\u547d\u4ee4 \u00b6 groupadd \u00b6 \u521b\u5efa\u7ec4 groupadd \u7ec4\u540d -- \u521b\u5efa\u57fa\u672c\u7ec4,\u4e0d\u6307\u5b9aGID groupadd -r \u7ec4\u540d -- \u521b\u5efa\u7cfb\u7edf\u7ec4,GID\u8303\u56f4201-999 groupadd -g GID\u53f7 \u7ec4\u540d -- \u521b\u5efa\u57fa\u672c\u7ec4,\u6307\u5b9aGID\u53f7 [ root@localhost ~ ] # groupadd gg1 [ root@localhost ~ ] # groupadd -r gg2 [ root@localhost ~ ] # groupadd -g 5555 gg3 [ root@localhost ~ ] # tail -3 /etc/group gg1:x:2006: gg2:x:981: gg3:x:5555: groupmod \u00b6 \u4fee\u6539\u7ec4 groupmod -g GID\u53f7 \u7ec4\u540d -- \u4fee\u6539\u7ec4\u7684GID\u53f7 groupmod -n \u65b0\u7ec4\u540d \u65e7\u7ec4\u540d -- \u4fee\u6539\u7ec4\u7684\u7ec4\u540d [ root@localhost ~ ] # groupmod -g 1111 gg3 [ root@localhost ~ ] # grep gg3 /etc/group gg3:x:1111: [ root@localhost ~ ] # groupmod -n new_gg3 gg3 [ root@localhost ~ ] # grep new_gg3 /etc/group new_gg3:x:1111: groupdel \u00b6 \u5220\u9664\u7ec4 \u5982\u679c\u4e00\u4e2a\u7ec4\u662f\u4e00\u4e2a\u7528\u6237\u7684\u4e3b\u7ec4,\u90a3\u4e48\u8be5\u7ec4\u4e0d\u80fd\u88ab\u5220\u9664,\u5220\u6389\u7528\u6237\u4f1a\u9ed8\u8ba4\u4e00\u8d77\u5220\u6389\u5b83\u7684\u4e3b\u7ec4 \u5373\u4e00\u4e2a\u7528\u6237\u5fc5\u987b\u6709\u4e00\u4e2a\u4e3b\u7ec4,groupdel\u5220\u9664\u7684\u7ec4\u4e0d\u80fd\u662f\u4efb\u4f55\u7528\u6237\u7684\u4e3b\u7ec4 [ root@localhost ~ ] # useradd egon1 [ root@localhost ~ ] # groupadd devops [ root@localhost ~ ] # usermod -G devops egon1 [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) ,2008 ( devops ) \"\"\" \u9644\u52a0\u7ec4\u53ef\u4ee5\u5220\u9664(\u6709\u4e2a\u524d\u63d0,\u6b64\u9644\u52a0\u7ec4\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u7528\u6237\u7684\u4e3b\u7ec4!) \u65e0\u6cd5\u5220\u9664\u7ec4egon1,\u56e0\u4e3a\u7ec4egon1\u5c5e\u4e8eegon1\u7528\u6237\u7684\u4e3b\u7ec4. \"\"\" [ root@localhost ~ ] # groupdel devops [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) [ root@localhost ~ ] # groupdel egon1 groupdel\uff1a\u4e0d\u80fd\u79fb\u9664\u7528\u6237\u201cegon1\u201d\u7684\u4e3b\u7ec4 gpasswd \u00b6 \u7ed9\u7528\u6237\u6dfb\u52a0\u9644\u52a0\u7ec4/\u7ed9\u7ec4\u6dfb\u52a0\u7ec4\u6210\u5458 \u6709\u4e09\u79cd\u9014\u5f84: 1> usermod -a -G \u9644\u52a0\u7ec4\u540d/\u9644\u52a0\u7ec4id,\u7ec42,\u7ec43 \u7528\u6237 -- \u5c06\u4e00\u4e2a\u7528\u6237\u6dfb\u52a0\u5230\u591a\u4e2a\u7ec4\u91cc\u9762 2> \u4fee\u6539 /etc/group \u6587\u4ef6 3> gpasswd \u9009\u9879 \u25cb gpasswd -a \u7528\u6237 \u9644\u52a0\u7ec4\u540d -- \u5c06\u67d0\u4e2a\u7528\u6237\u52a0\u5165\u5230\u67d0\u4e2a\u7ec4 \u25cb gpasswd -M \u7528\u62371,\u7528\u62372,\u7528\u62373 \u7ec4\u540d -- \u5c06\u591a\u4e2a\u7528\u6237\u6dfb\u52a0\u5230\u4e00\u4e2a\u7ec4\u91cc\u9762 \u25cb gpasswd -A \u7ec4\u5185\u67d0\u4e2a\u7528\u6237 \u7ec4\u540d -- \u5c06\u7ec4\u5185\u67d0\u4e2a\u7528\u6237\u6307\u5b9a\u4e3a\u7ec4\u957f, \u7ec4\u957f\u53ef\u4ee5\u5f80\u7ec4\u91cc\u6dfb\u52a0\u5220\u9664\u6210\u5458 \u25cb gpasswd -d \u7ec4\u5185\u67d0\u4e2a\u7528\u6237 \u7ec4\u540d -- \u5220\u9664\u7ec4\u5185\u67d0\u4e2a\u6210\u5458 [ root@localhost ~ ] # grep gg[1-9] /etc/group gg1:x:2006: gg2:x:981: new_gg3:x:1111: [ root@localhost ~ ] # grep egon1 /etc/passwd egon1:x:2003:2007::/home/egon1:/bin/bash [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) [ root@localhost ~ ] # usermod -a -G gg1 egon1 [ root@localhost ~ ] # gpasswd -a egon1 gg2 \u6b63\u5728\u5c06\u7528\u6237\u201cegon1\u201d\u52a0\u5165\u5230\u201cgg2\u201d\u7ec4\u4e2d [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) ,2006 ( gg1 ) ,981 ( gg2 ) \u8865\u5145: \u547d\u4ee4\u884c\u5207\u6362\u7528\u6237 \u5728\u4e00\u4e2a\u7ec8\u7aef,root\u5207\u6362\u5230\u666e\u901a\u7528\u6237\u4e0d\u9700\u8981\u8f93\u5165\u5bc6\u7801;\u666e\u901a\u7528\u6237\u5207\u6362\u5230root\u7528\u6237\u9700\u8981\u5bc6\u7801. ## \u63d0\u524d\u8bf4\u4e00\u70b9,`-`\u5373\u5207\u6362\u5230\u6307\u5b9a\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b,\u610f\u5473\u7740\u81f3\u5c11\u5f97\u4fdd\u8bc1\u7528\u6237\u5bf9 /home/dc \u6709x\u53ef\u6267\u884c\u6743\u9650 [ root@localhost ~ ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 10 :55:14 CST 2022\u4ece 172 .16.150.1pts/3 \u4e0a [ dc@localhost ~ ] $ su - root \u5bc6\u7801\uff1a \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 10 :54:06 CST 2022\u4ece 172 .16.150.1pts/2 \u4e0a [ root@localhost ~ ] # exit \u767b\u51fa [ dc@localhost ~ ] $ exit \u767b\u51fa ## -c\u9009\u9879 \u4ee5\u67d0\u4e00\u7528\u6237\u7684\u8eab\u4efd\u6267\u884c\u67d0\u6761\u547d\u4ee4 \u4e0d\u7528\u771f\u7684\u5207\u6362\u8fc7\u53bb.. [ root@localhost ~ ] # su - dc -c \"cat /opt/a.txt\" 123 [ root@localhost ~ ] # exit \u767b\u51fa Connection to 172 .16.150.131 closed. One_Piece@DCdeMacBook-Air ~ % \u4e34\u65f6\u83b7\u53d6\u7ec4\u6743\u9650 newgrp \u6211\u4eec\u53ef\u4ee5\u4e3a\u7ec4\u8bbe\u7f6e\u5bc6\u7801. \u7136\u540e\u8ba9\u4e00\u4e9b\u975e\u7ec4\u6210\u5458\u7684\u7528\u6237\u901a\u8fc7\u547d\u4ee4 newgrp \u7ec4\u540d \u4e34\u65f6\u5207\u6362\u5230\u7ec4\u5185\u5e76\u8f93\u5165\u5bc6\u7801\u7684\u65b9\u5f0f\u83b7\u53d6\u7528\u6237\u7ec4\u7684\u6743\u9650\u548c\u7279\u6027. \"\"\" \u521b\u5efa\u4e86\u4e00\u4e2a\u7528\u6237newuser,\u5e76\u4eceroot\u5207\u6362\u5230newuser\u7528\u6237 \u56e0\u4e3a\u7528\u6237newuser\u4e0d\u662f\u6587\u4ef6/tmp/a.txt\u7684\u62e5\u6709\u8005,\u4e5f\u4e0d\u662f\u6587\u4ef6\u7684\u5c5e\u7ec4..\u53ea\u80fd\u662f\u6587\u4ef6\u7684\u5176\u4ed6\u4eba. \u6240\u4ee5\u7528\u6237newuser\u5bf9\u6587\u4ef6/tmp/a.txt\u53ea\u6709\u8bfb\u6743\u9650 \"\"\" [ root@localhost ~ ] # useradd newuser [ root@localhost ~ ] # echo 111 > /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-r--r-- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # su - newuser [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 [ newuser@localhost ~ ] $ echo 123 >> /tmp/a.txt -bash: /tmp/a.txt: \u6743\u9650\u4e0d\u591f \"\"\" \u73b0\u5728\u60f3\u8981\u8ba9\u7528\u6237newuser\u80fd\u4fee\u6539a.txt\u6587\u4ef6,\u5373\u8ba9\u7528\u6237newuser\u5bf9a.txt\u6587\u4ef6\u6709\u5199\u6743\u9650 \"\"\" \u3010\u65b9\u6848\u4e00\u3011: \u5c06\u6587\u4ef6\u7684\u62e5\u6709\u8005\u6539\u4e3anewuser \u3010\u65b9\u6848\u4e8c\u3011: \u7ed9\u5176\u4ed6\u4eba\u4e00\u4e2aw\u5199\u6743\u9650 [ newuser@localhost ~ ] $ exit \u767b\u51fa [ root@localhost ~ ] # chmod o+w /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-r--rw- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt \u3010\u65b9\u6848\u4e09\u3011: \u7ed9\u6587\u4ef6\u7684\u7ec4\u6dfb\u52a0w\u5199\u6743\u9650,\u5e76\u5c06\u7528\u6237newuser\u6dfb\u52a0\u5230\u8fd9\u4e2a\u7ec4\u91cc # !!!\u6ce8\u610f\u54e6,root\u7ec4\u5355\u7eaf\u7684\u53ea\u662f\u4e00\u4e2a\u7ec4,\u800croot\u7528\u6237\u624d\u662f\u8d85\u7ea7\u7528\u6237\u4e0d\u53d7\u6743\u9650\u538b\u5236.\u522b\u641e\u6df7\u4e86. [ root@localhost ~ ] # chmod o-w /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-r--r-- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # chmod g+w /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-rw-r-- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # gpasswd -a newuser root \u6b63\u5728\u5c06\u7528\u6237\u201cnewuser\u201d\u52a0\u5165\u5230\u201croot\u201d\u7ec4\u4e2d [ root@localhost ~ ] # id newuser uid = 2005 ( newuser ) gid = 2009 ( newuser ) \u7ec4 = 2009 ( newuser ) ,0 ( root ) [ root@localhost ~ ] # [ root@localhost ~ ] # su - newuser \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 17 :52:00 CST 2022pts/0 \u4e0a [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 [ newuser@localhost ~ ] $ echo 123 >> /tmp/a.txt [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 123 \u3010\u65b9\u6848\u56db\u3011:\u8ba9\u7528\u6237newuser\u4e34\u65f6\u83b7\u53d6\u6587\u4ef6\u5c5e\u7ec4\u7684\u6743\u9650,\u524d\u63d0\u9700\u8981\u7ed9\u7ec4\u8bbe\u7f6e\u5bc6\u7801 ( \u8fd9\u91cc\u8bbe\u7f6e\u7684\u5bc6\u7801\u662f123456 ) [ newuser@localhost ~ ] $ exit \u767b\u51fa [ root@localhost ~ ] # gpasswd -d newuser root \u6b63\u5728\u5c06\u7528\u6237\u201cnewuser\u201d\u4ece\u201croot\u201d\u7ec4\u4e2d\u5220\u9664 [ root@localhost ~ ] # id newuser uid = 2005 ( newuser ) gid = 2009 ( newuser ) \u7ec4 = 2009 ( newuser ) [ newuser@localhost ~ ] $ ll /tmp/a.txt -rw-rw-r-- 1 root root 8 7\u6708 25 18 :11 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # gpasswd root \u6b63\u5728\u4fee\u6539 root \u7ec4\u7684\u5bc6\u7801 \u65b0\u5bc6\u7801\uff1a \u8bf7\u91cd\u65b0\u8f93\u5165\u65b0\u5bc6\u7801\uff1a [ root@localhost ~ ] # su - newuser \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 18 :10:47 CST 2022pts/0 \u4e0a [ newuser@localhost ~ ] $ echo 666 >> /tmp/a.txt -bash: /tmp/a.txt: \u6743\u9650\u4e0d\u591f [ newuser@localhost ~ ] $ [ newuser@localhost ~ ] $ newgrp root ## \u7528\u6237newuser\u4e34\u65f6\u5207\u5230root\u7ec4\u4e0b,\u83b7\u53d6root\u7ec4\u7684\u6743\u9650 \u5bc6\u7801\uff1a [ newuser@localhost ~ ] $ id newuser ## \u9a8c\u8bc1\u4e0b\u662f\u4e34\u65f6\u7684! uid = 2005 ( newuser ) gid = 2009 ( newuser ) \u7ec4 = 2009 ( newuser ) [ newuser@localhost ~ ] $ echo 666 >> /tmp/a.txt [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 123 666 [ newuser@localhost ~ ] $ exit ## \u7528\u6237newuser\u9000\u51fa\u4e34\u65f6\u52a0\u5165\u7684root\u7ec4 exit [ newuser@localhost ~ ] $ echo 777 >> /tmp/a.txt -bash: /tmp/a.txt: \u6743\u9650\u4e0d\u591f \u8865\u5145 \u00b6 [ root@localhost ~ ] # openssl passwd -1 -salt 'i have a dream' Password: ## 123456 $1$i have a $UEsc7yzrB5DWmTvxRpTsp . ## \u7b97\u6587\u4ef6\u7684hash\u503c [ root@localhost opt ] # md5sum /etc/bashrc 3f48a33cc1fce59ff2df86429151c0e0 /etc/bashrc \u54c8\u5e0c\u7b97\u6cd5 \u00b6 \u53ef\u4ee5\u628a\u4e00\u4e32\u5185\u5bb9(\u6587\u672c\u6587\u4ef6--\u5b57\u7b26;\u89c6\u9891\u6587\u4ef6--\u4e8c\u8fdb\u5236)\u8ba1\u7b97\u6210\u4e00\u4e32hash\u503c. \u6839\u636e\u590d\u6742\u5ea6\u4e0d\u540c\u5e38\u89c1\u7684\u54c8\u5e0c\u7b97\u6cd5\u6709: md5\u3001sha512\u3001sha256 \u6ce8\u610f: \u6211\u4eec\u65e0\u9700\u7814\u7a76hash\u7b97\u6cd5\u7684\u539f\u7406,\u53ea\u9700\u8981\u638c\u63e1hash\u503c\u7684\u7279\u70b9\u5373\u53ef. hash\u503c\u6709\u4e09\u5927\u7279\u70b9: 1> \u8f93\u5165\u7684\u5185\u5bb9\u4e00\u6837,\u5e76\u4e14\u91c7\u7528\u7684hash\u7b97\u6cd5\u4e00\u6837,\u5f97\u5230\u7684hash\u503c\u4e00\u5b9a\u4e00\u6837\uff01 2> hash\u503c\u4e0d\u53ef\u9006\u63a8: \u4e0d\u80fd\u901a\u8fc7hash\u503c\u53cd\u63a8\u51fa\u660e\u6587 \u5176\u5b9e\u73b0\u76ee\u524d\u5df2\u7ecf\u53ef\u4ee5\u9006\u63a8\u4e86,\u9700\u8981\u4e00\u4e9b\u6280\u672f\u624b\u6bb5.. 3> hash\u503c\u7684\u957f\u5ea6\u53d6\u51b3\u4e8e\u91c7\u7528\u7684hash\u7b97\u6cd5,\u4e0e\u4f20\u5165\u7684\u5185\u5bb9\u591a\u5c11\u65e0\u5173. hash\u503c\u7684\u7528\u9014: \u25cb \u7ed3\u5408\u7279\u70b91\u548c2,\u53ef\u7528\u4e8e\u52a0\u5bc6. \u7528\u6237\u6ce8\u518c\u540e,\u670d\u52a1\u7aef\u662f\u6709\u4e00\u4efd\u6b63\u786e\u7684\u7528\u6237\u540d\u548c\u5bf9\u5e94\u7684\u7528\u54c8\u5e0c\u7b97\u6cd5(\u5047\u8bbe\u662fmd5)\u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u7684; \u5ba2\u6237\u7aef\u7528\u6237\u5728\u767b\u5f55\u754c\u9762\u8f93\u5165\u5bc6\u7801\u540e,\u4f1a\u7528md5\u8fdb\u884c\u52a0\u5bc6,\u5e76\u5c06\u7528\u6237\u540d\u4e0e\u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u4f20\u5230\u670d\u52a1\u7aef\u8fdb\u884c\u6bd4\u5bf9.. \u54ea\u6015\u4e2d\u95f4\u4eba\u622a\u83b7\u4e86C\u4f20\u7ed9S\u7684\u6570\u636e\u5305,\u62ff\u5230\u52a0\u5bc6\u540e\u7684hash\u503c\u4e5f\u53cd\u63a8\u4e0d\u4e86\u5bc6\u7801\u660e\u6587. \u4f46\u4e2d\u95f4\u4eba\u53ef\u4ee5\u8fdb\u884c **\u649e\u5e93** (\u6293\u5305 + \u731c\u5230\u7528\u7684hash\u7b97\u6cd5 + \u5e38\u7528\u7684\u5bc6\u7801\u5b57\u5178),\u901a\u4fd7\u70b9\u5c31\u662f\u8499,\u8499\u4f60\u7684\u5bc6\u7801\u662f\u591a\u5c11.. \u4e00\u65e6\u5bc6\u7801\u5b57\u5178\u4e2d\u7684\u67d0\u4e2avalue\u901a\u8fc7\u76f8\u540c\u7684hash\u7b97\u6cd5\u7b97\u51fa\u7684hash\u503c\u4e0e\u6293\u5305\u622a\u83b7\u7684\u4e00\u81f4.. \u90a3\u4e48\u4e5f\u5c31\u7834\u89e3\u5bc6\u7801\u6210\u529f\u4e86. Ps: \u4e00\u822c\u6765\u8bf4,\u5927\u578b\u4e92\u8054\u7f51\u516c\u53f8\u4f1a\u5bf9\u5e38\u89c1\u7684\u52a0\u5bc6\u7b97\u6cd5\u8fdb\u884c\u4e00\u70b9\u52a0\u5de5.. \u6ca1\u6709\u7edd\u5bf9\u7684\u5b89\u5168,\u9ed1\u5ba2\u9700\u8981\u8861\u91cf\u7684\u662f\u653b\u51fb\u6210\u672c\u4e0e\u6536\u76ca.. \u25cb \u7ed3\u5408\u7279\u70b91\u548c3,\u53ef\u7528\u4e8e\u6587\u4ef6\u5b8c\u6574\u6027\u6821\u9a8c. \u5ba2\u6237\u7aef\u4ece\u670d\u52a1\u7aef\u4e0b\u8f7d\u4e00\u4e2a\u6587\u4ef6 S\u4f20\u8f93\u7ed9C\u6587\u4ef6\u7684\u540c\u65f6,\u4f1a\u4f20\u7ed9C\u4e00\u4e2a\u6587\u4ef6\u52a0\u5bc6\u540e\u5f97\u5230\u7684hash\u503c.\u4f20\u8f93\u5b8c\u6bd5,C\u540c\u6837\u5bf9\u6587\u4ef6\u8fdb\u884c\u52a0\u5bc6,\u6bd4\u5bf9hash\u503c\u662f\u5426\u76f8\u540c.. \u76f8\u540c\u5219\u8bc1\u660e\u6587\u4ef6\u662f\u5b8c\u6574\u7684,\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7.. \u4e2d\u95f4\u4eba\u600e\u4e48\u653b\u51fb\u5462\uff1f \u5b83\u9700\u8981\u5f97\u5230\u6240\u6709\u7684\u6570\u636e\u5305,(\u56e0\u4e3a\u6587\u4ef6\u662f\u4e00\u6bb5\u4e00\u6bb5\u4f20\u8f93\u7684),\u5e76\u4e14\u7be1\u6539\u52a0\u5165\u653b\u51fb\u4ee3\u7801,\u7ed9\u4e00\u4e2a\u65b0\u7684hash\u503c. \u8fd9\u6837\u5ba2\u6237\u7aef\u624d\u53d1\u89c9\u4e0d\u5230\u5f02\u5e38.. \u4f46\u51e1\u67d0\u4e00\u73af\u8282\u51fa\u73b0\u95ee\u9898,\u653b\u51fb\u90fd\u4f1a\u5931\u8d25..\u4e0d\u7528\u62c5\u5fc3. \u5bc6\u7801\u52a0\u76d0 \u00b6 \u589e\u5f3a\u4e86\u5bc6\u7801\u7684\u590d\u6742\u5ea6. \"\u76d0\"\u76f8\u5f53\u4e8eC\u4e0eS\u7684\u4e00\u4e2a\u6697\u53f7,\u4e2d\u95f4\u4eba\u649e\u5e93\u7684\u65f6\u5019\u8fd8\u5f97\u731c\u5230\u52a0\u7684\u201c\u76d0\u201d\u662f\u4ec0\u4e48,\u52a0\u5728\u5bc6\u7801\u7684\u54ea\u4e2a\u4f4d\u7f6e/\u54ea\u51e0\u4e2a\u4f4d\u7f6e.. eg: \u660e\u6587 -- 123 \u52a0\u76d0\u540e -- \u5929\u738b12\u66973\u5730\u864e","title":"\u6743\u9650\u7ba1\u7406\u4e4b\u7528\u6237\u4e0e\u7ec4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_1","text":"","title":"\u4ecb\u7ecd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_2","text":"OS - \u8fdb\u7a0b - \u8fdb\u7a0b\u4f7f\u7528\u6587\u4ef6 - \u8fdb\u7a0b\u6743\u9650 - \u7528\u6237 OS\u662f\u534f\u8c03\u7ba1\u7406\u786c\u4ef6\u8d44\u6e90\u4e0e\u4e0a\u5c42\u5e94\u7528\u7a0b\u5e8f\u7684\u8f6f\u4ef6. \u901a\u4fd7\u70b9,OS\u62ff\u7740\u786c\u4ef6\u8d44\u6e90\u7ed9\u4e0a\u5c42\u7684\u5e94\u7528\u7a0b\u5e8f\u7528 \u6bcf\u8fd0\u884c\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u8fdb\u7a0b. So,\u518d\u51c6\u786e\u70b9,\u64cd\u4f5c\u7cfb\u7edf\u662f\u5728\u534f\u8c03\u7ba1\u7406\u4e00\u5806\u8fdb\u7a0b\u6765\u4f7f\u7528\u786c\u4ef6. OS\u624b\u63e1\u4e00\u5806\u8fdb\u7a0b, \u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c(\u8fdb\u7a0b)\u8fc7\u7a0b\u4e2d\u6d89\u53ca\u5230\u5bf9\u6570\u636e\u7684\u64cd\u4f5c.. \u800c\u6570\u636e\u662f\u786c\u76d8\u4e2d\u5b58\u653e\u7740\u7684\u4e00\u4e2a\u4e2a\u6587\u4ef6. \u4e0d\u540c\u7684\u8fdb\u7a0b\u53ef\u80fd\u4f1a\u5bf9\u540c\u4e00\u4e2a\u6587\u4ef6\u6709\u4e0d\u540c\u7684\u8bfb\u5199\u6743\u9650. \u90a3\u5982\u4f55\u533a\u5206\u4e0d\u540c\u8fdb\u7a0b\u7684\u6743\u9650\uff1f \u522b\u95ee,\u95ee\u5c31\u662f\u5bf9\u6587\u4ef6\u7684\u6743\u9650! Linux\u4e2d\u4e00\u5207\u7686\u6587\u4ef6 _ ! \u8bd5\u60f3\u4e00\u4e0b,\u5982\u679c\u6ca1\u6709\u7528\u6237\u8fd9\u4e2a\u6982\u5ff5.\u6bcf\u4e2a\u6587\u4ef6\u7684\u5143\u6570\u636e\u91cc\u90fd\u8981\u8bb0\u5f55\u6bcf\u4e2a\u8fdb\u7a0b\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650.. \u82e5\u8fd0\u884c\u4e86100\u4e2a\u8fdb\u7a0b,\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8981\u8bb0\u5f55100\u4e2a\u8fdb\u7a0b\u6743\u9650.. It's very fool ! \u8fd9\u4f1a\u5bfc\u81f4\u6587\u4ef6\u7684\u5143\u6570\u636e\u975e\u5e38\u5927! \u8fd9\u4e00\u8bbe\u60f3\u8fd8\u672a\u8003\u8651\u4e0d\u540c\u4eba\u4f7f\u7528\u8fdb\u7a0b\u65f6,\u8fdb\u7a0b\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u8fd8\u4f1a\u4ea7\u751f\u53d8\u5316\u8fd9\u4e00\u53d8\u6570.. \u6362\u4e2a\u601d\u8def,\u5c06 Linux\u6240\u6709\u7684\u6587\u4ef6 \u90fd\u8bbe\u7f6e\u597d\u5176\u5173\u8054\u7684\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u5176\u4ed6\u4eba\u4ee5\u53ca\u5bf9\u5e94\u7684\u6743\u9650. \u518d\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u53bb\u8d77\u8fdb\u7a0b, \u8be5\u7528\u6237\u8fd0\u884c\u7684\u8fdb\u7a0b\u4e0e\u7528\u6237\u62e5\u6709\u7684\u6743\u9650\u4e00\u81f4.. \u5c31\u5f97\u5230\u4e86\u5b8c\u7f8e\u89e3\u51b3.","title":"\u63a8\u5bfc\u8fc7\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_3","text":"Q: \u7528\u6237\u662f\u4ec0\u4e48\uff1f A: \u7528\u6237\u662f\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u4e00\u79cd\u5b89\u5168\u673a\u5236,\u7528\u6237\u4e0e\u7ec4\u90fd\u662f\u6743\u9650\u7684\u5316\u8eab! Q: \u4e3a\u4f55\u8981\u6709\u7528\u6237\uff1f A: \u5212\u5206\u6743\u9650,\u589e\u5f3a\u5b89\u5168\u6027. \u8fdb\u7a0b\u5173\u8054\u7528\u6237,\u7528\u6237\u62e5\u6709\u6743\u9650,\u6743\u9650\u4f5c\u7528\u4e8e\u6587\u4ef6\u4e0a.** TnT \u6401\u8fd9\u7ed5\u53e3\u4ee4\u5450..","title":"\u7528\u6237"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_4","text":"\u7ec4\u4e5f\u5c31\u662f\u7c7b,\u4e00\u7c7b\u4eba\u62e5\u6709\u76f8\u540c\u7684\u6743\u9650.. \u4e3b\u7ec4: \u7528\u6237\u672c\u8eab\u6240\u5728\u7684\u90e8\u95e8 \u9644\u52a0\u7ec4: \u4e3a\u7528\u6237\u6dfb\u52a0\u7684\u90e8\u95e8 \u25b2 \u7528\u6237\u4e0e\u7ec4\u7684\u5173\u7cfb \u4e00\u5bf9\u4e00 : \u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u4e00\u4e2a\u7ec4,\u7528\u6237\u9ed8\u8ba4\u5728\u81ea\u5df1\u7684\u4e3b\u7ec4\u4e0b \u4e00\u5bf9\u591a : \u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u7ec4,\u7528\u6237\u53ea\u6709\u4e00\u4e2a\u4e3b\u7ec4,\u4f46\u53ef\u4ee5\u4e3a\u7528\u6237\u6dfb\u52a0\u591a\u4e2a\u9644\u52a0\u7ec4 \u591a\u5bf9\u591a : \u591a\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u7ec4. \u5373\u4e00\u4e2a\u7528\u6237\u5c5e\u4e8e\u591a\u4e2a\u7ec4,\u4e00\u4e2a\u7ec4\u91cc\u53ef\u4ee5\u6709\u591a\u4e2a\u7528\u6237 \u25b2 \u5bf9\u4e8elinux\u7cfb\u7edf\u6765\u8bf4,\u5b83\u53ef\u4e0d\u8ba4\u8bc6\u5565\u7528\u6237\u540d,\u7ec4\u540d,\u7528\u6237\u548c\u7ec4\u7684\u89d2\u8272\u662f\u901a\u8fc7 UID \u548c GID \u8bc6\u522b\u7684! \"\"\" `id`: \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u7528\u6237\u4fe1\u606f `id dc`: \u67e5\u770b\u6307\u5b9a\u7528\u6237dc\u7684\u7528\u6237\u4fe1\u606f `whoami`: \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 `who`: \u7528\u4e8e\u663e\u793a\u7cfb\u7edf\u4e2d\u6709\u54ea\u4e9b\u4f7f\u7528\u8005\u6b63\u5728\u4e0a\u9762 \"\"\" [ root@localhost ~ ] # id uid = 0 ( root ) gid = 0 ( root ) \u7ec4 = 0 ( root ) [ root@localhost ~ ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) [ root@localhost ~ ] # whoami root [ root@localhost ~ ] # who root :0 2022 -07-04 22 :55 ( :0 ) root pts/0 2022 -07-20 22 :08 ( 172 .16.150.1 ) UID ( User Identify ) :\u7528\u6237ID. \u6bcf\u521b\u5efa\u4e00\u4e2a\u7528\u6237,\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u4e2aUID. uid\u76f8\u5f53\u4e8e\u4e00\u4e2a\u4eba\u7684\u8eab\u4efd\u8bc1,\u7528\u6237\u540d\u5c31\u76f8\u5f53\u4e8e\u8fd9\u4e2a\u4eba\u7684\u540d\u5b57. GID ( Group Identify ) :\u7ec4ID. \u5982\u679c\u628a\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u5f53\u6210\u4e00\u5bb6\u516c\u53f8,uid\u76f8\u5f53\u4e8e\u67d0\u4eba\u7684\u5458\u5de5\u53f7,gid\u76f8\u5f53\u4e8e\u4ed6\u7684\u90e8\u95e8\u7f16\u53f7. \u7ec4 = 0 ( root ) :\u6307\u7684\u662f\u9644\u52a0\u7ec4.\u6ca1\u6709\u7684\u8bdd,\u9ed8\u8ba4\u662f\u4e3b\u7ec4. [ \u4e86\u89e3 ] centos7\u7cfb\u7edf\u4e4b\u524d\u7ea6\u5b9a uid:0 \u7531\u8d85\u7ea7\u7528\u6237\u6216\u5177\u5907\u8d85\u7ea7\u7528\u6237\u6743\u9650\u7684\u7528\u6237\u521b\u5efa\u7684\u7528\u6237,\u4e0d\u53d7\u6743\u9650\u7684\u538b\u5236 ( \uffe3\u25bd\uffe3 ) uid:1~499 \u7cfb\u7edf\u865a\u62df\u7528\u6237,\u4e0d\u80fd\u767b\u5f55,\u4ee5\u67d0\u79cd\u8eab\u4efd\u8d77\u8fdb\u7a0b,\u8ba9\u8fdb\u7a0b\u62e5\u6709\u6743\u9650. uid:500-65535 \u666e\u901a\u7528\u6237 centos7\u7cfb\u7edf\u7ea6\u5b9a\uff1a uid:0 \u8d85\u7ea7\u7ba1\u7406\u5458,\u6700\u9ad8\u6743\u9650,\u6709\u7740\u6781\u5f3a\u7684\u7834\u574f\u80fd\u529b,\u4e0d\u53d7\u6743\u9650\u7684\u538b\u5236 ( \uffe3\u25bd\uffe3 ) uid:1~200 \u7cfb\u7edf\u7528\u6237,\u7528\u6765\u8fd0\u884c\u7cfb\u7edf\u81ea\u5e26\u7684\u8fdb\u7a0b,\u9ed8\u8ba4\u5df2\u521b\u5efa uid:201~999 \u7cfb\u7edf\u7528\u6237,\u7528\u6765\u8fd0\u884c\u5b89\u88c5\u7684\u7a0b\u5e8f,\u6240\u4ee5\u6b64\u7c7b\u7528\u6237\u65e0\u9700\u767b\u5f55\u7cfb\u7edf uid:1000+ \u666e\u901a\u7528\u6237,\u6b63\u5e38\u53ef\u4ee5\u767b\u5f55\u7cfb\u7edf\u7684\u7528\u6237,\u6743\u9650\u6bd4\u8f83\u5c0f,\u80fd\u6267\u884c\u7684\u4efb\u52a1\u6709\u9650 Ps: root\u8d85\u7ea7\u7528\u6237\u662f\u4e0d\u53d7\u6743\u9650\u538b\u5236\u7684! \u5373\u4fbf\u67d0\u4e2a\u6587\u4ef6\u5bf9\u5b83\u6765\u8bf4\u6ca1\u6709\u8bfb\u6743\u9650,\u5b83\u4e5f\u53ef\u4ee5\u8bfb. \u54ea\u6015\u6709\u4e9b\u6587\u4ef6\u80fd\u963b\u6b62\u5b83\u5bf9\u5176\u7684\u4fee\u6539,\u4f46root\u8d26\u6237\u662f\u53ef\u4ee5\u4fee\u6539\u6743\u9650\u7684!!!","title":"\u7528\u6237\u7ec4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_5","text":"\u7ec6\u5206\u5c5e\u4e3b u \u3001\u5c5e\u7ec4 g \u3001\u5176\u5b83\u4eba o \u5bf9\u6587\u4ef6\u7684\u6743\u9650: \u5c06\u7528\u6237\u5212\u5206\u4e3a\u4e09\u7c7b,\u4f7f\u4e0d\u540c\u7684\u89d2\u8272\u5bf9\u6b64\u6587\u4ef6\u90fd\u62e5\u6709\u76f8\u5bf9\u5e94\u7684\u6743\u9650. [ root@localhost ~ ] # ll /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 18 18 :12 /etc/passwd \"\"\" -rwxrw-r-- 1 egon IT 2351 7\u6708 18 18:12 /etc/passwd linux\u7cfb\u7edf\u628a\u6587\u4ef6\u6743\u9650\u5206\u4e3a\u4e86\u4e09\u7c7b:\u5c5e\u4e3b\u3001\u5c5e\u7ec4\u3001\u5176\u5b83\u4eba \u4e00\u4e2a\u7528\u6237\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u626b\u63cf\u7684\u4f18\u5148\u7ea7: \u25cb \u5148\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u4e3b \u25cb \u5728\u7b2c\u4e00\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u518d\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u7ec4 \u25cb \u5728\u7b2c\u4e8c\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u8be5\u7528\u6237\u5c5e\u4e8e\u5176\u4ed6\u4eba\u6743\u9650 \"\"\" 1 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65f6egon,egon\u6240\u5c5e\u7684\u90e8\u95e8\u662fIT\u90e8\u95e8. /etc/passwd\u7684\u62e5\u6709\u8005\u662fegon,\u90a3\u4e48egon\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u662frwx ; \u54ea\u6015egon\u5c5e\u4e8eIT\u90e8\u95e8,\u6587\u4ef6\u62e5\u6709\u8005\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e00\u4e9b. 2 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e0d\u662f\u6587\u4ef6\u7684\u62e5\u6709\u8005,\u662flili,lili\u662f\u5c5e\u4e8eIT\u90e8\u95e8\u7684,\u90a3\u4e48lili\u5bf9/etc/passwd\u7684\u6743\u9650\u4e3arw- 3 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65e2\u4e0d\u662f\u6587\u4ef6\u7684\u4e3b\u4eba,\u4e5f\u4e0d\u662fIT\u90e8\u95e8\u91cc\u7684,\u90a3\u4e48\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u4e3ar--","title":"\u7528\u6237\u89d2\u8272\u5212\u5206"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_6","text":"\u6587\u4ef6 \u76f8\u5173 /etc/passwd \u7528\u6237 /etc/shadow \u5bc6\u7801 /etc/group \u7ec4 /etc/gshadow \u7ec4\u5bc6\u7801 /etc/skel/ \u5bb6\u76ee\u5f55\u7684\u6a21\u7248 /home/\u7528\u6237\u540d \u7528\u6237\u7684\u5bb6\u76ee\u5f55 /var/spool/mail \u7528\u6237\u7684\u90ae\u7bb1\u6587\u4ef6","title":"\u7528\u6237\u4e0e\u7ec4\u76f8\u5173\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#etcpasswd","text":"useradd tom [ root@localhost ~ ] # head -1 /etc/passwd root:x:0:0:root:/root:/bin/bash \u6ce8\u610f: \u5728\u5b9e\u9a8c\u73af\u5883\u4e0b,\u5c06\u7b2c\u4e8c\u5217\u5bc6\u7801\u5360\u4f4d\u7b26\u8bbe\u7f6e\u4e3a\u7a7a..\u5c31\u4e0d\u9700\u8981\u5bc6\u7801\u767b\u5f55\u4e86... \u5728\u771f\u5b9e\u73af\u5883\u4e0b,\u8fd9\u662f\u5927\u5fcc!!!!!! root:x:0:0:root:/root:/bin/bash \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e867\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u540d/\u767b\u5f55\u540d 2 > \u7b2c\u4e8c\u5217: \u5bc6\u7801\u5360\u4f4d\u7b26, \u8fd9\u91cc\u662f\u4e00\u4e2ax, \u5176\u5b9e\u5bc6\u7801\u5df2\u88ab\u6620\u5c04\u5230/etc/shadow\u6587\u4ef6\u4e2d ; \u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u505a\uff1fBecause\u675c\u7edd\u5c06\u9e21\u86cb\u653e\u5728\u540c\u4e00\u4e2a\u7bee\u5b50\u91cc. \u90a3\u5c06\u5bc6\u7801\u52a0\u4e2a\u5bc6\u4e0d\u5c31\u884c\u4e86\u561b\uff1f\u5bc6\u7801\u5728\u53e6\u4e00\u4e2a\u7bee\u5b50/etc/shadow\u91cc\u786e\u5b9e\u52a0\u5bc6\u5566.\u5e76\u4e14\u9664\u4e86root,\u8c01\u4e5f\u6ca1\u6709\u6743\u9650. \u653e\u5728\u4e24\u4e2a\u7bee\u5b50\u91cc,\u9ed1\u5ba2\u8981\u7834\u89e3\u4e24\u4e2a\u6587\u4ef6\u7684\u6743\u9650,\u5e76\u4e14\u8981\u5bf9\u5bc6\u7801\u8fdb\u884c\u89e3\u5bc6.. [ root@localhost ~ ] # ll /etc/passwd -rw-r--r-- 1 root root 2351 7\u6708 18 18 :12 /etc/passwd [ root@localhost ~ ] # ll /etc/shadow ---------- 1 root root 1388 7\u6708 4 16 :53 /etc/shadow Ps:\u6d4f\u89c8\u5668\u5ba2\u6237\u7aef\u9ed8\u8ba4\u4f1a\u5c06\u8868\u5355\u91cc\u7684\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u540e\u518dpost\u7ed9\u670d\u52a1\u7aef.\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb. ( \u5373\u82e5C->S\u4f20\u8f93\u6570\u636e\u8fc7\u7a0b\u4e2d\u5305\u88ab\u622a\u83b7\u62ff\u8d70\u540e,\u4e2d\u95f4\u4eba\u4e0d\u80fd\u76f4\u63a5\u7528 ) \u5b9e\u5219,\u9ad8\u7ea7\u9ed1\u5ba2\u53ef\u4ee5\u81ea\u5df1\u5199\u6d4f\u89c8\u5668\u5ba2\u6237\u7aef,\u4e0d\u7136\u5176\u52a0\u5bc6,\u76f4\u63a5\u5bc6\u7801\u660e\u6587\u4f20\u8f93.. 3 > \u7b2c\u4e09\u5217: UID 4 > \u7b2c\u56db\u5217: GID 5 > \u7b2c\u4e94\u5217: \u7528\u6237\u7684\u63cf\u8ff0\u4fe1\u606f,\u53ef\u9009 6 > \u7b2c\u516d\u5217: \u7528\u6237\u7684\u5bb6\u76ee\u5f55\u6240\u5728\u4f4d\u7f6e ( \u5373\u4e2a\u4eba/\u79c1\u4eba\u6587\u4ef6\u5939 ) 7 > \u7b2c\u4e03\u5217: \u7528\u6237\u6240\u7528SHELL\u7684\u7c7b\u578b,\u4ee3\u8868\u7528\u6237\u767b\u5f55\u4e4b\u540e\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f /bin/bash \u767b\u5f55\u540e\u51fa\u73b0\u4ea4\u4e92\u5f0f\u7684\u754c\u9762,\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u547d\u4ee4 /sbin/nologin \u4e0d\u5141\u8bb8\u767b\u5f55.\u5c5e\u4e8e\u7cfb\u7edf\u7528\u6237. Ps: \u9664\u4e86/bin/bash\u6807\u8bc6\u7684\u7528\u6237\u5916,\u5176\u5b83\u90fd\u662f\u7cfb\u7edf\u7528\u6237..","title":"/etc/passwd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#etcshadow","text":"nobody:*:18353:0:99999:7::: onepiece:!!:19173:0:99999:7::: root: $ 6 $ l2UODot/le0BbEsQ9x7T0/ZUjclL9Zo7bjZ1::0:99999:7::: \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e869\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u540d/\u767b\u5f55\u540d,\u8fd9\u4e2a\u5b57\u6bb5\u662f\u975e\u7a7a\u7684 \u6587\u4ef6/etc/shadow\u4e0e/etc/passwd\u7684\u7528\u6237\u540d\u662f\u76f8\u540c\u7684,\u8fd9\u6837\u5c31\u5c06\u4e24\u6587\u4ef6\u7684\u7528\u6237\u8bb0\u5f55\u8054\u7cfb\u5230\u4e86\u4e00\u8d77 2 > \u7b2c\u4e8c\u5217: \u5bc6\u7801,\u8fd9\u4e2a\u5b57\u6bb5\u662f\u975e\u7a7a\u7684 * \u4ee3\u8868\u662f\u7cfb\u7edf\u7528\u6237/\u4e0d\u80fd\u767b\u5f55\u7684\u7528\u6237 !! \u4ee3\u8868\u8fd8\u672a\u8bbe\u7f6e\u5bc6\u7801,\u8d26\u53f7\u6ca1\u6709\u5bc6\u7801\u538b\u6839\u662f\u767b\u5f55\u4e0d\u4e0a\u7684 \u4e00\u5806\u5b57\u7b26\u4e32 \u52a0\u5bc6\u5bc6\u7801 3 > \u7b2c\u4e09\u5217: \u6700\u8fd1\u4fee\u6539\u5bc6\u7801\u7684\u65f6\u95f4 \u8fd9\u4e2a\u65f6\u95f4\u662f\u4eceUNIX\u5143\u5e741970\u5e7401\u670801\u65e5\u7b97\u8d77\u5230\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\u53e3\u4ee4/\u5bc6\u7801\u7684\u65f6\u95f4\u95f4\u9694 ( \u5929\u6570 ) \u60a8\u53ef\u4ee5\u901a\u8fc7passwd\u547d\u4ee4\u6765\u4fee\u6539\u7528\u6237\u7684\u5bc6\u7801,\u7136\u540e\u67e5\u770b/etc/shadow\u4e2d\u6b64\u5b57\u6bb5\u7684\u53d8\u5316 4 > \u7b2c\u56db\u5217: \u7528\u6237\u5bc6\u7801\u6700\u5c11\u591a\u5c11\u5929\u624d\u80fd\u4fee\u6539,\u5982\u679c\u8bbe\u7f6e\u4e3a0,\u5219\u7981\u7528\u6b64\u529f\u80fd. \u9ed8\u8ba4\u503c\u662f\u901a\u8fc7\u8bbe\u7f6e/etc/login.defs\u6587\u4ef6\u4e2d\u7684PASS_MIN_DAYS\u5b57\u6bb5\u8fdb\u884c\u5b9a\u4e49. 5 > \u7b2c\u4e94\u5217: \u6700\u591a\u591a\u5c11\u5929\u5c31\u5fc5\u987b\u6539\u5bc6\u7801\u4e86. \u9ed8\u8ba4\u503c\u662f\u901a\u8fc7\u8bbe\u7f6e/etc/login.defs\u6587\u4ef6\u4e2d\u7684PASS_MAX_DAYS\u5b57\u6bb5\u8fdb\u884c\u5b9a\u4e49. 6 > \u7b2c\u516d\u5217: \u63d0\u524d\u591a\u5c11\u5929\u544a\u77e5\u7528\u6237\u5bc6\u7801\u5c06\u8fc7\u671f. \u9ed8\u8ba4\u503c\u662f\u901a\u8fc7\u8bbe\u7f6e/etc/login.defs\u6587\u4ef6\u4e2d\u7684PASS_WARN_AGE\u5b57\u6bb5\u8fdb\u884c\u5b9a\u4e49. 7 > \u7b2c\u4e03\u5217: \u5728\u8d26\u53f7\u5931\u6548\u65e5\u671f\u5230\u4e86\u540e,\u8fd8\u53ef\u4ee5\u4f7f\u7528\u51e0\u5929. 8 > \u7b2c\u516b\u5217: \u8d26\u53f7\u5931\u6548\u65e5\u671f.\u82e5\u6b64\u5b57\u6bb5\u7684\u503c\u4e3a\u7a7a,\u8868\u660e\u5e10\u53f7\u6c38\u4e45\u53ef\u7528 ; 9 > \u7b2c\u4e5d\u5217: \u4fdd\u7559\u5b57\u6bb5,\u76ee\u524d\u4e3a\u7a7a,\u4ee5\u5907\u5c06\u6765Linux\u6269\u5c55\u4e4b\u7528 Ps: man shadow\u6765\u67e5\u770b\u5e2e\u52a9\u53ef\u4f1a\u5f97\u5230\u66f4\u4e3a\u8be6\u5c3d\u7684\u8d44\u6599.","title":"/etc/shadow"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#etcgroup","text":"\u6bcf\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u8be5\u7528\u6237\u7684\u4e3b\u7ec4,\u4e3b\u7ec4\u7684\u540d\u5b57\u4e0e\u7528\u6237\u540d\u76f8\u540c! (\u5373 useradd tom \u521b\u5efatom\u7528\u6237\u7684\u540c\u65f6\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3atom\u7684\u7ec4) [ root@localhost ~ ] # head -1 /etc/group root:x:0: \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e864\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u7ec4\u7684\u540d\u79f0 2 > \u7b2c\u4e8c\u5217: \u7528\u6237\u7ec4\u7684\u5bc6\u7801\u5360\u4f4d\u7b26 /etc/group\u7684\u5f71\u5b50\u6587\u4ef6\u662f/etc/gshadow 3 > \u7b2c\u4e09\u5217: \u7528\u6237\u7ec4\u7684ID/GID. \u6ce8\u610f:\u5458\u5de5\u7f16\u53f7001\u548c\u5176\u6240\u5728\u90e8\u95e8\u7684001\u7f16\u53f7\u662f\u4e24\u4e2a\u610f\u601d. 4 > \u7b2c\u56db\u5217: \u7ec4\u91cc\u6709\u54ea\u4e9b\u6210\u5458.\u7528\u9017\u53f7\u5206\u9694. \u82e5\u4e3a\u7a7a,\u4ee3\u8868\u4e0e\u8be5\u7528\u6237\u7ec4\u540d\u79f0\u540c\u540d\u7684\u7528\u6237\u7684\u9644\u52a0\u7ec4\u4e0e\u4e3b\u7ec4\u4e00\u6837. \u82e5\u4e0d\u4e3a\u7a7a,\u4f1a\u5c06\u8be5\u7ec4\u6dfb\u52a0\u5230\u7ec4\u6210\u5458\u7684\u9644\u52a0\u7ec4\u91cc. \u25b3 \u4e3atom\u7528\u6237\u7ec4\u6dfb\u52a0\u7ec4\u6210\u5458 \u4fee\u6539/etc/group\u6587\u4ef6\u5373\u53ef [ root@localhost ~ ] # tail -1 /etc/group tom:x:1003:dc,egon [ root@localhost ~ ] # id dc uid = 1001 ( dc ) gid = 1001 ( dc ) \u7ec4 = 1001 ( dc ) ,1003 ( tom ) [ root@localhost ~ ] # id egon uid = 1002 ( root ) gid = 1002 ( root ) \u7ec4 = 1002 ( root ) ,1003 ( tom )","title":"/etc/group"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#etcgshadow","text":"[ root@localhost ~ ] # tail -1 /etc/gshadow dc:!:: \u4ee5:\u4e3a\u5206\u9694\u7b26,\u5206\u4e3a\u4e864\u5217 1 > \u7b2c\u4e00\u5217: \u7528\u6237\u7ec4\u7684\u540d\u79f0 2 > \u7b2c\u4e8c\u5217: \u7528\u6237\u7ec4\u7684\u5bc6\u7801 \u82e5\u4e3a\u7a7a\u6216! \u8868\u660e\u6ca1\u6709\u5bc6\u7801 3 > \u7b2c\u4e09\u5217: \u7528\u6237\u7ec4\u7ba1\u7406\u5458,\u7ec4\u957f \u8fd9\u4e2a\u5b57\u6bb5\u53ef\u4e3a\u7a7a \u82e5\u6709\u591a\u4e2a\u7528\u6237\u7ec4\u7ba1\u7406\u5458,\u7528\u9017\u53f7\u5206\u9694 4 > \u7b2c\u56db\u5217: \u7ec4\u91cc\u6709\u54ea\u4e9b\u6210\u5458.\u7528\u9017\u53f7\u5206\u9694. [ root@localhost ~ ] # ll /etc/gshadow ---------- 1 root root 800 7\u6708 4 16 :51 /etc/gshadow","title":"/etc/gshadow"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_7","text":"/etc/skel/ \u5bb6\u76ee\u5f55\u7684\u6a21\u7248 /home/\u7528\u6237\u540d \u7528\u6237\u7684\u5bb6\u76ee\u5f55 /var/spool/mail \u7528\u6237\u7684\u90ae\u7bb1\u6587\u4ef6 [/etc/skel] \u521b\u5efa\u4e00\u4e2a\u7528\u6237\u5728\u8be5\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b\u4ea7\u751f\u7684\u521d\u59cb\u6587\u4ef6\u90fd\u4f1a\u4ece\u8fd9\u4e2a\u8def\u5f84\u4e0b\u63d0\u53d6. \u5373\u4f1a\u5c06\u6b64\u8def\u5f84\u4e0b\u7684\u4e00\u5806\u6a21\u7248\u6587\u4ef6\u76f4\u63a5\u590d\u5236\u5230\u521b\u5efa\u7684\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b. [ root@localhost ~ ] # ll -a /etc/skel/ \u603b\u7528\u91cf 24 drwxr-xr-x. 3 root root 78 6\u6708 30 23 :41 . drwxr-xr-x. 144 root root 8192 7\u6708 22 11 :47 .. -rw-r--r--. 1 root root 18 11\u6708 25 2021 .bash_logout -rw-r--r--. 1 root root 193 11\u6708 25 2021 .bash_profile -rw-r--r--. 1 root root 231 11\u6708 25 2021 .bashrc drwxr-xr-x. 4 root root 39 6\u6708 30 18 :17 .mozilla [/etc/\u7528\u6237\u540d] [ root@localhost ~ ] # ll /home \u603b\u7528\u91cf 4 drwx------ 5 dc dc 205 7\u6708 8 18 :36 dc drwx------. 15 onepiece onepiece 4096 6\u6708 30 22 :54 onepiece [ root@localhost ~ ] # ll -a /home/dc \u603b\u7528\u91cf 40 drwx------ 5 dc dc 205 7\u6708 8 18 :36 . # \u5f53\u524d\u6587\u4ef6\u76ee\u5f55\u7684\u786c\u94fe\u63a5 drwxr-xr-x. 4 root root 32 7\u6708 4 16 :51 .. # \u4e0a\u4e00\u7ea7\u6587\u4ef6\u76ee\u5f55\u7684\u786c\u94fe\u63a5 -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 a.txt -rw-r--r-- 1 dc dc 12288 7\u6708 8 18 :36 .a.txt.swp -rw------- 1 dc dc 992 7\u6708 8 18 :36 .bash_history -rw-r--r-- 1 dc dc 18 11\u6708 25 2021 .bash_logout -rw-r--r-- 1 dc dc 193 11\u6708 25 2021 .bash_profile -rw-r--r-- 1 dc dc 231 11\u6708 25 2021 .bashrc drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .cache drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .config -rw------- 1 dc dc 39 7\u6708 6 22 :34 .lesshst drwxr-xr-x 4 dc dc 39 6\u6708 30 18 :17 .mozilla -rw------- 1 dc dc 1920 7\u6708 8 18 :36 .viminfo -rw-rw-r-- 1 dc dc 21 7\u6708 8 18 :35 .vimrc [/var/spool/mail] [ root@localhost ~ ] # ll -a /var/spool/mail \u603b\u7528\u91cf 0 drwxrwxr-x. 2 root mail 43 7\u6708 4 16 :51 . drwxr-xr-x. 12 root root 140 6\u6708 30 18 :25 .. -rw-rw---- 1 dc mail 0 7\u6708 4 16 :51 dc -rw-rw----. 1 onepiece mail 0 6\u6708 30 18 :55 onepiece -rw-rw----. 1 rpc mail 0 6\u6708 30 18 :20 rpc [ root@localhost ~ ] # ll -a /var/spool/mail/dc -rw-rw---- 1 dc mail 0 7\u6708 4 16 :51 /var/spool/mail/dc","title":"\u5176\u5b83"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_8","text":"\u5b9e\u9a8c\u76ee\u6807: \u901a\u8fc7\u4fee\u6539\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u540d\u4e3alufei\u7684\u7528\u6237 \u56db\u5927\u6b65\u9aa4. \u25b2 \u51c6\u5907\u7528\u6237\u4fe1\u606f [ root@localhost ~ ] # tail -1 /etc/passwd lufei:x:1004:1004::/home/lufei:/bin/bash \"\"\" \u53ef\u4ee5\u5236\u4f5c\u5bc6\u7801 openssl passwd\u7684\u4f5c\u7528\u662f\u7528\u6765\u8ba1\u7b97\u5bc6\u7801hash\u7684,\u76ee\u7684\u662f\u4e3a\u4e86\u9632\u6b62\u5bc6\u7801\u4ee5\u660e\u6587\u7684\u5f62\u5f0f\u51fa\u73b0\u3002 \u8bed\u6cd5\u683c\u5f0f: openssl passwd [option] passwd -1: \u8868\u793a\u91c7\u7528\u7684\u662fMD5\u52a0\u5bc6\u7b97\u6cd5\u3002 -salt: \u6307\u5b9asalt\u503c,\u4e0d\u4f7f\u7528\u968f\u673a\u4ea7\u751f\u7684salt. \u5728\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u65f6,\u5373\u4f7f\u5bc6\u7801\u4e00\u6837,salt\u4e0d\u4e00\u6837,\u6240\u8ba1\u7b97\u51fa\u6765\u7684hash\u503c\u4e5f\u4e0d\u4e00\u6837. \u9664\u975e\u5bc6\u7801\u4e00\u6837,salt\u503c\u4e5f\u4e00\u6837,\u8ba1\u7b97\u51fa\u6765\u7684hash\u503c\u624d\u4e00\u6837.salt\u4e3a8\u5b57\u8282\u7684\u5b57\u7b26\u4e32. \"\"\" ## \u6ce8\u610f'i have a dream' \u4e0d\u662f\u5bc6\u7801\u800c\u662f\u5bc6\u7801\u7684\u76d0,\u5207\u8bb0\u5bc6\u7801\u7684\u76d0\u91cc\u4e0d\u8981\u6709\u4e2d\u6587 [ root@localhost ~ ] # openssl passwd -1 -salt 'i have a dream' Password: ##\u8fd9\u91cc\u8f93\u5165\u7684\u662f\u5bc6\u7801123456 $1$i have a $UEsc7yzrB5DWmTvxRpTsp . ##\u8fd9\u662f\u751f\u6210\u7684\u5bc6\u6587\u5bc6\u7801 [ root@localhost ~ ] # vim /etc/shadow [ root@localhost ~ ] # tail -1 /etc/shadow ##\u653e\u660e\u6587\u5bc6\u7801\u662f\u65e0\u6548\u7684 lufei: $1$i have a $UEsc7yzrB5DWmTvxRpTsp .:19177:0:99999:7::: \u25b2 \u51c6\u5907\u7ec4\u4fe1\u606f [ root@localhost ~ ] # tail -1 /etc/group lufei:x:1004: [ root@localhost ~ ] # tail -1 /etc/gshadow lufei:!:: \u25b2 \u51c6\u5907\u5bb6\u76ee\u5f55 [ root@localhost ~ ] # mkdir /home/lufei [ root@localhost ~ ] # ll /home \u603b\u7528\u91cf 4 drwx------ 5 dc dc 205 7\u6708 8 18 :36 dc drwxr-xr-x 2 root root 6 7\u6708 25 09 :11 lufei drwx------. 15 onepiece onepiece 4096 6\u6708 30 22 :54 onepiece [ root@localhost ~ ] # chown lufei.lufei /home/lufei [ root@localhost ~ ] # chmod 700 /home/lufei [ root@localhost ~ ] # ll /home \u603b\u7528\u91cf 4 drwx------ 5 dc dc 205 7\u6708 8 18 :36 dc drwx------ 2 lufei lufei 6 7\u6708 25 09 :11 lufei drwx------. 15 onepiece onepiece 4096 6\u6708 30 22 :54 onepiece [ root@localhost ~ ] # ll -a /home/dc \u603b\u7528\u91cf 40 drwx------ 5 dc dc 205 7\u6708 8 18 :36 . drwxr-xr-x. 5 root root 45 7\u6708 25 09 :11 .. -rw-rw-r-- 1 dc dc 0 7\u6708 6 21 :34 a.txt -rw-r--r-- 1 dc dc 12288 7\u6708 8 18 :36 .a.txt.swp -rw------- 1 dc dc 992 7\u6708 8 18 :36 .bash_history # \u6b64\u6587\u4ef6\u81ea\u52a8\u4ea7\u751f,\u4e0e\u5386\u53f2\u8bb0\u5f55\u6709\u5173 -rw-r--r-- 1 dc dc 18 11\u6708 25 2021 .bash_logout -rw-r--r-- 1 dc dc 193 11\u6708 25 2021 .bash_profile -rw-r--r-- 1 dc dc 231 11\u6708 25 2021 .bashrc drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .cache drwxrwxr-x 3 dc dc 18 7\u6708 4 16 :57 .config -rw------- 1 dc dc 39 7\u6708 6 22 :34 .lesshst drwxr-xr-x 4 dc dc 39 6\u6708 30 18 :17 .mozilla -rw------- 1 dc dc 1920 7\u6708 8 18 :36 .viminfo -rw-rw-r-- 1 dc dc 21 7\u6708 8 18 :35 .vimrc \"\"\" .[!.]* []\u4e2d\u62ec\u53f7\u4ee3\u8868\u53d6\u5176\u4e2d\u4e4b\u4e00 !\u611f\u53f9\u53f7\u4ee3\u8868\u53d6\u53cd \u7b2c\u4e00\u4e2a\u662f\u70b9 \u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e0d\u662f\u70b9 \u5176\u4f59\u7684\u5b57\u7b26\u7231\u5565\u662f\u5565 \"\"\" [ root@localhost ~ ] # cp -ra /etc/skel/.[!.]* /home/lufei [ root@localhost ~ ] # ll -a /home/lufei \u603b\u7528\u91cf 12 drwx------ 3 lufei lufei 78 7\u6708 25 09 :26 . drwxr-xr-x. 5 root root 45 7\u6708 25 09 :11 .. -rw-r--r--. 1 root root 18 11\u6708 25 2021 .bash_logout -rw-r--r--. 1 root root 193 11\u6708 25 2021 .bash_profile -rw-r--r--. 1 root root 231 11\u6708 25 2021 .bashrc drwxr-xr-x. 4 root root 95 7\u6708 25 09 :17 .mozilla [ root@localhost ~ ] # chown lufei.lufei /home/lufei/.[!.]* [ root@localhost ~ ] # ll -a /home/lufei \u603b\u7528\u91cf 12 drwx------ 3 lufei lufei 78 7\u6708 25 09 :26 . drwxr-xr-x. 5 root root 45 7\u6708 25 09 :11 .. -rw-r--r--. 1 lufei lufei 18 11\u6708 25 2021 .bash_logout -rw-r--r--. 1 lufei lufei 193 11\u6708 25 2021 .bash_profile -rw-r--r--. 1 lufei lufei 231 11\u6708 25 2021 .bashrc drwxr-xr-x. 4 lufei lufei 95 7\u6708 25 09 :17 .mozilla \u25b2 \u51c6\u5907\u90ae\u7bb1 [ root@localhost ~ ] # ll /var/spool/mail/dc -rw-rw---- 1 dc mail 0 7\u6708 4 16 :51 /var/spool/mail/dc [ root@localhost ~ ] # touch /var/spool/mail/lufei [ root@localhost ~ ] # ll /var/spool/mail/lufei -rw-r--r-- 1 root root 0 7\u6708 25 09 :32 /var/spool/mail/lufei [ root@localhost ~ ] # chmod 660 /var/spool/mail/lufei [ root@localhost ~ ] # chown lufei.mail /var/spool/mail/lufei [ root@localhost ~ ] # ll /var/spool/mail/lufei -rw-rw---- 1 lufei mail 0 7\u6708 25 09 :32 /var/spool/mail/lufei \u25b2 \u9a8c\u8bc1 [ root@localhost ~ ] # exit \u767b\u51fa Connection to 172 .16.150.131 closed. One_Piece@DCdeMacBook-Air ~ % ssh lufei@172.16.150.131 lufei@172.16.150.131 ' s password: ## \u5bc6\u7801\u4e3a123456 Last login: Mon Jul 25 09 :40:07 2022 from 172 .16.150.1 [ lufei@localhost ~ ] $","title":"\u624b\u52a8\u521b\u5efa\u7528\u6237"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_9","text":"","title":"\u7528\u6237\u7ba1\u7406\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#useradd","text":"\u6dfb\u52a0\u7528\u6237 \u5f53\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u65f6,\u82e5\u6ca1\u6709\u6307\u5b9a\u7528\u6237\u7684\u4e3b\u7ec4,\u5c06\u4f1a\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u7684\u7ec4\u4f5c\u4e3a\u7528\u6237\u7684\u4e3b\u7ec4. \u5373\u5728 useradd user1 \u7684\u540c\u65f6,\u4f1a\u9ed8\u8ba4\u6267\u884c\u4e24\u6761\u547d\u4ee4: groupadd user1 ; usermod -g user1 user1 \u6572\u9ed1\u677f\uff01linux \u89c4\u5b9a \u4e00\u4e2a\u7528\u6237\u5fc5\u987b\u5728\u4e00\u4e2a\u7ec4\u5185,\u8be5\u7ec4\u79f0\u4e4b\u4e3a\u5b83\u7684\u4e3b\u7ec4. [\u4e00\u822c\u60c5\u51b5] \u25cb \u521b\u5efa\u7528\u6237 [ root@localhost ~ ] # useradd user1 \u25cb \u67e5\u770b\u7528\u6237 1 > ` id ` \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f 2 > ` id \u7528\u6237\u540d ` \u67e5\u770b\u6307\u5b9a\u7528\u6237\u7684\u4fe1\u606f [ root@localhost ~ ] # id uid = 0 ( root ) gid = 0 ( root ) \u7ec4 = 0 ( root ) [ root@localhost ~ ] # id user1 uid = 2001 ( user1 ) gid = 2001 ( user1 ) \u7ec4 = 2001 ( user1 ) \u25cb \u8bbe\u5b9a\u4e0e\u4fee\u6539\u5bc6\u7801 1 > passwd # \u9ed8\u8ba4\u7ed9\u5f53\u524d\u5f53\u524d\u767b\u5f55\u7528\u6237\u4fee\u6539\u5bc6\u7801 2 > # root\u7528\u6237\u53ef\u4ee5\u7ed9\u81ea\u5df1\u4ee5\u53ca\u6240\u6709\u5176\u4ed6\u7528\u6237\u8bbe\u5b9a\u5bc6\u7801,\u666e\u901a\u7528\u6237\u53ea\u80fd\u8bbe\u5b9a\u81ea\u5df1\u7684\u5bc6\u7801 passwd \u7528\u6237\u540d # \u4ea4\u4e92\u5f0f echo \"\u5bc6\u7801\" | passwd --stdin \u7528\u6237\u540d # \u975e\u4ea4\u4e92\u5f0f,\u6b64\u547d\u4ee4\u53ea\u6709root\u7528\u6237\u80fd\u4f7f\u7528 [ root@localhost ~ ] # echo \"123456\" | passwd --stdin user1 \u66f4\u6539\u7528\u6237user1 \u7684\u5bc6\u7801 passwd: \u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0 \u25cb \u67e5\u770b\u767b\u5f55\u7528\u6237\u4fe1\u606f \"\"\" whoami \u67e5\u770b\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u540d who \u67e5\u770b\u6240\u6709\u767b\u5f55\u7684\u7528\u6237\u4fe1\u606f \"\"\" [ root@localhost ~ ] # whoami root [ root@localhost ~ ] # who root :0 2022 -07-22 11 :40 ( :0 ) user1 pts/0 2022 -07-25 11 :00 ( 172 .16.150.1 ) lufei pts/1 2022 -07-25 10 :37 ( 172 .16.150.1 ) root pts/2 2022 -07-25 10 :54 ( 172 .16.150.1 ) dc pts/3 2022 -07-25 10 :55 ( 172 .16.150.1 ) [\u6307\u5b9a\u9009\u9879] \"\"\" \u529f\u80fd: \u65b0\u589e\u4e00\u4e2a\u7528\u6237. \u4e86\u89e3useradd\u547d\u4ee4\u7684\u5e38\u7528\u9009\u9879: \u2013u: \u6307\u5b9a\u7528\u6237\u7684UID \u2013g: \u6307\u5b9a\u7528\u6237\u6240\u5c5e\u7684\u4e3b\u7ec4 \u2013G: \u6307\u5b9a\u7528\u6237\u6240\u5c5e\u7684\u9644\u52a0\u7ec4 \u2013d: \u6307\u5b9a\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u2013c: \u6307\u5b9a\u7528\u6237\u7684\u5907\u6ce8\u4fe1\u606f \u2013s: \u6307\u5b9a\u7528\u6237\u6240\u7528\u7684shell -e: \u8d26\u53f7\u5931\u6548\u65e5\u671f -M: \u4e0d\u521b\u5efa\u5bb6\u76ee\u5f55,\u901a\u5e38\u5e94\u7528\u4e8e\u7cfb\u7edf\u7528\u6237,\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf -r: \u521b\u5efa\u7cfb\u7edf\u8d26\u6237,uid\u5e94\u5904\u4e8e\u7cfb\u7edf\u7528\u6237\u8303\u56f4\u5185(1000\u4ee5\u5185),\u9ed8\u8ba4\u5c31\u6ca1\u6709\u5bb6\u76ee\u5f55 \"\"\" ## \u6307\u5b9a\u9009\u9879\u521b\u5efa\u7528\u6237\u65f6\u5019,\u521b\u5efa\u7528\u6237\u7684\u4e3b\u7ec4\u548c\u9644\u52a0\u7ec4\u5bf9\u5e94\u7684\u7528\u6237\u7ec4\u5fc5\u987b\u4e8b\u5148\u5b58\u5728. [ root@localhost ~ ] # groupadd group1 [ root@localhost ~ ] # cat /etc/group | grep 1004 lufei:x:1004: [ root@localhost ~ ] # grep group1 /etc/group group1:x:1005: [ root@localhost ~ ] # useradd -u 2000 -g 1005 -G 1004 -d /home/likui -c \"\u8fd9\u662f\u674e\u9035\" -e \"2022-12-12\" -s /sbin/nologin likui [ root@localhost ~ ] # cat /etc/passwd | grep likui likui:x:2000:1005:\u8fd9\u662f\u674e\u9035:/home/likui:/sbin/nologin [ root@localhost ~ ] # id likui uid = 2000 ( likui ) gid = 1005 ( group1 ) \u7ec4 = 1005 ( group1 ) ,1004 ( lufei ) [ root@localhost ~ ] # grep 1004 /etc/group lufei:x:1004:likui [ root@localhost ~ ] # echo \"123456\" | passwd --stdin likui \u66f4\u6539\u7528\u6237 likui \u7684\u5bc6\u7801. passwd\uff1a\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0. !!!\u54ea\u6015\u4e3a\u674e\u9035\u8d26\u53f7\u8bbe\u7f6e\u4e86\u5bc6\u7801. \u767b\u5f55\u65f6\u4f1a\u663e\u793aThis account is currently not available.\u5f53\u524d\u8d26\u53f7\u4e0d\u53ef\u7528.Hhhh \u56e0\u4e3alikui\u767b\u5f55\u65f6\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f\u662f/sbin/nologin \u5b9e\u9645\u4e0a,\u5728\u5de5\u4f5c\u4e2d\u901a\u5e38\u4f1a\u901a\u8fc7\u9009\u9879 -r -s -M \u9020\u51fa\u4e00\u4e2a\u7cfb\u7edf\u7528\u6237,\u4e0d\u8ba9\u5176\u767b\u64cd\u4f5c\u7cfb\u7edf,\u7528\u4e8e\u542f\u8f6f\u4ef6\u670d\u52a1\u7528\u7684. \u56e0\u4e3a\u7cfb\u7edf\u6bcf\u591a\u4e00\u4e2a\u53ef\u767b\u5f55\u7684\u7528\u6237,\u5c31\u591a\u4e00\u4efd\u98ce\u9669.. \u6240\u4ee5\u4e00\u822c\u4e0d\u4f1a -u -g. ## \u521b\u5efa\u666e\u901a\u7528\u6237,\u4f46\u662f\u6ca1\u6709\u5bb6\u76ee\u5f55,\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf useradd -M -s /sbin/nologin xxx ## yyy\u5c5e\u4e8e\u7cfb\u7edf\u7528\u6237,uid\u5904\u4e8e\u7cfb\u7edf\u7528\u6237uid\u8303\u56f4\u5185 useradd -r -s /sbin/nologin yyy ## zzz\u5c5e\u4e8e\u7cfb\u7edf\u7528\u6237,uid\u5904\u4e8e\u7cfb\u7edf\u7528\u6237uid\u8303\u56f4\u5185,\u6ca1\u6709\u5bb6\u76ee\u5f55,\u4e0d\u80fd\u767b\u5f55\u7cfb\u7edf useradd -M -r -s /sbin/nologin zzz Ps: useradd\u521b\u5efa\u7528\u6237\u65f6,\u5bf9\u4e8e\u672a\u6307\u5b9a\u7684\u9009\u9879(-u\u3001-g\u7b49\u7b49), \u4f1a\u4ee5 /etc/login.defs \u3001 /etc/default/useradd \u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u4f5c\u4e3a\u53c2\u7167\u7269, \u8be6\u89c1 https://zhuanlan.zhihu.com/p/329789819","title":"useradd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#userdel","text":"\u5220\u9664\u7528\u6237 userdel user1 # \u5220\u9664\u7528\u6237user1,\u4f46\u4e0d\u5220\u9664\u7528\u6237\u5bb6\u76ee\u5f55\u548cmail userdel -r user1 # \u8981\u60f3\u5220\u5f7b\u5e95,\u52a0-r\u9009\u9879 Ps: \u5220\u9664likui\u7528\u6237,\u662f\u5220\u4e0d\u5e72\u51c0\u7684.\u521b\u5efalikui\u7528\u6237\u65f6\u624b\u52a8\u521b\u5efa\u7684\u7528\u6237\u7ec4\u4e0d\u4f1a\u81ea\u52a8\u5220\u9664. \u54ea\u6015\u5728\u521b\u5efalikui\u7528\u6237\u65f6,\u5f88\u7ec6\u8282\u7684\u6307\u5b9a\u4e86\u4e3b\u7ec4\u540d\u4e0e\u7528\u6237\u540d\u4e00\u6837,\u4e5f\u4e0d\u4f1a\u81ea\u52a8\u5220\u9664. So,\u6700\u597d\u4f7f\u7528useradd\u547d\u4ee4\u7684\u9ed8\u8ba4\u9009\u9879. \u5176\u5b9e\u6700\u91cd\u8981\u7684\u4e00\u70b9\u5c31\u662f\u8981\u660e\u767d\u54ea\u4e9b\u6587\u4ef6\u4e0e\u7528\u6237\u548c\u7ec4\u76f8\u5173!\u6ca1\u5220\u5e72\u51c0,\u5bf9\u5e94\u5220\u9664\u5c31\u597d\u5566!!!","title":"userdel"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#usermod","text":"\u4fee\u6539\u7528\u6237 ## \u540cuseradd\u53c2\u6570\u57fa\u4e00\u81f4,\u53ea\u4e0d\u8fc7useradd\u662f\u6dfb\u52a0,usermod\u662f\u4fee\u6539 -u \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u7684UID -g \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u4e3b\u7ec4 -G !!\u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u9644\u52a0\u7ec4,\u4f7f\u7528\u9017\u53f7\u9694\u5f00\u591a\u4e2a\u9644\u52a0\u7ec4 -a !!\u4ec5\u4e0e-G\u9009\u9879\u4e00\u8d77\u4f7f\u7528,\u4fee\u6539\u9644\u52a0\u7ec4. \u52a0-a\u6dfb\u52a0,\u4e0d\u52a0-a\u4ee3\u8868\u8986\u76d6 -d \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u5bb6\u76ee\u5f55 -c \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u6ce8\u91ca\u4fe1\u606f -s \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u7684bash shell -e \u4fee\u6539\u8fc7\u671f\u65f6\u95f4 -l \u6307\u5b9a\u8981\u4fee\u6539\u7528\u6237\u7684\u767b\u9646\u540d -L \u6307\u5b9a\u8981\u9501\u5b9a\u7684\u7528\u6237,\u6548\u679c -- \u65e0\u6cd5\u767b\u5f55 -U \u6307\u5b9a\u8981\u89e3\u9501\u7684\u7528\u6237 \u25b2 \u521b\u5efatom\u7528\u6237,\u4e3b\u7ec4\u4e3atom,\u9644\u52a0\u7ec4\u4e3ait\u3001sala\u3001hr [ root@localhost ~ ] # useradd tom [ root@localhost ~ ] # id tom uid = 2002 ( tom ) gid = 2002 ( tom ) \u7ec4 = 2002 ( tom ) [ root@localhost ~ ] # groupadd it [ root@localhost ~ ] # groupadd sale [ root@localhost ~ ] # groupadd hr [ root@localhost ~ ] # usermod -a -G it,sale,hr tom [ root@localhost ~ ] # id tom uid = 2002 ( tom ) gid = 2002 ( tom ) \u7ec4 = 2002 ( tom ) ,2003 ( it ) ,2004 ( sale ) ,2005 ( hr ) ## \u76f4\u63a5\u5e72\u6587\u4ef6\u4e5f\u9614\u4ee5\uff01\u4e5f\u80fd\u8fbe\u5230\u540c\u6837\u7684\u6548\u679c. [ root@localhost ~ ] # grep tom /etc/group tom:x:2002: it:x:2003:tom sale:x:2004:tom hr:x:2005:tom [ root@localhost ~ ] # grep tom /etc/gshadow tom:!:: it:!::tom sale:!::tom hr:!::tom \u25b2 \u4fee\u6539tom\u7528\u6237\u7684\u7528\u6237\u540d\u4e3aTOM [ root@localhost ~ ] # usermod -l TOM tom [ root@localhost ~ ] # id TOM uid = 2002 ( TOM ) gid = 2002 ( tom ) \u7ec4 = 2002 ( tom ) ,2003 ( it ) ,2004 ( sale ) ,2005 ( hr ) \u25b2 \u7ed9TOM\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\u4e3a123456. \u5e76\u9501\u5b9aTOM\u7528\u6237 ( \u6548\u679c:\u767b\u5f55\u4e0d\u4e0a ) /\u89e3\u9501TOM\u7528\u6237 [ root@localhost ~ ] # passwd TOM \u66f4\u6539\u7528\u6237TOM\u7684\u5bc6\u7801 \u65b0\u7684\u5bc6\u7801: \u65e0\u6548\u7684\u5bc6\u7801:\u5bc6\u7801\u5c11\u4e8e8\u4e2a\u5b57\u7b26 \u91cd\u65b0\u8f93\u5165\u65b0\u7684\u5bc6\u7801: passwd:\u6240\u6709\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5df2\u7ecf\u6210\u529f\u66f4\u65b0 [ root@localhost ~ ] # usermod -L TOM [ root@localhost ~ ] # usermod -U TOM","title":"usermod"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_10","text":"","title":"\u7ec4\u7ba1\u7406\u547d\u4ee4"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#groupadd","text":"\u521b\u5efa\u7ec4 groupadd \u7ec4\u540d -- \u521b\u5efa\u57fa\u672c\u7ec4,\u4e0d\u6307\u5b9aGID groupadd -r \u7ec4\u540d -- \u521b\u5efa\u7cfb\u7edf\u7ec4,GID\u8303\u56f4201-999 groupadd -g GID\u53f7 \u7ec4\u540d -- \u521b\u5efa\u57fa\u672c\u7ec4,\u6307\u5b9aGID\u53f7 [ root@localhost ~ ] # groupadd gg1 [ root@localhost ~ ] # groupadd -r gg2 [ root@localhost ~ ] # groupadd -g 5555 gg3 [ root@localhost ~ ] # tail -3 /etc/group gg1:x:2006: gg2:x:981: gg3:x:5555:","title":"groupadd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#groupmod","text":"\u4fee\u6539\u7ec4 groupmod -g GID\u53f7 \u7ec4\u540d -- \u4fee\u6539\u7ec4\u7684GID\u53f7 groupmod -n \u65b0\u7ec4\u540d \u65e7\u7ec4\u540d -- \u4fee\u6539\u7ec4\u7684\u7ec4\u540d [ root@localhost ~ ] # groupmod -g 1111 gg3 [ root@localhost ~ ] # grep gg3 /etc/group gg3:x:1111: [ root@localhost ~ ] # groupmod -n new_gg3 gg3 [ root@localhost ~ ] # grep new_gg3 /etc/group new_gg3:x:1111:","title":"groupmod"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#groupdel","text":"\u5220\u9664\u7ec4 \u5982\u679c\u4e00\u4e2a\u7ec4\u662f\u4e00\u4e2a\u7528\u6237\u7684\u4e3b\u7ec4,\u90a3\u4e48\u8be5\u7ec4\u4e0d\u80fd\u88ab\u5220\u9664,\u5220\u6389\u7528\u6237\u4f1a\u9ed8\u8ba4\u4e00\u8d77\u5220\u6389\u5b83\u7684\u4e3b\u7ec4 \u5373\u4e00\u4e2a\u7528\u6237\u5fc5\u987b\u6709\u4e00\u4e2a\u4e3b\u7ec4,groupdel\u5220\u9664\u7684\u7ec4\u4e0d\u80fd\u662f\u4efb\u4f55\u7528\u6237\u7684\u4e3b\u7ec4 [ root@localhost ~ ] # useradd egon1 [ root@localhost ~ ] # groupadd devops [ root@localhost ~ ] # usermod -G devops egon1 [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) ,2008 ( devops ) \"\"\" \u9644\u52a0\u7ec4\u53ef\u4ee5\u5220\u9664(\u6709\u4e2a\u524d\u63d0,\u6b64\u9644\u52a0\u7ec4\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u7528\u6237\u7684\u4e3b\u7ec4!) \u65e0\u6cd5\u5220\u9664\u7ec4egon1,\u56e0\u4e3a\u7ec4egon1\u5c5e\u4e8eegon1\u7528\u6237\u7684\u4e3b\u7ec4. \"\"\" [ root@localhost ~ ] # groupdel devops [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) [ root@localhost ~ ] # groupdel egon1 groupdel\uff1a\u4e0d\u80fd\u79fb\u9664\u7528\u6237\u201cegon1\u201d\u7684\u4e3b\u7ec4","title":"groupdel"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#gpasswd","text":"\u7ed9\u7528\u6237\u6dfb\u52a0\u9644\u52a0\u7ec4/\u7ed9\u7ec4\u6dfb\u52a0\u7ec4\u6210\u5458 \u6709\u4e09\u79cd\u9014\u5f84: 1> usermod -a -G \u9644\u52a0\u7ec4\u540d/\u9644\u52a0\u7ec4id,\u7ec42,\u7ec43 \u7528\u6237 -- \u5c06\u4e00\u4e2a\u7528\u6237\u6dfb\u52a0\u5230\u591a\u4e2a\u7ec4\u91cc\u9762 2> \u4fee\u6539 /etc/group \u6587\u4ef6 3> gpasswd \u9009\u9879 \u25cb gpasswd -a \u7528\u6237 \u9644\u52a0\u7ec4\u540d -- \u5c06\u67d0\u4e2a\u7528\u6237\u52a0\u5165\u5230\u67d0\u4e2a\u7ec4 \u25cb gpasswd -M \u7528\u62371,\u7528\u62372,\u7528\u62373 \u7ec4\u540d -- \u5c06\u591a\u4e2a\u7528\u6237\u6dfb\u52a0\u5230\u4e00\u4e2a\u7ec4\u91cc\u9762 \u25cb gpasswd -A \u7ec4\u5185\u67d0\u4e2a\u7528\u6237 \u7ec4\u540d -- \u5c06\u7ec4\u5185\u67d0\u4e2a\u7528\u6237\u6307\u5b9a\u4e3a\u7ec4\u957f, \u7ec4\u957f\u53ef\u4ee5\u5f80\u7ec4\u91cc\u6dfb\u52a0\u5220\u9664\u6210\u5458 \u25cb gpasswd -d \u7ec4\u5185\u67d0\u4e2a\u7528\u6237 \u7ec4\u540d -- \u5220\u9664\u7ec4\u5185\u67d0\u4e2a\u6210\u5458 [ root@localhost ~ ] # grep gg[1-9] /etc/group gg1:x:2006: gg2:x:981: new_gg3:x:1111: [ root@localhost ~ ] # grep egon1 /etc/passwd egon1:x:2003:2007::/home/egon1:/bin/bash [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) [ root@localhost ~ ] # usermod -a -G gg1 egon1 [ root@localhost ~ ] # gpasswd -a egon1 gg2 \u6b63\u5728\u5c06\u7528\u6237\u201cegon1\u201d\u52a0\u5165\u5230\u201cgg2\u201d\u7ec4\u4e2d [ root@localhost ~ ] # id egon1 uid = 2003 ( egon1 ) gid = 2007 ( egon1 ) \u7ec4 = 2007 ( egon1 ) ,2006 ( gg1 ) ,981 ( gg2 ) \u8865\u5145: \u547d\u4ee4\u884c\u5207\u6362\u7528\u6237 \u5728\u4e00\u4e2a\u7ec8\u7aef,root\u5207\u6362\u5230\u666e\u901a\u7528\u6237\u4e0d\u9700\u8981\u8f93\u5165\u5bc6\u7801;\u666e\u901a\u7528\u6237\u5207\u6362\u5230root\u7528\u6237\u9700\u8981\u5bc6\u7801. ## \u63d0\u524d\u8bf4\u4e00\u70b9,`-`\u5373\u5207\u6362\u5230\u6307\u5b9a\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0b,\u610f\u5473\u7740\u81f3\u5c11\u5f97\u4fdd\u8bc1\u7528\u6237\u5bf9 /home/dc \u6709x\u53ef\u6267\u884c\u6743\u9650 [ root@localhost ~ ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 10 :55:14 CST 2022\u4ece 172 .16.150.1pts/3 \u4e0a [ dc@localhost ~ ] $ su - root \u5bc6\u7801\uff1a \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 10 :54:06 CST 2022\u4ece 172 .16.150.1pts/2 \u4e0a [ root@localhost ~ ] # exit \u767b\u51fa [ dc@localhost ~ ] $ exit \u767b\u51fa ## -c\u9009\u9879 \u4ee5\u67d0\u4e00\u7528\u6237\u7684\u8eab\u4efd\u6267\u884c\u67d0\u6761\u547d\u4ee4 \u4e0d\u7528\u771f\u7684\u5207\u6362\u8fc7\u53bb.. [ root@localhost ~ ] # su - dc -c \"cat /opt/a.txt\" 123 [ root@localhost ~ ] # exit \u767b\u51fa Connection to 172 .16.150.131 closed. One_Piece@DCdeMacBook-Air ~ % \u4e34\u65f6\u83b7\u53d6\u7ec4\u6743\u9650 newgrp \u6211\u4eec\u53ef\u4ee5\u4e3a\u7ec4\u8bbe\u7f6e\u5bc6\u7801. \u7136\u540e\u8ba9\u4e00\u4e9b\u975e\u7ec4\u6210\u5458\u7684\u7528\u6237\u901a\u8fc7\u547d\u4ee4 newgrp \u7ec4\u540d \u4e34\u65f6\u5207\u6362\u5230\u7ec4\u5185\u5e76\u8f93\u5165\u5bc6\u7801\u7684\u65b9\u5f0f\u83b7\u53d6\u7528\u6237\u7ec4\u7684\u6743\u9650\u548c\u7279\u6027. \"\"\" \u521b\u5efa\u4e86\u4e00\u4e2a\u7528\u6237newuser,\u5e76\u4eceroot\u5207\u6362\u5230newuser\u7528\u6237 \u56e0\u4e3a\u7528\u6237newuser\u4e0d\u662f\u6587\u4ef6/tmp/a.txt\u7684\u62e5\u6709\u8005,\u4e5f\u4e0d\u662f\u6587\u4ef6\u7684\u5c5e\u7ec4..\u53ea\u80fd\u662f\u6587\u4ef6\u7684\u5176\u4ed6\u4eba. \u6240\u4ee5\u7528\u6237newuser\u5bf9\u6587\u4ef6/tmp/a.txt\u53ea\u6709\u8bfb\u6743\u9650 \"\"\" [ root@localhost ~ ] # useradd newuser [ root@localhost ~ ] # echo 111 > /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-r--r-- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # su - newuser [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 [ newuser@localhost ~ ] $ echo 123 >> /tmp/a.txt -bash: /tmp/a.txt: \u6743\u9650\u4e0d\u591f \"\"\" \u73b0\u5728\u60f3\u8981\u8ba9\u7528\u6237newuser\u80fd\u4fee\u6539a.txt\u6587\u4ef6,\u5373\u8ba9\u7528\u6237newuser\u5bf9a.txt\u6587\u4ef6\u6709\u5199\u6743\u9650 \"\"\" \u3010\u65b9\u6848\u4e00\u3011: \u5c06\u6587\u4ef6\u7684\u62e5\u6709\u8005\u6539\u4e3anewuser \u3010\u65b9\u6848\u4e8c\u3011: \u7ed9\u5176\u4ed6\u4eba\u4e00\u4e2aw\u5199\u6743\u9650 [ newuser@localhost ~ ] $ exit \u767b\u51fa [ root@localhost ~ ] # chmod o+w /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-r--rw- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt \u3010\u65b9\u6848\u4e09\u3011: \u7ed9\u6587\u4ef6\u7684\u7ec4\u6dfb\u52a0w\u5199\u6743\u9650,\u5e76\u5c06\u7528\u6237newuser\u6dfb\u52a0\u5230\u8fd9\u4e2a\u7ec4\u91cc # !!!\u6ce8\u610f\u54e6,root\u7ec4\u5355\u7eaf\u7684\u53ea\u662f\u4e00\u4e2a\u7ec4,\u800croot\u7528\u6237\u624d\u662f\u8d85\u7ea7\u7528\u6237\u4e0d\u53d7\u6743\u9650\u538b\u5236.\u522b\u641e\u6df7\u4e86. [ root@localhost ~ ] # chmod o-w /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-r--r-- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # chmod g+w /tmp/a.txt [ root@localhost ~ ] # ll /tmp/a.txt -rw-rw-r-- 1 root root 4 7\u6708 25 17 :51 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # gpasswd -a newuser root \u6b63\u5728\u5c06\u7528\u6237\u201cnewuser\u201d\u52a0\u5165\u5230\u201croot\u201d\u7ec4\u4e2d [ root@localhost ~ ] # id newuser uid = 2005 ( newuser ) gid = 2009 ( newuser ) \u7ec4 = 2009 ( newuser ) ,0 ( root ) [ root@localhost ~ ] # [ root@localhost ~ ] # su - newuser \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 17 :52:00 CST 2022pts/0 \u4e0a [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 [ newuser@localhost ~ ] $ echo 123 >> /tmp/a.txt [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 123 \u3010\u65b9\u6848\u56db\u3011:\u8ba9\u7528\u6237newuser\u4e34\u65f6\u83b7\u53d6\u6587\u4ef6\u5c5e\u7ec4\u7684\u6743\u9650,\u524d\u63d0\u9700\u8981\u7ed9\u7ec4\u8bbe\u7f6e\u5bc6\u7801 ( \u8fd9\u91cc\u8bbe\u7f6e\u7684\u5bc6\u7801\u662f123456 ) [ newuser@localhost ~ ] $ exit \u767b\u51fa [ root@localhost ~ ] # gpasswd -d newuser root \u6b63\u5728\u5c06\u7528\u6237\u201cnewuser\u201d\u4ece\u201croot\u201d\u7ec4\u4e2d\u5220\u9664 [ root@localhost ~ ] # id newuser uid = 2005 ( newuser ) gid = 2009 ( newuser ) \u7ec4 = 2009 ( newuser ) [ newuser@localhost ~ ] $ ll /tmp/a.txt -rw-rw-r-- 1 root root 8 7\u6708 25 18 :11 /tmp/a.txt [ root@localhost ~ ] # [ root@localhost ~ ] # gpasswd root \u6b63\u5728\u4fee\u6539 root \u7ec4\u7684\u5bc6\u7801 \u65b0\u5bc6\u7801\uff1a \u8bf7\u91cd\u65b0\u8f93\u5165\u65b0\u5bc6\u7801\uff1a [ root@localhost ~ ] # su - newuser \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 7\u6708 25 18 :10:47 CST 2022pts/0 \u4e0a [ newuser@localhost ~ ] $ echo 666 >> /tmp/a.txt -bash: /tmp/a.txt: \u6743\u9650\u4e0d\u591f [ newuser@localhost ~ ] $ [ newuser@localhost ~ ] $ newgrp root ## \u7528\u6237newuser\u4e34\u65f6\u5207\u5230root\u7ec4\u4e0b,\u83b7\u53d6root\u7ec4\u7684\u6743\u9650 \u5bc6\u7801\uff1a [ newuser@localhost ~ ] $ id newuser ## \u9a8c\u8bc1\u4e0b\u662f\u4e34\u65f6\u7684! uid = 2005 ( newuser ) gid = 2009 ( newuser ) \u7ec4 = 2009 ( newuser ) [ newuser@localhost ~ ] $ echo 666 >> /tmp/a.txt [ newuser@localhost ~ ] $ cat /tmp/a.txt 111 123 666 [ newuser@localhost ~ ] $ exit ## \u7528\u6237newuser\u9000\u51fa\u4e34\u65f6\u52a0\u5165\u7684root\u7ec4 exit [ newuser@localhost ~ ] $ echo 777 >> /tmp/a.txt -bash: /tmp/a.txt: \u6743\u9650\u4e0d\u591f","title":"gpasswd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_11","text":"[ root@localhost ~ ] # openssl passwd -1 -salt 'i have a dream' Password: ## 123456 $1$i have a $UEsc7yzrB5DWmTvxRpTsp . ## \u7b97\u6587\u4ef6\u7684hash\u503c [ root@localhost opt ] # md5sum /etc/bashrc 3f48a33cc1fce59ff2df86429151c0e0 /etc/bashrc","title":"\u8865\u5145"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_12","text":"\u53ef\u4ee5\u628a\u4e00\u4e32\u5185\u5bb9(\u6587\u672c\u6587\u4ef6--\u5b57\u7b26;\u89c6\u9891\u6587\u4ef6--\u4e8c\u8fdb\u5236)\u8ba1\u7b97\u6210\u4e00\u4e32hash\u503c. \u6839\u636e\u590d\u6742\u5ea6\u4e0d\u540c\u5e38\u89c1\u7684\u54c8\u5e0c\u7b97\u6cd5\u6709: md5\u3001sha512\u3001sha256 \u6ce8\u610f: \u6211\u4eec\u65e0\u9700\u7814\u7a76hash\u7b97\u6cd5\u7684\u539f\u7406,\u53ea\u9700\u8981\u638c\u63e1hash\u503c\u7684\u7279\u70b9\u5373\u53ef. hash\u503c\u6709\u4e09\u5927\u7279\u70b9: 1> \u8f93\u5165\u7684\u5185\u5bb9\u4e00\u6837,\u5e76\u4e14\u91c7\u7528\u7684hash\u7b97\u6cd5\u4e00\u6837,\u5f97\u5230\u7684hash\u503c\u4e00\u5b9a\u4e00\u6837\uff01 2> hash\u503c\u4e0d\u53ef\u9006\u63a8: \u4e0d\u80fd\u901a\u8fc7hash\u503c\u53cd\u63a8\u51fa\u660e\u6587 \u5176\u5b9e\u73b0\u76ee\u524d\u5df2\u7ecf\u53ef\u4ee5\u9006\u63a8\u4e86,\u9700\u8981\u4e00\u4e9b\u6280\u672f\u624b\u6bb5.. 3> hash\u503c\u7684\u957f\u5ea6\u53d6\u51b3\u4e8e\u91c7\u7528\u7684hash\u7b97\u6cd5,\u4e0e\u4f20\u5165\u7684\u5185\u5bb9\u591a\u5c11\u65e0\u5173. hash\u503c\u7684\u7528\u9014: \u25cb \u7ed3\u5408\u7279\u70b91\u548c2,\u53ef\u7528\u4e8e\u52a0\u5bc6. \u7528\u6237\u6ce8\u518c\u540e,\u670d\u52a1\u7aef\u662f\u6709\u4e00\u4efd\u6b63\u786e\u7684\u7528\u6237\u540d\u548c\u5bf9\u5e94\u7684\u7528\u54c8\u5e0c\u7b97\u6cd5(\u5047\u8bbe\u662fmd5)\u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u7684; \u5ba2\u6237\u7aef\u7528\u6237\u5728\u767b\u5f55\u754c\u9762\u8f93\u5165\u5bc6\u7801\u540e,\u4f1a\u7528md5\u8fdb\u884c\u52a0\u5bc6,\u5e76\u5c06\u7528\u6237\u540d\u4e0e\u52a0\u5bc6\u540e\u7684\u5bc6\u7801\u4f20\u5230\u670d\u52a1\u7aef\u8fdb\u884c\u6bd4\u5bf9.. \u54ea\u6015\u4e2d\u95f4\u4eba\u622a\u83b7\u4e86C\u4f20\u7ed9S\u7684\u6570\u636e\u5305,\u62ff\u5230\u52a0\u5bc6\u540e\u7684hash\u503c\u4e5f\u53cd\u63a8\u4e0d\u4e86\u5bc6\u7801\u660e\u6587. \u4f46\u4e2d\u95f4\u4eba\u53ef\u4ee5\u8fdb\u884c **\u649e\u5e93** (\u6293\u5305 + \u731c\u5230\u7528\u7684hash\u7b97\u6cd5 + \u5e38\u7528\u7684\u5bc6\u7801\u5b57\u5178),\u901a\u4fd7\u70b9\u5c31\u662f\u8499,\u8499\u4f60\u7684\u5bc6\u7801\u662f\u591a\u5c11.. \u4e00\u65e6\u5bc6\u7801\u5b57\u5178\u4e2d\u7684\u67d0\u4e2avalue\u901a\u8fc7\u76f8\u540c\u7684hash\u7b97\u6cd5\u7b97\u51fa\u7684hash\u503c\u4e0e\u6293\u5305\u622a\u83b7\u7684\u4e00\u81f4.. \u90a3\u4e48\u4e5f\u5c31\u7834\u89e3\u5bc6\u7801\u6210\u529f\u4e86. Ps: \u4e00\u822c\u6765\u8bf4,\u5927\u578b\u4e92\u8054\u7f51\u516c\u53f8\u4f1a\u5bf9\u5e38\u89c1\u7684\u52a0\u5bc6\u7b97\u6cd5\u8fdb\u884c\u4e00\u70b9\u52a0\u5de5.. \u6ca1\u6709\u7edd\u5bf9\u7684\u5b89\u5168,\u9ed1\u5ba2\u9700\u8981\u8861\u91cf\u7684\u662f\u653b\u51fb\u6210\u672c\u4e0e\u6536\u76ca.. \u25cb \u7ed3\u5408\u7279\u70b91\u548c3,\u53ef\u7528\u4e8e\u6587\u4ef6\u5b8c\u6574\u6027\u6821\u9a8c. \u5ba2\u6237\u7aef\u4ece\u670d\u52a1\u7aef\u4e0b\u8f7d\u4e00\u4e2a\u6587\u4ef6 S\u4f20\u8f93\u7ed9C\u6587\u4ef6\u7684\u540c\u65f6,\u4f1a\u4f20\u7ed9C\u4e00\u4e2a\u6587\u4ef6\u52a0\u5bc6\u540e\u5f97\u5230\u7684hash\u503c.\u4f20\u8f93\u5b8c\u6bd5,C\u540c\u6837\u5bf9\u6587\u4ef6\u8fdb\u884c\u52a0\u5bc6,\u6bd4\u5bf9hash\u503c\u662f\u5426\u76f8\u540c.. \u76f8\u540c\u5219\u8bc1\u660e\u6587\u4ef6\u662f\u5b8c\u6574\u7684,\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7.. \u4e2d\u95f4\u4eba\u600e\u4e48\u653b\u51fb\u5462\uff1f \u5b83\u9700\u8981\u5f97\u5230\u6240\u6709\u7684\u6570\u636e\u5305,(\u56e0\u4e3a\u6587\u4ef6\u662f\u4e00\u6bb5\u4e00\u6bb5\u4f20\u8f93\u7684),\u5e76\u4e14\u7be1\u6539\u52a0\u5165\u653b\u51fb\u4ee3\u7801,\u7ed9\u4e00\u4e2a\u65b0\u7684hash\u503c. \u8fd9\u6837\u5ba2\u6237\u7aef\u624d\u53d1\u89c9\u4e0d\u5230\u5f02\u5e38.. \u4f46\u51e1\u67d0\u4e00\u73af\u8282\u51fa\u73b0\u95ee\u9898,\u653b\u51fb\u90fd\u4f1a\u5931\u8d25..\u4e0d\u7528\u62c5\u5fc3.","title":"\u54c8\u5e0c\u7b97\u6cd5"},{"location":"1_linux%E5%9F%BA%E7%A1%80/6_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E4%B8%8E%E7%BB%84/#_13","text":"\u589e\u5f3a\u4e86\u5bc6\u7801\u7684\u590d\u6742\u5ea6. \"\u76d0\"\u76f8\u5f53\u4e8eC\u4e0eS\u7684\u4e00\u4e2a\u6697\u53f7,\u4e2d\u95f4\u4eba\u649e\u5e93\u7684\u65f6\u5019\u8fd8\u5f97\u731c\u5230\u52a0\u7684\u201c\u76d0\u201d\u662f\u4ec0\u4e48,\u52a0\u5728\u5bc6\u7801\u7684\u54ea\u4e2a\u4f4d\u7f6e/\u54ea\u51e0\u4e2a\u4f4d\u7f6e.. eg: \u660e\u6587 -- 123 \u52a0\u76d0\u540e -- \u5929\u738b12\u66973\u5730\u864e","title":"\u5bc6\u7801\u52a0\u76d0"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/","text":"\u6587\u4ef6\u8be6\u7ec6\u4fe1\u606f \u00b6 [ root@localhost opt ] # ll 1.txt -rw-r--r-- 1 root root 4 7\u6708 19 18 :56 1 .txt Ps: root\u7528\u6237\u53ef\u4e0d\u53d7\u6743\u9650\u538b\u5236, \u5e76\u6ca1\u6709\u8bf4root\u7ec4\u4e0d\u53d7\u6743\u9650\u538b\u5236! \u57fa\u672c\u6743\u9650 \u00b6 \u6743\u9650\u7684\u7c7b\u578b \u00b6 \u5b57\u7b26 \u542b\u4e49 \u5173\u8054\u6570\u5b57 r \u53ef\u8bfb 4 w \u53ef\u5199 2 x \u53ef\u6267\u884c 1 \u6743\u9650\u662f\u4e0eugo\u76f8\u5bf9\u5e94\u7684,\u5373\u6743\u9650\u8981\u4e0eugo\u76f8\u5173\u8054\u624d\u6709\u610f\u4e49 \u4ee5 -rw-r--r--. \u4e3a\u4f8b \u7b2c\u4e00\u4f4d\u5bf9\u5e94\u6587\u4ef6\u7684\u7c7b\u578b,\u63a5\u4e0b\u67659\u4f4d3\u4f4d\u4e3a\u4e00\u7ec4\u5206\u522b\u5bf9\u5e94u\u3001g\u3001o. \u82e5\u6700\u540e\u8fd8\u6709\u4e2a\u70b9,\u8868\u793a\u6b64\u6587\u4ef6\u662f\u5728SElinux\u5df2\u52a0\u8f7d\u72b6\u6001\u4e0b ( \u975edisabled ) \u521b\u5efa,\u6b64\u6587\u4ef6\u53d7SElinux\u7684\u7ba1\u5236 \u6587\u4ef6\u7c7b\u578b\uff1a -: \u6587\u672c\u6587\u6863 d: \u76ee\u5f55 b: \u8bbe\u5907block c: \u5b57\u7b26\u8bbe\u5907 s: \u5957\u63a5\u5b57\u6587\u4ef6 l: \u8f6f\u94fe\u63a5 \u6743\u9650\u7684\u5f52\u5c5e \u00b6 \u5b57\u7b26 \u542b\u4e49 u \u5c5e\u4e3b g \u5c5e\u7ec4 o \u5176\u5b83\u4eba \u8bbe\u7f6e\u6743\u9650 \u00b6 chmod \u8bbe\u7f6e\u6743\u9650\u7684\u7c7b\u578b chown \u8bbe\u7f6e\u6743\u9650\u7684\u5f52\u5c5e \u5373\u7528\u6237\u548c\u7ec4 chmod \u00b6 \u6709\u4e09\u79cd\u65b9\u5f0f\u4fee\u6539\u6587\u4ef6\u6743\u9650\u7684\u7c7b\u578b: eg: r-- rw- r-- \u53d8\u4e3a rwx r-x rw- 1> \u52a0\u51cf\u6cd5 \u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\u589e\u589e\u51cf\u51cf chmod u+wx,g-w+x,o+w 1.txt 2> \u8d4b\u503c \u4e0d\u7ba1\u539f\u6765\u662f\u4ec0\u4e48,\u76f4\u63a5\u8986\u76d6 chmod u=rwx,g=rx,o=rw 1.txt \u82e5\u76f8\u540c\u53ef\u7b80\u5199 eg: chmod ug=rx,o=rw 1.txt 3> \u6570\u5b57 \u5fc5\u987b\u662f3\u4f4d\u6570 chmod 756 1.txt 4+2+1,4+1,4+2 chmod a=- test/a.txt a\u4ee3\u8868ugo --------- -R\u9009\u9879 \u610f\u5473\u7740\u9012\u5f52\u4fee\u6539,\u4e3b\u8981\u9488\u5bf9\u76ee\u5f55\u6587\u4ef6(\u6587\u4ef6\u5939)\u7684 \u5e76\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u65b0\u5efa\u7684 [ root@localhost opt ] # mkdir -p a/b/c [ root@localhost opt ] # touch a/b/c/d.txt [ root@localhost opt ] # ll -d a drwxr-xr-x 3 root root 15 7\u6708 28 10 :41 a [ root@localhost opt ] # ll -d a/b drwxr-xr-x 3 root root 15 7\u6708 28 10 :41 a/b [ root@localhost opt ] # ll -d a/b/c drwxr-xr-x 2 root root 19 7\u6708 28 10 :42 a/b/c [ root@localhost opt ] # ll a/b/c/d.txt -rw-r--r-- 1 root root 0 7\u6708 28 10 :42 a/b/c/d.txt [ root@localhost opt ] # chmod -R 777 a [ root@localhost opt ] # chmod -R 777 a [ root@localhost opt ] # ll -d a drwxrwxrwx 3 root root 15 7\u6708 28 10 :41 a [ root@localhost opt ] # ll -d a/b drwxrwxrwx 3 root root 15 7\u6708 28 10 :41 a/b [ root@localhost opt ] # ll -d a/b/c drwxrwxrwx 2 root root 19 7\u6708 28 10 :42 a/b/c [ root@localhost opt ] # ll a/b/c/d.txt -rwxrwxrwx 1 root root 0 7\u6708 28 10 :42 a/b/c/d.txt \"\"\" \u901a\u5e38\u5565\u65f6\u5019\u7528\u5462\uff1f\u4e0b\u8f7d\u67d0\u4e00\u8f6f\u4ef6\u90e8\u7f72\u5728\u4e3b\u673a\u4e0a,\u6279\u91cf\u4fee\u6539\u8f6f\u4ef6\u4e0b\u6240\u6709\u6587\u4ef6\u7684\u6743\u9650. \"\"\" Ps: \u5c06\u6587\u4ef6\u6743\u9650\u7f6e\u7a7a. chmod 000 file.txt ; chmod u=-,g=-,o=- a/b/c/d.txt (chmod ugo=rwx a/b/c/d.txt) chown \u00b6 chown dc.devops a.txt -- \u4fee\u6539\u5c5e\u4e3b,\u5c5e\u7ec4 chown dc a.txt -- \u53ea\u4fee\u6539\u5c5e\u4e3b chown .devops a.txt -- \u53ea\u4fee\u6539\u5c5e\u7ec4 chown dc. a.txt -- \u5c5e\u4e3b\u548c\u5c5e\u7ec4\u4f1a\u4e00\u6837, \u7b49\u540c\u4e8e chown dc.dc a.txt -R\u9009\u9879 \u610f\u5473\u7740\u9012\u5f52\u4fee\u6539,\u4e3b\u8981\u9488\u5bf9\u76ee\u5f55\u6587\u4ef6(\u6587\u4ef6\u5939)\u7684 \u5e76\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u65b0\u5efa\u7684 [ root@localhost opt ] # chown -R dc.dc a [ root@localhost opt ] # ll -d a drwxrwxrwx 3 dc dc 15 7\u6708 28 10 :41 a [ root@localhost opt ] # ll -d a/b/ drwxrwxrwx 3 dc dc 15 7\u6708 28 10 :41 a/b/ [ root@localhost opt ] # ll -d a/b/c drwxrwxrwx 2 dc dc 19 7\u6708 28 10 :42 a/b/c [ root@localhost opt ] # ll -d a/b/c/d.txt -rwxrwxrwx 1 dc dc 0 7\u6708 28 10 :42 a/b/c/d.txt \u6743\u9650\u7684\u4f5c\u7528/\u610f\u4e49!!! \u00b6 \u9488\u5bf9\u6587\u4ef6 ( \u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9 ) r: \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9 ` cat ` w: \u4fee\u6539\u6587\u4ef6\u5185\u5bb9 ` vim ` ` echo >> > \u8ffd\u52a0,\u8986\u76d6 ` x: \u53ef\u4ee5\u628a\u6587\u4ef6\u5f53\u4f5c\u4e00\u4e2a\u547d\u4ee4/\u7a0b\u5e8f\u6765\u8fd0\u884c ( \u524d\u63d0\u662f\u6b64\u6587\u4ef6\u5f97\u662f\u4e2a\u4ee3\u7801\u6587\u4ef6 ) \u82e5\u8be5\u6587\u4ef6\u7684\u4ee3\u7801\u662f\u7f16\u8bd1\u597d\u7684\u7ed3\u679c,\u90a3\u4e48\u53ea\u6709x\u6743\u9650\u5373\u53ef\u6267\u884c ; \u82e5\u8be5\u6587\u4ef6\u7684\u4ee3\u7801\u662f\u4e00\u4e2a\u89e3\u91ca\u578b\u7684\u811a\u672c\u7a0b\u5e8f,\u5219\u8fd8\u9700\u8981\u914d\u5408r\u6743\u9650\u624d\u53ef\u6267\u884c rx \u9488\u5bf9\u76ee\u5f55 ( \u64cd\u4f5c\u67d0\u4e00\u76ee\u5f55\u4e0b\u7684\u5b50\u6587\u4ef6\u5939\u6216\u5b50\u6587\u4ef6 \u521b\u5efa\u5220\u9664\u79fb\u52a8 ) r: \u53ef\u4ee5\u6d4f\u89c8\u8be5\u76ee\u5f55\u4e0b\u7684\u5b50\u76ee\u5f55\u540d\u548c\u5b50\u6587\u4ef6\u540d\u5b57,\u610f\u5473\u7740\u80fd ` ls ` ` ll ` \u7f57\u5217\u76ee\u5f55\u6587\u4ef6\u4e0b\u7684\u6709\u54ea\u4e9b\u4e1c\u897f w: \u53ef\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa ` touch ` \u3001\u5220\u9664 ` rm ` \u3001\u79fb\u52a8\u5b50\u6587\u4ef6\u6216\u5b50\u6587\u4ef6\u5939 ` mv ` x: \u53ef\u4ee5\u8fdb\u5165\u8be5\u76ee\u5f55,\u610f\u5473\u7740\u80fd ` cd ` \u5230\u6b64\u8def\u5f84\u4e0b \u5373\u6211\u4eec\u9700\u8981\u64cd\u4f5c ( \u589e\u5220\u6539 ) \u76ee\u5f55\u4e0b\u7684\u5185\u5bb9,\u5c31\u5f97\u5148\u80fd\u8fdb\u5165\u8be5\u76ee\u5f55,\u5f97\u5148\u62e5\u6709\u8be5\u76ee\u5f55\u7684x\u6267\u884c\u6743\u9650 \u5177\u4f53\u6765\u8bf4: \u53ef\u4ee5\u6b63\u5e38\u5207\u6362\u5230\u76ee\u5f55\u4e0b,\u82e5\u6d89\u53ca\u5230\u591a\u5c42\u76ee\u5f55\u5982/a/b/c,\u9700\u8981\u5bf9\u6bcf\u4e00\u7ea7\u90fd\u6709x\u6743\u9650\u624d\u53ef\u4ee5\u6b63\u5e38\u8d70\u5230\u4e0b\u4e00\u7ea7 \u25bc \u6587\u4ef6\u4e0d\u7ba1\u662f\u5426\u6709r,\u90fd\u53ef\u4ee5ls ; \u76ee\u5f55\u6ca1\u6709r,\u4e0d\u80fdls \u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9 \u00b6 \u2606 \u64cd\u4f5c\u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\u5185\u5bb9 \u67e5\u770b\u67d0\u4e00\u4e2a\u6587\u4ef6\u5185\u5bb9\u9700\u8981\u5177\u5907\u7684\u6743\u9650: \u5bf9\u6240\u6709\u6587\u4ef6\u5939\u7684x\u6743\u9650\u4ee5\u53ca\u5bf9\u76ee\u6807\u6587\u4ef6\u7684r\u6743\u9650 \u89e3\u6790: /a/b/c.txt \u8be5\u7528\u6237\u8981\u80fdcd\u4e00\u5c42\u5c42\u7684\u5207\u5230\u8def\u5f84/a/b\u8def\u5f84\u4e0b,\u5373\u9700\u8981\u5bf9 /a/b \u76ee\u5f55\u6587\u4ef6\u4ee5\u53ca\u6cbf\u9014\u7684 / /a \u76ee\u5f55\u6587\u4ef6\u6709x\u6743\u9650; \u8981\u80fd\u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9,\u9700\u8981\u5bf9 c.txt \u6709r\u6743\u9650. \u64cd\u4f5c\u6587\u4ef6\u5939 \u00b6 \u2606 \u64cd\u4f5c\u6587\u4ef6\u5939\u4e0b\u7684\u5b50\u6587\u4ef6\u4e0e\u5b50\u6587\u4ef6\u5939(\u6ce8\u610f\u4e0d\u662f\u6587\u4ef6\u5185\u5bb9) \u5728\u76ee\u5f55\u4e0b\u521b\u5efa\u3001\u5220\u9664\u3001\u79fb\u52a8\u6587\u4ef6\u9700\u8981\u7684\u6743\u9650: \u5bf9\u6cbf\u9014\u6240\u6709\u6587\u4ef6\u5939\u7684x\u6743\u9650\u4ee5\u53ca\u5bf9\u76ee\u6807\u6587\u4ef6\u5939\u7684w\u6743\u9650 \u89e3\u6790: \u5728/a/b\u76ee\u5f55\u4e0b\u521b\u5efac.txt\u6587\u4ef6,\u5f97\u5148\u80fdcd\u5230/a/b\u8def\u5f84\u4e0b; \u9700\u8981\u5bf9b\u6587\u4ef6\u5939\u6709w\u5199\u6743\u9650,\u624d\u80fdtouch\u521b\u5efac.txt\u6587\u4ef6. \u603b\u7ed3 \u00b6 \u7b2c\u4e00\u6b65: \u7528\u6237\u5fc5\u987b\u8981\u5bf9\u6cbf\u9014\u7684\u6587\u4ef6\u5939\u90fd\u6709\u4e00\u4e2ax\u6267\u884c\u6743\u9650; \u200b \u7b2c\u4e8c\u6b65: \u7528\u6237\u770b\u5177\u4f53\u8981\u6c42 \u200b 1> \u5bf9\u6587\u4ef6\u5939\u7684\u64cd\u4f5c(\u4e0d\u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9), r\u4ee3\u8868\u53ef\u4ee5\u6d4f\u89c8,w\u4ee3\u8868\u53ef\u4ee5\u521b\u5efa\u5220\u9664\u79fb\u52a8\u5b50\u6587\u4ef6\u548c\u5b50\u76ee\u5f55. \u200b 2> \u5bf9\u6587\u4ef6\u7684\u64cd\u4f5c(\u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9), r\u4ee3\u8868\u53ef\u4ee5\u8bfb\u6587\u4ef6\u5185\u5bb9,w\u4ee3\u8868\u53ef\u4ee5\u4fee\u6539\u6587\u4ef6\u5185\u5bb9. \u200b vim \u5199\u5165\u5185\u5bb9 wq!\u5f3a\u5236\u8986\u76d6,\u9700\u8981\u7684\u6743\u9650:(\u4e8c\u9009\u4e00) \u200b \u6cbf\u9014\u7684\u6587\u4ef6\u5939\u90fd\u6709\u4e00\u4e2ax\u6267\u884c\u6743\u9650, \u76ee\u6807\u6587\u4ef6 -w- \u76ee\u6807\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939 --x \u200b \u6cbf\u9014\u7684\u6587\u4ef6\u5939\u90fd\u6709\u4e00\u4e2ax\u6267\u884c\u6743\u9650, \u76ee\u6807\u6587\u4ef6 --- \u76ee\u6807\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939 -wx \u25b2 1 > \u82e5\u7528\u6237\u5bf9\u6cbf\u9014\u6240\u6709\u6587\u4ef6\u5939\u53ea\u6709x\u6743\u9650,\u5bf9\u76ee\u6807\u6587\u4ef6\u6ca1\u6709r\u8bfb\u6743\u9650,\u6709w\u5199\u6743\u9650 [ root@localhost opt ] # cat a.txt 111 \uff01\uff01\uff01\u6ce8\u610f\uff01\uff01\uff01vim \u7b80\u5355\u6765\u8bf4,vim\u7684\u539f\u7406\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4e00\u4e0b\u5b50\u4ece\u786c\u76d8\u5168\u90e8\u8bfb\u5230\u5185\u5b58\u4e2d,\u5728\u5185\u5b58\u4e2d\u6539\u5b8c\u540e,\u518d\u4e00\u6b21\u6027\u5168\u90e8\u8986\u76d6\u786c\u76d8\u7684\u539f\u6587\u4ef6.. \u6ca1\u6709r\u8bfb\u6743\u9650 -- vim\u6253\u5f00\u6587\u4ef6\u65f6,\u867d\u7136\u4e0d\u4f1a\u62a5\u9519,\u4f46\u662f\u7a7a\u7684,\u5565\u5185\u5bb9\u4e5f\u6ca1\u6709.. \u6709w\u5199\u6743\u9650 -- \u5199\u540e\u53ef\u4ee5wq!\u5f3a\u5236\u4fdd\u5b58.. \u5199\u7684\u5185\u5bb9\u662f\u5728\u5185\u5b58\u91cc,wq!\u540e\u76f4\u63a5\u8986\u76d6\u4e86\u786c\u76d8\u4e2d\u539f\u6765\u7684\u5185\u5bb9... \u5728\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u4f1a\u63d0\u793a \"\u8b66\u544a:\u6b63\u5728\u4fee\u6539\u4e00\u4e2a\u53ea\u8bfb\u6587\u4ef6\" ; \"\u8bf7\u52a0!\u5f3a\u5236\u6267\u884c\" Ps: \u5410\u69fd,\u660e\u660e\u9488\u5bf9\u5f53\u524d\u7528\u6237\u800c\u8a00,\u5bf9\u8be5\u6587\u4ef6\u53ea\u6709\u5199\u6743\u9650,\u8fd8\u63d0\u793a\u6b63\u5728\u4fee\u6539\u4e00\u4e2a\u53ea\u8bfb\u6587\u4ef6Hhhh. \u4e5f\u8bb8\u662f\u5f00\u53d1\u8005\u5728\u63d0\u9192\u4f60\u6ca1\u770b\u5230\u6e90\u5185\u5bb9\u6700\u597d\u522b\u4fee\u6539.\u7ad9\u7684\u89d2\u5ea6\u4e0d\u540c. \u8865\u5145:echo \u56e0\u4e3a\u6709\u5199\u6743\u9650, ` echo 222 >> a.txt ` ; ` echo 3333 > a.txt ` ; \u90fd\u4f1a\u6210\u529f. \u25b2 2 > \u5f53\u524d\u7528\u6237lili\u5bf9\u6cbf\u9014\u6240\u6709\u6587\u4ef6\u5939\u90fd\u6709x\u6743\u9650\u5e76\u4e14\u5f53\u524d\u7528\u6237\u5bf9c\u6587\u4ef6\u5939\u6709w\u6743\u9650,\u4f46\u662flili\u5bf9d.txt\u6587\u4ef6\u6ca1\u6709\u6743\u9650 /a/b/c/d.txt ## -wx [ root@localhost opt ] # ll -d a/b/c drwxr-x-wx 1 root root 22 7\u6708 28 18 :42 a/b/c ## --- [ root@localhost opt ] # ll a/b/c/d.txt -rw-r------ 1 root root 21 7\u6708 28 18 :42 a/b/c/d.txt lili\u5bf9c\u6587\u4ef6\u5939\u6709w\u6743\u9650,\u90a3\u4e48lili\u53ef\u4ee5\u5220\u9664d.txt,\u518dtouch\u521b\u5efa\u4e00\u4e2a\u65b0\u7684d.txt,\u66f2\u7ebf\u6551\u56fd. \u4f46\u4e0d\u9700\u8981\u4e00\u6b65\u6b65\u7684\u64cd\u4f5c,vim\u53ef\u4ee5\u4e00\u6b65\u5230\u4f4d. lili\u53ef\u4ee5vim\u7f16\u8f91\u6587\u4ef6\u5185\u5bb9,\u5e76\u4e14\u53ef\u4ee5wq!\u5f3a\u5236\u4fdd\u5b58\u9000\u51fa\u5b8c\u6210\u6587\u4ef6\u4fee\u6539.\u5e95\u5c42\u539f\u7406\u5c31\u662f\u5c06\u6e90\u6587\u4ef6\u5220\u6389\u4e86. ( \u8fd9\u4e00\u8fc7\u7a0b\u662f\u4e0d\u662f\u8ddf\u4e0a\u9762\u7684\u7b2c\u4e00\u70b9\u76f8\u4f3c,\u5bf9\u7684,\u4ed6\u4eec\u5b9e\u73b0\u7684\u6700\u7ec8\u6548\u679c\u662f\u4e00\u6837\u7684 ) \u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u524d\u540e\u64cd\u4f5c\u7684\u6587\u4ef6inode\u53f7\u6765\u786e\u5b9a. ## \u6587\u4ef6\u7684\u5c5e\u4e3b\u548c\u5c5e\u7ec4\u53d8\u5566.\u4e5f\u5c31\u4fa7\u9762\u9a8c\u8bc1\u4e86\u6e90\u6587\u4ef6\u5220\u9664\u5566,\u65b0\u6587\u4ef6\u662flili\u521b\u5efa\u7684. [ root@localhost opt ] # ll a/b/c/d.txt -rw-r------ 1 lili lili 15 7\u6708 28 18 :42 a/b/c/d.txt \u6587\u4ef6\u6267\u884c \u00b6 \u2606 \u5bf9\u6587\u4ef6\u7684\u6267\u884c\u6743\u9650 \u5bf9\u6587\u4ef6\u62e5\u6709\u6267\u884c\u6743\u9650\u610f\u5473\u7740\u53ef\u4ee5\u628a\u6587\u4ef6\u5f53\u6210\u547d\u4ee4\u8fd0\u884c \"\"\" linux\u4e00\u5207\u7686\u6587\u4ef6 \u53ef\u4ee5\u89c2\u6d4b\u5230 ugo\u5bf9/usr/bin/cat\u6587\u4ef6\u90fd\u6709x\u53ef\u6267\u884c\u6743\u9650 \"\"\" [ root@localhost opt ] # which echo /usr/bin/echo [ root@localhost opt ] # ll /usr/bin/echo -rwxr-xr-x. 1 root root 33088 11\u6708 17 2020 /usr/bin/echo \"\"\" \u5c06echo\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u62f7\u8d1d\u5230/opt/t1/t2\u76ee\u5f55\u4e0b,\u5e76\u8d4b\u4e88\u6700\u57fa\u672c\u7684\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650 \"\"\" [ root@localhost opt ] # mkdir -p /opt/t1/t2 [ root@localhost opt ] # cp /usr/bin/echo /opt/t1/t2 [ root@localhost opt ] # chmod o=x /opt/t1/t2/echo [ root@localhost opt ] # head -3 /opt/t1/t2/echo ELF>J@@?y@8 @@@@@@?88@8@@@?^?^ ?m?m ` ?m ` ??nn ` ?TT@T@DDP?td?Q?Q@?Q@<<Q?tdR?td?m?m ` ?m ` XX/lib64/ld-linux-x86-64.so.2GNU GNU???IDk?????#?DT?vX!C??z?8??q? ?H??X0?@?? \\> \"\"\" .sh\u8868\u660e\u6b64\u6587\u4ef6\u8981\u88abshell\u89e3\u91ca\u5668\u89e3\u9501\u6267\u884c,\u8d4b\u4e88\u4e86a.sh\u6700\u57fa\u672c\u7684\u53ef\u6267\u884c\u6743\u9650 \"\"\" [ root@localhost opt ] # touch /opt/t1/t2/a.sh [ root@localhost opt ] # vim /opt/t1/t2/a.sh [ root@localhost opt ] # cat /opt/t1/t2/a.sh echo \"hello\" echo \"world\" echo \"hahah\" [ root@localhost opt ] # chmod o=x /opt/t1/t2/a.sh \"\"\" \u67e5\u770b\u6743\u9650 \"\"\" [ root@localhost opt ] # ll /opt/t1/t2 \u603b\u7528\u91cf 40 -rw-r----x 1 root root 39 7\u6708 30 17 :10 a.sh -rwxr-x--x 1 root root 33088 7\u6708 30 17 :18 echo \"\"\" \u767b\u5f55\u666e\u901a\u7528\u6237dc \u6267\u884c/opt/t1/t2/echo\u548c/opt/t1/t2/a.sh\u4e24\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 \uff01\uff01\uff01\uff01\uff01\uff01\u524d\u8005\u53ef\u6267\u884c\u6210\u529f,\u540e\u8005\u5931\u8d25 why? \u56e0\u4e3aecho\u6587\u4ef6\u662f\u7f16\u8bd1\u597d\u7684\u7ed3\u679c,\u4e0d\u9700\u8981shell\u89e3\u91ca\u5668\u89e3\u91ca\u5566,\u53ea\u9700\u8981x\u6743\u9650\u5373\u53ef\u6267\u884c; \u4f46a.sh\u6587\u4ef6\u7684\u4ee3\u7801\u662f\u4e00\u4e2a\u89e3\u91ca\u578b\u7684\u811a\u672c\u7a0b\u5e8f,\u5373\u9700\u8981shell\u89e3\u91ca\u5668\u8bfb\u51fa\u6765\u7ffb\u8bd1\u6210\u4e8c\u8fdb\u5236\u518d\u8fd0\u884c,\u5219\u9700\u8981\u914d\u5408r\u6743\u9650\u624d\u53ef\u6267\u884c \"\"\" [ dc@localhost opt ] $ /opt/t1/t2/echo wawo wawo [ dc@localhost opt ] $ /opt/t1/t2/a.sh bash: /opt/t1/t2/a.sh: \u6743\u9650\u4e0d\u591f \"\"\" root\u7528\u6237\u4fee\u6539a.sh\u7684\u6743\u9650\u4e3arx dc\u7528\u6237\u91cd\u65b0\u6267\u884ca.sh\u6587\u4ef6 \u6210\u529f!!! \"\"\" [ root@localhost opt ] # chmod o=rx /opt/t1/t2/a.sh [ dc@localhost opt ] $ /opt/t1/t2/a.sh hello world hahah SUID \u00b6 \u629b\u51fa\u95ee\u9898 \u00b6 \u666e\u901a\u7528\u6237dc\u53ef\u4ee5\u7528 passwd \u547d\u4ee4\u4fee\u6539\u81ea\u5df1\u7684\u8d26\u53f7\u5bc6\u7801,\u6211\u4eec\u6e05\u695a\u7684\u77e5\u9053\u4fee\u6539\u5bc6\u7801\u5219\u662f\u5728\u4fee\u6539 /etc/shadow \u6587\u4ef6.. \u4f46dc\u666e\u901a\u7528\u6237\u5bf9\u4e8e /etc/shadow \u6587\u4ef6\u800c\u8a00, \u4e0d\u662froot\u4e5f\u4e0d\u5c5e\u4e8eroot\u7ec4,\u5c5e\u4e8e \u5176\u5b83\u4eba ,\u5176\u6743\u9650\u4e3a --- \u5373\u6ca1\u6709\u4efb\u4f55\u6743\u9650. \u903b\u8f91\u4e0a\u51b2\u7a81\u4e86\u554a!? \u662f\u600e\u4e48\u4e00\u56de\u4e8b\u5462? \u6084\u6084\u544a\u8bc9\u4f60,\u662f SUID \u4ece\u4e2d\u4f5c\u795f. [ root@localhost opt ] # ll /etc/shadow ---------- 1 root root 1388 7\u6708 4 16 :53 /etc/shadow [ dc@localhost opt ] $ passwd \u66f4\u6539\u7528\u6237 dc \u7684\u5bc6\u7801 \u3002 \u4e3a dc \u66f4\u6539 STRESS \u5bc6\u7801\u3002 \uff08\u5f53\u524d\uff09UNIX \u5bc6\u7801\uff1a \u65b0\u7684 \u5bc6\u7801\uff1a ... ... ... \u5728UNIX\u7cfb\u5217\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762, \u786e\u5b9a\u7528\u6237\u7684\u8eab\u4efd\u662f\u901a\u8fc7UID\u53f7\u786e\u5b9a\u7684,\u8ddf\u7528\u6237\u540d\u6ca1\u6709\u5173\u7cfb.. \u9ed8\u8ba4\u4ee5\u767b\u5f55\u7528\u6237\u7684uid\u548cgid\u4e3a\u51c6.. \u4f46\u9664\u4e86 UID \u4e0e GID \u8fd8\u6709 euid \u4e0e egid ,\u5b83\u4e24\u4ee3\u8868\u6267\u884c\u7a0b\u5e8f\u65f6,\u771f\u6b63\u91c7\u7528\u7684\u7528\u6237id\u4e0e\u7ec4id. ps:e\u662feffective\u6709\u6548\u7684\u610f\u601d \u767b\u5f55dc\u7528\u6237,\u4f7f\u7528\u547d\u4ee4\u542f\u7528\u76f8\u5e94\u7684\u8fdb\u7a0b..\u8fdb\u7a0b\u7684\u6743\u9650\u5c31\u662f\u5f53\u524d\u767b\u5f55\u7528\u6237dc\u7684\u6743\u9650. \u5373\u8fdb\u7a0b\u7684uid\u548cgid\u90fd\u662fdc. unix\u5728\u8fdb\u7a0b\u771f\u6b63\u8fd0\u884c\u7684\u65f6\u5019\u4f1a\u8fdb\u884c\u8f6c\u6362\u7684,\u5c06uid\u5173\u8054euid,gid\u5173\u8054egid. \u9ed8\u8ba4\u60c5\u51b5\u4e0b,uid==euid;gid==egid \u662f\u76f8\u7b49\u7684! \u4f46\u662f\u53ef\u4ee5\u6539\u53d8\uff01 SUID\u7279\u70b9\u53ca\u4f7f\u7528\u8fc7\u7a0b \u00b6 suid\u4f5c\u7528\u4e8e\u53ef\u6267\u884c\u7684\u547d\u4ee4,\u610f\u5473\u7740\u65e0\u8bba\u54ea\u4e2a\u7528\u6237\u6765\u8fd0\u884c\u6b64\u547d\u4ee4,\u5b83\u7684\u8eab\u4efd\u90fd\u4f1a\u8f6c\u6362\u6210\u6b64\u547d\u4ee4\u7684\u4e3b\u4eba\u6765\u8fd0\u884c. \u5373\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u5019,euid\u662f\u8be5\u547d\u4ee4\u4e3b\u4eba\u7684uid..\u4e0d\u662f\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684uid.. [ root@localhost opt ] # ll /etc/shadow ---------- 1 root root 1388 7\u6708 4 16 :53 /etc/shadow [ root@localhost ~ ] # ll `which passwd` -rwsr-xr-x. 1 root root 27856 4\u6708 1 2020 /usr/bin/passwd [ root@localhost opt ] # ll `which su` -rwsr-xr-x. 1 root root 32128 2\u6708 3 2021 /usr/bin/su \u8fd9\u4e2as\u5c31\u4ee3\u8868\u7740\u4e8c\u8fdb\u5236\u6587\u4ef6\u5177\u6709SUID\u6743\u9650 \u8fd9\u91cc\u663e\u793a\u7684\u5c0fs\u662f\u56e0\u4e3a\u5c5e\u4e3b\u672c\u8eab\u5177\u6709x\u6267\u884c\u6743\u9650; \u82e5\u5c5e\u4e3b\u6ca1\u6709x\u6267\u884c\u6743\u9650,\u90a3\u4e48\u663e\u793a\u7684\u662f\u5927S. [\u7279\u70b9] \u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 \u5f53\u524d\u767b\u5f55\u7528\u6237/\u4f7f\u7528\u8005\u5bf9\u5176\u62e5\u6709x\u53ef\u6267\u884c\u6743\u9650 \u5728\u6267\u884c\u8be5\u547d\u4ee4\u7684\u8fc7\u7a0b\u4e2d \u25cb SUID\u6743\u9650\u4ec5\u5bf9\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u6709\u6548 bin\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6,\u90a3\u4e9b\u547d\u4ee4! \u25cb \u5982\u679c\u6267\u884c\u8005\u5bf9\u4e8e\u8be5\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u5177\u6709 x \u7684\u6743\u9650, \u6267\u884c\u8005\u5c06\u5177\u6709\u8be5\u6267\u884c\u6587\u4ef6\u7684\u5c5e\u4e3b\u7684\u6743\u9650 \u5373\u5f53\u524d\u767b\u5f55\u7528\u6237\u5728\u4f7f\u7528\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u65f6\u8eab\u4efd\u4e34\u65f6\u8f6c\u6362\u6210\u8be5\u6267\u884c\u6587\u4ef6\u7684\u5c5e\u4e3b \u25cb \u672c\u6743\u9650 \u4ec5\u5728\u6267\u884c\u8be5\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u7684\u8fc7\u7a0b\u4e2d \u6709\u6548 \u5373\u4ec5\u9650\u4e8e\u6267\u884c\u547d\u4ee4\u7684\u64cd\u4f5c.. [\u4f7f\u7528\u8fc7\u7a0b] \u666e\u901a\u7528\u6237dc\u5229\u7528 SUID \u6743\u9650\u5b8c\u6210\u5bc6\u7801\u4fee\u6539\u7684\u8fc7\u7a0b\u5982\u4e0b: 1> dc\u7528\u6237\u5bf9\u4e8e /usr/bin/passwd \u8fd9\u4e2a\u7a0b\u5e8f\u5177\u6709\u6267\u884c\u6743\u9650, \u56e0\u6b64\u53ef\u4ee5\u6267\u884cpasswd\u547d\u4ee4/\u7a0b\u5e8f 2> passwd \u7a0b\u5e8f\u7684\u6240\u6709\u8005\u4e3a root; dc\u7528\u6237\u6267\u884c passwd \u7a0b\u5e8f\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u6682\u65f6\u83b7\u5f97root\u6743\u9650 3> root\u4e0d\u53d7\u6743\u9650\u7684\u538b\u5236,\u56e0\u6b64dc\u7528\u6237\u5728 \u6267\u884cpasswd\u7a0b\u5e8f\u7684\u8fc7\u7a0b\u4e2d \u53ef\u4ee5\u4fee\u6539 /etc/shadow \u6587\u4ef6 \u5b9e\u9a8c\u8bc1\u660e \u00b6 \"\"\" \u53ef\u4ee5\u770b\u5230,root\u7528\u6237\u4e0d\u53d7\u6743\u9650\u538b\u5236\u53ef\u4ee5\u770b\u5230a.txt\u7684\u5185\u5bb9 \u4f46\u662f\u666e\u901a\u7528\u6237dc\u4e0d\u80fd,\u6743\u9650\u4e0d\u591f.. \"\"\" [ root@localhost opt ] # mkdir test [ root@localhost opt ] # chmod 777 test [ root@localhost opt ] # echo 123456 > test/a.txt [ root@localhost opt ] # chmod 000 test/a.txt [ root@localhost opt ] # ll test/a.txt ---------- 1 root root 7 8\u6708 1 09 :40 test/a.txt [ root@localhost opt ] # cat test/a.txt 123456 [ dc@localhost ~ ] $ cat /opt/test/a.txt cat: /opt/test/a.txt: \u6743\u9650\u4e0d\u591f Q: \u5982\u4f55\u5728 \u4e0d\u6539\u53d8 \u6587\u4ef6a.txt\u7684\u6743\u9650\u60c5\u51b5\u4e0b,\u8ba9\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7684\u5185\u5bb9? \"\"\" \u56e0\u4e3a\u7279\u6b8a\u6743\u9650suid\u7684\u7f18\u6545,\u610f\u5473\u7740\u53ea\u8981\u6267\u884ccat\u547d\u4ee4,\u7528\u6237\u7684\u8eab\u4efd\u5c31\u53d8\u6210\u4e86root \"\"\" [ root@localhost opt ] # ll `which cat` -rwxr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat ## chmod 4755 `which cat` [ root@localhost opt ] # chmod u+s /usr/bin/cat [ root@localhost opt ] # ll `which cat` -rwsr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # su - dc -c \"cat /opt/test/a.txt\" 123456 \"\"\" \u9a8c\u8bc1,\u767b\u5f55\u7528\u6237\u5fc5\u987b\u5177\u5907\u5bf9\u6267\u884c\u6587\u4ef6(\u547d\u4ee4\u5bf9\u5e94\u7684\u6587\u4ef6)\u6709x\u6267\u884c\u6743\u9650..\u4e0d\u7136\u54ea\u6015\u6709suid\u4e5f\u4e0d\u597d\u4f7f\u7528. \u903b\u8f91\u4e0a\u4e5f\u8bf4\u5f97\u8fc7\u53bb,\u4f60\u8fde\u6267\u884c\u547d\u4ee4\u7684\u6743\u9650\u90fd\u6ca1\u6709,\u5982\u4f55\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u8f6c\u6362\u8eab\u4efd\u5462\uff1f \"\"\" [ root@localhost opt ] # ll `which cat` -rwsr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # chmod o-x /usr/bin/cat [ root@localhost opt ] # ll `which cat` -rwsr-xr--. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # su - dc -c \"cat /opt/test/a.txt\" -bash: /bin/cat: \u6743\u9650\u4e0d\u591f \"\"\" \u8fd9\u6837\u505a\u975e\u5e38\u4e0d\u5b89\u5168,\u8bb0\u5f97\u6062\u590d\u64cd\u4f5c!! \"\"\" ## chmod u-s,o+x /usr/bin/cat [ root@localhost opt ] # chmod u=rwx,o=rx /usr/bin/cat SGID \u00b6 \u7528\u6237\u8fd0\u884c\u547d\u4ee4\u65f6\u4f7f\u7528\u7684\u662f\u547d\u4ee4\u6587\u4ef6\u6240\u5c5e\u7ec4\u7684\u8eab\u4efd... \u666e\u901a\u6587\u4ef6 \u00b6 Q: \u5982\u4f55\u5728 \u4ec5 \u6539\u53d8\u6587\u4ef61.txt\u7684\u5c5e\u7ec4\u7684\u6743\u9650\u7684\u60c5\u51b5\u4e0b,\u8ba9\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7684\u5185\u5bb9? \"\"\" cat\u547d\u4ee4\u6709SGID\u6743\u9650\u540e,dc\u7528\u6237\u5728\u4f7f\u7528cat\u547d\u4ee4\u8bbf\u95ee1.txt\u6587\u4ef6\u65f6,\u6240\u62e5\u6709\u7684\u6743\u9650\u662froot\u7ec4\u7684\u6743\u9650 \u76f8\u5f53\u4e8edc\u4e34\u65f6\u5207\u5230root\u7ec4\u91cc.. \u56e0\u4e3a\u547d\u4ee4\u6587\u4ef6\u4e0e\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u7ec4\u662f\u4e00\u6837\u7684..\u6240\u4ee5\u6539\u53d8\u666e\u901a\u6587\u4ef6\u5c5e\u7ec4root\u7ec4\u7684\u6743\u9650\u5373\u53ef..(\u4e0d\u9700\u8981\u8003\u8651\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b) \u8fd9\u91cc\u76f8\u5f53\u4e8e\u5c06\u666e\u901a\u6587\u4ef6\u5c5e\u7ec4\u7684\u4f18\u5148\u7ea7\u63d0\u5230\u4e86\u5c5e\u4e3b\u4e4b\u524d.. \"\"\" [ root@localhost opt ] # ll /usr/bin/cat -rwxr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # chmod g+s /usr/bin/cat [ root@localhost opt ] # ll /usr/bin/cat -rwxr-sr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # touch /opt/test/1.txt [ root@localhost opt ] # chmod 000 /opt/test/1.txt [ root@localhost opt ] # ll /opt/test/1.txt ---------- 1 root root 4 8\u6708 1 17 :36 /opt/test/1.txt [ root@localhost opt ] # echo 123 > /opt/test/1.txt [ root@localhost opt ] # su - dc -c \"cat /opt/test/1.txt\" cat: /opt/test/1.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # su - onepiece -c \"cat /opt/test/1.txt\" cat: /opt/test/1.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # chmod g+r /opt/test/1.txt [ root@localhost opt ] # su - dc -c \"cat /opt/test/1.txt\" 123 [ root@localhost opt ] # su - onepiece -c \"cat /opt/test/1.txt\" 123 \u76ee\u5f55\u6587\u4ef6 \u00b6 \u5f53\u4e00\u4e2a\u7528\u6237\u5bf9\u67d0\u4e00\u76ee\u5f55\u6709\u5199\u548c\u6267\u884c\u6743\u9650\u65f6,\u8be5\u7528\u6237\u5c31\u53ef\u4ee5\u5728\u8be5\u76ee\u5f55\u4e0b\u5efa\u7acb\u6587\u4ef6; \u5982\u679c\u8be5\u76ee\u5f55\u540c\u65f6\u7528SGID\u4fee\u9970,\u5219\u8be5\u7528\u6237\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u5efa\u7acb\u7684\u6587\u4ef6\u7684\u5c5e\u7ec4\u4e0e\u8fd9\u4e2a\u76ee\u5f55\u7684\u5c5e\u7ec4\u4e00\u81f4!!! \"\"\" \u76ee\u5f55\u6587\u4ef6\u548c\u666e\u901a\u6587\u4ef6\u662f\u8c01\u521b\u5efa\u7684,\u5176\u5c5e\u4e3b\u548c\u5c5e\u7ec4\u5c31\u662f\u8c01\uff01 \"\"\" [ root@localhost opt ] # mkdir /opt/aaa [ root@localhost opt ] # mkdir /opt/aaa/bbb [ root@localhost opt ] # touch /opt/aaa/b.txt [ root@localhost opt ] # chmod o+w /opt/aaa [ root@localhost opt ] # ll -d /opt/aaa drwxr-xrwx 3 root root 30 8\u6708 2 17 :53 /opt/aaa [ root@localhost opt ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 17 :53:33 CST 2022pts/0 \u4e0a [ dc@localhost ~ ] $ mkdir /opt/aaa/ccc [ dc@localhost ~ ] $ touch /opt/aaa/c.txt [ dc@localhost ~ ] $ ll /opt/aaa \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 6 8\u6708 2 17 :52 bbb -rw-r--r-- 1 root root 0 8\u6708 2 17 :53 b.txt drwxrwxr-x 2 dc dc 6 8\u6708 2 17 :55 ccc -rw-rw-r-- 1 dc dc 0 8\u6708 2 17 :55 c.txt \"\"\" \u7ed9\u76ee\u5f55\u6587\u4ef6/opt/aaa\u6dfb\u52a0\u7279\u6b8a\u6743\u9650SGID,\u5e76\u6539\u53d8\u5176\u5c5e\u7ec4\u4e3agroup1(\u4e0d\u7528root\u7ec4,\u7ed3\u679c\u66f4\u5177\u6807\u5fd7\u6027,\u66f4\u5bb9\u6613\u89c2\u5bdf) \u666e\u901a\u7528\u6237dc\u5728/opt/aaa\u4e0b\u521b\u5efa\u76ee\u5f55\u6587\u4ef6dir2\u548c\u666e\u901a\u6587\u4ef62.txt,\u5176\u5c5e\u7ec4\u4f1a\u4e0e/opt/aaa\u7684\u5c5e\u7ec4\u4fdd\u6301\u4e00\u81f4 \"\"\" [ root@localhost opt ] # groupadd group1 [ root@localhost opt ] # chown .group1 /opt/aaa [ root@localhost opt ] # chmod g+s /opt/aaa [ root@localhost opt ] # ll -d /opt/aaa drwxr-srwx 4 root group1 54 8\u6708 2 17 :55 /opt/aaa [ root@localhost opt ] # mkdir /opt/aaa/dir1 [ root@localhost opt ] # touch /opt/aaa/1.txt [ root@localhost opt ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 17 :55:30 CST 2022pts/0 \u4e0a [ dc@localhost ~ ] $ mkdir /opt/aaa/dir2 [ dc@localhost ~ ] $ touch /opt/aaa/2.txt [ dc@localhost ~ ] $ ll /opt/aaa \u603b\u7528\u91cf 0 -rw-r--r-- 1 root group1 0 8\u6708 2 18 :03 1 .txt \u25cf -rw-rw-r-- 1 dc group1 0 8\u6708 2 18 :04 2 .txt \u25cf drwxr-xr-x 2 root root 6 8\u6708 2 17 :52 bbb -rw-r--r-- 1 root root 0 8\u6708 2 17 :53 b.txt drwxrwxr-x 2 dc dc 6 8\u6708 2 17 :55 ccc -rw-rw-r-- 1 dc dc 0 8\u6708 2 17 :55 c.txt drwxr-sr-x 2 root group1 6 8\u6708 2 18 :03 dir1 \u25cf drwxrwsr-x 2 dc group1 6 8\u6708 2 18 :04 dir2 \u25cf SBIT/Sticky \u00b6 SBIT\u662f the restricted deletion flag or sticky bit \u7684\u7b80\u79f0,\u6709\u65f6\u4e5f\u79f0\u4e3aSticky \u7c98\u6ede\u4f4d SBIT \u76ee\u524d\u53ea\u5bf9\u76ee\u5f55\u6709\u6548,\u7528\u6765\u963b\u6b62\u975e\u6587\u4ef6\u7684\u5c5e\u4e3b\u5220\u9664\u6587\u4ef6. \"\"\" \u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\u5939share root\u8d26\u53f7\u4f9d\u6b21\u5207\u6362\u5230user01,user02,user03\u7528\u6237\u4e0b,\u5206\u522b\u5728\u5171\u4eab\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef61.txt\u30012.txt\u30013.txt \"\"\" [ root@localhost opt ] # mkdir /opt/share [ root@localhost opt ] # chmod 777 /opt/share/ [ root@localhost opt ] # useradd user01 [ root@localhost opt ] # useradd user02 [ root@localhost opt ] # useradd user03 [ root@localhost opt ] # su - user01 [ user01@localhost ~ ] $ touch /opt/share/1.txt [ user01@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # su - user02 [ user02@localhost ~ ] $ touch /opt/share/2.txt [ user02@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # su - user03 [ user03@localhost ~ ] $ touch /opt/share/3.txt [ user03@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # ll /opt/share/ \u603b\u7528\u91cf 0 -rw-rw-r-- 1 user01 user01 0 8\u6708 2 18 :16 1 .txt -rw-rw-r-- 1 user02 user02 0 8\u6708 2 18 :17 2 .txt -rw-rw-r-- 1 user03 user03 0 8\u6708 2 18 :17 3 .txt \"\"\" \u95ee\u9898\u6765\u5566,user01-03\u4e09\u4e2a\u7528\u6237\u4e0d\u4ec5\u80fd\u5220\u9664\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6,\u8fd8\u80fd\u5220\u9664\u5176\u4f59\u4e24\u4e2a\u7528\u6237\u521b\u5efa\u7684\u6587\u4ef6 \u6309\u7167\u903b\u8f91,\u672c\u7740\u5171\u4eab\u7684\u539f\u5219,user02\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u4e0a\u4f20\u76842.txt\u6587\u4ef6,\u4e0d\u80fd\u5220\u96641.txt\u4e0e3.txt\u6587\u4ef6.. \"\"\" [ root@localhost opt ] # su - user02 \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 18 :17:04 CST 2022pts/0 \u4e0a [ user02@localhost ~ ] $ rm -rf /opt/share/2.txt [ user02@localhost ~ ] $ rm -rf /opt/share/1.txt [ user02@localhost ~ ] $ rm -rf /opt/share/3.txt [ user02@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # ll /opt/share/ \u603b\u7528\u91cf 0 \"\"\" \u8981\u60f3\u8ba9\u4e0a\u4f20\u8005\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u4e0a\u4f20\u7684\u6587\u4ef6,\u5c31\u9700\u8981\u7528\u5230\u7c98\u6ede\u4f4dSBIT \"\"\" [ root@localhost opt ] # ll -d /opt/share/ drwxrwxrwx 2 root root 6 8\u6708 2 18 :23 /opt/share/ [ root@localhost opt ] # chmod o+t /opt/share/ [ root@localhost opt ] # ll -d /opt/share/ drwxrwxrwt 2 root root 6 8\u6708 2 18 :23 /opt/share/ [ root@localhost opt ] # su - user01 -c \"touch /opt/share/1.txt\" [ root@localhost opt ] # su - user02 -c \"touch /opt/share/2.txt\" [ root@localhost opt ] # su - user03 -c \"touch /opt/share/3.txt\" [ root@localhost opt ] # ll /opt/share/ \u603b\u7528\u91cf 0 -rw-rw-r-- 1 user01 user01 0 8\u6708 2 18 :38 1 .txt -rw-rw-r-- 1 user02 user02 0 8\u6708 2 18 :39 2 .txt -rw-rw-r-- 1 user03 user03 0 8\u6708 2 18 :39 3 .txt [ root@localhost opt ] # su - user02 \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 18 :39:05 CST 2022pts/0 \u4e0a [ user02@localhost ~ ] $ rm -rf /opt/share/1.txt rm: \u65e0\u6cd5\u5220\u9664 \"/opt/share/1.txt\" : \u4e0d\u5141\u8bb8\u7684\u64cd\u4f5c [ user02@localhost ~ ] $ rm -rf /opt/share/2.txt [ user02@localhost ~ ] $ rm -rf /opt/share/3.txt rm: \u65e0\u6cd5\u5220\u9664 \"/opt/share/3.txt\" : \u4e0d\u5141\u8bb8\u7684\u64cd\u4f5c Ps: liunx\u7684\u4e34\u65f6\u6587\u4ef6\u5939/tmp \u5176\u6743\u9650\u9ed8\u8ba4\u5c31\u662fdrwxrwxrwt. \u7528\u6765\u675c\u7edd a\u7528\u6237\u5f80\u91cc\u653e\u4e2a\u4e1c\u897f,b\u7528\u6237\u8fc7\u6765\u5c06\u5176\u5220\u6389 \u7684\u60c5\u51b5.. \u7279\u6b8a\u6743\u9650\u603b\u7ed3\u2606 \u00b6 \u6709\u4e9b\u5b9e\u9a8c\u7684\u5177\u4f53\u6b65\u9aa4\u5199\u8d77\u6765\u592a\u7e41\u7410\u4e86... \u76f4\u63a5\u7565\u8fc7!!Please believe me,\u6211\u662f\u5b9e\u9a8c\u8fc7\u5f97\u5230\u7684\u7ed3\u8bba.. SUID -- \u9488\u5bf9\u5c5e\u4e3b -- u+s -- S+x=s SGID -- \u9488\u5bf9\u5c5e\u7ec4 -- g+s -- S+x=s SBIT -- \u9488\u5bf9\u5176\u4ed6\u4eba -- o+s -- T+x=t \u5b9e\u9645\u4e0a\u7279\u6b8a\u6743\u9650\u548cumask\u90fd\u4e0d\u4f1a\u600e\u4e48\u7528\u5230,\u4f46\u662f\u9700\u8981\u77e5\u9053\u662f\u4ec0\u4e48!!\u9047\u5230\u540e\u4e0d\u614c..Hhh \u6ca1\u6709\u7279\u6b8a\u6743\u9650 \u00b6 \u3010\u6ca1\u6709\u7279\u6b8a\u6743\u9650\u3011 \"\"\" -rwxrw-r-- 1 egon IT 2351 7\u6708 18 18:12 /etc/passwd linux\u7cfb\u7edf\u628a\u6587\u4ef6\u6743\u9650\u5206\u4e3a\u4e86\u4e09\u7c7b:\u5c5e\u4e3b\u3001\u5c5e\u7ec4\u3001\u5176\u5b83\u4eba \u4e00\u4e2a\u7528\u6237\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u626b\u63cf\u7684\u4f18\u5148\u7ea7: \u25cb \u5148\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u4e3b \u25cb \u5728\u7b2c\u4e00\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u518d\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u7ec4 \u25cb \u5728\u7b2c\u4e8c\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u8be5\u7528\u6237\u5c5e\u4e8e\u5176\u4ed6\u4eba\u6743\u9650 \"\"\" 1 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65f6egon,egon\u6240\u5c5e\u7684\u90e8\u95e8\u662fIT\u90e8\u95e8. /etc/passwd\u7684\u62e5\u6709\u8005\u662fegon,\u90a3\u4e48egon\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u662frwx ; \u54ea\u6015egon\u5c5e\u4e8eIT\u90e8\u95e8,\u6587\u4ef6\u62e5\u6709\u8005\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e00\u4e9b. 2 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e0d\u662f\u6587\u4ef6\u7684\u62e5\u6709\u8005,\u662flili,lili\u662f\u5c5e\u4e8eIT\u90e8\u95e8\u7684,\u90a3\u4e48lili\u5bf9/etc/passwd\u7684\u6743\u9650\u4e3arw- 3 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65e2\u4e0d\u662f\u6587\u4ef6\u7684\u4e3b\u4eba,\u4e5f\u4e0d\u662fIT\u90e8\u95e8\u91cc\u7684,\u90a3\u4e48\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u4e3ar-- \u63d0\u4e00\u5634,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u767b\u5f55\u7684\u666e\u901a\u7528\u6237\u5bf9\u547d\u4ee4\u90fd\u6709x\u6267\u884c\u6743\u9650.. SUID \u00b6 \u767b\u5f55\u7528\u6237\u4f7f\u7528\u547d\u4ee4\u65f6\u83b7\u5f97\u8be5\u547d\u4ee4\u5c5e\u4e3b\u7684\u6743\u9650. \u5373\u4ee5\u547d\u4ee4\u5c5e\u4e3b\u7684\u8eab\u4efd\u53bb\u64cd\u63a7\u666e\u901a\u6587\u4ef6.. \u4e00\u5b9a\u8981\u6ce8\u610f\u4e00\u822c\u60c5\u51b5\u4e0b,\u8be5\u5c5e\u4e3b\u9762\u5bf9\u4e0d\u540c\u6587\u4ef6\u65f6,\u6743\u9650\u662f\u4e0d\u5c3d\u76f8\u540c\u7684!! \u524d\u7f6e\u6761\u4ef6: \u547d\u4ee4\u6587\u4ef6\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b\u90fd\u662f\u7528\u6237root;\u5c5e\u7ec4\u90fd\u662froot\u7ec4. \u73b0\u6709\u4e09\u4e2a\u666e\u901a\u7528\u6237 user1\u3001dc\u3001onepiece \u3010SUID\u3011 root\u7528\u6237\u4e0d\u53d7\u6743\u9650\u538b\u5236!\u968f\u4fbf\u6298\u817e\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b\u9700\u8981\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6.. \u666e\u901a\u6587\u4ef6\u6743\u9650\u662f\u5565\u90fd\u4e0d\u7528\u8003\u8651..\u5c31\u662f\u5982\u6b64\u8c6a\u6068.. ( \uffe3\u25bd\uffe3 ) 1 >: <root>\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u6587\u4ef6, ` chmod 000 \u666e\u901a\u6587\u4ef6 ` 2 >: ` chmod u+s \u547d\u4ee4\u6587\u4ef6 ` 3 >: <\u666e\u901a\u7528\u6237>\u53ef\u4ee5\u501f\u52a9root\u7684\u6743\u9650\u5728\u4f7f\u7528\u8be5\u547d\u4ee4\u7684\u8fc7\u7a0b\u4e2d\u64cd\u4f5c\u4e00\u4e9b\u666e\u901a\u6587\u4ef6.. eg:\u5bf9\u76f8\u5e94\u547d\u4ee4 ( \u8fd9\u91cc\u4ee5passwd\u548ccat\u4e24\u547d\u4ee4\u4e3e\u4f8b ) \u8fdb\u884c\u4e0a\u8ff0\u6b65\u9aa4\u540e, \u5176\u5b83\u7528\u6237\u4f7f\u7528passwd\u547d\u4ee4\u4f1a\u4fee\u6539/etc/shadow\u6587\u4ef6 ; \u5176\u5b83\u7528\u6237\u4f7f\u7528cat\u547d\u4ee4\u53ef\u4ee5\u8bbf\u95ee\u8be5\u666e\u901a\u6587\u4ef6 \u524d\u7f6e\u6761\u4ef6: \u547d\u4ee4\u6587\u4ef6\u7684\u5c5e\u4e3b\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b \u4e0d\u4e00\u6837 ,\u4e14\u90fd\u4e0d\u662f\u662f\u7528\u6237root... \u4e3e\u4f8b\u8bf4\u660e: \u73b0\u6709\u4e09\u4e2a\u666e\u901a\u7528\u6237 user1\u3001dc\u3001onepiece \u3010SUID\u3011 /usr/bin/cat \u4fe1\u606f\u4e3a -rwsr-xr-x. user1 user1 /opt/test/b.txt \u4fe1\u606f\u4e3a ---------- dc dc \u6267\u884c ` cat b.txt ` \u547d\u4ee4: \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e3aonepiece 1 > \u4f1a\u4ee5user1\u7528\u6237\u7684\u8eab\u4efd\u8fd0\u884c\u6b64\u547d\u4ee4,user1\u7528\u6237\u5bf9\u4e8eb.txt\u800c\u8a00,\u7528\u6237\u89d2\u8272\u5212\u5206\u4e3a\u5176\u5b83\u4eba.. 2 \u25cf> so,\u53ea\u6709\u5f53root\u7528\u6237\u6267\u884c ` chmod a = -,o = r b.txt ` \u547d\u4ee4\u540e, ` cat b.txt ` \u624d\u4f1a\u6210\u529f.. Ps: \u90a3\u5982\u679croot\u7528\u6237\u6267\u884c ` gpasswd -a user1 dc ` \u5c06user1\u7528\u6237\u6dfb\u52a0\u5230dc\u7ec4 ; root\u7528\u6237\u518d\u6267\u884c ` chmod a = -,g = r b.txt ` \u547d\u4ee4, ` cat b.txt ` \u4f9d\u65e7\u4e0d\u4f1a\u6210\u529f.. \u8bc1\u660e\u8be5\u8eab\u4efduser1\u4e0d\u662fb.txt\u7684\u4e3b\u4ebadc,\u5c31\u4f1a\u76f4\u63a5\u88ab\u5f52\u4e3ab.txt\u5176\u4ed6\u4eba\u4e00\u680f ; \u4e0d\u4f1a\u68c0\u7d22\u6587\u4ef6\u7684\u7ec4,\u54ea\u6015user1\u662fb.txt\u5c5e\u7ec4dc\u7ec4\u7684\u6210\u5458. \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e3adc,\u7528\u6237dc\u80af\u5b9a\u662f\u7ec4dc\u7684\u6210\u5458 \u5b9e\u9a8c\u7ed3\u679c\u8bc1\u660e\u8fd0\u884c ` cat b.txt ` \u65f6,\u76f8\u5f53\u4e8e\u5c06b.txt\u6587\u4ef6\u7684\u5c5e\u4e3b\u4e34\u65f6\u6539\u4e3a\u4e86user1.. \u8fd8\u662f\u4f1a\u4ee5dc\u7528\u6237\u7684\u8eab\u4efd\u8fd0\u884c\u6b64\u547d\u4ee4.. \uff08!!!!!!\u7279\u522b\u6ce8\u610f!!!!!!\uff09 \u25cf\u4e5f\u5c31\u662f\u8bf4,\u53ea\u6709\u5f53root\u7528\u6237\u6267\u884c ` chmod a = -,g = r b.txt ` \u547d\u4ee4\u540e, ` cat b.txt ` \u4f1a\u6210\u529f.. \u524d\u7f6e\u6761\u4ef6: \u547d\u4ee4\u6587\u4ef6\u7684\u5c5e\u4e3b\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b \u4e00\u6837 ,\u4f46\u90fd\u4e0d\u662f\u7528\u6237root... \u4e3e\u4f8b\u8bf4\u660e: \u73b0\u6709\u4e09\u4e2a\u666e\u901a\u7528\u6237 dc\u3001onepiece \u3010SUID\u3011 /usr/bin/cat \u4fe1\u606f\u4e3a -rwsr-xr-x. dc root /opt/test/b.txt \u4fe1\u606f\u4e3a ---------- dc dc \u65e0\u8bba\u5f53\u524d\u767b\u5f55\u7528\u6237\u662fdc\u8fd8\u662fonepiece,\u90fd\u4f1a\u4ee5dc\u7528\u6237\u7684\u8eab\u4efd\u6267\u884c ` cat b.txt ` \u547d\u4ee4 \u25cf\u610f\u5473\u7740\u53ea\u6709\u5f53root\u7528\u6237\u6267\u884c ` chmod a = -,u = r b.txt ` \u547d\u4ee4\u540e,\u4e0d\u7ba1\u767b\u5f55\u7528\u6237\u662f\u8c01, ` cat b.txt ` \u90fd\u4f1a\u6210\u529f.. SGID\u3001SBIT \u00b6 \u3010SGID\u9488\u5bf9\u666e\u901a\u6587\u4ef6\u3011 \u524d\u63d0:\u8fd9\u91cc\u5b9e\u9a8c\u73af\u5883 -- \u547d\u4ee4\u6587\u4ef6\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b\u90fd\u662f\u7528\u6237root ; \u5c5e\u7ec4\u90fd\u662froot\u7ec4. ( \u5176\u5b83\u60c5\u51b5\u6ca1\u6709\u9a8c\u8bc1 ) \u4f5c\u7528\u4e8e\u666e\u901a\u6587\u4ef6\u65f6,\u4f1a\u4ee5\u547d\u4ee4\u6240\u5c5e\u7ec4\u7684\u6743\u9650\u53bb\u64cd\u63a7\u666e\u901a\u6587\u4ef6..\u4e0eSUID\u7c7b\u4f3c.. root\u7ec4\u7684\u6743\u9650\u53ef\u4e0d\u7b49\u540c\u4e8eroot\u7528\u6237\u7684\u6743\u9650..\u6240\u4ee5\u8981\u6539\u53d8\u4e0broot\u7ec4\u9488\u5bf9\u76ee\u6807\u666e\u901a\u6587\u4ef6\u7684\u6743\u9650! 1 >: <root>\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u6587\u4ef6, ` chmod 000 \u666e\u901a\u6587\u4ef6 ` 2 >: ` chmod g+s \u547d\u4ee4\u6587\u4ef6 ` 3 >: <\u666e\u901a\u7528\u6237>\u53ea\u80fd\u7528\u8be5\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u7ec4root\u7ec4\u7684\u6743\u9650\u64cd\u4f5c\u8be5\u666e\u901a\u6587\u4ef6.. 4 >: ` chmod g+r \u666e\u901a\u6587\u4ef6 ` \u4e3e\u4f8b\u8bf4\u660e: /usr/bin/cat -rwxr-sr-x. root root /opt/test/1.txt ---------- root root root\u7528\u6237\u6539\u53d8root\u7ec4\u9488\u5bf91.txt\u7684\u6743\u9650: ` chmod g+r /opt/test/1.txt ` ----r----- \u6240\u6709\u7528\u6237\u5728\u8fd0\u884ccat\u547d\u4ee4\u65f6\u90fd\u62e5\u6709root\u7ec4\u6743\u9650: ` cat /opt/test/1.txt ` \u6210\u529f. \u3010SGID\u9488\u5bf9\u76ee\u5f55\u6587\u4ef6\u3011 \u5b8c\u6210\u5c5e\u7ec4\u7684\u7ee7\u627f.. root\u7528\u6237: ` chmod g+s /opt/aaa ` drwxr-srwx \u6240\u6709\u7528\u6237\u5728\u76ee\u5f55\u6587\u4ef6/opt/aaa\u4e0b\u521b\u5efa\u7684\u6587\u4ef6\u5939\u6216\u6587\u4ef6\u7684\u5c5e\u7ec4\u90fd\u4f1a\u4e0e/opt/aaa\u7684\u5c5e\u7ec4\u4fdd\u6301\u4e00\u81f4 \u3010SBIT\u3011 \u6743\u9650\u4fe1\u606f\u4e2d\u6700\u540e\u4e00\u4f4dt\u8868\u660e\u8be5\u76ee\u5f55\u88ab\u8bbe\u7f6e\u4e86SBIT\u6743\u9650. SBIT\u5bf9\u76ee\u5f55\u7684\u4f5c\u7528\u662f: \u5f53\u7528\u6237\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa\u65b0\u6587\u4ef6\u6216\u76ee\u5f55\u65f6,\u4ec5\u6709\u81ea\u5df1\u548croot\u624d\u6709\u6743\u529b\u5220\u9664,\u4e3b\u8981\u4f5c\u7528\u4e8e\u4e00\u4e2a\u5171\u4eab\u7684\u6587\u4ef6\u5939 root\u7528\u6237: ` chmod o+t /opt/share ` drwxrwxrwt \u5176\u5b83\u7528\u6237\u5728\u5171\u4eab\u6587\u4ef6\u5939/opt/share\u91cc\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6 umask \u00b6 \u65b0\u5efa\u7684\u6587\u4ef6\u3001\u76ee\u5f55\u6587\u4ef6\u7684\u9ed8\u8ba4\u6743\u9650\u662f\u7531umask\u51b3\u5b9a\u7684 Ps: \u8054\u60f3\u4e00\u4e0b,netmask\u63a9\u7801\u4e0eip\u5730\u5740\u8fdb\u884c\u4e0e\u8fd0\u7b97; umask\u4e5f\u9700\u8981\u642d\u914d\u4f7f\u7528.. \"\"\" root\u7528\u6237: \u521b\u5efa\u6587\u4ef6\u9ed8\u8ba4\u6743\u9650644;\u521b\u5efa\u6587\u4ef6\u5939\u9ed8\u8ba4\u6743\u9650755 \"\"\" [ root@localhost opt ] # touch a.txt [ root@localhost opt ] # mkdir aaa [ root@localhost opt ] # ll \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 6 8\u6708 2 20 :06 aaa -rw-r--r-- 1 root root 0 8\u6708 2 20 :05 a.txt umask\u89c4\u5219 \u00b6 \u89c4\u5219\u5982\u4e0b: 1> uid>199\u5e76\u4e14\u5c5e\u4e3b\u4e0e\u6570\u7ec4\u76f8\u7b49\u7684\u7528\u6237\u4e0b --- umask: 0002; \u96641\u4e4b\u5916\u7684\u5176\u4ed6\u7528\u6237,\u6bd4\u5982root\u7528\u6237 -- umask: 0022 2> umask\u6709\u56db\u4f4d, \u7b2c\u4e00\u4f4d\u4e0e\u7279\u6b8a\u6743\u9650\u6709\u5173 .. \u4e3e\u4f8b: \u7ed9a.txt ( -rw-r--r-- )\u6587\u4ef6\u52a0\u4e0asuid\u3001sgid\u3001sticky..( -rwSr-Sr-T ) chmod u+s,g+s,o+t a.txt chmod 7644 a.txt u\u3001suid -- 4 ; g\u3001sgid -- 2 ; o\u3001sbit -- 1. 2> linux\u4e2d \u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\u4e3a666 \u3001 \u76ee\u5f55\u6743\u9650\u9ed8\u8ba4\u4e3a777 , \u4f1a\u4e0eumask\u540e\u4e09\u4f4d\u8fdb\u884c\u8fd0\u7b97\u540e\u5f97\u5230\u6700\u540e\u7684\u9ed8\u8ba4\u503c.. \u25b3 \u6587\u4ef6\u6743\u9650\u8ba1\u7b97\u65b9\u6cd5 : \u5076\u6570\u4f4d\u76f4\u63a5\u76f8\u51cf, \u5947\u6570\u4f4d\u76f8\u51cf\u540e\u52a01 \u5373umask\u4f4d\u6570\u4e0a\u7684\u503c\u4e3a\u5076\u6570,\u76f4\u63a5\u88ab\u51cf; \u82e5umask\u4f4d\u6570\u4e0a\u7684\u503c\u4e3a\u5947\u6570,\u88ab\u51cf\u540e\u52a0\u4e00; eg: umask 0325; \u521b\u5efa\u6587\u4ef6 (6-3+1 6-2 6-5+1) = 442 \u25b3 \u76ee\u5f55\u6743\u9650\u8ba1\u7b97\u65b9\u6cd5 \uff1a\u76f4\u63a5\u76f8\u51cf\u5373\u53ef eg: umask 0325; \u521b\u5efa\u76ee\u5f55 (7-3 7-2 7-5) = 452 \u4e34\u65f6/\u6c38\u4e45\u8bbe\u7f6e \u00b6 \"\"\" \u4e34\u65f6\u4fee\u6539umask\u503c \"\"\" ` umask 000 ` \"\"\" \u6c38\u4e45\u4fee\u6539umask\u503c -- \u5373\u4fee\u6539\u5bf9\u5e94\u7684\u6587\u4ef6 Ps: \u6ca1\u5fc5\u8981\u52a8\u5b83.. Hhh \"\"\" ## \u6216\u8005vim /etc/bashrc \u5185\u5bb9\u662f\u4e00\u6837\u7684 [ root@localhost opt ] # vim /etc/profile ...... if [ $UID -gt 199 ] && [ \"`id -gn`\" = \"`id -un`\" ] ; then umask 002 // uid\u5927\u4e8e\u7b49\u4e8e199\u7684\u9ed8\u8ba4umask\u503c,\u8868\u793a\u4e00\u4e9b\u7cfb\u7edf\u7528\u6237\u548c\u6240\u6709\u666e\u901a\u7528\u6237 else umask 022 // uid\u5c0f\u4e8e199\u7684\u9ed8\u8ba4umask\u503c,\u5305\u542broot\u7528\u6237 fi","title":"\u6743\u9650\u7ba1\u7406\u4e4b\u6587\u4ef6\u6743\u9650"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_1","text":"[ root@localhost opt ] # ll 1.txt -rw-r--r-- 1 root root 4 7\u6708 19 18 :56 1 .txt Ps: root\u7528\u6237\u53ef\u4e0d\u53d7\u6743\u9650\u538b\u5236, \u5e76\u6ca1\u6709\u8bf4root\u7ec4\u4e0d\u53d7\u6743\u9650\u538b\u5236!","title":"\u6587\u4ef6\u8be6\u7ec6\u4fe1\u606f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_2","text":"","title":"\u57fa\u672c\u6743\u9650"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_3","text":"\u5b57\u7b26 \u542b\u4e49 \u5173\u8054\u6570\u5b57 r \u53ef\u8bfb 4 w \u53ef\u5199 2 x \u53ef\u6267\u884c 1 \u6743\u9650\u662f\u4e0eugo\u76f8\u5bf9\u5e94\u7684,\u5373\u6743\u9650\u8981\u4e0eugo\u76f8\u5173\u8054\u624d\u6709\u610f\u4e49 \u4ee5 -rw-r--r--. \u4e3a\u4f8b \u7b2c\u4e00\u4f4d\u5bf9\u5e94\u6587\u4ef6\u7684\u7c7b\u578b,\u63a5\u4e0b\u67659\u4f4d3\u4f4d\u4e3a\u4e00\u7ec4\u5206\u522b\u5bf9\u5e94u\u3001g\u3001o. \u82e5\u6700\u540e\u8fd8\u6709\u4e2a\u70b9,\u8868\u793a\u6b64\u6587\u4ef6\u662f\u5728SElinux\u5df2\u52a0\u8f7d\u72b6\u6001\u4e0b ( \u975edisabled ) \u521b\u5efa,\u6b64\u6587\u4ef6\u53d7SElinux\u7684\u7ba1\u5236 \u6587\u4ef6\u7c7b\u578b\uff1a -: \u6587\u672c\u6587\u6863 d: \u76ee\u5f55 b: \u8bbe\u5907block c: \u5b57\u7b26\u8bbe\u5907 s: \u5957\u63a5\u5b57\u6587\u4ef6 l: \u8f6f\u94fe\u63a5","title":"\u6743\u9650\u7684\u7c7b\u578b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_4","text":"\u5b57\u7b26 \u542b\u4e49 u \u5c5e\u4e3b g \u5c5e\u7ec4 o \u5176\u5b83\u4eba","title":"\u6743\u9650\u7684\u5f52\u5c5e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_5","text":"chmod \u8bbe\u7f6e\u6743\u9650\u7684\u7c7b\u578b chown \u8bbe\u7f6e\u6743\u9650\u7684\u5f52\u5c5e \u5373\u7528\u6237\u548c\u7ec4","title":"\u8bbe\u7f6e\u6743\u9650"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#chmod","text":"\u6709\u4e09\u79cd\u65b9\u5f0f\u4fee\u6539\u6587\u4ef6\u6743\u9650\u7684\u7c7b\u578b: eg: r-- rw- r-- \u53d8\u4e3a rwx r-x rw- 1> \u52a0\u51cf\u6cd5 \u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\u589e\u589e\u51cf\u51cf chmod u+wx,g-w+x,o+w 1.txt 2> \u8d4b\u503c \u4e0d\u7ba1\u539f\u6765\u662f\u4ec0\u4e48,\u76f4\u63a5\u8986\u76d6 chmod u=rwx,g=rx,o=rw 1.txt \u82e5\u76f8\u540c\u53ef\u7b80\u5199 eg: chmod ug=rx,o=rw 1.txt 3> \u6570\u5b57 \u5fc5\u987b\u662f3\u4f4d\u6570 chmod 756 1.txt 4+2+1,4+1,4+2 chmod a=- test/a.txt a\u4ee3\u8868ugo --------- -R\u9009\u9879 \u610f\u5473\u7740\u9012\u5f52\u4fee\u6539,\u4e3b\u8981\u9488\u5bf9\u76ee\u5f55\u6587\u4ef6(\u6587\u4ef6\u5939)\u7684 \u5e76\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u65b0\u5efa\u7684 [ root@localhost opt ] # mkdir -p a/b/c [ root@localhost opt ] # touch a/b/c/d.txt [ root@localhost opt ] # ll -d a drwxr-xr-x 3 root root 15 7\u6708 28 10 :41 a [ root@localhost opt ] # ll -d a/b drwxr-xr-x 3 root root 15 7\u6708 28 10 :41 a/b [ root@localhost opt ] # ll -d a/b/c drwxr-xr-x 2 root root 19 7\u6708 28 10 :42 a/b/c [ root@localhost opt ] # ll a/b/c/d.txt -rw-r--r-- 1 root root 0 7\u6708 28 10 :42 a/b/c/d.txt [ root@localhost opt ] # chmod -R 777 a [ root@localhost opt ] # chmod -R 777 a [ root@localhost opt ] # ll -d a drwxrwxrwx 3 root root 15 7\u6708 28 10 :41 a [ root@localhost opt ] # ll -d a/b drwxrwxrwx 3 root root 15 7\u6708 28 10 :41 a/b [ root@localhost opt ] # ll -d a/b/c drwxrwxrwx 2 root root 19 7\u6708 28 10 :42 a/b/c [ root@localhost opt ] # ll a/b/c/d.txt -rwxrwxrwx 1 root root 0 7\u6708 28 10 :42 a/b/c/d.txt \"\"\" \u901a\u5e38\u5565\u65f6\u5019\u7528\u5462\uff1f\u4e0b\u8f7d\u67d0\u4e00\u8f6f\u4ef6\u90e8\u7f72\u5728\u4e3b\u673a\u4e0a,\u6279\u91cf\u4fee\u6539\u8f6f\u4ef6\u4e0b\u6240\u6709\u6587\u4ef6\u7684\u6743\u9650. \"\"\" Ps: \u5c06\u6587\u4ef6\u6743\u9650\u7f6e\u7a7a. chmod 000 file.txt ; chmod u=-,g=-,o=- a/b/c/d.txt (chmod ugo=rwx a/b/c/d.txt)","title":"chmod"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#chown","text":"chown dc.devops a.txt -- \u4fee\u6539\u5c5e\u4e3b,\u5c5e\u7ec4 chown dc a.txt -- \u53ea\u4fee\u6539\u5c5e\u4e3b chown .devops a.txt -- \u53ea\u4fee\u6539\u5c5e\u7ec4 chown dc. a.txt -- \u5c5e\u4e3b\u548c\u5c5e\u7ec4\u4f1a\u4e00\u6837, \u7b49\u540c\u4e8e chown dc.dc a.txt -R\u9009\u9879 \u610f\u5473\u7740\u9012\u5f52\u4fee\u6539,\u4e3b\u8981\u9488\u5bf9\u76ee\u5f55\u6587\u4ef6(\u6587\u4ef6\u5939)\u7684 \u5e76\u4e0d\u4f1a\u5f71\u54cd\u540e\u7eed\u65b0\u5efa\u7684 [ root@localhost opt ] # chown -R dc.dc a [ root@localhost opt ] # ll -d a drwxrwxrwx 3 dc dc 15 7\u6708 28 10 :41 a [ root@localhost opt ] # ll -d a/b/ drwxrwxrwx 3 dc dc 15 7\u6708 28 10 :41 a/b/ [ root@localhost opt ] # ll -d a/b/c drwxrwxrwx 2 dc dc 19 7\u6708 28 10 :42 a/b/c [ root@localhost opt ] # ll -d a/b/c/d.txt -rwxrwxrwx 1 dc dc 0 7\u6708 28 10 :42 a/b/c/d.txt","title":"chown"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_6","text":"\u9488\u5bf9\u6587\u4ef6 ( \u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9 ) r: \u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9 ` cat ` w: \u4fee\u6539\u6587\u4ef6\u5185\u5bb9 ` vim ` ` echo >> > \u8ffd\u52a0,\u8986\u76d6 ` x: \u53ef\u4ee5\u628a\u6587\u4ef6\u5f53\u4f5c\u4e00\u4e2a\u547d\u4ee4/\u7a0b\u5e8f\u6765\u8fd0\u884c ( \u524d\u63d0\u662f\u6b64\u6587\u4ef6\u5f97\u662f\u4e2a\u4ee3\u7801\u6587\u4ef6 ) \u82e5\u8be5\u6587\u4ef6\u7684\u4ee3\u7801\u662f\u7f16\u8bd1\u597d\u7684\u7ed3\u679c,\u90a3\u4e48\u53ea\u6709x\u6743\u9650\u5373\u53ef\u6267\u884c ; \u82e5\u8be5\u6587\u4ef6\u7684\u4ee3\u7801\u662f\u4e00\u4e2a\u89e3\u91ca\u578b\u7684\u811a\u672c\u7a0b\u5e8f,\u5219\u8fd8\u9700\u8981\u914d\u5408r\u6743\u9650\u624d\u53ef\u6267\u884c rx \u9488\u5bf9\u76ee\u5f55 ( \u64cd\u4f5c\u67d0\u4e00\u76ee\u5f55\u4e0b\u7684\u5b50\u6587\u4ef6\u5939\u6216\u5b50\u6587\u4ef6 \u521b\u5efa\u5220\u9664\u79fb\u52a8 ) r: \u53ef\u4ee5\u6d4f\u89c8\u8be5\u76ee\u5f55\u4e0b\u7684\u5b50\u76ee\u5f55\u540d\u548c\u5b50\u6587\u4ef6\u540d\u5b57,\u610f\u5473\u7740\u80fd ` ls ` ` ll ` \u7f57\u5217\u76ee\u5f55\u6587\u4ef6\u4e0b\u7684\u6709\u54ea\u4e9b\u4e1c\u897f w: \u53ef\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa ` touch ` \u3001\u5220\u9664 ` rm ` \u3001\u79fb\u52a8\u5b50\u6587\u4ef6\u6216\u5b50\u6587\u4ef6\u5939 ` mv ` x: \u53ef\u4ee5\u8fdb\u5165\u8be5\u76ee\u5f55,\u610f\u5473\u7740\u80fd ` cd ` \u5230\u6b64\u8def\u5f84\u4e0b \u5373\u6211\u4eec\u9700\u8981\u64cd\u4f5c ( \u589e\u5220\u6539 ) \u76ee\u5f55\u4e0b\u7684\u5185\u5bb9,\u5c31\u5f97\u5148\u80fd\u8fdb\u5165\u8be5\u76ee\u5f55,\u5f97\u5148\u62e5\u6709\u8be5\u76ee\u5f55\u7684x\u6267\u884c\u6743\u9650 \u5177\u4f53\u6765\u8bf4: \u53ef\u4ee5\u6b63\u5e38\u5207\u6362\u5230\u76ee\u5f55\u4e0b,\u82e5\u6d89\u53ca\u5230\u591a\u5c42\u76ee\u5f55\u5982/a/b/c,\u9700\u8981\u5bf9\u6bcf\u4e00\u7ea7\u90fd\u6709x\u6743\u9650\u624d\u53ef\u4ee5\u6b63\u5e38\u8d70\u5230\u4e0b\u4e00\u7ea7 \u25bc \u6587\u4ef6\u4e0d\u7ba1\u662f\u5426\u6709r,\u90fd\u53ef\u4ee5ls ; \u76ee\u5f55\u6ca1\u6709r,\u4e0d\u80fdls","title":"\u6743\u9650\u7684\u4f5c\u7528/\u610f\u4e49!!!"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_7","text":"\u2606 \u64cd\u4f5c\u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\u5185\u5bb9 \u67e5\u770b\u67d0\u4e00\u4e2a\u6587\u4ef6\u5185\u5bb9\u9700\u8981\u5177\u5907\u7684\u6743\u9650: \u5bf9\u6240\u6709\u6587\u4ef6\u5939\u7684x\u6743\u9650\u4ee5\u53ca\u5bf9\u76ee\u6807\u6587\u4ef6\u7684r\u6743\u9650 \u89e3\u6790: /a/b/c.txt \u8be5\u7528\u6237\u8981\u80fdcd\u4e00\u5c42\u5c42\u7684\u5207\u5230\u8def\u5f84/a/b\u8def\u5f84\u4e0b,\u5373\u9700\u8981\u5bf9 /a/b \u76ee\u5f55\u6587\u4ef6\u4ee5\u53ca\u6cbf\u9014\u7684 / /a \u76ee\u5f55\u6587\u4ef6\u6709x\u6743\u9650; \u8981\u80fd\u8bfb\u53d6\u6587\u4ef6\u7684\u5185\u5bb9,\u9700\u8981\u5bf9 c.txt \u6709r\u6743\u9650.","title":"\u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_8","text":"\u2606 \u64cd\u4f5c\u6587\u4ef6\u5939\u4e0b\u7684\u5b50\u6587\u4ef6\u4e0e\u5b50\u6587\u4ef6\u5939(\u6ce8\u610f\u4e0d\u662f\u6587\u4ef6\u5185\u5bb9) \u5728\u76ee\u5f55\u4e0b\u521b\u5efa\u3001\u5220\u9664\u3001\u79fb\u52a8\u6587\u4ef6\u9700\u8981\u7684\u6743\u9650: \u5bf9\u6cbf\u9014\u6240\u6709\u6587\u4ef6\u5939\u7684x\u6743\u9650\u4ee5\u53ca\u5bf9\u76ee\u6807\u6587\u4ef6\u5939\u7684w\u6743\u9650 \u89e3\u6790: \u5728/a/b\u76ee\u5f55\u4e0b\u521b\u5efac.txt\u6587\u4ef6,\u5f97\u5148\u80fdcd\u5230/a/b\u8def\u5f84\u4e0b; \u9700\u8981\u5bf9b\u6587\u4ef6\u5939\u6709w\u5199\u6743\u9650,\u624d\u80fdtouch\u521b\u5efac.txt\u6587\u4ef6.","title":"\u64cd\u4f5c\u6587\u4ef6\u5939"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_9","text":"\u7b2c\u4e00\u6b65: \u7528\u6237\u5fc5\u987b\u8981\u5bf9\u6cbf\u9014\u7684\u6587\u4ef6\u5939\u90fd\u6709\u4e00\u4e2ax\u6267\u884c\u6743\u9650; \u200b \u7b2c\u4e8c\u6b65: \u7528\u6237\u770b\u5177\u4f53\u8981\u6c42 \u200b 1> \u5bf9\u6587\u4ef6\u5939\u7684\u64cd\u4f5c(\u4e0d\u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9), r\u4ee3\u8868\u53ef\u4ee5\u6d4f\u89c8,w\u4ee3\u8868\u53ef\u4ee5\u521b\u5efa\u5220\u9664\u79fb\u52a8\u5b50\u6587\u4ef6\u548c\u5b50\u76ee\u5f55. \u200b 2> \u5bf9\u6587\u4ef6\u7684\u64cd\u4f5c(\u64cd\u4f5c\u6587\u4ef6\u5185\u5bb9), r\u4ee3\u8868\u53ef\u4ee5\u8bfb\u6587\u4ef6\u5185\u5bb9,w\u4ee3\u8868\u53ef\u4ee5\u4fee\u6539\u6587\u4ef6\u5185\u5bb9. \u200b vim \u5199\u5165\u5185\u5bb9 wq!\u5f3a\u5236\u8986\u76d6,\u9700\u8981\u7684\u6743\u9650:(\u4e8c\u9009\u4e00) \u200b \u6cbf\u9014\u7684\u6587\u4ef6\u5939\u90fd\u6709\u4e00\u4e2ax\u6267\u884c\u6743\u9650, \u76ee\u6807\u6587\u4ef6 -w- \u76ee\u6807\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939 --x \u200b \u6cbf\u9014\u7684\u6587\u4ef6\u5939\u90fd\u6709\u4e00\u4e2ax\u6267\u884c\u6743\u9650, \u76ee\u6807\u6587\u4ef6 --- \u76ee\u6807\u6587\u4ef6\u6240\u5728\u6587\u4ef6\u5939 -wx \u25b2 1 > \u82e5\u7528\u6237\u5bf9\u6cbf\u9014\u6240\u6709\u6587\u4ef6\u5939\u53ea\u6709x\u6743\u9650,\u5bf9\u76ee\u6807\u6587\u4ef6\u6ca1\u6709r\u8bfb\u6743\u9650,\u6709w\u5199\u6743\u9650 [ root@localhost opt ] # cat a.txt 111 \uff01\uff01\uff01\u6ce8\u610f\uff01\uff01\uff01vim \u7b80\u5355\u6765\u8bf4,vim\u7684\u539f\u7406\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4e00\u4e0b\u5b50\u4ece\u786c\u76d8\u5168\u90e8\u8bfb\u5230\u5185\u5b58\u4e2d,\u5728\u5185\u5b58\u4e2d\u6539\u5b8c\u540e,\u518d\u4e00\u6b21\u6027\u5168\u90e8\u8986\u76d6\u786c\u76d8\u7684\u539f\u6587\u4ef6.. \u6ca1\u6709r\u8bfb\u6743\u9650 -- vim\u6253\u5f00\u6587\u4ef6\u65f6,\u867d\u7136\u4e0d\u4f1a\u62a5\u9519,\u4f46\u662f\u7a7a\u7684,\u5565\u5185\u5bb9\u4e5f\u6ca1\u6709.. \u6709w\u5199\u6743\u9650 -- \u5199\u540e\u53ef\u4ee5wq!\u5f3a\u5236\u4fdd\u5b58.. \u5199\u7684\u5185\u5bb9\u662f\u5728\u5185\u5b58\u91cc,wq!\u540e\u76f4\u63a5\u8986\u76d6\u4e86\u786c\u76d8\u4e2d\u539f\u6765\u7684\u5185\u5bb9... \u5728\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u4f1a\u63d0\u793a \"\u8b66\u544a:\u6b63\u5728\u4fee\u6539\u4e00\u4e2a\u53ea\u8bfb\u6587\u4ef6\" ; \"\u8bf7\u52a0!\u5f3a\u5236\u6267\u884c\" Ps: \u5410\u69fd,\u660e\u660e\u9488\u5bf9\u5f53\u524d\u7528\u6237\u800c\u8a00,\u5bf9\u8be5\u6587\u4ef6\u53ea\u6709\u5199\u6743\u9650,\u8fd8\u63d0\u793a\u6b63\u5728\u4fee\u6539\u4e00\u4e2a\u53ea\u8bfb\u6587\u4ef6Hhhh. \u4e5f\u8bb8\u662f\u5f00\u53d1\u8005\u5728\u63d0\u9192\u4f60\u6ca1\u770b\u5230\u6e90\u5185\u5bb9\u6700\u597d\u522b\u4fee\u6539.\u7ad9\u7684\u89d2\u5ea6\u4e0d\u540c. \u8865\u5145:echo \u56e0\u4e3a\u6709\u5199\u6743\u9650, ` echo 222 >> a.txt ` ; ` echo 3333 > a.txt ` ; \u90fd\u4f1a\u6210\u529f. \u25b2 2 > \u5f53\u524d\u7528\u6237lili\u5bf9\u6cbf\u9014\u6240\u6709\u6587\u4ef6\u5939\u90fd\u6709x\u6743\u9650\u5e76\u4e14\u5f53\u524d\u7528\u6237\u5bf9c\u6587\u4ef6\u5939\u6709w\u6743\u9650,\u4f46\u662flili\u5bf9d.txt\u6587\u4ef6\u6ca1\u6709\u6743\u9650 /a/b/c/d.txt ## -wx [ root@localhost opt ] # ll -d a/b/c drwxr-x-wx 1 root root 22 7\u6708 28 18 :42 a/b/c ## --- [ root@localhost opt ] # ll a/b/c/d.txt -rw-r------ 1 root root 21 7\u6708 28 18 :42 a/b/c/d.txt lili\u5bf9c\u6587\u4ef6\u5939\u6709w\u6743\u9650,\u90a3\u4e48lili\u53ef\u4ee5\u5220\u9664d.txt,\u518dtouch\u521b\u5efa\u4e00\u4e2a\u65b0\u7684d.txt,\u66f2\u7ebf\u6551\u56fd. \u4f46\u4e0d\u9700\u8981\u4e00\u6b65\u6b65\u7684\u64cd\u4f5c,vim\u53ef\u4ee5\u4e00\u6b65\u5230\u4f4d. lili\u53ef\u4ee5vim\u7f16\u8f91\u6587\u4ef6\u5185\u5bb9,\u5e76\u4e14\u53ef\u4ee5wq!\u5f3a\u5236\u4fdd\u5b58\u9000\u51fa\u5b8c\u6210\u6587\u4ef6\u4fee\u6539.\u5e95\u5c42\u539f\u7406\u5c31\u662f\u5c06\u6e90\u6587\u4ef6\u5220\u6389\u4e86. ( \u8fd9\u4e00\u8fc7\u7a0b\u662f\u4e0d\u662f\u8ddf\u4e0a\u9762\u7684\u7b2c\u4e00\u70b9\u76f8\u4f3c,\u5bf9\u7684,\u4ed6\u4eec\u5b9e\u73b0\u7684\u6700\u7ec8\u6548\u679c\u662f\u4e00\u6837\u7684 ) \u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u524d\u540e\u64cd\u4f5c\u7684\u6587\u4ef6inode\u53f7\u6765\u786e\u5b9a. ## \u6587\u4ef6\u7684\u5c5e\u4e3b\u548c\u5c5e\u7ec4\u53d8\u5566.\u4e5f\u5c31\u4fa7\u9762\u9a8c\u8bc1\u4e86\u6e90\u6587\u4ef6\u5220\u9664\u5566,\u65b0\u6587\u4ef6\u662flili\u521b\u5efa\u7684. [ root@localhost opt ] # ll a/b/c/d.txt -rw-r------ 1 lili lili 15 7\u6708 28 18 :42 a/b/c/d.txt","title":"\u603b\u7ed3"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_10","text":"\u2606 \u5bf9\u6587\u4ef6\u7684\u6267\u884c\u6743\u9650 \u5bf9\u6587\u4ef6\u62e5\u6709\u6267\u884c\u6743\u9650\u610f\u5473\u7740\u53ef\u4ee5\u628a\u6587\u4ef6\u5f53\u6210\u547d\u4ee4\u8fd0\u884c \"\"\" linux\u4e00\u5207\u7686\u6587\u4ef6 \u53ef\u4ee5\u89c2\u6d4b\u5230 ugo\u5bf9/usr/bin/cat\u6587\u4ef6\u90fd\u6709x\u53ef\u6267\u884c\u6743\u9650 \"\"\" [ root@localhost opt ] # which echo /usr/bin/echo [ root@localhost opt ] # ll /usr/bin/echo -rwxr-xr-x. 1 root root 33088 11\u6708 17 2020 /usr/bin/echo \"\"\" \u5c06echo\u547d\u4ee4\u6240\u5728\u7684\u6587\u4ef6\u62f7\u8d1d\u5230/opt/t1/t2\u76ee\u5f55\u4e0b,\u5e76\u8d4b\u4e88\u6700\u57fa\u672c\u7684\u6587\u4ef6\u53ef\u6267\u884c\u6743\u9650 \"\"\" [ root@localhost opt ] # mkdir -p /opt/t1/t2 [ root@localhost opt ] # cp /usr/bin/echo /opt/t1/t2 [ root@localhost opt ] # chmod o=x /opt/t1/t2/echo [ root@localhost opt ] # head -3 /opt/t1/t2/echo ELF>J@@?y@8 @@@@@@?88@8@@@?^?^ ?m?m ` ?m ` ??nn ` ?TT@T@DDP?td?Q?Q@?Q@<<Q?tdR?td?m?m ` ?m ` XX/lib64/ld-linux-x86-64.so.2GNU GNU???IDk?????#?DT?vX!C??z?8??q? ?H??X0?@?? \\> \"\"\" .sh\u8868\u660e\u6b64\u6587\u4ef6\u8981\u88abshell\u89e3\u91ca\u5668\u89e3\u9501\u6267\u884c,\u8d4b\u4e88\u4e86a.sh\u6700\u57fa\u672c\u7684\u53ef\u6267\u884c\u6743\u9650 \"\"\" [ root@localhost opt ] # touch /opt/t1/t2/a.sh [ root@localhost opt ] # vim /opt/t1/t2/a.sh [ root@localhost opt ] # cat /opt/t1/t2/a.sh echo \"hello\" echo \"world\" echo \"hahah\" [ root@localhost opt ] # chmod o=x /opt/t1/t2/a.sh \"\"\" \u67e5\u770b\u6743\u9650 \"\"\" [ root@localhost opt ] # ll /opt/t1/t2 \u603b\u7528\u91cf 40 -rw-r----x 1 root root 39 7\u6708 30 17 :10 a.sh -rwxr-x--x 1 root root 33088 7\u6708 30 17 :18 echo \"\"\" \u767b\u5f55\u666e\u901a\u7528\u6237dc \u6267\u884c/opt/t1/t2/echo\u548c/opt/t1/t2/a.sh\u4e24\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 \uff01\uff01\uff01\uff01\uff01\uff01\u524d\u8005\u53ef\u6267\u884c\u6210\u529f,\u540e\u8005\u5931\u8d25 why? \u56e0\u4e3aecho\u6587\u4ef6\u662f\u7f16\u8bd1\u597d\u7684\u7ed3\u679c,\u4e0d\u9700\u8981shell\u89e3\u91ca\u5668\u89e3\u91ca\u5566,\u53ea\u9700\u8981x\u6743\u9650\u5373\u53ef\u6267\u884c; \u4f46a.sh\u6587\u4ef6\u7684\u4ee3\u7801\u662f\u4e00\u4e2a\u89e3\u91ca\u578b\u7684\u811a\u672c\u7a0b\u5e8f,\u5373\u9700\u8981shell\u89e3\u91ca\u5668\u8bfb\u51fa\u6765\u7ffb\u8bd1\u6210\u4e8c\u8fdb\u5236\u518d\u8fd0\u884c,\u5219\u9700\u8981\u914d\u5408r\u6743\u9650\u624d\u53ef\u6267\u884c \"\"\" [ dc@localhost opt ] $ /opt/t1/t2/echo wawo wawo [ dc@localhost opt ] $ /opt/t1/t2/a.sh bash: /opt/t1/t2/a.sh: \u6743\u9650\u4e0d\u591f \"\"\" root\u7528\u6237\u4fee\u6539a.sh\u7684\u6743\u9650\u4e3arx dc\u7528\u6237\u91cd\u65b0\u6267\u884ca.sh\u6587\u4ef6 \u6210\u529f!!! \"\"\" [ root@localhost opt ] # chmod o=rx /opt/t1/t2/a.sh [ dc@localhost opt ] $ /opt/t1/t2/a.sh hello world hahah","title":"\u6587\u4ef6\u6267\u884c"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#suid","text":"","title":"SUID"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_11","text":"\u666e\u901a\u7528\u6237dc\u53ef\u4ee5\u7528 passwd \u547d\u4ee4\u4fee\u6539\u81ea\u5df1\u7684\u8d26\u53f7\u5bc6\u7801,\u6211\u4eec\u6e05\u695a\u7684\u77e5\u9053\u4fee\u6539\u5bc6\u7801\u5219\u662f\u5728\u4fee\u6539 /etc/shadow \u6587\u4ef6.. \u4f46dc\u666e\u901a\u7528\u6237\u5bf9\u4e8e /etc/shadow \u6587\u4ef6\u800c\u8a00, \u4e0d\u662froot\u4e5f\u4e0d\u5c5e\u4e8eroot\u7ec4,\u5c5e\u4e8e \u5176\u5b83\u4eba ,\u5176\u6743\u9650\u4e3a --- \u5373\u6ca1\u6709\u4efb\u4f55\u6743\u9650. \u903b\u8f91\u4e0a\u51b2\u7a81\u4e86\u554a!? \u662f\u600e\u4e48\u4e00\u56de\u4e8b\u5462? \u6084\u6084\u544a\u8bc9\u4f60,\u662f SUID \u4ece\u4e2d\u4f5c\u795f. [ root@localhost opt ] # ll /etc/shadow ---------- 1 root root 1388 7\u6708 4 16 :53 /etc/shadow [ dc@localhost opt ] $ passwd \u66f4\u6539\u7528\u6237 dc \u7684\u5bc6\u7801 \u3002 \u4e3a dc \u66f4\u6539 STRESS \u5bc6\u7801\u3002 \uff08\u5f53\u524d\uff09UNIX \u5bc6\u7801\uff1a \u65b0\u7684 \u5bc6\u7801\uff1a ... ... ... \u5728UNIX\u7cfb\u5217\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\u9762, \u786e\u5b9a\u7528\u6237\u7684\u8eab\u4efd\u662f\u901a\u8fc7UID\u53f7\u786e\u5b9a\u7684,\u8ddf\u7528\u6237\u540d\u6ca1\u6709\u5173\u7cfb.. \u9ed8\u8ba4\u4ee5\u767b\u5f55\u7528\u6237\u7684uid\u548cgid\u4e3a\u51c6.. \u4f46\u9664\u4e86 UID \u4e0e GID \u8fd8\u6709 euid \u4e0e egid ,\u5b83\u4e24\u4ee3\u8868\u6267\u884c\u7a0b\u5e8f\u65f6,\u771f\u6b63\u91c7\u7528\u7684\u7528\u6237id\u4e0e\u7ec4id. ps:e\u662feffective\u6709\u6548\u7684\u610f\u601d \u767b\u5f55dc\u7528\u6237,\u4f7f\u7528\u547d\u4ee4\u542f\u7528\u76f8\u5e94\u7684\u8fdb\u7a0b..\u8fdb\u7a0b\u7684\u6743\u9650\u5c31\u662f\u5f53\u524d\u767b\u5f55\u7528\u6237dc\u7684\u6743\u9650. \u5373\u8fdb\u7a0b\u7684uid\u548cgid\u90fd\u662fdc. unix\u5728\u8fdb\u7a0b\u771f\u6b63\u8fd0\u884c\u7684\u65f6\u5019\u4f1a\u8fdb\u884c\u8f6c\u6362\u7684,\u5c06uid\u5173\u8054euid,gid\u5173\u8054egid. \u9ed8\u8ba4\u60c5\u51b5\u4e0b,uid==euid;gid==egid \u662f\u76f8\u7b49\u7684! \u4f46\u662f\u53ef\u4ee5\u6539\u53d8\uff01","title":"\u629b\u51fa\u95ee\u9898"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#suid_1","text":"suid\u4f5c\u7528\u4e8e\u53ef\u6267\u884c\u7684\u547d\u4ee4,\u610f\u5473\u7740\u65e0\u8bba\u54ea\u4e2a\u7528\u6237\u6765\u8fd0\u884c\u6b64\u547d\u4ee4,\u5b83\u7684\u8eab\u4efd\u90fd\u4f1a\u8f6c\u6362\u6210\u6b64\u547d\u4ee4\u7684\u4e3b\u4eba\u6765\u8fd0\u884c. \u5373\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u5019,euid\u662f\u8be5\u547d\u4ee4\u4e3b\u4eba\u7684uid..\u4e0d\u662f\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684uid.. [ root@localhost opt ] # ll /etc/shadow ---------- 1 root root 1388 7\u6708 4 16 :53 /etc/shadow [ root@localhost ~ ] # ll `which passwd` -rwsr-xr-x. 1 root root 27856 4\u6708 1 2020 /usr/bin/passwd [ root@localhost opt ] # ll `which su` -rwsr-xr-x. 1 root root 32128 2\u6708 3 2021 /usr/bin/su \u8fd9\u4e2as\u5c31\u4ee3\u8868\u7740\u4e8c\u8fdb\u5236\u6587\u4ef6\u5177\u6709SUID\u6743\u9650 \u8fd9\u91cc\u663e\u793a\u7684\u5c0fs\u662f\u56e0\u4e3a\u5c5e\u4e3b\u672c\u8eab\u5177\u6709x\u6267\u884c\u6743\u9650; \u82e5\u5c5e\u4e3b\u6ca1\u6709x\u6267\u884c\u6743\u9650,\u90a3\u4e48\u663e\u793a\u7684\u662f\u5927S. [\u7279\u70b9] \u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 \u5f53\u524d\u767b\u5f55\u7528\u6237/\u4f7f\u7528\u8005\u5bf9\u5176\u62e5\u6709x\u53ef\u6267\u884c\u6743\u9650 \u5728\u6267\u884c\u8be5\u547d\u4ee4\u7684\u8fc7\u7a0b\u4e2d \u25cb SUID\u6743\u9650\u4ec5\u5bf9\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u6709\u6548 bin\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6,\u90a3\u4e9b\u547d\u4ee4! \u25cb \u5982\u679c\u6267\u884c\u8005\u5bf9\u4e8e\u8be5\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u5177\u6709 x \u7684\u6743\u9650, \u6267\u884c\u8005\u5c06\u5177\u6709\u8be5\u6267\u884c\u6587\u4ef6\u7684\u5c5e\u4e3b\u7684\u6743\u9650 \u5373\u5f53\u524d\u767b\u5f55\u7528\u6237\u5728\u4f7f\u7528\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u65f6\u8eab\u4efd\u4e34\u65f6\u8f6c\u6362\u6210\u8be5\u6267\u884c\u6587\u4ef6\u7684\u5c5e\u4e3b \u25cb \u672c\u6743\u9650 \u4ec5\u5728\u6267\u884c\u8be5\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u7684\u8fc7\u7a0b\u4e2d \u6709\u6548 \u5373\u4ec5\u9650\u4e8e\u6267\u884c\u547d\u4ee4\u7684\u64cd\u4f5c.. [\u4f7f\u7528\u8fc7\u7a0b] \u666e\u901a\u7528\u6237dc\u5229\u7528 SUID \u6743\u9650\u5b8c\u6210\u5bc6\u7801\u4fee\u6539\u7684\u8fc7\u7a0b\u5982\u4e0b: 1> dc\u7528\u6237\u5bf9\u4e8e /usr/bin/passwd \u8fd9\u4e2a\u7a0b\u5e8f\u5177\u6709\u6267\u884c\u6743\u9650, \u56e0\u6b64\u53ef\u4ee5\u6267\u884cpasswd\u547d\u4ee4/\u7a0b\u5e8f 2> passwd \u7a0b\u5e8f\u7684\u6240\u6709\u8005\u4e3a root; dc\u7528\u6237\u6267\u884c passwd \u7a0b\u5e8f\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u6682\u65f6\u83b7\u5f97root\u6743\u9650 3> root\u4e0d\u53d7\u6743\u9650\u7684\u538b\u5236,\u56e0\u6b64dc\u7528\u6237\u5728 \u6267\u884cpasswd\u7a0b\u5e8f\u7684\u8fc7\u7a0b\u4e2d \u53ef\u4ee5\u4fee\u6539 /etc/shadow \u6587\u4ef6","title":"SUID\u7279\u70b9\u53ca\u4f7f\u7528\u8fc7\u7a0b"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_12","text":"\"\"\" \u53ef\u4ee5\u770b\u5230,root\u7528\u6237\u4e0d\u53d7\u6743\u9650\u538b\u5236\u53ef\u4ee5\u770b\u5230a.txt\u7684\u5185\u5bb9 \u4f46\u662f\u666e\u901a\u7528\u6237dc\u4e0d\u80fd,\u6743\u9650\u4e0d\u591f.. \"\"\" [ root@localhost opt ] # mkdir test [ root@localhost opt ] # chmod 777 test [ root@localhost opt ] # echo 123456 > test/a.txt [ root@localhost opt ] # chmod 000 test/a.txt [ root@localhost opt ] # ll test/a.txt ---------- 1 root root 7 8\u6708 1 09 :40 test/a.txt [ root@localhost opt ] # cat test/a.txt 123456 [ dc@localhost ~ ] $ cat /opt/test/a.txt cat: /opt/test/a.txt: \u6743\u9650\u4e0d\u591f Q: \u5982\u4f55\u5728 \u4e0d\u6539\u53d8 \u6587\u4ef6a.txt\u7684\u6743\u9650\u60c5\u51b5\u4e0b,\u8ba9\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7684\u5185\u5bb9? \"\"\" \u56e0\u4e3a\u7279\u6b8a\u6743\u9650suid\u7684\u7f18\u6545,\u610f\u5473\u7740\u53ea\u8981\u6267\u884ccat\u547d\u4ee4,\u7528\u6237\u7684\u8eab\u4efd\u5c31\u53d8\u6210\u4e86root \"\"\" [ root@localhost opt ] # ll `which cat` -rwxr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat ## chmod 4755 `which cat` [ root@localhost opt ] # chmod u+s /usr/bin/cat [ root@localhost opt ] # ll `which cat` -rwsr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # su - dc -c \"cat /opt/test/a.txt\" 123456 \"\"\" \u9a8c\u8bc1,\u767b\u5f55\u7528\u6237\u5fc5\u987b\u5177\u5907\u5bf9\u6267\u884c\u6587\u4ef6(\u547d\u4ee4\u5bf9\u5e94\u7684\u6587\u4ef6)\u6709x\u6267\u884c\u6743\u9650..\u4e0d\u7136\u54ea\u6015\u6709suid\u4e5f\u4e0d\u597d\u4f7f\u7528. \u903b\u8f91\u4e0a\u4e5f\u8bf4\u5f97\u8fc7\u53bb,\u4f60\u8fde\u6267\u884c\u547d\u4ee4\u7684\u6743\u9650\u90fd\u6ca1\u6709,\u5982\u4f55\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u8f6c\u6362\u8eab\u4efd\u5462\uff1f \"\"\" [ root@localhost opt ] # ll `which cat` -rwsr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # chmod o-x /usr/bin/cat [ root@localhost opt ] # ll `which cat` -rwsr-xr--. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # su - dc -c \"cat /opt/test/a.txt\" -bash: /bin/cat: \u6743\u9650\u4e0d\u591f \"\"\" \u8fd9\u6837\u505a\u975e\u5e38\u4e0d\u5b89\u5168,\u8bb0\u5f97\u6062\u590d\u64cd\u4f5c!! \"\"\" ## chmod u-s,o+x /usr/bin/cat [ root@localhost opt ] # chmod u=rwx,o=rx /usr/bin/cat","title":"\u5b9e\u9a8c\u8bc1\u660e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#sgid","text":"\u7528\u6237\u8fd0\u884c\u547d\u4ee4\u65f6\u4f7f\u7528\u7684\u662f\u547d\u4ee4\u6587\u4ef6\u6240\u5c5e\u7ec4\u7684\u8eab\u4efd...","title":"SGID"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_13","text":"Q: \u5982\u4f55\u5728 \u4ec5 \u6539\u53d8\u6587\u4ef61.txt\u7684\u5c5e\u7ec4\u7684\u6743\u9650\u7684\u60c5\u51b5\u4e0b,\u8ba9\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u7684\u5185\u5bb9? \"\"\" cat\u547d\u4ee4\u6709SGID\u6743\u9650\u540e,dc\u7528\u6237\u5728\u4f7f\u7528cat\u547d\u4ee4\u8bbf\u95ee1.txt\u6587\u4ef6\u65f6,\u6240\u62e5\u6709\u7684\u6743\u9650\u662froot\u7ec4\u7684\u6743\u9650 \u76f8\u5f53\u4e8edc\u4e34\u65f6\u5207\u5230root\u7ec4\u91cc.. \u56e0\u4e3a\u547d\u4ee4\u6587\u4ef6\u4e0e\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u7ec4\u662f\u4e00\u6837\u7684..\u6240\u4ee5\u6539\u53d8\u666e\u901a\u6587\u4ef6\u5c5e\u7ec4root\u7ec4\u7684\u6743\u9650\u5373\u53ef..(\u4e0d\u9700\u8981\u8003\u8651\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b) \u8fd9\u91cc\u76f8\u5f53\u4e8e\u5c06\u666e\u901a\u6587\u4ef6\u5c5e\u7ec4\u7684\u4f18\u5148\u7ea7\u63d0\u5230\u4e86\u5c5e\u4e3b\u4e4b\u524d.. \"\"\" [ root@localhost opt ] # ll /usr/bin/cat -rwxr-xr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # chmod g+s /usr/bin/cat [ root@localhost opt ] # ll /usr/bin/cat -rwxr-sr-x. 1 root root 54080 11\u6708 17 2020 /usr/bin/cat [ root@localhost opt ] # touch /opt/test/1.txt [ root@localhost opt ] # chmod 000 /opt/test/1.txt [ root@localhost opt ] # ll /opt/test/1.txt ---------- 1 root root 4 8\u6708 1 17 :36 /opt/test/1.txt [ root@localhost opt ] # echo 123 > /opt/test/1.txt [ root@localhost opt ] # su - dc -c \"cat /opt/test/1.txt\" cat: /opt/test/1.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # su - onepiece -c \"cat /opt/test/1.txt\" cat: /opt/test/1.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # chmod g+r /opt/test/1.txt [ root@localhost opt ] # su - dc -c \"cat /opt/test/1.txt\" 123 [ root@localhost opt ] # su - onepiece -c \"cat /opt/test/1.txt\" 123","title":"\u666e\u901a\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_14","text":"\u5f53\u4e00\u4e2a\u7528\u6237\u5bf9\u67d0\u4e00\u76ee\u5f55\u6709\u5199\u548c\u6267\u884c\u6743\u9650\u65f6,\u8be5\u7528\u6237\u5c31\u53ef\u4ee5\u5728\u8be5\u76ee\u5f55\u4e0b\u5efa\u7acb\u6587\u4ef6; \u5982\u679c\u8be5\u76ee\u5f55\u540c\u65f6\u7528SGID\u4fee\u9970,\u5219\u8be5\u7528\u6237\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u5efa\u7acb\u7684\u6587\u4ef6\u7684\u5c5e\u7ec4\u4e0e\u8fd9\u4e2a\u76ee\u5f55\u7684\u5c5e\u7ec4\u4e00\u81f4!!! \"\"\" \u76ee\u5f55\u6587\u4ef6\u548c\u666e\u901a\u6587\u4ef6\u662f\u8c01\u521b\u5efa\u7684,\u5176\u5c5e\u4e3b\u548c\u5c5e\u7ec4\u5c31\u662f\u8c01\uff01 \"\"\" [ root@localhost opt ] # mkdir /opt/aaa [ root@localhost opt ] # mkdir /opt/aaa/bbb [ root@localhost opt ] # touch /opt/aaa/b.txt [ root@localhost opt ] # chmod o+w /opt/aaa [ root@localhost opt ] # ll -d /opt/aaa drwxr-xrwx 3 root root 30 8\u6708 2 17 :53 /opt/aaa [ root@localhost opt ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 17 :53:33 CST 2022pts/0 \u4e0a [ dc@localhost ~ ] $ mkdir /opt/aaa/ccc [ dc@localhost ~ ] $ touch /opt/aaa/c.txt [ dc@localhost ~ ] $ ll /opt/aaa \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 6 8\u6708 2 17 :52 bbb -rw-r--r-- 1 root root 0 8\u6708 2 17 :53 b.txt drwxrwxr-x 2 dc dc 6 8\u6708 2 17 :55 ccc -rw-rw-r-- 1 dc dc 0 8\u6708 2 17 :55 c.txt \"\"\" \u7ed9\u76ee\u5f55\u6587\u4ef6/opt/aaa\u6dfb\u52a0\u7279\u6b8a\u6743\u9650SGID,\u5e76\u6539\u53d8\u5176\u5c5e\u7ec4\u4e3agroup1(\u4e0d\u7528root\u7ec4,\u7ed3\u679c\u66f4\u5177\u6807\u5fd7\u6027,\u66f4\u5bb9\u6613\u89c2\u5bdf) \u666e\u901a\u7528\u6237dc\u5728/opt/aaa\u4e0b\u521b\u5efa\u76ee\u5f55\u6587\u4ef6dir2\u548c\u666e\u901a\u6587\u4ef62.txt,\u5176\u5c5e\u7ec4\u4f1a\u4e0e/opt/aaa\u7684\u5c5e\u7ec4\u4fdd\u6301\u4e00\u81f4 \"\"\" [ root@localhost opt ] # groupadd group1 [ root@localhost opt ] # chown .group1 /opt/aaa [ root@localhost opt ] # chmod g+s /opt/aaa [ root@localhost opt ] # ll -d /opt/aaa drwxr-srwx 4 root group1 54 8\u6708 2 17 :55 /opt/aaa [ root@localhost opt ] # mkdir /opt/aaa/dir1 [ root@localhost opt ] # touch /opt/aaa/1.txt [ root@localhost opt ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 17 :55:30 CST 2022pts/0 \u4e0a [ dc@localhost ~ ] $ mkdir /opt/aaa/dir2 [ dc@localhost ~ ] $ touch /opt/aaa/2.txt [ dc@localhost ~ ] $ ll /opt/aaa \u603b\u7528\u91cf 0 -rw-r--r-- 1 root group1 0 8\u6708 2 18 :03 1 .txt \u25cf -rw-rw-r-- 1 dc group1 0 8\u6708 2 18 :04 2 .txt \u25cf drwxr-xr-x 2 root root 6 8\u6708 2 17 :52 bbb -rw-r--r-- 1 root root 0 8\u6708 2 17 :53 b.txt drwxrwxr-x 2 dc dc 6 8\u6708 2 17 :55 ccc -rw-rw-r-- 1 dc dc 0 8\u6708 2 17 :55 c.txt drwxr-sr-x 2 root group1 6 8\u6708 2 18 :03 dir1 \u25cf drwxrwsr-x 2 dc group1 6 8\u6708 2 18 :04 dir2 \u25cf","title":"\u76ee\u5f55\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#sbitsticky","text":"SBIT\u662f the restricted deletion flag or sticky bit \u7684\u7b80\u79f0,\u6709\u65f6\u4e5f\u79f0\u4e3aSticky \u7c98\u6ede\u4f4d SBIT \u76ee\u524d\u53ea\u5bf9\u76ee\u5f55\u6709\u6548,\u7528\u6765\u963b\u6b62\u975e\u6587\u4ef6\u7684\u5c5e\u4e3b\u5220\u9664\u6587\u4ef6. \"\"\" \u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\u5939share root\u8d26\u53f7\u4f9d\u6b21\u5207\u6362\u5230user01,user02,user03\u7528\u6237\u4e0b,\u5206\u522b\u5728\u5171\u4eab\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef61.txt\u30012.txt\u30013.txt \"\"\" [ root@localhost opt ] # mkdir /opt/share [ root@localhost opt ] # chmod 777 /opt/share/ [ root@localhost opt ] # useradd user01 [ root@localhost opt ] # useradd user02 [ root@localhost opt ] # useradd user03 [ root@localhost opt ] # su - user01 [ user01@localhost ~ ] $ touch /opt/share/1.txt [ user01@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # su - user02 [ user02@localhost ~ ] $ touch /opt/share/2.txt [ user02@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # su - user03 [ user03@localhost ~ ] $ touch /opt/share/3.txt [ user03@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # ll /opt/share/ \u603b\u7528\u91cf 0 -rw-rw-r-- 1 user01 user01 0 8\u6708 2 18 :16 1 .txt -rw-rw-r-- 1 user02 user02 0 8\u6708 2 18 :17 2 .txt -rw-rw-r-- 1 user03 user03 0 8\u6708 2 18 :17 3 .txt \"\"\" \u95ee\u9898\u6765\u5566,user01-03\u4e09\u4e2a\u7528\u6237\u4e0d\u4ec5\u80fd\u5220\u9664\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6,\u8fd8\u80fd\u5220\u9664\u5176\u4f59\u4e24\u4e2a\u7528\u6237\u521b\u5efa\u7684\u6587\u4ef6 \u6309\u7167\u903b\u8f91,\u672c\u7740\u5171\u4eab\u7684\u539f\u5219,user02\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u4e0a\u4f20\u76842.txt\u6587\u4ef6,\u4e0d\u80fd\u5220\u96641.txt\u4e0e3.txt\u6587\u4ef6.. \"\"\" [ root@localhost opt ] # su - user02 \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 18 :17:04 CST 2022pts/0 \u4e0a [ user02@localhost ~ ] $ rm -rf /opt/share/2.txt [ user02@localhost ~ ] $ rm -rf /opt/share/1.txt [ user02@localhost ~ ] $ rm -rf /opt/share/3.txt [ user02@localhost ~ ] $ exit \u767b\u51fa [ root@localhost opt ] # ll /opt/share/ \u603b\u7528\u91cf 0 \"\"\" \u8981\u60f3\u8ba9\u4e0a\u4f20\u8005\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u4e0a\u4f20\u7684\u6587\u4ef6,\u5c31\u9700\u8981\u7528\u5230\u7c98\u6ede\u4f4dSBIT \"\"\" [ root@localhost opt ] # ll -d /opt/share/ drwxrwxrwx 2 root root 6 8\u6708 2 18 :23 /opt/share/ [ root@localhost opt ] # chmod o+t /opt/share/ [ root@localhost opt ] # ll -d /opt/share/ drwxrwxrwt 2 root root 6 8\u6708 2 18 :23 /opt/share/ [ root@localhost opt ] # su - user01 -c \"touch /opt/share/1.txt\" [ root@localhost opt ] # su - user02 -c \"touch /opt/share/2.txt\" [ root@localhost opt ] # su - user03 -c \"touch /opt/share/3.txt\" [ root@localhost opt ] # ll /opt/share/ \u603b\u7528\u91cf 0 -rw-rw-r-- 1 user01 user01 0 8\u6708 2 18 :38 1 .txt -rw-rw-r-- 1 user02 user02 0 8\u6708 2 18 :39 2 .txt -rw-rw-r-- 1 user03 user03 0 8\u6708 2 18 :39 3 .txt [ root@localhost opt ] # su - user02 \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e8c 8\u6708 2 18 :39:05 CST 2022pts/0 \u4e0a [ user02@localhost ~ ] $ rm -rf /opt/share/1.txt rm: \u65e0\u6cd5\u5220\u9664 \"/opt/share/1.txt\" : \u4e0d\u5141\u8bb8\u7684\u64cd\u4f5c [ user02@localhost ~ ] $ rm -rf /opt/share/2.txt [ user02@localhost ~ ] $ rm -rf /opt/share/3.txt rm: \u65e0\u6cd5\u5220\u9664 \"/opt/share/3.txt\" : \u4e0d\u5141\u8bb8\u7684\u64cd\u4f5c Ps: liunx\u7684\u4e34\u65f6\u6587\u4ef6\u5939/tmp \u5176\u6743\u9650\u9ed8\u8ba4\u5c31\u662fdrwxrwxrwt. \u7528\u6765\u675c\u7edd a\u7528\u6237\u5f80\u91cc\u653e\u4e2a\u4e1c\u897f,b\u7528\u6237\u8fc7\u6765\u5c06\u5176\u5220\u6389 \u7684\u60c5\u51b5..","title":"SBIT/Sticky"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_15","text":"\u6709\u4e9b\u5b9e\u9a8c\u7684\u5177\u4f53\u6b65\u9aa4\u5199\u8d77\u6765\u592a\u7e41\u7410\u4e86... \u76f4\u63a5\u7565\u8fc7!!Please believe me,\u6211\u662f\u5b9e\u9a8c\u8fc7\u5f97\u5230\u7684\u7ed3\u8bba.. SUID -- \u9488\u5bf9\u5c5e\u4e3b -- u+s -- S+x=s SGID -- \u9488\u5bf9\u5c5e\u7ec4 -- g+s -- S+x=s SBIT -- \u9488\u5bf9\u5176\u4ed6\u4eba -- o+s -- T+x=t \u5b9e\u9645\u4e0a\u7279\u6b8a\u6743\u9650\u548cumask\u90fd\u4e0d\u4f1a\u600e\u4e48\u7528\u5230,\u4f46\u662f\u9700\u8981\u77e5\u9053\u662f\u4ec0\u4e48!!\u9047\u5230\u540e\u4e0d\u614c..Hhh","title":"\u7279\u6b8a\u6743\u9650\u603b\u7ed3\u2606"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_16","text":"\u3010\u6ca1\u6709\u7279\u6b8a\u6743\u9650\u3011 \"\"\" -rwxrw-r-- 1 egon IT 2351 7\u6708 18 18:12 /etc/passwd linux\u7cfb\u7edf\u628a\u6587\u4ef6\u6743\u9650\u5206\u4e3a\u4e86\u4e09\u7c7b:\u5c5e\u4e3b\u3001\u5c5e\u7ec4\u3001\u5176\u5b83\u4eba \u4e00\u4e2a\u7528\u6237\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u626b\u63cf\u7684\u4f18\u5148\u7ea7: \u25cb \u5148\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u4e3b \u25cb \u5728\u7b2c\u4e00\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u518d\u770b\u8be5\u7528\u6237\u662f\u5426\u662f\u6587\u4ef6\u7684\u5c5e\u7ec4 \u25cb \u5728\u7b2c\u4e8c\u6b65\u5931\u8d25\u7684\u60c5\u51b5\u4e0b,\u8be5\u7528\u6237\u5c5e\u4e8e\u5176\u4ed6\u4eba\u6743\u9650 \"\"\" 1 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65f6egon,egon\u6240\u5c5e\u7684\u90e8\u95e8\u662fIT\u90e8\u95e8. /etc/passwd\u7684\u62e5\u6709\u8005\u662fegon,\u90a3\u4e48egon\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u662frwx ; \u54ea\u6015egon\u5c5e\u4e8eIT\u90e8\u95e8,\u6587\u4ef6\u62e5\u6709\u8005\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e00\u4e9b. 2 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e0d\u662f\u6587\u4ef6\u7684\u62e5\u6709\u8005,\u662flili,lili\u662f\u5c5e\u4e8eIT\u90e8\u95e8\u7684,\u90a3\u4e48lili\u5bf9/etc/passwd\u7684\u6743\u9650\u4e3arw- 3 > \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u65e2\u4e0d\u662f\u6587\u4ef6\u7684\u4e3b\u4eba,\u4e5f\u4e0d\u662fIT\u90e8\u95e8\u91cc\u7684,\u90a3\u4e48\u5bf9\u5176\u62e5\u6709\u7684\u6743\u9650\u4e3ar-- \u63d0\u4e00\u5634,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u767b\u5f55\u7684\u666e\u901a\u7528\u6237\u5bf9\u547d\u4ee4\u90fd\u6709x\u6267\u884c\u6743\u9650..","title":"\u6ca1\u6709\u7279\u6b8a\u6743\u9650"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#suid_2","text":"\u767b\u5f55\u7528\u6237\u4f7f\u7528\u547d\u4ee4\u65f6\u83b7\u5f97\u8be5\u547d\u4ee4\u5c5e\u4e3b\u7684\u6743\u9650. \u5373\u4ee5\u547d\u4ee4\u5c5e\u4e3b\u7684\u8eab\u4efd\u53bb\u64cd\u63a7\u666e\u901a\u6587\u4ef6.. \u4e00\u5b9a\u8981\u6ce8\u610f\u4e00\u822c\u60c5\u51b5\u4e0b,\u8be5\u5c5e\u4e3b\u9762\u5bf9\u4e0d\u540c\u6587\u4ef6\u65f6,\u6743\u9650\u662f\u4e0d\u5c3d\u76f8\u540c\u7684!! \u524d\u7f6e\u6761\u4ef6: \u547d\u4ee4\u6587\u4ef6\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b\u90fd\u662f\u7528\u6237root;\u5c5e\u7ec4\u90fd\u662froot\u7ec4. \u73b0\u6709\u4e09\u4e2a\u666e\u901a\u7528\u6237 user1\u3001dc\u3001onepiece \u3010SUID\u3011 root\u7528\u6237\u4e0d\u53d7\u6743\u9650\u538b\u5236!\u968f\u4fbf\u6298\u817e\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b\u9700\u8981\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6.. \u666e\u901a\u6587\u4ef6\u6743\u9650\u662f\u5565\u90fd\u4e0d\u7528\u8003\u8651..\u5c31\u662f\u5982\u6b64\u8c6a\u6068.. ( \uffe3\u25bd\uffe3 ) 1 >: <root>\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u6587\u4ef6, ` chmod 000 \u666e\u901a\u6587\u4ef6 ` 2 >: ` chmod u+s \u547d\u4ee4\u6587\u4ef6 ` 3 >: <\u666e\u901a\u7528\u6237>\u53ef\u4ee5\u501f\u52a9root\u7684\u6743\u9650\u5728\u4f7f\u7528\u8be5\u547d\u4ee4\u7684\u8fc7\u7a0b\u4e2d\u64cd\u4f5c\u4e00\u4e9b\u666e\u901a\u6587\u4ef6.. eg:\u5bf9\u76f8\u5e94\u547d\u4ee4 ( \u8fd9\u91cc\u4ee5passwd\u548ccat\u4e24\u547d\u4ee4\u4e3e\u4f8b ) \u8fdb\u884c\u4e0a\u8ff0\u6b65\u9aa4\u540e, \u5176\u5b83\u7528\u6237\u4f7f\u7528passwd\u547d\u4ee4\u4f1a\u4fee\u6539/etc/shadow\u6587\u4ef6 ; \u5176\u5b83\u7528\u6237\u4f7f\u7528cat\u547d\u4ee4\u53ef\u4ee5\u8bbf\u95ee\u8be5\u666e\u901a\u6587\u4ef6 \u524d\u7f6e\u6761\u4ef6: \u547d\u4ee4\u6587\u4ef6\u7684\u5c5e\u4e3b\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b \u4e0d\u4e00\u6837 ,\u4e14\u90fd\u4e0d\u662f\u662f\u7528\u6237root... \u4e3e\u4f8b\u8bf4\u660e: \u73b0\u6709\u4e09\u4e2a\u666e\u901a\u7528\u6237 user1\u3001dc\u3001onepiece \u3010SUID\u3011 /usr/bin/cat \u4fe1\u606f\u4e3a -rwsr-xr-x. user1 user1 /opt/test/b.txt \u4fe1\u606f\u4e3a ---------- dc dc \u6267\u884c ` cat b.txt ` \u547d\u4ee4: \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e3aonepiece 1 > \u4f1a\u4ee5user1\u7528\u6237\u7684\u8eab\u4efd\u8fd0\u884c\u6b64\u547d\u4ee4,user1\u7528\u6237\u5bf9\u4e8eb.txt\u800c\u8a00,\u7528\u6237\u89d2\u8272\u5212\u5206\u4e3a\u5176\u5b83\u4eba.. 2 \u25cf> so,\u53ea\u6709\u5f53root\u7528\u6237\u6267\u884c ` chmod a = -,o = r b.txt ` \u547d\u4ee4\u540e, ` cat b.txt ` \u624d\u4f1a\u6210\u529f.. Ps: \u90a3\u5982\u679croot\u7528\u6237\u6267\u884c ` gpasswd -a user1 dc ` \u5c06user1\u7528\u6237\u6dfb\u52a0\u5230dc\u7ec4 ; root\u7528\u6237\u518d\u6267\u884c ` chmod a = -,g = r b.txt ` \u547d\u4ee4, ` cat b.txt ` \u4f9d\u65e7\u4e0d\u4f1a\u6210\u529f.. \u8bc1\u660e\u8be5\u8eab\u4efduser1\u4e0d\u662fb.txt\u7684\u4e3b\u4ebadc,\u5c31\u4f1a\u76f4\u63a5\u88ab\u5f52\u4e3ab.txt\u5176\u4ed6\u4eba\u4e00\u680f ; \u4e0d\u4f1a\u68c0\u7d22\u6587\u4ef6\u7684\u7ec4,\u54ea\u6015user1\u662fb.txt\u5c5e\u7ec4dc\u7ec4\u7684\u6210\u5458. \u82e5\u5f53\u524d\u767b\u5f55\u7528\u6237\u4e3adc,\u7528\u6237dc\u80af\u5b9a\u662f\u7ec4dc\u7684\u6210\u5458 \u5b9e\u9a8c\u7ed3\u679c\u8bc1\u660e\u8fd0\u884c ` cat b.txt ` \u65f6,\u76f8\u5f53\u4e8e\u5c06b.txt\u6587\u4ef6\u7684\u5c5e\u4e3b\u4e34\u65f6\u6539\u4e3a\u4e86user1.. \u8fd8\u662f\u4f1a\u4ee5dc\u7528\u6237\u7684\u8eab\u4efd\u8fd0\u884c\u6b64\u547d\u4ee4.. \uff08!!!!!!\u7279\u522b\u6ce8\u610f!!!!!!\uff09 \u25cf\u4e5f\u5c31\u662f\u8bf4,\u53ea\u6709\u5f53root\u7528\u6237\u6267\u884c ` chmod a = -,g = r b.txt ` \u547d\u4ee4\u540e, ` cat b.txt ` \u4f1a\u6210\u529f.. \u524d\u7f6e\u6761\u4ef6: \u547d\u4ee4\u6587\u4ef6\u7684\u5c5e\u4e3b\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b \u4e00\u6837 ,\u4f46\u90fd\u4e0d\u662f\u7528\u6237root... \u4e3e\u4f8b\u8bf4\u660e: \u73b0\u6709\u4e09\u4e2a\u666e\u901a\u7528\u6237 dc\u3001onepiece \u3010SUID\u3011 /usr/bin/cat \u4fe1\u606f\u4e3a -rwsr-xr-x. dc root /opt/test/b.txt \u4fe1\u606f\u4e3a ---------- dc dc \u65e0\u8bba\u5f53\u524d\u767b\u5f55\u7528\u6237\u662fdc\u8fd8\u662fonepiece,\u90fd\u4f1a\u4ee5dc\u7528\u6237\u7684\u8eab\u4efd\u6267\u884c ` cat b.txt ` \u547d\u4ee4 \u25cf\u610f\u5473\u7740\u53ea\u6709\u5f53root\u7528\u6237\u6267\u884c ` chmod a = -,u = r b.txt ` \u547d\u4ee4\u540e,\u4e0d\u7ba1\u767b\u5f55\u7528\u6237\u662f\u8c01, ` cat b.txt ` \u90fd\u4f1a\u6210\u529f..","title":"SUID"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#sgidsbit","text":"\u3010SGID\u9488\u5bf9\u666e\u901a\u6587\u4ef6\u3011 \u524d\u63d0:\u8fd9\u91cc\u5b9e\u9a8c\u73af\u5883 -- \u547d\u4ee4\u6587\u4ef6\u4e0e\u547d\u4ee4\u64cd\u4f5c\u7684\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u4e3b\u90fd\u662f\u7528\u6237root ; \u5c5e\u7ec4\u90fd\u662froot\u7ec4. ( \u5176\u5b83\u60c5\u51b5\u6ca1\u6709\u9a8c\u8bc1 ) \u4f5c\u7528\u4e8e\u666e\u901a\u6587\u4ef6\u65f6,\u4f1a\u4ee5\u547d\u4ee4\u6240\u5c5e\u7ec4\u7684\u6743\u9650\u53bb\u64cd\u63a7\u666e\u901a\u6587\u4ef6..\u4e0eSUID\u7c7b\u4f3c.. root\u7ec4\u7684\u6743\u9650\u53ef\u4e0d\u7b49\u540c\u4e8eroot\u7528\u6237\u7684\u6743\u9650..\u6240\u4ee5\u8981\u6539\u53d8\u4e0broot\u7ec4\u9488\u5bf9\u76ee\u6807\u666e\u901a\u6587\u4ef6\u7684\u6743\u9650! 1 >: <root>\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u6587\u4ef6, ` chmod 000 \u666e\u901a\u6587\u4ef6 ` 2 >: ` chmod g+s \u547d\u4ee4\u6587\u4ef6 ` 3 >: <\u666e\u901a\u7528\u6237>\u53ea\u80fd\u7528\u8be5\u666e\u901a\u6587\u4ef6\u7684\u5c5e\u7ec4root\u7ec4\u7684\u6743\u9650\u64cd\u4f5c\u8be5\u666e\u901a\u6587\u4ef6.. 4 >: ` chmod g+r \u666e\u901a\u6587\u4ef6 ` \u4e3e\u4f8b\u8bf4\u660e: /usr/bin/cat -rwxr-sr-x. root root /opt/test/1.txt ---------- root root root\u7528\u6237\u6539\u53d8root\u7ec4\u9488\u5bf91.txt\u7684\u6743\u9650: ` chmod g+r /opt/test/1.txt ` ----r----- \u6240\u6709\u7528\u6237\u5728\u8fd0\u884ccat\u547d\u4ee4\u65f6\u90fd\u62e5\u6709root\u7ec4\u6743\u9650: ` cat /opt/test/1.txt ` \u6210\u529f. \u3010SGID\u9488\u5bf9\u76ee\u5f55\u6587\u4ef6\u3011 \u5b8c\u6210\u5c5e\u7ec4\u7684\u7ee7\u627f.. root\u7528\u6237: ` chmod g+s /opt/aaa ` drwxr-srwx \u6240\u6709\u7528\u6237\u5728\u76ee\u5f55\u6587\u4ef6/opt/aaa\u4e0b\u521b\u5efa\u7684\u6587\u4ef6\u5939\u6216\u6587\u4ef6\u7684\u5c5e\u7ec4\u90fd\u4f1a\u4e0e/opt/aaa\u7684\u5c5e\u7ec4\u4fdd\u6301\u4e00\u81f4 \u3010SBIT\u3011 \u6743\u9650\u4fe1\u606f\u4e2d\u6700\u540e\u4e00\u4f4dt\u8868\u660e\u8be5\u76ee\u5f55\u88ab\u8bbe\u7f6e\u4e86SBIT\u6743\u9650. SBIT\u5bf9\u76ee\u5f55\u7684\u4f5c\u7528\u662f: \u5f53\u7528\u6237\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa\u65b0\u6587\u4ef6\u6216\u76ee\u5f55\u65f6,\u4ec5\u6709\u81ea\u5df1\u548croot\u624d\u6709\u6743\u529b\u5220\u9664,\u4e3b\u8981\u4f5c\u7528\u4e8e\u4e00\u4e2a\u5171\u4eab\u7684\u6587\u4ef6\u5939 root\u7528\u6237: ` chmod o+t /opt/share ` drwxrwxrwt \u5176\u5b83\u7528\u6237\u5728\u5171\u4eab\u6587\u4ef6\u5939/opt/share\u91cc\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6","title":"SGID\u3001SBIT"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#umask","text":"\u65b0\u5efa\u7684\u6587\u4ef6\u3001\u76ee\u5f55\u6587\u4ef6\u7684\u9ed8\u8ba4\u6743\u9650\u662f\u7531umask\u51b3\u5b9a\u7684 Ps: \u8054\u60f3\u4e00\u4e0b,netmask\u63a9\u7801\u4e0eip\u5730\u5740\u8fdb\u884c\u4e0e\u8fd0\u7b97; umask\u4e5f\u9700\u8981\u642d\u914d\u4f7f\u7528.. \"\"\" root\u7528\u6237: \u521b\u5efa\u6587\u4ef6\u9ed8\u8ba4\u6743\u9650644;\u521b\u5efa\u6587\u4ef6\u5939\u9ed8\u8ba4\u6743\u9650755 \"\"\" [ root@localhost opt ] # touch a.txt [ root@localhost opt ] # mkdir aaa [ root@localhost opt ] # ll \u603b\u7528\u91cf 0 drwxr-xr-x 2 root root 6 8\u6708 2 20 :06 aaa -rw-r--r-- 1 root root 0 8\u6708 2 20 :05 a.txt","title":"umask"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#umask_1","text":"\u89c4\u5219\u5982\u4e0b: 1> uid>199\u5e76\u4e14\u5c5e\u4e3b\u4e0e\u6570\u7ec4\u76f8\u7b49\u7684\u7528\u6237\u4e0b --- umask: 0002; \u96641\u4e4b\u5916\u7684\u5176\u4ed6\u7528\u6237,\u6bd4\u5982root\u7528\u6237 -- umask: 0022 2> umask\u6709\u56db\u4f4d, \u7b2c\u4e00\u4f4d\u4e0e\u7279\u6b8a\u6743\u9650\u6709\u5173 .. \u4e3e\u4f8b: \u7ed9a.txt ( -rw-r--r-- )\u6587\u4ef6\u52a0\u4e0asuid\u3001sgid\u3001sticky..( -rwSr-Sr-T ) chmod u+s,g+s,o+t a.txt chmod 7644 a.txt u\u3001suid -- 4 ; g\u3001sgid -- 2 ; o\u3001sbit -- 1. 2> linux\u4e2d \u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\u4e3a666 \u3001 \u76ee\u5f55\u6743\u9650\u9ed8\u8ba4\u4e3a777 , \u4f1a\u4e0eumask\u540e\u4e09\u4f4d\u8fdb\u884c\u8fd0\u7b97\u540e\u5f97\u5230\u6700\u540e\u7684\u9ed8\u8ba4\u503c.. \u25b3 \u6587\u4ef6\u6743\u9650\u8ba1\u7b97\u65b9\u6cd5 : \u5076\u6570\u4f4d\u76f4\u63a5\u76f8\u51cf, \u5947\u6570\u4f4d\u76f8\u51cf\u540e\u52a01 \u5373umask\u4f4d\u6570\u4e0a\u7684\u503c\u4e3a\u5076\u6570,\u76f4\u63a5\u88ab\u51cf; \u82e5umask\u4f4d\u6570\u4e0a\u7684\u503c\u4e3a\u5947\u6570,\u88ab\u51cf\u540e\u52a0\u4e00; eg: umask 0325; \u521b\u5efa\u6587\u4ef6 (6-3+1 6-2 6-5+1) = 442 \u25b3 \u76ee\u5f55\u6743\u9650\u8ba1\u7b97\u65b9\u6cd5 \uff1a\u76f4\u63a5\u76f8\u51cf\u5373\u53ef eg: umask 0325; \u521b\u5efa\u76ee\u5f55 (7-3 7-2 7-5) = 452","title":"umask\u89c4\u5219"},{"location":"1_linux%E5%9F%BA%E7%A1%80/7_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8B%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/#_17","text":"\"\"\" \u4e34\u65f6\u4fee\u6539umask\u503c \"\"\" ` umask 000 ` \"\"\" \u6c38\u4e45\u4fee\u6539umask\u503c -- \u5373\u4fee\u6539\u5bf9\u5e94\u7684\u6587\u4ef6 Ps: \u6ca1\u5fc5\u8981\u52a8\u5b83.. Hhh \"\"\" ## \u6216\u8005vim /etc/bashrc \u5185\u5bb9\u662f\u4e00\u6837\u7684 [ root@localhost opt ] # vim /etc/profile ...... if [ $UID -gt 199 ] && [ \"`id -gn`\" = \"`id -un`\" ] ; then umask 002 // uid\u5927\u4e8e\u7b49\u4e8e199\u7684\u9ed8\u8ba4umask\u503c,\u8868\u793a\u4e00\u4e9b\u7cfb\u7edf\u7528\u6237\u548c\u6240\u6709\u666e\u901a\u7528\u6237 else umask 022 // uid\u5c0f\u4e8e199\u7684\u9ed8\u8ba4umask\u503c,\u5305\u542broot\u7528\u6237 fi","title":"\u4e34\u65f6/\u6c38\u4e45\u8bbe\u7f6e"},{"location":"1_linux%E5%9F%BA%E7%A1%80/8_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8BACL/","text":"ACL\u5f15\u5165 \u00b6 UGO\u4e2d\u7684O\u5373\u5176\u4ed6\u4eba, \u6db5\u76d6\u4e86\u975e\u5e38\u5927\u7684\u8303\u56f4, \u6211\u4eec\u4f7f\u7528 setfacl \u53ef\u4ee5\u5c06\u7528\u6237\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u8fdb\u884c\u8fdb\u4e00\u6b65\u7ec6\u5316! \u6570\u636e\u51c6\u5907 ## -- \u5728/opt\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u4ef6a.txt [ root@localhost opt ] # echo 111 > a.txt [ root@localhost opt ] # chmod o=- a.txt ## -- \u4e0d\u7ba1\u662f\u54ea\u4e2a\u7528\u6237,\u5728\u64cd\u4f5ca.txt\u6587\u4ef6\u4e4b\u524d,\u9700\u8981\u4fdd\u8bc1\u6cbf\u9014\u76ee\u5f55/\u4e0e/opt\u7684\u5176\u4ed6\u4eba\u6709x\u6267\u884c\u6743\u9650 [ root@localhost opt ] # ll -d / dr-xr-xr-x. 17 root root 244 8\u6708 1 13 :50 / [ root@localhost opt ] # ll -d /opt drwxr-xr-x. 2 root root 19 8\u6708 4 18 :48 /opt [ root@localhost opt ] # ll a.txt -rw-r----- 1 root root 4 8\u6708 4 18 :48 a.txt ## -- \u67e5\u770b\u672a\u8bbe\u7f6eACL\u65f6\u6587\u4ef6\u7684\u6743\u9650\u72b6\u6001 [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- group::r-- other::--- [ root@localhost opt ] # useradd egon01 [ root@localhost opt ] # useradd egon02 [ root@localhost opt ] # groupadd IT \u5b9e\u9a8c\u76ee\u7684: \u8ba9\u7528\u6237egon01\u5bf9a.txt\u6587\u4ef6\u53ea\u6709\u8bfb\u6743\u9650; egon02\u5bf9a.txt\u6587\u4ef6\u53ea\u6709\u5199\u6743\u9650; IT\u7ec4\u5bf9a.txt\u6587\u4ef6\u53ea\u6709\u8bfb\u6743\u9650. [ root@localhost opt ] # setfacl -m u:egon01:r a.txt [ root@localhost opt ] # setfacl -m u:egon02:w a.txt [ root@localhost opt ] # setfacl -m g:IT:r /opt/a.txt \"\"\" \u6587\u4ef6\u4e00\u65e6\u8bbe\u7f6e\u4e86acl\u6743\u9650\u540e, ls\u67e5\u770b\u6587\u4ef6\u7684\u4fe1\u606f\u4f1a\u51fa\u73b0\u4e00\u4e2a \u52a0\u53f7! \"\"\" [ root@localhost opt ] # ll a.txt -rw-rw----+ 1 root root 12 8\u6708 8 01 :35 a.txt \"\"\" \u67e5\u770b\u6587\u4ef6ACL\u72b6\u6001,\u4e0e\u672a\u8bbe\u7f6eACL\u65f6\u76f8\u6bd4: 1> \u591a\u4e86\u5bf9\u7528\u6237egon01\u548cegon02\u4ee5\u53caIT\u7ec4\u5bf9a.txt\u6743\u9650\u7684\u8bbe\u7f6e 2> \u4ed4\u7ec6\u89c2\u5bdf\u4fe1\u606f\u4e2d\u51fa\u73b0\u4e86mask\u5173\u952e\u5b57,\u5177\u4f53\u8bf4\u660e\u5982\u4e0b: mask\u4ee3\u8868\u6587\u4ef6\u7684\u6700\u9ad8\u6743\u9650(\u9664\u4e86owner\u548cother\u90fd\u8981\u53d7\u5176\u5f71\u54cd).. \u672c\u8d28\u539f\u7406\u662f\u5c06\u6743\u9650\u4e0emask\u503c\u8fdb\u884c\u6309\u4f4d\u4e0e\u8fd0\u7b97 \u901a\u4fd7\u70b9,mask\u50cf\u662f\u4e00\u4e2a\u7b5b\u5b50.\u6587\u4ef6\u5c5e\u4e3b\u548c\u5176\u4ed6\u4eba\u4e4b\u5916\u7684\u6240\u6709\u6743\u9650\u90fd\u9700\u8981\u88ab\u5b83\u7b5b\u4e00\u904d.. \u82e5mask\u662frw,\u5219\u4ee3\u8868\u8be5\u7b5b\u5b50\u53ea\u653e\u884cr\u548cw\u6743\u9650.. \u4e3e\u4e2a\u6817\u5b50: lili\u6743\u9650 r-- mask\u6743\u9650 rw- lili\u6700\u7ec8\u6743\u9650 r-- Ps:\u6211\u4eec\u4e00\u822c\u4e0d\u66f4\u6539mask\u503c. \u53ea\u8981\u8d4b\u4e88mask\u6700\u5927\u6743\u9650(\u4e5f\u5c31\u662frwx),\u5219\u7ed9\u7528\u6237\u6216\u7fa4\u7ec4\u8bbe\u5b9a\u7684ACL\u6743\u9650\u672c\u8eab\u5c31\u662f\u6709\u6548\u7684..\u600e\u4e48\u7b5b\u90fd\u80fd\u901a\u8fc7. \"\"\" [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- user:egon01:r-- user:egon02:-w- group::r-- group:IT:r-- mask::rw- other::--- ## -- \u8fdb\u884c\u9a8c\u8bc1 [ root@localhost opt ] # su - egon01 -c \"cat /opt/a.txt\" 111 [ root@localhost opt ] # su - egon01 -c \"echo 222 >> /opt/a.txt\" -bash: /opt/a.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # su - egon02 -c \"echo 222 >> /opt/a.txt\" [ root@localhost opt ] # su - egon02 -c \"cat /opt/a.txt\" cat: /opt/a.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # cat a.txt 111 111 222 ACL\u67e5\u6539\u5220\u7ee7\u627f \u00b6 \u67e5\u770b\u6587\u4ef6\u7684\u6743\u9650 getacl a.txt \u4fee\u6539\u6587\u4ef6u\u5c5e\u4e3b\u7684\u6743\u9650 setfacl -m u::\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6g\u5c5e\u7ec4\u7684\u6743\u9650 setfacl -m g::\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6o\u5176\u4ed6\u4eba\u7684\u6743\u9650 setfacl -m o::\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a \u7528\u6237 \u7684\u6743\u9650 setfacl -m u:\u7528\u6237\u540d:\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a \u7ec4 \u7684\u6743\u9650 setfacl -m g:\u7ec4\u540d:\u6743\u9650 a.txt \u7ec4\u5fc5\u987b\u4e8b\u5148\u5b58\u5728 \u5220\u9664\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a\u7528\u6237\u7684\u6743\u9650 setfacl -x u:\u7528\u6237\u540d a.txt \u5220\u9664\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a\u7ec4\u7684\u6743\u9650 setfacl -x g:\u7ec4\u540d a.txt \u5220\u9664\u6587\u4ef6\u6240\u6709ACL\u6743\u9650 setfacl -b a.txt \u6587\u4ef6\u6743\u9650\u7684+\u53f7\u4e5f\u5c31\u6d88\u5931\u5566 \u66f4\u6539\u6587\u4ef6mask\u7684\u503c setfacl -m m:\u6743\u9650 a.txt \u4e00\u822c\u4e0d\u4f1a\u66f4\u6539mask\u6743\u9650\u7684\u503c \u8ba9\u5177\u4f53\u67d0\u4e00\u4e2a\u7528\u6237\u5bf9\u8be5\u76ee\u5f55\u4ee5\u53ca\u5f80\u540e\u5728\u8be5\u76ee\u5f55\u4e0b \u65b0\u5efa \u7684\u6587\u4ef6\u548c\u76ee\u5f55\u90fd\u62e5\u6709\u76f8\u540c\u7684\u6743\u9650 setfacl -m d:u:\u7528\u6237\u540d:\u6743\u9650 /opt/test \u6ce8\u610f: \u82e5\u7ee7\u627f\u7684\u6743\u9650\u8bbe\u7f6e\u4e3arwx,\u8be5\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u9ed8\u8ba4\u7684mask\u503c\u53ef\u80fd\u4f1a\u5bf9\u6587\u4ef6\u6700\u7ec8\u751f\u6548\u7684\u6743\u9650\u4ea7\u751f\u5f71\u54cd.. \u5bf9\u76ee\u5f55ACL\u6743\u9650\u7684\u8bbe\u7f6e\u540c\u7406.. \u4f7f\u7528ACL\u540e,\u4fee\u6539\u6743\u9650\u5c31\u4e0d\u8981\u518d\u7528chmod\u5566!!\u4ee5\u514d\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6.. [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- user:egon01:r-- user:egon02:-w- group::r-- group:IT:r-- mask::rw- other::--- \"\"\" \u6539\u53d8\u5c5e\u7ec4\u6743\u9650\u7684\u6b63\u786e\u505a\u6cd5: `setfacl -m g::- a.txt` \"\"\" [ root@localhost opt ] # chmod g=- /opt/a.txt \"\"\" \u4f7f\u7528ACL\u540e,\u518d\u4f7f\u7528chmod\u4fee\u6539\u6743\u9650\u751f\u6210\u7684\u65b0\u7684mask\u503c,\u4f1a\u5c06\u6743\u9650\u7b5b\u9009\u4e00\u904d,\u8fbe\u4e0d\u5230\u6211\u4eec\u60f3\u8981\u7684\u6548\u679c.. \u53ef\u4ee5\u770b\u5230,mask::--- user:egon01:r-- r\u8fc7\u4e0d\u4e86. \u6240\u4ee5\u7528\u6237egon01\u751f\u6548\u7684\u6743\u9650\u662f--- \"\"\" [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- user:egon01:r-- #effective:--- user:egon02:-w- #effective:--- group::r-- #effective:--- group:IT:r-- #effective:--- mask::--- other::--- \u5f53\u524d\u7528\u6237\u5982\u679c\u68c0\u7d22\u4e0d\u5230\u5bf9\u5e94\u7684acl\u6743\u9650\u6216\u8005\u68c0\u7d22\u5230\u540e\u53d1\u73b0\u6743\u9650\u4e3a\u7a7a,\u90fd\u4f1a\u5bf9\u5e94\u5230other\u6743\u9650\u4e0a.. \u4e5f\u5c31\u662f\u8bf4,\u5f53\u524d\u7528\u6237\u5c5e\u4e8e\u6587\u4ef6\u6743\u9650other\u5176\u4ed6\u4eba\u90a3\u4e00\u680f,\u5f53\u524d\u7528\u6237\u5bf9\u6b64\u6587\u4ef6\u751f\u6548\u7684acl\u6743\u9650\u662f\u9ad8\u4e8eother\u6743\u9650\u7684.. setfacl -b b.txt # \u53ef\u4ee5\u5148\u6e05\u7406\u6389\u6240\u6709\u7684acl\u6743\u9650,\u4fdd\u8bc1\u5b9e\u9a8c\u73af\u5883\u5e72\u51c0 \u25cf \u5e94\u7528\u573a\u666f\u4e00: \u5176\u4ed6\u4eba\u5bf9\u6587\u4ef6\u6ca1\u6709\u4efb\u4f55\u6743\u9650,\u7136\u540e\u5355\u72ec\u8bbe\u7f6e\u5176\u4ed6\u4eba\u91cc\u7684egon01\u5bf9\u6587\u4ef6\u6709r\u6743\u9650\u3001egon02\u5bf9\u6587\u4ef6\u6709w\u6743\u9650 \"\"\" egon01\u5bf9b.txt\u7684\u6743\u9650\u4e3ar--; egon02\u5bf9b.txt\u7684\u6743\u9650\u4e3a-w- \u5269\u4f59\u7684\u5176\u4ed6\u4eba\u4e2d,\u4f8b\u5982egon03\u5bf9b.txt\u7684\u6743\u9650\u4e3a--- \"\"\" setfacl -m o::- b.txt setfacl -m u:egon01:r b.txt setfacl -m u:egon02:w b.txt \u25cf \u5e94\u7528\u573a\u666f\u4e8c: \u5176\u4ed6\u4eba\u5bf9\u6587\u4ef6\u6709rw\u6743\u9650,\u7136\u540e\u5355\u72ec\u8bbe\u7f6e\u5176\u4ed6\u4eba\u91cc\u7684egon01\u5bf9\u6587\u4ef6\u6709r\u6743\u9650\u3001egon02\u5bf9\u6587\u4ef6\u6709w\u6743\u9650 \"\"\" egon01\u5bf9b.txt\u7684\u6743\u9650\u4e3ar--; egon02\u5bf9b.txt\u7684\u6743\u9650\u4e3a-w- \u5269\u4f59\u7684\u5176\u4ed6\u4eba\u4e2d,\u4f8b\u5982egon03\u5bf9b.txt\u7684\u6743\u9650\u4e3arw- \"\"\" setfacl -m o::rw b.txt setfacl -m u:egon01:r b.txt setfacl -m u:egon02:w b.txt \u6587\u4ef6\u7684a\u3001i\u3001A\u7279\u6b8a\u5c5e\u6027 \u00b6 \"\"\" lsattr \u67e5\u770b\u6587\u4ef6\u7684\u7279\u6b8a\u5c5e\u6027 \"\"\" [ root@localhost opt ] # touch /opt/{1..3}.txt [ root@localhost opt ] # ll /opt/ \u603b\u7528\u91cf 0 -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 1 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 2 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 3 .txt [ root@localhost opt ] # lsattr /opt/ ---------------- /opt/1.txt ---------------- /opt/2.txt ---------------- /opt/3.txt \"\"\" chattr \u8bbe\u7f6e\u6587\u4ef6\u7684\u7279\u6b8a\u5c5e\u6027 +a \u8ba9\u67d0\u4e2a\u6587\u4ef6\u53ea\u80fd\u5f80\u91cc\u9762\u8ffd\u52a0\u6570\u636e,\u4f46\u4e0d\u80fd\u5220\u9664,\u9002\u7528\u4e8e\u5404\u79cd\u65e5\u5fd7\u6587\u4ef6. +i \u7981\u6b62\u4efb\u4f55\u4fee\u6539,\u6709\u4e9b\u75c5\u6bd2\u7a0b\u5e8f\u4f1a\u5bf9\u6587\u4ef6\u52a0\u4e0a\u8be5\u6743\u9650;\u9632\u6b62\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5173\u952e\u6587\u4ef6\u88ab\u4fee\u6539 TnT +A \u4e0d\u80fd\u66f4\u6539\u6587\u4ef6\u8bbf\u95ee\u65f6\u95f4 -a -i -A \u5220\u9664\u5c5e\u6027 Ps: \u8fd9\u4e9b\u6587\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5bf9root\u7ba1\u7406\u5458\u4e5f\u751f\u6548,\u4f46root\u53ef\u4ee5\u66f4\u6539\u8fd9\u4e9b\u7279\u6b8a\u5c5e\u6027\u554a!! \"\"\" [ root@localhost opt ] # chattr +a /opt/1.txt [ root@localhost opt ] # chattr +i /opt/2.txt [ root@localhost opt ] # chattr +A /opt/3.txt [ root@localhost opt ] # lsattr /opt/ -----a---------- /opt/1.txt ----i----------- /opt/2.txt -------A-------- /opt/3.txt [ root@localhost opt ] # ll /opt/ \u603b\u7528\u91cf 0 -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 1 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 2 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 3 .txt","title":"\u6743\u9650\u7ba1\u7406\u4e4bACL"},{"location":"1_linux%E5%9F%BA%E7%A1%80/8_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8BACL/#acl","text":"UGO\u4e2d\u7684O\u5373\u5176\u4ed6\u4eba, \u6db5\u76d6\u4e86\u975e\u5e38\u5927\u7684\u8303\u56f4, \u6211\u4eec\u4f7f\u7528 setfacl \u53ef\u4ee5\u5c06\u7528\u6237\u5bf9\u6587\u4ef6\u7684\u6743\u9650\u8fdb\u884c\u8fdb\u4e00\u6b65\u7ec6\u5316! \u6570\u636e\u51c6\u5907 ## -- \u5728/opt\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u4ef6a.txt [ root@localhost opt ] # echo 111 > a.txt [ root@localhost opt ] # chmod o=- a.txt ## -- \u4e0d\u7ba1\u662f\u54ea\u4e2a\u7528\u6237,\u5728\u64cd\u4f5ca.txt\u6587\u4ef6\u4e4b\u524d,\u9700\u8981\u4fdd\u8bc1\u6cbf\u9014\u76ee\u5f55/\u4e0e/opt\u7684\u5176\u4ed6\u4eba\u6709x\u6267\u884c\u6743\u9650 [ root@localhost opt ] # ll -d / dr-xr-xr-x. 17 root root 244 8\u6708 1 13 :50 / [ root@localhost opt ] # ll -d /opt drwxr-xr-x. 2 root root 19 8\u6708 4 18 :48 /opt [ root@localhost opt ] # ll a.txt -rw-r----- 1 root root 4 8\u6708 4 18 :48 a.txt ## -- \u67e5\u770b\u672a\u8bbe\u7f6eACL\u65f6\u6587\u4ef6\u7684\u6743\u9650\u72b6\u6001 [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- group::r-- other::--- [ root@localhost opt ] # useradd egon01 [ root@localhost opt ] # useradd egon02 [ root@localhost opt ] # groupadd IT \u5b9e\u9a8c\u76ee\u7684: \u8ba9\u7528\u6237egon01\u5bf9a.txt\u6587\u4ef6\u53ea\u6709\u8bfb\u6743\u9650; egon02\u5bf9a.txt\u6587\u4ef6\u53ea\u6709\u5199\u6743\u9650; IT\u7ec4\u5bf9a.txt\u6587\u4ef6\u53ea\u6709\u8bfb\u6743\u9650. [ root@localhost opt ] # setfacl -m u:egon01:r a.txt [ root@localhost opt ] # setfacl -m u:egon02:w a.txt [ root@localhost opt ] # setfacl -m g:IT:r /opt/a.txt \"\"\" \u6587\u4ef6\u4e00\u65e6\u8bbe\u7f6e\u4e86acl\u6743\u9650\u540e, ls\u67e5\u770b\u6587\u4ef6\u7684\u4fe1\u606f\u4f1a\u51fa\u73b0\u4e00\u4e2a \u52a0\u53f7! \"\"\" [ root@localhost opt ] # ll a.txt -rw-rw----+ 1 root root 12 8\u6708 8 01 :35 a.txt \"\"\" \u67e5\u770b\u6587\u4ef6ACL\u72b6\u6001,\u4e0e\u672a\u8bbe\u7f6eACL\u65f6\u76f8\u6bd4: 1> \u591a\u4e86\u5bf9\u7528\u6237egon01\u548cegon02\u4ee5\u53caIT\u7ec4\u5bf9a.txt\u6743\u9650\u7684\u8bbe\u7f6e 2> \u4ed4\u7ec6\u89c2\u5bdf\u4fe1\u606f\u4e2d\u51fa\u73b0\u4e86mask\u5173\u952e\u5b57,\u5177\u4f53\u8bf4\u660e\u5982\u4e0b: mask\u4ee3\u8868\u6587\u4ef6\u7684\u6700\u9ad8\u6743\u9650(\u9664\u4e86owner\u548cother\u90fd\u8981\u53d7\u5176\u5f71\u54cd).. \u672c\u8d28\u539f\u7406\u662f\u5c06\u6743\u9650\u4e0emask\u503c\u8fdb\u884c\u6309\u4f4d\u4e0e\u8fd0\u7b97 \u901a\u4fd7\u70b9,mask\u50cf\u662f\u4e00\u4e2a\u7b5b\u5b50.\u6587\u4ef6\u5c5e\u4e3b\u548c\u5176\u4ed6\u4eba\u4e4b\u5916\u7684\u6240\u6709\u6743\u9650\u90fd\u9700\u8981\u88ab\u5b83\u7b5b\u4e00\u904d.. \u82e5mask\u662frw,\u5219\u4ee3\u8868\u8be5\u7b5b\u5b50\u53ea\u653e\u884cr\u548cw\u6743\u9650.. \u4e3e\u4e2a\u6817\u5b50: lili\u6743\u9650 r-- mask\u6743\u9650 rw- lili\u6700\u7ec8\u6743\u9650 r-- Ps:\u6211\u4eec\u4e00\u822c\u4e0d\u66f4\u6539mask\u503c. \u53ea\u8981\u8d4b\u4e88mask\u6700\u5927\u6743\u9650(\u4e5f\u5c31\u662frwx),\u5219\u7ed9\u7528\u6237\u6216\u7fa4\u7ec4\u8bbe\u5b9a\u7684ACL\u6743\u9650\u672c\u8eab\u5c31\u662f\u6709\u6548\u7684..\u600e\u4e48\u7b5b\u90fd\u80fd\u901a\u8fc7. \"\"\" [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- user:egon01:r-- user:egon02:-w- group::r-- group:IT:r-- mask::rw- other::--- ## -- \u8fdb\u884c\u9a8c\u8bc1 [ root@localhost opt ] # su - egon01 -c \"cat /opt/a.txt\" 111 [ root@localhost opt ] # su - egon01 -c \"echo 222 >> /opt/a.txt\" -bash: /opt/a.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # su - egon02 -c \"echo 222 >> /opt/a.txt\" [ root@localhost opt ] # su - egon02 -c \"cat /opt/a.txt\" cat: /opt/a.txt: \u6743\u9650\u4e0d\u591f [ root@localhost opt ] # cat a.txt 111 111 222","title":"ACL\u5f15\u5165"},{"location":"1_linux%E5%9F%BA%E7%A1%80/8_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8BACL/#acl_1","text":"\u67e5\u770b\u6587\u4ef6\u7684\u6743\u9650 getacl a.txt \u4fee\u6539\u6587\u4ef6u\u5c5e\u4e3b\u7684\u6743\u9650 setfacl -m u::\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6g\u5c5e\u7ec4\u7684\u6743\u9650 setfacl -m g::\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6o\u5176\u4ed6\u4eba\u7684\u6743\u9650 setfacl -m o::\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a \u7528\u6237 \u7684\u6743\u9650 setfacl -m u:\u7528\u6237\u540d:\u6743\u9650 a.txt \u4fee\u6539\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a \u7ec4 \u7684\u6743\u9650 setfacl -m g:\u7ec4\u540d:\u6743\u9650 a.txt \u7ec4\u5fc5\u987b\u4e8b\u5148\u5b58\u5728 \u5220\u9664\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a\u7528\u6237\u7684\u6743\u9650 setfacl -x u:\u7528\u6237\u540d a.txt \u5220\u9664\u6587\u4ef6\u5177\u4f53\u67d0\u4e00\u4e2a\u7ec4\u7684\u6743\u9650 setfacl -x g:\u7ec4\u540d a.txt \u5220\u9664\u6587\u4ef6\u6240\u6709ACL\u6743\u9650 setfacl -b a.txt \u6587\u4ef6\u6743\u9650\u7684+\u53f7\u4e5f\u5c31\u6d88\u5931\u5566 \u66f4\u6539\u6587\u4ef6mask\u7684\u503c setfacl -m m:\u6743\u9650 a.txt \u4e00\u822c\u4e0d\u4f1a\u66f4\u6539mask\u6743\u9650\u7684\u503c \u8ba9\u5177\u4f53\u67d0\u4e00\u4e2a\u7528\u6237\u5bf9\u8be5\u76ee\u5f55\u4ee5\u53ca\u5f80\u540e\u5728\u8be5\u76ee\u5f55\u4e0b \u65b0\u5efa \u7684\u6587\u4ef6\u548c\u76ee\u5f55\u90fd\u62e5\u6709\u76f8\u540c\u7684\u6743\u9650 setfacl -m d:u:\u7528\u6237\u540d:\u6743\u9650 /opt/test \u6ce8\u610f: \u82e5\u7ee7\u627f\u7684\u6743\u9650\u8bbe\u7f6e\u4e3arwx,\u8be5\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u9ed8\u8ba4\u7684mask\u503c\u53ef\u80fd\u4f1a\u5bf9\u6587\u4ef6\u6700\u7ec8\u751f\u6548\u7684\u6743\u9650\u4ea7\u751f\u5f71\u54cd.. \u5bf9\u76ee\u5f55ACL\u6743\u9650\u7684\u8bbe\u7f6e\u540c\u7406.. \u4f7f\u7528ACL\u540e,\u4fee\u6539\u6743\u9650\u5c31\u4e0d\u8981\u518d\u7528chmod\u5566!!\u4ee5\u514d\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6.. [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- user:egon01:r-- user:egon02:-w- group::r-- group:IT:r-- mask::rw- other::--- \"\"\" \u6539\u53d8\u5c5e\u7ec4\u6743\u9650\u7684\u6b63\u786e\u505a\u6cd5: `setfacl -m g::- a.txt` \"\"\" [ root@localhost opt ] # chmod g=- /opt/a.txt \"\"\" \u4f7f\u7528ACL\u540e,\u518d\u4f7f\u7528chmod\u4fee\u6539\u6743\u9650\u751f\u6210\u7684\u65b0\u7684mask\u503c,\u4f1a\u5c06\u6743\u9650\u7b5b\u9009\u4e00\u904d,\u8fbe\u4e0d\u5230\u6211\u4eec\u60f3\u8981\u7684\u6548\u679c.. \u53ef\u4ee5\u770b\u5230,mask::--- user:egon01:r-- r\u8fc7\u4e0d\u4e86. \u6240\u4ee5\u7528\u6237egon01\u751f\u6548\u7684\u6743\u9650\u662f--- \"\"\" [ root@localhost opt ] # getfacl a.txt # file: a.txt # owner: root # group: root user::rw- user:egon01:r-- #effective:--- user:egon02:-w- #effective:--- group::r-- #effective:--- group:IT:r-- #effective:--- mask::--- other::--- \u5f53\u524d\u7528\u6237\u5982\u679c\u68c0\u7d22\u4e0d\u5230\u5bf9\u5e94\u7684acl\u6743\u9650\u6216\u8005\u68c0\u7d22\u5230\u540e\u53d1\u73b0\u6743\u9650\u4e3a\u7a7a,\u90fd\u4f1a\u5bf9\u5e94\u5230other\u6743\u9650\u4e0a.. \u4e5f\u5c31\u662f\u8bf4,\u5f53\u524d\u7528\u6237\u5c5e\u4e8e\u6587\u4ef6\u6743\u9650other\u5176\u4ed6\u4eba\u90a3\u4e00\u680f,\u5f53\u524d\u7528\u6237\u5bf9\u6b64\u6587\u4ef6\u751f\u6548\u7684acl\u6743\u9650\u662f\u9ad8\u4e8eother\u6743\u9650\u7684.. setfacl -b b.txt # \u53ef\u4ee5\u5148\u6e05\u7406\u6389\u6240\u6709\u7684acl\u6743\u9650,\u4fdd\u8bc1\u5b9e\u9a8c\u73af\u5883\u5e72\u51c0 \u25cf \u5e94\u7528\u573a\u666f\u4e00: \u5176\u4ed6\u4eba\u5bf9\u6587\u4ef6\u6ca1\u6709\u4efb\u4f55\u6743\u9650,\u7136\u540e\u5355\u72ec\u8bbe\u7f6e\u5176\u4ed6\u4eba\u91cc\u7684egon01\u5bf9\u6587\u4ef6\u6709r\u6743\u9650\u3001egon02\u5bf9\u6587\u4ef6\u6709w\u6743\u9650 \"\"\" egon01\u5bf9b.txt\u7684\u6743\u9650\u4e3ar--; egon02\u5bf9b.txt\u7684\u6743\u9650\u4e3a-w- \u5269\u4f59\u7684\u5176\u4ed6\u4eba\u4e2d,\u4f8b\u5982egon03\u5bf9b.txt\u7684\u6743\u9650\u4e3a--- \"\"\" setfacl -m o::- b.txt setfacl -m u:egon01:r b.txt setfacl -m u:egon02:w b.txt \u25cf \u5e94\u7528\u573a\u666f\u4e8c: \u5176\u4ed6\u4eba\u5bf9\u6587\u4ef6\u6709rw\u6743\u9650,\u7136\u540e\u5355\u72ec\u8bbe\u7f6e\u5176\u4ed6\u4eba\u91cc\u7684egon01\u5bf9\u6587\u4ef6\u6709r\u6743\u9650\u3001egon02\u5bf9\u6587\u4ef6\u6709w\u6743\u9650 \"\"\" egon01\u5bf9b.txt\u7684\u6743\u9650\u4e3ar--; egon02\u5bf9b.txt\u7684\u6743\u9650\u4e3a-w- \u5269\u4f59\u7684\u5176\u4ed6\u4eba\u4e2d,\u4f8b\u5982egon03\u5bf9b.txt\u7684\u6743\u9650\u4e3arw- \"\"\" setfacl -m o::rw b.txt setfacl -m u:egon01:r b.txt setfacl -m u:egon02:w b.txt","title":"ACL\u67e5\u6539\u5220\u7ee7\u627f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/8_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8BACL/#aia","text":"\"\"\" lsattr \u67e5\u770b\u6587\u4ef6\u7684\u7279\u6b8a\u5c5e\u6027 \"\"\" [ root@localhost opt ] # touch /opt/{1..3}.txt [ root@localhost opt ] # ll /opt/ \u603b\u7528\u91cf 0 -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 1 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 2 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 3 .txt [ root@localhost opt ] # lsattr /opt/ ---------------- /opt/1.txt ---------------- /opt/2.txt ---------------- /opt/3.txt \"\"\" chattr \u8bbe\u7f6e\u6587\u4ef6\u7684\u7279\u6b8a\u5c5e\u6027 +a \u8ba9\u67d0\u4e2a\u6587\u4ef6\u53ea\u80fd\u5f80\u91cc\u9762\u8ffd\u52a0\u6570\u636e,\u4f46\u4e0d\u80fd\u5220\u9664,\u9002\u7528\u4e8e\u5404\u79cd\u65e5\u5fd7\u6587\u4ef6. +i \u7981\u6b62\u4efb\u4f55\u4fee\u6539,\u6709\u4e9b\u75c5\u6bd2\u7a0b\u5e8f\u4f1a\u5bf9\u6587\u4ef6\u52a0\u4e0a\u8be5\u6743\u9650;\u9632\u6b62\u7cfb\u7edf\u4e2d\u67d0\u4e2a\u5173\u952e\u6587\u4ef6\u88ab\u4fee\u6539 TnT +A \u4e0d\u80fd\u66f4\u6539\u6587\u4ef6\u8bbf\u95ee\u65f6\u95f4 -a -i -A \u5220\u9664\u5c5e\u6027 Ps: \u8fd9\u4e9b\u6587\u4ef6\u5c5e\u6027\u8bbe\u7f6e\u5bf9root\u7ba1\u7406\u5458\u4e5f\u751f\u6548,\u4f46root\u53ef\u4ee5\u66f4\u6539\u8fd9\u4e9b\u7279\u6b8a\u5c5e\u6027\u554a!! \"\"\" [ root@localhost opt ] # chattr +a /opt/1.txt [ root@localhost opt ] # chattr +i /opt/2.txt [ root@localhost opt ] # chattr +A /opt/3.txt [ root@localhost opt ] # lsattr /opt/ -----a---------- /opt/1.txt ----i----------- /opt/2.txt -------A-------- /opt/3.txt [ root@localhost opt ] # ll /opt/ \u603b\u7528\u91cf 0 -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 1 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 2 .txt -rw-r--r-- 1 root root 0 8\u6708 8 06 :19 3 .txt","title":"\u6587\u4ef6\u7684a\u3001i\u3001A\u7279\u6b8a\u5c5e\u6027"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/","text":"\u4ecb\u7ecd \u00b6 \u56e0\u4e3aroot\u7528\u6237\u7684\u6743\u9650\u592a\u5927,\u7834\u574f\u529b\u592a\u5f3a,\u5b89\u5168\u98ce\u9669\u6781\u9ad8, \u6240\u4ee5\u901a\u5e38\u60c5\u51b5\u4e0b\u516c\u53f8\u7684\u670d\u52a1\u5668\u5bf9\u5916\u90fd\u662f\u7981\u6b62root\u7528\u6237\u76f4\u63a5\u767b\u5f55\u7684.. \u505a\u8fd0\u7ef4\u65f6,\u901a\u5e38\u4f7f\u7528\u7684\u90fd\u662f\u666e\u901a\u7528\u6237,\u4f46\u5728\u8fdb\u884c\u65e5\u5e38\u8fd0\u7ef4\u7ba1\u7406\u7684\u8fc7\u7a0b\u4e2d,\u7ecf\u5e38\u9700\u8981\u83b7\u5f97\u67d0\u4e9broot\u624d\u6709\u7684\u7ba1\u7406\u6743\u9650\u624d\u80fd\u5b8c\u6210\u4efb\u52a1, \u4f8b\u5982\u9700\u8981\u6267\u884c/sbin\u76ee\u5f55\u4e0b\u7684\u67d0\u4e9b\u547d\u4ee4 ... \u90a3\u4e48\u5982\u4f55\u624d\u80fd\u5728\u4e0d\u4f7f\u7528root\u7528\u6237\u76f4\u63a5\u767b\u5f55\u64cd\u4f5c\u7cfb\u7edf\u7684\u540c\u65f6\u53c8\u80fd\u4fdd\u8bc1\u666e\u901a\u7528\u6237\u5b8c\u6210\u65e5\u5e38\u5de5\u4f5c\u5462? \u8ba9\u666e\u901a\u7528\u6237\u5177\u5907\u7ba1\u7406\u5458\u6743\u9650,\u6709\u4e24\u79cd\u65b9\u6848: 1> su\u5207\u6362\u7528\u6237\u8eab\u4efd : \u4f7f\u7528\u666e\u901a\u7528\u6237\u767b\u5f55,\u7136\u540e\u4f7f\u7528su\u547d\u4ee4\u5207\u6362\u5230root\u8d26\u6237\u4e0b \u4e0d\u63a8\u8350 \u9700\u8981\u77e5\u9053root\u5bc6\u7801; \u6743\u9650\u63a7\u5236\u4e0d\u7cbe\u7ec6, \u6bcf\u6b21\u83b7\u53d6\u7684\u90fd\u662f\u6240\u6709root\u6743\u9650 2> sudo\u63d0\u6743 : \u4f7f\u7528\u666e\u901a\u7528\u6237\u767b\u5f55,\u4e0d\u5207\u6362\u7528\u6237,\u7528sudo\u547d\u4ee4\u63d0\u53d6root\u7528\u6237\u7684 \u90e8\u5206 \u7ba1\u7406\u6743\u9650 \u4e0d\u9700\u8981\u77e5\u9053root\u5bc6\u7801,\u8f93\u5165\u7684\u662f\u7528\u6237\u81ea\u5df1\u7684\u5bc6\u7801; \u6743\u9650\u63a7\u5236\u66f4\u4e3a\u7cbe\u7ec6, \u53ef\u4ee5\u63a7\u5236\u666e\u901a\u7528\u6237\u53ea\u83b7\u53d6\u90e8\u5206root\u6743\u9650 su\u5207\u6362\u7528\u6237 \u00b6 \u767b\u5f55\u4e0e\u975e\u767b\u5f55shell \u00b6 linux\u4e2d\u7684shell\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b: 1> \u767b\u5f55\u7ea7\u522bshell \u8f93\u5165\u8d26\u53f7\u5bc6\u7801\u767b\u5f55\u8fdb\u6765\u8fd0\u884c\u7684; su - \u7528\u6237\u540d \u7ba1\u7406\u5458root\u5207\u6362\u5230\u666e\u901a\u7528\u6237\u4e0b\u65e0\u9700\u8f93\u5165\u5bc6\u7801,\u53cd\u4e4b\u9700\u8981 2> \u975e\u767b\u5f55\u7ea7\u522bshell su \u7528\u6237\u540d Ps: shell\u7684\u4f7f\u7528\u65b9\u5f0f\u6709\u4e24\u79cd -- \u4ea4\u4e92\u5f0f;\u975e\u4ea4\u4e92\u5f0f(\u5373\u6267\u884cshell\u811a\u672c) \"\"\" `su dc` \u53ea\u662f\u5207\u6362\u4e86\u7528\u6237\u8eab\u4efd,\u73af\u5883\u6ca1\u6709\u6539\u53d8,\u8fd8\u662f\u5728/root\u4e0b `su - dc ` \u76f4\u63a5\u5230\u666e\u901a\u7528\u6237dc\u7684\u5bb6\u76ee\u5f55\u4e0b \"\"\" [ root@localhost ~ ] # su dc [ dc@localhost root ] $ pwd /root [ dc@localhost ~ ] $ exit \u767b\u51fa [ root@localhost ~ ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 8\u6708 8 08 :31:32 CST 2022pts/0 \u4e0a [ dc@localhost ~ ] $ pwd /home/dc \u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6 \u00b6 \u767b\u5f55\u7ea7\u522bshell\u4e0e\u975e\u767b\u5f55\u7ea7\u522b\u7684shell\u672c\u8d28\u4e0a\u533a\u522b\u5728\u4e8e\u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6\u4ee5\u53ca\u987a\u5e8f\u4e0d\u4e00\u6837! \u5168\u5c40\u914d\u7f6e\u6587\u4ef6 ( \u7cfb\u7edf\u7ea7\u522b\u7684,\u5bf9\u6240\u6709\u7528\u6237\u90fd\u751f\u6548 ) : /etc/profile /etc/profile.d/*.sh \u4e00\u5806shell\u811a\u672c\u6587\u4ef6,\u53ef\u6267\u884c\u7a0b\u5e8f /etc/bashrc \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 ( \u5bf9\u5355\u72ec\u7684\u7528\u6237\u751f\u6548,\u5f52\u5c5e\u4e8e\u67d0\u4e2a\u5177\u4f53\u7528\u6237 \uff5e\u53f7\u662f\u4f1a\u6839\u636e\u7528\u6237\u7684\u4e0d\u540c\u53d8\u7684 ) :\u5bb6\u76ee\u5f55\u4e0b\u7684\u4e24\u4e2a\u9690\u85cf\u6587\u4ef6 ~/.bash_profile ~/.bashrc PS: \u9a8c\u8bc1\u4f7f\u7528echo\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u6bcf\u884c\u6dfb\u52a0\u4e00\u4e2a\u8f93\u51fa\u5373\u53ef,\u6ce8\u610f,\u8981\u628a\u8f93\u51fa\u653e\u5728\u6587\u4ef6\u7684\u7b2c\u4e00\u884c..\u5177\u4f53\u8fc7\u7a0b\u7565. \u82e5\u6267\u884c\u7684\u662f\u767b\u5f55\u5f0fshell,\u90a3\u4e48\u914d\u7f6e\u6587\u4ef6\u6267\u884c\u987a\u5e8f\u662f: /etc/profile --> /etc/profile.d/*.sh --> ~/.bash_profile --> ~/.bashrc --> /etc/bashrc \u5982\u679c\u6267\u884c\u7684\u662f\u975e\u767b\u5f55\u5f0fshell,\u90a3\u4e48\u914d\u7f6e\u6587\u4ef6\u6267\u884c\u987a\u5e8f\u662f: ~/.bashrc --> /etc/bashrc --> /etc/profile.d/*.sh \u914d\u7f6e\u6587\u4ef6\u7684\u5999\u7528 \u00b6 \u6ce8\u610f\u54e6,\u4e0b\u8ff0\u64cd\u4f5c\u7684\u73af\u5883\u53d8\u91cf\u62fc\u63a5\u662f\u4e34\u65f6\u751f\u6548\u7684TnT \u82e5\u60f3\u5176\u6c38\u4e45\u751f\u6548,\u53ef\u4ee5\u5c06\u90a3\u4e2a\u62fc\u63a5\u547d\u4ee4\u5199\u5230\u7528\u6237\u767b\u5f55\u65f6\u52a0\u8f7d\u7684\u4efb\u610f\u4e00\u4e2a\u5168\u5c40\u914d\u7f6e\u6587\u4ef6\u4e2d.. _ Ps: \u901a\u5e38\u5f80\u914d\u7f6e\u6587\u4ef6\u7684\u672b\u5c3e\u52a0\u4e24\u6761\u547d\u4ee4 PATH=/opt/soft:$PATH export PATH \u6dfb\u52a0\u73af\u5883\u53d8\u91cf\u5e76\u5c06\u65b0\u7684\u73af\u5883\u53d8\u91cf\u503c\u7ee7\u627f\u5230bash\u8fdb\u7a0b\u7684\u5b50\u5b50\u5b59\u5b59\u4e2d.. \u73af\u5883\u53d8\u91cf\u987e\u540d\u601d\u4e49\u5728\u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u5730\u65b9\u90fd\u6709\u6548!!! \u4e3e\u4e00\u53cd\u4e09: \u82e5\u60f3\u9488\u5bf9\u767b\u5f55\u7ea7\u522b\u4e0e\u975e\u767b\u5f55\u7ea7\u522b\u7684\u6240\u6709\u7528\u6237\u8bbe\u7f6e\u7edf\u4e00\u7684\u914d\u7f6e vim /etc/bashrc ; source /etc/bashrc \u6216\u8005\u91cd\u65b0\u767b\u5f55\u751f\u6548 Ps: \u82e5\u662f\u767b\u5f55\u7ea7\u522b\u7684\u6240\u6709\u7528\u6237,\u901a\u5e38\u64cd\u4f5c\u7684\u662f/etc/profile\u6587\u4ef6 \u82e5\u60f3\u9488\u5bf9\u67d0\u4e00\u4e2a\u7528\u6237\u8bbe\u7f6e\u914d\u7f6e vim ~/.bashrc ; source ~/.bashrc \u6216\u8005\u91cd\u65b0\u767b\u5f55\u751f\u6548 \"\"\" \u6211\u4eec\u77e5\u9053,\u53ef\u4ee5\u5355\u72ec\u6267\u884cls\u547d\u4ee4\u662f\u56e0\u4e3als\u52a0\u5230\u4e86PATH\u73af\u5883\u53d8\u91cf\u5f53\u4e2d.. \"\"\" [ root@localhost ~ ] # which ls alias ls = 'ls --color=auto' /usr/bin/ls [ root@localhost ~ ] # ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # /usr/bin/ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin \"\"\" \u82e5\u6b64\u65f6\u65b0\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6,\u4e0d\u60f3\u5199\u6587\u4ef6\u7684\u8def\u5f84\u524d\u7f00,\u53ea\u5199\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u79f0 \u5c31\u9700\u8981\u5bf9PATH\u53d8\u91cf\u8fdb\u884c\u62fc\u63a5,(\u6ce8\u610f\u54e6,\u6b64\u62fc\u63a5\u662f\u4e34\u65f6\u751f\u6548\u7684!!) \"\"\" [ root@localhost ~ ] # cd /opt/ [ root@localhost opt ] # mkdir soft [ root@localhost opt ] # vim /opt/soft/sb [ root@localhost opt ] # cat /opt/soft/sb echo \"\u753b\u4e00\u4e2a\u5927\u5927\u7684\u997c,\u5403\u4e0d\u4e0b\u6d88\u4e0d\u4e86xswl\" ## root\u7528\u6237\u65b0\u5efa\u7684\u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\u662f644,\u5c06\u6587\u4ef6\u53d8\u4e3a\u53ef\u6267\u884c\u6587\u4ef6,\u9700\u8981\u5bf9\u5176\u52a0\u4e0ax\u53ef\u6267\u884c\u6743\u9650 [ root@localhost ~ ] # /opt/soft/sb -bash: /opt/soft/sb: \u6743\u9650\u4e0d\u591f [ root@localhost ~ ] # chmod +x /opt/soft/sb [ root@localhost ~ ] # ll /opt/soft/sb -rwxr-xr-x 1 root root 52 8\u6708 8 09 :17 /opt/soft/sb [ root@localhost ~ ] # /opt/soft/sb \u753b\u4e00\u4e2a\u5927\u5927\u7684\u997c,\u5403\u4e0d\u4e0b\u6d88\u4e0d\u4e86xswl [ root@localhost opt ] # sb sb: need at least one file to send Try ` sb --help ' for more information. ## \u5c06sb\u6240\u5728\u7684\u76ee\u5f55\u8def\u5f84\u52a0\u5165\u73af\u5883\u53d8\u91cf\u4e2d [ root@localhost ~ ] # PATH=/opt/soft:$PATH [ root@localhost ~ ] # echo $PATH /opt/soft:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin [ root@localhost ~ ] # sb \u753b\u4e00\u4e2a\u5927\u5927\u7684\u997c,\u5403\u4e0d\u4e0b\u6d88\u4e0d\u4e86xswl sudo\u63d0\u6743 \u00b6 \u901a\u8fc7\u914d\u7f6esudo, \u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u8ba9\u666e\u901a\u7528\u6237\u8f93\u5165\u81ea\u5df1\u7684\u5bc6\u7801\u7684\u60c5\u51b5\u4e0b\u800c\u83b7\u53d6\u6211\u4eec\u4e3a\u5176\u914d\u7f6e\u7684\u7279\u5b9a\u6743\u9650 \u8fd9\u6837\u65e2\u4fdd\u8bc1\u4e86\u666e\u901a\u7528\u6237\u62e5\u6709\u4ed6\u60f3\u8981\u7684\u7279\u5b9a\u6743\u9650, \u53c8\u4e0d\u81f3\u4e8e\u6cc4\u9732\u7ba1\u7406root\u7684\u5bc6\u7801... \u4e24\u79cd\u7f16\u8f91\u65b9\u5f0f \u00b6 \u5728root\u7ba1\u7406\u5458\u4e0b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/sudoers\u6765\u5206\u914d\u6743\u9650 1> vim /etc/sudoers visudo -c 2> visudo [ root@localhost opt ] # vim /etc/sudoers ## -- \u5728\u7b2c\u4e00\u884c\u52a0\u5165\u5b57\u7b26aaaa [ root@localhost opt ] # visudo -c >>> /etc/sudoers: \u8bed\u6cd5\u9519\u8bef near line 1 <<< /etc/sudoers \u4e2d\u7b2c 1 \u884c\u9644\u8fd1\u51fa\u73b0\u89e3\u6790\u9519\u8bef [ root@localhost opt ] # vim /etc/sudoers ## -- \u5220\u9664\u7b2c\u4e00\u884c\u7684aaaa\u5b57\u7b26 [ root@localhost opt ] # visudo -c /etc/sudoers\uff1a\u89e3\u6790\u6b63\u786e ## \u4e0e\u7b2c\u4e00\u79cd\u65b9\u5f0f\u76f8\u6bd4,\u662f\u9ed1\u767d\u7684..\u4f46\u4f1a\u81ea\u52a8\u63d0\u793a\u8bed\u6cd5\u9519\u8bef [ root@localhost opt ] # visudo ## -- \u540c\u6837\u7684\u5728\u7b2c\u4e00\u884c\u52a0\u5165\u5b57\u7b26aaaa >>> /etc/sudoers: \u8bed\u6cd5\u9519\u8bef near line 1 <<< \u73b0\u5728\u505a\u4ec0\u4e48\uff1fe ## -- e\u4ee3\u8868\u7ee7\u7eed\u7f16\u8f91 >>> /etc/sudoers: \u8bed\u6cd5\u9519\u8bef near line 1 <<< \u73b0\u5728\u505a\u4ec0\u4e48\uff1fQ ## -- Q\u4ee3\u8868\u76f4\u63a5\u9000\u51fa sudo\u8bed\u6cd5 \u00b6 user MACHINE=COMMANDS \u4ec0\u4e48\u7528\u6237\u5728\u4ec0\u4e48\u673a\u5668\u4e0a\u53ef\u4ee5\u8fd0\u884c\u4ec0\u4e48\u6837\u7684\u547d\u4ee4.. \u7528\u6237 \u80fd\u767b\u5f55\u7684\u4e3b\u673aIP\u6216\u4e3b\u673a\u540d=(\u80fd\u8f6c\u6362\u6210\u7684\u7528\u6237\u8eab\u4efd,\u8868\u793a\u5141\u8bb8\u7528\u6237\u4ee5\u54ea\u4e2a\u7528\u6237\u7684\u6743\u9650\u505a\u4e8b\u60c5) \u7ba1\u7406\u547d\u4ee4 \u6ce8\u610f : \u7ba1\u7406\u547d\u4ee4\u8981\u5199\u7edd\u5bf9\u8def\u5f84.. \u901a\u8fc7 which \u547d\u4ee4 \u53ef\u5f97\u77e5\u547d\u4ee4\u7684\u7edd\u5bf9\u8def\u5f84... ` root ALL =( ALL ) ALL ` -- root\u7528\u6237\u53ef\u4ee5\u5728\u6240\u6709\u4e3b\u673a\u4e0a\u4ee5\u4efb\u610f\u7528\u6237\u8eab\u4efd\u6267\u884c\u6240\u6709\u547d\u4ee4 root: root\u7528\u6237 \u7b2c\u4e00\u4e2aALL: \u53ef\u4ee5\u5728\u4efb\u4f55\u4e00\u53f0\u673a\u5668\u4e0a\u767b\u5f55 \u901a\u5e38\u5c31\u5199\u6210ALL \u56e0\u4e3a\u5c06\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230\u4efb\u610f\u4e00\u53f0\u670d\u52a1\u7aef\u7684\u673a\u5668,ALL\u80af\u5b9a\u5305\u542b\u5f53\u524d\u8fd9\u53f0\u4e3b\u673a \u6572\u9ed1\u677f:\u4ee3\u8868\u7684\u662f\u670d\u52a1\u7aef\u7684IP\u5730\u5740,\u4e0e\u5ba2\u6237\u7aef\u65e0\u5173\uff01\uff01\uff01 \u7b2c\u4e8c\u4e2a ( ALL ) : \u53ef\u4ee5\u8f6c\u6362\u6210\u4efb\u4f55\u7528\u6237\u7684\u8eab\u4efd,\u5373\u62e5\u6709\u6240\u6709\u7684\u6743\u9650 \u901a\u5e38\u5c31\u5199\u6210 ( ALL ) \u7b2c\u4e09\u4e2aALL: \u6240\u6709\u547d\u4ee4 \"\"\" Cmnd_Alias \u547d\u4ee4\u7ec4\u522b\u540d Host_Alias \u4e3b\u673a\u7ec4\u522b\u540d User_Alias \u7528\u6237\u7ec4\u522b\u540d \"\"\" ` Cmnd_Alias NETWORKING = /sbin/route,/sbin/ifconfig ` ` tom ALL =( ALL ) /bin/cp,/bin/touch ` -- \u53ea\u5141\u8bb8tom\u7528\u6237\u4ee5root\u7528\u6237\u7684\u8eab\u4efd\u6267\u884cNETWORKING\u547d\u4ee4\u7ec4\u91cc\u7684route,ifconfig\u547d\u4ee4 ` dc ALL =( ALL ) ALL ` -- \u8fd9\u6837\u7528\u6237dc\u76f8\u5bf9\u4e8e\u4e00\u4e2aroot\u8d85\u7ea7\u7ba1\u7406\u5458,\u53ef\u4ee5\u65e0\u89c6\u6587\u4ef6\u6743\u9650,\u5bf9\u4efb\u4f55\u6587\u4ef6\u4f7f\u7528\u4efb\u4f55\u547d\u4ee4 ` onepiece ALL =( ALL ) NOPASSWD:/user/bin/passed,/usr/bin/vim,!/usr/bin/vim /opt/def.txt ` -- \u5141\u8bb8lili\u7528\u6237\u4ee5root\u7528\u6237\u7684\u8eab\u4efd\u5bf9\u6240\u6709\u7528\u6237 ( \u5305\u62ecroot ) \u7684\u5bc6\u7801\u8fdb\u884c\u514d\u5bc6\u66f4\u6539, \u5e76\u80fd\u5bf9\u6240\u6709\u6587\u4ef6\u514d\u5bc6\u8fdb\u884c\u7f16\u8f91,\u4f46\u4e0d\u80fd\u7f16\u8f91/opt/def.txt\u6587\u4ef6 ` onepiece ALL =( ALL ) ALL,!/usr/bin/vim /opt/def.txt ` -- \u5bf9onepiece\u7528\u6237\u653e\u5f00\u6240\u6709\u6743\u9650,\u552f\u72ec\u5bf9/opt/def.txt\u6587\u4ef6\u7684\u7f16\u8f91\u6743\u9650\u4e0d\u653e\u5f00.. ` Host_Alias TEST1 = 192 .168.0.128,192.168.0.129,192.168.0.130 ` -- \u4e3b\u673a\u7ec4\u522b\u540dTEST1,\u5305\u542b\u7684\u662f\u4e00\u53f0\u53f0\u670d\u52a1\u5668\u7684IP\u5730\u5740,\u5ba2\u6237\u7aef\u662f\u8981\u8fdc\u7a0b\u8fde\u63a5\u5230\u8fd9\u4e9b\u670d\u52a1\u5668\u4e0a\u7684,\u4e0e\u5ba2\u6237\u7aefIP\u65e0\u5173 ` egon01 TEST1 =( ALL ) NOPASSWD:/usr/sbin/ifconfig ` -- egon01\u7528\u6237\u80fd\u5728TEST1\u5305\u542b\u7684\u4e3b\u673a\u4e0a\u8f6c\u6362\u6210root\u8eab\u4efd\u4ee5\u6ca1\u6709\u5bc6\u7801\u7684\u65b9\u5f0f\u8fd0\u884cifconfig\u547d\u4ee4 ` egon02 localhost =( ALL ) NOPASSWD:/usr/sbin/shutdown -h now ` -- localhost\u4ee3\u8868\u672c\u673a\u7684IP\u5730\u5740. egon02\u7528\u6237\u53ea\u80fd\u5728\u672c\u673a\u4e0a\u4ee5root\u8eab\u4efd\u514d\u5bc6\u6267\u884c\u7acb\u9a6c\u5173\u673a\u7684\u547d\u4ee4 \"\"\" \u591a\u4e2a\u7528\u6237\u53ef\u4ee5\u8fdb\u884c\u540c\u4e00\u4e2asudo\u63d0\u6743,\u4e24\u4e2a\u65b9\u6848: `groupadd devops` `gpasswd -a u1 devops` `gpasswd -a u2 devops` \"\"\" ` %devops ALL =( ALL ) NOPASSWD:/usr/sbin/ifconfig ` \u6216\u8005\u53e6\u4e00\u4e2a\u65b9\u6848\u8fbe\u5230\u540c\u6837\u7684\u6548\u679c: ` User_Alias ADMINS = u1,u2 ` ` ADMINS ALL =( ALL ) NOPASSWD:/usr/sbin/ifconfig ` \"\"\" sudo\u5e38\u7528\u53c2\u6570: -l: \u767b\u5f55\u7528\u6237\u4e0b\u9762\uff0c\u6267\u884c`sudo -l` \u663e\u793a\u5f53\u524d\u7528\u6237\u6709\u54ea\u4e9b\u6743\u9650 -k: \u5220\u9664/var/db/sudo/\u4e0b\u9762\u5bf9\u5e94\u7684\u65f6\u95f4\u6233\u7684\u4fe1\u606f,\u4e0b\u6b21\u6267\u884csudo\u9700\u8981\u8f93\u5165\u5f53\u524d\u7528\u6237\u7684\u5bc6\u7801,\u7cfb\u7edf\u9ed8\u8ba45\u5206\u949f\u5931\u6548 \"\"\" \u8981\u77e5\u9053,\u6bcf\u6b21\u4f7f\u7528\u547d\u4ee4sudo,\u90fd\u4f1a\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6/etc/sudoers... \u6240\u4ee5\u7f16\u8f91\u540e,\u4e0d\u9700\u8981\u91cd\u542f.. \u4e00\u4e2a\u5c0f\u5b9e\u9a8c: root\u7528\u6237\u4f9d\u6b21\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4: touch /opt/abc.txt echo 111 >> /opt/abc.txt chmod 00 0 /opt/abc.txt touch def.txt echo 222 >> def.txt chmod 777 /opt/def.txt \"\"\" \u53ef\u4ee5\u770b\u5230,\u6570\u636e\u51c6\u5907\u9636\u6bb5 \u6211\u4eec\u4f7fdc\u7528\u6237\u5bf9\u6587\u4ef6a.txt\u6ca1\u6709\u4efb\u4f55\u6743\u9650;onepiece\u5bf9\u6587\u4ef6a.txt \u5b9e\u9a8c\u76ee\u7684: 1> \u8ba9dc\u7528\u6237\u4f7f\u7528sudo\u540e\u80fd\u901a\u8fc7cat\u67e5\u770b\u6587\u4ef6a.txt\u548cecho >> \u8ffd\u52a0\u5185\u5bb9\u5230\u6587\u4ef6a.txt\u4e2d.. 2> \u8ba9onepiece\u7528\u6237\u4f7f\u7528sudo\u540e\u80fd\u514d\u5bc6\u7f16\u8f91\u4efb\u4f55\u6587\u4ef6,\u9664\u4e86/opt/def.txt \"\"\" [ root@localhost opt ] # ll abc.txt ---------- 1 root root 0 8\u6708 8 15 :26 abc.txt [ root@localhost opt ] # ll def.txt -rwxrwxrwx 1 root root 7 8\u6708 8 17 :05 def.txt [ root@localhost opt ] # ll -d /opt/ drwxr-xr-x. 2 root root 21 8\u6708 8 15 :26 /opt/ [ root@localhost opt ] # cat /opt/abc.txt 111 [ root@localhost opt ] # cat /opt/def.txt 222 \"\"\" \u5bf9/etc/sudoers\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u7f16\u8f91 `dc ALL=(ALL) ALL` `onepiece ALL=(ALL) NOPASSWD:/user/bin/passed,/usr/bin/vim,!/usr/bin/vim /opt/def.txt` \"\"\" [ root@localhost opt ] # vim /etc/sudoers [ root@localhost opt ] # visudo -c /etc/sudoers\uff1a\u89e3\u6790\u6b63\u786e \"\"\" \u9a8c\u8bc1 PS:\u82e5\u8fbe\u4e0d\u5230\u9884\u671f\u7684\u5b9e\u9a8c\u6548\u679c, \u7b2c\u4e00\u6b65\u770b\u6587\u4ef6\u6743\u9650\u540e\u9762\u662f\u5426\u6709\u52a0\u53f7,\u82e5\u6709\u5373\u4f7f\u7528\u4e86ACL `getfacl abc.txt` \u7b2c\u4e8c\u6b65\u68c0\u67e5\u6709\u65e0\u6587\u4ef6\u7279\u6b8a\u5c5e\u6027\u5e72\u6270 `lsattr abc.txt` \"\"\" [ dc@localhost ~ ] $ cat /opt/abc.txt cat: /opt/abc.txt: \u6743\u9650\u4e0d\u591f [ dc@localhost ~ ] $ sudo cat /opt/abc.txt [ sudo ] dc \u7684\u5bc6\u7801\uff1a 111 ## \u56e0\u4e3a\u91cd\u5b9a\u5411\u7b26\u53f7\u201c>>\u201d\u4e5f\u662fbash\u7684\u547d\u4ee4;sudo\u53ea\u662f\u8ba9echo\u547d\u4ee4\u5177\u6709\u4e86root\u6743\u9650 ## \u6240\u4ee5bash\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u547d\u4ee4\u6ca1\u6709\u5199\u5165\u4fe1\u606f\u7684\u6743\u9650 [ dc@localhost ~ ] $ sudo echo \"123\" >> /opt/abc.txt -bash: /opt/abc.txt: \u6743\u9650\u4e0d\u591f ## \u89e3\u51b3\u65b9\u6848: \u5229\u7528\u201csh -c\u201d\u547d\u4ee4,\u5b83\u53ef\u4ee5\u8ba9bash\u5c06\u4e00\u4e32\u5b57\u7b26\u4f5c\u4e3a\u5b8c\u6574\u7684\u547d\u4ee4\u6765\u6267\u884c [ dc@localhost ~ ] $ sudo sh -c \"echo 123 >> /opt/abc.txt\" [ dc@localhost ~ ] $ sudo cat /opt/abc.txt 111 123 ## onepiece\u7528\u6237\u672c\u8eab\u662f\u6709\u6743\u9650\u7f16\u8f91def.txt\u6587\u4ef6\u7684,\u4f46\u52a0\u4e0asudo\u5c31\u4e0d\u884c.. [ onepiece@localhost ~ ] $ sudo vim /opt/def.txt \u5bf9\u4e0d\u8d77,\u7528\u6237onepiece\u65e0\u6743\u4ee5root\u7684\u8eab\u4efd\u5728localhost.localdomain\u4e0a\u6267\u884c/bin/vim /opt/def.txt","title":"\u6743\u9650\u7ba1\u7406\u4e4bsu\u4e0esudo"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#_1","text":"\u56e0\u4e3aroot\u7528\u6237\u7684\u6743\u9650\u592a\u5927,\u7834\u574f\u529b\u592a\u5f3a,\u5b89\u5168\u98ce\u9669\u6781\u9ad8, \u6240\u4ee5\u901a\u5e38\u60c5\u51b5\u4e0b\u516c\u53f8\u7684\u670d\u52a1\u5668\u5bf9\u5916\u90fd\u662f\u7981\u6b62root\u7528\u6237\u76f4\u63a5\u767b\u5f55\u7684.. \u505a\u8fd0\u7ef4\u65f6,\u901a\u5e38\u4f7f\u7528\u7684\u90fd\u662f\u666e\u901a\u7528\u6237,\u4f46\u5728\u8fdb\u884c\u65e5\u5e38\u8fd0\u7ef4\u7ba1\u7406\u7684\u8fc7\u7a0b\u4e2d,\u7ecf\u5e38\u9700\u8981\u83b7\u5f97\u67d0\u4e9broot\u624d\u6709\u7684\u7ba1\u7406\u6743\u9650\u624d\u80fd\u5b8c\u6210\u4efb\u52a1, \u4f8b\u5982\u9700\u8981\u6267\u884c/sbin\u76ee\u5f55\u4e0b\u7684\u67d0\u4e9b\u547d\u4ee4 ... \u90a3\u4e48\u5982\u4f55\u624d\u80fd\u5728\u4e0d\u4f7f\u7528root\u7528\u6237\u76f4\u63a5\u767b\u5f55\u64cd\u4f5c\u7cfb\u7edf\u7684\u540c\u65f6\u53c8\u80fd\u4fdd\u8bc1\u666e\u901a\u7528\u6237\u5b8c\u6210\u65e5\u5e38\u5de5\u4f5c\u5462? \u8ba9\u666e\u901a\u7528\u6237\u5177\u5907\u7ba1\u7406\u5458\u6743\u9650,\u6709\u4e24\u79cd\u65b9\u6848: 1> su\u5207\u6362\u7528\u6237\u8eab\u4efd : \u4f7f\u7528\u666e\u901a\u7528\u6237\u767b\u5f55,\u7136\u540e\u4f7f\u7528su\u547d\u4ee4\u5207\u6362\u5230root\u8d26\u6237\u4e0b \u4e0d\u63a8\u8350 \u9700\u8981\u77e5\u9053root\u5bc6\u7801; \u6743\u9650\u63a7\u5236\u4e0d\u7cbe\u7ec6, \u6bcf\u6b21\u83b7\u53d6\u7684\u90fd\u662f\u6240\u6709root\u6743\u9650 2> sudo\u63d0\u6743 : \u4f7f\u7528\u666e\u901a\u7528\u6237\u767b\u5f55,\u4e0d\u5207\u6362\u7528\u6237,\u7528sudo\u547d\u4ee4\u63d0\u53d6root\u7528\u6237\u7684 \u90e8\u5206 \u7ba1\u7406\u6743\u9650 \u4e0d\u9700\u8981\u77e5\u9053root\u5bc6\u7801,\u8f93\u5165\u7684\u662f\u7528\u6237\u81ea\u5df1\u7684\u5bc6\u7801; \u6743\u9650\u63a7\u5236\u66f4\u4e3a\u7cbe\u7ec6, \u53ef\u4ee5\u63a7\u5236\u666e\u901a\u7528\u6237\u53ea\u83b7\u53d6\u90e8\u5206root\u6743\u9650","title":"\u4ecb\u7ecd"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#su","text":"","title":"su\u5207\u6362\u7528\u6237"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#shell","text":"linux\u4e2d\u7684shell\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b: 1> \u767b\u5f55\u7ea7\u522bshell \u8f93\u5165\u8d26\u53f7\u5bc6\u7801\u767b\u5f55\u8fdb\u6765\u8fd0\u884c\u7684; su - \u7528\u6237\u540d \u7ba1\u7406\u5458root\u5207\u6362\u5230\u666e\u901a\u7528\u6237\u4e0b\u65e0\u9700\u8f93\u5165\u5bc6\u7801,\u53cd\u4e4b\u9700\u8981 2> \u975e\u767b\u5f55\u7ea7\u522bshell su \u7528\u6237\u540d Ps: shell\u7684\u4f7f\u7528\u65b9\u5f0f\u6709\u4e24\u79cd -- \u4ea4\u4e92\u5f0f;\u975e\u4ea4\u4e92\u5f0f(\u5373\u6267\u884cshell\u811a\u672c) \"\"\" `su dc` \u53ea\u662f\u5207\u6362\u4e86\u7528\u6237\u8eab\u4efd,\u73af\u5883\u6ca1\u6709\u6539\u53d8,\u8fd8\u662f\u5728/root\u4e0b `su - dc ` \u76f4\u63a5\u5230\u666e\u901a\u7528\u6237dc\u7684\u5bb6\u76ee\u5f55\u4e0b \"\"\" [ root@localhost ~ ] # su dc [ dc@localhost root ] $ pwd /root [ dc@localhost ~ ] $ exit \u767b\u51fa [ root@localhost ~ ] # su - dc \u4e0a\u4e00\u6b21\u767b\u5f55\uff1a\u4e00 8\u6708 8 08 :31:32 CST 2022pts/0 \u4e0a [ dc@localhost ~ ] $ pwd /home/dc","title":"\u767b\u5f55\u4e0e\u975e\u767b\u5f55shell"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#_2","text":"\u767b\u5f55\u7ea7\u522bshell\u4e0e\u975e\u767b\u5f55\u7ea7\u522b\u7684shell\u672c\u8d28\u4e0a\u533a\u522b\u5728\u4e8e\u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6\u4ee5\u53ca\u987a\u5e8f\u4e0d\u4e00\u6837! \u5168\u5c40\u914d\u7f6e\u6587\u4ef6 ( \u7cfb\u7edf\u7ea7\u522b\u7684,\u5bf9\u6240\u6709\u7528\u6237\u90fd\u751f\u6548 ) : /etc/profile /etc/profile.d/*.sh \u4e00\u5806shell\u811a\u672c\u6587\u4ef6,\u53ef\u6267\u884c\u7a0b\u5e8f /etc/bashrc \u4e2a\u4eba\u914d\u7f6e\u6587\u4ef6 ( \u5bf9\u5355\u72ec\u7684\u7528\u6237\u751f\u6548,\u5f52\u5c5e\u4e8e\u67d0\u4e2a\u5177\u4f53\u7528\u6237 \uff5e\u53f7\u662f\u4f1a\u6839\u636e\u7528\u6237\u7684\u4e0d\u540c\u53d8\u7684 ) :\u5bb6\u76ee\u5f55\u4e0b\u7684\u4e24\u4e2a\u9690\u85cf\u6587\u4ef6 ~/.bash_profile ~/.bashrc PS: \u9a8c\u8bc1\u4f7f\u7528echo\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u6bcf\u884c\u6dfb\u52a0\u4e00\u4e2a\u8f93\u51fa\u5373\u53ef,\u6ce8\u610f,\u8981\u628a\u8f93\u51fa\u653e\u5728\u6587\u4ef6\u7684\u7b2c\u4e00\u884c..\u5177\u4f53\u8fc7\u7a0b\u7565. \u82e5\u6267\u884c\u7684\u662f\u767b\u5f55\u5f0fshell,\u90a3\u4e48\u914d\u7f6e\u6587\u4ef6\u6267\u884c\u987a\u5e8f\u662f: /etc/profile --> /etc/profile.d/*.sh --> ~/.bash_profile --> ~/.bashrc --> /etc/bashrc \u5982\u679c\u6267\u884c\u7684\u662f\u975e\u767b\u5f55\u5f0fshell,\u90a3\u4e48\u914d\u7f6e\u6587\u4ef6\u6267\u884c\u987a\u5e8f\u662f: ~/.bashrc --> /etc/bashrc --> /etc/profile.d/*.sh","title":"\u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#_3","text":"\u6ce8\u610f\u54e6,\u4e0b\u8ff0\u64cd\u4f5c\u7684\u73af\u5883\u53d8\u91cf\u62fc\u63a5\u662f\u4e34\u65f6\u751f\u6548\u7684TnT \u82e5\u60f3\u5176\u6c38\u4e45\u751f\u6548,\u53ef\u4ee5\u5c06\u90a3\u4e2a\u62fc\u63a5\u547d\u4ee4\u5199\u5230\u7528\u6237\u767b\u5f55\u65f6\u52a0\u8f7d\u7684\u4efb\u610f\u4e00\u4e2a\u5168\u5c40\u914d\u7f6e\u6587\u4ef6\u4e2d.. _ Ps: \u901a\u5e38\u5f80\u914d\u7f6e\u6587\u4ef6\u7684\u672b\u5c3e\u52a0\u4e24\u6761\u547d\u4ee4 PATH=/opt/soft:$PATH export PATH \u6dfb\u52a0\u73af\u5883\u53d8\u91cf\u5e76\u5c06\u65b0\u7684\u73af\u5883\u53d8\u91cf\u503c\u7ee7\u627f\u5230bash\u8fdb\u7a0b\u7684\u5b50\u5b50\u5b59\u5b59\u4e2d.. \u73af\u5883\u53d8\u91cf\u987e\u540d\u601d\u4e49\u5728\u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u5730\u65b9\u90fd\u6709\u6548!!! \u4e3e\u4e00\u53cd\u4e09: \u82e5\u60f3\u9488\u5bf9\u767b\u5f55\u7ea7\u522b\u4e0e\u975e\u767b\u5f55\u7ea7\u522b\u7684\u6240\u6709\u7528\u6237\u8bbe\u7f6e\u7edf\u4e00\u7684\u914d\u7f6e vim /etc/bashrc ; source /etc/bashrc \u6216\u8005\u91cd\u65b0\u767b\u5f55\u751f\u6548 Ps: \u82e5\u662f\u767b\u5f55\u7ea7\u522b\u7684\u6240\u6709\u7528\u6237,\u901a\u5e38\u64cd\u4f5c\u7684\u662f/etc/profile\u6587\u4ef6 \u82e5\u60f3\u9488\u5bf9\u67d0\u4e00\u4e2a\u7528\u6237\u8bbe\u7f6e\u914d\u7f6e vim ~/.bashrc ; source ~/.bashrc \u6216\u8005\u91cd\u65b0\u767b\u5f55\u751f\u6548 \"\"\" \u6211\u4eec\u77e5\u9053,\u53ef\u4ee5\u5355\u72ec\u6267\u884cls\u547d\u4ee4\u662f\u56e0\u4e3als\u52a0\u5230\u4e86PATH\u73af\u5883\u53d8\u91cf\u5f53\u4e2d.. \"\"\" [ root@localhost ~ ] # which ls alias ls = 'ls --color=auto' /usr/bin/ls [ root@localhost ~ ] # ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # /usr/bin/ls anaconda-ks.cfg \u516c\u5171 \u89c6\u9891 \u6587\u6863 \u97f3\u4e50 initial-setup-ks.cfg \u6a21\u677f \u56fe\u7247 \u4e0b\u8f7d \u684c\u9762 [ root@localhost ~ ] # echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin \"\"\" \u82e5\u6b64\u65f6\u65b0\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6,\u4e0d\u60f3\u5199\u6587\u4ef6\u7684\u8def\u5f84\u524d\u7f00,\u53ea\u5199\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540d\u79f0 \u5c31\u9700\u8981\u5bf9PATH\u53d8\u91cf\u8fdb\u884c\u62fc\u63a5,(\u6ce8\u610f\u54e6,\u6b64\u62fc\u63a5\u662f\u4e34\u65f6\u751f\u6548\u7684!!) \"\"\" [ root@localhost ~ ] # cd /opt/ [ root@localhost opt ] # mkdir soft [ root@localhost opt ] # vim /opt/soft/sb [ root@localhost opt ] # cat /opt/soft/sb echo \"\u753b\u4e00\u4e2a\u5927\u5927\u7684\u997c,\u5403\u4e0d\u4e0b\u6d88\u4e0d\u4e86xswl\" ## root\u7528\u6237\u65b0\u5efa\u7684\u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\u662f644,\u5c06\u6587\u4ef6\u53d8\u4e3a\u53ef\u6267\u884c\u6587\u4ef6,\u9700\u8981\u5bf9\u5176\u52a0\u4e0ax\u53ef\u6267\u884c\u6743\u9650 [ root@localhost ~ ] # /opt/soft/sb -bash: /opt/soft/sb: \u6743\u9650\u4e0d\u591f [ root@localhost ~ ] # chmod +x /opt/soft/sb [ root@localhost ~ ] # ll /opt/soft/sb -rwxr-xr-x 1 root root 52 8\u6708 8 09 :17 /opt/soft/sb [ root@localhost ~ ] # /opt/soft/sb \u753b\u4e00\u4e2a\u5927\u5927\u7684\u997c,\u5403\u4e0d\u4e0b\u6d88\u4e0d\u4e86xswl [ root@localhost opt ] # sb sb: need at least one file to send Try ` sb --help ' for more information. ## \u5c06sb\u6240\u5728\u7684\u76ee\u5f55\u8def\u5f84\u52a0\u5165\u73af\u5883\u53d8\u91cf\u4e2d [ root@localhost ~ ] # PATH=/opt/soft:$PATH [ root@localhost ~ ] # echo $PATH /opt/soft:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin [ root@localhost ~ ] # sb \u753b\u4e00\u4e2a\u5927\u5927\u7684\u997c,\u5403\u4e0d\u4e0b\u6d88\u4e0d\u4e86xswl","title":"\u914d\u7f6e\u6587\u4ef6\u7684\u5999\u7528"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#sudo","text":"\u901a\u8fc7\u914d\u7f6esudo, \u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u8ba9\u666e\u901a\u7528\u6237\u8f93\u5165\u81ea\u5df1\u7684\u5bc6\u7801\u7684\u60c5\u51b5\u4e0b\u800c\u83b7\u53d6\u6211\u4eec\u4e3a\u5176\u914d\u7f6e\u7684\u7279\u5b9a\u6743\u9650 \u8fd9\u6837\u65e2\u4fdd\u8bc1\u4e86\u666e\u901a\u7528\u6237\u62e5\u6709\u4ed6\u60f3\u8981\u7684\u7279\u5b9a\u6743\u9650, \u53c8\u4e0d\u81f3\u4e8e\u6cc4\u9732\u7ba1\u7406root\u7684\u5bc6\u7801...","title":"sudo\u63d0\u6743"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#_4","text":"\u5728root\u7ba1\u7406\u5458\u4e0b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/sudoers\u6765\u5206\u914d\u6743\u9650 1> vim /etc/sudoers visudo -c 2> visudo [ root@localhost opt ] # vim /etc/sudoers ## -- \u5728\u7b2c\u4e00\u884c\u52a0\u5165\u5b57\u7b26aaaa [ root@localhost opt ] # visudo -c >>> /etc/sudoers: \u8bed\u6cd5\u9519\u8bef near line 1 <<< /etc/sudoers \u4e2d\u7b2c 1 \u884c\u9644\u8fd1\u51fa\u73b0\u89e3\u6790\u9519\u8bef [ root@localhost opt ] # vim /etc/sudoers ## -- \u5220\u9664\u7b2c\u4e00\u884c\u7684aaaa\u5b57\u7b26 [ root@localhost opt ] # visudo -c /etc/sudoers\uff1a\u89e3\u6790\u6b63\u786e ## \u4e0e\u7b2c\u4e00\u79cd\u65b9\u5f0f\u76f8\u6bd4,\u662f\u9ed1\u767d\u7684..\u4f46\u4f1a\u81ea\u52a8\u63d0\u793a\u8bed\u6cd5\u9519\u8bef [ root@localhost opt ] # visudo ## -- \u540c\u6837\u7684\u5728\u7b2c\u4e00\u884c\u52a0\u5165\u5b57\u7b26aaaa >>> /etc/sudoers: \u8bed\u6cd5\u9519\u8bef near line 1 <<< \u73b0\u5728\u505a\u4ec0\u4e48\uff1fe ## -- e\u4ee3\u8868\u7ee7\u7eed\u7f16\u8f91 >>> /etc/sudoers: \u8bed\u6cd5\u9519\u8bef near line 1 <<< \u73b0\u5728\u505a\u4ec0\u4e48\uff1fQ ## -- Q\u4ee3\u8868\u76f4\u63a5\u9000\u51fa","title":"\u4e24\u79cd\u7f16\u8f91\u65b9\u5f0f"},{"location":"1_linux%E5%9F%BA%E7%A1%80/9_%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B9%8Bsu%E4%B8%8Esudo/#sudo_1","text":"user MACHINE=COMMANDS \u4ec0\u4e48\u7528\u6237\u5728\u4ec0\u4e48\u673a\u5668\u4e0a\u53ef\u4ee5\u8fd0\u884c\u4ec0\u4e48\u6837\u7684\u547d\u4ee4.. \u7528\u6237 \u80fd\u767b\u5f55\u7684\u4e3b\u673aIP\u6216\u4e3b\u673a\u540d=(\u80fd\u8f6c\u6362\u6210\u7684\u7528\u6237\u8eab\u4efd,\u8868\u793a\u5141\u8bb8\u7528\u6237\u4ee5\u54ea\u4e2a\u7528\u6237\u7684\u6743\u9650\u505a\u4e8b\u60c5) \u7ba1\u7406\u547d\u4ee4 \u6ce8\u610f : \u7ba1\u7406\u547d\u4ee4\u8981\u5199\u7edd\u5bf9\u8def\u5f84.. \u901a\u8fc7 which \u547d\u4ee4 \u53ef\u5f97\u77e5\u547d\u4ee4\u7684\u7edd\u5bf9\u8def\u5f84... ` root ALL =( ALL ) ALL ` -- root\u7528\u6237\u53ef\u4ee5\u5728\u6240\u6709\u4e3b\u673a\u4e0a\u4ee5\u4efb\u610f\u7528\u6237\u8eab\u4efd\u6267\u884c\u6240\u6709\u547d\u4ee4 root: root\u7528\u6237 \u7b2c\u4e00\u4e2aALL: \u53ef\u4ee5\u5728\u4efb\u4f55\u4e00\u53f0\u673a\u5668\u4e0a\u767b\u5f55 \u901a\u5e38\u5c31\u5199\u6210ALL \u56e0\u4e3a\u5c06\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230\u4efb\u610f\u4e00\u53f0\u670d\u52a1\u7aef\u7684\u673a\u5668,ALL\u80af\u5b9a\u5305\u542b\u5f53\u524d\u8fd9\u53f0\u4e3b\u673a \u6572\u9ed1\u677f:\u4ee3\u8868\u7684\u662f\u670d\u52a1\u7aef\u7684IP\u5730\u5740,\u4e0e\u5ba2\u6237\u7aef\u65e0\u5173\uff01\uff01\uff01 \u7b2c\u4e8c\u4e2a ( ALL ) : \u53ef\u4ee5\u8f6c\u6362\u6210\u4efb\u4f55\u7528\u6237\u7684\u8eab\u4efd,\u5373\u62e5\u6709\u6240\u6709\u7684\u6743\u9650 \u901a\u5e38\u5c31\u5199\u6210 ( ALL ) \u7b2c\u4e09\u4e2aALL: \u6240\u6709\u547d\u4ee4 \"\"\" Cmnd_Alias \u547d\u4ee4\u7ec4\u522b\u540d Host_Alias \u4e3b\u673a\u7ec4\u522b\u540d User_Alias \u7528\u6237\u7ec4\u522b\u540d \"\"\" ` Cmnd_Alias NETWORKING = /sbin/route,/sbin/ifconfig ` ` tom ALL =( ALL ) /bin/cp,/bin/touch ` -- \u53ea\u5141\u8bb8tom\u7528\u6237\u4ee5root\u7528\u6237\u7684\u8eab\u4efd\u6267\u884cNETWORKING\u547d\u4ee4\u7ec4\u91cc\u7684route,ifconfig\u547d\u4ee4 ` dc ALL =( ALL ) ALL ` -- \u8fd9\u6837\u7528\u6237dc\u76f8\u5bf9\u4e8e\u4e00\u4e2aroot\u8d85\u7ea7\u7ba1\u7406\u5458,\u53ef\u4ee5\u65e0\u89c6\u6587\u4ef6\u6743\u9650,\u5bf9\u4efb\u4f55\u6587\u4ef6\u4f7f\u7528\u4efb\u4f55\u547d\u4ee4 ` onepiece ALL =( ALL ) NOPASSWD:/user/bin/passed,/usr/bin/vim,!/usr/bin/vim /opt/def.txt ` -- \u5141\u8bb8lili\u7528\u6237\u4ee5root\u7528\u6237\u7684\u8eab\u4efd\u5bf9\u6240\u6709\u7528\u6237 ( \u5305\u62ecroot ) \u7684\u5bc6\u7801\u8fdb\u884c\u514d\u5bc6\u66f4\u6539, \u5e76\u80fd\u5bf9\u6240\u6709\u6587\u4ef6\u514d\u5bc6\u8fdb\u884c\u7f16\u8f91,\u4f46\u4e0d\u80fd\u7f16\u8f91/opt/def.txt\u6587\u4ef6 ` onepiece ALL =( ALL ) ALL,!/usr/bin/vim /opt/def.txt ` -- \u5bf9onepiece\u7528\u6237\u653e\u5f00\u6240\u6709\u6743\u9650,\u552f\u72ec\u5bf9/opt/def.txt\u6587\u4ef6\u7684\u7f16\u8f91\u6743\u9650\u4e0d\u653e\u5f00.. ` Host_Alias TEST1 = 192 .168.0.128,192.168.0.129,192.168.0.130 ` -- \u4e3b\u673a\u7ec4\u522b\u540dTEST1,\u5305\u542b\u7684\u662f\u4e00\u53f0\u53f0\u670d\u52a1\u5668\u7684IP\u5730\u5740,\u5ba2\u6237\u7aef\u662f\u8981\u8fdc\u7a0b\u8fde\u63a5\u5230\u8fd9\u4e9b\u670d\u52a1\u5668\u4e0a\u7684,\u4e0e\u5ba2\u6237\u7aefIP\u65e0\u5173 ` egon01 TEST1 =( ALL ) NOPASSWD:/usr/sbin/ifconfig ` -- egon01\u7528\u6237\u80fd\u5728TEST1\u5305\u542b\u7684\u4e3b\u673a\u4e0a\u8f6c\u6362\u6210root\u8eab\u4efd\u4ee5\u6ca1\u6709\u5bc6\u7801\u7684\u65b9\u5f0f\u8fd0\u884cifconfig\u547d\u4ee4 ` egon02 localhost =( ALL ) NOPASSWD:/usr/sbin/shutdown -h now ` -- localhost\u4ee3\u8868\u672c\u673a\u7684IP\u5730\u5740. egon02\u7528\u6237\u53ea\u80fd\u5728\u672c\u673a\u4e0a\u4ee5root\u8eab\u4efd\u514d\u5bc6\u6267\u884c\u7acb\u9a6c\u5173\u673a\u7684\u547d\u4ee4 \"\"\" \u591a\u4e2a\u7528\u6237\u53ef\u4ee5\u8fdb\u884c\u540c\u4e00\u4e2asudo\u63d0\u6743,\u4e24\u4e2a\u65b9\u6848: `groupadd devops` `gpasswd -a u1 devops` `gpasswd -a u2 devops` \"\"\" ` %devops ALL =( ALL ) NOPASSWD:/usr/sbin/ifconfig ` \u6216\u8005\u53e6\u4e00\u4e2a\u65b9\u6848\u8fbe\u5230\u540c\u6837\u7684\u6548\u679c: ` User_Alias ADMINS = u1,u2 ` ` ADMINS ALL =( ALL ) NOPASSWD:/usr/sbin/ifconfig ` \"\"\" sudo\u5e38\u7528\u53c2\u6570: -l: \u767b\u5f55\u7528\u6237\u4e0b\u9762\uff0c\u6267\u884c`sudo -l` \u663e\u793a\u5f53\u524d\u7528\u6237\u6709\u54ea\u4e9b\u6743\u9650 -k: \u5220\u9664/var/db/sudo/\u4e0b\u9762\u5bf9\u5e94\u7684\u65f6\u95f4\u6233\u7684\u4fe1\u606f,\u4e0b\u6b21\u6267\u884csudo\u9700\u8981\u8f93\u5165\u5f53\u524d\u7528\u6237\u7684\u5bc6\u7801,\u7cfb\u7edf\u9ed8\u8ba45\u5206\u949f\u5931\u6548 \"\"\" \u8981\u77e5\u9053,\u6bcf\u6b21\u4f7f\u7528\u547d\u4ee4sudo,\u90fd\u4f1a\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6/etc/sudoers... \u6240\u4ee5\u7f16\u8f91\u540e,\u4e0d\u9700\u8981\u91cd\u542f.. \u4e00\u4e2a\u5c0f\u5b9e\u9a8c: root\u7528\u6237\u4f9d\u6b21\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4: touch /opt/abc.txt echo 111 >> /opt/abc.txt chmod 00 0 /opt/abc.txt touch def.txt echo 222 >> def.txt chmod 777 /opt/def.txt \"\"\" \u53ef\u4ee5\u770b\u5230,\u6570\u636e\u51c6\u5907\u9636\u6bb5 \u6211\u4eec\u4f7fdc\u7528\u6237\u5bf9\u6587\u4ef6a.txt\u6ca1\u6709\u4efb\u4f55\u6743\u9650;onepiece\u5bf9\u6587\u4ef6a.txt \u5b9e\u9a8c\u76ee\u7684: 1> \u8ba9dc\u7528\u6237\u4f7f\u7528sudo\u540e\u80fd\u901a\u8fc7cat\u67e5\u770b\u6587\u4ef6a.txt\u548cecho >> \u8ffd\u52a0\u5185\u5bb9\u5230\u6587\u4ef6a.txt\u4e2d.. 2> \u8ba9onepiece\u7528\u6237\u4f7f\u7528sudo\u540e\u80fd\u514d\u5bc6\u7f16\u8f91\u4efb\u4f55\u6587\u4ef6,\u9664\u4e86/opt/def.txt \"\"\" [ root@localhost opt ] # ll abc.txt ---------- 1 root root 0 8\u6708 8 15 :26 abc.txt [ root@localhost opt ] # ll def.txt -rwxrwxrwx 1 root root 7 8\u6708 8 17 :05 def.txt [ root@localhost opt ] # ll -d /opt/ drwxr-xr-x. 2 root root 21 8\u6708 8 15 :26 /opt/ [ root@localhost opt ] # cat /opt/abc.txt 111 [ root@localhost opt ] # cat /opt/def.txt 222 \"\"\" \u5bf9/etc/sudoers\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u7f16\u8f91 `dc ALL=(ALL) ALL` `onepiece ALL=(ALL) NOPASSWD:/user/bin/passed,/usr/bin/vim,!/usr/bin/vim /opt/def.txt` \"\"\" [ root@localhost opt ] # vim /etc/sudoers [ root@localhost opt ] # visudo -c /etc/sudoers\uff1a\u89e3\u6790\u6b63\u786e \"\"\" \u9a8c\u8bc1 PS:\u82e5\u8fbe\u4e0d\u5230\u9884\u671f\u7684\u5b9e\u9a8c\u6548\u679c, \u7b2c\u4e00\u6b65\u770b\u6587\u4ef6\u6743\u9650\u540e\u9762\u662f\u5426\u6709\u52a0\u53f7,\u82e5\u6709\u5373\u4f7f\u7528\u4e86ACL `getfacl abc.txt` \u7b2c\u4e8c\u6b65\u68c0\u67e5\u6709\u65e0\u6587\u4ef6\u7279\u6b8a\u5c5e\u6027\u5e72\u6270 `lsattr abc.txt` \"\"\" [ dc@localhost ~ ] $ cat /opt/abc.txt cat: /opt/abc.txt: \u6743\u9650\u4e0d\u591f [ dc@localhost ~ ] $ sudo cat /opt/abc.txt [ sudo ] dc \u7684\u5bc6\u7801\uff1a 111 ## \u56e0\u4e3a\u91cd\u5b9a\u5411\u7b26\u53f7\u201c>>\u201d\u4e5f\u662fbash\u7684\u547d\u4ee4;sudo\u53ea\u662f\u8ba9echo\u547d\u4ee4\u5177\u6709\u4e86root\u6743\u9650 ## \u6240\u4ee5bash\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u547d\u4ee4\u6ca1\u6709\u5199\u5165\u4fe1\u606f\u7684\u6743\u9650 [ dc@localhost ~ ] $ sudo echo \"123\" >> /opt/abc.txt -bash: /opt/abc.txt: \u6743\u9650\u4e0d\u591f ## \u89e3\u51b3\u65b9\u6848: \u5229\u7528\u201csh -c\u201d\u547d\u4ee4,\u5b83\u53ef\u4ee5\u8ba9bash\u5c06\u4e00\u4e32\u5b57\u7b26\u4f5c\u4e3a\u5b8c\u6574\u7684\u547d\u4ee4\u6765\u6267\u884c [ dc@localhost ~ ] $ sudo sh -c \"echo 123 >> /opt/abc.txt\" [ dc@localhost ~ ] $ sudo cat /opt/abc.txt 111 123 ## onepiece\u7528\u6237\u672c\u8eab\u662f\u6709\u6743\u9650\u7f16\u8f91def.txt\u6587\u4ef6\u7684,\u4f46\u52a0\u4e0asudo\u5c31\u4e0d\u884c.. [ onepiece@localhost ~ ] $ sudo vim /opt/def.txt \u5bf9\u4e0d\u8d77,\u7528\u6237onepiece\u65e0\u6743\u4ee5root\u7684\u8eab\u4efd\u5728localhost.localdomain\u4e0a\u6267\u884c/bin/vim /opt/def.txt","title":"sudo\u8bed\u6cd5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/0_install_db/","text":"mysql\u6570\u636e\u5e93\u7684\u5b89\u88c5,\u8be6\u60c5\u8bf7\u770b\u535a\u5ba2: https://www.cnblogs.com/DC0307/p/16879992.html \u4ee5\u4e0b\u662f\u5728\u5927\u5b66\u91cc\u521d\u6b21\u63a5\u89e6mysql\u65f6\u5019\u505a\u7684\u7b14\u8bb0!! (\u3064\u0414`)\u30ce \u56de\u4e0d\u53bb\u4e86\u5440! \u6211\u4eec\u4f7f\u7528\u6700\u591a\u7684\u662fmysql\u6570\u636e\u5e93.\u9700\u8981\u5148\u5728win10\u7535\u8111\u4e2d\u5b89\u88c5mysql. step1: \u5728mysql\u5b98\u7f51\u4e0b\u8f7d5.7\u7248\u672c\u7684zip\u5b89\u88c5\u5305,\u5e76\u8fdb\u884c\u89e3\u538b. step2: \u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf, \u914d\u7f6e\u89c4\u5219\u5982\u4e0b: step3\uff1a\u9700\u8981\u81ea\u5df1\u521b\u5efa\u914d\u7f6e\u6587\u4ef6my.ini,\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9: [mysql] # \u8bbe\u7f6emysql\u5ba2\u6237\u7aef\u9ed8\u8ba4\u5b57\u7b26\u96c6 default-character-set = utf8 [mysqld] # skip-grant-tables # \u8bbe\u7f6e3306\u7aef\u53e3 port = 3306 # \u8bbe\u7f6emysql\u7684\u5b89\u88c5\u76ee\u5f55 basedir = D:\\MySQL\\mysql-5.7.27-winx64 # \u8bbe\u7f6emysql\u6570\u636e\u5e93\u7684\u6570\u636e\u7684\u5b58\u653e\u76ee\u5f55 datadir = D:\\MySQL\\mysql-5.7.27-winx64\\data # \u5141\u8bb8\u6700\u5927\u8fde\u63a5\u6570 max_connections = 200 # \u670d\u52a1\u7aef\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u9ed8\u8ba4\u4e3a8\u6bd4\u7279\u7f16\u7801\u7684latin1\u5b57\u7b26\u96c6 character-set-server = utf8 # \u521b\u5efa\u65b0\u8868\u65f6\u5c06\u4f7f\u7528\u7684\u9ed8\u8ba4\u5b58\u50a8\u5f15\u64ce default-storage-engine = INNODB #sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES step4: cmd\u4ee5\u7ba1\u7406\u5458\u7684\u65b9\u5f0f\u8fdb\u5165MySQL\u7684bin\u76ee\u5f55\u4e0b(\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4) mysqld install # -- \u53ef\u4ee5\u770b\u5230mysql\u7684\u6839\u76ee\u5f55\u4e0b\u51fa\u73b0\u4e86data\u8fd9\u4e2a\u6587\u4ef6\uff01\uff01\uff01 # -- \u5343\u4e07\u522b\u624b\u6b8b\u81ea\u5df1\u521b\u5efadata\u6587\u4ef6 mysqld -- initialize - insecure net start mysql step5: \u4fee\u6539root\u8d26\u6237\u7684\u5bc6\u7801, \u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 # -- \u7b2c\u4e00\u6b21\u8f93\u5165\u5bc6\u7801\uff0c\u76f4\u63a5\u56de\u8f66\u8df3\u8fc7 mysql - u root - p show databases use mysql ; # -- \u8bbe\u7f6eroot\u8d26\u6237\u7684\u5bc6\u7801\u4e3a 123456 update mysql . user set authentication_string = password ( '123456' ) where user = 'root' ; FLUSH PRIVILEGES ; QUIT \u6ce8\u610f: \u4ee5\u4e0a\u5b89\u88c5\u6b65\u9aa4\u4ec5\u5bf95.7\u53ca\u4ee5\u4e0b\u7248\u672c\u9002\u7528, \u5bf9\u4e8emysql8.0\u7684\u7248\u672c\u4f1a\u62a5\u9519~ \u6392\u5e8f\u89c4\u5219: utf8_general_ci","title":"\u6570\u636e\u5e93\u5b89\u88c5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/","text":"mysql\u6570\u636e\u5e93\u7684\u5907\u4efd \u00b6 \u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/articles/7525619.html sql\u53ef\u4ee5\u770b\u4f5c\u6210\u662f\u4e00\u4e2a\u7f16\u7a0b\u8bed\u8a00 \u5b83\u4e5f\u6709\u5f88\u591a\u597d\u73a9\u7684\u4e1c\u897f. \u89c6\u56fe \u89e6\u53d1\u5668 \u5b58\u50a8\u8fc7\u7a0b \u51fd\u6570 ... \u89c6\u56fe \u00b6 \u89c6\u56fe\u5176\u5b9e\u662f\u4e00\u4e2a\u865a\u62df\u8868(\u975e\u771f\u5b9e\u5b58\u5728), \u5176\u672c\u8d28\u662f\u3010\u6839\u636eSQL\u8bed\u53e5\u83b7\u53d6\u52a8\u6001\u7684\u6570\u636e\u96c6\uff0c\u5e76\u4e3a\u5176\u547d\u540d\u3011, \u7528\u6237\u4f7f\u7528\u65f6\u53ea\u9700\u4f7f\u7528\u3010\u540d\u79f0\u3011\u5373\u53ef\u83b7\u53d6\u7ed3\u679c\u96c6, \u5e76\u53ef\u4ee5\u5c06\u5176\u5f53\u4f5c\u8868\u6765\u4f7f\u7528\u3002\u6709\u70b9\u4e34\u65f6\u8868\u7684\u610f\u601d\uff01 \u6ce8\u610f\uff1a\u57fa\u4e8e\u89c6\u56fe\u53ea\u80fd\u67e5\u8be2, \u4e0d\u80fd\u5bf9\u89c6\u56fe\u6267\u884c \u589e\u52a0\u3001\u4fee\u6539\u3001\u5220\u9664. \u5982\u679c\u6e90\u8868\u53d1\u751f\u53d8\u5316\uff0c\u89c6\u56fe\u8868\u4e5f\u4f1a\u53d1\u751f\u53d8\u5316 \u4e00\u4e2a\u81f4\u547d\u7684\u95ee\u9898:\u89c6\u56fe\u662f\u5b58\u653e\u5728\u6570\u636e\u5e93\u4e2d\u7684,\u5982\u679c\u6211\u4eec\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684sql\u8fc7\u5206\u4f9d\u8d56\u6570\u636e\u5e93\u4e2d\u7684\u89c6\u56fe,\u5373\u5f3a\u8026\u5408. \u90a3\u5c31\u610f\u5473\u7740\u6269\u5c55sql\u6781\u4e3a\u4e0d\u4fbf,\u56e0\u6b64\u5e76\u4e0d\u63a8\u8350\u4f7f\u7528. select * from employee inner join department on employee . dep_id = department . id ; \u521b\u5efa\u89c6\u56fe \u00b6 \u8bed\u6cd5\uff1aCREATE VIEW \u89c6\u56fe\u540d\u79f0 AS SQL\u8bed\u53e5 /* id \u548c name \u5b57\u6bb5\u91cd\u590d \u4fdd\u5b58\u4e0d\u4e0b\u6765\uff01 create view emp_dep as select * from employee inner join department on employee.dep_id = department.id; */ create view emp_dep_view as select employee . * , department . name as depname from employee inner join department on employee . dep_id = department . id ; show tables ; -- \u4f1a\u6709\u4e00\u5f20emp_dep_view\u8868 \u4e14\u6709\u6570\u636e -- \u6ce8\u610f:\u89c6\u56fe\u521b\u5efa\u540e \u53ea\u4f1a\u4ea7\u751f\u4e00\u4e2aemp_dep_view.frm\u6587\u4ef6 \u5b83\u6ca1\u6709\u5355\u72ec\u7684ibd\u6570\u636e\u6587\u4ef6 \u5b83\u7684\u6570\u636e\u6765\u81ea\u4e24\u5f20\u7269\u7406\u8868 -- \u8bf4\u767d\u4e86\u89c6\u56fe\u5b58\u7684\u662f\u865a\u62df\u8868\u7684\u8868\u7ed3\u6784,\u6570\u636e\u6ca1\u6709\u5b58 \u4f7f\u7528\u89c6\u56fe \u00b6 select * from emp_dep_view ; \u5220\u9664\u89c6\u56fe \u00b6 DROP VIEW \u89c6\u56fe\u540d\u79f0 ; \u4fee\u6539\u89c6\u56fe \u00b6 ALTER VIEW \u89c6\u56fe\u540d\u79f0 AS SQL\u8bed\u53e5 ; \u89e6\u53d1\u5668 \u00b6 \u4f7f\u7528\u89e6\u53d1\u5668\u53ef\u4ee5\u5b9a\u5236\u7528\u6237\u5bf9\u8868\u8fdb\u884c\u3010\u589e\u3001\u5220\u3001\u6539\u3011\u64cd\u4f5c\u65f6\u524d\u540e\u7684\u884c\u4e3a\u3002\u6ce8\u610f: \u6ca1\u6709\u67e5\u8be2! python\u91cc\u5c31\u53ef\u4ee5\u5b9e\u73b0\u7684\u5566\uff01\u4e0d\u7528\u5b83.. \u7279\u522b\u7684\uff1aNEW\u8868\u793a\u5373\u5c06\u63d2\u5165\u7684\u6570\u636e\u884c\uff0cOLD\u8868\u793a\u5373\u5c06\u5220\u9664\u7684\u6570\u636e\u884c \u521b\u5efa\u89e6\u53d1\u5668 \u00b6 -- \u63d2\u5165\u524d -- tri_before_insert_tb1\u89e6\u53d1\u5668\u540d\u5b57;BEFORE\u4e4b\u524d;INSERT ON tb1;FOR EACH ROW\u9488\u5bf9\u6bcf\u4e00\u884c CREATE TRIGGER tri_before_insert_tb1 BEFORE INSERT ON tb1 FOR EACH ROW BEGIN ... -- \u4e00\u7cfb\u5217sql\u8bed\u53e5 END AFTER INSERT ON # \u63d2\u5165\u540e BEFORE DELETE ON # \u5220\u9664\u524d AFTER DELETE ON # \u5220\u9664\u540e BEFORE UPDATE ON # \u66f4\u65b0\u524d AFTER UPDATE ON # \u66f4\u65b0\u540e \u5220\u9664\u89e6\u53d1\u5668 \u00b6 DROP TRIGGER tri_after_insert_tb1 ; \u4e3e\u4f8b \u00b6 [\u793a\u4f8b]\uff1a\u5728 t1 \u8868\u4e2d\u63d2\u5165\u6570\u636e\u4e4b\u524d,\u5148\u5728 t2 \u8868\u4e2d\u63d2\u5165\u4e00\u884c\u6570\u636e\u3002 delimiter $$ -- \u5b9a\u4e49sql\u8bed\u53e5\u7684\u7ed3\u675f\u7b26 CREATE TRIGGER tri_before_insert_t1 BEFORE INSERT ON t1 FOR EACH ROW BEGIN -- NEW\u662f\u4e00\u4e2a\u5bf9\u8c61 \u8868\u793a\u51c6\u5907\u63d2\u5165t1\u8868\u7684\u90a3\u4e00\u884c\u8bb0\u5f55;OLD\u8868\u793a\u539f\u6765\u7684\u6570\u636e\u3002 IF NEW . name = 'alex' THEN INSERT INTO t2 ( name ) VALUES ( NEW . id ); -- \u5fc5\u987b\u52a0\u5206\u53f7 END IF ; -- \u5fc5\u987b\u52a0\u5206\u53f7 END $$ delimiter ; insert into t1 ( id , name , email ) values ( 1 , \"alex\" , \"xxx@qq.com\" ) -- \u8fd9\u91cc NEW.id\u7684\u503c\u5c31\u662f1 [\u793a\u4f8b]\uff1a\u5728t1\u8868\u4e2d\u5220\u9664\u6570\u636e\u4e4b\u540e,\u518d\u5728t2\u8868\u4e2d\u63d2\u5165\u4e00\u884c\u6570\u636e\u3002 delimiter $$ CREATE TRIGGER tri_after_insert_t1 AFTER DELETE ON t1 FOR EACH ROW BEGIN IF OLD . name = 'alex' THEN INSERT INTO t2 ( name ) VALUES ( OLD . id ); END IF ; END $$ delimiter ; \u5b58\u50a8\u8fc7\u7a0b \u00b6 \u5b58\u50a8\u8fc7\u7a0b\u76f8\u5f53\u4e8e\u628a\u4e00\u5806\u64cd\u4f5c\u6570\u636e\u7684sql\u8bed\u53e5\u5199\u5b8c\u540e,\u505a\u6210\u4e86\u4e00\u4e2a\u63a5\u53e3,\u7ed9\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4eba\u5458\u7528 \u5f53\u4e3b\u52a8\u53bb\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u65f6,\u5176\u4e2d\u5185\u90e8\u7684SQL\u8bed\u53e5\u4f1a\u6309\u7167\u903b\u8f91\u6267\u884c. \u89c6\u56fe\u3001\u89e6\u53d1\u5668\u3001\u51fd\u6570\u3001\u4e8b\u52a1... \u90fd\u53ef\u4ee5\u5f80\u91cc\u9762\u4e22.... \u4e09\u5927\u5f00\u53d1\u6a21\u5f0f: \uff081\uff09\u5e94\u7528\u5f00\u53d1\u4eba\u5458(\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91) + \u5f00\u53d1\u578bDBA(\u6570\u636e\u7684\u64cd\u4f5c \u5b58\u50a8\u8fc7\u7a0b) \uff082\uff09\u5e94\u7528\u5f00\u53d1\u4eba\u5458(\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91+sql\u8bed\u53e5 ) + \u7ba1\u7406\u578bDBA(\u53ea\u7ba1\u7406\u6570\u636e\u5e93 \u4e0d\u5199sql\u8bed\u53e5) \uff083\uff09\u5e94\u7528\u5f00\u53d1\u4eba\u5458(\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91+ORM\u6846\u67b6) + \u7ba1\u7406\u578bDBA(\u53ea\u7ba1\u7406\u6570\u636e\u5e93 \u4e0d\u5199sql\u8bed\u53e5) _ \u9009\u5b83\uff01 \u57fa\u4e8eORM\u6846\u67b6\u5199\u7c7b,\u7c7b\u5c31\u76f8\u5f53\u4e8e\u8868,\u7c7b\u4ea7\u751f\u7684\u4e00\u6761\u5bf9\u8c61\u5c31\u662f\u8bb0\u5f55,\u901a\u8fc7\u64cd\u4f5c\u7c7b\u548c\u5bf9\u8c61\u5b83\u5e95\u5c42\u4f1a\u5e2e\u5fd9\u8f6c\u6362\u4e3asql\u8bed\u53e5. (1)\u7406\u8bba\u4e0a\u6700\u597d,\u6487\u5f00(1)\u4e0d\u8c08\u3002(2)\u7684\u6267\u884c\u6548\u7387\u6700\u9ad8,(3)\u7684\u5f00\u53d1\u6548\u7387\u6700\u9ad8. \u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b(\u65e0\u53c2) \u00b6 delimiter // create procedure p1 () -- \u5b58\u50a8\u8fc7\u7a0b\u7684\u540d\u5b57p1 BEGIN -- \u653e\u4e00\u5806sql\u8bed\u53e5 select * from blog ; INSERT into blog ( name , sub_time ) values ( \"xxx\" , now ()); END // delimiter ; -- \u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b # \u5728 mysql\u6570\u636e\u5e93\u4e2d\u8c03\u7528 call p1 () # \u5728 python\u4e2d\u57fa\u4e8epymysql\u8c03\u7528 cursor . callproc ( 'p1' ) print ( cursor . fetchall ()) \u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b(\u6709\u53c2) \u00b6 in \u4ec5\u7528\u4e8e\u4f20\u5165\u53c2\u6570\u7528 out \u4ec5\u7528\u4e8e\u8fd4\u56de\u503c\u7528 inout \u65e2\u53ef\u4ee5\u4f20\u5165\u53c8\u53ef\u4ee5\u5f53\u4f5c\u8fd4\u56de\u503c delimiter // create procedure p3 ( in n1 int , out res int ) BEGIN select * from blog where id > n1 ; set res = 1 ; END // delimiter ; # \u5728 mysql\u4e2d\u8c03\u7528 set @ res = 0 ; -- \u8fd4\u56de\u503c\u4e0d\u80fd\u76f4\u63a5\u4f20\u503c,\u8981\u5148\u8bbe\u7f6e\u4e2a\u53d8\u91cf call p3 ( 3 , @ res ); -- 3\u4f20\u7ed9\u4e86n1 @res\u53d8\u91cf\u7ed1\u5b9ares select @ res ; # \u5728 python\u4e2d\u57fa\u4e8epymysql\u8c03\u7528 cursor . callproc ( 'p3' ,( 3 , 0 )) # 0 \u76f8\u5f53\u4e8e set @ res = 0 print ( cursor . fetchall ()) # \u67e5\u8be2 select\u7684\u67e5\u8be2\u7ed3\u679c cursor . execute ( 'select @_p3_0,@_p3_1;' ) # @ p3_0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u53c2\u6570 \uff0c @ p3_1\u4ee3\u8868\u7b2c\u4e8c\u4e2a\u53c2\u6570 \uff0c\u5373\u8fd4\u56de\u503c print ( cursor . fetchall ()) # \u67e5\u8be2\u5b58\u50a8\u8fc7\u7a0b\u53c2\u6570\u7684\u503c # \u63d2\u5165 300 \u4e07\u6761\u8bb0\u5f55 ... delimiter $$ create procedure auto_insert1 () BEGIN declare i int default 1 ; while ( i < 3000000 ) do insert into s1 values ( i , 'egon' , 'male' , concat ( 'egon' , i , '@oldboy' )); set i = i + 1 ; select concat ( 'egon' , i , '_ok' ); end while ; END $$ # $$\u7ed3\u675f delimiter ; \u5220\u9664\u5b58\u50a8\u8fc7\u7a0b \u00b6 drop procedure proc_name ; \u51fd\u6570 \u00b6 mysql\u51fd\u6570\u4e0d\u80fd\u5355\u72ec\u4f7f\u7528 \u8981\u914d\u5408\u7740sql\u8bed\u53e5\u7528 \u81ea\u5b9a\u4e49\u51fd\u6570\u3001\u5220\u9664\u51fd\u6570\u3001\u6267\u884c\u51fd\u6570\u5565\u7684\u611f\u5174\u8da3\u5c31\u4e86\u89e3..\u5e2e\u52a9\u4e0d\u5927. (\u00b4\u25bd\uff40)\u4e0d\u611f\u5174\u8da3\uff01 CREATE TABLE blog ( id INT PRIMARY KEY auto_increment , NAME CHAR ( 32 ), sub_time datetime ); INSERT INTO blog ( NAME , sub_time ) VALUES ( '\u7b2c1\u7bc7' , '2015-03-01 11:31:21' ), ( '\u7b2c2\u7bc7' , '2015-03-11 16:31:21' ), ( '\u7b2c3\u7bc7' , '2016-07-01 10:21:31' ), ( '\u7b2c4\u7bc7' , '2016-07-22 09:23:21' ), ( '\u7b2c5\u7bc7' , '2016-07-23 10:11:11' ), ( '\u7b2c6\u7bc7' , '2016-07-25 11:21:31' ), ( '\u7b2c7\u7bc7' , '2017-03-01 15:33:21' ), ( '\u7b2c8\u7bc7' , '2017-03-01 17:32:21' ), ( '\u7b2c9\u7bc7' , '2017-03-01 18:31:21' ); SELECT DATE_FORMAT ( sub_time , '%Y-%m' ), COUNT ( 1 ) FROM blog GROUP BY DATE_FORMAT ( sub_time , '%Y-%m' ); + -------------------------------+----------+ | DATE_FORMAT ( sub_time , '%Y-%m' ) | COUNT ( 1 ) | + -------------------------------+----------+ | 2015 - 03 | 2 | | 2016 - 07 | 4 | | 2017 - 03 | 3 | + -------------------------------+----------+ \u6d41\u7a0b\u63a7\u5236 \u00b6 \u7565. \u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/articles/7495918.html \u7528sql\u8bed\u53e5\u6765\u5b8c\u6210\u6570\u636e\u7684\u589e\u5220\u6539\u67e5,\u903b\u8f91\u5224\u65ad\u5b8c\u5168\u53ef\u4ee5python\u6765\u641e\u5b9a\uff01","title":"just_know"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#mysql","text":"\u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/articles/7525619.html sql\u53ef\u4ee5\u770b\u4f5c\u6210\u662f\u4e00\u4e2a\u7f16\u7a0b\u8bed\u8a00 \u5b83\u4e5f\u6709\u5f88\u591a\u597d\u73a9\u7684\u4e1c\u897f. \u89c6\u56fe \u89e6\u53d1\u5668 \u5b58\u50a8\u8fc7\u7a0b \u51fd\u6570 ...","title":"mysql\u6570\u636e\u5e93\u7684\u5907\u4efd"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_1","text":"\u89c6\u56fe\u5176\u5b9e\u662f\u4e00\u4e2a\u865a\u62df\u8868(\u975e\u771f\u5b9e\u5b58\u5728), \u5176\u672c\u8d28\u662f\u3010\u6839\u636eSQL\u8bed\u53e5\u83b7\u53d6\u52a8\u6001\u7684\u6570\u636e\u96c6\uff0c\u5e76\u4e3a\u5176\u547d\u540d\u3011, \u7528\u6237\u4f7f\u7528\u65f6\u53ea\u9700\u4f7f\u7528\u3010\u540d\u79f0\u3011\u5373\u53ef\u83b7\u53d6\u7ed3\u679c\u96c6, \u5e76\u53ef\u4ee5\u5c06\u5176\u5f53\u4f5c\u8868\u6765\u4f7f\u7528\u3002\u6709\u70b9\u4e34\u65f6\u8868\u7684\u610f\u601d\uff01 \u6ce8\u610f\uff1a\u57fa\u4e8e\u89c6\u56fe\u53ea\u80fd\u67e5\u8be2, \u4e0d\u80fd\u5bf9\u89c6\u56fe\u6267\u884c \u589e\u52a0\u3001\u4fee\u6539\u3001\u5220\u9664. \u5982\u679c\u6e90\u8868\u53d1\u751f\u53d8\u5316\uff0c\u89c6\u56fe\u8868\u4e5f\u4f1a\u53d1\u751f\u53d8\u5316 \u4e00\u4e2a\u81f4\u547d\u7684\u95ee\u9898:\u89c6\u56fe\u662f\u5b58\u653e\u5728\u6570\u636e\u5e93\u4e2d\u7684,\u5982\u679c\u6211\u4eec\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684sql\u8fc7\u5206\u4f9d\u8d56\u6570\u636e\u5e93\u4e2d\u7684\u89c6\u56fe,\u5373\u5f3a\u8026\u5408. \u90a3\u5c31\u610f\u5473\u7740\u6269\u5c55sql\u6781\u4e3a\u4e0d\u4fbf,\u56e0\u6b64\u5e76\u4e0d\u63a8\u8350\u4f7f\u7528. select * from employee inner join department on employee . dep_id = department . id ;","title":"\u89c6\u56fe"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_2","text":"\u8bed\u6cd5\uff1aCREATE VIEW \u89c6\u56fe\u540d\u79f0 AS SQL\u8bed\u53e5 /* id \u548c name \u5b57\u6bb5\u91cd\u590d \u4fdd\u5b58\u4e0d\u4e0b\u6765\uff01 create view emp_dep as select * from employee inner join department on employee.dep_id = department.id; */ create view emp_dep_view as select employee . * , department . name as depname from employee inner join department on employee . dep_id = department . id ; show tables ; -- \u4f1a\u6709\u4e00\u5f20emp_dep_view\u8868 \u4e14\u6709\u6570\u636e -- \u6ce8\u610f:\u89c6\u56fe\u521b\u5efa\u540e \u53ea\u4f1a\u4ea7\u751f\u4e00\u4e2aemp_dep_view.frm\u6587\u4ef6 \u5b83\u6ca1\u6709\u5355\u72ec\u7684ibd\u6570\u636e\u6587\u4ef6 \u5b83\u7684\u6570\u636e\u6765\u81ea\u4e24\u5f20\u7269\u7406\u8868 -- \u8bf4\u767d\u4e86\u89c6\u56fe\u5b58\u7684\u662f\u865a\u62df\u8868\u7684\u8868\u7ed3\u6784,\u6570\u636e\u6ca1\u6709\u5b58","title":"\u521b\u5efa\u89c6\u56fe"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_3","text":"select * from emp_dep_view ;","title":"\u4f7f\u7528\u89c6\u56fe"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_4","text":"DROP VIEW \u89c6\u56fe\u540d\u79f0 ;","title":"\u5220\u9664\u89c6\u56fe"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_5","text":"ALTER VIEW \u89c6\u56fe\u540d\u79f0 AS SQL\u8bed\u53e5 ;","title":"\u4fee\u6539\u89c6\u56fe"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_6","text":"\u4f7f\u7528\u89e6\u53d1\u5668\u53ef\u4ee5\u5b9a\u5236\u7528\u6237\u5bf9\u8868\u8fdb\u884c\u3010\u589e\u3001\u5220\u3001\u6539\u3011\u64cd\u4f5c\u65f6\u524d\u540e\u7684\u884c\u4e3a\u3002\u6ce8\u610f: \u6ca1\u6709\u67e5\u8be2! python\u91cc\u5c31\u53ef\u4ee5\u5b9e\u73b0\u7684\u5566\uff01\u4e0d\u7528\u5b83.. \u7279\u522b\u7684\uff1aNEW\u8868\u793a\u5373\u5c06\u63d2\u5165\u7684\u6570\u636e\u884c\uff0cOLD\u8868\u793a\u5373\u5c06\u5220\u9664\u7684\u6570\u636e\u884c","title":"\u89e6\u53d1\u5668"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_7","text":"-- \u63d2\u5165\u524d -- tri_before_insert_tb1\u89e6\u53d1\u5668\u540d\u5b57;BEFORE\u4e4b\u524d;INSERT ON tb1;FOR EACH ROW\u9488\u5bf9\u6bcf\u4e00\u884c CREATE TRIGGER tri_before_insert_tb1 BEFORE INSERT ON tb1 FOR EACH ROW BEGIN ... -- \u4e00\u7cfb\u5217sql\u8bed\u53e5 END AFTER INSERT ON # \u63d2\u5165\u540e BEFORE DELETE ON # \u5220\u9664\u524d AFTER DELETE ON # \u5220\u9664\u540e BEFORE UPDATE ON # \u66f4\u65b0\u524d AFTER UPDATE ON # \u66f4\u65b0\u540e","title":"\u521b\u5efa\u89e6\u53d1\u5668"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_8","text":"DROP TRIGGER tri_after_insert_tb1 ;","title":"\u5220\u9664\u89e6\u53d1\u5668"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_9","text":"[\u793a\u4f8b]\uff1a\u5728 t1 \u8868\u4e2d\u63d2\u5165\u6570\u636e\u4e4b\u524d,\u5148\u5728 t2 \u8868\u4e2d\u63d2\u5165\u4e00\u884c\u6570\u636e\u3002 delimiter $$ -- \u5b9a\u4e49sql\u8bed\u53e5\u7684\u7ed3\u675f\u7b26 CREATE TRIGGER tri_before_insert_t1 BEFORE INSERT ON t1 FOR EACH ROW BEGIN -- NEW\u662f\u4e00\u4e2a\u5bf9\u8c61 \u8868\u793a\u51c6\u5907\u63d2\u5165t1\u8868\u7684\u90a3\u4e00\u884c\u8bb0\u5f55;OLD\u8868\u793a\u539f\u6765\u7684\u6570\u636e\u3002 IF NEW . name = 'alex' THEN INSERT INTO t2 ( name ) VALUES ( NEW . id ); -- \u5fc5\u987b\u52a0\u5206\u53f7 END IF ; -- \u5fc5\u987b\u52a0\u5206\u53f7 END $$ delimiter ; insert into t1 ( id , name , email ) values ( 1 , \"alex\" , \"xxx@qq.com\" ) -- \u8fd9\u91cc NEW.id\u7684\u503c\u5c31\u662f1 [\u793a\u4f8b]\uff1a\u5728t1\u8868\u4e2d\u5220\u9664\u6570\u636e\u4e4b\u540e,\u518d\u5728t2\u8868\u4e2d\u63d2\u5165\u4e00\u884c\u6570\u636e\u3002 delimiter $$ CREATE TRIGGER tri_after_insert_t1 AFTER DELETE ON t1 FOR EACH ROW BEGIN IF OLD . name = 'alex' THEN INSERT INTO t2 ( name ) VALUES ( OLD . id ); END IF ; END $$ delimiter ;","title":"\u4e3e\u4f8b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_10","text":"\u5b58\u50a8\u8fc7\u7a0b\u76f8\u5f53\u4e8e\u628a\u4e00\u5806\u64cd\u4f5c\u6570\u636e\u7684sql\u8bed\u53e5\u5199\u5b8c\u540e,\u505a\u6210\u4e86\u4e00\u4e2a\u63a5\u53e3,\u7ed9\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4eba\u5458\u7528 \u5f53\u4e3b\u52a8\u53bb\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u65f6,\u5176\u4e2d\u5185\u90e8\u7684SQL\u8bed\u53e5\u4f1a\u6309\u7167\u903b\u8f91\u6267\u884c. \u89c6\u56fe\u3001\u89e6\u53d1\u5668\u3001\u51fd\u6570\u3001\u4e8b\u52a1... \u90fd\u53ef\u4ee5\u5f80\u91cc\u9762\u4e22.... \u4e09\u5927\u5f00\u53d1\u6a21\u5f0f: \uff081\uff09\u5e94\u7528\u5f00\u53d1\u4eba\u5458(\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91) + \u5f00\u53d1\u578bDBA(\u6570\u636e\u7684\u64cd\u4f5c \u5b58\u50a8\u8fc7\u7a0b) \uff082\uff09\u5e94\u7528\u5f00\u53d1\u4eba\u5458(\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91+sql\u8bed\u53e5 ) + \u7ba1\u7406\u578bDBA(\u53ea\u7ba1\u7406\u6570\u636e\u5e93 \u4e0d\u5199sql\u8bed\u53e5) \uff083\uff09\u5e94\u7528\u5f00\u53d1\u4eba\u5458(\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91+ORM\u6846\u67b6) + \u7ba1\u7406\u578bDBA(\u53ea\u7ba1\u7406\u6570\u636e\u5e93 \u4e0d\u5199sql\u8bed\u53e5) _ \u9009\u5b83\uff01 \u57fa\u4e8eORM\u6846\u67b6\u5199\u7c7b,\u7c7b\u5c31\u76f8\u5f53\u4e8e\u8868,\u7c7b\u4ea7\u751f\u7684\u4e00\u6761\u5bf9\u8c61\u5c31\u662f\u8bb0\u5f55,\u901a\u8fc7\u64cd\u4f5c\u7c7b\u548c\u5bf9\u8c61\u5b83\u5e95\u5c42\u4f1a\u5e2e\u5fd9\u8f6c\u6362\u4e3asql\u8bed\u53e5. (1)\u7406\u8bba\u4e0a\u6700\u597d,\u6487\u5f00(1)\u4e0d\u8c08\u3002(2)\u7684\u6267\u884c\u6548\u7387\u6700\u9ad8,(3)\u7684\u5f00\u53d1\u6548\u7387\u6700\u9ad8.","title":"\u5b58\u50a8\u8fc7\u7a0b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_11","text":"delimiter // create procedure p1 () -- \u5b58\u50a8\u8fc7\u7a0b\u7684\u540d\u5b57p1 BEGIN -- \u653e\u4e00\u5806sql\u8bed\u53e5 select * from blog ; INSERT into blog ( name , sub_time ) values ( \"xxx\" , now ()); END // delimiter ; -- \u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b # \u5728 mysql\u6570\u636e\u5e93\u4e2d\u8c03\u7528 call p1 () # \u5728 python\u4e2d\u57fa\u4e8epymysql\u8c03\u7528 cursor . callproc ( 'p1' ) print ( cursor . fetchall ())","title":"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b(\u65e0\u53c2)"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_12","text":"in \u4ec5\u7528\u4e8e\u4f20\u5165\u53c2\u6570\u7528 out \u4ec5\u7528\u4e8e\u8fd4\u56de\u503c\u7528 inout \u65e2\u53ef\u4ee5\u4f20\u5165\u53c8\u53ef\u4ee5\u5f53\u4f5c\u8fd4\u56de\u503c delimiter // create procedure p3 ( in n1 int , out res int ) BEGIN select * from blog where id > n1 ; set res = 1 ; END // delimiter ; # \u5728 mysql\u4e2d\u8c03\u7528 set @ res = 0 ; -- \u8fd4\u56de\u503c\u4e0d\u80fd\u76f4\u63a5\u4f20\u503c,\u8981\u5148\u8bbe\u7f6e\u4e2a\u53d8\u91cf call p3 ( 3 , @ res ); -- 3\u4f20\u7ed9\u4e86n1 @res\u53d8\u91cf\u7ed1\u5b9ares select @ res ; # \u5728 python\u4e2d\u57fa\u4e8epymysql\u8c03\u7528 cursor . callproc ( 'p3' ,( 3 , 0 )) # 0 \u76f8\u5f53\u4e8e set @ res = 0 print ( cursor . fetchall ()) # \u67e5\u8be2 select\u7684\u67e5\u8be2\u7ed3\u679c cursor . execute ( 'select @_p3_0,@_p3_1;' ) # @ p3_0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u53c2\u6570 \uff0c @ p3_1\u4ee3\u8868\u7b2c\u4e8c\u4e2a\u53c2\u6570 \uff0c\u5373\u8fd4\u56de\u503c print ( cursor . fetchall ()) # \u67e5\u8be2\u5b58\u50a8\u8fc7\u7a0b\u53c2\u6570\u7684\u503c # \u63d2\u5165 300 \u4e07\u6761\u8bb0\u5f55 ... delimiter $$ create procedure auto_insert1 () BEGIN declare i int default 1 ; while ( i < 3000000 ) do insert into s1 values ( i , 'egon' , 'male' , concat ( 'egon' , i , '@oldboy' )); set i = i + 1 ; select concat ( 'egon' , i , '_ok' ); end while ; END $$ # $$\u7ed3\u675f delimiter ;","title":"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b(\u6709\u53c2)"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_13","text":"drop procedure proc_name ;","title":"\u5220\u9664\u5b58\u50a8\u8fc7\u7a0b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_14","text":"mysql\u51fd\u6570\u4e0d\u80fd\u5355\u72ec\u4f7f\u7528 \u8981\u914d\u5408\u7740sql\u8bed\u53e5\u7528 \u81ea\u5b9a\u4e49\u51fd\u6570\u3001\u5220\u9664\u51fd\u6570\u3001\u6267\u884c\u51fd\u6570\u5565\u7684\u611f\u5174\u8da3\u5c31\u4e86\u89e3..\u5e2e\u52a9\u4e0d\u5927. (\u00b4\u25bd\uff40)\u4e0d\u611f\u5174\u8da3\uff01 CREATE TABLE blog ( id INT PRIMARY KEY auto_increment , NAME CHAR ( 32 ), sub_time datetime ); INSERT INTO blog ( NAME , sub_time ) VALUES ( '\u7b2c1\u7bc7' , '2015-03-01 11:31:21' ), ( '\u7b2c2\u7bc7' , '2015-03-11 16:31:21' ), ( '\u7b2c3\u7bc7' , '2016-07-01 10:21:31' ), ( '\u7b2c4\u7bc7' , '2016-07-22 09:23:21' ), ( '\u7b2c5\u7bc7' , '2016-07-23 10:11:11' ), ( '\u7b2c6\u7bc7' , '2016-07-25 11:21:31' ), ( '\u7b2c7\u7bc7' , '2017-03-01 15:33:21' ), ( '\u7b2c8\u7bc7' , '2017-03-01 17:32:21' ), ( '\u7b2c9\u7bc7' , '2017-03-01 18:31:21' ); SELECT DATE_FORMAT ( sub_time , '%Y-%m' ), COUNT ( 1 ) FROM blog GROUP BY DATE_FORMAT ( sub_time , '%Y-%m' ); + -------------------------------+----------+ | DATE_FORMAT ( sub_time , '%Y-%m' ) | COUNT ( 1 ) | + -------------------------------+----------+ | 2015 - 03 | 2 | | 2016 - 07 | 4 | | 2017 - 03 | 3 | + -------------------------------+----------+","title":"\u51fd\u6570"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/10_just_know/#_15","text":"\u7565. \u53c2\u8003\u94fe\u63a5: https://www.cnblogs.com/linhaifeng/articles/7495918.html \u7528sql\u8bed\u53e5\u6765\u5b8c\u6210\u6570\u636e\u7684\u589e\u5220\u6539\u67e5,\u903b\u8f91\u5224\u65ad\u5b8c\u5168\u53ef\u4ee5python\u6765\u641e\u5b9a\uff01","title":"\u6d41\u7a0b\u63a7\u5236"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/1_db_command/","text":"* / % binary greatest() least() ASCII() replace() week() yearweek() date_add() date_format() mysql\u7248\u672c\uff1aselect version(); \u5f53\u524d\u767b\u5f55\u7528\u6237\uff1aselect user(); \u5f53\u524d\u65e5\u671f'\u5e74-\u6708-\u65e5 \u65f6-\u5206-\u79d2'\uff1aselect now(); '\u5e74-\u6708-\u65e5': select curdate(); '\u65f6-\u5206-\u79d2': select curtime(); system clear; sql\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff01 create insert ; drop delete ; alter update ; show select \u6570\u636e\u5e93 \u00b6 \u521b\u5efa\uff1acreate database [if not exists] database_name default charset utf8 collate utf8_general_ci; \u5220\u9664\u5e93\uff1adrop database database_name; \u4fee\u6539: alter database database_name charset latin1; \u67e5\u770b\uff1ashow databases; \u67e5\u770b\u6307\u5b9a\u6570\u636e\u5e93\u7684\u521b\u5efa\u4fe1\u606f\uff1ashow create database database_name; \u8fd4\u56de\u5f53\u524d\u4f7f\u7528\u7684\u6570\u636e\u5e93\u7684\u540d\u79f0'\u53ef\u4ee5\u8bbe\u7f6e\u5217\u522b\u540d': select database() [as 'column_name']; \u8fde\u63a5\uff1amysql -uroot -p \u9000\u51fa\uff1aexit \u4f7f\u7528\uff1ause database_name; \u6570\u636e\u8868 \u00b6 \u521b\u5efa\uff1a create table [if not exists] table_name ( \u5217\u540d \u7c7b\u578b \u7ea6\u675f, [\u5217\u540d \u7c7b\u578b \u7ea6\u675f] )default charset=utf8mb4; \u5220\u9664\u8868\uff1adrop table [if exists] table_name; \u4fee\u6539\uff1aalter table table_name add|modify|change|rename to|drop; \u6dfb\u52a0\u5b57\u6bb5\uff1aalter table \u8868\u540d add \u5217\u540d \u7c7b\u578b \u7ea6\u675f [after|frist table_field]; \u5220\u9664\u5b57\u6bb5\uff1aalter table \u8868\u540d drop column \u5217\u540d; \u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\uff1aalter table table_name modify column \u5217\u540d \u7c7b\u578b; \u4fee\u6539\u5b57\u6bb5\u7c7b\u578b + \u540d\u79f0: alter table \u8868\u540d change \u539f\u5217\u540d \u65b0\u5217\u540d \u65b0\u7c7b\u578b; \u9ed8\u8ba4\u503c: \u4fee\u6539\u5b57\u6bb5\u9ed8\u8ba4\u503c alter table \u8868\u540d alter \u5217\u540d set default 1000; \u5220\u9664\u5b57\u6bb5\u9ed8\u8ba4\u503c alter table \u8868\u540d alter \u5217\u540d drop default ; \u8868\u540d\uff1a alter table \u65e7\u8868\u540d rename \u65b0\u8868\u540d; rename table \u65e7\u8868\u540d to \u65b0\u8868\u540d; \u4fee\u6539\u5b58\u50a8\u5f15\u64ce: alter table table_name engine=innodb; \u67e5\u770b\uff1a \u54ea\u4e9b\u8868: show tables; \u8868\u7ed3\u6784\uff1adesc table_name [\u5b57\u6bb5\u540d]; -- \u53ef\u4ee5\u53ea\u770b\u5176\u4e2d\u67d0\u4e00\u5b57\u6bb5\u7684\u7ed3\u6784 \u521b\u5efa\u8868\u7ed3\u6784\u7684sql\u8bed\u53e5: show create table table_name[\\G]; -- \u8868\u540d\u52a0\\G\u67e5\u770b\u8868\u8be6\u7ec6\u4fe1\u606f \u590d\u5236\u8868: create table t6 select * from t5; -- \u8868\u7ed3\u6784\u548c\u6570\u636e create table t6 select * from t5 where 1<0; -- \u8868\u7ed3\u6784 \u7a7a\u8868 \u514b\u9686\u8868\uff1alike\uff5cas \u8868\u8bb0\u5f55 \u00b6 \u589e\u52a0\uff1ainsert into table_name values|set ... \u5171\u6709\u56db\u79cd\u65b9\u5f0f(\u5168\u5217|\u6307\u5b9a\u5217|\u591a\u884c\u6279\u91cf|\u4f7f\u7528set\u5b50\u53e5) \u591a\u884c\u6279\u91cf: \u82e5\u4e0d\u6307\u5b9a\u5217\u5219\u6240\u6709\u5217\u7684\u5b57\u6bb5\u503c\u90fd\u8981\u4e00\u4e00\u5bf9\u5e94\u8d4b\u503c. insert into table_name[(\u5b57\u6bb5\u540d,\u5b57\u6bb5\u540d...)] values (\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c...),(\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c...); \u4f7f\u7528set\u5b50\u53e5: \u53ef\u4ee5\u4e0d\u6309\u7167\u5217\u987a\u5e8f\u63d2\u5165\u6570\u636e,\u5bf9\u5141\u8bb8\u7a7a\u503c\u7684\u5217\u53ef\u4ee5\u4e0d\u63d2\u5165. insert into table_name set \u7b2c2\u5217\u5b57\u6bb5\u503c='',\u7b2c4\u5217\u5b57\u6bb5\u503c=''; \u63d2\u5165\u67e5\u8be2\u7ed3\u679c: \u521b\u5efa\u4e00\u4e2aB\u8868,\u5c06A\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u63d2\u5165\u5230B\u8868\u4e2d insert into B select * from A; \u5220\u9664\u8bb0\u5f55\uff1adelete from table_name where \u6761\u4ef6; \u4fee\u6539\uff1aupdate table_name set \u5b57\u6bb51=\u503c1[,\u5b57\u6bb52=\u503c2,...] [where\u6761\u4ef6]; replace into table_name values (\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c...); <\u4e3e\u6817> update tb1 set age=age+1 where id=2; -- \u6574\u578b age\u5728\u539f\u6709\u57fa\u7840\u4e0a\u52a01 update L3 set name=concat(name,\"123\") where id=2; -- concat\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u62fc\u63a5\u5b57\u7b26\u4e32 \u67e5\u770b\uff1a!!!! \u6e05\u7a7a\u8868: delete from table_name; \u4e00\u6761\u4e00\u6761\u7684\u5220\u9664\u8bb0\u5f55 \u82e5\u6709\u81ea\u589eid,\u65b0\u589e\u7684\u6570\u636eid\u4ee5\u5220\u9664\u524d\u7684\u6700\u540e\u4e00\u4e2aid\u503c\u7684\u4e0b\u4e00\u4e2a\u4f5c\u4e3a\u8d77\u59cb\u503c. truncate table_name; \u76f4\u63a5\u6e05\u7a7a\u8868 \u9002\u7528\u4e8e\u6570\u636e\u91cf\u5927,\u901f\u5ea6\u5feb,\u65e0\u6cd5\u56de\u6eda,\u4e14\u65b0id\u4ece\u96f6\u5f00\u59cb. ps: \u82e5\u5728windows\u7cfb\u7edf\u4e2d,\u63d2\u5165\u4e2d\u6587\u5b57\u7b26,select\u7684\u7ed3\u679c\u4e3a\u7a7a\u767d,\u53ef\u4ee5\u5c06\u6240\u6709\u5b57\u7b26\u7f16\u7801\u7edf\u4e00\u8bbe\u7f6e\u6210gbk\uff01","title":"sql\u547d\u4ee4\u603b\u7ed3"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/1_db_command/#_1","text":"\u521b\u5efa\uff1acreate database [if not exists] database_name default charset utf8 collate utf8_general_ci; \u5220\u9664\u5e93\uff1adrop database database_name; \u4fee\u6539: alter database database_name charset latin1; \u67e5\u770b\uff1ashow databases; \u67e5\u770b\u6307\u5b9a\u6570\u636e\u5e93\u7684\u521b\u5efa\u4fe1\u606f\uff1ashow create database database_name; \u8fd4\u56de\u5f53\u524d\u4f7f\u7528\u7684\u6570\u636e\u5e93\u7684\u540d\u79f0'\u53ef\u4ee5\u8bbe\u7f6e\u5217\u522b\u540d': select database() [as 'column_name']; \u8fde\u63a5\uff1amysql -uroot -p \u9000\u51fa\uff1aexit \u4f7f\u7528\uff1ause database_name;","title":"\u6570\u636e\u5e93"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/1_db_command/#_2","text":"\u521b\u5efa\uff1a create table [if not exists] table_name ( \u5217\u540d \u7c7b\u578b \u7ea6\u675f, [\u5217\u540d \u7c7b\u578b \u7ea6\u675f] )default charset=utf8mb4; \u5220\u9664\u8868\uff1adrop table [if exists] table_name; \u4fee\u6539\uff1aalter table table_name add|modify|change|rename to|drop; \u6dfb\u52a0\u5b57\u6bb5\uff1aalter table \u8868\u540d add \u5217\u540d \u7c7b\u578b \u7ea6\u675f [after|frist table_field]; \u5220\u9664\u5b57\u6bb5\uff1aalter table \u8868\u540d drop column \u5217\u540d; \u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\uff1aalter table table_name modify column \u5217\u540d \u7c7b\u578b; \u4fee\u6539\u5b57\u6bb5\u7c7b\u578b + \u540d\u79f0: alter table \u8868\u540d change \u539f\u5217\u540d \u65b0\u5217\u540d \u65b0\u7c7b\u578b; \u9ed8\u8ba4\u503c: \u4fee\u6539\u5b57\u6bb5\u9ed8\u8ba4\u503c alter table \u8868\u540d alter \u5217\u540d set default 1000; \u5220\u9664\u5b57\u6bb5\u9ed8\u8ba4\u503c alter table \u8868\u540d alter \u5217\u540d drop default ; \u8868\u540d\uff1a alter table \u65e7\u8868\u540d rename \u65b0\u8868\u540d; rename table \u65e7\u8868\u540d to \u65b0\u8868\u540d; \u4fee\u6539\u5b58\u50a8\u5f15\u64ce: alter table table_name engine=innodb; \u67e5\u770b\uff1a \u54ea\u4e9b\u8868: show tables; \u8868\u7ed3\u6784\uff1adesc table_name [\u5b57\u6bb5\u540d]; -- \u53ef\u4ee5\u53ea\u770b\u5176\u4e2d\u67d0\u4e00\u5b57\u6bb5\u7684\u7ed3\u6784 \u521b\u5efa\u8868\u7ed3\u6784\u7684sql\u8bed\u53e5: show create table table_name[\\G]; -- \u8868\u540d\u52a0\\G\u67e5\u770b\u8868\u8be6\u7ec6\u4fe1\u606f \u590d\u5236\u8868: create table t6 select * from t5; -- \u8868\u7ed3\u6784\u548c\u6570\u636e create table t6 select * from t5 where 1<0; -- \u8868\u7ed3\u6784 \u7a7a\u8868 \u514b\u9686\u8868\uff1alike\uff5cas","title":"\u6570\u636e\u8868"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/1_db_command/#_3","text":"\u589e\u52a0\uff1ainsert into table_name values|set ... \u5171\u6709\u56db\u79cd\u65b9\u5f0f(\u5168\u5217|\u6307\u5b9a\u5217|\u591a\u884c\u6279\u91cf|\u4f7f\u7528set\u5b50\u53e5) \u591a\u884c\u6279\u91cf: \u82e5\u4e0d\u6307\u5b9a\u5217\u5219\u6240\u6709\u5217\u7684\u5b57\u6bb5\u503c\u90fd\u8981\u4e00\u4e00\u5bf9\u5e94\u8d4b\u503c. insert into table_name[(\u5b57\u6bb5\u540d,\u5b57\u6bb5\u540d...)] values (\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c...),(\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c...); \u4f7f\u7528set\u5b50\u53e5: \u53ef\u4ee5\u4e0d\u6309\u7167\u5217\u987a\u5e8f\u63d2\u5165\u6570\u636e,\u5bf9\u5141\u8bb8\u7a7a\u503c\u7684\u5217\u53ef\u4ee5\u4e0d\u63d2\u5165. insert into table_name set \u7b2c2\u5217\u5b57\u6bb5\u503c='',\u7b2c4\u5217\u5b57\u6bb5\u503c=''; \u63d2\u5165\u67e5\u8be2\u7ed3\u679c: \u521b\u5efa\u4e00\u4e2aB\u8868,\u5c06A\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u63d2\u5165\u5230B\u8868\u4e2d insert into B select * from A; \u5220\u9664\u8bb0\u5f55\uff1adelete from table_name where \u6761\u4ef6; \u4fee\u6539\uff1aupdate table_name set \u5b57\u6bb51=\u503c1[,\u5b57\u6bb52=\u503c2,...] [where\u6761\u4ef6]; replace into table_name values (\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c,\u5b57\u6bb5\u503c...); <\u4e3e\u6817> update tb1 set age=age+1 where id=2; -- \u6574\u578b age\u5728\u539f\u6709\u57fa\u7840\u4e0a\u52a01 update L3 set name=concat(name,\"123\") where id=2; -- concat\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u62fc\u63a5\u5b57\u7b26\u4e32 \u67e5\u770b\uff1a!!!! \u6e05\u7a7a\u8868: delete from table_name; \u4e00\u6761\u4e00\u6761\u7684\u5220\u9664\u8bb0\u5f55 \u82e5\u6709\u81ea\u589eid,\u65b0\u589e\u7684\u6570\u636eid\u4ee5\u5220\u9664\u524d\u7684\u6700\u540e\u4e00\u4e2aid\u503c\u7684\u4e0b\u4e00\u4e2a\u4f5c\u4e3a\u8d77\u59cb\u503c. truncate table_name; \u76f4\u63a5\u6e05\u7a7a\u8868 \u9002\u7528\u4e8e\u6570\u636e\u91cf\u5927,\u901f\u5ea6\u5feb,\u65e0\u6cd5\u56de\u6eda,\u4e14\u65b0id\u4ece\u96f6\u5f00\u59cb. ps: \u82e5\u5728windows\u7cfb\u7edf\u4e2d,\u63d2\u5165\u4e2d\u6587\u5b57\u7b26,select\u7684\u7ed3\u679c\u4e3a\u7a7a\u767d,\u53ef\u4ee5\u5c06\u6240\u6709\u5b57\u7b26\u7f16\u7801\u7edf\u4e00\u8bbe\u7f6e\u6210gbk\uff01","title":"\u8868\u8bb0\u5f55"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/","text":"\u6570\u636e\u5e93\u76f8\u5173\u6982\u5ff5 \u00b6 \u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6: \u672c\u8d28\u5c31\u662f\u4e2ac/s\u67b6\u6784\u7684 \u5957\u63a5\u5b57\u7a0b\u5e8f \u5173\u7cfb\u578b \u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6 DBMS: \u89e3\u51b3\u5b89\u5168\u3001\u5e76\u53d1\u7684\u95ee\u9898 DATA\u3001DB\u3001DBA\u3001DBMS \u7b80\u5355\u7406\u89e3: \u5173\u7cfb\u578b\u6570\u636e\u5e93\u9700\u8981\u6709\u8868\u7ed3\u6784 mysql\u3001oracle\u3001sqlserver \u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u662fkey-value\u5b58\u50a8\u7684 \u6ca1\u6709\u8868\u7ed3\u6784\uff01redis\u3001mongodb \u540d\u8bcd \u89e3\u91ca \u6570\u636e \u56fe\u7247\u3001\u6587\u5b57\u3001\u89c6\u9891\u7b49 \u8bb0\u5f55 \u6587\u4ef6\u4e2d\u7684\u4e00\u6761\u4fe1\u606f \u8868 \u4e00\u4e2a\u6587\u4ef6 \u5e93 \u6587\u4ef6\u5939 \u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u8f6f\u4ef6 \u5957\u63a5\u5b57\u7a0b\u5e8f\uff1amysqld\u3001mysql \u6570\u636e\u5e93\u670d\u52a1\u5668 \u8fd0\u884cmysql\u7684\u8ba1\u7b97\u673a \u521b\u5efa\u6570\u636e\u5e93\u540e \u521d\u59cb\u7684\u56db\u4e2a\u5e93 information_schema: \u865a\u62df\u5e93,\u4e0d\u5360\u7528\u78c1\u76d8\u7a7a\u95f4,\u5b58\u50a8\u7684\u662f\u6570\u636e\u5e93\u542f\u52a8\u540e\u7684\u4e00\u4e9b\u53c2\u6570,\u5982\u7528\u6237\u8868\u4fe1\u606f\u3001\u5217\u4fe1\u606f\u3001\u6743\u9650\u4fe1\u606f\u3001\u5b57\u7b26\u4fe1\u606f\u7b49 performance_schema: MySQL 5.5\u5f00\u59cb\u65b0\u589e\u4e00\u4e2a\u6570\u636e\u5e93. \u4e3b\u8981\u7528\u4e8e\u6536\u96c6\u6570\u636e\u5e93\u670d\u52a1\u5668\u6027\u80fd\u53c2\u6570,\u8bb0\u5f55\u5904\u7406\u67e5\u8be2\u8bf7\u6c42\u65f6\u53d1\u751f\u7684\u5404\u79cd\u4e8b\u4ef6\u3001\u9501\u7b49\u73b0\u8c61 mysql: \u6388\u6743\u5e93,\u4e3b\u8981\u5b58\u50a8\u7cfb\u7edf\u7528\u6237\u7684\u6743\u9650\u4fe1\u606f test: MySQL\u6570\u636e\u5e93\u7cfb\u7edf\u81ea\u52a8\u521b\u5efa\u7684\u6d4b\u8bd5\u6570\u636e\u5e93 \u5b58\u50a8\u5f15\u64ce \u00b6 \u81ea\u5df1\u7684\u7406\u89e3: \u6570\u636e\u5e93\u662f\u6587\u4ef6\u5939,\u90a3\u4e48\u6570\u636e\u8868\u5c31\u662f\u6587\u4ef6. \u6587\u4ef6\u6709\u5f88\u591a\u7c7b\u578b, \u8868\u683c\u9700\u8981excel\u6765\u5904\u7406,mp4\u89c6\u9891\u9700\u8981\u64ad\u653e\u5668,So,\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u8868\u9700\u8981\u4e0d\u540c\u4e1c\u897f\u6765\u7ba1\u7406. innodb\u7c7b\u578b\u7684\u6570\u636e\u8868\u5c31\u9700\u8981\u540d\u53ebinnodb\u5b58\u50a8\u5f15\u64ce\u6765\u7ba1\u7406. \u518d\u901a\u4fd7\u4e00\u70b9 \u5c31\u662f\u9009\u62e9\u6570\u636e\u8868\u7684\u7ba1\u7406\u65b9\u5f0f(CRUD \u5efa\u7acb\u7d22\u5f15\u7b49). \u5177\u4f53\u6765\u8bf4,\u5b58\u50a8\u5f15\u64ce \u5c31\u662f \u5982\u4f55\u5b58\u50a8\u6570\u636e\u3001\u5982\u4f55\u4e3a\u5b58\u50a8\u7684\u6570\u636e\u5efa\u7acb\u7d22\u5f15\u548c\u5982\u4f55\u66f4\u65b0\u3001\u67e5\u8be2\u6570\u636e\u7b49\u6280\u672f \u7684 \u5b9e\u73b0\u65b9\u6cd5. \u56e0\u4e3a\u5728\u5173\u7cfb\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u5b58\u50a8\u662f\u4ee5\u8868\u7684\u5f62\u5f0f\u5b58\u50a8\u7684, \u6240\u4ee5\u5b58\u50a8\u5f15\u64ce\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u8868\u7c7b\u578b. <\u8868\u7c7b\u578b(\u5b58\u50a8\u548c\u64cd\u4f5c\u6b64\u8868\u7684\u7c7b\u578b)\u662f\u6211\u4eec\u65b9\u4fbf\u7406\u89e3\u653e\u5728\u8fd9\u91cc\u7684\u540d\u8bcd \u4e0d\u662f\u5b98\u65b9\u7684> create table t1 (id int) engine=innodb; mysql\u6709\u591a\u79cd\u5b58\u50a8\u5f15\u64ce. \u800cOrcle\u548cSQL server\u7b49\u6570\u636e\u5e93\u4e2d\u53ea\u6709\u4e00\u79cd\u5b58\u50a8\u5f15\u64ce,\u6570\u636e\u5b58\u50a8\u7ba1\u7406\u673a\u5236\u662f\u4e00\u6837\u7684. \u6570\u636e\u5e93\u4e2d\u7684 \u8868 (\u8bf4\u767d\u4e86\u5c31\u662f \u6587\u4ef6 )\u6709\u4e0d\u540c\u7684\u7c7b\u578b, \u8868\u7684\u7c7b\u578b\u4e0d\u540c, \u4f1a\u5bf9\u5e94mysql\u4e0d\u540c\u7684\u5b58\u53d6\u673a\u5236 innodb \u7d22\u5f15\u7ec4\u7ec7\u8868\u6570\u636e myisam blackhole memory .... \u5b58\u50a8\u5f15\u64ce \u751f\u6210\u6587\u4ef6 myisam t1.frm(\u8868\u7684\u7ed3\u6784) t1.MYD(\u8868\u7684\u6570\u636e) t1.MYI(\u5b58\u50a8\u7d22\u5f15) innodb \u7d22\u5f15\u7ec4\u7ec7\u8868 t2.frm(\u8868\u7684\u7ed3\u6784) t2.ibd(\u8868\u7684\u6570\u636e\u548c\u7d22\u5f15) blackhole t3.frm(\u8868\u7684\u7ed3\u6784) memory t3.frm(\u8868\u7684\u7ed3\u6784) \u6ce8\u610f: innodb\u3001myisam\u6570\u636e\u5b58\u5728\u786c\u76d8;blackhole\u538b\u6839\u4e0d\u5b58\u6570\u636e;memory\u6570\u636e\u5b58\u5728\u5185\u5b58 \u91cd\u542f\u670d\u52a1\u7aef\u6570\u636e\u6d88\u5931\u3002 show engines ; -- \u67e5\u770bmysql\u652f\u6301\u7684\u5b58\u50a8\u5f15\u64ce. show variables like 'storage_engine%' ; -- \u67e5\u770b\u6b63\u5728\u4f7f\u7528\u7684\u5b58\u50a8\u5f15\u64ce -- \u53ef\u4ee5\u5728mysql\u7684\u914d\u7f6e\u6587\u4ef6 my.cnf \u4e2d\u6307\u5b9a\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce \u56fe\u7684\u4e0a\u90e8\u5206\u662f\u5ba2\u6237\u7aef,\u4e0b\u90e8\u5206\u662f\u670d\u52a1\u7aef. > \u300c\u670d\u52a1\u7aef\u300d \u670d\u52a1\u7aef\u7684\u6700\u5e95\u90e8\u662f\u6587\u4ef6\u7cfb\u7edf\uff1a \u5404\u79cd\u5404\u6837\u7684\u6587\u4ef6,\u6bd4\u5982\u5b58\u5728\u4e8e\u786c\u76d8\u4e0a\u7684 t1.frm \u3001 t1.ibd . \u5efa\u8868\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u786c\u76d8\u4e0a\u751f\u6210\u6587\u4ef6. \u670d\u52a1\u7aef\u7684\u5012\u6570\u7b2c\u4e8c\u5c42\u662f\u5b58\u50a8\u5f15\u64ce\uff1a'\u5927\u767d\u8bdd \u4e0d\u540c\u6587\u4ef6\u7684\u5904\u7406\u7a0b\u5e8f' \u5efa\u8868\u65f6\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce(\u8868\u7684\u7c7b\u578b)\u662finnodb. mysql\u4f1a\u4f7f\u7528\u540d\u53ebinnodb\u7684\u7a0b\u5e8f\u53bb\u5904\u7406\u8fd9\u5f20\u8868. >\u300c\u5ba2\u6237\u7aef\u300d \u5ba2\u6237\u7aef\u91cc\u662fmysql\u63d0\u4f9b\u7684\u5404\u79cd\u5404\u6837\u8bed\u8a00\u7684\u63a5\u53e3. \u6bd4\u5982: python\u6839\u636emysql\u63d0\u4f9b\u7684\u63a5\u53e3\u5c01\u88c5\u51fa\u4e00\u4e2a\u53ebpymysql\u7684\u6a21\u5757.\u6765\u4f5c\u4e3amysql\u7684\u5ba2\u6237\u7aef\u8fde\u63a5mysql\u670d\u52a1\u7aef. >\u300c\u8fc7\u7a0b\u300d \u670d\u52a1\u7aef\u8fde\u63a5\u6c60\u91cc\u7684\u4e00\u4e2a\u7ebf\u7a0b\u5c31\u5bf9\u5e94\u4e00\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\u8fde\u63a5. \u5b83\u5148\u8c03\u7528sql\u63a5\u53e3(eg:\u82e5\u662fselect\u8bed\u53e5\u5c31\u627eselect\u63a5\u53e3)\u6765\u5904\u7406\u4f20\u8fc7\u6765\u7684sql\u8bed\u53e5; \u518d\u4ea4\u7ed9\u89e3\u6790\u5668\u89e3\u6790\u8fd9\u6761sql\u8bed\u53e5\u662f\u505a\u4ec0\u4e48\u7684; \u4f18\u5316sql\u8bed\u53e5(\u5229\u7528explain\u67e5\u8be2sql\u8bed\u53e5\u7684\u8fd0\u884c\u8ba1\u5212)\u9009\u53d6\u6700\u4f18\u7684\u65b9\u6848\u8ba9\u5176\u7528\u5c3d\u91cf\u5c11\u7684IO\u53bb\u5b8c\u6210\u8fd9\u4ef6\u4e8b; \u82e5\u9700\u8981\u7684\u6570\u636e\u5728\u7f13\u5b58\u91cc,\u90a3\u5c31\u4ece\u7f13\u5b58\u91cc\u9762\u62ff; \u8be5\u5f80\u7f13\u5b58\u91cc\u653e\u7684\u5c31\u653e\u5230\u7f13\u5b58\u91cc\u9762; \u5f80\u540e,\u7528innodb\u5b58\u50a8\u5f15\u64ce\u6765\u5177\u4f53\u7684\u63a7\u5236\u5b58\u53d6\u786c\u76d8\u91cc\u7684\u6587\u4ef6. innodb \u652f\u6301\u4e8b\u52a1\u3001\u884c\u7ea7\u9501\u3001foreign key \u8868\u64cd\u4f5c \u00b6 \u4e00\u884c\u5185\u5bb9\u5c31\u79f0\u4e3a\u4e00\u6761\u8bb0\u5f55. \u6ce8\u610f: \u521b\u5efa\u8868\u65f6\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u4e0d\u8981\u52a0\u9017\u53f7 , \u5426\u5219\u4f1a\u62a5\u9519 \u5b57\u6bb5\u540d\u548c\u7c7b\u578b\u662f\u5fc5\u987b\u6709\u7684 \u5b57\u6bb5\u7684\u7c7b\u578b\u5927\u5c0f(\u5373\u5bbd\u5ea6)\u53ef\u4ee5\u4e0d\u5199 \u82e5\u4e0d\u5199\u4f1a\u6709\u4e2a\u9ed8\u8ba4\u503c \u5b57\u6bb5\u7684\u7ea6\u675f\u53ef\u9009 mysql > select host , user from mysql . user ; + -----------+------------------+ | host | user | + -----------+------------------+ | % | luffy | | % | wupeiqi4 | | localhost | mysql . infoschema | | localhost | mysql . session | | localhost | mysql . sys | | localhost | root | + -----------+------------------+ 6 rows in set ( 0 . 00 sec ) -- \u67e5\u8be2\u8bed\u53e5 \u5c06\u6570\u636e\u4ece\u786c\u76d8\u8bfb\u5230\u5185\u5b58\u7136\u540e\u683c\u5f0f\u5316\u8f93\u51fa\u6253\u5370\u51fa\u6765. -- mysql.use\u8fd9\u5f20\u8868\u80af\u5b9a\u662f\u5728\u786c\u76d8\u91cc\u7684,\u4f46\u6253\u5370\u51fa\u6765\u7684\u8fd9\u5f20\u8868\u5728\u786c\u76d8\u91cc\u6ca1\u6709,\u53eb\u505a\u865a\u62df\u8868 -- \u590d\u5236\u8868 create table t6 select host , user from mysql . user ; -- \u8868\u7ed3\u6784\u548c\u6570\u636e create table t6 select host , user from mysql . user where 1 < 0 ; -- \u53ea\u6709\u8868\u7ed3\u6784 \u662f\u5f20\u7a7a\u8868 \u8868\u5b57\u6bb5\u7684\u6570\u636e\u7c7b\u578b \u00b6 \u6240\u6709\u7684\u6570\u636e\u7c7b\u578b\u91cc\u9762,\u5b57\u6bb5\u7684\u5bbd\u5ea6\u4ee3\u8868\u7684\u90fd\u662f\u6700\u5927\u5b58\u50a8\u5bbd\u5ea6,\u53ea\u6709\u6574\u578b\u9664\u5916,\u6307\u7684\u662f\u6253\u5370\u65f6\u5019\u7684\u663e\u793a\u5bbd\u5ea6. \u6570\u5b57\u7c7b\u578b \u00b6 <1> \u6574\u578b\uff1atinyinit\u3001int\u3001bigint \u4f5c\u7528: \u5b58\u50a8\u5e74\u9f84, \u7b49\u7ea7, id, \u5404\u79cd\u53f7\u7801\u7b49 int\u6574\u6570\u7c7b\u578b\u4e0d\u9700\u8981\u6307\u5b9a\u5bbd\u5ea6 (\u6ca1\u5375\u7528 \u8bbe\u7f6e\u540e\u8d85\u8fc7\u4e86\u4e5f\u4f1a\u5168\u663e\u793a)!! \u52a0\u4e86\u7684\u90fd\u662f\u5c0f\u5783\u573e. int\u7684\u5b58\u50a8\u5bbd\u5ea6\u662f 4\u4e2a\u5b57\u8282 Bytes 32bit 2^32 \u9ed8\u8ba4\u7684\u663e\u793a\u5bbd\u5ea6\u662f11,\u6700\u5927\u6570\u503c\u662f10\u4f4d\u518d\u52a0\u4e0a\u7b26\u53f7\u517111\u4f4d. <2> \u6d6e\u70b9\u578b\uff1a float(m,n)\u3001double(m,n)\u3001decimal(m,n) \u4e09\u8005\u7cbe\u5ea6\u4ece\u4f4e\u5230\u9ad8 decimal\u6700\u7cbe\u51c6 \u4ee3\u8868\u6b64\u6d6e\u70b9\u6570\u6700\u5927m\u4f4d\u6570,\u5176\u4e2d\u5c0f\u6570\u4f4d\u53ef\u4ee5\u4fdd\u7559n\u4f4d.(\u610f\u5473\u6574\u6570\u4f4dm-n\u4f4d) \u4f5c\u7528: \u5b58\u50a8\u85aa\u8d44\u3001\u8eab\u9ad8\u3001\u4f53\u91cd\u3001\u4f53\u8d28\u53c2\u6570\u7b49 float(255,30) double(255,30) decimal(65,30) \u4e00\u822c\u60c5\u51b5\u4e0bfloat\u591f\u7528\u4e86,\u6709\u7cbe\u5ea6\u8981\u6c42double\u4e5f\u80fd\u6ee1\u8db399%\u7684\u60c5\u51b5\u5566\uff01 \u65e5\u671f\u7c7b\u578b \u00b6 DATE\u3001TIME\u3001 DATETIME (\u6700\u5e38\u7528)\u3001TIMESTAMP\u3001YEAR \u4f5c\u7528: \u5b58\u50a8\u7528\u6237\u6ce8\u518c\u65f6\u95f4\u3001\u6587\u7ae0\u53d1\u5e03\u65f6\u95f4\u3001\u5458\u5de5\u5165\u804c\u65f6\u95f4\u3001\u51fa\u751f\u65f6\u95f4\u3001\u8fc7\u671f\u65f6\u95f4\u7b49. create table student ( id int , name varchar ( 16 ), birth date , -- \u5e74\u6708\u65e5 \u51fa\u751f\u65e5\u671f class_time , -- \u65f6\u5206\u79d2 \u4e0a\u8bfe\u65f6\u95f4 reg_time datetime , -- \u5e74\u6708\u65e5\u65f6\u5206\u79d2 \u6ce8\u518c\u65f6\u95f4 born_year year -- \u5e74 \u51fa\u751f\u5e74\u4efd ); insert student values ( 1 , 'egon' , '1993-01-23' , '08:30:00' , '2022-03-23 09:30:21' , '1993' ); DATETIME\u4e0eTIMESTAMP\u7684\u533a\u522b DATETIME\u7684\u65e5\u671f\u8303\u56f4\u662f1001 \u2014\u2014 9999 \u5e74\uff0c TIMESTAMP\u7684\u65f6\u95f4\u8303\u56f4\u662f1970 \u2014\u2014 2038 \u5e74 DATETIME\u5b58\u50a8\u65f6\u95f4\u4e0e\u65f6\u533a\u65e0\u5173 \uff0c TIMESTAMP\u5b58\u50a8\u65f6\u95f4\u4e0e\u65f6\u533a\u6709\u5173 \uff0c\u663e\u793a\u7684\u503c\u4e5f\u4f9d\u8d56\u4e8e\u65f6\u533a\u3002 \u5728 mysql\u670d\u52a1\u5668 \uff0c\u64cd\u4f5c\u7cfb\u7edf\u4ee5\u53ca\u5ba2\u6237\u7aef\u8fde\u63a5\u90fd\u6709\u65f6\u533a\u7684\u8bbe\u7f6e\u3002 DATETIME\u4f7f\u75288\u5b57\u8282\u7684\u5b58\u50a8\u7a7a\u95f4 \uff0c TIMESTAMP\u7684\u5b58\u50a8\u7a7a\u95f4\u4e3a4\u5b57\u8282 \u3002\u7a7a\u95f4\u5c0f\u4e00\u70b9 , IO\u6b21\u6570\u66f4\u5c11 . TIMESTAMP\u4f1a\u81ea\u52a8\u505a\u7ea6\u675f , \u6b64\u65e5\u671f\u7c7b\u578b\u4e0d\u5141\u8bb8\u4e3a\u7a7a , \u82e5\u4f20\u7a7a\u7684\u8bdd , \u5b83\u4f1a\u7528\u5f53\u524d\u7684\u65f6\u95f4\u81ea\u52a8\u586b\u5145 , \u66f4\u65b0\u7684\u65f6\u5019\u4e5f\u4e00\u6837 . create table t1 ( x datetime not null default now ()); # \u9700\u8981\u6307\u5b9a\u4f20\u5165\u7a7a\u503c\u65f6\u9ed8\u8ba4\u53d6\u5f53\u524d\u65f6\u95f4 create table t2 ( x timestamp ); # \u65e0\u9700\u4efb\u4f55\u8bbe\u7f6e\uff0c\u5728\u4f20\u7a7a\u503c\u7684\u60c5\u51b5\u4e0b\u81ea\u52a8\u4f20\u5165\u5f53\u524d\u65f6\u95f4 insert into t1 values (); insert into t2 values (); \u5b57\u7b26\u7c7b\u578b \u00b6 char\u3001varchar \u6ce8\u610f: \u5b83\u4e24\u62ec\u53f7\u5185\u7684\u53c2\u6570\u6307\u7684\u90fd\u662f \u5b57\u7b26\u7684\u957f\u5ea6 '\u5b58\u50a8\u5bbd\u5ea6' . \u4e0d\u662f\u5b57\u8282\uff01\uff01 \u8981\u6653\u5f97\u4e00\u70b9, \u4e00\u4e2a\u4e2d\u6587\u662f\u4e00\u4e2a\u5b57\u7b26, \u4e00\u4e2a\u82f1\u6587\u5b57\u6bcd\u4e5f\u662f\u4e00\u4e2a\u5b57\u7b26. \u5728utf8\u7f16\u7801\u4e0b, \u524d\u8005\u53603\u4e2a\u5b57\u8282. \u540e\u8005\u53601\u4e2a\u5b57\u8282. sql\u4f18\u5316: \u521b\u5efa\u8868\u662f, \u5b9a\u957f\u7c7b\u578b'eg sex'\u5f80\u524d\u653e, \u53d8\u957f\u7684\u5f80\u540e\u653e'eg address' -- char(4) [\u5b9a\u957f] \u5b57\u7b26\u957f\u5ea60-255 insert t1 values ( '\u4f60\u597d\u554a\u54c8\u54c8' ) -- '\u4f60\u597d\u554a\u54c8' insert t1 values ( '\u4f60' ) -- '\u4f60 ' -- varchar(4) [\u53d8\u957f] \u5b57\u7b26\u957f\u5ea60-65535 insert t2 values ( '\u4f60\u597d\u554a\u54c8\u54c8' ) -- '\u4f60\u597d\u554a\u54c8' insert t2 values ( '\u4f60' ) -- '\u4f60' -- \u4e24\u8005\u5728\u5b58\u591f\u7684\u60c5\u51b5\u4e0b\u90fd\u4f1a\u663e\u793a\u89c4\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u91cf.(\u975e\u4e25\u683c\u6a21\u5f0f\u4e0b\uff01) -- \u6ca1\u5b58\u591f,char\u4f1a\u81ea\u52a8\u5411\u53f3\u586b\u5145\u7a7a\u767d\u5b57\u7b26, varchar\u4e0d\u4f1a. Value CHAR(4) Storage Required VARCHAR(4) Storage Required '' ' ' 4 bytes '' 1 byte 'ab' 'ab ' 4 bytes 'ab' 3 bytes 'abcd' 'abcd' 4 bytes 'abcd' 5 bytes 'abcdefgh' 'abcd' 4 bytes 'abcd' 5 bytes \u5728\u6ca1\u6709\u5b58\u591f\u7684\u60c5\u51b5\u4e0b,varchar\u6bd4char\u66f4\u8282\u7701\u7a7a\u95f4? \u6ca1\u6709\u90a3\u4e48\u7b80\u5355. \u770b\u4e0a\u65b9\u8868\u683c. varchar\u7c7b\u578b\u4f1a\u5728\u771f\u5b9e\u6570\u636e\u524d\u52a01-2Bytes\u7684\u524d\u7f00\uff0c\u8be5\u524d\u7f00\u7528\u6765\u8868\u793a\u771f\u5b9e\u6570\u636e\u7684bytes\u5b57\u8282\u6570. \u5982\u679c\u771f\u5b9e\u7684\u6570\u636e<255bytes \u5219\u9700\u89811Bytes\u7684\u524d\u7f00(1Bytes=8bit 2^8=255) \u5982\u679c\u771f\u5b9e\u7684\u6570\u636e>255bytes \u5219\u9700\u89812Bytes\u7684\u524d\u7f00(2Bytes=16bit 2^16=65535) \u56e0\u800c, \u5b58\u50a8\u7684\u5bbd\u5ea6\u521a\u597d\u8fbe\u5230\u6216\u8d85\u8fc74, varchar\u53cd\u800c\u662f\u66f4\u52a0\u6d6a\u8d39\u7a7a\u95f4\u7684. \u4f46\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5927\u591a\u65f6\u5019\u7528\u7684\u8fd8\u662fvarchar.\u56e0\u4e3a\u5f80\u5f80\u771f\u5b9e\u5b58\u50a8\u7684\u90fd\u4f1a\u6bd4\u8bbe\u7f6e\u7684\u5b58\u50a8\u5bbd\u5ea6\u5c0f.\u4e0d\u4f1a\u5b58\u7684\u521a\u521a\u597d. \u6709\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u70b9\uff01\u770b\u4e0b\u65b9. -- char(5),varchar(5) -- \u8865\u5145: \u5728\u68c0\u7d22\u65f6char\u5f88\u4e0d\u8981\u8138\u5730\u5c06\u81ea\u5df1\u6d6a\u8d39\u7684\u5b57\u7b26\u7ed9\u5220\u6389\u4e86,\u88c5\u7684\u597d\u50cf\u81ea\u5df1\u6ca1\u6d6a\u8d39\u8fc7\u7a7a\u95f4\u4e00\u6837(\u4e4b\u6240\u4ee5\u9690\u85cf\u662f\u56e0\u4e3a\u8fd9\u662f\u5e95\u5c42\u7684),\u800cvarchar\u5f88\u8001\u5b9e,\u5b58\u4e86\u591a\u5c11\uff0c\u5c31\u663e\u793a\u591a\u5c11 -- \u7565\u65bd\u5c0f\u8ba1,\u8ba9char\u73b0\u51fa\u539f\u5f62 mysql > SET sql_mode = 'PAD_CHAR_TO_FULL_LENGTH' ; -- \u586b\u5145\u5b57\u7b26\u5230\u5b8c\u6210\u7684\u957f\u5ea6 -- length\uff1a\u67e5\u770b\u5b57\u8282\u6570 -- char_length:\u67e5\u770b\u5b57\u7b26\u6570 mysql > select x , char_length ( x ), y , char_length ( y ) from t1 ; + -------------+----------------+------------+----------------+ | x | char_length ( x ) | y | char_length ( y ) | + -------------+----------------+------------+----------------+ | \u4f60\u7785\u5565 | 5 | \u4f60\u7785\u5565 | 4 | + -------------+----------------+------------+----------------+ 1 row in set ( 0 . 00 sec ) # char\u7c7b\u578b \uff1a 3 \u4e2a\u4e2d\u6587\u5b57\u7b26 + 2 \u4e2a\u7a7a\u683c = 11 Bytes # varchar\u7c7b\u578b : 3 \u4e2a\u4e2d\u6587\u5b57\u7b26 + 1 \u4e2a\u7a7a\u683c = 10 Bytes mysql > select x , length ( x ), y , length ( y ) from t1 ; + -------------+-----------+------------+-----------+ | x | length ( x ) | y | length ( y ) | + -------------+-----------+------------+-----------+ | \u4f60\u7785\u5565 | 11 | \u4f60\u7785\u5565 | 10 | + -------------+-----------+------------+-----------+ 1 row in set ( 0 . 00 sec ) \u6ce8\u610f : <\u7b49\u53f7\u5339\u914d> \u672b\u5c3e\u7a7a\u683c\u5e76\u4e0d\u5f71\u54cd\u67e5\u8be2\u4f1a\u81ea\u52a8\u5ffd\u7565 \u4f46like\u6a21\u7cca\u5339\u914d\u4f1a\u6709\u5f71\u54cd,\u5b83\u4e0d\u4f1a\u5ffd\u7565\u7a7a\u683c (char\u6709\u8fd9\u65b9\u9762\u7684\u56f0\u6270'\u81ea\u52a8\u586b\u5145\u7a7a\u683c',varchar\u6ca1\u6709) \u5176\u5b83\u5b57\u7b26\u7cfb\u5217, \u6bd4\u5982TEXT\u3001BLOB\u7b49\u53ef\u4ee5\u5c06\u6574\u7bc7\u6587\u7ae0\u7684\u5b57\u7b26\u90fd\u5b58\u8fdb\u53bb, \u4f46\u8fd9\u6837\u505a\u4e0d\u597d. \u6211\u4eec\u901a\u5e38\u4f1a\u5b58\u8fd9\u7bc7\u6587\u7ae0\u7684\u5730\u5740.\u51cf\u5c11\u6570\u636e\u5e93\u7684IO\u91cf. \u5927\u6587\u4ef6\u4e00\u822c\u653e\u5230\u4e00\u53f0\u4e13\u95e8\u7684\u6587\u4ef6\u670d\u52a1\u5668\u4e2d\uff01 \u6807\u51c6\uff1a\u6587\u4ef6\u8d85\u8fc7255\u4e2a\u5b57\u7b26 \u573a\u666f: \u5ba2\u6237\u7aef\u8bf7\u6c42\u4e00\u4e2a\u89c6\u9891 \u5ba2\u6237\u7aefA \u5e94\u7528\u670d\u52a1\u5668B \u6570\u636e\u5e93\u670d\u52a1\u5668C \u6587\u4ef6\u670d\u52a1\u5668D \u5916\u90e8\u670d\u52a1\u5668E(\u63a5\u53d7\u8bf7\u6c42 \u589e\u5927\u5e76\u53d1\u91cf\u7684) A ==req=> B ==req=> C ==res\u89c6\u9891\u5730\u5740=> B ==res\u89c6\u9891\u5730\u5740=> A ==req=> D ==res=> A \u679a\u4e3e\u4e0e\u96c6\u5408 \u00b6 \u524d\u8005\u5b9e\u9645\u4e0a\u6700\u591a\u9650\u52363000\u4e2a\u4e0d\u540c\u5143\u7d20 \u540e\u8005\u6700\u591a\u53ef\u4ee5\u670964\u4e2a\u4e0d\u540c\u5143\u7d20 enum: \u5355\u9009 \u53ea\u80fd\u5728\u7ed9\u5b9a\u7684\u8303\u56f4\u5185\u9009\u4e00\u4e2a\u503c. eg \u6027\u522b sex \u7537male/\u5973female level enum('vip1','vip2','vip3','vip4','vip5') sex enum('male','female') set: \u591a\u9009 \u5728\u7ed9\u5b9a\u7684\u8303\u56f4\u5185\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6216\u4e00\u4e2a\u4ee5\u4e0a\u7684\u503c. eg \u7231\u597d1,\u7231\u597d2,\u7231\u597d3... hobby set('play','music','read','study') \u975e\u4e25\u683c\u6a21\u5f0f\u4e0b,\u4e0d\u4f1a\u62a5\u9519, \u53ea\u4f1a\u63d2\u8303\u56f4\u4e4b\u5185\u7684\u6570\u636e. \u8868\u5b57\u6bb5\u7684\u7ea6\u675f\u6761\u4ef6 \u00b6 UNSIGNED \u65e0\u7b26\u53f7 eg : id int unsigned \u8868\u660eid\u503c\u4e0d\u80fd\u4e3a\u8d1f\u6570\u5566 \u4e00\u822c\u4e0d\u6307\u5b9a ZEROFILL \u4f7f\u75280\u586b\u5145 AUTO_INCREMENT \u6807\u8bc6\u8be5\u5b57\u6bb5\u7684\u503c\u81ea\u52a8\u589e\u957f \u9ed8\u8ba4\u6574\u6570\u7c7b\u578b \u901a\u5e38\u8ddf\u4e3b\u952e\u4e00\u8d77\u4f7f\u7528 \u5fc5\u987b\u6709key\u7ea6\u675f\u5b83\uff01\uff01 eg : id int primary key auto_increment DEFAULT \u4e3a\u8be5\u5b57\u6bb5\u8bbe\u7f6e\u9ed8\u8ba4\u503c NOT NULL \u6807\u8bc6\u8be5\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a, \u901a\u5e38\u4e0edefault\u4e00\u8d77\u4f7f\u7528 \u5b57\u6bb5\u9ed8\u8ba4\u5141\u8bb8\u4e3a\u7a7a, \u82e5\u7f3a\u7701\u9ed8\u8ba4\u503c\u4e3aNULL eg : age int not null defaule 0 PRIMARY KEY (PK) \u4e3b\u952e \u6807\u8bc6\u8be5\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a \u5e76\u4e14\u552f\u4e00 \u4ee5innodb\u4e3a\u5b58\u50a8\u5f15\u64ce\u7684\u4e00\u5f20\u8868 \u5fc5\u987b\u8981\u6709\u4e2a\u4e3b\u952e \u5e76\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a \u901a\u5e38\u662fid\u5b57\u6bb5 \u82e5\u7528\u8054\u5408\u4e3b\u952e \u5b9e\u9645\u4e0a\u67e5\u8be2\u52a0\u901f\u6548\u679c\u4e0d\u4f73 \u901a\u5e38\u4e0d\u4f1a\u5efa\u8054\u5408\u4e3b\u952e \u82e5\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e innodb\u4f1a\u81ea\u4e0a\u800c\u4e0b\u53bb\u627e\u4e00\u4e2a\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u7684\u5b57\u6bb5, \u82e5\u6ca1\u627e\u5230innodb\u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u7684\u9690\u85cf\u5b57\u6bb5. -- PRI create table t1 ( id int auto_increment primary key , -- \u4e3b\u952e /* \u7b49\u540c\u4e8e id int, constraint uk_name primary key(id) -- \u5355\u72ec\u5199 */ host varchar ( 15 ) not null , port int not null -- primary key(host,port) -- \u8054\u5408\u4e3b\u952e ) alter table \u8868\u540d add primary key ( \u5217\u540d ); -- \u8868\u521b\u5efa\u5b8c\u540e\u52a0\u4e3b\u952e\u7d22\u5f15 /* \u8868\u521b\u5efa\u597d\u540e \u683c\u5916\u6dfb\u52a0\u4e00\u4e2a\u5b57\u6bb5 \u4f5c\u4e3a\u4e3b\u952e ALTER TABLE demo.test ADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;*/ -- [\u5220\u9664] alter table \u8868\u540d drop primary key ; # \u6ce8\u610f : \u5220\u9664\u7d22\u5f15\u65f6\u53ef\u80fd\u4f1a\u62a5\u9519 \u56e0\u4e3a\u7ed9\u67d0\u4e00\u5217\u8bbe\u7f6e\u4e86\u81ea\u589e auto_increment \u90a3\u6b64\u5217\u5fc5\u987b\u5b9a\u4e49\u4e3a\u952e -- ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key # \u90a3\u6b64\u65f6\u7684\u5220\u9664\u7528\u4fee\u6539\u7ea6\u675f\u7684\u547d\u4ee4 \u76f8\u5f53\u4e8e\u5c06\u4e3b\u952e\u548c\u81ea\u589e\u7ed9\u53bb\u6389 alter table \u8868 change id id int not null ; UNIQUE \u8868\u793a\u8be5\u5b57\u6bb5\u552f\u4e00,\u4e0d\u80fd\u91cd\u590d \uff08\u6ce8\u610f: \u5b83\u9664\u4e86\u672c\u8eab\u7684\u7ea6\u675f\u6548\u679c\u5916 \u8fd8\u662f\u4e00\u4e2akey\u53ef\u4ee5\u63d0\u901f\uff09 eg : id int not null unique \u6ce8\u610f: \u82e5\u6709\u4e24\u4e2anull\u503c\u4e5f\u4f1a\u88ab\u8ba4\u4e3a\u662f\u91cd\u590d\uff01 \u5f88\u6709\u610f\u601d\u7684\u4e00\u70b9 : \u8bbe\u7f6e\u67d0\u4e00\u5b57\u6bb5\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u4f1a\u4ea7\u751f\u5316\u5b66\u53cd\u5e94 \u4f1a\u88ab\u6807\u8bc6\u4e3a\u4e3b\u952e -- UNI create table t1 ( id int auto_increment primary key , name varchar ( 20 ) unique , -- \u552f\u4e00\u7d22\u5f15\u53ef\u4ee5\u6709\u591a\u4e2a /* \u7b49\u540c\u4e8e name varchar(20), constraint uk_name unique(name) */ host varchar ( 15 ) not null , port int not null -- unique(host,port) \u53ef\u4ee5\u8054\u5408\u552f\u4e00 \u5373host\u6216port\u5b57\u6bb5\u503c\u53ef\u4ee5\u91cd\u590d \u4f46\u662fhost+port\u4e0d\u80fd\u91cd\u590d\uff01 ) create unique index \u7d22\u5f15\u540d on \u8868\u540d ( \u5217\u540d ); -- [\u5220\u9664] drop unique index \u7d22\u5f15\u540d on \u8868\u540d ; INDEX \u666e\u901a\u7d22\u5f15 , \u52a0\u901f\u67e5\u627e -- MUL create table \u8868\u540d ( id int not null auto_increment primary key , name varchar ( 32 ) not null , email varchar ( 64 ) not null , index ix_email ( email ), index ix_name ( name ), ); create table \u8868\u540d ( id int not null auto_increment primary key , name varchar ( 32 ) not null , email varchar ( 64 ) not null , index ix_email ( name , email ) -- \u5982\u679c\u6709\u591a\u5217,\u79f0\u4e3a\u8054\u5408\u666e\u901a\u7d22\u5f15\u3002 ); create index \u7d22\u5f15\u540d on \u8868\u540d ( \u5217\u540d ); drop index \u7d22\u5f15\u540d on \u8868\u540d ; -- \u770b\u5efa\u7684\u7d22\u5f15 show create table s1 ; FOREIGN KEY (FK) \u6807\u8bc6\u8be5\u5b57\u6bb5\u4e3a\u8be5\u8868\u7684\u5916\u952e \u8fd9\u5c31\u6d89\u53ca\u8868\u5173\u7cfb\u7684\u5efa\u7acb\u5566\uff01 sex enum ( 'male' , 'female' ) not null default 'male' age int unsigned not null default 20 -- \u5fc5\u987b\u4e3a\u6b63\u503c \u4e0d\u5141\u8bb8\u4e3a\u7a7a \u9ed8\u8ba4\u503c\u4e3a20 -- AUTO_INCREMENT # \u53ef\u4ee5\u6307\u5b9a id mysql > insert into student values ( 4 , 'asb' , 'female' ); Query OK , 1 row affected ( 0 . 00 sec ) mysql > insert into student values ( 7 , 'wsb' , 'female' ); Query OK , 1 row affected ( 0 . 00 sec ) mysql > select * from student ; + ----+------+--------+ | id | name | sex | + ----+------+--------+ | 1 | egon | male | | 2 | alex | male | | 4 | asb | female | | 7 | wsb | female | + ----+------+--------+ # \u5bf9\u4e8e\u81ea\u589e\u7684\u5b57\u6bb5\uff0c\u5728\u7528 delete\u5220\u9664\u540e \uff0c\u518d\u63d2\u5165\u503c\uff0c\u8be5\u5b57\u6bb5\u4ecd\u6309\u7167\u5220\u9664\u524d\u7684\u4f4d\u7f6e\u7ee7\u7eed\u589e\u957f mysql > delete from student ; Query OK , 4 rows affected ( 0 . 00 sec ) mysql > select * from student ; Empty set ( 0 . 00 sec ) mysql > insert into student ( name ) values ( 'ysb' ); mysql > select * from student ; + ----+------+------+ | id | name | sex | + ----+------+------+ | 8 | ysb | male | + ----+------+------+ # \u5e94\u8be5\u7528 truncate\u6e05\u7a7a\u8868 \uff0c\u6bd4\u8d77 delete\u4e00\u6761\u4e00\u6761\u5730\u5220\u9664\u8bb0\u5f55 \uff0c truncate\u662f\u76f4\u63a5\u6e05\u7a7a\u8868 \uff0c\u5728\u5220\u9664\u5927\u8868\u65f6\u7528\u5b83 mysql > truncate student ; Query OK , 0 rows affected ( 0 . 01 sec ) mysql > insert into student ( name ) values ( 'egon' ); Query OK , 1 row affected ( 0 . 01 sec ) mysql > select * from student ; + ----+------+------+ | id | name | sex | + ----+------+------+ | 1 | egon | male | + ----+------+------+ 1 row in set ( 0 . 00 sec ) -- \u4e86\u89e3\u81ea\u589e\u5b57\u6bb5\u7684\u8d77\u59cb\u503c \u6b65\u957f\u7b49. \u7565.. -- \u8be6\u89c1: https://www.cnblogs.com/linhaifeng/articles/7238814.html","title":"imp_knowledge"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_1","text":"\u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6: \u672c\u8d28\u5c31\u662f\u4e2ac/s\u67b6\u6784\u7684 \u5957\u63a5\u5b57\u7a0b\u5e8f \u5173\u7cfb\u578b \u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6 DBMS: \u89e3\u51b3\u5b89\u5168\u3001\u5e76\u53d1\u7684\u95ee\u9898 DATA\u3001DB\u3001DBA\u3001DBMS \u7b80\u5355\u7406\u89e3: \u5173\u7cfb\u578b\u6570\u636e\u5e93\u9700\u8981\u6709\u8868\u7ed3\u6784 mysql\u3001oracle\u3001sqlserver \u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u662fkey-value\u5b58\u50a8\u7684 \u6ca1\u6709\u8868\u7ed3\u6784\uff01redis\u3001mongodb \u540d\u8bcd \u89e3\u91ca \u6570\u636e \u56fe\u7247\u3001\u6587\u5b57\u3001\u89c6\u9891\u7b49 \u8bb0\u5f55 \u6587\u4ef6\u4e2d\u7684\u4e00\u6761\u4fe1\u606f \u8868 \u4e00\u4e2a\u6587\u4ef6 \u5e93 \u6587\u4ef6\u5939 \u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u8f6f\u4ef6 \u5957\u63a5\u5b57\u7a0b\u5e8f\uff1amysqld\u3001mysql \u6570\u636e\u5e93\u670d\u52a1\u5668 \u8fd0\u884cmysql\u7684\u8ba1\u7b97\u673a \u521b\u5efa\u6570\u636e\u5e93\u540e \u521d\u59cb\u7684\u56db\u4e2a\u5e93 information_schema: \u865a\u62df\u5e93,\u4e0d\u5360\u7528\u78c1\u76d8\u7a7a\u95f4,\u5b58\u50a8\u7684\u662f\u6570\u636e\u5e93\u542f\u52a8\u540e\u7684\u4e00\u4e9b\u53c2\u6570,\u5982\u7528\u6237\u8868\u4fe1\u606f\u3001\u5217\u4fe1\u606f\u3001\u6743\u9650\u4fe1\u606f\u3001\u5b57\u7b26\u4fe1\u606f\u7b49 performance_schema: MySQL 5.5\u5f00\u59cb\u65b0\u589e\u4e00\u4e2a\u6570\u636e\u5e93. \u4e3b\u8981\u7528\u4e8e\u6536\u96c6\u6570\u636e\u5e93\u670d\u52a1\u5668\u6027\u80fd\u53c2\u6570,\u8bb0\u5f55\u5904\u7406\u67e5\u8be2\u8bf7\u6c42\u65f6\u53d1\u751f\u7684\u5404\u79cd\u4e8b\u4ef6\u3001\u9501\u7b49\u73b0\u8c61 mysql: \u6388\u6743\u5e93,\u4e3b\u8981\u5b58\u50a8\u7cfb\u7edf\u7528\u6237\u7684\u6743\u9650\u4fe1\u606f test: MySQL\u6570\u636e\u5e93\u7cfb\u7edf\u81ea\u52a8\u521b\u5efa\u7684\u6d4b\u8bd5\u6570\u636e\u5e93","title":"\u6570\u636e\u5e93\u76f8\u5173\u6982\u5ff5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_2","text":"\u81ea\u5df1\u7684\u7406\u89e3: \u6570\u636e\u5e93\u662f\u6587\u4ef6\u5939,\u90a3\u4e48\u6570\u636e\u8868\u5c31\u662f\u6587\u4ef6. \u6587\u4ef6\u6709\u5f88\u591a\u7c7b\u578b, \u8868\u683c\u9700\u8981excel\u6765\u5904\u7406,mp4\u89c6\u9891\u9700\u8981\u64ad\u653e\u5668,So,\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u8868\u9700\u8981\u4e0d\u540c\u4e1c\u897f\u6765\u7ba1\u7406. innodb\u7c7b\u578b\u7684\u6570\u636e\u8868\u5c31\u9700\u8981\u540d\u53ebinnodb\u5b58\u50a8\u5f15\u64ce\u6765\u7ba1\u7406. \u518d\u901a\u4fd7\u4e00\u70b9 \u5c31\u662f\u9009\u62e9\u6570\u636e\u8868\u7684\u7ba1\u7406\u65b9\u5f0f(CRUD \u5efa\u7acb\u7d22\u5f15\u7b49). \u5177\u4f53\u6765\u8bf4,\u5b58\u50a8\u5f15\u64ce \u5c31\u662f \u5982\u4f55\u5b58\u50a8\u6570\u636e\u3001\u5982\u4f55\u4e3a\u5b58\u50a8\u7684\u6570\u636e\u5efa\u7acb\u7d22\u5f15\u548c\u5982\u4f55\u66f4\u65b0\u3001\u67e5\u8be2\u6570\u636e\u7b49\u6280\u672f \u7684 \u5b9e\u73b0\u65b9\u6cd5. \u56e0\u4e3a\u5728\u5173\u7cfb\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u5b58\u50a8\u662f\u4ee5\u8868\u7684\u5f62\u5f0f\u5b58\u50a8\u7684, \u6240\u4ee5\u5b58\u50a8\u5f15\u64ce\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u8868\u7c7b\u578b. <\u8868\u7c7b\u578b(\u5b58\u50a8\u548c\u64cd\u4f5c\u6b64\u8868\u7684\u7c7b\u578b)\u662f\u6211\u4eec\u65b9\u4fbf\u7406\u89e3\u653e\u5728\u8fd9\u91cc\u7684\u540d\u8bcd \u4e0d\u662f\u5b98\u65b9\u7684> create table t1 (id int) engine=innodb; mysql\u6709\u591a\u79cd\u5b58\u50a8\u5f15\u64ce. \u800cOrcle\u548cSQL server\u7b49\u6570\u636e\u5e93\u4e2d\u53ea\u6709\u4e00\u79cd\u5b58\u50a8\u5f15\u64ce,\u6570\u636e\u5b58\u50a8\u7ba1\u7406\u673a\u5236\u662f\u4e00\u6837\u7684. \u6570\u636e\u5e93\u4e2d\u7684 \u8868 (\u8bf4\u767d\u4e86\u5c31\u662f \u6587\u4ef6 )\u6709\u4e0d\u540c\u7684\u7c7b\u578b, \u8868\u7684\u7c7b\u578b\u4e0d\u540c, \u4f1a\u5bf9\u5e94mysql\u4e0d\u540c\u7684\u5b58\u53d6\u673a\u5236 innodb \u7d22\u5f15\u7ec4\u7ec7\u8868\u6570\u636e myisam blackhole memory .... \u5b58\u50a8\u5f15\u64ce \u751f\u6210\u6587\u4ef6 myisam t1.frm(\u8868\u7684\u7ed3\u6784) t1.MYD(\u8868\u7684\u6570\u636e) t1.MYI(\u5b58\u50a8\u7d22\u5f15) innodb \u7d22\u5f15\u7ec4\u7ec7\u8868 t2.frm(\u8868\u7684\u7ed3\u6784) t2.ibd(\u8868\u7684\u6570\u636e\u548c\u7d22\u5f15) blackhole t3.frm(\u8868\u7684\u7ed3\u6784) memory t3.frm(\u8868\u7684\u7ed3\u6784) \u6ce8\u610f: innodb\u3001myisam\u6570\u636e\u5b58\u5728\u786c\u76d8;blackhole\u538b\u6839\u4e0d\u5b58\u6570\u636e;memory\u6570\u636e\u5b58\u5728\u5185\u5b58 \u91cd\u542f\u670d\u52a1\u7aef\u6570\u636e\u6d88\u5931\u3002 show engines ; -- \u67e5\u770bmysql\u652f\u6301\u7684\u5b58\u50a8\u5f15\u64ce. show variables like 'storage_engine%' ; -- \u67e5\u770b\u6b63\u5728\u4f7f\u7528\u7684\u5b58\u50a8\u5f15\u64ce -- \u53ef\u4ee5\u5728mysql\u7684\u914d\u7f6e\u6587\u4ef6 my.cnf \u4e2d\u6307\u5b9a\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce \u56fe\u7684\u4e0a\u90e8\u5206\u662f\u5ba2\u6237\u7aef,\u4e0b\u90e8\u5206\u662f\u670d\u52a1\u7aef. > \u300c\u670d\u52a1\u7aef\u300d \u670d\u52a1\u7aef\u7684\u6700\u5e95\u90e8\u662f\u6587\u4ef6\u7cfb\u7edf\uff1a \u5404\u79cd\u5404\u6837\u7684\u6587\u4ef6,\u6bd4\u5982\u5b58\u5728\u4e8e\u786c\u76d8\u4e0a\u7684 t1.frm \u3001 t1.ibd . \u5efa\u8868\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u786c\u76d8\u4e0a\u751f\u6210\u6587\u4ef6. \u670d\u52a1\u7aef\u7684\u5012\u6570\u7b2c\u4e8c\u5c42\u662f\u5b58\u50a8\u5f15\u64ce\uff1a'\u5927\u767d\u8bdd \u4e0d\u540c\u6587\u4ef6\u7684\u5904\u7406\u7a0b\u5e8f' \u5efa\u8868\u65f6\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce(\u8868\u7684\u7c7b\u578b)\u662finnodb. mysql\u4f1a\u4f7f\u7528\u540d\u53ebinnodb\u7684\u7a0b\u5e8f\u53bb\u5904\u7406\u8fd9\u5f20\u8868. >\u300c\u5ba2\u6237\u7aef\u300d \u5ba2\u6237\u7aef\u91cc\u662fmysql\u63d0\u4f9b\u7684\u5404\u79cd\u5404\u6837\u8bed\u8a00\u7684\u63a5\u53e3. \u6bd4\u5982: python\u6839\u636emysql\u63d0\u4f9b\u7684\u63a5\u53e3\u5c01\u88c5\u51fa\u4e00\u4e2a\u53ebpymysql\u7684\u6a21\u5757.\u6765\u4f5c\u4e3amysql\u7684\u5ba2\u6237\u7aef\u8fde\u63a5mysql\u670d\u52a1\u7aef. >\u300c\u8fc7\u7a0b\u300d \u670d\u52a1\u7aef\u8fde\u63a5\u6c60\u91cc\u7684\u4e00\u4e2a\u7ebf\u7a0b\u5c31\u5bf9\u5e94\u4e00\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\u8fde\u63a5. \u5b83\u5148\u8c03\u7528sql\u63a5\u53e3(eg:\u82e5\u662fselect\u8bed\u53e5\u5c31\u627eselect\u63a5\u53e3)\u6765\u5904\u7406\u4f20\u8fc7\u6765\u7684sql\u8bed\u53e5; \u518d\u4ea4\u7ed9\u89e3\u6790\u5668\u89e3\u6790\u8fd9\u6761sql\u8bed\u53e5\u662f\u505a\u4ec0\u4e48\u7684; \u4f18\u5316sql\u8bed\u53e5(\u5229\u7528explain\u67e5\u8be2sql\u8bed\u53e5\u7684\u8fd0\u884c\u8ba1\u5212)\u9009\u53d6\u6700\u4f18\u7684\u65b9\u6848\u8ba9\u5176\u7528\u5c3d\u91cf\u5c11\u7684IO\u53bb\u5b8c\u6210\u8fd9\u4ef6\u4e8b; \u82e5\u9700\u8981\u7684\u6570\u636e\u5728\u7f13\u5b58\u91cc,\u90a3\u5c31\u4ece\u7f13\u5b58\u91cc\u9762\u62ff; \u8be5\u5f80\u7f13\u5b58\u91cc\u653e\u7684\u5c31\u653e\u5230\u7f13\u5b58\u91cc\u9762; \u5f80\u540e,\u7528innodb\u5b58\u50a8\u5f15\u64ce\u6765\u5177\u4f53\u7684\u63a7\u5236\u5b58\u53d6\u786c\u76d8\u91cc\u7684\u6587\u4ef6. innodb \u652f\u6301\u4e8b\u52a1\u3001\u884c\u7ea7\u9501\u3001foreign key","title":"\u5b58\u50a8\u5f15\u64ce"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_3","text":"\u4e00\u884c\u5185\u5bb9\u5c31\u79f0\u4e3a\u4e00\u6761\u8bb0\u5f55. \u6ce8\u610f: \u521b\u5efa\u8868\u65f6\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u4e0d\u8981\u52a0\u9017\u53f7 , \u5426\u5219\u4f1a\u62a5\u9519 \u5b57\u6bb5\u540d\u548c\u7c7b\u578b\u662f\u5fc5\u987b\u6709\u7684 \u5b57\u6bb5\u7684\u7c7b\u578b\u5927\u5c0f(\u5373\u5bbd\u5ea6)\u53ef\u4ee5\u4e0d\u5199 \u82e5\u4e0d\u5199\u4f1a\u6709\u4e2a\u9ed8\u8ba4\u503c \u5b57\u6bb5\u7684\u7ea6\u675f\u53ef\u9009 mysql > select host , user from mysql . user ; + -----------+------------------+ | host | user | + -----------+------------------+ | % | luffy | | % | wupeiqi4 | | localhost | mysql . infoschema | | localhost | mysql . session | | localhost | mysql . sys | | localhost | root | + -----------+------------------+ 6 rows in set ( 0 . 00 sec ) -- \u67e5\u8be2\u8bed\u53e5 \u5c06\u6570\u636e\u4ece\u786c\u76d8\u8bfb\u5230\u5185\u5b58\u7136\u540e\u683c\u5f0f\u5316\u8f93\u51fa\u6253\u5370\u51fa\u6765. -- mysql.use\u8fd9\u5f20\u8868\u80af\u5b9a\u662f\u5728\u786c\u76d8\u91cc\u7684,\u4f46\u6253\u5370\u51fa\u6765\u7684\u8fd9\u5f20\u8868\u5728\u786c\u76d8\u91cc\u6ca1\u6709,\u53eb\u505a\u865a\u62df\u8868 -- \u590d\u5236\u8868 create table t6 select host , user from mysql . user ; -- \u8868\u7ed3\u6784\u548c\u6570\u636e create table t6 select host , user from mysql . user where 1 < 0 ; -- \u53ea\u6709\u8868\u7ed3\u6784 \u662f\u5f20\u7a7a\u8868","title":"\u8868\u64cd\u4f5c"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_4","text":"\u6240\u6709\u7684\u6570\u636e\u7c7b\u578b\u91cc\u9762,\u5b57\u6bb5\u7684\u5bbd\u5ea6\u4ee3\u8868\u7684\u90fd\u662f\u6700\u5927\u5b58\u50a8\u5bbd\u5ea6,\u53ea\u6709\u6574\u578b\u9664\u5916,\u6307\u7684\u662f\u6253\u5370\u65f6\u5019\u7684\u663e\u793a\u5bbd\u5ea6.","title":"\u8868\u5b57\u6bb5\u7684\u6570\u636e\u7c7b\u578b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_5","text":"<1> \u6574\u578b\uff1atinyinit\u3001int\u3001bigint \u4f5c\u7528: \u5b58\u50a8\u5e74\u9f84, \u7b49\u7ea7, id, \u5404\u79cd\u53f7\u7801\u7b49 int\u6574\u6570\u7c7b\u578b\u4e0d\u9700\u8981\u6307\u5b9a\u5bbd\u5ea6 (\u6ca1\u5375\u7528 \u8bbe\u7f6e\u540e\u8d85\u8fc7\u4e86\u4e5f\u4f1a\u5168\u663e\u793a)!! \u52a0\u4e86\u7684\u90fd\u662f\u5c0f\u5783\u573e. int\u7684\u5b58\u50a8\u5bbd\u5ea6\u662f 4\u4e2a\u5b57\u8282 Bytes 32bit 2^32 \u9ed8\u8ba4\u7684\u663e\u793a\u5bbd\u5ea6\u662f11,\u6700\u5927\u6570\u503c\u662f10\u4f4d\u518d\u52a0\u4e0a\u7b26\u53f7\u517111\u4f4d. <2> \u6d6e\u70b9\u578b\uff1a float(m,n)\u3001double(m,n)\u3001decimal(m,n) \u4e09\u8005\u7cbe\u5ea6\u4ece\u4f4e\u5230\u9ad8 decimal\u6700\u7cbe\u51c6 \u4ee3\u8868\u6b64\u6d6e\u70b9\u6570\u6700\u5927m\u4f4d\u6570,\u5176\u4e2d\u5c0f\u6570\u4f4d\u53ef\u4ee5\u4fdd\u7559n\u4f4d.(\u610f\u5473\u6574\u6570\u4f4dm-n\u4f4d) \u4f5c\u7528: \u5b58\u50a8\u85aa\u8d44\u3001\u8eab\u9ad8\u3001\u4f53\u91cd\u3001\u4f53\u8d28\u53c2\u6570\u7b49 float(255,30) double(255,30) decimal(65,30) \u4e00\u822c\u60c5\u51b5\u4e0bfloat\u591f\u7528\u4e86,\u6709\u7cbe\u5ea6\u8981\u6c42double\u4e5f\u80fd\u6ee1\u8db399%\u7684\u60c5\u51b5\u5566\uff01","title":"\u6570\u5b57\u7c7b\u578b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_6","text":"DATE\u3001TIME\u3001 DATETIME (\u6700\u5e38\u7528)\u3001TIMESTAMP\u3001YEAR \u4f5c\u7528: \u5b58\u50a8\u7528\u6237\u6ce8\u518c\u65f6\u95f4\u3001\u6587\u7ae0\u53d1\u5e03\u65f6\u95f4\u3001\u5458\u5de5\u5165\u804c\u65f6\u95f4\u3001\u51fa\u751f\u65f6\u95f4\u3001\u8fc7\u671f\u65f6\u95f4\u7b49. create table student ( id int , name varchar ( 16 ), birth date , -- \u5e74\u6708\u65e5 \u51fa\u751f\u65e5\u671f class_time , -- \u65f6\u5206\u79d2 \u4e0a\u8bfe\u65f6\u95f4 reg_time datetime , -- \u5e74\u6708\u65e5\u65f6\u5206\u79d2 \u6ce8\u518c\u65f6\u95f4 born_year year -- \u5e74 \u51fa\u751f\u5e74\u4efd ); insert student values ( 1 , 'egon' , '1993-01-23' , '08:30:00' , '2022-03-23 09:30:21' , '1993' ); DATETIME\u4e0eTIMESTAMP\u7684\u533a\u522b DATETIME\u7684\u65e5\u671f\u8303\u56f4\u662f1001 \u2014\u2014 9999 \u5e74\uff0c TIMESTAMP\u7684\u65f6\u95f4\u8303\u56f4\u662f1970 \u2014\u2014 2038 \u5e74 DATETIME\u5b58\u50a8\u65f6\u95f4\u4e0e\u65f6\u533a\u65e0\u5173 \uff0c TIMESTAMP\u5b58\u50a8\u65f6\u95f4\u4e0e\u65f6\u533a\u6709\u5173 \uff0c\u663e\u793a\u7684\u503c\u4e5f\u4f9d\u8d56\u4e8e\u65f6\u533a\u3002 \u5728 mysql\u670d\u52a1\u5668 \uff0c\u64cd\u4f5c\u7cfb\u7edf\u4ee5\u53ca\u5ba2\u6237\u7aef\u8fde\u63a5\u90fd\u6709\u65f6\u533a\u7684\u8bbe\u7f6e\u3002 DATETIME\u4f7f\u75288\u5b57\u8282\u7684\u5b58\u50a8\u7a7a\u95f4 \uff0c TIMESTAMP\u7684\u5b58\u50a8\u7a7a\u95f4\u4e3a4\u5b57\u8282 \u3002\u7a7a\u95f4\u5c0f\u4e00\u70b9 , IO\u6b21\u6570\u66f4\u5c11 . TIMESTAMP\u4f1a\u81ea\u52a8\u505a\u7ea6\u675f , \u6b64\u65e5\u671f\u7c7b\u578b\u4e0d\u5141\u8bb8\u4e3a\u7a7a , \u82e5\u4f20\u7a7a\u7684\u8bdd , \u5b83\u4f1a\u7528\u5f53\u524d\u7684\u65f6\u95f4\u81ea\u52a8\u586b\u5145 , \u66f4\u65b0\u7684\u65f6\u5019\u4e5f\u4e00\u6837 . create table t1 ( x datetime not null default now ()); # \u9700\u8981\u6307\u5b9a\u4f20\u5165\u7a7a\u503c\u65f6\u9ed8\u8ba4\u53d6\u5f53\u524d\u65f6\u95f4 create table t2 ( x timestamp ); # \u65e0\u9700\u4efb\u4f55\u8bbe\u7f6e\uff0c\u5728\u4f20\u7a7a\u503c\u7684\u60c5\u51b5\u4e0b\u81ea\u52a8\u4f20\u5165\u5f53\u524d\u65f6\u95f4 insert into t1 values (); insert into t2 values ();","title":"\u65e5\u671f\u7c7b\u578b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_7","text":"char\u3001varchar \u6ce8\u610f: \u5b83\u4e24\u62ec\u53f7\u5185\u7684\u53c2\u6570\u6307\u7684\u90fd\u662f \u5b57\u7b26\u7684\u957f\u5ea6 '\u5b58\u50a8\u5bbd\u5ea6' . \u4e0d\u662f\u5b57\u8282\uff01\uff01 \u8981\u6653\u5f97\u4e00\u70b9, \u4e00\u4e2a\u4e2d\u6587\u662f\u4e00\u4e2a\u5b57\u7b26, \u4e00\u4e2a\u82f1\u6587\u5b57\u6bcd\u4e5f\u662f\u4e00\u4e2a\u5b57\u7b26. \u5728utf8\u7f16\u7801\u4e0b, \u524d\u8005\u53603\u4e2a\u5b57\u8282. \u540e\u8005\u53601\u4e2a\u5b57\u8282. sql\u4f18\u5316: \u521b\u5efa\u8868\u662f, \u5b9a\u957f\u7c7b\u578b'eg sex'\u5f80\u524d\u653e, \u53d8\u957f\u7684\u5f80\u540e\u653e'eg address' -- char(4) [\u5b9a\u957f] \u5b57\u7b26\u957f\u5ea60-255 insert t1 values ( '\u4f60\u597d\u554a\u54c8\u54c8' ) -- '\u4f60\u597d\u554a\u54c8' insert t1 values ( '\u4f60' ) -- '\u4f60 ' -- varchar(4) [\u53d8\u957f] \u5b57\u7b26\u957f\u5ea60-65535 insert t2 values ( '\u4f60\u597d\u554a\u54c8\u54c8' ) -- '\u4f60\u597d\u554a\u54c8' insert t2 values ( '\u4f60' ) -- '\u4f60' -- \u4e24\u8005\u5728\u5b58\u591f\u7684\u60c5\u51b5\u4e0b\u90fd\u4f1a\u663e\u793a\u89c4\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u91cf.(\u975e\u4e25\u683c\u6a21\u5f0f\u4e0b\uff01) -- \u6ca1\u5b58\u591f,char\u4f1a\u81ea\u52a8\u5411\u53f3\u586b\u5145\u7a7a\u767d\u5b57\u7b26, varchar\u4e0d\u4f1a. Value CHAR(4) Storage Required VARCHAR(4) Storage Required '' ' ' 4 bytes '' 1 byte 'ab' 'ab ' 4 bytes 'ab' 3 bytes 'abcd' 'abcd' 4 bytes 'abcd' 5 bytes 'abcdefgh' 'abcd' 4 bytes 'abcd' 5 bytes \u5728\u6ca1\u6709\u5b58\u591f\u7684\u60c5\u51b5\u4e0b,varchar\u6bd4char\u66f4\u8282\u7701\u7a7a\u95f4? \u6ca1\u6709\u90a3\u4e48\u7b80\u5355. \u770b\u4e0a\u65b9\u8868\u683c. varchar\u7c7b\u578b\u4f1a\u5728\u771f\u5b9e\u6570\u636e\u524d\u52a01-2Bytes\u7684\u524d\u7f00\uff0c\u8be5\u524d\u7f00\u7528\u6765\u8868\u793a\u771f\u5b9e\u6570\u636e\u7684bytes\u5b57\u8282\u6570. \u5982\u679c\u771f\u5b9e\u7684\u6570\u636e<255bytes \u5219\u9700\u89811Bytes\u7684\u524d\u7f00(1Bytes=8bit 2^8=255) \u5982\u679c\u771f\u5b9e\u7684\u6570\u636e>255bytes \u5219\u9700\u89812Bytes\u7684\u524d\u7f00(2Bytes=16bit 2^16=65535) \u56e0\u800c, \u5b58\u50a8\u7684\u5bbd\u5ea6\u521a\u597d\u8fbe\u5230\u6216\u8d85\u8fc74, varchar\u53cd\u800c\u662f\u66f4\u52a0\u6d6a\u8d39\u7a7a\u95f4\u7684. \u4f46\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5927\u591a\u65f6\u5019\u7528\u7684\u8fd8\u662fvarchar.\u56e0\u4e3a\u5f80\u5f80\u771f\u5b9e\u5b58\u50a8\u7684\u90fd\u4f1a\u6bd4\u8bbe\u7f6e\u7684\u5b58\u50a8\u5bbd\u5ea6\u5c0f.\u4e0d\u4f1a\u5b58\u7684\u521a\u521a\u597d. \u6709\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u70b9\uff01\u770b\u4e0b\u65b9. -- char(5),varchar(5) -- \u8865\u5145: \u5728\u68c0\u7d22\u65f6char\u5f88\u4e0d\u8981\u8138\u5730\u5c06\u81ea\u5df1\u6d6a\u8d39\u7684\u5b57\u7b26\u7ed9\u5220\u6389\u4e86,\u88c5\u7684\u597d\u50cf\u81ea\u5df1\u6ca1\u6d6a\u8d39\u8fc7\u7a7a\u95f4\u4e00\u6837(\u4e4b\u6240\u4ee5\u9690\u85cf\u662f\u56e0\u4e3a\u8fd9\u662f\u5e95\u5c42\u7684),\u800cvarchar\u5f88\u8001\u5b9e,\u5b58\u4e86\u591a\u5c11\uff0c\u5c31\u663e\u793a\u591a\u5c11 -- \u7565\u65bd\u5c0f\u8ba1,\u8ba9char\u73b0\u51fa\u539f\u5f62 mysql > SET sql_mode = 'PAD_CHAR_TO_FULL_LENGTH' ; -- \u586b\u5145\u5b57\u7b26\u5230\u5b8c\u6210\u7684\u957f\u5ea6 -- length\uff1a\u67e5\u770b\u5b57\u8282\u6570 -- char_length:\u67e5\u770b\u5b57\u7b26\u6570 mysql > select x , char_length ( x ), y , char_length ( y ) from t1 ; + -------------+----------------+------------+----------------+ | x | char_length ( x ) | y | char_length ( y ) | + -------------+----------------+------------+----------------+ | \u4f60\u7785\u5565 | 5 | \u4f60\u7785\u5565 | 4 | + -------------+----------------+------------+----------------+ 1 row in set ( 0 . 00 sec ) # char\u7c7b\u578b \uff1a 3 \u4e2a\u4e2d\u6587\u5b57\u7b26 + 2 \u4e2a\u7a7a\u683c = 11 Bytes # varchar\u7c7b\u578b : 3 \u4e2a\u4e2d\u6587\u5b57\u7b26 + 1 \u4e2a\u7a7a\u683c = 10 Bytes mysql > select x , length ( x ), y , length ( y ) from t1 ; + -------------+-----------+------------+-----------+ | x | length ( x ) | y | length ( y ) | + -------------+-----------+------------+-----------+ | \u4f60\u7785\u5565 | 11 | \u4f60\u7785\u5565 | 10 | + -------------+-----------+------------+-----------+ 1 row in set ( 0 . 00 sec ) \u6ce8\u610f : <\u7b49\u53f7\u5339\u914d> \u672b\u5c3e\u7a7a\u683c\u5e76\u4e0d\u5f71\u54cd\u67e5\u8be2\u4f1a\u81ea\u52a8\u5ffd\u7565 \u4f46like\u6a21\u7cca\u5339\u914d\u4f1a\u6709\u5f71\u54cd,\u5b83\u4e0d\u4f1a\u5ffd\u7565\u7a7a\u683c (char\u6709\u8fd9\u65b9\u9762\u7684\u56f0\u6270'\u81ea\u52a8\u586b\u5145\u7a7a\u683c',varchar\u6ca1\u6709) \u5176\u5b83\u5b57\u7b26\u7cfb\u5217, \u6bd4\u5982TEXT\u3001BLOB\u7b49\u53ef\u4ee5\u5c06\u6574\u7bc7\u6587\u7ae0\u7684\u5b57\u7b26\u90fd\u5b58\u8fdb\u53bb, \u4f46\u8fd9\u6837\u505a\u4e0d\u597d. \u6211\u4eec\u901a\u5e38\u4f1a\u5b58\u8fd9\u7bc7\u6587\u7ae0\u7684\u5730\u5740.\u51cf\u5c11\u6570\u636e\u5e93\u7684IO\u91cf. \u5927\u6587\u4ef6\u4e00\u822c\u653e\u5230\u4e00\u53f0\u4e13\u95e8\u7684\u6587\u4ef6\u670d\u52a1\u5668\u4e2d\uff01 \u6807\u51c6\uff1a\u6587\u4ef6\u8d85\u8fc7255\u4e2a\u5b57\u7b26 \u573a\u666f: \u5ba2\u6237\u7aef\u8bf7\u6c42\u4e00\u4e2a\u89c6\u9891 \u5ba2\u6237\u7aefA \u5e94\u7528\u670d\u52a1\u5668B \u6570\u636e\u5e93\u670d\u52a1\u5668C \u6587\u4ef6\u670d\u52a1\u5668D \u5916\u90e8\u670d\u52a1\u5668E(\u63a5\u53d7\u8bf7\u6c42 \u589e\u5927\u5e76\u53d1\u91cf\u7684) A ==req=> B ==req=> C ==res\u89c6\u9891\u5730\u5740=> B ==res\u89c6\u9891\u5730\u5740=> A ==req=> D ==res=> A","title":"\u5b57\u7b26\u7c7b\u578b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_8","text":"\u524d\u8005\u5b9e\u9645\u4e0a\u6700\u591a\u9650\u52363000\u4e2a\u4e0d\u540c\u5143\u7d20 \u540e\u8005\u6700\u591a\u53ef\u4ee5\u670964\u4e2a\u4e0d\u540c\u5143\u7d20 enum: \u5355\u9009 \u53ea\u80fd\u5728\u7ed9\u5b9a\u7684\u8303\u56f4\u5185\u9009\u4e00\u4e2a\u503c. eg \u6027\u522b sex \u7537male/\u5973female level enum('vip1','vip2','vip3','vip4','vip5') sex enum('male','female') set: \u591a\u9009 \u5728\u7ed9\u5b9a\u7684\u8303\u56f4\u5185\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6216\u4e00\u4e2a\u4ee5\u4e0a\u7684\u503c. eg \u7231\u597d1,\u7231\u597d2,\u7231\u597d3... hobby set('play','music','read','study') \u975e\u4e25\u683c\u6a21\u5f0f\u4e0b,\u4e0d\u4f1a\u62a5\u9519, \u53ea\u4f1a\u63d2\u8303\u56f4\u4e4b\u5185\u7684\u6570\u636e.","title":"\u679a\u4e3e\u4e0e\u96c6\u5408"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/2_imp_knowledge/#_9","text":"UNSIGNED \u65e0\u7b26\u53f7 eg : id int unsigned \u8868\u660eid\u503c\u4e0d\u80fd\u4e3a\u8d1f\u6570\u5566 \u4e00\u822c\u4e0d\u6307\u5b9a ZEROFILL \u4f7f\u75280\u586b\u5145 AUTO_INCREMENT \u6807\u8bc6\u8be5\u5b57\u6bb5\u7684\u503c\u81ea\u52a8\u589e\u957f \u9ed8\u8ba4\u6574\u6570\u7c7b\u578b \u901a\u5e38\u8ddf\u4e3b\u952e\u4e00\u8d77\u4f7f\u7528 \u5fc5\u987b\u6709key\u7ea6\u675f\u5b83\uff01\uff01 eg : id int primary key auto_increment DEFAULT \u4e3a\u8be5\u5b57\u6bb5\u8bbe\u7f6e\u9ed8\u8ba4\u503c NOT NULL \u6807\u8bc6\u8be5\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a, \u901a\u5e38\u4e0edefault\u4e00\u8d77\u4f7f\u7528 \u5b57\u6bb5\u9ed8\u8ba4\u5141\u8bb8\u4e3a\u7a7a, \u82e5\u7f3a\u7701\u9ed8\u8ba4\u503c\u4e3aNULL eg : age int not null defaule 0 PRIMARY KEY (PK) \u4e3b\u952e \u6807\u8bc6\u8be5\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a \u5e76\u4e14\u552f\u4e00 \u4ee5innodb\u4e3a\u5b58\u50a8\u5f15\u64ce\u7684\u4e00\u5f20\u8868 \u5fc5\u987b\u8981\u6709\u4e2a\u4e3b\u952e \u5e76\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a \u901a\u5e38\u662fid\u5b57\u6bb5 \u82e5\u7528\u8054\u5408\u4e3b\u952e \u5b9e\u9645\u4e0a\u67e5\u8be2\u52a0\u901f\u6548\u679c\u4e0d\u4f73 \u901a\u5e38\u4e0d\u4f1a\u5efa\u8054\u5408\u4e3b\u952e \u82e5\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e innodb\u4f1a\u81ea\u4e0a\u800c\u4e0b\u53bb\u627e\u4e00\u4e2a\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u7684\u5b57\u6bb5, \u82e5\u6ca1\u627e\u5230innodb\u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u7684\u9690\u85cf\u5b57\u6bb5. -- PRI create table t1 ( id int auto_increment primary key , -- \u4e3b\u952e /* \u7b49\u540c\u4e8e id int, constraint uk_name primary key(id) -- \u5355\u72ec\u5199 */ host varchar ( 15 ) not null , port int not null -- primary key(host,port) -- \u8054\u5408\u4e3b\u952e ) alter table \u8868\u540d add primary key ( \u5217\u540d ); -- \u8868\u521b\u5efa\u5b8c\u540e\u52a0\u4e3b\u952e\u7d22\u5f15 /* \u8868\u521b\u5efa\u597d\u540e \u683c\u5916\u6dfb\u52a0\u4e00\u4e2a\u5b57\u6bb5 \u4f5c\u4e3a\u4e3b\u952e ALTER TABLE demo.test ADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT;*/ -- [\u5220\u9664] alter table \u8868\u540d drop primary key ; # \u6ce8\u610f : \u5220\u9664\u7d22\u5f15\u65f6\u53ef\u80fd\u4f1a\u62a5\u9519 \u56e0\u4e3a\u7ed9\u67d0\u4e00\u5217\u8bbe\u7f6e\u4e86\u81ea\u589e auto_increment \u90a3\u6b64\u5217\u5fc5\u987b\u5b9a\u4e49\u4e3a\u952e -- ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key # \u90a3\u6b64\u65f6\u7684\u5220\u9664\u7528\u4fee\u6539\u7ea6\u675f\u7684\u547d\u4ee4 \u76f8\u5f53\u4e8e\u5c06\u4e3b\u952e\u548c\u81ea\u589e\u7ed9\u53bb\u6389 alter table \u8868 change id id int not null ; UNIQUE \u8868\u793a\u8be5\u5b57\u6bb5\u552f\u4e00,\u4e0d\u80fd\u91cd\u590d \uff08\u6ce8\u610f: \u5b83\u9664\u4e86\u672c\u8eab\u7684\u7ea6\u675f\u6548\u679c\u5916 \u8fd8\u662f\u4e00\u4e2akey\u53ef\u4ee5\u63d0\u901f\uff09 eg : id int not null unique \u6ce8\u610f: \u82e5\u6709\u4e24\u4e2anull\u503c\u4e5f\u4f1a\u88ab\u8ba4\u4e3a\u662f\u91cd\u590d\uff01 \u5f88\u6709\u610f\u601d\u7684\u4e00\u70b9 : \u8bbe\u7f6e\u67d0\u4e00\u5b57\u6bb5\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u4f1a\u4ea7\u751f\u5316\u5b66\u53cd\u5e94 \u4f1a\u88ab\u6807\u8bc6\u4e3a\u4e3b\u952e -- UNI create table t1 ( id int auto_increment primary key , name varchar ( 20 ) unique , -- \u552f\u4e00\u7d22\u5f15\u53ef\u4ee5\u6709\u591a\u4e2a /* \u7b49\u540c\u4e8e name varchar(20), constraint uk_name unique(name) */ host varchar ( 15 ) not null , port int not null -- unique(host,port) \u53ef\u4ee5\u8054\u5408\u552f\u4e00 \u5373host\u6216port\u5b57\u6bb5\u503c\u53ef\u4ee5\u91cd\u590d \u4f46\u662fhost+port\u4e0d\u80fd\u91cd\u590d\uff01 ) create unique index \u7d22\u5f15\u540d on \u8868\u540d ( \u5217\u540d ); -- [\u5220\u9664] drop unique index \u7d22\u5f15\u540d on \u8868\u540d ; INDEX \u666e\u901a\u7d22\u5f15 , \u52a0\u901f\u67e5\u627e -- MUL create table \u8868\u540d ( id int not null auto_increment primary key , name varchar ( 32 ) not null , email varchar ( 64 ) not null , index ix_email ( email ), index ix_name ( name ), ); create table \u8868\u540d ( id int not null auto_increment primary key , name varchar ( 32 ) not null , email varchar ( 64 ) not null , index ix_email ( name , email ) -- \u5982\u679c\u6709\u591a\u5217,\u79f0\u4e3a\u8054\u5408\u666e\u901a\u7d22\u5f15\u3002 ); create index \u7d22\u5f15\u540d on \u8868\u540d ( \u5217\u540d ); drop index \u7d22\u5f15\u540d on \u8868\u540d ; -- \u770b\u5efa\u7684\u7d22\u5f15 show create table s1 ; FOREIGN KEY (FK) \u6807\u8bc6\u8be5\u5b57\u6bb5\u4e3a\u8be5\u8868\u7684\u5916\u952e \u8fd9\u5c31\u6d89\u53ca\u8868\u5173\u7cfb\u7684\u5efa\u7acb\u5566\uff01 sex enum ( 'male' , 'female' ) not null default 'male' age int unsigned not null default 20 -- \u5fc5\u987b\u4e3a\u6b63\u503c \u4e0d\u5141\u8bb8\u4e3a\u7a7a \u9ed8\u8ba4\u503c\u4e3a20 -- AUTO_INCREMENT # \u53ef\u4ee5\u6307\u5b9a id mysql > insert into student values ( 4 , 'asb' , 'female' ); Query OK , 1 row affected ( 0 . 00 sec ) mysql > insert into student values ( 7 , 'wsb' , 'female' ); Query OK , 1 row affected ( 0 . 00 sec ) mysql > select * from student ; + ----+------+--------+ | id | name | sex | + ----+------+--------+ | 1 | egon | male | | 2 | alex | male | | 4 | asb | female | | 7 | wsb | female | + ----+------+--------+ # \u5bf9\u4e8e\u81ea\u589e\u7684\u5b57\u6bb5\uff0c\u5728\u7528 delete\u5220\u9664\u540e \uff0c\u518d\u63d2\u5165\u503c\uff0c\u8be5\u5b57\u6bb5\u4ecd\u6309\u7167\u5220\u9664\u524d\u7684\u4f4d\u7f6e\u7ee7\u7eed\u589e\u957f mysql > delete from student ; Query OK , 4 rows affected ( 0 . 00 sec ) mysql > select * from student ; Empty set ( 0 . 00 sec ) mysql > insert into student ( name ) values ( 'ysb' ); mysql > select * from student ; + ----+------+------+ | id | name | sex | + ----+------+------+ | 8 | ysb | male | + ----+------+------+ # \u5e94\u8be5\u7528 truncate\u6e05\u7a7a\u8868 \uff0c\u6bd4\u8d77 delete\u4e00\u6761\u4e00\u6761\u5730\u5220\u9664\u8bb0\u5f55 \uff0c truncate\u662f\u76f4\u63a5\u6e05\u7a7a\u8868 \uff0c\u5728\u5220\u9664\u5927\u8868\u65f6\u7528\u5b83 mysql > truncate student ; Query OK , 0 rows affected ( 0 . 01 sec ) mysql > insert into student ( name ) values ( 'egon' ); Query OK , 1 row affected ( 0 . 01 sec ) mysql > select * from student ; + ----+------+------+ | id | name | sex | + ----+------+------+ | 1 | egon | male | + ----+------+------+ 1 row in set ( 0 . 00 sec ) -- \u4e86\u89e3\u81ea\u589e\u5b57\u6bb5\u7684\u8d77\u59cb\u503c \u6b65\u957f\u7b49. \u7565.. -- \u8be6\u89c1: https://www.cnblogs.com/linhaifeng/articles/7238814.html","title":"\u8868\u5b57\u6bb5\u7684\u7ea6\u675f\u6761\u4ef6"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/3_table_field/","text":"\u7ea6\u675f \u00b6 create table tb5 ( id int not null auto_increment primary key , -- \u4e0d\u5141\u8bb8\u4e3a\u7a7a & \u4e3b\u952e & \u81ea\u589e name varchar ( 16 ) not null , -- \u4e0d\u5141\u8bb8\u4e3a\u7a7a email varchar ( 32 ) null , -- \u5141\u8bb8\u4e3a\u7a7a\uff08\u9ed8\u8ba4\uff09 age int default 3 -- \u63d2\u5165\u6570\u636e\u65f6\uff0c\u5982\u679c\u4e0d\u7ed9age\u5217\u8bbe\u7f6e\u503c\uff0c\u9ed8\u8ba4\u503c\uff1a3 ) default charset = utf8 ; \u4e3b\u952e\u4e00\u822c\u7528\u4e8e\u8868\u793a\u5f53\u524d\u8fd9\u6761\u6570\u636e\u7684 ID\u7f16\u53f7 \uff08\u7c7b\u4f3c\u4e8e\u4eba\u7684\u8eab\u4efd\u8bc1\uff09\uff0c\u9700\u8981\u6211\u4eec\u81ea\u5df1\u6765\u7ef4\u62a4\u4e00\u4e2a\u4e0d\u91cd\u590d\u7684\u503c\uff0c\u6bd4\u8f83\u7e41\u7410\u3002\u6240\u4ee5\uff0c\u5728\u6570\u636e\u5e93\u4e2d\u4e00\u822c\u4f1a\u5c06\u4e3b\u952e\u548c\u81ea\u589e\u7ed3\u5408\u3002 \u6ce8\u610f\uff1a\u4e00\u4e2a\u8868\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u81ea\u589e\u5217\u3010\u81ea\u589e\u5217\uff0c\u4e00\u822c\u90fd\u662f\u4e3b\u952e\u3011 MySQL\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a set\u3001enum\u3001TinyBlob\u3001Blob\u3001MediumBlob\u3001LongBlob \u7b49 \uff0c\u8be6\u7ec6\u89c1\u5b98\u65b9\u6587\u6863\uff1a https://dev.mysql.com/doc/refman/5.7/en/data-types.html \u7c7b\u578b \u00b6 int[(m)][unsigned][zerofill] int \u8868\u793a\u6709\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a-2147483648 \uff5e 2147483647 int unsigned \u8868\u793a\u65e0\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a0 \uff5e 4294967295 int(5) zerofill \u4ec5\u7528\u4e8e\u663e\u793a\uff0c\u5f53\u4e0d\u6ee1\u8db35\u4f4d\u65f6\uff0c\u6309\u7167\u5de6\u8fb9\u88650\uff0c\u4f8b\u5982\uff1a00002\uff1b\u6ee1\u8db3\u65f6\uff0c\u6b63\u5e38\u663e\u793a tinyint[(m)] [unsigned] [zerofill] \u5927\u5c0f\uff0c1\u5b57\u8282 8\u4e2a\u4e8c\u8fdb\u5236\u4f4d 2^8=256 \u6709\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a-128 \uff5e 127. \u65e0\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a0 \uff5e 255 bigint[(m)][unsigned][zerofill] \u6709\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a-9223372036854775808 \uff5e 9223372036854775807 \u65e0\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a0 \uff5e 18446744073709551615 decimal[(m[,d])] [unsigned] [zerofill] \u51c6\u786e\u7684\u5c0f\u6570\u503c\uff0cm\u662f\u6570\u5b57\u603b\u4e2a\u6570\uff08\u8d1f\u53f7\u4e0d\u7b97\uff09\uff0cd\u662f\u5c0f\u6570\u70b9\u540e\u4e2a\u6570\u3002 m\u6700\u5927\u503c\u4e3a65\uff0cd\u6700\u5927\u503c\u4e3a30 eg: decimal(8,2) 5.289-->5.29 5.282-->5.28 5121321.283-->ERROR char(m) \u5b9a\u957f\u5b57\u7b26\u4e32\uff0cm\u4ee3\u8868\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u6700\u591a\u53ef\u5bb9\u7eb3255\u4e2a\u5b57\u7b26\u3002 \u5b9a\u957f\u7684\u4f53\u73b0\uff1a\u5373\u4f7f\u5185\u5bb9\u957f\u5ea6\u5c0f\u4e8em\uff0c\u4e5f\u4f1a\u5360\u7528m\u957f\u5ea6\u3002\u4f8b\u5982\uff1achar(5)\uff0c\u6570\u636e\u662f\uff1ayes\uff0c\u5e95\u5c42\u4e5f\u4f1a\u5360\u75285\u4e2a\u5b57\u7b26\uff1b \u5982\u679c\u8d85\u51fam\u957f\u5ea6\u9650\u5236\uff08\u9ed8\u8ba4MySQL\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\uff09\u3002 \u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\uff0c sql-mode=\"NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\" \u4fdd\u5b58\u5e76\u91cd\u542f\uff0c\u6b64\u65f6MySQL\u5219\u662f\u975e\u4e25\u683c\u6a21\u5f0f\uff0c\u6b64\u65f6\u8d85\u8fc7\u957f\u5ea6\u5219\u81ea\u52a8\u622a\u65ad\uff08\u4e0d\u62a5\u9519\uff09\u3002\u3002 \u6ce8\u610f\uff1a\u9ed8\u8ba4\u5e95\u5c42\u5b58\u50a8\u662f\u56fa\u5b9a\u7684\u957f\u5ea6\uff08\u4e0d\u591f\u5219\u7528\u7a7a\u683c\u8865\u9f50\uff09\uff0c\u4f46\u662f\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u7a7a\u767d\u53bb\u9664\u3002 \u5982\u679c\u60f3\u8981\u4fdd\u7559\u7a7a\u767d\uff0c\u5728sql-mode\u4e2d\u52a0\u5165 PAD_CHAR_TO_FULL_LENGTH \u5373\u53ef\u3002 \u67e5\u770b\u6a21\u5f0fsql-mode\uff0c\u6267\u884c\u547d\u4ee4\uff1ashow variables like 'sql_mode'; \u4e00\u822c\u9002\u7528\u4e8e\uff1a\u56fa\u5b9a\u957f\u5ea6\u7684\u5185\u5bb9\u3002 \u8bbe\u7f6e\u56de\u4e25\u683c\u6a21\u5f0f\uff1aset global sql_mode='STRICT_TRANS_TABLES' varchar(m) \u53d8\u957f\u5b57\u7b26\u4e32\uff0cm\u4ee3\u8868\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u6700\u591a\u53ef\u5bb9\u7eb365535\u4e2a\u5b57\u7b26\u3002 \u53d8\u957f\u7684\u4f53\u73b0\uff1a\u5185\u5bb9\u5c0f\u4e8em\u65f6\uff0c\u4f1a\u6309\u7167\u771f\u5b9e\u6570\u636e\u957f\u5ea6\u5b58\u50a8\uff1b\u5982\u679c\u8d85\u51fam\u957f\u5ea6\u9650\u5236\uff08\u9ed8\u8ba4MySQL\u662f\u4e25\u683c\u6a21\u5f0f,\u6240\u4ee5\u62a5\u9519\uff09\u3002 \u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\uff0c sql-mode=\"NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\" \u4fdd\u5b58\u5e76\u91cd\u542f\uff0c\u6b64\u65f6MySQL\u5219\u662f\u975e\u4e25\u683c\u6a21\u5f0f\uff0c\u6b64\u65f6\u8d85\u8fc7\u957f\u5ea6\u5219\u81ea\u52a8\u622a\u65ad\uff08\u4e0d\u62a5\u9519\uff09 text text\u6570\u636e\u7c7b\u578b\u7528\u4e8e\u4fdd\u5b58\u53d8\u957f\u7684\u5927\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u7ec4\u591a\u523065535 (2**16 \u2212 1)\u4e2a\u5b57\u7b26 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u957f\u6587\u672c\u4f1a\u7528text\u7c7b\u578b\u3002\u4f8b\u5982\uff1a\u6587\u7ae0\u3001\u65b0\u95fb\u7b49 mediumtext A TEXT column with a maximum length of 16,777,215 (2**24 \u2212 1) characters longtext A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 \u2212 1) datetime YYYY-MM-DD HH:MM:SS\uff081000-01-01 00:00:00/9999-12-31 23:59:59\uff09 \u63d2\u5165\u6570\u636e\u65f6,\u6b64\u5b57\u6bb5\u503c\u53ef\u8bbe\u7f6e\u4e3aNOW(); timestamp YYYY-MM-DD HH:MM:SS\uff081970-01-01 00:00:00/2037\u5e74\uff09 \u5bf9\u4e8eTIMESTAMP\uff0c\u5b83\u628a\u5ba2\u6237\u7aef\u63d2\u5165\u7684\u65f6\u95f4\u4ece\u5f53\u524d\u65f6\u533a\u8f6c\u5316\u4e3aUTC\uff08\u4e16\u754c\u6807\u51c6\u65f6\u95f4\uff09\u8fdb\u884c\u5b58\u50a8 \u67e5\u8be2\u65f6\uff0c\u5c06\u5176\u53c8\u8f6c\u5316\u4e3a\u5ba2\u6237\u7aef\u5f53\u524d\u65f6\u533a\u8fdb\u884c\u8fd4\u56de \u5bf9\u4e8eDATETIME\uff0c\u4e0d\u505a\u4efb\u4f55\u6539\u53d8\uff0c\u539f\u6837\u8f93\u5165\u548c\u8f93\u51fa date YYYY-MM-DD\uff081000-01-01/9999-12-31\uff09 time HH:MM:SS\uff08'-838:59:59'/'838:59:59'\uff09 mysql > create table L5 ( -> id int not null primary key auto_increment , -> dt datetime , -> tt timestamp -> ) default charset = utf8 ; Query OK , 0 rows affected ( 0 . 03 sec ) mysql > insert into L5 ( dt , tt ) values ( \"2025-11-11 11:11:44\" , \"2025-11-11 11:11:44\" ); mysql > select * from L5 ; + ----+---------------------+---------------------+ | id | dt | tt | + ----+---------------------+---------------------+ | 1 | 2025 - 11 - 11 11 : 11 : 44 | 2025 - 11 - 11 11 : 11 : 44 | + ----+---------------------+---------------------+ 1 row in set ( 0 . 00 sec ) mysql > show variables like '%time_zone%' ; + ------------------+--------+ | Variable_name | Value | + ------------------+--------+ | system_time_zone | CST | | time_zone | SYSTEM | + ------------------+--------+ 2 rows in set ( 0 . 00 sec ) -- \u201cCST\u201d\u6307\u7684\u662fMySQL\u6240\u5728\u4e3b\u673a\u7684\u7cfb\u7edf\u65f6\u95f4\uff0c\u662f\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4\u7684\u7f29\u5199\uff0cChina Standard Time UT+8:00 mysql > set time_zone = '+0:00' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > show variables like '%time_zone%' ; + ------------------+--------+ | Variable_name | Value | + ------------------+--------+ | system_time_zone | CST | | time_zone | + 00 : 00 | + ------------------+--------+ 2 rows in set ( 0 . 01 sec ) mysql > select * from L5 ; + ----+---------------------+---------------------+ | id | dt | tt | + ----+---------------------+---------------------+ | 1 | 2025 - 11 - 11 11 : 11 : 44 | 2025 - 11 - 11 03 : 11 : 44 | + ----+---------------------+---------------------+ 1 row in set ( 0 . 00 sec )","title":"\u5b57\u6bb5\u7684\u7ea6\u675f\u548c\u7c7b\u578b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/3_table_field/#_1","text":"create table tb5 ( id int not null auto_increment primary key , -- \u4e0d\u5141\u8bb8\u4e3a\u7a7a & \u4e3b\u952e & \u81ea\u589e name varchar ( 16 ) not null , -- \u4e0d\u5141\u8bb8\u4e3a\u7a7a email varchar ( 32 ) null , -- \u5141\u8bb8\u4e3a\u7a7a\uff08\u9ed8\u8ba4\uff09 age int default 3 -- \u63d2\u5165\u6570\u636e\u65f6\uff0c\u5982\u679c\u4e0d\u7ed9age\u5217\u8bbe\u7f6e\u503c\uff0c\u9ed8\u8ba4\u503c\uff1a3 ) default charset = utf8 ; \u4e3b\u952e\u4e00\u822c\u7528\u4e8e\u8868\u793a\u5f53\u524d\u8fd9\u6761\u6570\u636e\u7684 ID\u7f16\u53f7 \uff08\u7c7b\u4f3c\u4e8e\u4eba\u7684\u8eab\u4efd\u8bc1\uff09\uff0c\u9700\u8981\u6211\u4eec\u81ea\u5df1\u6765\u7ef4\u62a4\u4e00\u4e2a\u4e0d\u91cd\u590d\u7684\u503c\uff0c\u6bd4\u8f83\u7e41\u7410\u3002\u6240\u4ee5\uff0c\u5728\u6570\u636e\u5e93\u4e2d\u4e00\u822c\u4f1a\u5c06\u4e3b\u952e\u548c\u81ea\u589e\u7ed3\u5408\u3002 \u6ce8\u610f\uff1a\u4e00\u4e2a\u8868\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2a\u81ea\u589e\u5217\u3010\u81ea\u589e\u5217\uff0c\u4e00\u822c\u90fd\u662f\u4e3b\u952e\u3011 MySQL\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f8b\u5982\uff1a set\u3001enum\u3001TinyBlob\u3001Blob\u3001MediumBlob\u3001LongBlob \u7b49 \uff0c\u8be6\u7ec6\u89c1\u5b98\u65b9\u6587\u6863\uff1a https://dev.mysql.com/doc/refman/5.7/en/data-types.html","title":"\u7ea6\u675f"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/3_table_field/#_2","text":"int[(m)][unsigned][zerofill] int \u8868\u793a\u6709\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a-2147483648 \uff5e 2147483647 int unsigned \u8868\u793a\u65e0\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a0 \uff5e 4294967295 int(5) zerofill \u4ec5\u7528\u4e8e\u663e\u793a\uff0c\u5f53\u4e0d\u6ee1\u8db35\u4f4d\u65f6\uff0c\u6309\u7167\u5de6\u8fb9\u88650\uff0c\u4f8b\u5982\uff1a00002\uff1b\u6ee1\u8db3\u65f6\uff0c\u6b63\u5e38\u663e\u793a tinyint[(m)] [unsigned] [zerofill] \u5927\u5c0f\uff0c1\u5b57\u8282 8\u4e2a\u4e8c\u8fdb\u5236\u4f4d 2^8=256 \u6709\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a-128 \uff5e 127. \u65e0\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a0 \uff5e 255 bigint[(m)][unsigned][zerofill] \u6709\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a-9223372036854775808 \uff5e 9223372036854775807 \u65e0\u7b26\u53f7\uff0c\u53d6\u503c\u8303\u56f4\uff1a0 \uff5e 18446744073709551615 decimal[(m[,d])] [unsigned] [zerofill] \u51c6\u786e\u7684\u5c0f\u6570\u503c\uff0cm\u662f\u6570\u5b57\u603b\u4e2a\u6570\uff08\u8d1f\u53f7\u4e0d\u7b97\uff09\uff0cd\u662f\u5c0f\u6570\u70b9\u540e\u4e2a\u6570\u3002 m\u6700\u5927\u503c\u4e3a65\uff0cd\u6700\u5927\u503c\u4e3a30 eg: decimal(8,2) 5.289-->5.29 5.282-->5.28 5121321.283-->ERROR char(m) \u5b9a\u957f\u5b57\u7b26\u4e32\uff0cm\u4ee3\u8868\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u6700\u591a\u53ef\u5bb9\u7eb3255\u4e2a\u5b57\u7b26\u3002 \u5b9a\u957f\u7684\u4f53\u73b0\uff1a\u5373\u4f7f\u5185\u5bb9\u957f\u5ea6\u5c0f\u4e8em\uff0c\u4e5f\u4f1a\u5360\u7528m\u957f\u5ea6\u3002\u4f8b\u5982\uff1achar(5)\uff0c\u6570\u636e\u662f\uff1ayes\uff0c\u5e95\u5c42\u4e5f\u4f1a\u5360\u75285\u4e2a\u5b57\u7b26\uff1b \u5982\u679c\u8d85\u51fam\u957f\u5ea6\u9650\u5236\uff08\u9ed8\u8ba4MySQL\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\uff09\u3002 \u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\uff0c sql-mode=\"NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\" \u4fdd\u5b58\u5e76\u91cd\u542f\uff0c\u6b64\u65f6MySQL\u5219\u662f\u975e\u4e25\u683c\u6a21\u5f0f\uff0c\u6b64\u65f6\u8d85\u8fc7\u957f\u5ea6\u5219\u81ea\u52a8\u622a\u65ad\uff08\u4e0d\u62a5\u9519\uff09\u3002\u3002 \u6ce8\u610f\uff1a\u9ed8\u8ba4\u5e95\u5c42\u5b58\u50a8\u662f\u56fa\u5b9a\u7684\u957f\u5ea6\uff08\u4e0d\u591f\u5219\u7528\u7a7a\u683c\u8865\u9f50\uff09\uff0c\u4f46\u662f\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u4f1a\u81ea\u52a8\u5c06\u7a7a\u767d\u53bb\u9664\u3002 \u5982\u679c\u60f3\u8981\u4fdd\u7559\u7a7a\u767d\uff0c\u5728sql-mode\u4e2d\u52a0\u5165 PAD_CHAR_TO_FULL_LENGTH \u5373\u53ef\u3002 \u67e5\u770b\u6a21\u5f0fsql-mode\uff0c\u6267\u884c\u547d\u4ee4\uff1ashow variables like 'sql_mode'; \u4e00\u822c\u9002\u7528\u4e8e\uff1a\u56fa\u5b9a\u957f\u5ea6\u7684\u5185\u5bb9\u3002 \u8bbe\u7f6e\u56de\u4e25\u683c\u6a21\u5f0f\uff1aset global sql_mode='STRICT_TRANS_TABLES' varchar(m) \u53d8\u957f\u5b57\u7b26\u4e32\uff0cm\u4ee3\u8868\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u6700\u591a\u53ef\u5bb9\u7eb365535\u4e2a\u5b57\u7b26\u3002 \u53d8\u957f\u7684\u4f53\u73b0\uff1a\u5185\u5bb9\u5c0f\u4e8em\u65f6\uff0c\u4f1a\u6309\u7167\u771f\u5b9e\u6570\u636e\u957f\u5ea6\u5b58\u50a8\uff1b\u5982\u679c\u8d85\u51fam\u957f\u5ea6\u9650\u5236\uff08\u9ed8\u8ba4MySQL\u662f\u4e25\u683c\u6a21\u5f0f,\u6240\u4ee5\u62a5\u9519\uff09\u3002 \u5982\u679c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\uff0c sql-mode=\"NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\" \u4fdd\u5b58\u5e76\u91cd\u542f\uff0c\u6b64\u65f6MySQL\u5219\u662f\u975e\u4e25\u683c\u6a21\u5f0f\uff0c\u6b64\u65f6\u8d85\u8fc7\u957f\u5ea6\u5219\u81ea\u52a8\u622a\u65ad\uff08\u4e0d\u62a5\u9519\uff09 text text\u6570\u636e\u7c7b\u578b\u7528\u4e8e\u4fdd\u5b58\u53d8\u957f\u7684\u5927\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u7ec4\u591a\u523065535 (2**16 \u2212 1)\u4e2a\u5b57\u7b26 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u957f\u6587\u672c\u4f1a\u7528text\u7c7b\u578b\u3002\u4f8b\u5982\uff1a\u6587\u7ae0\u3001\u65b0\u95fb\u7b49 mediumtext A TEXT column with a maximum length of 16,777,215 (2**24 \u2212 1) characters longtext A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 \u2212 1) datetime YYYY-MM-DD HH:MM:SS\uff081000-01-01 00:00:00/9999-12-31 23:59:59\uff09 \u63d2\u5165\u6570\u636e\u65f6,\u6b64\u5b57\u6bb5\u503c\u53ef\u8bbe\u7f6e\u4e3aNOW(); timestamp YYYY-MM-DD HH:MM:SS\uff081970-01-01 00:00:00/2037\u5e74\uff09 \u5bf9\u4e8eTIMESTAMP\uff0c\u5b83\u628a\u5ba2\u6237\u7aef\u63d2\u5165\u7684\u65f6\u95f4\u4ece\u5f53\u524d\u65f6\u533a\u8f6c\u5316\u4e3aUTC\uff08\u4e16\u754c\u6807\u51c6\u65f6\u95f4\uff09\u8fdb\u884c\u5b58\u50a8 \u67e5\u8be2\u65f6\uff0c\u5c06\u5176\u53c8\u8f6c\u5316\u4e3a\u5ba2\u6237\u7aef\u5f53\u524d\u65f6\u533a\u8fdb\u884c\u8fd4\u56de \u5bf9\u4e8eDATETIME\uff0c\u4e0d\u505a\u4efb\u4f55\u6539\u53d8\uff0c\u539f\u6837\u8f93\u5165\u548c\u8f93\u51fa date YYYY-MM-DD\uff081000-01-01/9999-12-31\uff09 time HH:MM:SS\uff08'-838:59:59'/'838:59:59'\uff09 mysql > create table L5 ( -> id int not null primary key auto_increment , -> dt datetime , -> tt timestamp -> ) default charset = utf8 ; Query OK , 0 rows affected ( 0 . 03 sec ) mysql > insert into L5 ( dt , tt ) values ( \"2025-11-11 11:11:44\" , \"2025-11-11 11:11:44\" ); mysql > select * from L5 ; + ----+---------------------+---------------------+ | id | dt | tt | + ----+---------------------+---------------------+ | 1 | 2025 - 11 - 11 11 : 11 : 44 | 2025 - 11 - 11 11 : 11 : 44 | + ----+---------------------+---------------------+ 1 row in set ( 0 . 00 sec ) mysql > show variables like '%time_zone%' ; + ------------------+--------+ | Variable_name | Value | + ------------------+--------+ | system_time_zone | CST | | time_zone | SYSTEM | + ------------------+--------+ 2 rows in set ( 0 . 00 sec ) -- \u201cCST\u201d\u6307\u7684\u662fMySQL\u6240\u5728\u4e3b\u673a\u7684\u7cfb\u7edf\u65f6\u95f4\uff0c\u662f\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4\u7684\u7f29\u5199\uff0cChina Standard Time UT+8:00 mysql > set time_zone = '+0:00' ; Query OK , 0 rows affected ( 0 . 00 sec ) mysql > show variables like '%time_zone%' ; + ------------------+--------+ | Variable_name | Value | + ------------------+--------+ | system_time_zone | CST | | time_zone | + 00 : 00 | + ------------------+--------+ 2 rows in set ( 0 . 01 sec ) mysql > select * from L5 ; + ----+---------------------+---------------------+ | id | dt | tt | + ----+---------------------+---------------------+ | 1 | 2025 - 11 - 11 11 : 11 : 44 | 2025 - 11 - 11 03 : 11 : 44 | + ----+---------------------+---------------------+ 1 row in set ( 0 . 00 sec )","title":"\u7c7b\u578b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/","text":"foreign key(table_field) references table_name(table_field) \u5916\u952e\u5173\u8054\u7684\u53e6\u4e00\u5f20\u8868\u7684\u5b57\u6bb5\u5fc5\u987b\u552f\u4e00 \u901a\u5e38\u4e00\u5f20\u8868\u7684\u5916\u952e\u662f\u5173\u8054\u53e6\u4e00\u5f20\u8868\u7684\u4e3b\u952eid, \u8981\u6c42\u5916\u952e\u4e0e\u4e3b\u952e\u6570\u636e\u7c7b\u578b\u4e00\u81f4,\u5e76\u4fdd\u8bc1\u5916\u952e\u7684\u503c\u5fc5\u987b\u662f\u4e3b\u952e\u4e2d\u5df2\u5b58\u5728\u7684\u503c \u91cd\u8981\uff01\uff01\uff01\u5728\u6709\u4e89\u8bae\u7684\u5730\u65b9 -_- \u80fd\u7528\u591a\u5bf9\u591a\u5c31\u5c3d\u91cf\u4e0d\u7528\u591a\u5bf9\u4e00 (\u4e2d\u95f4\u8868\u5f88\u5168\u80fd \u80fd\u8868\u8fbe\u591a\u5bf9\u4e00\u548c\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb), \u80fd\u7528\u591a\u5bf9\u4e00\u5c31\u5c3d\u91cf\u4e0d\u7528\u4e00\u5bf9\u4e00 (\u4e00\u5bf9\u4e00\u4e5f\u5c31\u662f\u5728\u591a\u5bf9\u4e00\u7684\u57fa\u7840\u4e0a\u52a0\u4e2aunique) n:n > n:1> 1:1 \u80fd\u6539\u4f46\u662f\u9ebb\u70e6(\u67e5\u8be2\u6570\u636e\u7684\u4ee3\u7801\u4e5f\u8981\u8ddf\u7740\u6539) \u8981\u7559\u6709\u4f59\u5730\uff01\uff01\uff01 \u5185\u5fc3os: \u5e72\u8106\u5c31\u4e0d\u52a0\u5916\u952e\u7ea6\u675f\u561b \u53c8\u4e0d\u5f71\u54cd\u591a\u8868\u67e5\u8be2\u5565\u7684... \u4f46\u52a0\u5916\u952e\u786e\u5b9e\u5e26\u6765\u4e86\u5f88\u591a\u65b9\u4fbf,\u7ea7\u8054\u5220\u9664\u66f4\u65b0\u554a \u6dfb\u52a0\u65f6\u5916\u952e\u7ea6\u675f\u5fc5\u987b\u662f\u4e3b\u952e\u6709\u7684\u503c \u5c31\u662f\u8fd9\u73a9\u610f\u513f\u5f3a\u8026\u5408 \u8868\u6709\u5148\u540e\u987a\u5e8f \u256e(\u256f\u25bd\u2570)\u256d \u5982\u4f55\u627e\u51fa\u4e24\u8868\u7684\u5173\u7cfb\uff1f! \u00b6 \u601d\u8003: emp & dep \u5148\u5c06\u4e13\u95e8\u7684\u6570\u636e\u653e\u5230\u4e13\u95e8\u7684\u8868\u91cc. step1: \u5de6\u8868\u7684\u591a\u6761\u8bb0\u5f55\u80fd\u5426\u5bf9\u5e94\u53f3\u8868\u7684\u4e00\u6761\u8bb0\u5f55 \u591a\u540d\u5458\u5de5\u80fd\u5426 \u5c5e\u4e8e \u4e00\u4e2a\u90e8\u95e8\uff1f\u82e5\u6210\u7acb emp:dep = n:1 step2: \u53f3\u8868\u7684\u591a\u6761\u8bb0\u5f55\u80fd\u5426\u5bf9\u5e94\u5de6\u8868\u7684\u4e00\u6761\u8bb0\u5f55 \u591a\u4e2a\u90e8\u95e8\u80fd\u5426 \u6307\u5411 \u4e00\u4e2a\u5458\u5de5\uff1f\u82e5\u6210\u7acb dep:emp = n:1 \u82e5\u53ea\u6709step1\u6210\u7acb, \u5de6\u8868(\u591a\u7684\u90a3\u65b9)\u5efa\u7acb\u5916\u952e\u5173\u7cfb \u82e5\u53ea\u6709step2\u6210\u7acb, \u53f3\u8868(\u591a\u7684\u90a3\u65b9)\u5efa\u7acb\u5916\u952e\u5173\u7cfb \u82e5step1\u548cstep2\u540c\u65f6\u6210\u7acb, \u53cc\u5411\u591a\u5bf9\u4e00\u5173\u7cfb\u5c31\u662f\u591a\u5bf9\u591a\u7684\u5173\u7cfb.\u9700\u8981\u7b2c\u4e09\u5f20\u8868. \u82e5step1\u548cstep2\u90fd\u4e0d\u6210\u7acb,\u90a3\u5c31\u662f1\u5bf91\u7684\u5173\u7cfb \u5458\u5de5\u4fe1\u606f\u8868 id name age department comment 1 Egon 18 IT \u641e\u6280\u672f 2 tom 19 sale \u9500\u552e 3 lili 28 sale \u9500\u552e 4 jack 38 IT \u641e\u6280\u672f 5 lxx 78 HR \u62db\u8058 [ \u5206\u6790 ] \u82e5\u50cf\u4e0a\u65b9\u8fd9\u6837\u8bbe\u8ba1,\u5c06\u6240\u6709\u7684\u6570\u636e\u653e\u5230\u4e00\u5f20\u8868\u4e2d,\u6709\u51e0\u5927\u5f0a\u7aef. <1> \u91cd\u590d: Egon\u548cjack\u7684\u90e8\u95e8\u548c\u63cf\u8ff0\u4fe1\u606f\u662f\u91cd\u590d\u7684,\u5360\u7a7a\u95f4\u4f1a\u5bfc\u81f4\u67e5\u8be2\u6548\u7387\u964d\u4f4e. <2> \u6269\u5c55\u6027\u5dee: \u4fee\u6539IT\u90e8\u95e8\u7684\u63cf\u8ff0\u4fe1\u606f \u7275\u4e00\u53d1\u800c\u52a8\u5168\u8eab. \u591a\u5bf9\u4e00\u7684\u5173\u7cfb(\u4e00\u5bf9\u591a) \u00b6 \u591a\u5bf9\u4e00: \u9700\u8981\u4e24\u5f20\u8868\u6765\u5b58\u50a8\u4fe1\u606f, \u4e00\u5f20\u8868\u7684\u4e00\u884c\u6570\u636e\u5173\u8054\u53e6\u4e00\u5f20\u8868\u7684\u591a\u884c\u6570\u636e. eg: dep\u90e8\u95e8\u8868\u7684id\u4e0eemp\u5458\u5de5\u8868\u7684dep_id. \u4e00\u4e2a\u90e8\u95e8\u5173\u8054\u591a\u4e2a\u5458\u5de5(\u4e00\u5bf9\u591a);\u4e5f\u53ef\u4ee5\u8bf4\u591a\u4e2a\u5458\u5de5\u5173\u8054\u4e00\u4e2a\u90e8\u95e8(\u591a\u5bf9\u4e00) emp\u5458\u5de5\u8868 id name age dep_id 1 Egon 18 1 2 tom 19 2 3 lili 28 2 4 jack 38 1 5 lxx 78 3 dep\u90e8\u95e8\u8868 id name comment 1 IT \u641e\u6280\u672f 2 sale \u9500\u552e 3 HR \u62db\u8058 \u6ce8\u610f: \u88ab\u5173\u8054\u5b57\u6bb5\u5fc5\u987b\u662f\u552f\u4e00\u7684 \u88ab\u5173\u8054\u5b57\u6bb5\u53ef\u4ee5\u662funique key\u6216\u8005primary key -- \u6709foreign key \u9700\u8981\u5148\u5efa\u7acb\u88ab\u5173\u8054\u8868dep\u8868,\u518d\u521b\u5efa\u5173\u8054\u8868emp\u8868 create table dep ( id int primary key auto_increment , name varchar ( 20 ), comment varchar ( 50 ) ); create table emp ( id int primary key auto_increment , name varchar ( 16 ), age int , dep_id int , -- foreign key(dep_id) \u6807\u8bc6\u4e86dep_id\u4e3a\u8be5\u8868\u7684\u5916\u952e foreign key ( dep_id ) references dep ( id ) on delete cascade -- \u7ea7\u8054\u5220\u9664 dep\u8868\u4e2d\u7684IT\u90e8\u95e8\u6ca1\u4e86 \u90a3\u4e48emp\u8868\u4e2d\u5bf9\u5e94\u7684\u5458\u5de5\u4e5f\u88ab\u5220\u9664\u4e86 on update cascade -- \u7ea7\u8054\u66f4\u65b0 dep\u8868\u4e2d\u7684IT\u90e8\u95e8\u7684id\u53d8\u6210\u4e86111 \u90a3\u4e48emp\u8868\u4e2d\u5bf9\u5e94\u7684dep_id\u4e5f\u4f1a\u53d8\u6210111 ); -- \u6709foreign key \u63d2\u5165\u6570\u636e\u65f6,\u5e94\u8be5\u5148\u5f80dep\u4e2d\u63d2\u5165\u6570\u636e,\u518d\u5f80emp\u4e2d\u63d2\u5165\u6570\u636e insert into dep ( name , comment ) values ( 'IT' , '\u641e\u4e1c\u897f' ), ( 'sale' , '\u9500\u552e' ), ( 'HR' , '\u62db\u8058' ); insert into emp ( name , age , dep_id ) values ( 'Egon' , 18 , 1 ), ( 'tom' , 19 , 2 ), ( 'lili' , 28 , 2 ), ( 'jack' , 38 , 1 ), ( 'lxx' , 78 , 3 ); -- foreign key\u7684\u7ea6\u675f \u63d2\u5165dep\u4e0d\u5b58\u5728\u7684id \u76f4\u63a5\u62a5\u9519 -- insert emp(name,age,dep_id) values('xxx','24',4); -- \u4e24\u8868\u7684\u5173\u8054\u5b57\u6bb5\u81ea\u52a8\u540c\u6b65\u66f4\u65b0 update dep set id = 333 where name = 'HR' ; -- \u7ea7\u8054\u5220\u9664 delete from dep where id = 2 ; select * from dep ; select * from emp ; -- foreign key\u4e5f\u4e0d\u5168\u662f\u597d\u5904,\u5b83\u5c06\u4e24\u5f20\u8868\u5728\u5e95\u5c42\u5f3a\u8026\u5408\u5728\u4e86\u4e00\u8d77,\u5efa\u8868\u5220\u8868\u548c\u63d2\u5165\u6570\u636e\u4f1a\u6709\u5148\u540e,\u88ab\u5173\u8054\u7684dep\u8868\u4f18\u5148\uff01 -- dep\u8868\u4f46\u51e1\u6709\u4e00\u70b9\u98ce\u5439\u8349\u52a8\u90fd\u4f1a\u5f71\u54cd\u4e0e\u5b83\u5173\u8054\u7684emp\u8868.(\u5982\u679c\u4e3b\u8868\u4fee\u6539\u6216\u8005\u5220\u9664\u6570\u636e, \u4ece\u8868\u4f1a\u8ddf\u7740\u4e00\u8d77\u53d7\u5f71\u54cd) -- \u6709\u65f6\u5019,\u4e0d\u4f1a\u4f7f\u7528foreign key,\u53ea\u662f\u4ece\u903b\u8f91\u5c42\u9762\u5efa\u7acb\u597d\u4e24\u8868\u7684\u5173\u7cfb,\u63d0\u9ad8\u6269\u5c55\u6027\uff01 \u5982\u679c\u8868\u7ed3\u6784\u5df2\u521b\u5efa\u597d\u4e86, \u989d\u5916\u60f3\u8981\u589e\u52a0\u5916\u952e\uff1a alter table emp add constraint fk_emp_dep foreign key ( dep_id ) references dep ( id ) on delete cascade on update cascade ; \u5220\u9664\u5916\u952e\uff1a alter table emp drop foreign key fk_emp_dep ; \u00b6 \u591a\u5bf9\u591a\u7684\u5173\u7cfb \u00b6 \u591a\u5bf9\u591a: \u9700\u8981\u4e09\u5f20\u8868\u6765\u5b58\u50a8\u4fe1\u606f\uff0c\u4e24\u5f20\u5355\u8868 + \u5173\u7cfb\u8868 A\u8868\u7684\u4e00\u884c\u6570\u636e\u5173\u8054B\u8868\u7684\u591a\u884c\u6570\u636e,B\u8868\u7684\u4e00\u884c\u6570\u636e\u4e5f\u53ef\u4ee5\u5173\u8054A\u8868\u7684\u591a\u884c\u6570\u636e \u591a\u4e2a\u4f5c\u8005\u51fa\u7248\u540c\u4e00\u672c\u4e66 \u591a\u672c\u4e66\u6307\u5411\u540c\u4e00\u4e2a\u4f5c\u8005. _ author\u8868\u589e\u52a0\u5916\u952e\u5b57\u6bb5book_id; book\u8868\u65b0\u589e\u5916\u952e\u5b57\u6bb5author_id; \u90a3\u95ee\u9898\u6765\u5566, \u8fd9\u53cc\u5411\u7684\u591a\u5bf9\u4e00 \u5efa\u8868\u8c01\u5148\u8c01\u540e\u5462\uff1f\u77db\u76fe\u4e86\uff01\u9700\u8981\u4e13\u95e8\u7528\u4e00\u5f20\u8868\u6765\u653e\u4e24\u5f20\u8868\u7684\u5173\u8054\u5173\u7cfb\uff01 \u6269\u5c55\u5e94\u7528\u573a\u666f:(\u5355\u8868) \u7528\u6237\u8868 + \u76f8\u4eb2\u5173\u7cfb\u8868 + \u7528\u6237\u8868 author\u8868 id name 1 egon 2 jason 3 lxx 4 hxx book\u8868 id name 1 \u4e5d\u9633\u795e\u529f 2 \u964d\u9f99\u5341\u516b\u638c 3 \u6613\u7b4b\u7ecf 4 \u4e5d\u9634\u771f\u7ecf 5 \u8475\u82b1\u5b9d\u5178 authorTobook\u8868 \u5c0f\u77e5\u8bc6: \u5173\u8054\u8868\u4e0d\u662f\u8bf4\u53ea\u80fd\u6709\u8868\u4e2d\u7684\u4e09\u4e2a\u5b57\u6bb5\u54e6 \u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u5b9a\u4e49\u5176\u5b83\u5b57\u6bb5\u54e6\uff01 id author_id book_id 1 1 1 2 1 2 3 1 3 4 1 4 5 1 5 6 2 1 7 2 2 -- \u5916\u952e\u540d \u770b\u4e2a\u4eba\u4e60\u60ef\u8bfa:fk_\u5f53\u524d\u8868\u540d\u5b57_\u88ab\u5173\u8054\u8868\u540d\u5b57 constraint fk_info_depart foreign key... create table authorTobook ( id int not null unique auto_increment , author_id int not null , book_id int not null , foreign key ( author_id ) references author ( id ) on delete cascade on update cascade , foreign key ( book_id ) references book ( id ) on delete cascade on update cascade , primary key ( author_id , book_id ) -- \u4e2d\u95f4\u5b58\u653e\u5173\u7cfb\u7684\u8868,\u5bf9\u5916\u5173\u8054\u7684\u5b57\u6bb5\u53ef\u4ee5\u8054\u5408\u552f\u4e00 ); \u5982\u679c\u8868\u7ed3\u6784\u5df2\u521b\u5efa\u597d\u4e86, \u989d\u5916\u60f3\u8981\u589e\u52a0\u5916\u952e: alter table authorTobook add constraint fk_authorTobook_author foreign key ( author_id ) references author ( id ) on delete cascade on update cascade ; alter table authorTobook add constraint fk_authorTobook_book foreign key ( book_id ) references book ( id ) on delete cascade on update cascade , \u5220\u9664\u5916\u952e: alter table authorTobook drop foreign key fk_authorTobook_author ; alter table authorTobook drop foreign key fk_authorTobook_book ; \u4e00\u5bf9\u4e00\u7684\u5173\u7cfb \u00b6 student & customer \u6bcf\u4e00\u4e2a\u5b66\u751f\u90fd\u6709\u53ef\u80fd\u6210\u4e3a\u9500\u552e\u7684\u5ba2\u6237(\u6210\u529f\u88ab\u5ffd\u60a0\u8d2d\u4e70\u5546\u54c1). \u6bcf\u6210\u529f\u5ffd\u60a0\u4e00\u4e2a\u5b66\u751f\u5c31\u5f80\u5ba2\u6237\u8868\u6dfb\u52a0\u8fd9\u4e2a\u5b66\u751f\u7684\u4fe1\u606f. \u82e5student\u8868\u8bbe\u7f6ecustomer_id\u5b57\u6bb5,\u88ab\u5173\u8054\u8868customer\u8868(\u5ba2\u6237\u8868)\u5c31\u5e94\u8be5\u5148\u521b\u5efa,\u5148\u5f80\u91cc\u9762\u63d2\u5165\u6570\u636e.\u4e0d\u7b26\u5408\u6211\u4eec\u524d\u9762\u9610\u8ff0\u7684\u903b\u8f91. \u6240\u4ee5\u5e94\u8be5\u5728customer\u8868\u4e2d\u6dfb\u52a0student_id\u5b57\u6bb5. foreign key\u672c\u8eab\u8868\u8fbe\u7684\u662f\u591a\u5bf9\u4e00\u7684\u5173\u7cfb. \u7406\u8bba\u4e0a\u88ab\u6807\u8bc6\u7684\u5916\u952e\u5b57\u6bb5\u7684\u503c\u662f\u53ef\u4ee5\u91cd\u590d\u7684\uff01(\u591a\u5bf9\u591a\u7684\u60c5\u51b5\u4e0b\u4e0d\u6210\u7acb) \u82e5\u7ed9\u8be5\u5916\u952e\u5b57\u6bb5unique\u7684\u7ea6\u675f,\u90a3\u5c31\u662f\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb\u5566\uff01\u6bd4\u5982: id\u4e3a4\u548c9\u7684\u5b66\u751f\u5bf9\u5e94id\u4e3a1\u548c2\u7684\u5ba2\u6237. -- \u5b66\u751f\u8868 create table student ( id int primary key auto_increment , name varchar ( 20 ) not null , qq varchar ( 10 ) not null , phone char ( 16 ) not null , ); -- \u5ba2\u6237\u8868 create table customer ( id int primary key auto_increment , student_id int unique , -- \u8be5\u5b57\u6bb5\u4e00\u5b9a\u8981\u662f\u552f\u4e00\u7684 foreign key ( student_id ) references student ( id ) -- \u4e00\u5bf9\u4e00\u7684\u5916\u952e\u5b57\u6bb5student_id\u4e00\u5b9a\u8981\u4fdd\u8bc1unique on delete cascade on update cascade ); \u5176\u5b83\u5e94\u7528\u573a\u666f\uff1a \u4e00\u4e2a\u7528\u6237\u53ea\u6709\u4e00\u4e2a\u535a\u5ba2. blog\u8868\u6dfb\u52a0\u5916\u952e\u5b57\u6bb5user_id. \u4e00\u4e2a\u7ba1\u7406\u5458\u552f\u4e00\u5bf9\u5e94\u4e00\u4e2a\u7528\u6237. admin\u8868\u6dfb\u52a0\u5916\u952e\u5b57\u6bb5user_id.","title":"\u8868\u5173\u7cfb"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/#_1","text":"\u601d\u8003: emp & dep \u5148\u5c06\u4e13\u95e8\u7684\u6570\u636e\u653e\u5230\u4e13\u95e8\u7684\u8868\u91cc. step1: \u5de6\u8868\u7684\u591a\u6761\u8bb0\u5f55\u80fd\u5426\u5bf9\u5e94\u53f3\u8868\u7684\u4e00\u6761\u8bb0\u5f55 \u591a\u540d\u5458\u5de5\u80fd\u5426 \u5c5e\u4e8e \u4e00\u4e2a\u90e8\u95e8\uff1f\u82e5\u6210\u7acb emp:dep = n:1 step2: \u53f3\u8868\u7684\u591a\u6761\u8bb0\u5f55\u80fd\u5426\u5bf9\u5e94\u5de6\u8868\u7684\u4e00\u6761\u8bb0\u5f55 \u591a\u4e2a\u90e8\u95e8\u80fd\u5426 \u6307\u5411 \u4e00\u4e2a\u5458\u5de5\uff1f\u82e5\u6210\u7acb dep:emp = n:1 \u82e5\u53ea\u6709step1\u6210\u7acb, \u5de6\u8868(\u591a\u7684\u90a3\u65b9)\u5efa\u7acb\u5916\u952e\u5173\u7cfb \u82e5\u53ea\u6709step2\u6210\u7acb, \u53f3\u8868(\u591a\u7684\u90a3\u65b9)\u5efa\u7acb\u5916\u952e\u5173\u7cfb \u82e5step1\u548cstep2\u540c\u65f6\u6210\u7acb, \u53cc\u5411\u591a\u5bf9\u4e00\u5173\u7cfb\u5c31\u662f\u591a\u5bf9\u591a\u7684\u5173\u7cfb.\u9700\u8981\u7b2c\u4e09\u5f20\u8868. \u82e5step1\u548cstep2\u90fd\u4e0d\u6210\u7acb,\u90a3\u5c31\u662f1\u5bf91\u7684\u5173\u7cfb \u5458\u5de5\u4fe1\u606f\u8868 id name age department comment 1 Egon 18 IT \u641e\u6280\u672f 2 tom 19 sale \u9500\u552e 3 lili 28 sale \u9500\u552e 4 jack 38 IT \u641e\u6280\u672f 5 lxx 78 HR \u62db\u8058 [ \u5206\u6790 ] \u82e5\u50cf\u4e0a\u65b9\u8fd9\u6837\u8bbe\u8ba1,\u5c06\u6240\u6709\u7684\u6570\u636e\u653e\u5230\u4e00\u5f20\u8868\u4e2d,\u6709\u51e0\u5927\u5f0a\u7aef. <1> \u91cd\u590d: Egon\u548cjack\u7684\u90e8\u95e8\u548c\u63cf\u8ff0\u4fe1\u606f\u662f\u91cd\u590d\u7684,\u5360\u7a7a\u95f4\u4f1a\u5bfc\u81f4\u67e5\u8be2\u6548\u7387\u964d\u4f4e. <2> \u6269\u5c55\u6027\u5dee: \u4fee\u6539IT\u90e8\u95e8\u7684\u63cf\u8ff0\u4fe1\u606f \u7275\u4e00\u53d1\u800c\u52a8\u5168\u8eab.","title":"\u5982\u4f55\u627e\u51fa\u4e24\u8868\u7684\u5173\u7cfb\uff1f!"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/#_2","text":"\u591a\u5bf9\u4e00: \u9700\u8981\u4e24\u5f20\u8868\u6765\u5b58\u50a8\u4fe1\u606f, \u4e00\u5f20\u8868\u7684\u4e00\u884c\u6570\u636e\u5173\u8054\u53e6\u4e00\u5f20\u8868\u7684\u591a\u884c\u6570\u636e. eg: dep\u90e8\u95e8\u8868\u7684id\u4e0eemp\u5458\u5de5\u8868\u7684dep_id. \u4e00\u4e2a\u90e8\u95e8\u5173\u8054\u591a\u4e2a\u5458\u5de5(\u4e00\u5bf9\u591a);\u4e5f\u53ef\u4ee5\u8bf4\u591a\u4e2a\u5458\u5de5\u5173\u8054\u4e00\u4e2a\u90e8\u95e8(\u591a\u5bf9\u4e00) emp\u5458\u5de5\u8868 id name age dep_id 1 Egon 18 1 2 tom 19 2 3 lili 28 2 4 jack 38 1 5 lxx 78 3 dep\u90e8\u95e8\u8868 id name comment 1 IT \u641e\u6280\u672f 2 sale \u9500\u552e 3 HR \u62db\u8058 \u6ce8\u610f: \u88ab\u5173\u8054\u5b57\u6bb5\u5fc5\u987b\u662f\u552f\u4e00\u7684 \u88ab\u5173\u8054\u5b57\u6bb5\u53ef\u4ee5\u662funique key\u6216\u8005primary key -- \u6709foreign key \u9700\u8981\u5148\u5efa\u7acb\u88ab\u5173\u8054\u8868dep\u8868,\u518d\u521b\u5efa\u5173\u8054\u8868emp\u8868 create table dep ( id int primary key auto_increment , name varchar ( 20 ), comment varchar ( 50 ) ); create table emp ( id int primary key auto_increment , name varchar ( 16 ), age int , dep_id int , -- foreign key(dep_id) \u6807\u8bc6\u4e86dep_id\u4e3a\u8be5\u8868\u7684\u5916\u952e foreign key ( dep_id ) references dep ( id ) on delete cascade -- \u7ea7\u8054\u5220\u9664 dep\u8868\u4e2d\u7684IT\u90e8\u95e8\u6ca1\u4e86 \u90a3\u4e48emp\u8868\u4e2d\u5bf9\u5e94\u7684\u5458\u5de5\u4e5f\u88ab\u5220\u9664\u4e86 on update cascade -- \u7ea7\u8054\u66f4\u65b0 dep\u8868\u4e2d\u7684IT\u90e8\u95e8\u7684id\u53d8\u6210\u4e86111 \u90a3\u4e48emp\u8868\u4e2d\u5bf9\u5e94\u7684dep_id\u4e5f\u4f1a\u53d8\u6210111 ); -- \u6709foreign key \u63d2\u5165\u6570\u636e\u65f6,\u5e94\u8be5\u5148\u5f80dep\u4e2d\u63d2\u5165\u6570\u636e,\u518d\u5f80emp\u4e2d\u63d2\u5165\u6570\u636e insert into dep ( name , comment ) values ( 'IT' , '\u641e\u4e1c\u897f' ), ( 'sale' , '\u9500\u552e' ), ( 'HR' , '\u62db\u8058' ); insert into emp ( name , age , dep_id ) values ( 'Egon' , 18 , 1 ), ( 'tom' , 19 , 2 ), ( 'lili' , 28 , 2 ), ( 'jack' , 38 , 1 ), ( 'lxx' , 78 , 3 ); -- foreign key\u7684\u7ea6\u675f \u63d2\u5165dep\u4e0d\u5b58\u5728\u7684id \u76f4\u63a5\u62a5\u9519 -- insert emp(name,age,dep_id) values('xxx','24',4); -- \u4e24\u8868\u7684\u5173\u8054\u5b57\u6bb5\u81ea\u52a8\u540c\u6b65\u66f4\u65b0 update dep set id = 333 where name = 'HR' ; -- \u7ea7\u8054\u5220\u9664 delete from dep where id = 2 ; select * from dep ; select * from emp ; -- foreign key\u4e5f\u4e0d\u5168\u662f\u597d\u5904,\u5b83\u5c06\u4e24\u5f20\u8868\u5728\u5e95\u5c42\u5f3a\u8026\u5408\u5728\u4e86\u4e00\u8d77,\u5efa\u8868\u5220\u8868\u548c\u63d2\u5165\u6570\u636e\u4f1a\u6709\u5148\u540e,\u88ab\u5173\u8054\u7684dep\u8868\u4f18\u5148\uff01 -- dep\u8868\u4f46\u51e1\u6709\u4e00\u70b9\u98ce\u5439\u8349\u52a8\u90fd\u4f1a\u5f71\u54cd\u4e0e\u5b83\u5173\u8054\u7684emp\u8868.(\u5982\u679c\u4e3b\u8868\u4fee\u6539\u6216\u8005\u5220\u9664\u6570\u636e, \u4ece\u8868\u4f1a\u8ddf\u7740\u4e00\u8d77\u53d7\u5f71\u54cd) -- \u6709\u65f6\u5019,\u4e0d\u4f1a\u4f7f\u7528foreign key,\u53ea\u662f\u4ece\u903b\u8f91\u5c42\u9762\u5efa\u7acb\u597d\u4e24\u8868\u7684\u5173\u7cfb,\u63d0\u9ad8\u6269\u5c55\u6027\uff01 \u5982\u679c\u8868\u7ed3\u6784\u5df2\u521b\u5efa\u597d\u4e86, \u989d\u5916\u60f3\u8981\u589e\u52a0\u5916\u952e\uff1a alter table emp add constraint fk_emp_dep foreign key ( dep_id ) references dep ( id ) on delete cascade on update cascade ; \u5220\u9664\u5916\u952e\uff1a","title":"\u591a\u5bf9\u4e00\u7684\u5173\u7cfb(\u4e00\u5bf9\u591a)"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/#alter-table-emp-drop-foreign-key-fk_emp_dep","text":"","title":"alter table emp drop foreign key fk_emp_dep;\n"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/#_3","text":"\u591a\u5bf9\u591a: \u9700\u8981\u4e09\u5f20\u8868\u6765\u5b58\u50a8\u4fe1\u606f\uff0c\u4e24\u5f20\u5355\u8868 + \u5173\u7cfb\u8868 A\u8868\u7684\u4e00\u884c\u6570\u636e\u5173\u8054B\u8868\u7684\u591a\u884c\u6570\u636e,B\u8868\u7684\u4e00\u884c\u6570\u636e\u4e5f\u53ef\u4ee5\u5173\u8054A\u8868\u7684\u591a\u884c\u6570\u636e \u591a\u4e2a\u4f5c\u8005\u51fa\u7248\u540c\u4e00\u672c\u4e66 \u591a\u672c\u4e66\u6307\u5411\u540c\u4e00\u4e2a\u4f5c\u8005. _ author\u8868\u589e\u52a0\u5916\u952e\u5b57\u6bb5book_id; book\u8868\u65b0\u589e\u5916\u952e\u5b57\u6bb5author_id; \u90a3\u95ee\u9898\u6765\u5566, \u8fd9\u53cc\u5411\u7684\u591a\u5bf9\u4e00 \u5efa\u8868\u8c01\u5148\u8c01\u540e\u5462\uff1f\u77db\u76fe\u4e86\uff01\u9700\u8981\u4e13\u95e8\u7528\u4e00\u5f20\u8868\u6765\u653e\u4e24\u5f20\u8868\u7684\u5173\u8054\u5173\u7cfb\uff01 \u6269\u5c55\u5e94\u7528\u573a\u666f:(\u5355\u8868) \u7528\u6237\u8868 + \u76f8\u4eb2\u5173\u7cfb\u8868 + \u7528\u6237\u8868 author\u8868 id name 1 egon 2 jason 3 lxx 4 hxx book\u8868 id name 1 \u4e5d\u9633\u795e\u529f 2 \u964d\u9f99\u5341\u516b\u638c 3 \u6613\u7b4b\u7ecf 4 \u4e5d\u9634\u771f\u7ecf 5 \u8475\u82b1\u5b9d\u5178 authorTobook\u8868 \u5c0f\u77e5\u8bc6: \u5173\u8054\u8868\u4e0d\u662f\u8bf4\u53ea\u80fd\u6709\u8868\u4e2d\u7684\u4e09\u4e2a\u5b57\u6bb5\u54e6 \u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u5b9a\u4e49\u5176\u5b83\u5b57\u6bb5\u54e6\uff01 id author_id book_id 1 1 1 2 1 2 3 1 3 4 1 4 5 1 5 6 2 1 7 2 2 -- \u5916\u952e\u540d \u770b\u4e2a\u4eba\u4e60\u60ef\u8bfa:fk_\u5f53\u524d\u8868\u540d\u5b57_\u88ab\u5173\u8054\u8868\u540d\u5b57 constraint fk_info_depart foreign key... create table authorTobook ( id int not null unique auto_increment , author_id int not null , book_id int not null , foreign key ( author_id ) references author ( id ) on delete cascade on update cascade , foreign key ( book_id ) references book ( id ) on delete cascade on update cascade , primary key ( author_id , book_id ) -- \u4e2d\u95f4\u5b58\u653e\u5173\u7cfb\u7684\u8868,\u5bf9\u5916\u5173\u8054\u7684\u5b57\u6bb5\u53ef\u4ee5\u8054\u5408\u552f\u4e00 ); \u5982\u679c\u8868\u7ed3\u6784\u5df2\u521b\u5efa\u597d\u4e86, \u989d\u5916\u60f3\u8981\u589e\u52a0\u5916\u952e: alter table authorTobook add constraint fk_authorTobook_author foreign key ( author_id ) references author ( id ) on delete cascade on update cascade ; alter table authorTobook add constraint fk_authorTobook_book foreign key ( book_id ) references book ( id ) on delete cascade on update cascade , \u5220\u9664\u5916\u952e: alter table authorTobook drop foreign key fk_authorTobook_author ; alter table authorTobook drop foreign key fk_authorTobook_book ;","title":"\u591a\u5bf9\u591a\u7684\u5173\u7cfb"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/4_table_relation/#_4","text":"student & customer \u6bcf\u4e00\u4e2a\u5b66\u751f\u90fd\u6709\u53ef\u80fd\u6210\u4e3a\u9500\u552e\u7684\u5ba2\u6237(\u6210\u529f\u88ab\u5ffd\u60a0\u8d2d\u4e70\u5546\u54c1). \u6bcf\u6210\u529f\u5ffd\u60a0\u4e00\u4e2a\u5b66\u751f\u5c31\u5f80\u5ba2\u6237\u8868\u6dfb\u52a0\u8fd9\u4e2a\u5b66\u751f\u7684\u4fe1\u606f. \u82e5student\u8868\u8bbe\u7f6ecustomer_id\u5b57\u6bb5,\u88ab\u5173\u8054\u8868customer\u8868(\u5ba2\u6237\u8868)\u5c31\u5e94\u8be5\u5148\u521b\u5efa,\u5148\u5f80\u91cc\u9762\u63d2\u5165\u6570\u636e.\u4e0d\u7b26\u5408\u6211\u4eec\u524d\u9762\u9610\u8ff0\u7684\u903b\u8f91. \u6240\u4ee5\u5e94\u8be5\u5728customer\u8868\u4e2d\u6dfb\u52a0student_id\u5b57\u6bb5. foreign key\u672c\u8eab\u8868\u8fbe\u7684\u662f\u591a\u5bf9\u4e00\u7684\u5173\u7cfb. \u7406\u8bba\u4e0a\u88ab\u6807\u8bc6\u7684\u5916\u952e\u5b57\u6bb5\u7684\u503c\u662f\u53ef\u4ee5\u91cd\u590d\u7684\uff01(\u591a\u5bf9\u591a\u7684\u60c5\u51b5\u4e0b\u4e0d\u6210\u7acb) \u82e5\u7ed9\u8be5\u5916\u952e\u5b57\u6bb5unique\u7684\u7ea6\u675f,\u90a3\u5c31\u662f\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb\u5566\uff01\u6bd4\u5982: id\u4e3a4\u548c9\u7684\u5b66\u751f\u5bf9\u5e94id\u4e3a1\u548c2\u7684\u5ba2\u6237. -- \u5b66\u751f\u8868 create table student ( id int primary key auto_increment , name varchar ( 20 ) not null , qq varchar ( 10 ) not null , phone char ( 16 ) not null , ); -- \u5ba2\u6237\u8868 create table customer ( id int primary key auto_increment , student_id int unique , -- \u8be5\u5b57\u6bb5\u4e00\u5b9a\u8981\u662f\u552f\u4e00\u7684 foreign key ( student_id ) references student ( id ) -- \u4e00\u5bf9\u4e00\u7684\u5916\u952e\u5b57\u6bb5student_id\u4e00\u5b9a\u8981\u4fdd\u8bc1unique on delete cascade on update cascade ); \u5176\u5b83\u5e94\u7528\u573a\u666f\uff1a \u4e00\u4e2a\u7528\u6237\u53ea\u6709\u4e00\u4e2a\u535a\u5ba2. blog\u8868\u6dfb\u52a0\u5916\u952e\u5b57\u6bb5user_id. \u4e00\u4e2a\u7ba1\u7406\u5458\u552f\u4e00\u5bf9\u5e94\u4e00\u4e2a\u7528\u6237. admin\u8868\u6dfb\u52a0\u5916\u952e\u5b57\u6bb5user_id.","title":"\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/","text":"\u7528\u6237\u548c\u6743\u9650\u4fe1\u606f\u90fd\u653e\u5728\u8fd9\u5f20 mysql.user\u8868\u5185\uff01 # \u8d26\u6237\u3001\u5bc6\u7801\u3001\u9650\u5236\u8fde\u63a5\u8005\u6240\u5728\u7684 IP\u5730\u5740 select user , authentication_string , host from mysql . user ; \u7528\u6237\u7ba1\u7406 \u00b6 \u521b\u5efa\u548c\u5220\u9664\u7528\u6237 \u00b6 create user '\u7528\u6237\u540d'@'\u8fde\u63a5\u8005\u7684IP\u5730\u5740' identified by '\u5bc6\u7801'; create user egon1 @ 127 . 0 . 0 . 1 identified by 'root123' ; drop user egon1 @ 127 . 0 . 0 . 1 ; # % \u8868\u793a\u53ef\u4ee5\u5339\u914d\u503c \u53ef\u4ee5\u662f 127 . 0 . 0 . 1 \u3001 127 . 0 . 0 . 2 \u3001 127 . 0 . 0 . 3 ... create user egon2 @ '127.0.0.%' identified by 'root123' ; drop user egon2 @ '127.0.0.%' ; # egon3 @ '%' \u8868\u793a\u53ef\u4ee5\u5728\u4efb\u610f\u7684 IP\u5730\u5740\u4e0b\u901a\u8fc7egon3\u8fd9\u4e00\u8d26\u6237\u8fde\u63a5mysql create user egon3 @ '%' identified by 'root123' ; drop user egon3 @ '%' ; # \u5efa\u8bae '\u8d26\u53f7' @ 'IP' \u90fd\u52a0\u4e0a\u5f15\u53f7\uff01 create user 'egon4' @ '%' identified by 'root123' ; drop user 'egon4' @ '%' ; \u4fee\u6539\u7528\u6237\u548cIP \u00b6 rename user '\u7528\u6237\u540d'@'IP\u5730\u5740' to '\u65b0\u7528\u6237\u540d'@'IP\u5730\u5740'; rename user egon1 @ 127 . 0 . 0 . 1 to egon1 @ localhost ; rename user 'egon1' @ '127.0.0.1' to 'egon1' @ 'localhost' ; \u4fee\u6539\u5bc6\u7801 \u00b6 set password for '\u7528\u6237\u540d'@'IP\u5730\u5740' = Password('\u65b0\u5bc6\u7801') set password for 'egon4' @ '%' = Password ( '123123' ); -- \u2605\u4fee\u6539root\u8d26\u6237\u5bc6\u7801: alter user 'root' @ 'localhost' identified by '\u65b0\u5bc6\u7801' ; flush privileges ; \u6388\u6743\u7ba1\u7406 \u00b6 \u6388\u6743 \u00b6 grant \u6743\u9650 on \u6570\u636e\u5e93.\u8868 to '\u7528\u6237'@'IP\u5730\u5740' *\u4ee3\u8868\u6240\u6709\uff01 \u6570\u636e\u5e93\u540d . * \u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709 \u6570\u636e\u5e93\u540d . \u8868\u540d \u6307\u5b9a\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u5f20\u8868 \u6570\u636e\u5e93\u540d . \u5b58\u50a8\u8fc7\u7a0b\u540d \u6307\u5b9a\u6570\u636e\u5e93\u4e2d\u7684\u5b58\u50a8\u8fc7\u7a0b * . * \u6240\u6709\u6570\u636e\u5e93 -- \u7528\u6237egon\u62e5\u6709\u6240\u6709\u6570\u636e\u5e93\u7684\u6240\u6709\u6743\u9650 grant all privileges on * . * TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u7684\u6240\u6709\u6743\u9650 grant all privileges on day26 . * TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u4e2dinfo\u8868\u7684\u6240\u6709\u6743\u9650 -- \u8d26\u53f7'egon'@'localhost'\u5c31\u53ea\u80fd\u67e5\u5230day26\u6570\u636e\u5e93 \u53ea\u80fd\u67e5\u5230info\u8868 grant all privileges on day26 . info TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u4e2dinfo\u8868\u7684\u67e5\u8be2\u6743\u9650 grant select on day26 . info TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u6240\u6709\u8868\u7684\u67e5\u8be2\u548c\u63d2\u5165\u6743\u9650 grant select , insert on day26 . * TO 'egon' @ 'localhost' ; grant all privileges on day26db . * to 'egon4' @ '%' ; \u6ce8\u610f\uff1a flush privileges ; -- \u5c06\u6570\u636e\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u800c\u7acb\u5373\u751f\u6548\u3002 \u6743\u9650 \u00b6 all privileges \u9664 grant\u5916\u7684\u6240\u6709\u6743\u9650 select \u4ec5\u67e5\u6743\u9650 select , insert \u67e5\u548c\u63d2\u5165\u6743\u9650 ... usage \u65e0\u8bbf\u95ee\u6743\u9650 alter \u4f7f\u7528 alter table alter routine \u4f7f\u7528 alter procedure\u548cdrop procedure create \u4f7f\u7528 create table create routine \u4f7f\u7528 create procedure create temporary tables \u4f7f\u7528 create temporary tables create user \u4f7f\u7528 create user \u3001 drop user \u3001 rename user\u548crevoke all privileges create view \u4f7f\u7528 create view delete \u4f7f\u7528 delete drop \u4f7f\u7528 drop table execute \u4f7f\u7528 call\u548c\u5b58\u50a8\u8fc7\u7a0b file \u4f7f\u7528 select into outfile \u548c load data infile grant option \u4f7f\u7528 grant \u548c revoke index \u4f7f\u7528 index insert \u4f7f\u7528 insert lock tables \u4f7f\u7528 lock table process \u4f7f\u7528 show full processlist select \u4f7f\u7528 select show databases \u4f7f\u7528 show databases show view \u4f7f\u7528 show view update \u4f7f\u7528 update reload \u4f7f\u7528 flush shutdown \u4f7f\u7528 mysqladmin shutdown ( \u5173\u95ed MySQL ) super \u4f7f\u7528 change master \u3001 kill \u3001 logs \u3001 purge \u3001 master\u548cset global \u3002 \u8fd8\u5141\u8bb8 mysqladmin\u8c03\u8bd5\u767b\u9646 replication client \u670d\u52a1\u5668\u4f4d\u7f6e\u7684\u8bbf\u95ee replication slave \u7531\u590d\u5236\u4ece\u5c5e\u4f7f\u7528 \u67e5\u770b\u6388\u6743 \u00b6 show grants for '\u7528\u6237'@'IP\u5730\u5740' show grants for 'egon' @ 'localhost' ; show grants for 'egon4' @ '%' ; \u53d6\u6d88\u6388\u6743 \u00b6 revoke \u6743\u9650 on \u6570\u636e\u5e93.\u8868 from '\u7528\u6237'@'IP\u5730\u5740' revoke ALL PRIVILEGES on day26 . * from 'egon' @ 'localhost' ; revoke ALL PRIVILEGES on day26db . * from 'egon4' @ '%' ; \u6ce8\u610f\uff1a flush privileges ; -- \u5c06\u6570\u636e\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u800c\u7acb\u5373\u751f\u6548\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b,\u5728\u5f88\u591a\u7684\u6b63\u89c4\u516c\u53f8. \u6570\u636e\u5e93\u90fd\u662f\u7531DBA\u6765\u7edf\u4e00\u8fdb\u884c\u7ba1\u7406.DBA\u4e3a\u6bcf\u4e2a\u9879\u76ee\u7684\u6570\u636e\u5e93\u521b\u5efa\u7528\u6237.\u5e76\u8d4b\u4e88\u76f8\u5173\u7684\u6743\u9650.","title":"\u6743\u9650\u7ba1\u7406"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_1","text":"","title":"\u7528\u6237\u7ba1\u7406"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_2","text":"create user '\u7528\u6237\u540d'@'\u8fde\u63a5\u8005\u7684IP\u5730\u5740' identified by '\u5bc6\u7801'; create user egon1 @ 127 . 0 . 0 . 1 identified by 'root123' ; drop user egon1 @ 127 . 0 . 0 . 1 ; # % \u8868\u793a\u53ef\u4ee5\u5339\u914d\u503c \u53ef\u4ee5\u662f 127 . 0 . 0 . 1 \u3001 127 . 0 . 0 . 2 \u3001 127 . 0 . 0 . 3 ... create user egon2 @ '127.0.0.%' identified by 'root123' ; drop user egon2 @ '127.0.0.%' ; # egon3 @ '%' \u8868\u793a\u53ef\u4ee5\u5728\u4efb\u610f\u7684 IP\u5730\u5740\u4e0b\u901a\u8fc7egon3\u8fd9\u4e00\u8d26\u6237\u8fde\u63a5mysql create user egon3 @ '%' identified by 'root123' ; drop user egon3 @ '%' ; # \u5efa\u8bae '\u8d26\u53f7' @ 'IP' \u90fd\u52a0\u4e0a\u5f15\u53f7\uff01 create user 'egon4' @ '%' identified by 'root123' ; drop user 'egon4' @ '%' ;","title":"\u521b\u5efa\u548c\u5220\u9664\u7528\u6237"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#ip","text":"rename user '\u7528\u6237\u540d'@'IP\u5730\u5740' to '\u65b0\u7528\u6237\u540d'@'IP\u5730\u5740'; rename user egon1 @ 127 . 0 . 0 . 1 to egon1 @ localhost ; rename user 'egon1' @ '127.0.0.1' to 'egon1' @ 'localhost' ;","title":"\u4fee\u6539\u7528\u6237\u548cIP"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_3","text":"set password for '\u7528\u6237\u540d'@'IP\u5730\u5740' = Password('\u65b0\u5bc6\u7801') set password for 'egon4' @ '%' = Password ( '123123' ); -- \u2605\u4fee\u6539root\u8d26\u6237\u5bc6\u7801: alter user 'root' @ 'localhost' identified by '\u65b0\u5bc6\u7801' ; flush privileges ;","title":"\u4fee\u6539\u5bc6\u7801"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_4","text":"","title":"\u6388\u6743\u7ba1\u7406"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_5","text":"grant \u6743\u9650 on \u6570\u636e\u5e93.\u8868 to '\u7528\u6237'@'IP\u5730\u5740' *\u4ee3\u8868\u6240\u6709\uff01 \u6570\u636e\u5e93\u540d . * \u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709 \u6570\u636e\u5e93\u540d . \u8868\u540d \u6307\u5b9a\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u5f20\u8868 \u6570\u636e\u5e93\u540d . \u5b58\u50a8\u8fc7\u7a0b\u540d \u6307\u5b9a\u6570\u636e\u5e93\u4e2d\u7684\u5b58\u50a8\u8fc7\u7a0b * . * \u6240\u6709\u6570\u636e\u5e93 -- \u7528\u6237egon\u62e5\u6709\u6240\u6709\u6570\u636e\u5e93\u7684\u6240\u6709\u6743\u9650 grant all privileges on * . * TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u7684\u6240\u6709\u6743\u9650 grant all privileges on day26 . * TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u4e2dinfo\u8868\u7684\u6240\u6709\u6743\u9650 -- \u8d26\u53f7'egon'@'localhost'\u5c31\u53ea\u80fd\u67e5\u5230day26\u6570\u636e\u5e93 \u53ea\u80fd\u67e5\u5230info\u8868 grant all privileges on day26 . info TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u4e2dinfo\u8868\u7684\u67e5\u8be2\u6743\u9650 grant select on day26 . info TO 'egon' @ 'localhost' ; -- \u7528\u6237egon\u62e5\u6709\u6570\u636e\u5e93day26\u6240\u6709\u8868\u7684\u67e5\u8be2\u548c\u63d2\u5165\u6743\u9650 grant select , insert on day26 . * TO 'egon' @ 'localhost' ; grant all privileges on day26db . * to 'egon4' @ '%' ; \u6ce8\u610f\uff1a flush privileges ; -- \u5c06\u6570\u636e\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u800c\u7acb\u5373\u751f\u6548\u3002","title":"\u6388\u6743"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_6","text":"all privileges \u9664 grant\u5916\u7684\u6240\u6709\u6743\u9650 select \u4ec5\u67e5\u6743\u9650 select , insert \u67e5\u548c\u63d2\u5165\u6743\u9650 ... usage \u65e0\u8bbf\u95ee\u6743\u9650 alter \u4f7f\u7528 alter table alter routine \u4f7f\u7528 alter procedure\u548cdrop procedure create \u4f7f\u7528 create table create routine \u4f7f\u7528 create procedure create temporary tables \u4f7f\u7528 create temporary tables create user \u4f7f\u7528 create user \u3001 drop user \u3001 rename user\u548crevoke all privileges create view \u4f7f\u7528 create view delete \u4f7f\u7528 delete drop \u4f7f\u7528 drop table execute \u4f7f\u7528 call\u548c\u5b58\u50a8\u8fc7\u7a0b file \u4f7f\u7528 select into outfile \u548c load data infile grant option \u4f7f\u7528 grant \u548c revoke index \u4f7f\u7528 index insert \u4f7f\u7528 insert lock tables \u4f7f\u7528 lock table process \u4f7f\u7528 show full processlist select \u4f7f\u7528 select show databases \u4f7f\u7528 show databases show view \u4f7f\u7528 show view update \u4f7f\u7528 update reload \u4f7f\u7528 flush shutdown \u4f7f\u7528 mysqladmin shutdown ( \u5173\u95ed MySQL ) super \u4f7f\u7528 change master \u3001 kill \u3001 logs \u3001 purge \u3001 master\u548cset global \u3002 \u8fd8\u5141\u8bb8 mysqladmin\u8c03\u8bd5\u767b\u9646 replication client \u670d\u52a1\u5668\u4f4d\u7f6e\u7684\u8bbf\u95ee replication slave \u7531\u590d\u5236\u4ece\u5c5e\u4f7f\u7528","title":"\u6743\u9650"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_7","text":"show grants for '\u7528\u6237'@'IP\u5730\u5740' show grants for 'egon' @ 'localhost' ; show grants for 'egon4' @ '%' ;","title":"\u67e5\u770b\u6388\u6743"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/5_permissions/#_8","text":"revoke \u6743\u9650 on \u6570\u636e\u5e93.\u8868 from '\u7528\u6237'@'IP\u5730\u5740' revoke ALL PRIVILEGES on day26 . * from 'egon' @ 'localhost' ; revoke ALL PRIVILEGES on day26db . * from 'egon4' @ '%' ; \u6ce8\u610f\uff1a flush privileges ; -- \u5c06\u6570\u636e\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\uff0c\u4ece\u800c\u7acb\u5373\u751f\u6548\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b,\u5728\u5f88\u591a\u7684\u6b63\u89c4\u516c\u53f8. \u6570\u636e\u5e93\u90fd\u662f\u7531DBA\u6765\u7edf\u4e00\u8fdb\u884c\u7ba1\u7406.DBA\u4e3a\u6bcf\u4e2a\u9879\u76ee\u7684\u6570\u636e\u5e93\u521b\u5efa\u7528\u6237.\u5e76\u8d4b\u4e88\u76f8\u5173\u7684\u6743\u9650.","title":"\u53d6\u6d88\u6388\u6743"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/","text":"\u5355\u8868\u67e5\u8be2\u5b8c\u6574\u8bed\u6cd5 select distinct \u5b57\u6bb51,\u5b57\u6bb52... from \u5e93\u540d.\u8868\u540d where \u6761\u4ef6 group by \u5206\u7ec4\u5b57\u6bb5 having \u6761\u4ef6 order by \u6392\u5e8f\u5b57\u6bb5 limit \u9650\u5236\u6761\u6570; \u91cd\u4e2d\u4e4b\u91cd\uff01\uff01\u5173\u952e\u5b57\u7684\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a from -- \u5148\u53bb\u770b\u770b\u6709\u6ca1\u6709'\u5e93\u540d.\u8868\u540d'\u8fd9\u4e2a\u6587\u4ef6,\u82e5\u6709 \u6253\u5f00\u6b64\u6587\u4ef6 where -- \u4e00\u884c\u884c\u7684\u8fc7\u6ee4 \u5c06\u8868\u4e2d\u7b26\u5408'\u6761\u4ef6'\u7684\u8bb0\u5f55\u7b5b\u9009\u51fa\u6765 group by -- \u5c06\u7b5b\u9009\u51fa\u7684\u8bb0\u5f55 \u901a\u8fc7\u67d0\u4e00\u5b57\u6bb5(\u5b57\u6bb5\u503c\u76f8\u540c\u7684\u5f52\u4e3a\u4e00\u7c7b) \u8fdb\u884c\u5206\u7c7b ==> \u7ec4 -- \u82e5\u6ca1\u6709group by \u5219\u6574\u4f53\u4e3a\u4e00\u4e2a\u7ec4 having -- \u4ee5\u7ec4\u4e3a\u5355\u4f4d\u8fdb\u4e00\u6b65\u8fc7\u6ee4 \u8fc7\u6ee4\u6389\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u7ec4 select -- select\u4e0efrom\u4e2d\u95f4\u7684\u4ee3\u7801 distinct -- \u53bb\u91cd \u5c06\u67e5\u8be2\u51fa\u6765\u7684\u91cd\u590d\u8bb0\u5f55\u8fc7\u6ee4\u6389 order by -- \u6839\u636e\u67d0\u4e2a\u5b57\u6bb5 \u5bf9\u8bb0\u5f55\u8fdb\u884c\u6392\u5e8f limit -- \u9650\u5236\u7ed3\u679c\u7684\u663e\u793a\u6761\u6570 -- \u8fd9\u8868\u6709\u8bbe\u8ba1\u4e0d\u5408\u7406\u7684\u5730\u65b9 \u4f46\u522b\u5728\u610f \u53ea\u662f\u5efa\u51fa\u6765\u4e3a\u5355\u8868\u67e5\u8be2\u670d\u52a1\u7684\uff01(\u00b4\u25bd\uff40) create table employee ( id int not null unique auto_increment , -- \u5458\u5de5id name varchar ( 20 ) not null , -- \u59d3\u540d sex enum ( 'male' , 'female' ) not null default 'male' , -- \u6027\u522b age int ( 3 ) unsigned not null default 28 , -- \u5e74\u9f84 hire_date date not null , -- \u5165\u804c\u65e5\u671f post varchar ( 50 ), -- \u5c97\u4f4d post_comment varchar ( 100 ), -- \u804c\u4f4d\u63cf\u8ff0 salary double ( 15 , 2 ), -- \u85aa\u6c34 office int , -- \u529e\u516c\u5ba4 depart_id int -- \u90e8\u95e8\u7f16\u53f7 ); \u7b80\u5355\u67e5\u8be2 \u00b6 \u56db\u5219\u8fd0\u7b97\u3001\u51fd\u6570 concat concat_ws\u3001case\u8bed\u53e5\u3001\u6307\u5b9a\u5217 select * from employee ; -- \u5148\u770b\u6709\u6ca1\u6709employee\u8fd9\u5f20\u8868,\u6253\u5f00\u8868\u8bfb\u8868\u4e2d\u7684\u4e00\u884c\u884c\u6570\u636e `*` \u4ee3\u8868\u6bcf\u884c\u6570\u636e\u7684\u5168\u90e8\u5b57\u6bb5\u90fd\u8981. select name , post from employee ; select distinct post from employee ; # distinct\u4f5c\u7528\u5bf9\u8c61\u4e0d\u662f\u5b57\u6bb5 \u662f\u6bcf\u884c\u8bb0\u5f55\uff01 -- \u5b57\u6bb5\u7ed3\u5408\u56db\u5219\u8fd0\u7b97 select name , salary * 12 as annual_salary from employee ; # \u7ed9\u5b57\u6bb5\u8d77\u522b\u540d select name \u540d\u5b57 , salary * 12 \u5e74\u85aa from employee ; # as\u53ef\u4ee5\u7701\u7565\u6389 \u5b57\u6bb5\u540d + \u7a7a\u683c + \u522b\u540d -- \u4f7f\u7528\u51fd\u6570 select database (); # \u5f53\u524d\u4f7f\u7528\u7684\u6570\u636e\u5e93 select user (); # \u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 -- concat\u51fd\u6570\u5f88\u91cd\u8981\uff01\uff01\u7528\u4e8e\u62fc\u63a5\u5b57\u7b26\u4e32 -- \u7279\u522b\u662f\u5728\u6570\u636e\u5e93\u8fc1\u79fb\u7684\u65f6\u5019 \u5c06\u65e7\u8868\u7684\u6570\u636e\u62fc\u4e00\u62fc\u653e\u5230\u65b0\u8868\u91cc select concat ( '\u59d3\u540d' , ':' , name ), concat ( '\u5e74\u85aa:' , salary * 12 ) from employee ; -- concat_ws\u51fd\u6570 \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5206\u9694\u7b26 select concat_ws ( ':' , '\u59d3\u540d' , name ) as new_name from employee ; -- \u7ed3\u5408case\u8bed\u53e5 (\u591a\u5206\u652f\u7684if-else\u5224\u65ad) -- case\u8bed\u53e5\u4e86\u89e3\u5373\u53ef \u901a\u5e38\u90fd\u662f\u62ff\u5230\u6570\u636e\u540e\u7528python\u8bed\u8a00for\u5faa\u73afif-else\u5224\u65ad\u6765\u89e3\u51b3 SELECT id , ( CASE WHEN NAME = 'egon' THEN NAME WHEN NAME = 'alex' THEN CONCAT ( NAME , '_BIGSB' ) ELSE concat ( NAME , 'SB' ) END ) AS new_name FROM emp ; /*\u6307\u5b9a\u5217*/ # 123 as other --:> \u5728\u67e5\u8be2\u7ed3\u679c\u540e\u9762\u989d\u5916\u589e\u6dfb\u4e00\u5217 \u522b\u540d\u4e3aother \u5217\u503c\u5168\u4e3a123 select id , name as NM , 123 as other from info ; # -- max/min/sum \u6ce8\u610f: \u6b64\u5904\u6620\u5c04\u90e8\u5206\u7684sql\u8bed\u53e5\u5b50\u67e5\u8be2\u5e94\u6ee1\u8db3\u53ea\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\uff01\uff01 select id , name , 666 as num , ( select max ( id ) from depart ) as mid , -- \u7b49\u540c\u4e8e123 as mid, ( select min ( id ) from depart ) as nid , age from info ; # \u5b83\u76f8\u5f53\u4e8e\u6bcf\u4e00\u884c\u90fd\u8981\u6839\u636e info . depart_id\u7684\u503c\u53bb\u6620\u5c04depart\u8868\u4e2d\u7684title\u503c . # \u6ce8\u610f : \u6548\u7387\u5f88\u4f4e\uff01\u5047\u8bbe info\u8868\u67097\u884c\u6570\u636e , \u5219\u9664\u4e86 info\u8868\u81ea\u8eab\u67e5\u8be2\u7684\u4e00\u6b21\u8fd8\u6709\u6bcf\u6b21\u7684\u5173\u8054\u67e5\u8be2 , \u5171 8 \u6b21 . select id , name , ( select title from depart where depart . id = info . depart_id ) as x1 from info ; where \u6761\u4ef6 \u00b6 where\u5b57\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528: <1) \u6bd4\u8f83\u8fd0\u7b97\u7b26\uff1a> < >= <= != <2) between 80 and 100 \u503c\u5728 [80,100]\u95ed\u533a\u95f4 <3) in(80,90,100) \u503c\u662f10\u621620\u621630 not in (1,4,6) <4) like 'egon%' pattern\u53ef\u4ee5\u662f%\u6216_ %\u8868\u793a\u4efb\u610f\u591a\u5b57\u7b26 _\u8868\u793a\u4e00\u4e2a\u5b57\u7b26 <5) \u903b\u8f91\u8fd0\u7b97\u7b26: \u5728\u591a\u4e2a\u6761\u4ef6\u76f4\u63a5\u53ef\u4ee5\u4f7f\u7528\u903b\u8f91\u8fd0\u7b97\u7b26 and or not select * from employee where id >= 10 ; select * from employee where id >= 10 and id <= 13 ; -- \u7b49\u540c\u4e8e select * from employee where id between 10 and 13 ; select * from employee where id = 10 or id = 13 or id = 15 ; -- \u7b49\u540c\u4e8e select * from employee where id in ( 10 , 13 , 15 ) -- \u5224\u65ad\u67d0\u4e2a\u5b57\u6bb5\u503c\u662f\u5426\u4e3aNULL \u4e0d\u80fd\u7528\u7b49\u53f7 \u9700\u8981\u7528is select * from employee where post_comment is null ; select * from employee where post_comment is not null ; -- \u6ce8\u610f\uff01\uff01\u8bbe\u7f6e\u5b57\u6bb5\u503c\u4e3a''\u7a7a\u5b57\u7b26\u4e32 \u5e76\u4e0d\u7b49\u540c\u4e8enull (o^^o) update employee set post_comment = '' where id < 3 ; select * from employee where name like 'ji%' ; select * from employee where name like 'ji_' ; # \u58f0\u660e / \u4e4b\u540e\u7684\u5b57\u7b26\u4e0d\u4f5c\u4e3a\u901a\u914d\u7b26\u4f7f\u7528 select * from employee where name like '/_ji_' ; group by \u5206\u7ec4 \u00b6 \u5c06\u7ecf\u5386\u8fc7where\u6761\u4ef6\u7b5b\u9009\u7684\u591a\u6761\u8bb0\u5f55\u8fdb\u884c\u5f52\u7c7b. \u6ce8\u610f\u54c8! \u6ca1\u6709where\u6761\u4ef6\u76f8\u5f53\u4e8e\u6240\u6709\u6761\u4ef6\u90fd\u4e3a\u771f\uff01\u76f8\u5f53\u4e8e\u5199\u4e86\u4e2a where 1>0 . \u5982\u679c\u6211\u4eec\u7528unique\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u7ec4\u7684\u4f9d\u636e, \u5219\u6bcf\u4e00\u6761\u8bb0\u5f55\u81ea\u6210\u4e00\u7ec4, \u8fd9\u79cd\u5206\u7ec4\u6ca1\u6709\u610f\u4e49 \u591a\u6761\u8bb0\u5f55\u4e4b\u95f4\u7684\u67d0\u4e2a\u5b57\u6bb5\u503c\u76f8\u540c, \u8be5\u5b57\u6bb5\u901a\u5e38\u7528\u6765\u4f5c\u4e3a\u5206\u7ec4\u7684\u4f9d\u636e set sql_mode='only_full_group_by'; (sql\u6a21\u5f0f\u4e86\u89e3 \u4e25\u683c\u6a21\u5f0f. ) \u5206\u5b8c\u7ec4\u540e \u80fd\u770b\u5230\u7684\u5b57\u6bb5\u53ea\u6709\u5206\u7ec4\u7684\u5b57\u6bb5\u4ee5\u53ca\u805a\u5408\u7684\u7ed3\u679c. \u805a\u5408\u51fd\u6570 max\u3001min\u3001avg\u3001sum\u3001count \u5728\u5206\u5b8c\u7ec4\u540e,\u4ee5\u7ec4\u4e3a\u5355\u4f4d\u7edf\u8ba1\u51fa\u4e00\u4e2a\u7ed3\u679c,\u4e00\u4e2a\u7ec4\u53ea\u51fa\u4e00\u4e2a\u7ed3\u679c -- \u4e3e\u6817: \u53d6\u6bcf\u4e2a\u90e8\u95e8\u7684\u6700\u9ad8\u5de5\u8d44\u3001\u53d6\u6bcf\u4e2a\u90e8\u95e8\u7684\u5458\u5de5\u6570\u3001\u53d6\u7537\u751f\u6570\u548c\u5973\u751f\u6570 -- [\u5c0f\u7a8d\u95e8] '\u6bcf'\u8fd9\u4e2a\u5b57\u540e\u9762\u7684\u5b57\u6bb5,\u5c31\u662f\u6211\u4eec\u5206\u7ec4\u7684\u4f9d\u636e select post , max ( salary ) from employee group by post ; select post , min ( salary ) from employee group by post ; select post , avg ( salary ) from employee group by post ; select post , sum ( salary ) from employee group by post ; select post , count ( id ) from employee group by post ; select sex , count ( id ) from employee group by sex ; -- \u53d6\u6bcf\u4e2a\u90e8\u95e8\u7537\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44 select post , avg ( salary ) from employee where sex = 'male' group by post ; -- \u53d6\u6bcf\u4e2a\u90e8\u95e8\u5e74\u9f84\u5927\u4e8e20\u5c81\u7684\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44 select post , avg ( salary ) from employee where age > 20 group by post ; -- \u6269\u5c55 -- GROUP BY\u5173\u952e\u5b57\u548cGROUP_CONCAT()\u51fd\u6570\u4e00\u8d77\u4f7f\u7528 SELECT post , GROUP_CONCAT ( name ) FROM employee GROUP BY post ; # \u67e5\u8be2\u5c97\u4f4d\u540d\u4ee5\u53ca\u5c97\u4f4d\u5305\u542b\u7684\u6240\u6709\u5458\u5de5\u540d\u5b57 \u6ce8\u610f : group by b,c -- \u662f\u5c06b\u548cc\u770b\u4f5c\u4e00\u4e2a\u6574\u4f53\u8fdb\u884c\u5206\u7ec4 select b , c , count ( 1 ) from test group by b , c ; a \u7532 4 a \u4e59 1 b \u4e59 3 having \u8fc7\u6ee4 \u00b6 where\u662f\u9488\u5bf9\u5206\u7ec4\u524d\u6240\u6709\u7684\u8bb0\u5f55\u8fdb\u884c\u8fc7\u6ee4\uff01 having\u662f\u9488\u5bf9\u5206\u7ec4\u540e\u7684\u7ec4\u8fdb\u884c\u8fc7\u6ee4,\u4e0d\u662f\u8bb0\u5f55\uff01 \u80fd\u5426\u4f7f\u7528\u805a\u5408\u51fd\u6570\uff1fwhere\u4e0d\u53ef\u4ee5,having\u53ef\u4ee5. -- \u53d6\u51fa\u7537\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44\u5927\u4e8e10000\u7684\u90e8\u95e8\uff5c\u53d6\u51fa\u5404\u90e8\u95e8\u5e73\u5747\u85aa\u8d44\u5927\u4e8e10000\u7684\u7537\u5458\u5de5 select post from employee where sex = 'male' group by post having avg ( salary ) > 10000 ; # select salary from employee where max ( salary ) > 10000 ;( \u62a5\u9519\uff01\uff01 ) # \u4e3a\u5565\u4e0d\u62a5\u9519\uff1f\u56e0\u4e3a\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u805a\u5408\u51fd\u6570\u662f\u5728\u5206\u7ec4\u4e4b\u540e\u8fd0\u884c\u7684 . \u6ca1\u6709 group by\u5c31\u76f8\u5f53\u4e8e\u6574\u4f53\u662f\u4e00\u7ec4 . select max ( salary ) from employee ; -- \u53d6\u6240\u6709\u4eba\u7684\u6700\u9ad8\u85aa\u8d44 order by \u6392\u5e8f \u00b6 order by\u662f\u5728\u5206\u7ec4\u4e4b\u540e\u7684 \u662f\u53ef\u4ee5\u4f7f\u7528\u805a\u5408\u51fd\u6570\u7684. \u6309\u5355\u5217\u6392\u5e8f SELECT * FROM employee ORDER BY salary ; SELECT * FROM employee ORDER BY salary ASC ; -- \u5347\u5e8f(\u9ed8\u8ba4) SELECT * FROM employee ORDER BY salary DESC ; -- \u964d\u5e8f \u6309\u591a\u5217\u6392\u5e8f : \u5148\u6309\u7167 age\u5347\u5e8f\u6392\u5e8f , \u5982\u679c\u5e74\u7eaa\u76f8\u540c , \u5219\u6309\u7167\u85aa\u8d44\u964d\u5e8f\u6392\u5e8f SELECT * from employee ORDER BY age , salary DESC ; -- \u53d6\u51fa\u7537\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44\u5927\u4e8e10000\u7684\u90e8\u95e8\u5e76\u6309\u7167\u5e73\u5747\u85aa\u8d44\u964d\u5e8f\u6392\u5217. select post from employee where sex = 'male' group by post having avg ( salary ) > 10000 order by avg ( salary ) desc ; -- \u662f\u5bf9\u7ec4\u8fdb\u884c\u7684\u6392\u5e8f\uff01\u6240\u4ee5\u5728\u8fd9\u4e2a\u573a\u666f\u4e0b\u53ea\u80fd\u4f7f\u7528\u5206\u7ec4\u5b57\u6bb5\u548c\u805a\u5408\u51fd\u6570. limit \u00b6 SELECT * FROM employee ORDER BY salary DESC LIMIT 3 ; # \u9ed8\u8ba4\u521d\u59cb\u4f4d\u7f6e\u4e3a 0 -- \u5206\u9875\u5c55\u793a # \u4ece\u7b2c 0 \u5f00\u59cb , \u5411\u540e\u83b7\u53d6 5 \u6761\u6570\u636e \u5373 1 - 5 \u884c\u7684\u6570\u636e SELECT * FROM employee ORDER BY salary DESC LIMIT 0 , 5 ; # \u4ece\u7b2c 5 \u5f00\u59cb , \u5411\u540e\u83b7\u53d6 5 \u6761\u6570\u636e \u5373 6 - 10 \u884c\u7684\u6570\u636e SELECT * FROM employee ORDER BY salary DESC LIMIT 5 , 5 ; \u6b63\u5219\u8868\u8fbe\u5f0f \u00b6 -- \u67e5\u770b\u6240\u6709\u5458\u5de5\u4e2d\u540d\u5b57\u662fjin\u5f00\u5934\uff0cn\u6216\u8005g\u7ed3\u5c3e\u7684\u5458\u5de5\u4fe1\u606f select * from employee where name regexp '^jin.*[gn]$' ;","title":"\u5355\u8868\u67e5\u8be2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#_1","text":"\u56db\u5219\u8fd0\u7b97\u3001\u51fd\u6570 concat concat_ws\u3001case\u8bed\u53e5\u3001\u6307\u5b9a\u5217 select * from employee ; -- \u5148\u770b\u6709\u6ca1\u6709employee\u8fd9\u5f20\u8868,\u6253\u5f00\u8868\u8bfb\u8868\u4e2d\u7684\u4e00\u884c\u884c\u6570\u636e `*` \u4ee3\u8868\u6bcf\u884c\u6570\u636e\u7684\u5168\u90e8\u5b57\u6bb5\u90fd\u8981. select name , post from employee ; select distinct post from employee ; # distinct\u4f5c\u7528\u5bf9\u8c61\u4e0d\u662f\u5b57\u6bb5 \u662f\u6bcf\u884c\u8bb0\u5f55\uff01 -- \u5b57\u6bb5\u7ed3\u5408\u56db\u5219\u8fd0\u7b97 select name , salary * 12 as annual_salary from employee ; # \u7ed9\u5b57\u6bb5\u8d77\u522b\u540d select name \u540d\u5b57 , salary * 12 \u5e74\u85aa from employee ; # as\u53ef\u4ee5\u7701\u7565\u6389 \u5b57\u6bb5\u540d + \u7a7a\u683c + \u522b\u540d -- \u4f7f\u7528\u51fd\u6570 select database (); # \u5f53\u524d\u4f7f\u7528\u7684\u6570\u636e\u5e93 select user (); # \u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 -- concat\u51fd\u6570\u5f88\u91cd\u8981\uff01\uff01\u7528\u4e8e\u62fc\u63a5\u5b57\u7b26\u4e32 -- \u7279\u522b\u662f\u5728\u6570\u636e\u5e93\u8fc1\u79fb\u7684\u65f6\u5019 \u5c06\u65e7\u8868\u7684\u6570\u636e\u62fc\u4e00\u62fc\u653e\u5230\u65b0\u8868\u91cc select concat ( '\u59d3\u540d' , ':' , name ), concat ( '\u5e74\u85aa:' , salary * 12 ) from employee ; -- concat_ws\u51fd\u6570 \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5206\u9694\u7b26 select concat_ws ( ':' , '\u59d3\u540d' , name ) as new_name from employee ; -- \u7ed3\u5408case\u8bed\u53e5 (\u591a\u5206\u652f\u7684if-else\u5224\u65ad) -- case\u8bed\u53e5\u4e86\u89e3\u5373\u53ef \u901a\u5e38\u90fd\u662f\u62ff\u5230\u6570\u636e\u540e\u7528python\u8bed\u8a00for\u5faa\u73afif-else\u5224\u65ad\u6765\u89e3\u51b3 SELECT id , ( CASE WHEN NAME = 'egon' THEN NAME WHEN NAME = 'alex' THEN CONCAT ( NAME , '_BIGSB' ) ELSE concat ( NAME , 'SB' ) END ) AS new_name FROM emp ; /*\u6307\u5b9a\u5217*/ # 123 as other --:> \u5728\u67e5\u8be2\u7ed3\u679c\u540e\u9762\u989d\u5916\u589e\u6dfb\u4e00\u5217 \u522b\u540d\u4e3aother \u5217\u503c\u5168\u4e3a123 select id , name as NM , 123 as other from info ; # -- max/min/sum \u6ce8\u610f: \u6b64\u5904\u6620\u5c04\u90e8\u5206\u7684sql\u8bed\u53e5\u5b50\u67e5\u8be2\u5e94\u6ee1\u8db3\u53ea\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\uff01\uff01 select id , name , 666 as num , ( select max ( id ) from depart ) as mid , -- \u7b49\u540c\u4e8e123 as mid, ( select min ( id ) from depart ) as nid , age from info ; # \u5b83\u76f8\u5f53\u4e8e\u6bcf\u4e00\u884c\u90fd\u8981\u6839\u636e info . depart_id\u7684\u503c\u53bb\u6620\u5c04depart\u8868\u4e2d\u7684title\u503c . # \u6ce8\u610f : \u6548\u7387\u5f88\u4f4e\uff01\u5047\u8bbe info\u8868\u67097\u884c\u6570\u636e , \u5219\u9664\u4e86 info\u8868\u81ea\u8eab\u67e5\u8be2\u7684\u4e00\u6b21\u8fd8\u6709\u6bcf\u6b21\u7684\u5173\u8054\u67e5\u8be2 , \u5171 8 \u6b21 . select id , name , ( select title from depart where depart . id = info . depart_id ) as x1 from info ;","title":"\u7b80\u5355\u67e5\u8be2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#where","text":"where\u5b57\u53e5\u4e2d\u53ef\u4ee5\u4f7f\u7528: <1) \u6bd4\u8f83\u8fd0\u7b97\u7b26\uff1a> < >= <= != <2) between 80 and 100 \u503c\u5728 [80,100]\u95ed\u533a\u95f4 <3) in(80,90,100) \u503c\u662f10\u621620\u621630 not in (1,4,6) <4) like 'egon%' pattern\u53ef\u4ee5\u662f%\u6216_ %\u8868\u793a\u4efb\u610f\u591a\u5b57\u7b26 _\u8868\u793a\u4e00\u4e2a\u5b57\u7b26 <5) \u903b\u8f91\u8fd0\u7b97\u7b26: \u5728\u591a\u4e2a\u6761\u4ef6\u76f4\u63a5\u53ef\u4ee5\u4f7f\u7528\u903b\u8f91\u8fd0\u7b97\u7b26 and or not select * from employee where id >= 10 ; select * from employee where id >= 10 and id <= 13 ; -- \u7b49\u540c\u4e8e select * from employee where id between 10 and 13 ; select * from employee where id = 10 or id = 13 or id = 15 ; -- \u7b49\u540c\u4e8e select * from employee where id in ( 10 , 13 , 15 ) -- \u5224\u65ad\u67d0\u4e2a\u5b57\u6bb5\u503c\u662f\u5426\u4e3aNULL \u4e0d\u80fd\u7528\u7b49\u53f7 \u9700\u8981\u7528is select * from employee where post_comment is null ; select * from employee where post_comment is not null ; -- \u6ce8\u610f\uff01\uff01\u8bbe\u7f6e\u5b57\u6bb5\u503c\u4e3a''\u7a7a\u5b57\u7b26\u4e32 \u5e76\u4e0d\u7b49\u540c\u4e8enull (o^^o) update employee set post_comment = '' where id < 3 ; select * from employee where name like 'ji%' ; select * from employee where name like 'ji_' ; # \u58f0\u660e / \u4e4b\u540e\u7684\u5b57\u7b26\u4e0d\u4f5c\u4e3a\u901a\u914d\u7b26\u4f7f\u7528 select * from employee where name like '/_ji_' ;","title":"where \u6761\u4ef6"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#group-by","text":"\u5c06\u7ecf\u5386\u8fc7where\u6761\u4ef6\u7b5b\u9009\u7684\u591a\u6761\u8bb0\u5f55\u8fdb\u884c\u5f52\u7c7b. \u6ce8\u610f\u54c8! \u6ca1\u6709where\u6761\u4ef6\u76f8\u5f53\u4e8e\u6240\u6709\u6761\u4ef6\u90fd\u4e3a\u771f\uff01\u76f8\u5f53\u4e8e\u5199\u4e86\u4e2a where 1>0 . \u5982\u679c\u6211\u4eec\u7528unique\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u7ec4\u7684\u4f9d\u636e, \u5219\u6bcf\u4e00\u6761\u8bb0\u5f55\u81ea\u6210\u4e00\u7ec4, \u8fd9\u79cd\u5206\u7ec4\u6ca1\u6709\u610f\u4e49 \u591a\u6761\u8bb0\u5f55\u4e4b\u95f4\u7684\u67d0\u4e2a\u5b57\u6bb5\u503c\u76f8\u540c, \u8be5\u5b57\u6bb5\u901a\u5e38\u7528\u6765\u4f5c\u4e3a\u5206\u7ec4\u7684\u4f9d\u636e set sql_mode='only_full_group_by'; (sql\u6a21\u5f0f\u4e86\u89e3 \u4e25\u683c\u6a21\u5f0f. ) \u5206\u5b8c\u7ec4\u540e \u80fd\u770b\u5230\u7684\u5b57\u6bb5\u53ea\u6709\u5206\u7ec4\u7684\u5b57\u6bb5\u4ee5\u53ca\u805a\u5408\u7684\u7ed3\u679c. \u805a\u5408\u51fd\u6570 max\u3001min\u3001avg\u3001sum\u3001count \u5728\u5206\u5b8c\u7ec4\u540e,\u4ee5\u7ec4\u4e3a\u5355\u4f4d\u7edf\u8ba1\u51fa\u4e00\u4e2a\u7ed3\u679c,\u4e00\u4e2a\u7ec4\u53ea\u51fa\u4e00\u4e2a\u7ed3\u679c -- \u4e3e\u6817: \u53d6\u6bcf\u4e2a\u90e8\u95e8\u7684\u6700\u9ad8\u5de5\u8d44\u3001\u53d6\u6bcf\u4e2a\u90e8\u95e8\u7684\u5458\u5de5\u6570\u3001\u53d6\u7537\u751f\u6570\u548c\u5973\u751f\u6570 -- [\u5c0f\u7a8d\u95e8] '\u6bcf'\u8fd9\u4e2a\u5b57\u540e\u9762\u7684\u5b57\u6bb5,\u5c31\u662f\u6211\u4eec\u5206\u7ec4\u7684\u4f9d\u636e select post , max ( salary ) from employee group by post ; select post , min ( salary ) from employee group by post ; select post , avg ( salary ) from employee group by post ; select post , sum ( salary ) from employee group by post ; select post , count ( id ) from employee group by post ; select sex , count ( id ) from employee group by sex ; -- \u53d6\u6bcf\u4e2a\u90e8\u95e8\u7537\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44 select post , avg ( salary ) from employee where sex = 'male' group by post ; -- \u53d6\u6bcf\u4e2a\u90e8\u95e8\u5e74\u9f84\u5927\u4e8e20\u5c81\u7684\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44 select post , avg ( salary ) from employee where age > 20 group by post ; -- \u6269\u5c55 -- GROUP BY\u5173\u952e\u5b57\u548cGROUP_CONCAT()\u51fd\u6570\u4e00\u8d77\u4f7f\u7528 SELECT post , GROUP_CONCAT ( name ) FROM employee GROUP BY post ; # \u67e5\u8be2\u5c97\u4f4d\u540d\u4ee5\u53ca\u5c97\u4f4d\u5305\u542b\u7684\u6240\u6709\u5458\u5de5\u540d\u5b57 \u6ce8\u610f : group by b,c -- \u662f\u5c06b\u548cc\u770b\u4f5c\u4e00\u4e2a\u6574\u4f53\u8fdb\u884c\u5206\u7ec4 select b , c , count ( 1 ) from test group by b , c ; a \u7532 4 a \u4e59 1 b \u4e59 3","title":"group by \u5206\u7ec4"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#having","text":"where\u662f\u9488\u5bf9\u5206\u7ec4\u524d\u6240\u6709\u7684\u8bb0\u5f55\u8fdb\u884c\u8fc7\u6ee4\uff01 having\u662f\u9488\u5bf9\u5206\u7ec4\u540e\u7684\u7ec4\u8fdb\u884c\u8fc7\u6ee4,\u4e0d\u662f\u8bb0\u5f55\uff01 \u80fd\u5426\u4f7f\u7528\u805a\u5408\u51fd\u6570\uff1fwhere\u4e0d\u53ef\u4ee5,having\u53ef\u4ee5. -- \u53d6\u51fa\u7537\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44\u5927\u4e8e10000\u7684\u90e8\u95e8\uff5c\u53d6\u51fa\u5404\u90e8\u95e8\u5e73\u5747\u85aa\u8d44\u5927\u4e8e10000\u7684\u7537\u5458\u5de5 select post from employee where sex = 'male' group by post having avg ( salary ) > 10000 ; # select salary from employee where max ( salary ) > 10000 ;( \u62a5\u9519\uff01\uff01 ) # \u4e3a\u5565\u4e0d\u62a5\u9519\uff1f\u56e0\u4e3a\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u805a\u5408\u51fd\u6570\u662f\u5728\u5206\u7ec4\u4e4b\u540e\u8fd0\u884c\u7684 . \u6ca1\u6709 group by\u5c31\u76f8\u5f53\u4e8e\u6574\u4f53\u662f\u4e00\u7ec4 . select max ( salary ) from employee ; -- \u53d6\u6240\u6709\u4eba\u7684\u6700\u9ad8\u85aa\u8d44","title":"having \u8fc7\u6ee4"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#order-by","text":"order by\u662f\u5728\u5206\u7ec4\u4e4b\u540e\u7684 \u662f\u53ef\u4ee5\u4f7f\u7528\u805a\u5408\u51fd\u6570\u7684. \u6309\u5355\u5217\u6392\u5e8f SELECT * FROM employee ORDER BY salary ; SELECT * FROM employee ORDER BY salary ASC ; -- \u5347\u5e8f(\u9ed8\u8ba4) SELECT * FROM employee ORDER BY salary DESC ; -- \u964d\u5e8f \u6309\u591a\u5217\u6392\u5e8f : \u5148\u6309\u7167 age\u5347\u5e8f\u6392\u5e8f , \u5982\u679c\u5e74\u7eaa\u76f8\u540c , \u5219\u6309\u7167\u85aa\u8d44\u964d\u5e8f\u6392\u5e8f SELECT * from employee ORDER BY age , salary DESC ; -- \u53d6\u51fa\u7537\u5458\u5de5\u7684\u5e73\u5747\u85aa\u8d44\u5927\u4e8e10000\u7684\u90e8\u95e8\u5e76\u6309\u7167\u5e73\u5747\u85aa\u8d44\u964d\u5e8f\u6392\u5217. select post from employee where sex = 'male' group by post having avg ( salary ) > 10000 order by avg ( salary ) desc ; -- \u662f\u5bf9\u7ec4\u8fdb\u884c\u7684\u6392\u5e8f\uff01\u6240\u4ee5\u5728\u8fd9\u4e2a\u573a\u666f\u4e0b\u53ea\u80fd\u4f7f\u7528\u5206\u7ec4\u5b57\u6bb5\u548c\u805a\u5408\u51fd\u6570.","title":"order by \u6392\u5e8f"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#limit","text":"SELECT * FROM employee ORDER BY salary DESC LIMIT 3 ; # \u9ed8\u8ba4\u521d\u59cb\u4f4d\u7f6e\u4e3a 0 -- \u5206\u9875\u5c55\u793a # \u4ece\u7b2c 0 \u5f00\u59cb , \u5411\u540e\u83b7\u53d6 5 \u6761\u6570\u636e \u5373 1 - 5 \u884c\u7684\u6570\u636e SELECT * FROM employee ORDER BY salary DESC LIMIT 0 , 5 ; # \u4ece\u7b2c 5 \u5f00\u59cb , \u5411\u540e\u83b7\u53d6 5 \u6761\u6570\u636e \u5373 6 - 10 \u884c\u7684\u6570\u636e SELECT * FROM employee ORDER BY salary DESC LIMIT 5 , 5 ;","title":"limit"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/6_single_query/#_2","text":"-- \u67e5\u770b\u6240\u6709\u5458\u5de5\u4e2d\u540d\u5b57\u662fjin\u5f00\u5934\uff0cn\u6216\u8005g\u7ed3\u5c3e\u7684\u5458\u5de5\u4fe1\u606f select * from employee where name regexp '^jin.*[gn]$' ;","title":"\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/","text":"\u94fe\u8868\u67e5\u8be2 \u00b6 \u6570\u636e\u51c6\u5907 \u00b6 -- \u5efa\u8868 -- \u5728\u786c\u76d8\u4e0a department\u548cemployee\u5c31\u662f\u4e24\u5f20\u7269\u7406\u8868 create table department ( id int , name varchar ( 20 ) ); create table employee ( id int primary key auto_increment , name varchar ( 20 ), sex enum ( 'male' , 'female' ) not null default 'male' , age int , dep_id int -- \u4e24\u8868\u5173\u7cfb\u4e0d\u662f\u4e00\u5b9a\u9700\u8981\u5efa\u7acbforeign key\u5916\u952e\u7684 \u4e0d\u8ba9\u4e24\u8005\u5f3a\u8026\u5408 \u5177\u6709\u66f4\u9ad8\u7684\u6269\u5c55\u6027 ); -- \u63d2\u5165\u6570\u636e insert into department values ( 200 , '\u6280\u672f' ), ( 201 , '\u4eba\u529b\u8d44\u6e90' ), ( 202 , '\u9500\u552e' ), ( 203 , '\u8fd0\u8425' ); insert into employee ( name , sex , age , dep_id ) values ( 'egon' , 'male' , 18 , 200 ), ( 'alex' , 'female' , 48 , 201 ), ( 'wupeiqi' , 'male' , 38 , 201 ), ( 'yuanhao' , 'female' , 28 , 202 ), ( 'liwenzhou' , 'male' , 18 , 200 ), ( 'jingliyang' , 'female' , 18 , 204 ); -- \u65e0\u6548\u6570\u636e \u6ca1\u6709id\u4e3a204\u7684\u90e8\u95e8\u5b58\u5728 \u4ea4\u53c9\u8fde\u63a5 \u00b6 \u4ea4\u53c9\u8fde\u63a5: \u5c06\u4e24\u8868\u5408\u5728\u4e00\u8d77 \u751f\u6210\u7b1b\u5361\u5c14\u79ef. \u5047\u5982A\u8868\u4e2d\u7684\u6570\u636e\u4e3am\u884c\uff0cB\u8868\u4e2d\u7684\u6570\u636e\u6709n\u884c\uff0c\u90a3\u4e48A\u548cB\u505a\u7b1b\u5361\u5c14\u79ef\uff0c\u7ed3\u679c\u4e3am*n\u884c select * from employee,department; \u5185\u8fde\u63a5 \u00b6 \u5185\u8fde\u63a5: \u53ea\u4fdd\u7559\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\u8bb0\u5f55... (\u53ea\u8fde\u63a5\u5339\u914d\u7684\u884c \u7b5b\u9009\u51fa\u7b1b\u5361\u5c14\u79ef\u4e2d\u6211\u4eec\u9700\u8981\u7684\u8bb0\u5f55) \u7528where\u5173\u952e\u5b57\u53ef\u4ee5\u5b8c\u6210\u60f3\u8981\u7684\u62fc\u63a5\u6548\u679c(\u4e0d\u5efa\u8bae.) where\u5e94\u8be5\u7528\u4e8e\u7b5b\u9009\u6570\u636e. '\u672f\u6709\u4e13\u653b'. \u4f46\u5b83\u7b49\u540c\u4e8e\u4e0b\u65b9\u7528inner join\u7684sql\u8bed\u53e5~ select * from employee,department where employee.dep_id = department.id; (\u662f\u5185\u8fde\u63a5\u54e6\uff01\uff01) \u7528inner join\u5173\u952e\u5b57\uff01\uff01\uff01 select * from employee inner join department on employee . dep_id = department . id ; -- \u8054\u8868\u7ed3\u679c\u5982\u4e0b: -- (203,'\u8fd0\u8425') ('jingliyang','female',18,204) \u5b83\u4eec\u4e24\u90fd\u6ca1\u6709\u5bf9\u5e94\u7684\u8bb0\u5f55 + ----+-----------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ----+-----------+--------+------+--------+------+--------------+ | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | + ----+-----------+--------+------+--------+------+--------------+ \u5916\u8fde\u63a5 \u00b6 \u5916\u8fde\u63a5: \u82e5\u60f3\u8ba9\u8054\u8868\u4fdd\u7559\u4e24\u8868\u4e2d\u6ca1\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\u8bb0\u5f55 \u5c31\u7528\u5916\u8fde\u63a5 \u5de6\u8fde\u63a5 : \u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u4f18\u5148\u663e\u793a\u5de6\u8868\u5168\u90e8\u8bb0\u5f55 left join select * from employee left join department on employee . dep_id = department . id ; -- \u4ee5\u5de6\u8868\u4e3a\u51c6,\u5373\u627e\u51fa\u6240\u6709\u5458\u5de5\u4fe1\u606f,\u5f53\u7136\u5305\u62ec\u6ca1\u6709\u90e8\u95e8\u7684\u5458\u5de5 -- \u672c\u8d28\u5c31\u662f\uff1a\u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u5de6\u8fb9\u6709\u53f3\u8fb9\u6ca1\u6709\u7684\u7ed3\u679c + ----+------------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ----+------------+--------+------+--------+------+--------------+ | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | | 6 | jingliyang | female | 18 | 204 | NULL | NULL | + ----+------------+--------+------+--------+------+--------------+ \u53f3\u8fde\u63a5 : \u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u4f18\u5148\u663e\u793a\u53f3\u8868\u5168\u90e8\u8bb0\u5f55 right join select * from employee right join department on employee . dep_id = department . id ; -- \u4ee5\u53f3\u8868\u4e3a\u51c6,\u5373\u627e\u51fa\u6240\u6709\u90e8\u95e8\u4fe1\u606f,\u5305\u62ec\u6ca1\u6709\u5458\u5de5\u7684\u90e8\u95e8 -- \u672c\u8d28\u5c31\u662f\uff1a\u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u53f3\u8fb9\u6709\u5de6\u8fb9\u6ca1\u6709\u7684\u7ed3\u679c + ------+-----------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ------+-----------+--------+------+--------+------+--------------+ | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | NULL | NULL | NULL | NULL | NULL | 203 | \u8fd0\u8425 | + ------+-----------+--------+------+--------+------+--------------+ \u5168\u5916\u8fde\u63a5 : \u663e\u793a\u5de6\u53f3\u4e24\u4e2a\u8868\u5168\u90e8\u8bb0\u5f55 \u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u5de6\u8fb9\u6709\u53f3\u8fb9\u6ca1\u6709\u7684\u548c\u53f3\u8fb9\u6709\u5de6\u8fb9\u6ca1\u6709\u7684\u7ed3\u679c -- \u6ce8\u610f: mysql\u4e0d\u652f\u6301\u5168\u5916\u8fde\u63a5 full JOIN -- \u53ef\u4ee5\u7528union\u4e0a\u4e0b\u8fde\u8868\u95f4\u63a5\u5b9e\u73b0 -- \u4e0a\u4e0b\u8868\u7684\u5b57\u6bb5\u5b8c\u5168\u4e00\u81f4\u7684\u8bdd union\u4f1a\u81ea\u52a8\u53bb\u91cd (\u82e5\u4f7f\u7528union all\u5219\u4e0d\u4f1a\u53bb\u91cd) mysql > select * from employee left join department on employee . dep_id = department . id -> union -> select * from employee right join department on employee . dep_id = department . id ; + ------+------------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ------+------------+--------+------+--------+------+--------------+ | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | | 6 | jingliyang | female | 18 | 204 | NULL | NULL | | NULL | NULL | NULL | NULL | NULL | 203 | \u8fd0\u8425 | + ------+------------+--------+------+--------+------+--------------+ \u601d\u7ef4\u6269\u5c55: \u4e24\u4e2a\u53ca\u4ee5\u4e0a\u6570\u91cf\u7684\u7269\u7406\u8868\u8fde\u63a5\u3001\u5355\u8868\u81ea\u5df1\u8fde\u63a5\u81ea\u5df1\u3001\u4e5f\u53ef\u4ee5\u8ddf\u865a\u62df\u8868\u8fdb\u884c\u8fde\u63a5. \u865a\u62df\u8868 -- \u901a\u8fc7select\u8bed\u53e5\u67e5\u8be2\u5c55\u793a\u51fa\u6765\u7684\u7ed3\u679c\u8868 \u5b83\u4e0d\u662f\u5b58\u5728\u4e8e\u786c\u76d8\u4e0a\u7684\u7269\u7406\u8868 (select\u6709\u70b9\u7c7b\u4f3c\u4e8eprint) \u5c06\u8fde\u8868\u64cd\u4f5c\u540e\u4ea7\u751f\u7684\u865a\u62df\u8868\u770b\u4f5c\u6210\u4e00\u4e2a\u5355\u8868 \u8fdb\u884c\u5355\u8868\u67e5\u8be2\u64cd\u4f5c\uff01\uff01 \u67e5\u8be2\u6280\u672f\u90e8\u95e8\u6240\u6709\u5458\u5de5\u7684\u540d\u5b57 select employee.name from employee inner join department on employee.dep_id = department.id where department.name = '\u6280\u672f'; \u67e5\u8be2\u6bcf\u4e2a\u90e8\u95e8\u7684\u5458\u5de5\u7684\u5e73\u5747\u5e74\u9f84 select department.name,avg(age) from employee inner join department on employee.dep_id = department.id group by department.name; \u5b50\u67e5\u8be2 \u00b6 \u5b50\u67e5\u8be2\u662f\u5c06\u4e00\u4e2a\u67e5\u8be2\u8bed\u53e5\u5d4c\u5957\u5728\u53e6\u4e00\u4e2a\u67e5\u8be2\u8bed\u53e5\u4e2d; \u5185\u5c42\u67e5\u8be2\u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c,\u53ef\u4ee5\u4e3a\u5916\u5c42\u67e5\u8be2\u8bed\u53e5\u63d0\u4f9b\u67e5\u8be2\u6761\u4ef6. \u5b50\u67e5\u8be2\u4e2d\u53ef\u4ee5\u5305\u542b\uff1aIN\u3001NOT IN\u3001ANY\u3001ALL\u3001EXISTS \u548c NOT EXISTS\u7b49\u5173\u952e\u5b57 \u8fd8\u53ef\u4ee5\u5305\u542b\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff1a= \u3001 !=\u3001> \u3001<\u7b49 \u7528\u62ec\u53f7\u62ec\u8d77\u6765\u5c31\u662f\u4e00\u4e2a\u7ed3\u679c\u96c6\u5566 \uff01\uff01 in \u00b6 not in\u65e0\u6cd5\u5904\u7406\u6709null\u503c\u7684\u7ed3\u679c\u96c6 \u5728sql\u4e2d,in\u4f1a\u8d70\u7d22\u5f15,not in\u4e0d\u4f1a.. -- \u67e5\u8be2\u6280\u672f\u90e8\u548c\u9500\u552e\u90e8\u7684\u5458\u5de5\u540d\u5b57 select name from employee where dep_id in ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); -- \u67e5\u8be2\u5e73\u5747\u5e74\u9f84\u572825\u5c81\u4ee5\u4e0a\u7684\u90e8\u95e8\u540d select id , name from department where id in ( select dep_id from employee group by dep_id having avg ( age ) > 25 ); -- \u67e5\u770b\u4e0d\u8db31\u4eba\u7684\u90e8\u95e8\u540d(\u5b50\u67e5\u8be2\u5f97\u5230\u7684\u662f\u6709\u4eba\u7684\u90e8\u95e8id) select name from department where id not in ( select distinct dep_id from employee ); -- \u6ce8\u610f: not in\u65e0\u6cd5\u5904\u7406null\u7684\u503c,\u5373\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u4e2d\u5982\u679c\u5b58\u5728null\u503c,not in\u5c06\u65e0\u6cd5\u5904\u7406 -- \u5047\u8bbe employee\u7684\u67d0\u4e00\u884cdep_id\u5b57\u6bb5\u7684\u6570\u636e\u503c\u4e3anull \u90a3\u4e48\u4e0a\u65b9\u7684\u8fd9\u6761\u67e5\u8be2\u7ed3\u679c\u4e3a\u7a7a \u89e3\u51b3\u5982\u4e0b: select name from department where id not in ( select distinct dep_id from employee where dep_id is not null ); any \u00b6 any \u4efb\u4f55\u4e00\u4e2a any \u5fc5\u987b\u548c\u5176\u4ed6\u7684\u6bd4\u8f83\u8fd0\u7b97\u7b26\u5171\u540c\u4f7f\u7528, \u5e76\u4e14\u6bd4\u8f83\u8fd0\u7b97\u7b26\u5728any \u5173\u952e\u5b57\u4e4b\u524d any\u6bd4in\u5f3a\u5927\u7684\u5730\u65b9\u5728\u4e8e any\u53ef\u4ee5 >\u3001< \u7684\u6bd4\u8f83 select name from employee where dep_id in ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); -- \u7b49\u540c\u4e8e -- \u6ce8\u610f\u4e00\u70b9 any('\u6b64\u7ed3\u679c\u96c6\u5fc5\u987b\u662f\u4e00\u6761\u67e5\u8be2\u8bed\u53e5\u5f97\u6765\u7684') -- any(1,2,3)\u62a5\u8bed\u6cd5\u9519\uff01 \u4f46\u662f in(1,2,3)\u80fd\u6b63\u5e38\u8fd0\u884c. select name from employee where dep_id = any ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); ----- ----- ----- ----- ------ -- \u53ea\u8981 dep_id \u5927\u4e8e \u7ed3\u679c\u96c6\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u503c\u5c31\u6210\u7acb select name from employee where dep_id > any ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); # \u6848\u4f8b : \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e\u4efb\u4e00\u90e8\u95e8\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u4fe1\u606f .( \u5927\u4e8e\u7ed3\u679c\u96c6\u4e2d\u6700\u5c0f\u7684 ) -- \u4e5f\u53ef\u4ee5\u9ebb\u70e6\u4e00\u70b9 group by+order by+limit\u5b9e\u73b0 select * from employee where age > any ( select avg ( age ) from employee group by dep_id ); all \u00b6 all\u540cany\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7all\u8868\u793a\u7684\u662f\u6240\u6709\uff0cany\u8868\u793a\u4efb\u4e00 # \u6848\u4f8b : \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e\u6240\u6709\u90e8\u95e8\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u4fe1\u606f .( \u5927\u4e8e\u7ed3\u679c\u96c6\u4e2d\u6700\u5927\u7684 ) select * from employee where age > all ( select avg ( age ) from employee group by dep_id ); \u6bd4\u8f83\u8fd0\u7b97\u7b26 \u00b6 \u6bd4\u8f83\u7684\u662f\u4e00\u4e2a\u503c -- \u67e5\u8be2\u5927\u4e8e\u6240\u6709\u4eba\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u59d3\u540d\u4e0e\u5e74\u9f84 select name , age from employee where age > ( select avg ( age ) from employee ); exists \u00b6 in any all \u90fd\u662f\u5185\u5c42\u8bed\u53e5\u67e5\u8be2\u5b8c\u4e86\u62ff\u5230\u4e00\u4e2a\u7ed3\u679c \u518d\u6267\u884c\u5916\u5c42\u8bed\u53e5 exists\u4e0d\u540c \u5b83\u7c7b\u4f3c\u4e8e\u4e00\u4e2afor\u5faa\u73af\u5d4c\u5957 exists\u8fd4\u56de\u4e00\u4e2a\u771f\u5047\u503cTrue\u6216False -- \u67e5\u8be2\u6709\u5458\u5de5\u7684\u90e8\u95e8 /* exists\u7684\u6267\u884c\u539f\u7406\u4e3a\uff1a 1\u3001\u4f9d\u6b21\u6267\u884c\u5916\u90e8\u67e5\u8be2\uff1a\u5373select * from department 2\u3001\u7136\u540e\u4e3a\u5916\u90e8\u67e5\u8be2\u8fd4\u56de\u7684\u6bcf\u4e00\u884c\u5206\u522b\u6267\u884c\u4e00\u6b21\u5b50\u67e5\u8be2\uff1a \u5373(select * from employee where employee.dep_id = department.id) 3\u3001\u5b50\u67e5\u8be2\u5982\u679c\u8fd4\u56de\u884c\uff0c\u5219exists\u6761\u4ef6\u6210\u7acb\uff0c\u6761\u4ef6\u6210\u7acb\u5219\u8f93\u51fa\u5916\u90e8\u67e5\u8be2\u53d6\u51fa\u7684\u90a3\u6761\u8bb0\u5f55 */ select * from department where exists ( select * from employee where employee . dep_id = department . id ); /* \u4f2a\u4ee3\u7801\uff01\uff01 for line in deaprtment: flag = False for x in employee: -- \u5185\u5c42\u5faa\u73af\u5b8c if employee.dep_id = department.id: flag = True -- \u4e0d\u7ba1\u6709\u51e0\u4e2a\u6210\u7acb \u53ea\u8981\u6709\u5c31\u884c if flag == True: print(line) */ \u9898\u5916\u8bdd(\u6709\u5f85\u5546\u69b7): exists\u4e0ein; not exists\u4e0enot in /* exists\u4e0ein */ -- in()\u7684\u5b50\u67e5\u8be2\u4f1a\u5148\u4ea7\u751f\u7ed3\u679c\u96c6,\u518d\u7ed3\u5408\u524d\u9762exists\u7684\u6267\u884c\u539f\u7406,in \u7684\u6267\u884c\u6548\u7387\u662f\u5feb\u4e8eexists\u7684. /* not exists\u4e0enot in */ -- not exists\u67e5\u8be2\u7684\u6548\u7387\u8fdc\u8fdc\u9ad8\u4e0enot in\u67e5\u8be2\u7684\u6548\u7387 \u7ec3\u4e60\uff01\uff01\uff01 \u00b6 \u67e5\u8be2\u6bcf\u4e2a\u90e8\u95e8\u6700\u65b0\u5165\u804c\u7684\u90a3\u4f4d\u5458\u5de5 \u5e94\u7528\u573a\u666f\u6269\u5c55: \u67d0\u7f51\u7ad9\u5728\u5168\u56fd\u5404\u4e2a\u5e02\u90fd\u6709\u7ad9\u70b9,\u6bcf\u4e2a\u7ad9\u70b9\u90fd\u6709\u4e00\u6761\u6570\u636e,\u60f3\u53d6\u6bcf\u4e2a\u7701\u4e0b\u6700\u65b0\u7684\u90a3\u4e00\u6761 \u5e02\u7684\u7f51\u7ad9\u8d28\u91cf\u4fe1\u606f /* A\u8868 \u8ddf \u901a\u8fc7A\u8868\u67e5\u8be2\u51fa\u6765\u7684\u865a\u62df\u8868 \u8fdb\u884c\u5173\u8054 */ -- \u6bcf\u4e2a\u90e8\u95e8\u5458\u5de5\u7684\u6700\u5927\u5165\u804c\u65f6\u95f4. SELECT post , max ( hire_date ) AS max_date FROM emp GROUP BY post ; -- \u8fd9\u6837\u8fde\u8868\u540e \u6bcf\u4e2a\u5458\u5de5\u7684\u4fe1\u606f\u6700\u540e\u9762\u90fd\u8ddf\u7740\u672c\u90e8\u95e8\u6700\u5927\u7684\u5165\u804c\u65f6\u95f4 SELECT * FROM emp INNER JOIN ( SELECT post , max ( hire_date ) FROM emp GROUP BY post ) AS t2 -- \u7ed9\u865a\u62df(\u4e34\u65f6)\u8868\u8d77\u522b\u540d\uff01\uff01\u5f88\u91cd\u8981 ON emp . post = t2 . post -- \u5458\u5de5\u7684\u5165\u804c\u65f6\u95f4\u7b49\u4e8e\u672c\u90e8\u95e8\u6700\u5927\u7684\u5165\u804c\u65f6\u95f4\u5373\u53ef SELECT * FROM emp AS t1 INNER JOIN -- as max_date \u7ed9\u4f7f\u7528\u805a\u5408\u51fd\u6570\u7684\u5b57\u6bb5\u8d77\u4e86\u522b\u540d \u4fbf\u4e8e\u540e\u9762\u7684where\u6761\u4ef6 ( SELECT post , max ( hire_date ) as max_date FROM emp GROUP BY post ) AS t2 ON t1 . post = t2 . post where t1 . hire_date = t2 . max_date ;","title":"\u591a\u8868\u67e5\u8be2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_1","text":"","title":"\u94fe\u8868\u67e5\u8be2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_2","text":"-- \u5efa\u8868 -- \u5728\u786c\u76d8\u4e0a department\u548cemployee\u5c31\u662f\u4e24\u5f20\u7269\u7406\u8868 create table department ( id int , name varchar ( 20 ) ); create table employee ( id int primary key auto_increment , name varchar ( 20 ), sex enum ( 'male' , 'female' ) not null default 'male' , age int , dep_id int -- \u4e24\u8868\u5173\u7cfb\u4e0d\u662f\u4e00\u5b9a\u9700\u8981\u5efa\u7acbforeign key\u5916\u952e\u7684 \u4e0d\u8ba9\u4e24\u8005\u5f3a\u8026\u5408 \u5177\u6709\u66f4\u9ad8\u7684\u6269\u5c55\u6027 ); -- \u63d2\u5165\u6570\u636e insert into department values ( 200 , '\u6280\u672f' ), ( 201 , '\u4eba\u529b\u8d44\u6e90' ), ( 202 , '\u9500\u552e' ), ( 203 , '\u8fd0\u8425' ); insert into employee ( name , sex , age , dep_id ) values ( 'egon' , 'male' , 18 , 200 ), ( 'alex' , 'female' , 48 , 201 ), ( 'wupeiqi' , 'male' , 38 , 201 ), ( 'yuanhao' , 'female' , 28 , 202 ), ( 'liwenzhou' , 'male' , 18 , 200 ), ( 'jingliyang' , 'female' , 18 , 204 ); -- \u65e0\u6548\u6570\u636e \u6ca1\u6709id\u4e3a204\u7684\u90e8\u95e8\u5b58\u5728","title":"\u6570\u636e\u51c6\u5907"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_3","text":"\u4ea4\u53c9\u8fde\u63a5: \u5c06\u4e24\u8868\u5408\u5728\u4e00\u8d77 \u751f\u6210\u7b1b\u5361\u5c14\u79ef. \u5047\u5982A\u8868\u4e2d\u7684\u6570\u636e\u4e3am\u884c\uff0cB\u8868\u4e2d\u7684\u6570\u636e\u6709n\u884c\uff0c\u90a3\u4e48A\u548cB\u505a\u7b1b\u5361\u5c14\u79ef\uff0c\u7ed3\u679c\u4e3am*n\u884c select * from employee,department;","title":"\u4ea4\u53c9\u8fde\u63a5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_4","text":"\u5185\u8fde\u63a5: \u53ea\u4fdd\u7559\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\u8bb0\u5f55... (\u53ea\u8fde\u63a5\u5339\u914d\u7684\u884c \u7b5b\u9009\u51fa\u7b1b\u5361\u5c14\u79ef\u4e2d\u6211\u4eec\u9700\u8981\u7684\u8bb0\u5f55) \u7528where\u5173\u952e\u5b57\u53ef\u4ee5\u5b8c\u6210\u60f3\u8981\u7684\u62fc\u63a5\u6548\u679c(\u4e0d\u5efa\u8bae.) where\u5e94\u8be5\u7528\u4e8e\u7b5b\u9009\u6570\u636e. '\u672f\u6709\u4e13\u653b'. \u4f46\u5b83\u7b49\u540c\u4e8e\u4e0b\u65b9\u7528inner join\u7684sql\u8bed\u53e5~ select * from employee,department where employee.dep_id = department.id; (\u662f\u5185\u8fde\u63a5\u54e6\uff01\uff01) \u7528inner join\u5173\u952e\u5b57\uff01\uff01\uff01 select * from employee inner join department on employee . dep_id = department . id ; -- \u8054\u8868\u7ed3\u679c\u5982\u4e0b: -- (203,'\u8fd0\u8425') ('jingliyang','female',18,204) \u5b83\u4eec\u4e24\u90fd\u6ca1\u6709\u5bf9\u5e94\u7684\u8bb0\u5f55 + ----+-----------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ----+-----------+--------+------+--------+------+--------------+ | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | + ----+-----------+--------+------+--------+------+--------------+","title":"\u5185\u8fde\u63a5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_5","text":"\u5916\u8fde\u63a5: \u82e5\u60f3\u8ba9\u8054\u8868\u4fdd\u7559\u4e24\u8868\u4e2d\u6ca1\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\u8bb0\u5f55 \u5c31\u7528\u5916\u8fde\u63a5 \u5de6\u8fde\u63a5 : \u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u4f18\u5148\u663e\u793a\u5de6\u8868\u5168\u90e8\u8bb0\u5f55 left join select * from employee left join department on employee . dep_id = department . id ; -- \u4ee5\u5de6\u8868\u4e3a\u51c6,\u5373\u627e\u51fa\u6240\u6709\u5458\u5de5\u4fe1\u606f,\u5f53\u7136\u5305\u62ec\u6ca1\u6709\u90e8\u95e8\u7684\u5458\u5de5 -- \u672c\u8d28\u5c31\u662f\uff1a\u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u5de6\u8fb9\u6709\u53f3\u8fb9\u6ca1\u6709\u7684\u7ed3\u679c + ----+------------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ----+------------+--------+------+--------+------+--------------+ | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | | 6 | jingliyang | female | 18 | 204 | NULL | NULL | + ----+------------+--------+------+--------+------+--------------+ \u53f3\u8fde\u63a5 : \u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u4f18\u5148\u663e\u793a\u53f3\u8868\u5168\u90e8\u8bb0\u5f55 right join select * from employee right join department on employee . dep_id = department . id ; -- \u4ee5\u53f3\u8868\u4e3a\u51c6,\u5373\u627e\u51fa\u6240\u6709\u90e8\u95e8\u4fe1\u606f,\u5305\u62ec\u6ca1\u6709\u5458\u5de5\u7684\u90e8\u95e8 -- \u672c\u8d28\u5c31\u662f\uff1a\u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u53f3\u8fb9\u6709\u5de6\u8fb9\u6ca1\u6709\u7684\u7ed3\u679c + ------+-----------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ------+-----------+--------+------+--------+------+--------------+ | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | NULL | NULL | NULL | NULL | NULL | 203 | \u8fd0\u8425 | + ------+-----------+--------+------+--------+------+--------------+ \u5168\u5916\u8fde\u63a5 : \u663e\u793a\u5de6\u53f3\u4e24\u4e2a\u8868\u5168\u90e8\u8bb0\u5f55 \u5728\u5185\u8fde\u63a5\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u5de6\u8fb9\u6709\u53f3\u8fb9\u6ca1\u6709\u7684\u548c\u53f3\u8fb9\u6709\u5de6\u8fb9\u6ca1\u6709\u7684\u7ed3\u679c -- \u6ce8\u610f: mysql\u4e0d\u652f\u6301\u5168\u5916\u8fde\u63a5 full JOIN -- \u53ef\u4ee5\u7528union\u4e0a\u4e0b\u8fde\u8868\u95f4\u63a5\u5b9e\u73b0 -- \u4e0a\u4e0b\u8868\u7684\u5b57\u6bb5\u5b8c\u5168\u4e00\u81f4\u7684\u8bdd union\u4f1a\u81ea\u52a8\u53bb\u91cd (\u82e5\u4f7f\u7528union all\u5219\u4e0d\u4f1a\u53bb\u91cd) mysql > select * from employee left join department on employee . dep_id = department . id -> union -> select * from employee right join department on employee . dep_id = department . id ; + ------+------------+--------+------+--------+------+--------------+ | id | name | sex | age | dep_id | id | name | + ------+------------+--------+------+--------+------+--------------+ | 1 | egon | male | 18 | 200 | 200 | \u6280\u672f | | 2 | alex | female | 48 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 3 | wupeiqi | male | 38 | 201 | 201 | \u4eba\u529b\u8d44\u6e90 | | 4 | yuanhao | female | 28 | 202 | 202 | \u9500\u552e | | 5 | liwenzhou | male | 18 | 200 | 200 | \u6280\u672f | | 6 | jingliyang | female | 18 | 204 | NULL | NULL | | NULL | NULL | NULL | NULL | NULL | 203 | \u8fd0\u8425 | + ------+------------+--------+------+--------+------+--------------+ \u601d\u7ef4\u6269\u5c55: \u4e24\u4e2a\u53ca\u4ee5\u4e0a\u6570\u91cf\u7684\u7269\u7406\u8868\u8fde\u63a5\u3001\u5355\u8868\u81ea\u5df1\u8fde\u63a5\u81ea\u5df1\u3001\u4e5f\u53ef\u4ee5\u8ddf\u865a\u62df\u8868\u8fdb\u884c\u8fde\u63a5. \u865a\u62df\u8868 -- \u901a\u8fc7select\u8bed\u53e5\u67e5\u8be2\u5c55\u793a\u51fa\u6765\u7684\u7ed3\u679c\u8868 \u5b83\u4e0d\u662f\u5b58\u5728\u4e8e\u786c\u76d8\u4e0a\u7684\u7269\u7406\u8868 (select\u6709\u70b9\u7c7b\u4f3c\u4e8eprint) \u5c06\u8fde\u8868\u64cd\u4f5c\u540e\u4ea7\u751f\u7684\u865a\u62df\u8868\u770b\u4f5c\u6210\u4e00\u4e2a\u5355\u8868 \u8fdb\u884c\u5355\u8868\u67e5\u8be2\u64cd\u4f5c\uff01\uff01 \u67e5\u8be2\u6280\u672f\u90e8\u95e8\u6240\u6709\u5458\u5de5\u7684\u540d\u5b57 select employee.name from employee inner join department on employee.dep_id = department.id where department.name = '\u6280\u672f'; \u67e5\u8be2\u6bcf\u4e2a\u90e8\u95e8\u7684\u5458\u5de5\u7684\u5e73\u5747\u5e74\u9f84 select department.name,avg(age) from employee inner join department on employee.dep_id = department.id group by department.name;","title":"\u5916\u8fde\u63a5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_6","text":"\u5b50\u67e5\u8be2\u662f\u5c06\u4e00\u4e2a\u67e5\u8be2\u8bed\u53e5\u5d4c\u5957\u5728\u53e6\u4e00\u4e2a\u67e5\u8be2\u8bed\u53e5\u4e2d; \u5185\u5c42\u67e5\u8be2\u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c,\u53ef\u4ee5\u4e3a\u5916\u5c42\u67e5\u8be2\u8bed\u53e5\u63d0\u4f9b\u67e5\u8be2\u6761\u4ef6. \u5b50\u67e5\u8be2\u4e2d\u53ef\u4ee5\u5305\u542b\uff1aIN\u3001NOT IN\u3001ANY\u3001ALL\u3001EXISTS \u548c NOT EXISTS\u7b49\u5173\u952e\u5b57 \u8fd8\u53ef\u4ee5\u5305\u542b\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff1a= \u3001 !=\u3001> \u3001<\u7b49 \u7528\u62ec\u53f7\u62ec\u8d77\u6765\u5c31\u662f\u4e00\u4e2a\u7ed3\u679c\u96c6\u5566 \uff01\uff01","title":"\u5b50\u67e5\u8be2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#in","text":"not in\u65e0\u6cd5\u5904\u7406\u6709null\u503c\u7684\u7ed3\u679c\u96c6 \u5728sql\u4e2d,in\u4f1a\u8d70\u7d22\u5f15,not in\u4e0d\u4f1a.. -- \u67e5\u8be2\u6280\u672f\u90e8\u548c\u9500\u552e\u90e8\u7684\u5458\u5de5\u540d\u5b57 select name from employee where dep_id in ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); -- \u67e5\u8be2\u5e73\u5747\u5e74\u9f84\u572825\u5c81\u4ee5\u4e0a\u7684\u90e8\u95e8\u540d select id , name from department where id in ( select dep_id from employee group by dep_id having avg ( age ) > 25 ); -- \u67e5\u770b\u4e0d\u8db31\u4eba\u7684\u90e8\u95e8\u540d(\u5b50\u67e5\u8be2\u5f97\u5230\u7684\u662f\u6709\u4eba\u7684\u90e8\u95e8id) select name from department where id not in ( select distinct dep_id from employee ); -- \u6ce8\u610f: not in\u65e0\u6cd5\u5904\u7406null\u7684\u503c,\u5373\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u4e2d\u5982\u679c\u5b58\u5728null\u503c,not in\u5c06\u65e0\u6cd5\u5904\u7406 -- \u5047\u8bbe employee\u7684\u67d0\u4e00\u884cdep_id\u5b57\u6bb5\u7684\u6570\u636e\u503c\u4e3anull \u90a3\u4e48\u4e0a\u65b9\u7684\u8fd9\u6761\u67e5\u8be2\u7ed3\u679c\u4e3a\u7a7a \u89e3\u51b3\u5982\u4e0b: select name from department where id not in ( select distinct dep_id from employee where dep_id is not null );","title":"in"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#any","text":"any \u4efb\u4f55\u4e00\u4e2a any \u5fc5\u987b\u548c\u5176\u4ed6\u7684\u6bd4\u8f83\u8fd0\u7b97\u7b26\u5171\u540c\u4f7f\u7528, \u5e76\u4e14\u6bd4\u8f83\u8fd0\u7b97\u7b26\u5728any \u5173\u952e\u5b57\u4e4b\u524d any\u6bd4in\u5f3a\u5927\u7684\u5730\u65b9\u5728\u4e8e any\u53ef\u4ee5 >\u3001< \u7684\u6bd4\u8f83 select name from employee where dep_id in ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); -- \u7b49\u540c\u4e8e -- \u6ce8\u610f\u4e00\u70b9 any('\u6b64\u7ed3\u679c\u96c6\u5fc5\u987b\u662f\u4e00\u6761\u67e5\u8be2\u8bed\u53e5\u5f97\u6765\u7684') -- any(1,2,3)\u62a5\u8bed\u6cd5\u9519\uff01 \u4f46\u662f in(1,2,3)\u80fd\u6b63\u5e38\u8fd0\u884c. select name from employee where dep_id = any ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); ----- ----- ----- ----- ------ -- \u53ea\u8981 dep_id \u5927\u4e8e \u7ed3\u679c\u96c6\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u503c\u5c31\u6210\u7acb select name from employee where dep_id > any ( select id from department where name = '\u6280\u672f' or name = '\u9500\u552e' ); # \u6848\u4f8b : \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e\u4efb\u4e00\u90e8\u95e8\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u4fe1\u606f .( \u5927\u4e8e\u7ed3\u679c\u96c6\u4e2d\u6700\u5c0f\u7684 ) -- \u4e5f\u53ef\u4ee5\u9ebb\u70e6\u4e00\u70b9 group by+order by+limit\u5b9e\u73b0 select * from employee where age > any ( select avg ( age ) from employee group by dep_id );","title":"any"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#all","text":"all\u540cany\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7all\u8868\u793a\u7684\u662f\u6240\u6709\uff0cany\u8868\u793a\u4efb\u4e00 # \u6848\u4f8b : \u67e5\u8be2\u5e74\u9f84\u5927\u4e8e\u6240\u6709\u90e8\u95e8\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u4fe1\u606f .( \u5927\u4e8e\u7ed3\u679c\u96c6\u4e2d\u6700\u5927\u7684 ) select * from employee where age > all ( select avg ( age ) from employee group by dep_id );","title":"all"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_7","text":"\u6bd4\u8f83\u7684\u662f\u4e00\u4e2a\u503c -- \u67e5\u8be2\u5927\u4e8e\u6240\u6709\u4eba\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u59d3\u540d\u4e0e\u5e74\u9f84 select name , age from employee where age > ( select avg ( age ) from employee );","title":"\u6bd4\u8f83\u8fd0\u7b97\u7b26"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#exists","text":"in any all \u90fd\u662f\u5185\u5c42\u8bed\u53e5\u67e5\u8be2\u5b8c\u4e86\u62ff\u5230\u4e00\u4e2a\u7ed3\u679c \u518d\u6267\u884c\u5916\u5c42\u8bed\u53e5 exists\u4e0d\u540c \u5b83\u7c7b\u4f3c\u4e8e\u4e00\u4e2afor\u5faa\u73af\u5d4c\u5957 exists\u8fd4\u56de\u4e00\u4e2a\u771f\u5047\u503cTrue\u6216False -- \u67e5\u8be2\u6709\u5458\u5de5\u7684\u90e8\u95e8 /* exists\u7684\u6267\u884c\u539f\u7406\u4e3a\uff1a 1\u3001\u4f9d\u6b21\u6267\u884c\u5916\u90e8\u67e5\u8be2\uff1a\u5373select * from department 2\u3001\u7136\u540e\u4e3a\u5916\u90e8\u67e5\u8be2\u8fd4\u56de\u7684\u6bcf\u4e00\u884c\u5206\u522b\u6267\u884c\u4e00\u6b21\u5b50\u67e5\u8be2\uff1a \u5373(select * from employee where employee.dep_id = department.id) 3\u3001\u5b50\u67e5\u8be2\u5982\u679c\u8fd4\u56de\u884c\uff0c\u5219exists\u6761\u4ef6\u6210\u7acb\uff0c\u6761\u4ef6\u6210\u7acb\u5219\u8f93\u51fa\u5916\u90e8\u67e5\u8be2\u53d6\u51fa\u7684\u90a3\u6761\u8bb0\u5f55 */ select * from department where exists ( select * from employee where employee . dep_id = department . id ); /* \u4f2a\u4ee3\u7801\uff01\uff01 for line in deaprtment: flag = False for x in employee: -- \u5185\u5c42\u5faa\u73af\u5b8c if employee.dep_id = department.id: flag = True -- \u4e0d\u7ba1\u6709\u51e0\u4e2a\u6210\u7acb \u53ea\u8981\u6709\u5c31\u884c if flag == True: print(line) */ \u9898\u5916\u8bdd(\u6709\u5f85\u5546\u69b7): exists\u4e0ein; not exists\u4e0enot in /* exists\u4e0ein */ -- in()\u7684\u5b50\u67e5\u8be2\u4f1a\u5148\u4ea7\u751f\u7ed3\u679c\u96c6,\u518d\u7ed3\u5408\u524d\u9762exists\u7684\u6267\u884c\u539f\u7406,in \u7684\u6267\u884c\u6548\u7387\u662f\u5feb\u4e8eexists\u7684. /* not exists\u4e0enot in */ -- not exists\u67e5\u8be2\u7684\u6548\u7387\u8fdc\u8fdc\u9ad8\u4e0enot in\u67e5\u8be2\u7684\u6548\u7387","title":"exists"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/7_multi_query/#_8","text":"\u67e5\u8be2\u6bcf\u4e2a\u90e8\u95e8\u6700\u65b0\u5165\u804c\u7684\u90a3\u4f4d\u5458\u5de5 \u5e94\u7528\u573a\u666f\u6269\u5c55: \u67d0\u7f51\u7ad9\u5728\u5168\u56fd\u5404\u4e2a\u5e02\u90fd\u6709\u7ad9\u70b9,\u6bcf\u4e2a\u7ad9\u70b9\u90fd\u6709\u4e00\u6761\u6570\u636e,\u60f3\u53d6\u6bcf\u4e2a\u7701\u4e0b\u6700\u65b0\u7684\u90a3\u4e00\u6761 \u5e02\u7684\u7f51\u7ad9\u8d28\u91cf\u4fe1\u606f /* A\u8868 \u8ddf \u901a\u8fc7A\u8868\u67e5\u8be2\u51fa\u6765\u7684\u865a\u62df\u8868 \u8fdb\u884c\u5173\u8054 */ -- \u6bcf\u4e2a\u90e8\u95e8\u5458\u5de5\u7684\u6700\u5927\u5165\u804c\u65f6\u95f4. SELECT post , max ( hire_date ) AS max_date FROM emp GROUP BY post ; -- \u8fd9\u6837\u8fde\u8868\u540e \u6bcf\u4e2a\u5458\u5de5\u7684\u4fe1\u606f\u6700\u540e\u9762\u90fd\u8ddf\u7740\u672c\u90e8\u95e8\u6700\u5927\u7684\u5165\u804c\u65f6\u95f4 SELECT * FROM emp INNER JOIN ( SELECT post , max ( hire_date ) FROM emp GROUP BY post ) AS t2 -- \u7ed9\u865a\u62df(\u4e34\u65f6)\u8868\u8d77\u522b\u540d\uff01\uff01\u5f88\u91cd\u8981 ON emp . post = t2 . post -- \u5458\u5de5\u7684\u5165\u804c\u65f6\u95f4\u7b49\u4e8e\u672c\u90e8\u95e8\u6700\u5927\u7684\u5165\u804c\u65f6\u95f4\u5373\u53ef SELECT * FROM emp AS t1 INNER JOIN -- as max_date \u7ed9\u4f7f\u7528\u805a\u5408\u51fd\u6570\u7684\u5b57\u6bb5\u8d77\u4e86\u522b\u540d \u4fbf\u4e8e\u540e\u9762\u7684where\u6761\u4ef6 ( SELECT post , max ( hire_date ) as max_date FROM emp GROUP BY post ) AS t2 ON t1 . post = t2 . post where t1 . hire_date = t2 . max_date ;","title":"\u7ec3\u4e60\uff01\uff01\uff01"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/8_query_practice/","text":"\u67e5\u8be2\u7ec3\u4e60 -_- \u00b6 \u6ce8\u610fsql\u8bed\u53e5\u7684\u7f8e\u5316... (\u00b4\u25bd\uff40) \u5934\u53d1\u6ca1\u4e86 :-) \u6570\u636e\u7684\u51c6\u5907 \u00b6 create database egon default charset utf8 collate utf8_general_ci ; use egon ; create table class ( cid int auto_increment primary key , caption varchar ( 16 ) not null ); create table teacher ( tid int auto_increment primary key , tname varchar ( 16 ) not null ); create table student ( sid int auto_increment primary key , -- sex enum('male','female') not null default 'male', gender enum ( '\u7537' , '\u5973' ) not null , class_id int not null , sname varchar ( 16 ) not null , constraint fk_student_class foreign key ( class_id ) references class ( cid ) on delete cascade on update cascade ); create table course ( cid int auto_increment primary key , cname varchar ( 16 ), teacher_id int not null , constraint fk_course_teacher foreign key ( teacher_id ) references teacher ( tid ) on delete cascade on update cascade ); create table score ( sid int auto_increment primary key , student_id int not null , course_id int not null , num int not null , constraint fk_score_student foreign key ( student_id ) references student ( sid ) on delete cascade on update cascade , constraint fk_score_course foreign key ( course_id ) references course ( cid ) on delete cascade on update cascade ); INSERT INTO class VALUES ( '1' , '\u4e09\u5e74\u4e8c\u73ed' ), ( '2' , '\u4e09\u5e74\u4e09\u73ed' ), ( '3' , '\u4e00\u5e74\u4e8c\u73ed' ), ( '4' , '\u4e8c\u5e74\u4e5d\u73ed' ); INSERT INTO ` teacher ` VALUES ( '1' , '\u5f20\u78ca\u8001\u5e08' ), ( '2' , '\u674e\u5e73\u8001\u5e08' ), ( '3' , '\u5218\u6d77\u71d5\u8001\u5e08' ), ( '4' , '\u6731\u4e91\u6d77\u8001\u5e08' ), ( '5' , '\u674e\u6770\u8001\u5e08' ); INSERT INTO student VALUES ( '1' , '\u7537' , '1' , '\u7406\u89e3' ), ( '2' , '\u5973' , '1' , '\u94a2\u86cb' ), ( '3' , '\u7537' , '1' , '\u5f20\u4e09' ), ( '4' , '\u7537' , '1' , '\u5f20\u4e00' ), ( '5' , '\u5973' , '1' , '\u5f20\u4e8c' ), ( '6' , '\u7537' , '1' , '\u5f20\u56db' ), ( '7' , '\u5973' , '2' , '\u94c1\u9524' ), ( '8' , '\u7537' , '2' , '\u674e\u4e09' ), ( '9' , '\u7537' , '2' , '\u674e\u4e00' ), ( '10' , '\u5973' , '2' , '\u674e\u4e8c' ), ( '11' , '\u7537' , '2' , '\u674e\u56db' ), ( '12' , '\u5973' , '3' , '\u5982\u82b1' ), ( '13' , '\u7537' , '3' , '\u5218\u4e09' ), ( '14' , '\u7537' , '3' , '\u5218\u4e00' ), ( '15' , '\u5973' , '3' , '\u5218\u4e8c' ), ( '16' , '\u7537' , '3' , '\u5218\u56db' ); INSERT INTO ` course ` VALUES ( '1' , '\u751f\u7269' , '1' ), ( '2' , '\u7269\u7406' , '2' ), ( '3' , '\u4f53\u80b2' , '3' ), ( '4' , '\u7f8e\u672f' , '2' ); INSERT INTO ` score ` VALUES ( '1' , '1' , '1' , '10' ), ( '2' , '1' , '2' , '9' ), ( '5' , '1' , '4' , '66' ), ( '6' , '2' , '1' , '8' ), ( '8' , '2' , '3' , '68' ), ( '9' , '2' , '4' , '99' ), ( '10' , '3' , '1' , '77' ), ( '11' , '3' , '2' , '66' ), ( '12' , '3' , '3' , '87' ), ( '13' , '3' , '4' , '99' ), ( '14' , '4' , '1' , '79' ), ( '15' , '4' , '2' , '11' ), ( '16' , '4' , '3' , '67' ), ( '17' , '4' , '4' , '100' ), ( '18' , '5' , '1' , '79' ), ( '19' , '5' , '2' , '11' ), ( '20' , '5' , '3' , '67' ), ( '21' , '5' , '4' , '100' ), ( '22' , '6' , '1' , '9' ), ( '23' , '6' , '2' , '100' ), ( '24' , '6' , '3' , '67' ), ( '25' , '6' , '4' , '100' ), ( '26' , '7' , '1' , '9' ), ( '27' , '7' , '2' , '100' ), ( '28' , '7' , '3' , '67' ), ( '29' , '7' , '4' , '88' ), ( '30' , '8' , '1' , '9' ), ( '31' , '8' , '2' , '100' ), ( '32' , '8' , '3' , '67' ), ( '33' , '8' , '4' , '88' ), ( '34' , '9' , '1' , '91' ), ( '35' , '9' , '2' , '88' ), ( '36' , '9' , '3' , '67' ), ( '37' , '9' , '4' , '22' ), ( '38' , '10' , '1' , '90' ), ( '39' , '10' , '2' , '77' ), ( '40' , '10' , '3' , '43' ), ( '41' , '10' , '4' , '87' ), ( '42' , '11' , '1' , '90' ), ( '43' , '11' , '2' , '77' ), ( '44' , '11' , '3' , '43' ), ( '45' , '11' , '4' , '87' ), ( '46' , '12' , '1' , '90' ), ( '47' , '12' , '2' , '77' ), ( '48' , '12' , '3' , '43' ), ( '49' , '12' , '4' , '87' ), ( '52' , '13' , '3' , '87' ); \u7ec3\u4e60\u9898 \u00b6 1\u3001\u67e5\u8be2\u6240\u6709\u7684\u8bfe\u7a0b\u7684\u540d\u79f0\u4ee5\u53ca\u5bf9\u5e94\u7684\u4efb\u8bfe\u8001\u5e08\u59d3\u540d select cname , tname from course inner join teacher on course . teacher_id = teacher . tid ; 2\u3001\u67e5\u8be2\u5b66\u751f\u8868\u4e2d\u7537\u5973\u751f\u5404\u6709\u591a\u5c11\u4eba select gender , count ( 1 ) from student group by gender ; 3\u3001\u67e5\u8be2\u7269\u7406\u6210\u7ee9\u7b49\u4e8e100\u7684\u5b66\u751f\u7684\u59d3\u540d -- \u7269\u7406 \u6210\u7ee9 \u5b66\u751f\u59d3\u540d <\u51ed\u611f\u89c9\u5f80\u6709\u5916\u952e\u7684\u8868\u5f00\u59cb\u601d\u8003> -- \u5148\u627e\u5230\u7269\u7406\u6210\u7ee9\u7b49\u4e8e100\u7684\u5b66\u751f\u7684id select student_id from score inner join course on course . cid = score . course_id where cname = '\u7269\u7406' and num = 100 ; select sname from score inner join course on course . cid = score . course_id inner join student on student . sid = score . student_id where cname = '\u7269\u7406' and num = 100 ; select sname from student where sid in ( select student_id from score inner join course on course . cid = score . course_id where cname = '\u7269\u7406' and num = 100 ); 4\u3001\u67e5\u8be2\u5e73\u5747\u6210\u7ee9\u5927\u4e8e\u516b\u5341\u5206\u7684\u540c\u5b66\u7684\u59d3\u540d\u548c\u5e73\u5747\u6210\u7ee9 select student_id , avg ( num ) from score group by student_id having avg ( num ) > 80 ; select sname , avg_score from student inner join ( select student_id , avg ( num ) as avg_score from score group by student_id having avg ( num ) > 80 ) as t2 on student . sid = t2 . student_id ; 5\u3001\u67e5\u8be2\u6240\u6709\u5b66\u751f\u7684\u5b66\u53f7\uff0c\u59d3\u540d\uff0c\u9009\u8bfe\u6570\uff0c\u603b\u6210\u7ee9 -- \u53ea\u662f\u9009\u4fee\u4e86\u8bfe\u7a0b\u7684\u5b66\u751f inner join -- \u6ce8\u610f:\u6240\u6709\u5b66\u751f\u5e94\u8be5\u5305\u62ec\u672a\u9009\u4fee\u8bfe\u7a0b\u7684 left join select sid , sname , course_num , total_num from student left join ( select student_id , count ( 1 ) as course_num , sum ( num ) as total_num from score group by student_id ) as t on student . sid = t . student_id ; 6\u3001 \u67e5\u8be2\u59d3\u674e\u8001\u5e08\u7684\u4e2a\u6570 select count ( 1 ) from teacher where tname like '\u674e%' ; 7\u3001 \u67e5\u8be2\u6ca1\u6709\u62a5\u674e\u5e73\u8001\u5e08\u8bfe\u7684\u5b66\u751f\u59d3\u540d -- \u674e\u5e73\u8001\u5e08\u6559\u4e86\u54ea\u4e9b\u8bfe select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; -- \u54ea\u4e9b\u5b66\u751f\u9009\u4e86\u674e\u5e73\u8001\u5e08\u7684\u8bfe select distinct student_id from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ); -- \u53d6\u53cd\u5c31\u662f\u6ca1\u9009\u7684\u5b66\u751f\u540d\u5355 select sname from student where sid not in ( select distinct student_id from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' )); 8\u3001 \u67e5\u8be2\u7269\u7406\u8bfe\u7a0b\u6bd4\u751f\u7269\u8bfe\u7a0b\u9ad8\u7684\u5b66\u751f\u7684\u5b66\u53f7 -- \u601d\u8def:\u5206\u522b\u5f97\u5230\u7269\u7406\u6210\u7ee9\u8868\u4e0e\u751f\u7269\u6210\u7ee9\u8868,\u7136\u540e\u8fde\u8868 select t1 . student_id from ( select student_id , num from score where course_id = ( select cid from course where cname = '\u7269\u7406' )) as t1 inner join ( select student_id , num from score where course_id = ( select cid from course where cname = '\u751f\u7269' )) as t2 on t1 . student_id = t2 . student_id where t1 . num > t2 . num ; -- \u601d\u8def: -- \u8fde\u8868\u67e5\u8be2 \u7b5b\u9009\u51fa\u9009\u4e86\u751f\u7269\u6216\u7269\u7406\u79d1\u76ee\u7684\u8bb0\u5f55 \u5728\u865a\u62df\u8868\u6700\u540e\u9762\u6dfb\u52a0\u4e86\u4e24\u5217 -- \u82e5\u6b64\u884c\u6570\u636e\u7684cname\u662f'\u751f\u7269'\u5c31\u8d4b\u503c\u4e3a\u751f\u7269\u6210\u7ee9 \u5426\u5219 \u4e3a-1 \u540c\u7406'\u7269\u7406'\u4e00\u6837 -- \u7c7b\u4f3c\u4e8e\u8fd9\u6837 ==> \u4fbf\u4e8e\u5206\u7ec4\u540e\u7684\u805a\u5408\u51fd\u6570\u64cd\u4f5c + -----+------------+-----------+-----+-----+--------+------------+----+----+ | sid | student_id | course_id | num | cid | cname | teacher_id | sw | wl | + -----+------------+-----------+-----+-----+--------+------------+----+----+ | 1 | 1 | 1 | 10 | 1 | \u751f\u7269 | 1 | 10 | - 1 | | 2 | 1 | 2 | 9 | 2 | \u7269\u7406 | 2 | - 1 | 9 | + -----+------------+-----------+-----+-----+--------+------------+----+----+ SELECT * , case cname WHEN \"\u751f\u7269\" then num else - 1 end sw , case cname WHEN \"\u7269\u7406\" then num else - 1 end wl FROM score inner JOIN course ON score . course_id = course . cid where cname in ( \"\u751f\u7269\" , \"\u7269\u7406\" ) and student_id = 1 ; --- SELECT student_id , max ( case cname WHEN \"\u751f\u7269\" then num else - 1 end ) as sw , max ( case cname WHEN \"\u7269\u7406\" then num else - 1 end ) as wl FROM score inner JOIN course ON score . course_id = course . cid where cname in ( \"\u751f\u7269\" , \"\u7269\u7406\" ) GROUP BY student_id HAVING wl > sw and sw != - 1 and wl != - 1 ; -- \u52a0\u4e0d\u7b49\u4e8e\u662f\u56e0\u4e3a\u53ef\u80fd\u5b66\u751f\u53ea\u9009\u62e9\u4e86\u751f\u7269\u7269\u7406\u5176\u4e2d\u4e00\u95e8\u8bfe 9\u3001 \u67e5\u8be2\u6ca1\u6709\u540c\u65f6\u9009\u4fee\u7269\u7406\u8bfe\u7a0b\u548c\u4f53\u80b2\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d -- \u9898\u76ee\u610f\u601d\u662f\u67e5\u8be2\u7269\u7406\u548c\u4f53\u80b2\u4e24\u95e8\u8bfe\u53ea\u9009\u4fee\u4e86\u5176\u4e2d\u4e00\u95e8\u7684\u5b66\u751f select student_id from score inner join course on score . course_id = course . cid where cname in ( '\u7269\u7406' , '\u4f53\u80b2' ) group by student_id having count ( 1 ) < 2 ; select sname from student where sid in ( select student_id from score inner join course on score . course_id = course . cid where cname in ( '\u7269\u7406' , '\u4f53\u80b2' ) group by student_id having count ( 1 ) < 2 ); 10\u3001\u67e5\u8be2\u6302\u79d1\u8d85\u8fc7\u4e24\u95e8(\u5305\u62ec\u4e24\u95e8)\u7684\u5b66\u751f\u59d3\u540d\u548c\u73ed\u7ea7 select student_id from score where num < 60 group by student_id having count ( 1 ) >= 2 ; select sname , caption from student inner join class on student . class_id = class . cid where sid in ( select student_id from score where num < 60 group by student_id having count ( 1 ) >= 2 ); 11 \u3001\u67e5\u8be2\u9009\u4fee\u4e86\u6240\u6709\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d -- \u7edf\u8ba1\u8bfe\u7a0b\u6570 select count ( 1 ) from course ; -- \u57fa\u4e8escore\u8868\u6309\u7167student_id\u5206\u7ec4,\u7edf\u8ba1\u8bfe\u7a0b\u6570\u636e\u7b49\u4e8e\u8bfe\u7a0b\u603b\u6570 select student_id from score group by student_id having count ( 1 ) = ( select count ( 1 ) from course ); select sname from student where sid in ( select student_id from score group by student_id having count ( 1 ) = ( select count ( 1 ) from course )); 12\u3001\u67e5\u8be2\u674e\u5e73\u8001\u5e08\u6559\u7684\u8bfe\u7a0b\u7684\u6240\u6709\u6210\u7ee9\u8bb0\u5f55 -- \u674e\u5e73\u8001\u5e08\u6559\u4e86\u54ea\u4e9b\u8bfe select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; select * from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ); 13\u3001\u67e5\u8be2\u5168\u90e8\u5b66\u751f\u90fd\u9009\u4fee\u4e86\u7684\u8bfe\u7a0b\u53f7\u548c\u8bfe\u7a0b\u540d -- \u601d\u8def: \u53d6\u6240\u6709\u5b66\u751f\u6570,\u7136\u540e\u57fa\u4e8escore\u8868\u7684\u8bfe\u7a0b\u5206\u7ec4,\u627e\u51facount(student_id)\u7b49\u4e8e\u5b66\u751f\u6570 select count ( 1 ) from student ; select course_id from score group by course_id having count ( 1 ) = ( select count ( 1 ) from student ) select cid , cname from course where cid in ( select course_id from score group by course_id having count ( 1 ) = ( select count ( 1 ) from student ) ); 14\u3001\u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u88ab\u9009\u4fee\u7684\u6b21\u6570 select course_id , count ( 1 ) from score group by course_id ; 15\u3001\u67e5\u8be2\u53ea\u9009\u4fee\u4e86\u4e00\u95e8\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d\u548c\u5b66\u53f7 select student_id from score group by student_id having count ( 1 ) = 1 ; select sid , sname from student where sid in ( select student_id from score group by student_id having count ( 1 ) = 1 ); 16\u3001\u67e5\u8be2\u6240\u6709\u5b66\u751f\u8003\u51fa\u7684\u6210\u7ee9\u5e76\u6309\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff08\u6210\u7ee9\u53bb\u91cd\uff09 select distinct num from score order by num DESC ; 17\u3001\u67e5\u8be2\u5e73\u5747\u6210\u7ee9\u5927\u4e8e85\u7684\u5b66\u751f\u59d3\u540d\u548c\u5e73\u5747\u6210\u7ee9 select student_id , avg ( num ) from score group by student_id having avg ( num ) > 85 ; select sname , avg_num from student inner join ( select student_id , avg ( num ) as avg_num from score group by student_id having avg ( num ) > 85 ) as t2 on student . sid = t2 . student_id ; 18\u3001\u67e5\u8be2\u751f\u7269\u6210\u7ee9\u4e0d\u53ca\u683c\u7684\u5b66\u751f\u59d3\u540d\u548c\u5bf9\u5e94\u751f\u7269\u5206\u6570 select cid from course where cname = '\u751f\u7269' ; select student_id , num from score where course_id = ( select cid from course where cname = '\u751f\u7269' ) and num < 60 select sname , num from student inner join ( select student_id , num from score where course_id = ( select cid from course where cname = '\u751f\u7269' ) and num < 60 ) as t2 on student . sid = t2 . student_id ; -- \u601d\u8def: \u65e0\u60c5\u8fde\u8868 SELECT sname \u59d3\u540d , num \u751f\u7269\u6210\u7ee9 FROM score LEFT JOIN course ON score . course_id = course . cid LEFT JOIN student ON score . student_id = student . sid WHERE course . cname = '\u751f\u7269' AND score . num < 60 ; 19\u3001\u67e5\u8be2\u5728\u6240\u6709\u9009\u4fee\u4e86\u674e\u5e73\u8001\u5e08\u8bfe\u7a0b\u7684\u5b66\u751f\u4e2d\uff0c\u8fd9\u4e9b\u8bfe\u7a0b(\u674e\u5e73\u8001\u5e08\u7684\u8bfe\u7a0b\uff0c\u4e0d\u662f\u6240\u6709\u8bfe\u7a0b)\u5e73\u5747\u6210\u7ee9\u6700\u9ad8\u7684\u5b66\u751f\u59d3\u540d select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; -- \u8fd9\u91ccsid in ()\u7528in \u4f1a\u62a5\u9519\uff01\u83ab\u540d\u5176\u5999... -- This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' select sname from student where sid = ( select student_id from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) group by student_id order by avg ( num ) desc limit 1 ); -- \u4e07\u4e00\u6709\u5e76\u5217\u7684\u60c5\u51b5\u5462\uff1f\uff1f\u5582\u4e0d\u662f\u5f88\u4e25\u8c28\u554a\uff01 -- \u4e25\u8c28\u8d77\u6765\u4e86..\u8212\u670d\u4e86 \u4f46\u662f\u603b\u611f\u89c9\u54ea\u91cc\u4e0d\u5bf9... -- \u867d\u7136\u8bf4 group by\u5206\u7ec4\u540e\u53ea\u80fd\u53bb\u5230\u5206\u7ec4\u5b57\u6bb5\u548c\u805a\u5408\u51fd\u6570\u7ed3\u679c -- \u4f46\u8fd9\u91cc\u6709\u8fde\u8868 \u53ef\u4ee5\u53d6\u5230student_id\u5916\u952e\u5bf9\u5e94\u7684\u90a3\u5f20\u8868\u7684\u4e00\u6761\u8bb0\u5f55 select sname , avg ( num ) from score inner join course on score . course_id = course . cid inner join student on score . student_id = student . sid inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' group by student_id having avg ( num ) = # \u5c31\u662f\u8fd9 \u5b50\u67e5\u8be2\u91cc\u7528\u4e86 limit\u5173\u952e\u5b57 \u8fd9\u91cc\u5c31\u4e0d\u80fd\u7528 in ( select avg ( num ) from score inner join course on score . course_id = course . cid inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' group by student_id order by avg ( num ) desc limit 1 ); 20\u3001\u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u6210\u7ee9\u6700\u597d\u7684\u524d\u4e24\u540d\u5b66\u751f\u59d3\u540d \u54c7\uff01:-I -- \u67e5\u770b\u6bcf\u95e8\u8bfe\u7a0b\u6309\u7167\u5206\u6570\u6392\u5e8f\u7684\u4fe1\u606f select * from score order by course_id , num desc ; -- \u6c42\u51fa\u6bcf\u95e8\u8bfe\u7a0b\u7684\u8bfe\u7a0bcourse_id,\u4e0e\u6700\u9ad8\u5206\u6570first_num select course_id , max ( num ) as first_num from score group by course_id ; -- \u53bb\u6389\u6700\u9ad8\u5206,\u518d\u6309\u7167\u8bfe\u7a0b\u5206\u7ec4,\u53d6\u5f97\u7684\u6700\u9ad8\u5206,\u5c31\u662f\u7b2c\u4e8c\u9ad8\u7684\u5206\u6570second_num -- score inner join \u865a\u62df\u8868t \u5728\u6bcf\u4e2a\u8bfe\u7a0b\u540e\u9762\u90fd\u4f1a\u8ddf\u4e0a\u672c\u8bfe\u7a0b\u6700\u9ad8\u7684\u6210\u7ee9 select score . course_id , max ( num ) as second_num from score inner join ( select course_id , max ( num ) as first_num from score group by course_id ) as t on score . course_id = t . course_id where score . num < first_num -- \u5254\u9664\u6700\u9ad8\u5206 group by course_id ; -- \u5c06\u6709\u6700\u9ad8\u6210\u7ee9\u7684\u8868\u548c\u7b2c\u4e8c\u9ad8\u6210\u7ee9\u7684\u8868\u8fdb\u884c\u8fde\u8868 select t1 . course_id , t1 . first_num , t2 . second_num from ( select course_id , max ( num ) as first_num from score group by course_id ) as t1 inner join ( select score . course_id , max ( num ) as second_num from score inner join ( select course_id , max ( num ) as first_num from score group by course_id ) as t on score . course_id = t . course_id where score . num < first_num -- \u5254\u9664\u6700\u9ad8\u5206 group by course_id ) as t2 on t1 . course_id = t2 . course_id ; -- \u67e5\u8be2\u524d\u4e24\u540d\u7684\u5b66\u751f\uff08\u6709\u53ef\u80fd\u51fa\u73b0\u5e76\u5217\u7b2c\u4e00\u6216\u8005\u5e76\u5217\u7b2c\u4e8c\u7684\u60c5\u51b5\uff09\u53ea\u8981\u5b83\u7684\u6210\u7ee9\u5927\u4e8e\u7b49\u4e8e\u7b2c\u4e8c\u7684\u6210\u7ee9\u5c31\u884c -- \u5c06\u4e0a\u4e00\u56de\u5408\u7684\u67e5\u8be2\u7ed3\u679c\u5f97\u5230\u7684\u865a\u62df\u8868\u8bbe\u7f6e\u522b\u540d\u4e3at3 select score . student_id , t3 . course_id , t3 . first_num , t3 . second_num from score inner join ( select t1 . course_id , t1 . first_num , t2 . second_num from ( select course_id , max ( num ) as first_num from score group by course_id ) as t1 inner join ( select score . course_id , max ( num ) as second_num from score inner join ( select course_id , max ( num ) as first_num from score group by course_id ) as t on score . course_id = t . course_id where score . num < first_num -- \u5254\u9664\u6700\u9ad8\u5206 group by course_id ) as t2 on t1 . course_id = t2 . course_id ) as t3 on score . course_id = t3 . course_id where score . num >= t3 . second_num order by course_id ; -- \u4e2a\u4eba\u89c9\u5f97\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u53ef\u53d6 \u592a\u590d\u6742\u4e86... \u82e5\u53d6\u6bcf\u95e8\u8bfe\u524d\u4e09\u540d\u5b66\u751f \u4e14\u4e0d\u5f97\u53c8\u5d4c\u5957\u4e00\u5c42... /* \u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u6210\u7ee9\u6700\u597d\u7684\u524d3\u540d (\u4e0d\u8003\u8651\u6210\u7ee9\u5e76\u5217\u60c5\u51b5) */ SELECT cid , cname , -- where course_id = course.cid order by num ( select student . sname from score left join student on student . sid = score . student_id where course_id = course . cid order by num desc limit 1 offset 0 ) as \"\u7b2c1\u540d\" , ( select student . sname from score left join student on student . sid = score . student_id where course_id = course . cid order by num desc limit 1 offset 1 ) as \"\u7b2c2\u540d\" , ( select student . sname from score left join student on student . sid = score . student_id where course_id = course . cid order by num desc limit 1 offset 2 ) as \"\u7b2c3\u540d\" FROM course ; /* \u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u6210\u7ee9\u6700\u597d\u7684\u524d3\u540d (\u8003\u8651\u6210\u7ee9\u5e76\u5217\u60c5\u51b5) */ -- \u67e5\u8be2\u5230\u6bcf\u95e8\u8bfe\u7684\u524d\u4e09\u9ad8\u5206 SELECT cid , cname , -- course_id = course.cid \u4fdd\u8bc1\u4e86\u662f\u67d0\u4e00\u79d1\u76ee -- group by num \u662f\u5bf9\u6210\u7ee9\u53bb\u91cd\u4e86 \u53bb\u91cd\u540e\u518d\u6392\u5e8f ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 0 ) as \"\u6700\u9ad8\u5206\" , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 1 ) as \"\u7b2c\u4e8c\u9ad8\u5206\" , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 2 ) as \"\u7b2c\u4e09\u9ad8\u5206\" FROM course ; -- I'm dead. select score . course_id , C . cname , sname , num from score inner join student on score . student_id = student . sid inner join ( SELECT cid , cname , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 0 ) as first , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 1 ) as second , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 2 ) as third FROM course ) as C on score . course_id = C . cid -- \u8054\u8868\u540escore\u8868\u7684\u6bcf\u4e00\u6761\u6570\u636e\u540e\u9762\u90fd\u4f1a\u8ddf\u7740 \u5bf9\u5e94\u79d1\u76ee\u7b2c\u4e00\u7b2c\u4e8c\u7b2c\u4e09\u7684\u9ad8\u5206 WHERE score . num >= C . third -- \u5220\u9664\u6389\u4f4e\u4e8e\u7b2c\u4e09\u5206\u6570\u7684score\u8868\u8bb0\u5f55 \u5269\u4e0b\u7684\u8bb0\u5f55\u5c31\u90fd\u662f\u524d\u4e09\u7684 order by score . course_id , num ; 21\u3001\u67e5\u8be2\u4e0d\u540c\u8bfe\u7a0b\u4f46\u6210\u7ee9\u76f8\u540c\u7684\u5b66\u751f\u5b66\u53f7\uff0c\u8bfe\u7a0b\u53f7\uff0c\u6210\u7ee9 -- \u4e07\u4e07\u6ca1\u60f3\u5230 \u4f7f\u7528\u4ea4\u53c9\u8fde\u63a5\uff01\uff01 select DISTINCT s1 . student_id , s1 . course_id , s2 . course_id , s1 . num , s2 . num from score as s1 , score as s2 where s1 . num = s2 . num and s1 . course_id != s2 . course_id order by s1 . student_id ; 22\u3001\u67e5\u8be2\u6ca1\u5b66\u8fc7\u201c\u53f6\u5e73\u201d\u8001\u5e08\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d\u4ee5\u53ca\u9009\u4fee\u7684\u8bfe\u7a0b\u540d\u79f0 -- \u674e\u5e73\u8001\u5e08\u6559\u8fc7\u7684\u8bfe\u7a0bid. select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; -- \u9009\u8fc7\u674e\u5e73\u8001\u5e08\u8bfe\u7a0b\u7684\u5b66\u751f select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ); -- \u6ca1\u9009\u8fc7\u674e\u5e73\u8bfe\u7a0b\u8001\u5e08\u7684\u5b66\u751f select * from student where sid not in ( select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) ); -- \u4e0escore\u5173\u8054\u8d77\u6765 select t . sname , course_id from score inner join ( select sid , sname from student where sid not in ( select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) ) ) as t on score . student_id = t . sid ; select t . sname , course . cname from score inner join ( select sid , sname from student where sid not in ( select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) ) ) as t on score . student_id = t . sid inner join course on score . course_id = course . cid ; 23\u3001\u67e5\u8be2\u6240\u6709\u9009\u4fee\u4e86\u5b66\u53f7\u4e3a1\u7684\u540c\u5b66\u9009\u4fee\u8fc7\u7684\u4e00\u95e8\u6216\u8005\u591a\u95e8\u8bfe\u7a0b\u7684\u540c\u5b66\u5b66\u53f7\u548c\u59d3\u540d -- \u5b66\u53f7\u4e3a1\u7684\u540c\u5b66\u9009\u4fee\u7684\u8bfe\u7a0bid\u96c6\u5408 select course_id from score where student_id = 1 ; select student_id from score where course_id in -- \u7b5b\u9009\u51fa\u5728\u6b64\u96c6\u5408\u4e2d\u7684score\u8bb0\u5f55 ( select course_id from score where student_id = 1 ) group by student_id -- \u5206\u7ec4 having count ( 1 ) >= 1 ; -- \u770b\u6570\u91cf 24\u3001\u4efb\u8bfe\u6700\u591a\u7684\u8001\u5e08\u4e2d\u5b66\u751f\u5355\u79d1\u6210\u7ee9\u6700\u9ad8\u7684\u5b66\u751f\u59d3\u540d ```sql -- \u67e5\u8be2\u4efb\u8bfe\u6570\u6700\u591a\u7684\u8001\u5e08\u7684\u4fe1\u606f select tid,tname from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1; -- \u4efb\u8bfe\u6570\u6700\u591a\u7684\u8001\u5e08\u6240\u6559\u7684\u8bfe\u7a0b\u4fe1\u606f -- \u7528in\u4e0d\u884c \u62a5\u9519This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' -- \u90a3\u5c31\u7528\u8fde\u8868 select cid,cname from course inner join ( select tid from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1 ) as t on course.teacher_id = t.tid; -- \u627e\u51fa\u6240\u6559\u8bfe\u7a0b\u5355\u79d1\u6210\u7ee9\u6700\u9ad8\u7684\u5206\u6570 select course_id,max(num) from score where course_id in ( select cid from course inner join ( select tid from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1 ) as t on course.teacher_id = t.tid ) group by course_id; -- \u5c06score\u8868\u4e0e\u4e0a\u65b9\u8fd9\u4e00\u865a\u62df\u8868\u8fdb\u884c\u5185\u8fde\u63a5 -- \u5219\u80fd\u5339\u914d\u7684\u8bfe\u7a0b\u8bb0\u5f55\u540e\u9762\u4f1a\u6dfb\u52a0\u8bfe\u7a0bid\u548c\u6b64\u8bfe\u7a0b\u6700\u9ad8\u5206\u6570\u4e24\u4e2a\u5b57\u6bb5 -- \u5047\u5982\u6211\u4eec\u5339\u914d\u7684\u8bfe\u7a0bid \u662f2,4 \u8fd9\u6837\u5185\u8fde\u63a5\u540e \u8bb0\u5f55\u4e2d\u5c31\u53ea\u4f1a\u5269\u4e0bcourse_id\u503c\u4e3a2,4\u7684\u8bb0\u5f55 select sname,score.course_id,num from score inner join student on score.student_id = student.sid -- \u611f\u89c9\u8fd9\u4e2a\u653e\u5728\u540e\u9762\u5173\u8054\u4f1a\u5c11\u5173\u8054\u4e00\u4e9b... inner join ( select course_id,max(num) as max_num from score where course_id in ( select cid from course inner join ( select tid from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1 ) as t on course.teacher_id = t.tid ) group by course_id )as t1 on score.course_id = t1.course_id where score.num = max_num; -- \u5f53\u524d\u79d1\u76ee\u4e0e\u5f53\u524d\u79d1\u76ee\u6700\u9ad8\u6210\u7ee9\u76f8\u7b49 ```","title":"query_practice"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/8_query_practice/#-_-","text":"\u6ce8\u610fsql\u8bed\u53e5\u7684\u7f8e\u5316... (\u00b4\u25bd\uff40) \u5934\u53d1\u6ca1\u4e86 :-)","title":"\u67e5\u8be2\u7ec3\u4e60 -_-"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/8_query_practice/#_1","text":"create database egon default charset utf8 collate utf8_general_ci ; use egon ; create table class ( cid int auto_increment primary key , caption varchar ( 16 ) not null ); create table teacher ( tid int auto_increment primary key , tname varchar ( 16 ) not null ); create table student ( sid int auto_increment primary key , -- sex enum('male','female') not null default 'male', gender enum ( '\u7537' , '\u5973' ) not null , class_id int not null , sname varchar ( 16 ) not null , constraint fk_student_class foreign key ( class_id ) references class ( cid ) on delete cascade on update cascade ); create table course ( cid int auto_increment primary key , cname varchar ( 16 ), teacher_id int not null , constraint fk_course_teacher foreign key ( teacher_id ) references teacher ( tid ) on delete cascade on update cascade ); create table score ( sid int auto_increment primary key , student_id int not null , course_id int not null , num int not null , constraint fk_score_student foreign key ( student_id ) references student ( sid ) on delete cascade on update cascade , constraint fk_score_course foreign key ( course_id ) references course ( cid ) on delete cascade on update cascade ); INSERT INTO class VALUES ( '1' , '\u4e09\u5e74\u4e8c\u73ed' ), ( '2' , '\u4e09\u5e74\u4e09\u73ed' ), ( '3' , '\u4e00\u5e74\u4e8c\u73ed' ), ( '4' , '\u4e8c\u5e74\u4e5d\u73ed' ); INSERT INTO ` teacher ` VALUES ( '1' , '\u5f20\u78ca\u8001\u5e08' ), ( '2' , '\u674e\u5e73\u8001\u5e08' ), ( '3' , '\u5218\u6d77\u71d5\u8001\u5e08' ), ( '4' , '\u6731\u4e91\u6d77\u8001\u5e08' ), ( '5' , '\u674e\u6770\u8001\u5e08' ); INSERT INTO student VALUES ( '1' , '\u7537' , '1' , '\u7406\u89e3' ), ( '2' , '\u5973' , '1' , '\u94a2\u86cb' ), ( '3' , '\u7537' , '1' , '\u5f20\u4e09' ), ( '4' , '\u7537' , '1' , '\u5f20\u4e00' ), ( '5' , '\u5973' , '1' , '\u5f20\u4e8c' ), ( '6' , '\u7537' , '1' , '\u5f20\u56db' ), ( '7' , '\u5973' , '2' , '\u94c1\u9524' ), ( '8' , '\u7537' , '2' , '\u674e\u4e09' ), ( '9' , '\u7537' , '2' , '\u674e\u4e00' ), ( '10' , '\u5973' , '2' , '\u674e\u4e8c' ), ( '11' , '\u7537' , '2' , '\u674e\u56db' ), ( '12' , '\u5973' , '3' , '\u5982\u82b1' ), ( '13' , '\u7537' , '3' , '\u5218\u4e09' ), ( '14' , '\u7537' , '3' , '\u5218\u4e00' ), ( '15' , '\u5973' , '3' , '\u5218\u4e8c' ), ( '16' , '\u7537' , '3' , '\u5218\u56db' ); INSERT INTO ` course ` VALUES ( '1' , '\u751f\u7269' , '1' ), ( '2' , '\u7269\u7406' , '2' ), ( '3' , '\u4f53\u80b2' , '3' ), ( '4' , '\u7f8e\u672f' , '2' ); INSERT INTO ` score ` VALUES ( '1' , '1' , '1' , '10' ), ( '2' , '1' , '2' , '9' ), ( '5' , '1' , '4' , '66' ), ( '6' , '2' , '1' , '8' ), ( '8' , '2' , '3' , '68' ), ( '9' , '2' , '4' , '99' ), ( '10' , '3' , '1' , '77' ), ( '11' , '3' , '2' , '66' ), ( '12' , '3' , '3' , '87' ), ( '13' , '3' , '4' , '99' ), ( '14' , '4' , '1' , '79' ), ( '15' , '4' , '2' , '11' ), ( '16' , '4' , '3' , '67' ), ( '17' , '4' , '4' , '100' ), ( '18' , '5' , '1' , '79' ), ( '19' , '5' , '2' , '11' ), ( '20' , '5' , '3' , '67' ), ( '21' , '5' , '4' , '100' ), ( '22' , '6' , '1' , '9' ), ( '23' , '6' , '2' , '100' ), ( '24' , '6' , '3' , '67' ), ( '25' , '6' , '4' , '100' ), ( '26' , '7' , '1' , '9' ), ( '27' , '7' , '2' , '100' ), ( '28' , '7' , '3' , '67' ), ( '29' , '7' , '4' , '88' ), ( '30' , '8' , '1' , '9' ), ( '31' , '8' , '2' , '100' ), ( '32' , '8' , '3' , '67' ), ( '33' , '8' , '4' , '88' ), ( '34' , '9' , '1' , '91' ), ( '35' , '9' , '2' , '88' ), ( '36' , '9' , '3' , '67' ), ( '37' , '9' , '4' , '22' ), ( '38' , '10' , '1' , '90' ), ( '39' , '10' , '2' , '77' ), ( '40' , '10' , '3' , '43' ), ( '41' , '10' , '4' , '87' ), ( '42' , '11' , '1' , '90' ), ( '43' , '11' , '2' , '77' ), ( '44' , '11' , '3' , '43' ), ( '45' , '11' , '4' , '87' ), ( '46' , '12' , '1' , '90' ), ( '47' , '12' , '2' , '77' ), ( '48' , '12' , '3' , '43' ), ( '49' , '12' , '4' , '87' ), ( '52' , '13' , '3' , '87' );","title":"\u6570\u636e\u7684\u51c6\u5907"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/8_query_practice/#_2","text":"1\u3001\u67e5\u8be2\u6240\u6709\u7684\u8bfe\u7a0b\u7684\u540d\u79f0\u4ee5\u53ca\u5bf9\u5e94\u7684\u4efb\u8bfe\u8001\u5e08\u59d3\u540d select cname , tname from course inner join teacher on course . teacher_id = teacher . tid ; 2\u3001\u67e5\u8be2\u5b66\u751f\u8868\u4e2d\u7537\u5973\u751f\u5404\u6709\u591a\u5c11\u4eba select gender , count ( 1 ) from student group by gender ; 3\u3001\u67e5\u8be2\u7269\u7406\u6210\u7ee9\u7b49\u4e8e100\u7684\u5b66\u751f\u7684\u59d3\u540d -- \u7269\u7406 \u6210\u7ee9 \u5b66\u751f\u59d3\u540d <\u51ed\u611f\u89c9\u5f80\u6709\u5916\u952e\u7684\u8868\u5f00\u59cb\u601d\u8003> -- \u5148\u627e\u5230\u7269\u7406\u6210\u7ee9\u7b49\u4e8e100\u7684\u5b66\u751f\u7684id select student_id from score inner join course on course . cid = score . course_id where cname = '\u7269\u7406' and num = 100 ; select sname from score inner join course on course . cid = score . course_id inner join student on student . sid = score . student_id where cname = '\u7269\u7406' and num = 100 ; select sname from student where sid in ( select student_id from score inner join course on course . cid = score . course_id where cname = '\u7269\u7406' and num = 100 ); 4\u3001\u67e5\u8be2\u5e73\u5747\u6210\u7ee9\u5927\u4e8e\u516b\u5341\u5206\u7684\u540c\u5b66\u7684\u59d3\u540d\u548c\u5e73\u5747\u6210\u7ee9 select student_id , avg ( num ) from score group by student_id having avg ( num ) > 80 ; select sname , avg_score from student inner join ( select student_id , avg ( num ) as avg_score from score group by student_id having avg ( num ) > 80 ) as t2 on student . sid = t2 . student_id ; 5\u3001\u67e5\u8be2\u6240\u6709\u5b66\u751f\u7684\u5b66\u53f7\uff0c\u59d3\u540d\uff0c\u9009\u8bfe\u6570\uff0c\u603b\u6210\u7ee9 -- \u53ea\u662f\u9009\u4fee\u4e86\u8bfe\u7a0b\u7684\u5b66\u751f inner join -- \u6ce8\u610f:\u6240\u6709\u5b66\u751f\u5e94\u8be5\u5305\u62ec\u672a\u9009\u4fee\u8bfe\u7a0b\u7684 left join select sid , sname , course_num , total_num from student left join ( select student_id , count ( 1 ) as course_num , sum ( num ) as total_num from score group by student_id ) as t on student . sid = t . student_id ; 6\u3001 \u67e5\u8be2\u59d3\u674e\u8001\u5e08\u7684\u4e2a\u6570 select count ( 1 ) from teacher where tname like '\u674e%' ; 7\u3001 \u67e5\u8be2\u6ca1\u6709\u62a5\u674e\u5e73\u8001\u5e08\u8bfe\u7684\u5b66\u751f\u59d3\u540d -- \u674e\u5e73\u8001\u5e08\u6559\u4e86\u54ea\u4e9b\u8bfe select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; -- \u54ea\u4e9b\u5b66\u751f\u9009\u4e86\u674e\u5e73\u8001\u5e08\u7684\u8bfe select distinct student_id from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ); -- \u53d6\u53cd\u5c31\u662f\u6ca1\u9009\u7684\u5b66\u751f\u540d\u5355 select sname from student where sid not in ( select distinct student_id from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' )); 8\u3001 \u67e5\u8be2\u7269\u7406\u8bfe\u7a0b\u6bd4\u751f\u7269\u8bfe\u7a0b\u9ad8\u7684\u5b66\u751f\u7684\u5b66\u53f7 -- \u601d\u8def:\u5206\u522b\u5f97\u5230\u7269\u7406\u6210\u7ee9\u8868\u4e0e\u751f\u7269\u6210\u7ee9\u8868,\u7136\u540e\u8fde\u8868 select t1 . student_id from ( select student_id , num from score where course_id = ( select cid from course where cname = '\u7269\u7406' )) as t1 inner join ( select student_id , num from score where course_id = ( select cid from course where cname = '\u751f\u7269' )) as t2 on t1 . student_id = t2 . student_id where t1 . num > t2 . num ; -- \u601d\u8def: -- \u8fde\u8868\u67e5\u8be2 \u7b5b\u9009\u51fa\u9009\u4e86\u751f\u7269\u6216\u7269\u7406\u79d1\u76ee\u7684\u8bb0\u5f55 \u5728\u865a\u62df\u8868\u6700\u540e\u9762\u6dfb\u52a0\u4e86\u4e24\u5217 -- \u82e5\u6b64\u884c\u6570\u636e\u7684cname\u662f'\u751f\u7269'\u5c31\u8d4b\u503c\u4e3a\u751f\u7269\u6210\u7ee9 \u5426\u5219 \u4e3a-1 \u540c\u7406'\u7269\u7406'\u4e00\u6837 -- \u7c7b\u4f3c\u4e8e\u8fd9\u6837 ==> \u4fbf\u4e8e\u5206\u7ec4\u540e\u7684\u805a\u5408\u51fd\u6570\u64cd\u4f5c + -----+------------+-----------+-----+-----+--------+------------+----+----+ | sid | student_id | course_id | num | cid | cname | teacher_id | sw | wl | + -----+------------+-----------+-----+-----+--------+------------+----+----+ | 1 | 1 | 1 | 10 | 1 | \u751f\u7269 | 1 | 10 | - 1 | | 2 | 1 | 2 | 9 | 2 | \u7269\u7406 | 2 | - 1 | 9 | + -----+------------+-----------+-----+-----+--------+------------+----+----+ SELECT * , case cname WHEN \"\u751f\u7269\" then num else - 1 end sw , case cname WHEN \"\u7269\u7406\" then num else - 1 end wl FROM score inner JOIN course ON score . course_id = course . cid where cname in ( \"\u751f\u7269\" , \"\u7269\u7406\" ) and student_id = 1 ; --- SELECT student_id , max ( case cname WHEN \"\u751f\u7269\" then num else - 1 end ) as sw , max ( case cname WHEN \"\u7269\u7406\" then num else - 1 end ) as wl FROM score inner JOIN course ON score . course_id = course . cid where cname in ( \"\u751f\u7269\" , \"\u7269\u7406\" ) GROUP BY student_id HAVING wl > sw and sw != - 1 and wl != - 1 ; -- \u52a0\u4e0d\u7b49\u4e8e\u662f\u56e0\u4e3a\u53ef\u80fd\u5b66\u751f\u53ea\u9009\u62e9\u4e86\u751f\u7269\u7269\u7406\u5176\u4e2d\u4e00\u95e8\u8bfe 9\u3001 \u67e5\u8be2\u6ca1\u6709\u540c\u65f6\u9009\u4fee\u7269\u7406\u8bfe\u7a0b\u548c\u4f53\u80b2\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d -- \u9898\u76ee\u610f\u601d\u662f\u67e5\u8be2\u7269\u7406\u548c\u4f53\u80b2\u4e24\u95e8\u8bfe\u53ea\u9009\u4fee\u4e86\u5176\u4e2d\u4e00\u95e8\u7684\u5b66\u751f select student_id from score inner join course on score . course_id = course . cid where cname in ( '\u7269\u7406' , '\u4f53\u80b2' ) group by student_id having count ( 1 ) < 2 ; select sname from student where sid in ( select student_id from score inner join course on score . course_id = course . cid where cname in ( '\u7269\u7406' , '\u4f53\u80b2' ) group by student_id having count ( 1 ) < 2 ); 10\u3001\u67e5\u8be2\u6302\u79d1\u8d85\u8fc7\u4e24\u95e8(\u5305\u62ec\u4e24\u95e8)\u7684\u5b66\u751f\u59d3\u540d\u548c\u73ed\u7ea7 select student_id from score where num < 60 group by student_id having count ( 1 ) >= 2 ; select sname , caption from student inner join class on student . class_id = class . cid where sid in ( select student_id from score where num < 60 group by student_id having count ( 1 ) >= 2 ); 11 \u3001\u67e5\u8be2\u9009\u4fee\u4e86\u6240\u6709\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d -- \u7edf\u8ba1\u8bfe\u7a0b\u6570 select count ( 1 ) from course ; -- \u57fa\u4e8escore\u8868\u6309\u7167student_id\u5206\u7ec4,\u7edf\u8ba1\u8bfe\u7a0b\u6570\u636e\u7b49\u4e8e\u8bfe\u7a0b\u603b\u6570 select student_id from score group by student_id having count ( 1 ) = ( select count ( 1 ) from course ); select sname from student where sid in ( select student_id from score group by student_id having count ( 1 ) = ( select count ( 1 ) from course )); 12\u3001\u67e5\u8be2\u674e\u5e73\u8001\u5e08\u6559\u7684\u8bfe\u7a0b\u7684\u6240\u6709\u6210\u7ee9\u8bb0\u5f55 -- \u674e\u5e73\u8001\u5e08\u6559\u4e86\u54ea\u4e9b\u8bfe select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; select * from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ); 13\u3001\u67e5\u8be2\u5168\u90e8\u5b66\u751f\u90fd\u9009\u4fee\u4e86\u7684\u8bfe\u7a0b\u53f7\u548c\u8bfe\u7a0b\u540d -- \u601d\u8def: \u53d6\u6240\u6709\u5b66\u751f\u6570,\u7136\u540e\u57fa\u4e8escore\u8868\u7684\u8bfe\u7a0b\u5206\u7ec4,\u627e\u51facount(student_id)\u7b49\u4e8e\u5b66\u751f\u6570 select count ( 1 ) from student ; select course_id from score group by course_id having count ( 1 ) = ( select count ( 1 ) from student ) select cid , cname from course where cid in ( select course_id from score group by course_id having count ( 1 ) = ( select count ( 1 ) from student ) ); 14\u3001\u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u88ab\u9009\u4fee\u7684\u6b21\u6570 select course_id , count ( 1 ) from score group by course_id ; 15\u3001\u67e5\u8be2\u53ea\u9009\u4fee\u4e86\u4e00\u95e8\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d\u548c\u5b66\u53f7 select student_id from score group by student_id having count ( 1 ) = 1 ; select sid , sname from student where sid in ( select student_id from score group by student_id having count ( 1 ) = 1 ); 16\u3001\u67e5\u8be2\u6240\u6709\u5b66\u751f\u8003\u51fa\u7684\u6210\u7ee9\u5e76\u6309\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff08\u6210\u7ee9\u53bb\u91cd\uff09 select distinct num from score order by num DESC ; 17\u3001\u67e5\u8be2\u5e73\u5747\u6210\u7ee9\u5927\u4e8e85\u7684\u5b66\u751f\u59d3\u540d\u548c\u5e73\u5747\u6210\u7ee9 select student_id , avg ( num ) from score group by student_id having avg ( num ) > 85 ; select sname , avg_num from student inner join ( select student_id , avg ( num ) as avg_num from score group by student_id having avg ( num ) > 85 ) as t2 on student . sid = t2 . student_id ; 18\u3001\u67e5\u8be2\u751f\u7269\u6210\u7ee9\u4e0d\u53ca\u683c\u7684\u5b66\u751f\u59d3\u540d\u548c\u5bf9\u5e94\u751f\u7269\u5206\u6570 select cid from course where cname = '\u751f\u7269' ; select student_id , num from score where course_id = ( select cid from course where cname = '\u751f\u7269' ) and num < 60 select sname , num from student inner join ( select student_id , num from score where course_id = ( select cid from course where cname = '\u751f\u7269' ) and num < 60 ) as t2 on student . sid = t2 . student_id ; -- \u601d\u8def: \u65e0\u60c5\u8fde\u8868 SELECT sname \u59d3\u540d , num \u751f\u7269\u6210\u7ee9 FROM score LEFT JOIN course ON score . course_id = course . cid LEFT JOIN student ON score . student_id = student . sid WHERE course . cname = '\u751f\u7269' AND score . num < 60 ; 19\u3001\u67e5\u8be2\u5728\u6240\u6709\u9009\u4fee\u4e86\u674e\u5e73\u8001\u5e08\u8bfe\u7a0b\u7684\u5b66\u751f\u4e2d\uff0c\u8fd9\u4e9b\u8bfe\u7a0b(\u674e\u5e73\u8001\u5e08\u7684\u8bfe\u7a0b\uff0c\u4e0d\u662f\u6240\u6709\u8bfe\u7a0b)\u5e73\u5747\u6210\u7ee9\u6700\u9ad8\u7684\u5b66\u751f\u59d3\u540d select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; -- \u8fd9\u91ccsid in ()\u7528in \u4f1a\u62a5\u9519\uff01\u83ab\u540d\u5176\u5999... -- This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' select sname from student where sid = ( select student_id from score where course_id in ( select cid from course inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) group by student_id order by avg ( num ) desc limit 1 ); -- \u4e07\u4e00\u6709\u5e76\u5217\u7684\u60c5\u51b5\u5462\uff1f\uff1f\u5582\u4e0d\u662f\u5f88\u4e25\u8c28\u554a\uff01 -- \u4e25\u8c28\u8d77\u6765\u4e86..\u8212\u670d\u4e86 \u4f46\u662f\u603b\u611f\u89c9\u54ea\u91cc\u4e0d\u5bf9... -- \u867d\u7136\u8bf4 group by\u5206\u7ec4\u540e\u53ea\u80fd\u53bb\u5230\u5206\u7ec4\u5b57\u6bb5\u548c\u805a\u5408\u51fd\u6570\u7ed3\u679c -- \u4f46\u8fd9\u91cc\u6709\u8fde\u8868 \u53ef\u4ee5\u53d6\u5230student_id\u5916\u952e\u5bf9\u5e94\u7684\u90a3\u5f20\u8868\u7684\u4e00\u6761\u8bb0\u5f55 select sname , avg ( num ) from score inner join course on score . course_id = course . cid inner join student on score . student_id = student . sid inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' group by student_id having avg ( num ) = # \u5c31\u662f\u8fd9 \u5b50\u67e5\u8be2\u91cc\u7528\u4e86 limit\u5173\u952e\u5b57 \u8fd9\u91cc\u5c31\u4e0d\u80fd\u7528 in ( select avg ( num ) from score inner join course on score . course_id = course . cid inner join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' group by student_id order by avg ( num ) desc limit 1 ); 20\u3001\u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u6210\u7ee9\u6700\u597d\u7684\u524d\u4e24\u540d\u5b66\u751f\u59d3\u540d \u54c7\uff01:-I -- \u67e5\u770b\u6bcf\u95e8\u8bfe\u7a0b\u6309\u7167\u5206\u6570\u6392\u5e8f\u7684\u4fe1\u606f select * from score order by course_id , num desc ; -- \u6c42\u51fa\u6bcf\u95e8\u8bfe\u7a0b\u7684\u8bfe\u7a0bcourse_id,\u4e0e\u6700\u9ad8\u5206\u6570first_num select course_id , max ( num ) as first_num from score group by course_id ; -- \u53bb\u6389\u6700\u9ad8\u5206,\u518d\u6309\u7167\u8bfe\u7a0b\u5206\u7ec4,\u53d6\u5f97\u7684\u6700\u9ad8\u5206,\u5c31\u662f\u7b2c\u4e8c\u9ad8\u7684\u5206\u6570second_num -- score inner join \u865a\u62df\u8868t \u5728\u6bcf\u4e2a\u8bfe\u7a0b\u540e\u9762\u90fd\u4f1a\u8ddf\u4e0a\u672c\u8bfe\u7a0b\u6700\u9ad8\u7684\u6210\u7ee9 select score . course_id , max ( num ) as second_num from score inner join ( select course_id , max ( num ) as first_num from score group by course_id ) as t on score . course_id = t . course_id where score . num < first_num -- \u5254\u9664\u6700\u9ad8\u5206 group by course_id ; -- \u5c06\u6709\u6700\u9ad8\u6210\u7ee9\u7684\u8868\u548c\u7b2c\u4e8c\u9ad8\u6210\u7ee9\u7684\u8868\u8fdb\u884c\u8fde\u8868 select t1 . course_id , t1 . first_num , t2 . second_num from ( select course_id , max ( num ) as first_num from score group by course_id ) as t1 inner join ( select score . course_id , max ( num ) as second_num from score inner join ( select course_id , max ( num ) as first_num from score group by course_id ) as t on score . course_id = t . course_id where score . num < first_num -- \u5254\u9664\u6700\u9ad8\u5206 group by course_id ) as t2 on t1 . course_id = t2 . course_id ; -- \u67e5\u8be2\u524d\u4e24\u540d\u7684\u5b66\u751f\uff08\u6709\u53ef\u80fd\u51fa\u73b0\u5e76\u5217\u7b2c\u4e00\u6216\u8005\u5e76\u5217\u7b2c\u4e8c\u7684\u60c5\u51b5\uff09\u53ea\u8981\u5b83\u7684\u6210\u7ee9\u5927\u4e8e\u7b49\u4e8e\u7b2c\u4e8c\u7684\u6210\u7ee9\u5c31\u884c -- \u5c06\u4e0a\u4e00\u56de\u5408\u7684\u67e5\u8be2\u7ed3\u679c\u5f97\u5230\u7684\u865a\u62df\u8868\u8bbe\u7f6e\u522b\u540d\u4e3at3 select score . student_id , t3 . course_id , t3 . first_num , t3 . second_num from score inner join ( select t1 . course_id , t1 . first_num , t2 . second_num from ( select course_id , max ( num ) as first_num from score group by course_id ) as t1 inner join ( select score . course_id , max ( num ) as second_num from score inner join ( select course_id , max ( num ) as first_num from score group by course_id ) as t on score . course_id = t . course_id where score . num < first_num -- \u5254\u9664\u6700\u9ad8\u5206 group by course_id ) as t2 on t1 . course_id = t2 . course_id ) as t3 on score . course_id = t3 . course_id where score . num >= t3 . second_num order by course_id ; -- \u4e2a\u4eba\u89c9\u5f97\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u53ef\u53d6 \u592a\u590d\u6742\u4e86... \u82e5\u53d6\u6bcf\u95e8\u8bfe\u524d\u4e09\u540d\u5b66\u751f \u4e14\u4e0d\u5f97\u53c8\u5d4c\u5957\u4e00\u5c42... /* \u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u6210\u7ee9\u6700\u597d\u7684\u524d3\u540d (\u4e0d\u8003\u8651\u6210\u7ee9\u5e76\u5217\u60c5\u51b5) */ SELECT cid , cname , -- where course_id = course.cid order by num ( select student . sname from score left join student on student . sid = score . student_id where course_id = course . cid order by num desc limit 1 offset 0 ) as \"\u7b2c1\u540d\" , ( select student . sname from score left join student on student . sid = score . student_id where course_id = course . cid order by num desc limit 1 offset 1 ) as \"\u7b2c2\u540d\" , ( select student . sname from score left join student on student . sid = score . student_id where course_id = course . cid order by num desc limit 1 offset 2 ) as \"\u7b2c3\u540d\" FROM course ; /* \u67e5\u8be2\u6bcf\u95e8\u8bfe\u7a0b\u6210\u7ee9\u6700\u597d\u7684\u524d3\u540d (\u8003\u8651\u6210\u7ee9\u5e76\u5217\u60c5\u51b5) */ -- \u67e5\u8be2\u5230\u6bcf\u95e8\u8bfe\u7684\u524d\u4e09\u9ad8\u5206 SELECT cid , cname , -- course_id = course.cid \u4fdd\u8bc1\u4e86\u662f\u67d0\u4e00\u79d1\u76ee -- group by num \u662f\u5bf9\u6210\u7ee9\u53bb\u91cd\u4e86 \u53bb\u91cd\u540e\u518d\u6392\u5e8f ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 0 ) as \"\u6700\u9ad8\u5206\" , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 1 ) as \"\u7b2c\u4e8c\u9ad8\u5206\" , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 2 ) as \"\u7b2c\u4e09\u9ad8\u5206\" FROM course ; -- I'm dead. select score . course_id , C . cname , sname , num from score inner join student on score . student_id = student . sid inner join ( SELECT cid , cname , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 0 ) as first , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 1 ) as second , ( select num from score where course_id = course . cid GROUP BY num order by num desc limit 1 offset 2 ) as third FROM course ) as C on score . course_id = C . cid -- \u8054\u8868\u540escore\u8868\u7684\u6bcf\u4e00\u6761\u6570\u636e\u540e\u9762\u90fd\u4f1a\u8ddf\u7740 \u5bf9\u5e94\u79d1\u76ee\u7b2c\u4e00\u7b2c\u4e8c\u7b2c\u4e09\u7684\u9ad8\u5206 WHERE score . num >= C . third -- \u5220\u9664\u6389\u4f4e\u4e8e\u7b2c\u4e09\u5206\u6570\u7684score\u8868\u8bb0\u5f55 \u5269\u4e0b\u7684\u8bb0\u5f55\u5c31\u90fd\u662f\u524d\u4e09\u7684 order by score . course_id , num ; 21\u3001\u67e5\u8be2\u4e0d\u540c\u8bfe\u7a0b\u4f46\u6210\u7ee9\u76f8\u540c\u7684\u5b66\u751f\u5b66\u53f7\uff0c\u8bfe\u7a0b\u53f7\uff0c\u6210\u7ee9 -- \u4e07\u4e07\u6ca1\u60f3\u5230 \u4f7f\u7528\u4ea4\u53c9\u8fde\u63a5\uff01\uff01 select DISTINCT s1 . student_id , s1 . course_id , s2 . course_id , s1 . num , s2 . num from score as s1 , score as s2 where s1 . num = s2 . num and s1 . course_id != s2 . course_id order by s1 . student_id ; 22\u3001\u67e5\u8be2\u6ca1\u5b66\u8fc7\u201c\u53f6\u5e73\u201d\u8001\u5e08\u8bfe\u7a0b\u7684\u5b66\u751f\u59d3\u540d\u4ee5\u53ca\u9009\u4fee\u7684\u8bfe\u7a0b\u540d\u79f0 -- \u674e\u5e73\u8001\u5e08\u6559\u8fc7\u7684\u8bfe\u7a0bid. select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ; -- \u9009\u8fc7\u674e\u5e73\u8001\u5e08\u8bfe\u7a0b\u7684\u5b66\u751f select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ); -- \u6ca1\u9009\u8fc7\u674e\u5e73\u8bfe\u7a0b\u8001\u5e08\u7684\u5b66\u751f select * from student where sid not in ( select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) ); -- \u4e0escore\u5173\u8054\u8d77\u6765 select t . sname , course_id from score inner join ( select sid , sname from student where sid not in ( select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) ) ) as t on score . student_id = t . sid ; select t . sname , course . cname from score inner join ( select sid , sname from student where sid not in ( select distinct student_id from score where score . course_id in ( select cid from course left join teacher on course . teacher_id = teacher . tid where tname = '\u674e\u5e73\u8001\u5e08' ) ) ) as t on score . student_id = t . sid inner join course on score . course_id = course . cid ; 23\u3001\u67e5\u8be2\u6240\u6709\u9009\u4fee\u4e86\u5b66\u53f7\u4e3a1\u7684\u540c\u5b66\u9009\u4fee\u8fc7\u7684\u4e00\u95e8\u6216\u8005\u591a\u95e8\u8bfe\u7a0b\u7684\u540c\u5b66\u5b66\u53f7\u548c\u59d3\u540d -- \u5b66\u53f7\u4e3a1\u7684\u540c\u5b66\u9009\u4fee\u7684\u8bfe\u7a0bid\u96c6\u5408 select course_id from score where student_id = 1 ; select student_id from score where course_id in -- \u7b5b\u9009\u51fa\u5728\u6b64\u96c6\u5408\u4e2d\u7684score\u8bb0\u5f55 ( select course_id from score where student_id = 1 ) group by student_id -- \u5206\u7ec4 having count ( 1 ) >= 1 ; -- \u770b\u6570\u91cf 24\u3001\u4efb\u8bfe\u6700\u591a\u7684\u8001\u5e08\u4e2d\u5b66\u751f\u5355\u79d1\u6210\u7ee9\u6700\u9ad8\u7684\u5b66\u751f\u59d3\u540d ```sql -- \u67e5\u8be2\u4efb\u8bfe\u6570\u6700\u591a\u7684\u8001\u5e08\u7684\u4fe1\u606f select tid,tname from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1; -- \u4efb\u8bfe\u6570\u6700\u591a\u7684\u8001\u5e08\u6240\u6559\u7684\u8bfe\u7a0b\u4fe1\u606f -- \u7528in\u4e0d\u884c \u62a5\u9519This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' -- \u90a3\u5c31\u7528\u8fde\u8868 select cid,cname from course inner join ( select tid from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1 ) as t on course.teacher_id = t.tid; -- \u627e\u51fa\u6240\u6559\u8bfe\u7a0b\u5355\u79d1\u6210\u7ee9\u6700\u9ad8\u7684\u5206\u6570 select course_id,max(num) from score where course_id in ( select cid from course inner join ( select tid from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1 ) as t on course.teacher_id = t.tid ) group by course_id; -- \u5c06score\u8868\u4e0e\u4e0a\u65b9\u8fd9\u4e00\u865a\u62df\u8868\u8fdb\u884c\u5185\u8fde\u63a5 -- \u5219\u80fd\u5339\u914d\u7684\u8bfe\u7a0b\u8bb0\u5f55\u540e\u9762\u4f1a\u6dfb\u52a0\u8bfe\u7a0bid\u548c\u6b64\u8bfe\u7a0b\u6700\u9ad8\u5206\u6570\u4e24\u4e2a\u5b57\u6bb5 -- \u5047\u5982\u6211\u4eec\u5339\u914d\u7684\u8bfe\u7a0bid \u662f2,4 \u8fd9\u6837\u5185\u8fde\u63a5\u540e \u8bb0\u5f55\u4e2d\u5c31\u53ea\u4f1a\u5269\u4e0bcourse_id\u503c\u4e3a2,4\u7684\u8bb0\u5f55 select sname,score.course_id,num from score inner join student on score.student_id = student.sid -- \u611f\u89c9\u8fd9\u4e2a\u653e\u5728\u540e\u9762\u5173\u8054\u4f1a\u5c11\u5173\u8054\u4e00\u4e9b... inner join ( select course_id,max(num) as max_num from score where course_id in ( select cid from course inner join ( select tid from course inner join teacher on course.teacher_id = teacher.tid group by tid order by count(1) desc limit 1 ) as t on course.teacher_id = t.tid ) group by course_id )as t1 on score.course_id = t1.course_id where score.num = max_num; -- \u5f53\u524d\u79d1\u76ee\u4e0e\u5f53\u524d\u79d1\u76ee\u6700\u9ad8\u6210\u7ee9\u76f8\u7b49 ```","title":"\u7ec3\u4e60\u9898"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/9_pymysql/","text":"\u7b2c\u4e00\u6b65: \u6839\u636e\u9879\u76ee\u7684\u529f\u80fd\u6765\u8bbe\u8ba1\u76f8\u5e94\u7684 \u6570\u636e\u5e93 & \u8868\u7ed3\u6784\uff08\u4e0d\u4f1a\u7ecf\u5e38\u53d8\u52a8\uff0c\u5728\u9879\u76ee\u8bbe\u8ba1\u4e4b\u521d\u5c31\u786e\u5b9a\u597d\u4e86. \u7b2c\u4e8c\u6b65: \u64cd\u4f5c\u8868\u7ed3\u6784\u4e2d\u7684\u6570\u636e\uff0c\u5df2\u8fbe\u5230\u5b9e\u73b0\u4e1a\u52a1\u903b\u8f91\u7684\u76ee\u7684\u3002 \u5217\u540d \u7c7b\u578b \u5907\u6ce8 id int \u4e0d\u4e3a\u7a7a & \u81ea\u589e & \u4e3b\u952e name varchar(32) \u4e0d\u4e3a\u7a7a password varchar(64) \u4e0d\u4e3a\u7a7a gender char(1) \u4e0d\u4e3a\u7a7a\uff0c\u652f\u6301\uff1a\u7537\u3001\u5973 email varchar(64) \u53ef\u4ee5\u4e3a\u7a7a amount decimal(10,2) \u4e0d\u4e3a\u7a7a & \u9ed8\u8ba4\u503c\u4e3a 0 ctime datetime \u65b0\u589e\u65f6\u7684\u65f6\u95f4 \u63d0\u793a\uff1a\u53ef\u57fa\u4e8edatetime\u6a21\u5757\u5b9e\u73b0 create database day25db default charset utf8 collate utf8_general_ci ; create table admin ( id int not null auto_increment primary key , name varchar ( 32 ) not null , password varchar ( 64 ) not null , gender char ( 1 ) not null , email varchar ( 64 ) null , amount decimal ( 10 , 2 ) not null default 0 , ctime datetime ) default charset = utf8 ; \u6570\u636e\u5e93|\u6570\u636e\u8868\u7684\u64cd\u4f5c \u00b6 import pymysql # \u8fde\u63a5MySQL\uff08\u5e95\u5c42\u662fsocket\u8fde\u63a5\uff09 # \u56e0\u4e3a\u662f\u5bf9\u6570\u636e\u5e93\u64cd\u4f5c \u6240\u4ee5\u8fd9\u91cc\u6ca1\u6709\u6307\u5b9a\u662f\u54ea\u4e2a\u6570\u636e\u5e93 \u540e\u9762\u4f1a\u521b\u5efa\u6570\u636e\u5e93 conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" ) cursor = conn . cursor () # \u6e38\u6807 # 1.[\u589e] cursor . execute ( \"create database db3 default charset utf8 collate utf8_general_ci\" ) conn . commit () # [\u5220] cursor . execute ( \"drop database db3\" ) conn . commit () # [\u67e5] cursor . execute ( \"show databases\" ) result = cursor . fetchall () print ( result ) # (('information_schema',), ('mysql',), ('performance_schema',), ('sys',)) # 2.\u8fdb\u5165\u6570\u636e\u5e93\u67e5\u770b\u8868 cursor . execute ( \"use db4\" ) cursor . execute ( \"show tables\" ) result = cursor . fetchall () print ( result ) # (('columns_priv',), ('db',), ('engine_cost',), ('event',), ('func',), ('general_log',),.... # 3.\u8fdb\u5165\u6570\u636e\u5e93\u521b\u5efa\u8868 cursor . execute ( \"use db4\" ) sql = \"\"\" create table L4( id int not null primary key auto_increment, title varchar(128), content text, ctime datetime )default charset=utf8; \"\"\" cursor . execute ( sql ) conn . commit () # 4.\u67e5\u770b\u6570\u636e\u5e93\u4e2d\u7684\u8868 \"\"\" cursor.execute(\"show tables\") result = cursor.fetchall() print(result) \"\"\" # 5.\u5176\u4ed6 drop table... \u7565\u8fc7 cursor . close () conn . close () \u8868\u8bb0\u5f55\u7684\u64cd\u4f5c \u589e\u5220\u6539\u67e5 \u00b6 pymysql.cursors.DictCursor conn.commit() cursor.fetchall() cursor.fetchonel() cursor.fetchmany() cursor.scroll() import datetime import pymysql # \u8fde\u63a5\u6307\u5b9a\u6570\u636e conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = \"day25db\" ) cursor = conn . cursor ( pymysql . cursors . DictCursor ) ''' ((1,'xxx'),(2,'yyy')) [{'id':1,'name':'xxx'},{'id':2,'name':'yyy'}] ''' # [\u589e] # \u5355\u72ec\u589e\u52a0\u6570\u636e NOW() ''' insert into admin(name,password,gender,email,amount,ctime) values(\"\u6b66\u6c9b\u9f50\",\"123123\",\"\u7537\",\"xxx@live.com\",19991.12,NOW()); ''' sql = 'insert into admin(name,password,gender,email,amount,ctime) values( %s , %s , %s , %s , %s ,NOW());' cursor . execute ( sql , [ \"tony\" , \"123123\" , \"\u7537\" , \"xxx@live.com\" , 19991.12 ]) conn . commit () # \u5355\u72ec\u589e\u52a0\u6570\u636e datetime.datetime.now() sql = 'insert into admin(name,password,gender,email,amount,ctime) values( %s , %s , %s , %s , %s , %s );' cursor . execute ( sql , [ \"tony\" , \"123123\" , \"\u7537\" , \"xxx@live.com\" , 19991.12 , datetime . datetime . now ()]) print ( cursor . lastrowid ) # #\u5728\u63d2\u5165\u8bed\u53e5\u540e\u67e5\u770b \u83b7\u53d6\u63d2\u5165\u7684\u6700\u540e\u4e00\u6761\u6570\u636e\u7684\u81ea\u589eID conn . commit () # \u591a\u6761\u6279\u91cf\u589e\u52a0 ''' insert into admin(name,password,gender,email,amount,ctime) values(\"tony\",\"123123123\",\"\u5973\",\"xxxxxxxx@live.com\",200.12,NOW()), (\"kelly\",\"8888\",\"\u5973\",\"kelly@live.com\",991.12,NOW()); ''' sql = 'insert into admin(name,password,gender,email,amount,ctime) values( %s , %s , %s , %s , %s , %s );' cursor . executemany ( sql , [ [ \"tony\" , \"123123123\" , \"\u5973\" , \"xxxxxxxx@live.com\" , 200.12 , datetime . datetime . now ()], [ \"kelly\" , \"8888\" , \"\u5973\" , \"kelly@live.com\" , 991.12 , datetime . datetime . now ()], ]) conn . commit () # [\u5220] # \u5220\u9664\u6027\u522b\u4e3a\u7537\u7684\u6240\u6709\u6570\u636e\u3002 sql = 'delete from admin where gender=\"\u7537\";' cursor . execute ( sql ) conn . commit () # [\u6539] # \u5c06 id>3 \u7684\u6240\u6709\u4eba\u7684\u6027\u522b\u6539\u4e3a \u7537\u3002 sql = 'update admin set gender=\"\u7537\" where id >3;' cursor . execute ( sql ) conn . commit () # \u8ba9\u6bcf\u4e2a\u4eba\u7684\u4f59\u989d\u5728\u81ea\u5df1\u539f\u6709\u7684\u57fa\u7840\u4e0a +1000 sql = 'update admin set amount=amount+1000;' cursor . execute ( sql ) conn . commit () # [\u67e5] # \u67e5\u8be2\u4f59\u989damount>1000\u7684\u6240\u6709\u7528\u6237\u3002 sql = 'select * from admin where amount >1000;' # \u6253\u5370\u8fd9\u6761\u8bed\u53e5 \u8fd4\u56de\u7684\u662f\u6267\u884c\u7ed3\u679c\u7684\u6761\u6570. # \u6267\u884c\u5b8c\u8fd9\u6761\u8bed\u53e5 \u5e95\u5c42\u53ea\u662f\u751f\u6210\u4e86\u4e00\u4e2a\u8fed\u4ee3\u5668 \u8981\u6570\u636e\u7684\u65f6\u5019\u624d\u4f1a\u751f\u6210\u7684 \u60f0\u6027\u8ba1\u7b97\u51cf\u7f13\u6570\u636e\u5e93\u538b\u529b # \u67e5\u5b8c\u5c31\u6ca1\u5566\uff01\uff01 cursor . execute ( sql ) result = cursor . fetchall () # fetchone() \u53d6\u4e00\u6761 # fetchmany(3) \u4ece\u5f53\u524d\u4f4d\u7f6e\u5f80\u540e\u53d63\u6761 print ( result ) ''' # \u53ef\u4ee5\u63a7\u5236\u6e38\u6807\u7684\u79fb\u52a8 # cursor.scroll(3,mode='absolute') # \u76f8\u5bf9\u7edd\u5bf9\u4f4d\u7f6e\u79fb\u52a8 \u53c2\u7167\u7269:\u5f00\u5934\u4f4d\u7f6e # cursor.scroll(3,mode='relative') # \u76f8\u5bf9\u5f53\u524d\u4f4d\u7f6e\u79fb\u52a8 ''' # \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 cursor . close () conn . close () \u6ce8\u610fsql\u6ce8\u5165\u7684\u95ee\u9898\uff01 # \u539f\u6765\u662f\u6211\u4eec\u5bf9sql\u8fdb\u884c\u5b57\u7b26\u4e32\u62fc\u63a5 # sql=\"select * from userinfo where name='%s' and password='%s'\" %(user,pwd) # print(sql) # res=cursor.execute(sql) xxx ' or 1 = 1 -- hahahah where name = 'xxx' or 1 = 1 -- hahahah ' and password = '' #\u6539\u5199\u4e3a\uff08execute\u5e2e\u6211\u4eec\u505a\u5b57\u7b26\u4e32\u62fc\u63a5\uff0c\u6211\u4eec\u65e0\u9700\u4e14\u4e00\u5b9a\u4e0d\u80fd\u518d\u4e3a%s\u52a0\u5f15\u53f7\u4e86\uff09 #\uff01\u6ce8\u610f%s\u9700\u8981\u53bb\u6389\u5f15\u53f7\uff0c\u56e0\u4e3apymysql\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u52a0\u4e0a sql = \"select * from userinfo where name= %s and password= %s \" res = cursor . execute ( sql ,[ user , pwd ]) \u6848\u4f8b \u00b6 \u7f16\u5199\u811a\u672c\u5b9e\u73b0\u5c06 csv \u6587\u4ef6\u7684\u5185\u5bb9\u5f55\u5165\u5230 MySQL \u6570\u636e\u5e93\u4e2d\u3002 \u8981\u6c42: \u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u81ea\u589e\u5217\u4f5c\u4e3a\u4e3b\u952e\uff08\u4e0d\u8981\u7528 csv \u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u5217\u4f5c\u4e3a\u4e3b\u952e\uff09\u3002 1715046,\u6cb3\u5317\u5927\u5b66\u53d6\u6d88\u8003\u8bd5\u5b66\u751f\u7d27\u6025\u79bb\u6821,\u8001\u5e08:\u56de\u4e0d\u4e86\u5bb6\u7684\u5230\u8001\u5e08\u5bb6\u8fc7\u5e74,https://video.pearvideo.com/mp4/adshort/20210105/cont-1715046-15562045_adpkg-ad_hd.mp4 1715020,\u91cd\u5e86\u4e24\u53e3\u5b50\u56e0\u7410\u4e8b\u5435\u67b6\uff0c\u7537\u5b50\u6012\u5c06\u81ea\u5bb6\u8f66\u63a8\u8fdb\u6daa\u6c5f,https://video.pearvideo.com/mp4/adshort/20210105/cont-1715020-15561817_adpkg-ad_hd.mp4 create table news ( id int not null auto_increment primary key , nid int not null , title varchar ( 128 ) not null , url char ( 128 ) not null ) default charset = utf8 ; import datetime import pymysql def insert_db ( * args ): # \u8fde\u63a5\u6307\u5b9a\u6570\u636e conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = \"day25db\" ) cursor = conn . cursor () # \u5355\u72ec\u589e\u52a0\u6570\u636e sql = 'insert into news(nid,title,url) values( %s , %s , %s );' cursor . execute ( sql , args ) conn . commit () # \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 cursor . close () conn . close () def run (): with open ( 'data.csv' , mode = 'rt' , encoding = 'utf-8' ) as file_object : for line in file_object : nid , others = line . strip () . split ( \",\" , maxsplit = 1 ) title , url = others . rsplit ( ',' , maxsplit = 1 ) insert_db ( nid , title , url ) if __name__ == '__main__' : run () import datetime import pymysql def insert_db ( multi_row_list ): # \u8fde\u63a5\u6307\u5b9a\u6570\u636e conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = \"day25db\" ) cursor = conn . cursor () # \u6279\u91cf\u589e\u52a0\u6570\u636e sql = 'insert into news(nid,title,url) values( %s , %s , %s );' cursor . executemany ( sql , multi_row_list ) conn . commit () # \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 cursor . close () conn . close () def run (): with open ( 'data.csv' , mode = 'rt' , encoding = 'utf-8' ) as file_object : # \u6279\u91cf\u5728\u6570\u636e\u5e93\u4e2d\u63d2\u5165\uff0c\u6bcf\u6b21\u6700\u591a\u63d2\u516510\u6761 part_list = [] for line in file_object : nid , others = line . strip () . split ( \",\" , maxsplit = 1 ) title , url = others . rsplit ( ',' , maxsplit = 1 ) part_list . append ([ nid , title , url ]) if len ( part_list ) == 10 : insert_db ( part_list ) part_list . clear () if part_list : insert_db ( part_list ) if __name__ == '__main__' : run ()","title":"pymysql"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/9_pymysql/#_1","text":"import pymysql # \u8fde\u63a5MySQL\uff08\u5e95\u5c42\u662fsocket\u8fde\u63a5\uff09 # \u56e0\u4e3a\u662f\u5bf9\u6570\u636e\u5e93\u64cd\u4f5c \u6240\u4ee5\u8fd9\u91cc\u6ca1\u6709\u6307\u5b9a\u662f\u54ea\u4e2a\u6570\u636e\u5e93 \u540e\u9762\u4f1a\u521b\u5efa\u6570\u636e\u5e93 conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" ) cursor = conn . cursor () # \u6e38\u6807 # 1.[\u589e] cursor . execute ( \"create database db3 default charset utf8 collate utf8_general_ci\" ) conn . commit () # [\u5220] cursor . execute ( \"drop database db3\" ) conn . commit () # [\u67e5] cursor . execute ( \"show databases\" ) result = cursor . fetchall () print ( result ) # (('information_schema',), ('mysql',), ('performance_schema',), ('sys',)) # 2.\u8fdb\u5165\u6570\u636e\u5e93\u67e5\u770b\u8868 cursor . execute ( \"use db4\" ) cursor . execute ( \"show tables\" ) result = cursor . fetchall () print ( result ) # (('columns_priv',), ('db',), ('engine_cost',), ('event',), ('func',), ('general_log',),.... # 3.\u8fdb\u5165\u6570\u636e\u5e93\u521b\u5efa\u8868 cursor . execute ( \"use db4\" ) sql = \"\"\" create table L4( id int not null primary key auto_increment, title varchar(128), content text, ctime datetime )default charset=utf8; \"\"\" cursor . execute ( sql ) conn . commit () # 4.\u67e5\u770b\u6570\u636e\u5e93\u4e2d\u7684\u8868 \"\"\" cursor.execute(\"show tables\") result = cursor.fetchall() print(result) \"\"\" # 5.\u5176\u4ed6 drop table... \u7565\u8fc7 cursor . close () conn . close ()","title":"\u6570\u636e\u5e93|\u6570\u636e\u8868\u7684\u64cd\u4f5c"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/9_pymysql/#_2","text":"pymysql.cursors.DictCursor conn.commit() cursor.fetchall() cursor.fetchonel() cursor.fetchmany() cursor.scroll() import datetime import pymysql # \u8fde\u63a5\u6307\u5b9a\u6570\u636e conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = \"day25db\" ) cursor = conn . cursor ( pymysql . cursors . DictCursor ) ''' ((1,'xxx'),(2,'yyy')) [{'id':1,'name':'xxx'},{'id':2,'name':'yyy'}] ''' # [\u589e] # \u5355\u72ec\u589e\u52a0\u6570\u636e NOW() ''' insert into admin(name,password,gender,email,amount,ctime) values(\"\u6b66\u6c9b\u9f50\",\"123123\",\"\u7537\",\"xxx@live.com\",19991.12,NOW()); ''' sql = 'insert into admin(name,password,gender,email,amount,ctime) values( %s , %s , %s , %s , %s ,NOW());' cursor . execute ( sql , [ \"tony\" , \"123123\" , \"\u7537\" , \"xxx@live.com\" , 19991.12 ]) conn . commit () # \u5355\u72ec\u589e\u52a0\u6570\u636e datetime.datetime.now() sql = 'insert into admin(name,password,gender,email,amount,ctime) values( %s , %s , %s , %s , %s , %s );' cursor . execute ( sql , [ \"tony\" , \"123123\" , \"\u7537\" , \"xxx@live.com\" , 19991.12 , datetime . datetime . now ()]) print ( cursor . lastrowid ) # #\u5728\u63d2\u5165\u8bed\u53e5\u540e\u67e5\u770b \u83b7\u53d6\u63d2\u5165\u7684\u6700\u540e\u4e00\u6761\u6570\u636e\u7684\u81ea\u589eID conn . commit () # \u591a\u6761\u6279\u91cf\u589e\u52a0 ''' insert into admin(name,password,gender,email,amount,ctime) values(\"tony\",\"123123123\",\"\u5973\",\"xxxxxxxx@live.com\",200.12,NOW()), (\"kelly\",\"8888\",\"\u5973\",\"kelly@live.com\",991.12,NOW()); ''' sql = 'insert into admin(name,password,gender,email,amount,ctime) values( %s , %s , %s , %s , %s , %s );' cursor . executemany ( sql , [ [ \"tony\" , \"123123123\" , \"\u5973\" , \"xxxxxxxx@live.com\" , 200.12 , datetime . datetime . now ()], [ \"kelly\" , \"8888\" , \"\u5973\" , \"kelly@live.com\" , 991.12 , datetime . datetime . now ()], ]) conn . commit () # [\u5220] # \u5220\u9664\u6027\u522b\u4e3a\u7537\u7684\u6240\u6709\u6570\u636e\u3002 sql = 'delete from admin where gender=\"\u7537\";' cursor . execute ( sql ) conn . commit () # [\u6539] # \u5c06 id>3 \u7684\u6240\u6709\u4eba\u7684\u6027\u522b\u6539\u4e3a \u7537\u3002 sql = 'update admin set gender=\"\u7537\" where id >3;' cursor . execute ( sql ) conn . commit () # \u8ba9\u6bcf\u4e2a\u4eba\u7684\u4f59\u989d\u5728\u81ea\u5df1\u539f\u6709\u7684\u57fa\u7840\u4e0a +1000 sql = 'update admin set amount=amount+1000;' cursor . execute ( sql ) conn . commit () # [\u67e5] # \u67e5\u8be2\u4f59\u989damount>1000\u7684\u6240\u6709\u7528\u6237\u3002 sql = 'select * from admin where amount >1000;' # \u6253\u5370\u8fd9\u6761\u8bed\u53e5 \u8fd4\u56de\u7684\u662f\u6267\u884c\u7ed3\u679c\u7684\u6761\u6570. # \u6267\u884c\u5b8c\u8fd9\u6761\u8bed\u53e5 \u5e95\u5c42\u53ea\u662f\u751f\u6210\u4e86\u4e00\u4e2a\u8fed\u4ee3\u5668 \u8981\u6570\u636e\u7684\u65f6\u5019\u624d\u4f1a\u751f\u6210\u7684 \u60f0\u6027\u8ba1\u7b97\u51cf\u7f13\u6570\u636e\u5e93\u538b\u529b # \u67e5\u5b8c\u5c31\u6ca1\u5566\uff01\uff01 cursor . execute ( sql ) result = cursor . fetchall () # fetchone() \u53d6\u4e00\u6761 # fetchmany(3) \u4ece\u5f53\u524d\u4f4d\u7f6e\u5f80\u540e\u53d63\u6761 print ( result ) ''' # \u53ef\u4ee5\u63a7\u5236\u6e38\u6807\u7684\u79fb\u52a8 # cursor.scroll(3,mode='absolute') # \u76f8\u5bf9\u7edd\u5bf9\u4f4d\u7f6e\u79fb\u52a8 \u53c2\u7167\u7269:\u5f00\u5934\u4f4d\u7f6e # cursor.scroll(3,mode='relative') # \u76f8\u5bf9\u5f53\u524d\u4f4d\u7f6e\u79fb\u52a8 ''' # \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 cursor . close () conn . close () \u6ce8\u610fsql\u6ce8\u5165\u7684\u95ee\u9898\uff01 # \u539f\u6765\u662f\u6211\u4eec\u5bf9sql\u8fdb\u884c\u5b57\u7b26\u4e32\u62fc\u63a5 # sql=\"select * from userinfo where name='%s' and password='%s'\" %(user,pwd) # print(sql) # res=cursor.execute(sql) xxx ' or 1 = 1 -- hahahah where name = 'xxx' or 1 = 1 -- hahahah ' and password = '' #\u6539\u5199\u4e3a\uff08execute\u5e2e\u6211\u4eec\u505a\u5b57\u7b26\u4e32\u62fc\u63a5\uff0c\u6211\u4eec\u65e0\u9700\u4e14\u4e00\u5b9a\u4e0d\u80fd\u518d\u4e3a%s\u52a0\u5f15\u53f7\u4e86\uff09 #\uff01\u6ce8\u610f%s\u9700\u8981\u53bb\u6389\u5f15\u53f7\uff0c\u56e0\u4e3apymysql\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u52a0\u4e0a sql = \"select * from userinfo where name= %s and password= %s \" res = cursor . execute ( sql ,[ user , pwd ])","title":"\u8868\u8bb0\u5f55\u7684\u64cd\u4f5c \u589e\u5220\u6539\u67e5"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/9_pymysql/#_3","text":"\u7f16\u5199\u811a\u672c\u5b9e\u73b0\u5c06 csv \u6587\u4ef6\u7684\u5185\u5bb9\u5f55\u5165\u5230 MySQL \u6570\u636e\u5e93\u4e2d\u3002 \u8981\u6c42: \u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u81ea\u589e\u5217\u4f5c\u4e3a\u4e3b\u952e\uff08\u4e0d\u8981\u7528 csv \u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u5217\u4f5c\u4e3a\u4e3b\u952e\uff09\u3002 1715046,\u6cb3\u5317\u5927\u5b66\u53d6\u6d88\u8003\u8bd5\u5b66\u751f\u7d27\u6025\u79bb\u6821,\u8001\u5e08:\u56de\u4e0d\u4e86\u5bb6\u7684\u5230\u8001\u5e08\u5bb6\u8fc7\u5e74,https://video.pearvideo.com/mp4/adshort/20210105/cont-1715046-15562045_adpkg-ad_hd.mp4 1715020,\u91cd\u5e86\u4e24\u53e3\u5b50\u56e0\u7410\u4e8b\u5435\u67b6\uff0c\u7537\u5b50\u6012\u5c06\u81ea\u5bb6\u8f66\u63a8\u8fdb\u6daa\u6c5f,https://video.pearvideo.com/mp4/adshort/20210105/cont-1715020-15561817_adpkg-ad_hd.mp4 create table news ( id int not null auto_increment primary key , nid int not null , title varchar ( 128 ) not null , url char ( 128 ) not null ) default charset = utf8 ; import datetime import pymysql def insert_db ( * args ): # \u8fde\u63a5\u6307\u5b9a\u6570\u636e conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = \"day25db\" ) cursor = conn . cursor () # \u5355\u72ec\u589e\u52a0\u6570\u636e sql = 'insert into news(nid,title,url) values( %s , %s , %s );' cursor . execute ( sql , args ) conn . commit () # \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 cursor . close () conn . close () def run (): with open ( 'data.csv' , mode = 'rt' , encoding = 'utf-8' ) as file_object : for line in file_object : nid , others = line . strip () . split ( \",\" , maxsplit = 1 ) title , url = others . rsplit ( ',' , maxsplit = 1 ) insert_db ( nid , title , url ) if __name__ == '__main__' : run () import datetime import pymysql def insert_db ( multi_row_list ): # \u8fde\u63a5\u6307\u5b9a\u6570\u636e conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = \"day25db\" ) cursor = conn . cursor () # \u6279\u91cf\u589e\u52a0\u6570\u636e sql = 'insert into news(nid,title,url) values( %s , %s , %s );' cursor . executemany ( sql , multi_row_list ) conn . commit () # \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 cursor . close () conn . close () def run (): with open ( 'data.csv' , mode = 'rt' , encoding = 'utf-8' ) as file_object : # \u6279\u91cf\u5728\u6570\u636e\u5e93\u4e2d\u63d2\u5165\uff0c\u6bcf\u6b21\u6700\u591a\u63d2\u516510\u6761 part_list = [] for line in file_object : nid , others = line . strip () . split ( \",\" , maxsplit = 1 ) title , url = others . rsplit ( ',' , maxsplit = 1 ) part_list . append ([ nid , title , url ]) if len ( part_list ) == 10 : insert_db ( part_list ) part_list . clear () if part_list : insert_db ( part_list ) if __name__ == '__main__' : run ()","title":"\u6848\u4f8b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/","text":"01 \u6570\u636e\u5b58\u50a8\u8fc7\u7a0b \u00b6 \u521b\u5efa\u8868\u7684\u65f6\u5019,\u4e0d\u8981\u5728\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u52a0\u9017\u53f7 \u5728mysql\u91cc,\u7a7a\u503c\u4e0d\u7b49\u4e8e\u7a7a\u5b57\u7b26\u4e32.\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u4e3a0,\u4e00\u4e2a\u7a7a\u503c\u7684\u957f\u5ea6\u4e3a\u7a7a,\u5e76\u4e14\u7a7a\u503c\u662f\u5360\u7a7a\u95f4\u7684. \u8868\u540d\u3001\u5b57\u6bb5\u540d\u7528\u82f1\u6587,\u7528\u6c49\u5b57\u7684\u8bdd\u5728\u9047\u5230\u7f16\u7801\u95ee\u9898\u5bb9\u6613\u51fa\u9519. \u5efa\u8bae\u6bcf\u6b21\u63d2\u5165\u6570\u636e\u65f6\u7684sql\u8bed\u53e5\u7684\u5b57\u6bb5\u540d\u90fd\u5199,\u8fd9\u6837\u4e0d\u5bb9\u6613\u51fa\u9519. select count ( * ) from t ; -- id\u4e3b\u952e\u7d22\u5f15 sex\u7d22\u5f15 \u67e5\u770bexplain\u6267\u884c\u8ba1\u5212\u7528\u4e86sex\u7d22\u5f15 why\uff1f -- sex\u53ea\u67092\u4e2a\u53ef\u80fd\u7684\u503c,\u7537\u548c\u5973 \u533a\u5206\u5ea6\u4f4e \u8f85\u52a9\u7d22\u5f15\u7684\u6811\u7684\u9ad8\u5ea6\u6309\u7167\u7406\u8bba\u5e94\u8be5\u66f4\u9ad8 \u50cf\u4e00\u6839\u68cd \u53ea\u6709\u53ef\u80fd\u662f\u8f85\u52a9\u7d22\u5f15\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684sex-id\u76f8\u6bd4\u4e8e\u4e3b\u952e\u7d22\u5f15\u7684id-value\u80fd\u66f4\u591a, -- \u8fd9\u91cc\u7684sql\u8bed\u53e5\u662f\u8ba1\u7b97\u884c\u6570,\u7efc\u5408\u4e0b\u6765\u5f25\u8865\u4e86\u6570\u9ad8\u5ea6\u7684\u95ee\u9898.. sex\u5217\u666e\u901a\u7d22\u5f15 0 1 \u6307\u4ee3 \u6027\u522b\u7537\u5973 02 \u5b57\u6bb5\u7c7b\u578b\u5b9a\u4e49 \u00b6 \u5b57\u6bb5\u7c7b\u578b\u7684\u5b9a\u4e49,\u6570\u636e\u4e00\u5b9a\u4e0d\u8981\u8d85\u8fc7\u53d6\u503c\u8303\u56f4,\u5728\u6b64\u524d\u63d0\u4e0b\u518d\u8003\u8651\u7a7a\u95f4\u95ee\u9898. eg: \u8d85\u5e02\u7684\u5546\u54c1\u8868\u7684itemnumber\u5546\u54c1\u7f16\u53f7\u7528\u7684 int \u800c\u4e0d\u662fsmallint,\u56e0\u4e3a\u6bcf\u5929\u5546\u54c1\u7684\u4e0a\u67b6\u4e0b\u67b6,\u65e5\u79ef\u6708\u7d2f,\u5546\u54c1\u6570\u636e\u6781\u6709\u53ef\u80fd\u8d85\u8fc7smallint\u7c7b\u578b\u768465535. \u6d6e\u70b9\u578b\u7684\u6570\u636e float 4\u5b57\u8282 \u548cdouble 8\u5b57\u8282 \u4e0d\u7cbe\u51c6; DECIMAL \u7cbe\u51c6. eg: \u8d85\u5e02\u4fe1\u606f\u7cfb\u7edf \u5c31\u63a8\u8350\u7528 DECIMAL \u6d89\u53ca\u91d1\u94b1\u8ba1\u7b97 \u5206\u6beb\u4e0d\u5dee.. \u5b9a\u4e49\u4e00\u4e2a double price 0.47 + 0.44 + 0.19 = 1.09999999... why\uff1ffloat\u548cdouble\u662f\u91c7\u7528\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u5b58\u50a8\u7684. \u6bd4\u59829.624\u5c31\u65e0\u6cd5\u7528\u4e8c\u8fdb\u5236\u6570\u7cbe\u786e\u8868\u8fbe,\u5c31\u4f1a\u53d6\u8fd1\u4f3c\u503c. DECIMAL \u4f1a\u628a\u5c0f\u6570\u548c\u6574\u6570\u90e8\u5206\u62c6\u5f00 \u5206\u522b\u8f6c\u6362\u4e3a\u5341\u516d\u8fdb\u5236\u5b58\u50a8. \u6587\u672c\u7c7b\u578b \u5b57\u7b26\u4e32\uff1a char varchar text enum set text \u4e0d\u9700\u8981\u77e5\u9053\u6587\u672c\u7684\u957f\u5ea6 \u4f46mysql\u4e0d\u5141\u8bb8\u5176\u4f5c\u4e3a\u4e3b\u952e \u65f6\u95f4\u7c7b\u578b\uff1a datetime \u4e0e TIMESTAMP 03 \u521b\u5efa\u548c\u4fee\u6539\u8868 \u00b6 \u7ea6\u675f: \u975e\u7a7a\u3001\u552f\u4e00\u6027\u3001\u81ea\u589e \u3001\u9ed8\u8ba4\u503c.... AUTO_INCREMENT\u81ea\u589e\u5b57\u6bb5\u4f1a\u5728\u6700\u5927\u503c\u7684\u57fa\u7840\u4e0a\u52a01 \u590d\u5236\u8868 \u521b\u5efa\u4e00\u4e2a\u76f8\u540c\u7ed3\u6784\u7684\u7a7a\u8868 CREATE TABLE demo.importheadhist LIKE demo.importhead; 04 \u64cd\u4f5c\u8868\u8bb0\u5f55 \u00b6 \u63d2\u5165\u67e5\u8be2\u7ed3\u679c \u95e8\u5e97\u6bcf\u5929\u7684\u9500\u552e\u6d41\u6c34\u90fd\u5f88\u591a\uff0c\u65e5\u79ef\u6708\u7d2f\uff0c\u6d41\u6c34\u8868\u53d8\u5f97\u8d8a\u6765\u8d8a\u5927\u3002\u5982\u679c\u5c31\u8ba9\u5b83\u8fd9\u4e48\u4e0d\u65ad\u5730\u589e\u957f\uff0c\u6570\u636e\u91cf\u751a\u81f3\u4f1a\u8fbe\u5230\u6570\u4ebf\u6761\uff0c\u5360\u636e\u7684\u5b58\u50a8\u7a7a\u95f4\u8fbe\u5230\u51e0\u5341\u4e2a G\u3002\u867d\u7136 MySQL \u53ef\u4ee5\u5904\u7406\u8fd9\u6837\u6bd4\u8f83\u5927\u7684\u6570\u636e\u8868\uff0c\u4f46\u662f\u6bcf\u6b21\u64cd\u4f5c\u7684\u54cd\u5e94\u65f6\u95f4\u5c31\u4f1a\u5ef6\u957f\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u7684\u6574\u4f53\u6548\u7387\u4e0b\u964d\u3002\u53ef\u4ee5\u5f00\u53d1\u4e86\u4e00\u4e2a\u65e5\u7ed3\u5904\u7406\uff0c\u5f53\u5929\u7b97\u6e05\u6240\u6709\u8d26\u76ee\u3002 \u4e3e\u4e2a\u4f8b\u5b50, \u5728\u8d85\u5e02\u4fe1\u606f\u7cfb\u7edf\u7684 MySQL \u6570\u636e\u5e93\u4e2d, \u5386\u53f2\u6d41\u6c34\u8868\u8bbe\u8ba1\u4e0e\u6d41\u6c34\u8868\u975e\u5e38\u7c7b\u4f3c. \u4e0d\u540c\u7684\u662f, \u5386\u53f2\u6d41\u6c34\u8868\u589e\u52a0\u4e86\u4e00\u4e9b\u5b57\u6bb5\u6765\u6807\u8bc6\u5386\u53f2\u6d41\u6c34\u7684\u72b6\u6001, \u6bd4\u5982\u65e5\u7ed3\u65f6\u95f4\u5b57\u6bb5, \u662f\u7528\u6765\u8bb0\u5f55\u65e5\u7ed3\u64cd\u4f5c\u662f\u4ec0\u4e48\u65f6\u5019\u8fdb\u884c\u7684. INSERT INTO \u5386\u53f2\u6d41\u6c34\u8868\uff08\u65e5\u7ed3\u65f6\u95f4\u5b57\u6bb5 , \u5176\u4ed6\u5b57\u6bb5\uff09 SELECT \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u51fd\u6570\uff0c\u5176\u4ed6\u5b57\u6bb5 FROM \u6d41\u6c34\u8868 WHERE \u6761\u4ef6 \u4e0d\u8981\u968f\u4fbf\u4fee\u6539\u4e3b\u952e\u5b57\u6bb5\u7684\u503c ON DUPLICATE KEY UPDATE \u7684\u4f7f\u7528 \u5982\u679c\u6211\u4eec\u628a\u67e5\u8be2\u7684\u7ed3\u679c\u63d2\u5165\u5230\u8868\u4e2d\u65f6,\u5bfc\u81f4\u4e3b\u952e\u7ea6\u675f\u6216\u8005\u552f\u4e00\u6027\u7ea6\u675f\u88ab\u7834\u574f\u4e86,\u5c31\u53ef\u4ee5\u7528\u201cON DUPLICATE\u201d\u5173\u952e\u5b57\u8fdb\u884c\u5904\u7406. \u5b83\u544a\u8bc9 MySQL,\u5982\u679c\u9047\u5230\u91cd\u590d\u7684\u6570\u636e,\u8be5\u5982\u4f55\u5904\u7406\u3002 \u53c2\u8003\u94fe\u63a5: https://www.jianshu.com/p/6ecda3af29c9 /*\u5c06\u95e8\u5e97A\u548c\u95e8\u5e97B\u8fdb\u884c\u8fde\u9501 \u5047\u8bbe\u6211\u4eec\u8981\u628a\u95e8\u5e97B\u7684\u5546\u54c1\u6570\u636e,\u63d2\u5165\u5230\u95e8\u5e97A\u7684\u5546\u54c1\u8868\u4e2d\u53bb, \u5982\u679c\u6709\u91cd\u590d\u7684\u5546\u54c1\u7f16\u53f7itemnumber(\u662f\u4e3b\u952eid), \u5c31\u7528\u95e8\u5e97B\u7684\u6761\u7801barcode\u66ff\u6362\u95e8\u5e97A\u7684\u6761\u7801;\u7528\u95e8\u5e97B\u7684\u5546\u54c1\u540d\u79f0goodsname\u66ff\u6362\u95e8\u5e97A\u7684\u5546\u54c1\u540d\u79f0 \u5982\u679c\u6ca1\u6709\u91cd\u590d\u7684\u7f16\u53f7\uff0c \u5c31\u76f4\u63a5\u628a\u95e8\u5e97B\u7684\u5546\u54c1\u6570\u636e\u63d2\u5165\u5230\u95e8\u5e97A\u7684\u5546\u54c1\u8868\u4e2d */ INSERT INTO demo . goodsmaster SELECT * FROM demo . goodsmaster1 as a ON DUPLICATE KEY UPDATE barcode = a . barcode , goodsname = a . goodsname ; \u5220\u9664\u8bb0\u5f55\u540e\u518d\u63d2\u5165\u8bb0\u5f55,\u4f1a\u51fa\u73b0\u4e3b\u952e\u5b57\u6bb5\u503c\u4e0d\u8fde\u7eed\u7684\u60c5\u51b5.. \u89e3\u51b3\u529e\u6cd5: \u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u6307\u5b9a\u4e3b\u952e\u503c\u7684\u529e\u6cd5\u63d2\u5165\u6570\u636e\uff0c\u800c\u4e0d\u662f\u7701\u7565\u4e3b\u952e\u503c\u8ba9\u5b83\u81ea\u589e 05 \u5982\u4f55\u6b63\u786e\u8bbe\u7f6e\u4e3b\u952e \u00b6 \u601d\u8def\u4e00: \u4e1a\u52a1\u5b57\u6bb5\u505a\u4e3b\u952e \u601d\u8def\u4e8c: \u4f7f\u7528\u81ea\u589e\u5b57\u6bb5\u505a\u4e3b\u952e \u601d\u8def\u4e09: \u624b\u52a8\u8d4b\u503c\u5b57\u6bb5\u505a\u4e3b\u952e (\u00b4\u25bd\uff40) \u8be6\u89c105.md 06 \u505a\u5173\u8054\u67e5\u8be2 \u00b6 \u5916\u952e\u5c31\u662f \u4ece\u8868 \u4e2d\u7528\u6765\u5f15\u7528 \u4e3b\u8868 \u4e2d\u6570\u636e\u7684\u90a3\u4e2a\u516c\u5171\u5b57\u6bb5 MySQL \u7cfb\u7edf\u4f1a\u6839\u636e\u5916\u952e\u7ea6\u675f\u7684\u5b9a\u4e49, \u76d1\u63a7\u5bf9\u4e3b\u8868\u4e2d\u6570\u636e\u7684\u5220\u9664\u64cd\u4f5c\u3002\u5982\u679c\u53d1\u73b0\u8981\u5220\u9664\u7684\u4e3b\u8868\u8bb0\u5f55, \u6b63\u5728\u88ab\u4ece\u8868\u4e2d\u67d0\u6761\u8bb0\u5f55\u7684\u5916\u952e\u5b57\u6bb5\u6240\u5f15\u7528, MySQL \u5c31\u4f1a\u63d0\u793a\u9519\u8bef, \u4ece\u800c\u786e\u4fdd\u4e86\u5173\u8054\u6570\u636e\u4e0d\u4f1a\u7f3a\u5931. (\u5b9e\u5219\u4e0a\u5c31\u662f\u4fdd\u8bc1\u5916\u952e\u5b57\u6bb5\u503c \u662f\u5916\u952e\u5173\u8054\u7684\u53e6\u4e00\u5f20\u8868\u7684\u5b57\u6bb5 \u6240\u62e5\u6709\u7684\u503c) \u53ef\u4ee5\u901a\u8fc7 SQL \u8bed\u53e5\u6765\u67e5\u770b\u5916\u952e\u7ea6\u675f\u7684\u76f8\u5173\u4fe1\u606f, \u8fd9\u91cc\u9700\u8981\u7528\u5230 MySQL \u81ea\u5e26\u7684\u3001\u7528\u4e8e\u5b58\u50a8\u7cfb\u7edf\u4fe1\u606f\u7684\u6570\u636e\u5e93\uff1ainformation_schema\u3002 mysql > SELECT -> constraint_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u540d\u79f0 -> table_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u6240\u5c5e\u6570\u636e\u8868\u7684\u540d\u79f0 -> column_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u7684\u5b57\u6bb5\u540d\u79f0 -> referenced_table_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u6240\u53c2\u7167\u7684\u6570\u636e\u8868\u540d\u79f0 -> referenced_column_name -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u6240\u53c2\u7167\u7684\u5b57\u6bb5\u540d\u79f0 -> FROM -> information_schema . KEY_COLUMN_USAGE -> WHERE -- \u53ef\u4ee5\u901a\u8fc7show create table table_name;\u8bed\u53e5\u67e5\u770b\u5916\u952e\u7ea6\u675f\u540d\u79f0 -> constraint_name = 'fk_importdetails_importhead' ; -- \u5916\u952e\u7ea6\u675f\u540d\u79f0 \u53ef\u4ee5\u4e0d\u7528\u5916\u952e\u7ea6\u675f,\u4f46\u8981\u60f3\u529e\u6cd5 \u901a\u8fc7\u5e94\u7528\u5c42\u9762\u7684\u9644\u52a0\u903b\u8f91 ,\u6765\u5b9e\u73b0\u5916\u952e\u7ea6\u675f\u7684\u529f\u80fd,\u786e\u4fdd\u6570\u636e\u7684\u4e00\u81f4\u6027!!!! (\u5927\u5e76\u53d1\u7684\u573a\u666f,\u5916\u952e\u7ea6\u675f\u5e26\u6765\u7684\u8d44\u6e90\u6d88\u8017\u4f1a\u8ba9\u7cfb\u7edf\u5403\u4e0d\u6d88.) 07 where\u4e0ehaving \u00b6 mysql\u4f18\u5316\u5668\u5728\u5236\u5b9a\u67e5\u8be2\u8ba1\u5212\u7684\u65f6\u5019, \u4f1a\u5bf9\u67e5\u8be2\u8fdb\u884c\u4f18\u5316, \u6bd4\u5982\u91cd\u5199\u67e5\u8be2\u8bed\u53e5, \u76ee\u7684\u662f\u63d0\u9ad8\u67e5\u8be2\u7684\u901f\u5ea6\u6548\u7387, \u4e0d\u4f1a\u673a\u68b0\u6309\u7167\u56fa\u5b9a\u7684\u987a\u5e8f\u6267\u884c \u6240\u4ee5sql\u4f18\u5316\u5668\u53ef\u80fd\u4f1a\u5bfc\u81f4 \u771f\u5b9e\u60c5\u51b5\u662f\u5148where\u7f29\u5c0f\u8303\u56f4\u518dinner join\u8fde\u8868 ```sql select ... from a inner join b on ... inner join c on ... GROUP BY a.transdate , operatorname -- \u6309\u7167\u65e5\u671f\u3001\u6536\u94f6\u5458\u5206\u7ec4 HAVING a.transdate IN ('2020-12-10' , '2020-12-11') AND SUM(b.salesvalue) > 100; -- \u53ef\u4ee5\u5c06\u65f6\u95f4\u7684\u7b5b\u9009\u7528where\u8bed\u53e5\u5b9e\u73b0 select .... WHERE a.transdate in ('2020-12-12','2020-12-11') -- \u5148\u6309\u65e5\u671f\u7b5b\u9009 GROUP BY a.transdate , operatorname HAVING SUM(b.salesvalue)>100; -- \u540e\u6309\u91d1\u989d\u7b5b\u9009 ``` 08 \u805a\u5408\u51fd\u6570 \u00b6 count(*) | count(1) : \u7edf\u8ba1\u4e00\u5171\u6709\u591a\u5c11\u6761\u8bb0\u5f55; count(\u5b57\u6bb5): \u7edf\u8ba1\u6709\u591a\u5c11\u4e2a\u4e0d\u4e3a\u7a7a\u7684\u5b57\u6bb5\u503c \u82e5\u5b57\u6bb5\u662f\u4e3b\u952e count(\u5b57\u6bb5\u6700\u5feb) ; count(1) \u6bd4count(*) \u7a0d\u5fae\u9ad8\u6548\u4e00\u70b9.. LEFT(str, n): \u8868\u793a\u8fd4\u56de\u5b57\u7b26\u4e32 str \u6700\u5de6\u8fb9\u7684 n \u4e2a\u5b57\u7b26 \u642d\u914d\u4f7f\u7528 --- GROUP BY LEFT(a.transdate,10) ORDER BY LEFT(a.transdate,10) \u8981\u77e5\u9053LEFT(transdate,10)\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u9500\u552e\u65f6\u95f4\u6309\u7167\u683c\u5f0fYYYY-MM-DD\u7684\u503c, \u662f\u6309\u7167\u8fd9\u4e2a\u503c\u8fdb\u884c\u7684\u5206\u7ec4 09 \u65e5\u5fd7 \u00b6 \u901a\u7528\u67e5\u8be2\u65e5\u5fd7 \u901a\u7528\u67e5\u8be2\u65e5\u5fd7\u8bb0\u5f55\u4e86\u6240\u6709\u7528\u6237\u7684\u8fde\u63a5\u5f00\u59cb\u65f6\u95f4\u548c\u622a\u6b62\u65f6\u95f4 \u4ee5\u53ca\u53d1\u7ed9 MySQL \u6570\u636e\u5e93\u670d\u52a1\u5668\u7684\u6240\u6709 SQL \u6307\u4ee4\u3002 \u6162\u67e5\u8be2\u65e5\u5fd7 \u6162\u67e5\u8be2\u65e5\u5fd7\u7528\u6765\u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u6307\u5b9a\u65f6\u957f\u7684\u67e5\u8be2 \u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u662f\uff0c\u5e2e\u52a9\u6211\u4eec\u53d1\u73b0\u90a3\u4e9b\u6267\u884c\u65f6\u95f4\u7279\u522b\u957f\u7684 SQL \u67e5\u8be2, \u5e76\u4e14\u6709\u9488\u5bf9\u6027\u5730\u8fdb\u884c\u4f18\u5316, \u4ece\u800c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6574\u4f53\u6548\u7387. \u9519\u8bef\u65e5\u5fd7 \u9519\u8bef\u65e5\u5fd7\u8bb0\u5f55\u4e86 MySQL \u670d\u52a1\u5668\u542f\u52a8\u3001\u505c\u6b62\u8fd0\u884c\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u7cfb\u7edf\u542f\u52a8\u3001\u8fd0\u884c\u548c\u505c\u6b62\u8fc7\u7a0b\u4e2d\u7684\u8bca\u65ad\u4fe1\u606f, \u5305\u62ec\u9519\u8bef\u3001\u8b66\u544a\u548c\u63d0\u793a\u7b49. \u9519\u8bef\u65e5\u5fd7\u9ed8\u8ba4\u662f\u5f00\u542f\u7684. \u4e8c\u8fdb\u5236\u65e5\u5fd7 \u4e3b\u8981\u7528\u4e8e\u4e3b\u4ece\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65, \u4ee5\u53ca\u670d\u52a1\u5668\u9047\u5230\u6545\u969c\u65f6\u6570\u636e\u7684\u65e0\u635f\u5931\u6062\u590d \u4e2d\u7ee7\u65e5\u5fd7 \u5c31\u662f\u4e3b\u4ece\u670d\u52a1\u5668\u67b6\u6784\u4e2d, \u4ece\u670d\u52a1\u5668\u7528\u6765\u5b58\u653e\u4e3b\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u65e5\u5fd7\u5185\u5bb9\u7684\u4e00\u4e2a\u4e2d\u95f4\u6587\u4ef6. \u4ece\u670d\u52a1\u5668\u901a\u8fc7\u8bfb\u53d6\u4e2d\u7ee7\u65e5\u5fd7\u7684\u5185\u5bb9, \u6765\u540c\u6b65\u4e3b\u670d\u52a1\u5668\u4e0a\u7684\u64cd\u4f5c. \u56de\u6eda\u65e5\u5fd7 \u7528\u6765\u5b58\u50a8\u4e8b\u52a1\u4e2d\u6570\u636e\u66f4\u65b0\u524d\u7684\u72b6\u6001, \u4ee5\u4fbf\u56de\u6eda\u548c\u4fdd\u6301\u5176\u4ed6\u4e8b\u52a1\u7684\u6570\u636e\u4e00\u81f4\u6027. \u6709\u4e86\u5b83, \u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u7684\u5168\u91cf\u5907\u4efd\u548c\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e2d\u4fdd\u5b58\u7684\u589e\u91cf\u4fe1\u606f, \u5b8c\u6210\u6570\u636e\u5e93\u7684\u65e0\u635f\u5931\u6062\u590d. \u91cd\u505a\u65e5\u5fd7 \u662f\u4e3a\u4e86\u786e\u4fdd\u6570\u503c\u6301\u4e45\u6027\u3001\u9632\u6b62\u6570\u636e\u66f4\u65b0\u4e22\u5931\u7684\u4e00\u79cd\u65e5\u5fd7. 10 \u6570\u636e\u7684\u5907\u4efd \u00b6 \u6570\u636e\u5907\u4efd\u7684\u5de5\u5177 mysqldump, \u4ee5\u53ca\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u5de5\u5177\u201cmysql\u201d\u548c SQL \u8bed\u53e5\u201cSOURCE\u201d\u8fdb\u884c\u6570\u636e\u6062\u590d\u7684\u65b9\u6cd5.\u7528\u4e8e\u5bfc\u51fa\u6570\u636e\u8868\u4e2d\u6570\u636e\u7684\u8bed\u53e5\u201cSELECT \u2026 INTO OUTFILE\u201d\u548c\u5bfc\u5165\u7684\u8bed\u53e5\u201cLOAD DATA\u201d\u3002\u8fd9\u4e9b\u90fd\u662f\u5728\u5907\u4efd\u6570\u636e\u65f6\u5fc5\u4e0d\u53ef\u5c11\u7684, \u5bf9\u786e\u4fdd\u6570\u636e\u7684\u5b89\u5168\u6027\u81f3\u5173\u91cd\u8981\u3002 \u201cLOAD DATA\u201d\u662f\u5f88\u597d\u7528\u7684\u5de5\u5177, \u56e0\u4e3a\u5b83\u7684\u6570\u636e\u5bfc\u5165\u901f\u5ea6\u662f\u975e\u5e38\u60ca\u4eba\u7684. \u4e00\u4e2a 400 \u4e07\u6761\u6570\u636e\u7684\u6587\u4ef6, \u7528\u201cLOAD DATA\u201d\u8bed\u53e5, \u53ea\u9700\u8981\u51e0\u5206\u949f\u5c31\u53ef\u4ee5\u5b8c\u6210, \u800c\u5176\u4ed6\u7684\u65b9\u6cd5, \u6bd4\u5982\u4f7f\u7528 Workbench \u6765\u5bfc\u5165\u6570\u636e, \u5c31\u9700\u8981\u82b1\u8d39\u597d\u51e0\u4e2a\u5c0f\u65f6. Ps: \u8bbe\u8ba1\u8868, \u4e1a\u52a1\u4f18\u5148, \u4e09\u5927\u8303\u5f0f\u7b49.(\u00b4\u25bd\uff40)","title":"other1"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#01","text":"\u521b\u5efa\u8868\u7684\u65f6\u5019,\u4e0d\u8981\u5728\u6700\u540e\u4e00\u4e2a\u5b57\u6bb5\u52a0\u9017\u53f7 \u5728mysql\u91cc,\u7a7a\u503c\u4e0d\u7b49\u4e8e\u7a7a\u5b57\u7b26\u4e32.\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u4e3a0,\u4e00\u4e2a\u7a7a\u503c\u7684\u957f\u5ea6\u4e3a\u7a7a,\u5e76\u4e14\u7a7a\u503c\u662f\u5360\u7a7a\u95f4\u7684. \u8868\u540d\u3001\u5b57\u6bb5\u540d\u7528\u82f1\u6587,\u7528\u6c49\u5b57\u7684\u8bdd\u5728\u9047\u5230\u7f16\u7801\u95ee\u9898\u5bb9\u6613\u51fa\u9519. \u5efa\u8bae\u6bcf\u6b21\u63d2\u5165\u6570\u636e\u65f6\u7684sql\u8bed\u53e5\u7684\u5b57\u6bb5\u540d\u90fd\u5199,\u8fd9\u6837\u4e0d\u5bb9\u6613\u51fa\u9519. select count ( * ) from t ; -- id\u4e3b\u952e\u7d22\u5f15 sex\u7d22\u5f15 \u67e5\u770bexplain\u6267\u884c\u8ba1\u5212\u7528\u4e86sex\u7d22\u5f15 why\uff1f -- sex\u53ea\u67092\u4e2a\u53ef\u80fd\u7684\u503c,\u7537\u548c\u5973 \u533a\u5206\u5ea6\u4f4e \u8f85\u52a9\u7d22\u5f15\u7684\u6811\u7684\u9ad8\u5ea6\u6309\u7167\u7406\u8bba\u5e94\u8be5\u66f4\u9ad8 \u50cf\u4e00\u6839\u68cd \u53ea\u6709\u53ef\u80fd\u662f\u8f85\u52a9\u7d22\u5f15\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684sex-id\u76f8\u6bd4\u4e8e\u4e3b\u952e\u7d22\u5f15\u7684id-value\u80fd\u66f4\u591a, -- \u8fd9\u91cc\u7684sql\u8bed\u53e5\u662f\u8ba1\u7b97\u884c\u6570,\u7efc\u5408\u4e0b\u6765\u5f25\u8865\u4e86\u6570\u9ad8\u5ea6\u7684\u95ee\u9898.. sex\u5217\u666e\u901a\u7d22\u5f15 0 1 \u6307\u4ee3 \u6027\u522b\u7537\u5973","title":"01 \u6570\u636e\u5b58\u50a8\u8fc7\u7a0b"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#02","text":"\u5b57\u6bb5\u7c7b\u578b\u7684\u5b9a\u4e49,\u6570\u636e\u4e00\u5b9a\u4e0d\u8981\u8d85\u8fc7\u53d6\u503c\u8303\u56f4,\u5728\u6b64\u524d\u63d0\u4e0b\u518d\u8003\u8651\u7a7a\u95f4\u95ee\u9898. eg: \u8d85\u5e02\u7684\u5546\u54c1\u8868\u7684itemnumber\u5546\u54c1\u7f16\u53f7\u7528\u7684 int \u800c\u4e0d\u662fsmallint,\u56e0\u4e3a\u6bcf\u5929\u5546\u54c1\u7684\u4e0a\u67b6\u4e0b\u67b6,\u65e5\u79ef\u6708\u7d2f,\u5546\u54c1\u6570\u636e\u6781\u6709\u53ef\u80fd\u8d85\u8fc7smallint\u7c7b\u578b\u768465535. \u6d6e\u70b9\u578b\u7684\u6570\u636e float 4\u5b57\u8282 \u548cdouble 8\u5b57\u8282 \u4e0d\u7cbe\u51c6; DECIMAL \u7cbe\u51c6. eg: \u8d85\u5e02\u4fe1\u606f\u7cfb\u7edf \u5c31\u63a8\u8350\u7528 DECIMAL \u6d89\u53ca\u91d1\u94b1\u8ba1\u7b97 \u5206\u6beb\u4e0d\u5dee.. \u5b9a\u4e49\u4e00\u4e2a double price 0.47 + 0.44 + 0.19 = 1.09999999... why\uff1ffloat\u548cdouble\u662f\u91c7\u7528\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u5b58\u50a8\u7684. \u6bd4\u59829.624\u5c31\u65e0\u6cd5\u7528\u4e8c\u8fdb\u5236\u6570\u7cbe\u786e\u8868\u8fbe,\u5c31\u4f1a\u53d6\u8fd1\u4f3c\u503c. DECIMAL \u4f1a\u628a\u5c0f\u6570\u548c\u6574\u6570\u90e8\u5206\u62c6\u5f00 \u5206\u522b\u8f6c\u6362\u4e3a\u5341\u516d\u8fdb\u5236\u5b58\u50a8. \u6587\u672c\u7c7b\u578b \u5b57\u7b26\u4e32\uff1a char varchar text enum set text \u4e0d\u9700\u8981\u77e5\u9053\u6587\u672c\u7684\u957f\u5ea6 \u4f46mysql\u4e0d\u5141\u8bb8\u5176\u4f5c\u4e3a\u4e3b\u952e \u65f6\u95f4\u7c7b\u578b\uff1a datetime \u4e0e TIMESTAMP","title":"02 \u5b57\u6bb5\u7c7b\u578b\u5b9a\u4e49"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#03","text":"\u7ea6\u675f: \u975e\u7a7a\u3001\u552f\u4e00\u6027\u3001\u81ea\u589e \u3001\u9ed8\u8ba4\u503c.... AUTO_INCREMENT\u81ea\u589e\u5b57\u6bb5\u4f1a\u5728\u6700\u5927\u503c\u7684\u57fa\u7840\u4e0a\u52a01 \u590d\u5236\u8868 \u521b\u5efa\u4e00\u4e2a\u76f8\u540c\u7ed3\u6784\u7684\u7a7a\u8868 CREATE TABLE demo.importheadhist LIKE demo.importhead;","title":"03 \u521b\u5efa\u548c\u4fee\u6539\u8868"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#04","text":"\u63d2\u5165\u67e5\u8be2\u7ed3\u679c \u95e8\u5e97\u6bcf\u5929\u7684\u9500\u552e\u6d41\u6c34\u90fd\u5f88\u591a\uff0c\u65e5\u79ef\u6708\u7d2f\uff0c\u6d41\u6c34\u8868\u53d8\u5f97\u8d8a\u6765\u8d8a\u5927\u3002\u5982\u679c\u5c31\u8ba9\u5b83\u8fd9\u4e48\u4e0d\u65ad\u5730\u589e\u957f\uff0c\u6570\u636e\u91cf\u751a\u81f3\u4f1a\u8fbe\u5230\u6570\u4ebf\u6761\uff0c\u5360\u636e\u7684\u5b58\u50a8\u7a7a\u95f4\u8fbe\u5230\u51e0\u5341\u4e2a G\u3002\u867d\u7136 MySQL \u53ef\u4ee5\u5904\u7406\u8fd9\u6837\u6bd4\u8f83\u5927\u7684\u6570\u636e\u8868\uff0c\u4f46\u662f\u6bcf\u6b21\u64cd\u4f5c\u7684\u54cd\u5e94\u65f6\u95f4\u5c31\u4f1a\u5ef6\u957f\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u7684\u6574\u4f53\u6548\u7387\u4e0b\u964d\u3002\u53ef\u4ee5\u5f00\u53d1\u4e86\u4e00\u4e2a\u65e5\u7ed3\u5904\u7406\uff0c\u5f53\u5929\u7b97\u6e05\u6240\u6709\u8d26\u76ee\u3002 \u4e3e\u4e2a\u4f8b\u5b50, \u5728\u8d85\u5e02\u4fe1\u606f\u7cfb\u7edf\u7684 MySQL \u6570\u636e\u5e93\u4e2d, \u5386\u53f2\u6d41\u6c34\u8868\u8bbe\u8ba1\u4e0e\u6d41\u6c34\u8868\u975e\u5e38\u7c7b\u4f3c. \u4e0d\u540c\u7684\u662f, \u5386\u53f2\u6d41\u6c34\u8868\u589e\u52a0\u4e86\u4e00\u4e9b\u5b57\u6bb5\u6765\u6807\u8bc6\u5386\u53f2\u6d41\u6c34\u7684\u72b6\u6001, \u6bd4\u5982\u65e5\u7ed3\u65f6\u95f4\u5b57\u6bb5, \u662f\u7528\u6765\u8bb0\u5f55\u65e5\u7ed3\u64cd\u4f5c\u662f\u4ec0\u4e48\u65f6\u5019\u8fdb\u884c\u7684. INSERT INTO \u5386\u53f2\u6d41\u6c34\u8868\uff08\u65e5\u7ed3\u65f6\u95f4\u5b57\u6bb5 , \u5176\u4ed6\u5b57\u6bb5\uff09 SELECT \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u51fd\u6570\uff0c\u5176\u4ed6\u5b57\u6bb5 FROM \u6d41\u6c34\u8868 WHERE \u6761\u4ef6 \u4e0d\u8981\u968f\u4fbf\u4fee\u6539\u4e3b\u952e\u5b57\u6bb5\u7684\u503c ON DUPLICATE KEY UPDATE \u7684\u4f7f\u7528 \u5982\u679c\u6211\u4eec\u628a\u67e5\u8be2\u7684\u7ed3\u679c\u63d2\u5165\u5230\u8868\u4e2d\u65f6,\u5bfc\u81f4\u4e3b\u952e\u7ea6\u675f\u6216\u8005\u552f\u4e00\u6027\u7ea6\u675f\u88ab\u7834\u574f\u4e86,\u5c31\u53ef\u4ee5\u7528\u201cON DUPLICATE\u201d\u5173\u952e\u5b57\u8fdb\u884c\u5904\u7406. \u5b83\u544a\u8bc9 MySQL,\u5982\u679c\u9047\u5230\u91cd\u590d\u7684\u6570\u636e,\u8be5\u5982\u4f55\u5904\u7406\u3002 \u53c2\u8003\u94fe\u63a5: https://www.jianshu.com/p/6ecda3af29c9 /*\u5c06\u95e8\u5e97A\u548c\u95e8\u5e97B\u8fdb\u884c\u8fde\u9501 \u5047\u8bbe\u6211\u4eec\u8981\u628a\u95e8\u5e97B\u7684\u5546\u54c1\u6570\u636e,\u63d2\u5165\u5230\u95e8\u5e97A\u7684\u5546\u54c1\u8868\u4e2d\u53bb, \u5982\u679c\u6709\u91cd\u590d\u7684\u5546\u54c1\u7f16\u53f7itemnumber(\u662f\u4e3b\u952eid), \u5c31\u7528\u95e8\u5e97B\u7684\u6761\u7801barcode\u66ff\u6362\u95e8\u5e97A\u7684\u6761\u7801;\u7528\u95e8\u5e97B\u7684\u5546\u54c1\u540d\u79f0goodsname\u66ff\u6362\u95e8\u5e97A\u7684\u5546\u54c1\u540d\u79f0 \u5982\u679c\u6ca1\u6709\u91cd\u590d\u7684\u7f16\u53f7\uff0c \u5c31\u76f4\u63a5\u628a\u95e8\u5e97B\u7684\u5546\u54c1\u6570\u636e\u63d2\u5165\u5230\u95e8\u5e97A\u7684\u5546\u54c1\u8868\u4e2d */ INSERT INTO demo . goodsmaster SELECT * FROM demo . goodsmaster1 as a ON DUPLICATE KEY UPDATE barcode = a . barcode , goodsname = a . goodsname ; \u5220\u9664\u8bb0\u5f55\u540e\u518d\u63d2\u5165\u8bb0\u5f55,\u4f1a\u51fa\u73b0\u4e3b\u952e\u5b57\u6bb5\u503c\u4e0d\u8fde\u7eed\u7684\u60c5\u51b5.. \u89e3\u51b3\u529e\u6cd5: \u53ef\u4ee5\u901a\u8fc7\u663e\u5f0f\u6307\u5b9a\u4e3b\u952e\u503c\u7684\u529e\u6cd5\u63d2\u5165\u6570\u636e\uff0c\u800c\u4e0d\u662f\u7701\u7565\u4e3b\u952e\u503c\u8ba9\u5b83\u81ea\u589e","title":"04 \u64cd\u4f5c\u8868\u8bb0\u5f55"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#05","text":"\u601d\u8def\u4e00: \u4e1a\u52a1\u5b57\u6bb5\u505a\u4e3b\u952e \u601d\u8def\u4e8c: \u4f7f\u7528\u81ea\u589e\u5b57\u6bb5\u505a\u4e3b\u952e \u601d\u8def\u4e09: \u624b\u52a8\u8d4b\u503c\u5b57\u6bb5\u505a\u4e3b\u952e (\u00b4\u25bd\uff40) \u8be6\u89c105.md","title":"05 \u5982\u4f55\u6b63\u786e\u8bbe\u7f6e\u4e3b\u952e"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#06","text":"\u5916\u952e\u5c31\u662f \u4ece\u8868 \u4e2d\u7528\u6765\u5f15\u7528 \u4e3b\u8868 \u4e2d\u6570\u636e\u7684\u90a3\u4e2a\u516c\u5171\u5b57\u6bb5 MySQL \u7cfb\u7edf\u4f1a\u6839\u636e\u5916\u952e\u7ea6\u675f\u7684\u5b9a\u4e49, \u76d1\u63a7\u5bf9\u4e3b\u8868\u4e2d\u6570\u636e\u7684\u5220\u9664\u64cd\u4f5c\u3002\u5982\u679c\u53d1\u73b0\u8981\u5220\u9664\u7684\u4e3b\u8868\u8bb0\u5f55, \u6b63\u5728\u88ab\u4ece\u8868\u4e2d\u67d0\u6761\u8bb0\u5f55\u7684\u5916\u952e\u5b57\u6bb5\u6240\u5f15\u7528, MySQL \u5c31\u4f1a\u63d0\u793a\u9519\u8bef, \u4ece\u800c\u786e\u4fdd\u4e86\u5173\u8054\u6570\u636e\u4e0d\u4f1a\u7f3a\u5931. (\u5b9e\u5219\u4e0a\u5c31\u662f\u4fdd\u8bc1\u5916\u952e\u5b57\u6bb5\u503c \u662f\u5916\u952e\u5173\u8054\u7684\u53e6\u4e00\u5f20\u8868\u7684\u5b57\u6bb5 \u6240\u62e5\u6709\u7684\u503c) \u53ef\u4ee5\u901a\u8fc7 SQL \u8bed\u53e5\u6765\u67e5\u770b\u5916\u952e\u7ea6\u675f\u7684\u76f8\u5173\u4fe1\u606f, \u8fd9\u91cc\u9700\u8981\u7528\u5230 MySQL \u81ea\u5e26\u7684\u3001\u7528\u4e8e\u5b58\u50a8\u7cfb\u7edf\u4fe1\u606f\u7684\u6570\u636e\u5e93\uff1ainformation_schema\u3002 mysql > SELECT -> constraint_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u540d\u79f0 -> table_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u6240\u5c5e\u6570\u636e\u8868\u7684\u540d\u79f0 -> column_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u7684\u5b57\u6bb5\u540d\u79f0 -> referenced_table_name , -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u6240\u53c2\u7167\u7684\u6570\u636e\u8868\u540d\u79f0 -> referenced_column_name -- \u8868\u793a\u5916\u952e\u7ea6\u675f\u6240\u53c2\u7167\u7684\u5b57\u6bb5\u540d\u79f0 -> FROM -> information_schema . KEY_COLUMN_USAGE -> WHERE -- \u53ef\u4ee5\u901a\u8fc7show create table table_name;\u8bed\u53e5\u67e5\u770b\u5916\u952e\u7ea6\u675f\u540d\u79f0 -> constraint_name = 'fk_importdetails_importhead' ; -- \u5916\u952e\u7ea6\u675f\u540d\u79f0 \u53ef\u4ee5\u4e0d\u7528\u5916\u952e\u7ea6\u675f,\u4f46\u8981\u60f3\u529e\u6cd5 \u901a\u8fc7\u5e94\u7528\u5c42\u9762\u7684\u9644\u52a0\u903b\u8f91 ,\u6765\u5b9e\u73b0\u5916\u952e\u7ea6\u675f\u7684\u529f\u80fd,\u786e\u4fdd\u6570\u636e\u7684\u4e00\u81f4\u6027!!!! (\u5927\u5e76\u53d1\u7684\u573a\u666f,\u5916\u952e\u7ea6\u675f\u5e26\u6765\u7684\u8d44\u6e90\u6d88\u8017\u4f1a\u8ba9\u7cfb\u7edf\u5403\u4e0d\u6d88.)","title":"06 \u505a\u5173\u8054\u67e5\u8be2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#07-wherehaving","text":"mysql\u4f18\u5316\u5668\u5728\u5236\u5b9a\u67e5\u8be2\u8ba1\u5212\u7684\u65f6\u5019, \u4f1a\u5bf9\u67e5\u8be2\u8fdb\u884c\u4f18\u5316, \u6bd4\u5982\u91cd\u5199\u67e5\u8be2\u8bed\u53e5, \u76ee\u7684\u662f\u63d0\u9ad8\u67e5\u8be2\u7684\u901f\u5ea6\u6548\u7387, \u4e0d\u4f1a\u673a\u68b0\u6309\u7167\u56fa\u5b9a\u7684\u987a\u5e8f\u6267\u884c \u6240\u4ee5sql\u4f18\u5316\u5668\u53ef\u80fd\u4f1a\u5bfc\u81f4 \u771f\u5b9e\u60c5\u51b5\u662f\u5148where\u7f29\u5c0f\u8303\u56f4\u518dinner join\u8fde\u8868 ```sql select ... from a inner join b on ... inner join c on ... GROUP BY a.transdate , operatorname -- \u6309\u7167\u65e5\u671f\u3001\u6536\u94f6\u5458\u5206\u7ec4 HAVING a.transdate IN ('2020-12-10' , '2020-12-11') AND SUM(b.salesvalue) > 100; -- \u53ef\u4ee5\u5c06\u65f6\u95f4\u7684\u7b5b\u9009\u7528where\u8bed\u53e5\u5b9e\u73b0 select .... WHERE a.transdate in ('2020-12-12','2020-12-11') -- \u5148\u6309\u65e5\u671f\u7b5b\u9009 GROUP BY a.transdate , operatorname HAVING SUM(b.salesvalue)>100; -- \u540e\u6309\u91d1\u989d\u7b5b\u9009 ```","title":"07 where\u4e0ehaving"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#08","text":"count(*) | count(1) : \u7edf\u8ba1\u4e00\u5171\u6709\u591a\u5c11\u6761\u8bb0\u5f55; count(\u5b57\u6bb5): \u7edf\u8ba1\u6709\u591a\u5c11\u4e2a\u4e0d\u4e3a\u7a7a\u7684\u5b57\u6bb5\u503c \u82e5\u5b57\u6bb5\u662f\u4e3b\u952e count(\u5b57\u6bb5\u6700\u5feb) ; count(1) \u6bd4count(*) \u7a0d\u5fae\u9ad8\u6548\u4e00\u70b9.. LEFT(str, n): \u8868\u793a\u8fd4\u56de\u5b57\u7b26\u4e32 str \u6700\u5de6\u8fb9\u7684 n \u4e2a\u5b57\u7b26 \u642d\u914d\u4f7f\u7528 --- GROUP BY LEFT(a.transdate,10) ORDER BY LEFT(a.transdate,10) \u8981\u77e5\u9053LEFT(transdate,10)\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u9500\u552e\u65f6\u95f4\u6309\u7167\u683c\u5f0fYYYY-MM-DD\u7684\u503c, \u662f\u6309\u7167\u8fd9\u4e2a\u503c\u8fdb\u884c\u7684\u5206\u7ec4","title":"08 \u805a\u5408\u51fd\u6570"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#09","text":"\u901a\u7528\u67e5\u8be2\u65e5\u5fd7 \u901a\u7528\u67e5\u8be2\u65e5\u5fd7\u8bb0\u5f55\u4e86\u6240\u6709\u7528\u6237\u7684\u8fde\u63a5\u5f00\u59cb\u65f6\u95f4\u548c\u622a\u6b62\u65f6\u95f4 \u4ee5\u53ca\u53d1\u7ed9 MySQL \u6570\u636e\u5e93\u670d\u52a1\u5668\u7684\u6240\u6709 SQL \u6307\u4ee4\u3002 \u6162\u67e5\u8be2\u65e5\u5fd7 \u6162\u67e5\u8be2\u65e5\u5fd7\u7528\u6765\u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u6307\u5b9a\u65f6\u957f\u7684\u67e5\u8be2 \u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u662f\uff0c\u5e2e\u52a9\u6211\u4eec\u53d1\u73b0\u90a3\u4e9b\u6267\u884c\u65f6\u95f4\u7279\u522b\u957f\u7684 SQL \u67e5\u8be2, \u5e76\u4e14\u6709\u9488\u5bf9\u6027\u5730\u8fdb\u884c\u4f18\u5316, \u4ece\u800c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6574\u4f53\u6548\u7387. \u9519\u8bef\u65e5\u5fd7 \u9519\u8bef\u65e5\u5fd7\u8bb0\u5f55\u4e86 MySQL \u670d\u52a1\u5668\u542f\u52a8\u3001\u505c\u6b62\u8fd0\u884c\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u7cfb\u7edf\u542f\u52a8\u3001\u8fd0\u884c\u548c\u505c\u6b62\u8fc7\u7a0b\u4e2d\u7684\u8bca\u65ad\u4fe1\u606f, \u5305\u62ec\u9519\u8bef\u3001\u8b66\u544a\u548c\u63d0\u793a\u7b49. \u9519\u8bef\u65e5\u5fd7\u9ed8\u8ba4\u662f\u5f00\u542f\u7684. \u4e8c\u8fdb\u5236\u65e5\u5fd7 \u4e3b\u8981\u7528\u4e8e\u4e3b\u4ece\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65, \u4ee5\u53ca\u670d\u52a1\u5668\u9047\u5230\u6545\u969c\u65f6\u6570\u636e\u7684\u65e0\u635f\u5931\u6062\u590d \u4e2d\u7ee7\u65e5\u5fd7 \u5c31\u662f\u4e3b\u4ece\u670d\u52a1\u5668\u67b6\u6784\u4e2d, \u4ece\u670d\u52a1\u5668\u7528\u6765\u5b58\u653e\u4e3b\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u65e5\u5fd7\u5185\u5bb9\u7684\u4e00\u4e2a\u4e2d\u95f4\u6587\u4ef6. \u4ece\u670d\u52a1\u5668\u901a\u8fc7\u8bfb\u53d6\u4e2d\u7ee7\u65e5\u5fd7\u7684\u5185\u5bb9, \u6765\u540c\u6b65\u4e3b\u670d\u52a1\u5668\u4e0a\u7684\u64cd\u4f5c. \u56de\u6eda\u65e5\u5fd7 \u7528\u6765\u5b58\u50a8\u4e8b\u52a1\u4e2d\u6570\u636e\u66f4\u65b0\u524d\u7684\u72b6\u6001, \u4ee5\u4fbf\u56de\u6eda\u548c\u4fdd\u6301\u5176\u4ed6\u4e8b\u52a1\u7684\u6570\u636e\u4e00\u81f4\u6027. \u6709\u4e86\u5b83, \u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u7684\u5168\u91cf\u5907\u4efd\u548c\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e2d\u4fdd\u5b58\u7684\u589e\u91cf\u4fe1\u606f, \u5b8c\u6210\u6570\u636e\u5e93\u7684\u65e0\u635f\u5931\u6062\u590d. \u91cd\u505a\u65e5\u5fd7 \u662f\u4e3a\u4e86\u786e\u4fdd\u6570\u503c\u6301\u4e45\u6027\u3001\u9632\u6b62\u6570\u636e\u66f4\u65b0\u4e22\u5931\u7684\u4e00\u79cd\u65e5\u5fd7.","title":"09 \u65e5\u5fd7"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/01_to_11/#10","text":"\u6570\u636e\u5907\u4efd\u7684\u5de5\u5177 mysqldump, \u4ee5\u53ca\u7528\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u5de5\u5177\u201cmysql\u201d\u548c SQL \u8bed\u53e5\u201cSOURCE\u201d\u8fdb\u884c\u6570\u636e\u6062\u590d\u7684\u65b9\u6cd5.\u7528\u4e8e\u5bfc\u51fa\u6570\u636e\u8868\u4e2d\u6570\u636e\u7684\u8bed\u53e5\u201cSELECT \u2026 INTO OUTFILE\u201d\u548c\u5bfc\u5165\u7684\u8bed\u53e5\u201cLOAD DATA\u201d\u3002\u8fd9\u4e9b\u90fd\u662f\u5728\u5907\u4efd\u6570\u636e\u65f6\u5fc5\u4e0d\u53ef\u5c11\u7684, \u5bf9\u786e\u4fdd\u6570\u636e\u7684\u5b89\u5168\u6027\u81f3\u5173\u91cd\u8981\u3002 \u201cLOAD DATA\u201d\u662f\u5f88\u597d\u7528\u7684\u5de5\u5177, \u56e0\u4e3a\u5b83\u7684\u6570\u636e\u5bfc\u5165\u901f\u5ea6\u662f\u975e\u5e38\u60ca\u4eba\u7684. \u4e00\u4e2a 400 \u4e07\u6761\u6570\u636e\u7684\u6587\u4ef6, \u7528\u201cLOAD DATA\u201d\u8bed\u53e5, \u53ea\u9700\u8981\u51e0\u5206\u949f\u5c31\u53ef\u4ee5\u5b8c\u6210, \u800c\u5176\u4ed6\u7684\u65b9\u6cd5, \u6bd4\u5982\u4f7f\u7528 Workbench \u6765\u5bfc\u5165\u6570\u636e, \u5c31\u9700\u8981\u82b1\u8d39\u597d\u51e0\u4e2a\u5c0f\u65f6. Ps: \u8bbe\u8ba1\u8868, \u4e1a\u52a1\u4f18\u5148, \u4e09\u5927\u8303\u5f0f\u7b49.(\u00b4\u25bd\uff40)","title":"10 \u6570\u636e\u7684\u5907\u4efd"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/05/","text":"\u5982\u4f55\u6b63\u786e\u7684\u4f7f\u7528\u4e3b\u952e\uff1f \u00b6 \u5728\u8d85\u5e02\u9879\u76ee\u4e2d,\u9700\u8981\u5bf9\u5ba2\u6237\u8fdb\u884c\u4f1a\u5458\u8425\u9500,\u6709\u4e00\u5f20\u4f1a\u5458\u4fe1\u606f\u8868 demo.membermaster \u5982\u4f55\u5408\u7406\u7684\u5bf9\u6b64\u8868\u8bbe\u7f6e\u4e3b\u952e\uff1f\u552f\u4e00\u8868\u793a\u4e00\u4e2a\u4f1a\u5458\u4fe1\u606f. \u8868\u7684\u521d\u6b65\u8bbe\u8ba1\u5927\u4f53\u5982\u4e0b: \u601d\u8def\u4e00: \u4e1a\u52a1\u5b57\u6bb5\u505a\u4e3b\u952e \u5efa\u8bae\u4e0d\u8981\u7528\u8ddf\u4e1a\u52a1\u6709\u5173\u7684\u5b57\u6bb5\u505a\u4e3b\u952e. \u56e0\u4e3a\u4e0d\u6653\u5f97\u672a\u6765\u4e1a\u52a1\u9700\u6c42\u4f1a\u4e0d\u4f1a\u5bfc\u81f4\u5b57\u6bb5\u503c\u91cd\u590d\u6216\u91cd\u7528\u7684\u60c5\u51b5. \u5206\u6790\u8868\u5b57\u6bb5, \u4e0d\u96be\u5224\u65ad\u51facardno\u5361\u53f7\u6bd4\u8f83\u9002\u5408. PRI. create table demo . membermaster ( -- cardno\u8fd9\u91cc\u7528char(8)\u6709\u5f85\u5546\u69b7 int4\u4e2a\u5b57\u8282 char(8)\u56e0\u4e3a\u90fd\u662f\u6570\u5b57,\u6240\u4ee58\u4e2a\u5b57\u8282 cardno char ( 8 ) primary key , -- \u4f1a\u5458\u5361\u53f7\u4e3a\u4e3b\u952e .... -- \u7535\u8bdd\u548c\u8eab\u4efd\u8bc1\u53f7\u7801 \u5e94\u8be5\u4fdd\u7559\u9ed8\u8ba4\u8bbe\u7f6e\u5141\u8bb8\u4e3a\u7a7a \u56e0\u4e3a\u8fd9\u662f\u4e2a\u4eba\u9690\u79c1 -- \u7535\u8bdd\u548c\u8eab\u4efd\u8bc1\u53f7\u7801\u9690\u79c1\u662f\u4e00\u65b9\u9762 -- \u53e6\u5916\u82e5\u5c06\u5176\u4f5c\u4e3a\u4e3b\u952e,\u9700\u8981\u66f4\u6539\u65f6,\u6240\u5173\u8054\u7684\u5916\u952e\u4fe1\u606f\u4e5f\u4f1a\u540c\u6b65\u66f4\u6539.. -- \u8fd8\u4e0d\u7528\u63d0 \u4e0eid\u505a\u4e3b\u952e\u76f8\u6bd4 \u6811\u7684\u9ad8\u5ea6\u95ee\u9898 /* \u624b\u673a\u53f7\u7801\u770b\u8d77\u6765\u50cf\u662f\u6570\u5b57,\u672c\u8d28\u662f\u5b57\u7b26\u4e32! char(11) 11\u5b57\u8282 ; bigint 8\u5b57\u8282 ; varchar(11) 12\u4e2a\u5b57\u8282. memberphone char(11), why? \u624b\u673a\u53f7\u4e00\u822c\u90fd\u8981\u52a0\u7d22\u5f15 \u7528bigint like\u6a21\u7cca\u67e5\u8be2\u5c31\u5931\u6548\u4e86,\u4e0d\u80fd\u7528\u5f00\u5934\u6216\u5c3e\u53f7\u67e5\u8be2.. bigint\u5728\u4e00\u4e9b32\u4f4d\u5e94\u7528\u4e2d\u53ef\u80fd\u4f1a\u6709\u6ea2\u51fa\u95ee\u9898 \u5f88\u9ebb\u70e6. int\u4e5f\u8868\u793a\u4e0d\u4e8611\u4f4d.. memberpid char(18), */ memberphone TEXT , memberpid TEXT , sex enum ( '\u7537' , '\u5973' ), ... -- \u9664\u4e86\u4e3b\u952e\u5b57\u6bb5\u5176\u4f59\u8bbe\u7f6e\u4e3a\u7a7a \u662f\u56e0\u4e3a\u5f53\u65f6\u4e0d\u77e5\u9053,\u53ef\u4ee5\u7a0d\u540e\u8865\u9f50.. \u770b\u5177\u4f53\u7684\u4e1a\u52a1\u573a\u666f. ) \u6709\u4ec0\u4e48\u95ee\u9898\u5417\uff1f\u8fd9\u6837\u4e00\u4e2a\u573a\u666f,\u5f20\u4e09\u56e0\u4e3a\u642c\u5bb6\u4e0d\u4f1a\u5728\u6b64\u95e8\u5e97\u6d88\u8d39\u5566,\u9000\u51fa\u4f1a\u5458. \u5e97\u5bb6\u4fee\u6539\u5361\u53f710000001\u7684\u4fe1\u606f\u7ed9\u738b\u4e94. update demo . membermaster set membername = '\u738b\u4e94' , memberphone = ...., .... where cardno = '10000001' ; \u7cfb\u7edf\u4e0d\u4f1a\u51fa\u9519,\u4f46\u4e1a\u52a1\u5c42\u9762\u4f1a\u6709\u95ee\u9898. \u56e0\u4e3a\u6709\u5f20\u9500\u552e\u6d41\u6c34\u8868,demo.trans. \u4fee\u6539\u5361\u53f7\u4fe1\u606f\u7ed9\u738b\u4e94\u540e,\u67e5\u770b\u5361\u53f710000001\u7684\u6d88\u8d39\u6d41\u6c34 \u91cc\u9762\u8bb0\u5f55\u662f\u5f20\u4e09\u7684..\u4e0d\u662f\u738b\u4e94\u7684. \u5f20\u4e09\u7684\u6d88\u8d39\u884c\u4e3a\u653e\u5230\u738b\u4e94\u8eab\u4e0a\u53bb\u4e86,\u80af\u5b9a\u662f\u4e0d\u5bf9\u7684 \u6ce8\u610f: demo.trans\u8868\u6709\u4e24\u4e2a\u53ef\u4ee5\u8bbe\u7f6e\u5916\u952e\u7684\u5b57\u6bb5itemnumber,cardno \u5bf9\u5e94\u5546\u54c1\u4fe1\u606f\u8868goodsmaster\u548c\u4f1a\u5458\u4fe1\u606f\u8868membermaster \u601d\u8def\u4e8c: \u4f7f\u7528\u81ea\u589e\u5b57\u6bb5\u505a\u4e3b\u952e \u5355\u8868\u5355\u5e93\u7684\u65f6\u5019\u7528\u81ea\u589e\u5b57\u6bb5\u505a\u4e3b\u952e\u6ca1\u6709\u95ee\u9898\uff01\uff01\u5206\u5e93\u5206\u8868\u7684\u8bdd\u81ea\u589e\u5b57\u6bb5\u5c31\u6ca1\u529e\u6cd5\u4fdd\u8bc1\u5168\u5c40\u552f\u4e00\u4e86\uff01 -- \u5220\u9664\u8868 \u5361\u53f7\u7684\u4e3b\u952e\u7ea6\u675f ALTER TABLE demo . membermaster DROP PRIMARY KEY ; -- \u7ed9\u4f1a\u5458\u4fe1\u606f\u8868\u6dfb\u52a0id\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e \u5e76\u81ea\u589e ALTER TABLE demo . membermaster ADD id INT PRIMARY KEY AUTO_INCREMENT ; -- \u4fee\u6539\u9500\u552e\u6d41\u6c34\u8868\uff0c\u6dfb\u52a0\u65b0\u7684\u5b57\u6bb5 memberid\uff0c\u5bf9\u5e94\u4f1a\u5458\u4fe1\u606f\u8868\u4e2d\u7684\u4e3b\u952e ALTER TABLE demo . trans ADD memberid INT ; -- \u66f4\u65b0\u4e0b\u9500\u552e\u6d41\u6c34\u8868 memberid\u5f00\u59cb\u7684\u65f6\u5019\u4e3anull UPDATE demo . trans AS a , demo . membermaster AS b -- \u4e24\u5f20\u8868\u7684\u6709\u5173\u7cfb\u7684\u66f4\u65b0\uff01\uff01 SET a . memberid = b . id WHERE a . cardno = b . cardno ; -- \uff01\uff01\uff01 \u8fd9\u6837\u7684\u8bdd, \u56de\u5230\u4fee\u6539\u4f1a\u5458\u536110000001\u4e3a\u738b\u4e94\u4e4b\u524d\u7684\u72b6\u6001, \u56e0\u4e3acardno\u4e0d\u662f\u4e3b\u952e, \u6211\u4eec\u5c31\u53ef\u4ee5\u65b0\u589e\u4e00\u6761\u5361\u53f7\u4e3a10000001\u7684\u738b\u4e94\u7684\u4fe1\u606f.\u54ea\u6015\u5361\u53f7\u91cd\u590d\u4e86\u4e5f\u65e0\u6240\u8c13... \u67e5\u770b\u6d88\u8d39\u8bb0\u5f55\u5c31\u4e0d\u4f1a\u51fa\u53c9\u4e86... \u7528\u6dfb\u52a0\u81ea\u589e\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\u7684\u529e\u6cd5\u662f\u53ef\u4ee5\u7684\u3002 \u4f46\u5e76\u4e0d\u610f\u5473\u7740\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u8fd9\u4e48\u505a \u3002 \u6709\u8fd9\u6837\u4e00\u4e2a\u5e94\u7528\u573a\u666f\uff1a\u5ba2\u6237\u4e00\u822c\u90fd\u662f\u5728\u95e8\u5e97\u4e70\u4e1c\u897f\u7684\u65f6\u5019\u8fdb\u884c\u4f1a\u5458\u7684\u529e\u7406\u7684. \u95e8\u5e97\u4f1a\u901a\u8fc7\u7cfb\u7edf<\u6dfb\u52a0\u65b0\u589e\u4f1a\u5458\u7684\u529f\u80fd>\u628a\u65b0\u7684\u4f1a\u5458\u4fe1\u606f\u5148\u5b58\u653e\u5230\u672c\u5730 MySQL \u6570\u636e\u5e93\u4e2d,\u518d\u4e0a\u4f20\u5230\u603b\u90e8,\u8fdb\u884c\u6c47\u603b\u3002 \u95ee\u9898\u6765\u4e86,\u5982\u679c\u4f1a\u5458\u4fe1\u606f\u8868\u7684\u4e3b\u952e\u662f\u81ea\u589e\u7684,\u90a3\u4e48\u5404\u4e2a\u95e8\u5e97\u65b0\u52a0\u7684\u4f1a\u5458\u5c31\u4f1a\u51fa\u73b0\u201cid\u201d\u51b2\u7a81\u7684\u53ef\u80fd\u3002 \u601d\u8def\u4e09:\u624b\u52a8\u8d4b\u503c\u5b57\u6bb5\u505a\u4e3b\u952e \u901a\u8fc7\u4e00\u5b9a\u7684\u903b\u8f91\uff0c\u786e\u4fdd\u5b57\u6bb5\u503c\u5728\u5168\u7cfb\u7edf\u7684\u552f\u4e00\u6027. \u89c4\u907f\u4e3b\u952e\u91cd\u590d\u7684\u95ee\u9898 \u53d6\u6d88\u5b57\u6bb5id\u7684\u81ea\u589e\u5c5e\u6027, \u603b\u90e8\u7ef4\u62a4\u4e00\u4e2a\u5f53\u524d\u4f1a\u5458\u7f16\u53f7\u7684\u6700\u5927\u503c\u3002\u95e8\u5e97\u5728\u6dfb\u52a0\u4f1a\u5458\u7684\u65f6\u5019, \u5148\u5230\u603b\u90e8 MySQL \u6570\u636e\u5e93\u4e2d\u83b7\u53d6\u8fd9\u4e2a\u6700\u5927\u503c, \u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\u52a0 1, \u7136\u540e\u7528\u8fd9\u4e2a\u503c\u4f5c\u4e3a\u65b0\u4f1a\u5458\u7684\u201cid\u201d, \u540c\u65f6, \u66f4\u65b0\u603b\u90e8 MySQL \u6570\u636e\u5e93\u7ba1\u7406\u4fe1\u606f\u8868\u4e2d\u7684\u5f53\u524d\u4f1a\u5458\u7f16\u53f7\u7684\u6700\u5927\u503c\u3002 1> Q: \u4f1a\u5458\u7f16\u53f7id\u91cd\u590d\u7684\u95ee\u9898,\u80fd\u5426\u7528\u95e8\u5e97\u53f7+id\u6765\u89e3\u51b3.. A: \u4e0d\u5efa\u8bae\u901a\u8fc7\u7ed9id\u589e\u52a0\u4e0e\u4e1a\u52a1\u6709\u5173\u7684\u4fe1\u606f\u89e3\u51b3\u95ee\u9898, \u95e8\u5e97\u7f16\u53f7\u4e5f\u6709\u53ef\u80fd\u91cd\u590d\u6216\u91cd\u7528... 2> ID\u4e3b\u952e\u53ef\u4ee5\u8003\u8651\u4f7f\u7528varchar\u7c7b\u578b,\u4f7f\u7528UUID \u6216\u8005\u96ea\u82b1ID \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32\u505a\u4e3b\u952e \u4e0e\u96ea\u82b1 Snowflake\u76f8\u6bd4UUID\u505a\u4e3b\u952e 1 - UUID 32 \u4f4d Snowflake 64 \u4f4d 2 - \u4e0d\u5177\u5907\u5355\u8c03\u9012\u589e\u6027 . \u6bd4\u5982\u8bc4\u8bba\u8868 \u82e5\u9700\u8981\u6392\u5e8f \u8fd8\u9700\u8981\u989d\u5916\u6dfb\u52a0\u4e00\u4e2a\u65f6\u95f4\u5e8f\u5217\u5b57\u6bb5 3 - \u4e0d\u5177\u5907\u4e1a\u52a1\u542b\u4e49 4 - \u662f\u65e0\u5e8f\u7684 . \u6709\u5e8f ID\u53ef\u4ee5\u63d0\u9ad8\u6570\u636e\u5199\u5165\u6027\u80fd B + \u6811 \u82e5\u4e3b\u952e\u662f\u6709\u5e8f\u7684 , \u8ffd\u52a0\u5230\u6700\u540e\u9762\u5c31\u884c \u65e0\u5e8f\u7684\u8bdd \u8fd8\u8981\u627e\u5230\u4f4d\u7f6e\u540e\u518d\u63d2\u5165\u8fdb\u53bb \u53c2\u8003\u94fe\u63a5 : https : // cloud . tencent . com / developer / article / 1766264 3> \u591a\u4e2a\u95e8\u5e97\u540c\u65f6\u6dfb\u52a0\u4f1a\u5458\u4fe1\u606f\u8bdd,\u9700\u8981\u7528\u5230\u4e8b\u52a1,\u9632\u6b62\u522b\u7684\u8fde\u63a5\u8bfb\u53d6\u5230\u9519\u8bef\u7684\u4fe1\u606f 4> \u603b\u90e8\u8981\u5bf9max_id\u505a\u6743\u9650\u63a7\u5236,\u9632\u6b62\u6076\u610f\u4fee\u6539. \u4e5f\u4f1a\u6d89\u53ca\u5230\u52a0\u9501\u7b49\u95ee\u9898. 5> \u4e3a\u5565\u80fd\u8054\u7f51,\u95e8\u5e97\u8fd8\u8981\u5c06\u4f1a\u5458\u4fe1\u606f\u5b58\u5728\u672c\u5730. \u5e97\u5bb6\u662f\u8054\u7f51\u4e86\u7684\uff01\uff01 \u4e0d\u80fd\u56e0\u4e3a\u7f51\u7edc\u4e0d\u7a33\u5b9a\u5bfc\u81f4\u6bcf\u6b21\u6dfb\u52a0\u4f1a\u5458\u4e0d\u6210\u800c\u5f71\u54cd\u9500\u552e. \u5c06max_id\u653e\u5728\u4e00\u5f20\u5355\u72ec\u7684\u914d\u7f6e\u4fe1\u606f\u8868 \u91cc\u9762\u53ea\u6709\u8fd9\u4e48\u4e00\u4e2a\u5b57\u6bb5 \u5c31\u662f\u4e3a\u4e86\u67e5\u8be2\u66f4\u5feb\uff01\u6c47\u603b\u53ef\u4ee5\u5f80\u540e\u518d\u6c47\u603b. \u5982\u679cmax_id\u4e0d\u5355\u72ec\u4e00\u5f20\u8868\u7684\u8bdd \u6bcf\u6b21\u67e5\u603b\u90e8\u7684\u4f1a\u5458\u8868\u7684\u6700\u5927id\u53ef\u80fd\u662f\u6ca1\u53ca\u65f6\u6c47\u603b\u7684id 6> \u6dfb\u52a0\u4f1a\u5458\u64cd\u4f5c\u7684\u9891\u7387\u8fd8\u662f\u6bd4\u8f83\u4f4e\u7684,\u51fa\u73b0\u963b\u585e\u7684\u98ce\u9669\u4e0d\u5927. \u9898\u5916\u8bdd: \u82e5\u6709\u8fd9\u6837\u4e00\u4e2a\u9700\u6c42,\u5c06\u9500\u552e\u6d41\u6c34\u8868 demo.trans \u4e2d,\u6240\u6709\u5355\u4f4d\u662f\u201c\u5305\u201d\u7684\u5546\u54c1\u7684\u4ef7\u683c\u6539\u6210\u539f\u6765\u4ef7\u683c\u7684 80%,\u8be5\u600e\u4e48\u5b9e\u73b0\u5462\uff1f UPDATE demo . trans AS a , demo . goodsmaster AS b SET price = price * 0 . 8 WHERE a . itemnumber = b . itemnumber AND b . unit = '\u5305' /* \u5176\u5b9e \u76f8\u5f53\u4e8e\u505a\u4e86\u4e2a\u5185\u8fde\u63a5 \u53ea\u4e0d\u8fc7\u4e0d\u662fselect\u8bed\u53e5 \u662fupdate\u8bed\u53e5.. where\u6761\u4ef6\u4e5f\u53ef\u4ee5\u5b9e\u73b0inner join\u7684\u6548\u679c\u7684. select * from employee,department where employee.dep_id = department.id; \u7b49\u540c\u4e8e select * from employee inner join department on employee.dep_id = department.id; */","title":"other2"},{"location":"5_db/0_%E5%9F%BA%E7%A1%80/other/05/#_1","text":"\u5728\u8d85\u5e02\u9879\u76ee\u4e2d,\u9700\u8981\u5bf9\u5ba2\u6237\u8fdb\u884c\u4f1a\u5458\u8425\u9500,\u6709\u4e00\u5f20\u4f1a\u5458\u4fe1\u606f\u8868 demo.membermaster \u5982\u4f55\u5408\u7406\u7684\u5bf9\u6b64\u8868\u8bbe\u7f6e\u4e3b\u952e\uff1f\u552f\u4e00\u8868\u793a\u4e00\u4e2a\u4f1a\u5458\u4fe1\u606f. \u8868\u7684\u521d\u6b65\u8bbe\u8ba1\u5927\u4f53\u5982\u4e0b: \u601d\u8def\u4e00: \u4e1a\u52a1\u5b57\u6bb5\u505a\u4e3b\u952e \u5efa\u8bae\u4e0d\u8981\u7528\u8ddf\u4e1a\u52a1\u6709\u5173\u7684\u5b57\u6bb5\u505a\u4e3b\u952e. \u56e0\u4e3a\u4e0d\u6653\u5f97\u672a\u6765\u4e1a\u52a1\u9700\u6c42\u4f1a\u4e0d\u4f1a\u5bfc\u81f4\u5b57\u6bb5\u503c\u91cd\u590d\u6216\u91cd\u7528\u7684\u60c5\u51b5. \u5206\u6790\u8868\u5b57\u6bb5, \u4e0d\u96be\u5224\u65ad\u51facardno\u5361\u53f7\u6bd4\u8f83\u9002\u5408. PRI. create table demo . membermaster ( -- cardno\u8fd9\u91cc\u7528char(8)\u6709\u5f85\u5546\u69b7 int4\u4e2a\u5b57\u8282 char(8)\u56e0\u4e3a\u90fd\u662f\u6570\u5b57,\u6240\u4ee58\u4e2a\u5b57\u8282 cardno char ( 8 ) primary key , -- \u4f1a\u5458\u5361\u53f7\u4e3a\u4e3b\u952e .... -- \u7535\u8bdd\u548c\u8eab\u4efd\u8bc1\u53f7\u7801 \u5e94\u8be5\u4fdd\u7559\u9ed8\u8ba4\u8bbe\u7f6e\u5141\u8bb8\u4e3a\u7a7a \u56e0\u4e3a\u8fd9\u662f\u4e2a\u4eba\u9690\u79c1 -- \u7535\u8bdd\u548c\u8eab\u4efd\u8bc1\u53f7\u7801\u9690\u79c1\u662f\u4e00\u65b9\u9762 -- \u53e6\u5916\u82e5\u5c06\u5176\u4f5c\u4e3a\u4e3b\u952e,\u9700\u8981\u66f4\u6539\u65f6,\u6240\u5173\u8054\u7684\u5916\u952e\u4fe1\u606f\u4e5f\u4f1a\u540c\u6b65\u66f4\u6539.. -- \u8fd8\u4e0d\u7528\u63d0 \u4e0eid\u505a\u4e3b\u952e\u76f8\u6bd4 \u6811\u7684\u9ad8\u5ea6\u95ee\u9898 /* \u624b\u673a\u53f7\u7801\u770b\u8d77\u6765\u50cf\u662f\u6570\u5b57,\u672c\u8d28\u662f\u5b57\u7b26\u4e32! char(11) 11\u5b57\u8282 ; bigint 8\u5b57\u8282 ; varchar(11) 12\u4e2a\u5b57\u8282. memberphone char(11), why? \u624b\u673a\u53f7\u4e00\u822c\u90fd\u8981\u52a0\u7d22\u5f15 \u7528bigint like\u6a21\u7cca\u67e5\u8be2\u5c31\u5931\u6548\u4e86,\u4e0d\u80fd\u7528\u5f00\u5934\u6216\u5c3e\u53f7\u67e5\u8be2.. bigint\u5728\u4e00\u4e9b32\u4f4d\u5e94\u7528\u4e2d\u53ef\u80fd\u4f1a\u6709\u6ea2\u51fa\u95ee\u9898 \u5f88\u9ebb\u70e6. int\u4e5f\u8868\u793a\u4e0d\u4e8611\u4f4d.. memberpid char(18), */ memberphone TEXT , memberpid TEXT , sex enum ( '\u7537' , '\u5973' ), ... -- \u9664\u4e86\u4e3b\u952e\u5b57\u6bb5\u5176\u4f59\u8bbe\u7f6e\u4e3a\u7a7a \u662f\u56e0\u4e3a\u5f53\u65f6\u4e0d\u77e5\u9053,\u53ef\u4ee5\u7a0d\u540e\u8865\u9f50.. \u770b\u5177\u4f53\u7684\u4e1a\u52a1\u573a\u666f. ) \u6709\u4ec0\u4e48\u95ee\u9898\u5417\uff1f\u8fd9\u6837\u4e00\u4e2a\u573a\u666f,\u5f20\u4e09\u56e0\u4e3a\u642c\u5bb6\u4e0d\u4f1a\u5728\u6b64\u95e8\u5e97\u6d88\u8d39\u5566,\u9000\u51fa\u4f1a\u5458. \u5e97\u5bb6\u4fee\u6539\u5361\u53f710000001\u7684\u4fe1\u606f\u7ed9\u738b\u4e94. update demo . membermaster set membername = '\u738b\u4e94' , memberphone = ...., .... where cardno = '10000001' ; \u7cfb\u7edf\u4e0d\u4f1a\u51fa\u9519,\u4f46\u4e1a\u52a1\u5c42\u9762\u4f1a\u6709\u95ee\u9898. \u56e0\u4e3a\u6709\u5f20\u9500\u552e\u6d41\u6c34\u8868,demo.trans. \u4fee\u6539\u5361\u53f7\u4fe1\u606f\u7ed9\u738b\u4e94\u540e,\u67e5\u770b\u5361\u53f710000001\u7684\u6d88\u8d39\u6d41\u6c34 \u91cc\u9762\u8bb0\u5f55\u662f\u5f20\u4e09\u7684..\u4e0d\u662f\u738b\u4e94\u7684. \u5f20\u4e09\u7684\u6d88\u8d39\u884c\u4e3a\u653e\u5230\u738b\u4e94\u8eab\u4e0a\u53bb\u4e86,\u80af\u5b9a\u662f\u4e0d\u5bf9\u7684 \u6ce8\u610f: demo.trans\u8868\u6709\u4e24\u4e2a\u53ef\u4ee5\u8bbe\u7f6e\u5916\u952e\u7684\u5b57\u6bb5itemnumber,cardno \u5bf9\u5e94\u5546\u54c1\u4fe1\u606f\u8868goodsmaster\u548c\u4f1a\u5458\u4fe1\u606f\u8868membermaster \u601d\u8def\u4e8c: \u4f7f\u7528\u81ea\u589e\u5b57\u6bb5\u505a\u4e3b\u952e \u5355\u8868\u5355\u5e93\u7684\u65f6\u5019\u7528\u81ea\u589e\u5b57\u6bb5\u505a\u4e3b\u952e\u6ca1\u6709\u95ee\u9898\uff01\uff01\u5206\u5e93\u5206\u8868\u7684\u8bdd\u81ea\u589e\u5b57\u6bb5\u5c31\u6ca1\u529e\u6cd5\u4fdd\u8bc1\u5168\u5c40\u552f\u4e00\u4e86\uff01 -- \u5220\u9664\u8868 \u5361\u53f7\u7684\u4e3b\u952e\u7ea6\u675f ALTER TABLE demo . membermaster DROP PRIMARY KEY ; -- \u7ed9\u4f1a\u5458\u4fe1\u606f\u8868\u6dfb\u52a0id\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e \u5e76\u81ea\u589e ALTER TABLE demo . membermaster ADD id INT PRIMARY KEY AUTO_INCREMENT ; -- \u4fee\u6539\u9500\u552e\u6d41\u6c34\u8868\uff0c\u6dfb\u52a0\u65b0\u7684\u5b57\u6bb5 memberid\uff0c\u5bf9\u5e94\u4f1a\u5458\u4fe1\u606f\u8868\u4e2d\u7684\u4e3b\u952e ALTER TABLE demo . trans ADD memberid INT ; -- \u66f4\u65b0\u4e0b\u9500\u552e\u6d41\u6c34\u8868 memberid\u5f00\u59cb\u7684\u65f6\u5019\u4e3anull UPDATE demo . trans AS a , demo . membermaster AS b -- \u4e24\u5f20\u8868\u7684\u6709\u5173\u7cfb\u7684\u66f4\u65b0\uff01\uff01 SET a . memberid = b . id WHERE a . cardno = b . cardno ; -- \uff01\uff01\uff01 \u8fd9\u6837\u7684\u8bdd, \u56de\u5230\u4fee\u6539\u4f1a\u5458\u536110000001\u4e3a\u738b\u4e94\u4e4b\u524d\u7684\u72b6\u6001, \u56e0\u4e3acardno\u4e0d\u662f\u4e3b\u952e, \u6211\u4eec\u5c31\u53ef\u4ee5\u65b0\u589e\u4e00\u6761\u5361\u53f7\u4e3a10000001\u7684\u738b\u4e94\u7684\u4fe1\u606f.\u54ea\u6015\u5361\u53f7\u91cd\u590d\u4e86\u4e5f\u65e0\u6240\u8c13... \u67e5\u770b\u6d88\u8d39\u8bb0\u5f55\u5c31\u4e0d\u4f1a\u51fa\u53c9\u4e86... \u7528\u6dfb\u52a0\u81ea\u589e\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\u7684\u529e\u6cd5\u662f\u53ef\u4ee5\u7684\u3002 \u4f46\u5e76\u4e0d\u610f\u5473\u7740\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u8fd9\u4e48\u505a \u3002 \u6709\u8fd9\u6837\u4e00\u4e2a\u5e94\u7528\u573a\u666f\uff1a\u5ba2\u6237\u4e00\u822c\u90fd\u662f\u5728\u95e8\u5e97\u4e70\u4e1c\u897f\u7684\u65f6\u5019\u8fdb\u884c\u4f1a\u5458\u7684\u529e\u7406\u7684. \u95e8\u5e97\u4f1a\u901a\u8fc7\u7cfb\u7edf<\u6dfb\u52a0\u65b0\u589e\u4f1a\u5458\u7684\u529f\u80fd>\u628a\u65b0\u7684\u4f1a\u5458\u4fe1\u606f\u5148\u5b58\u653e\u5230\u672c\u5730 MySQL \u6570\u636e\u5e93\u4e2d,\u518d\u4e0a\u4f20\u5230\u603b\u90e8,\u8fdb\u884c\u6c47\u603b\u3002 \u95ee\u9898\u6765\u4e86,\u5982\u679c\u4f1a\u5458\u4fe1\u606f\u8868\u7684\u4e3b\u952e\u662f\u81ea\u589e\u7684,\u90a3\u4e48\u5404\u4e2a\u95e8\u5e97\u65b0\u52a0\u7684\u4f1a\u5458\u5c31\u4f1a\u51fa\u73b0\u201cid\u201d\u51b2\u7a81\u7684\u53ef\u80fd\u3002 \u601d\u8def\u4e09:\u624b\u52a8\u8d4b\u503c\u5b57\u6bb5\u505a\u4e3b\u952e \u901a\u8fc7\u4e00\u5b9a\u7684\u903b\u8f91\uff0c\u786e\u4fdd\u5b57\u6bb5\u503c\u5728\u5168\u7cfb\u7edf\u7684\u552f\u4e00\u6027. \u89c4\u907f\u4e3b\u952e\u91cd\u590d\u7684\u95ee\u9898 \u53d6\u6d88\u5b57\u6bb5id\u7684\u81ea\u589e\u5c5e\u6027, \u603b\u90e8\u7ef4\u62a4\u4e00\u4e2a\u5f53\u524d\u4f1a\u5458\u7f16\u53f7\u7684\u6700\u5927\u503c\u3002\u95e8\u5e97\u5728\u6dfb\u52a0\u4f1a\u5458\u7684\u65f6\u5019, \u5148\u5230\u603b\u90e8 MySQL \u6570\u636e\u5e93\u4e2d\u83b7\u53d6\u8fd9\u4e2a\u6700\u5927\u503c, \u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\u52a0 1, \u7136\u540e\u7528\u8fd9\u4e2a\u503c\u4f5c\u4e3a\u65b0\u4f1a\u5458\u7684\u201cid\u201d, \u540c\u65f6, \u66f4\u65b0\u603b\u90e8 MySQL \u6570\u636e\u5e93\u7ba1\u7406\u4fe1\u606f\u8868\u4e2d\u7684\u5f53\u524d\u4f1a\u5458\u7f16\u53f7\u7684\u6700\u5927\u503c\u3002 1> Q: \u4f1a\u5458\u7f16\u53f7id\u91cd\u590d\u7684\u95ee\u9898,\u80fd\u5426\u7528\u95e8\u5e97\u53f7+id\u6765\u89e3\u51b3.. A: \u4e0d\u5efa\u8bae\u901a\u8fc7\u7ed9id\u589e\u52a0\u4e0e\u4e1a\u52a1\u6709\u5173\u7684\u4fe1\u606f\u89e3\u51b3\u95ee\u9898, \u95e8\u5e97\u7f16\u53f7\u4e5f\u6709\u53ef\u80fd\u91cd\u590d\u6216\u91cd\u7528... 2> ID\u4e3b\u952e\u53ef\u4ee5\u8003\u8651\u4f7f\u7528varchar\u7c7b\u578b,\u4f7f\u7528UUID \u6216\u8005\u96ea\u82b1ID \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32\u505a\u4e3b\u952e \u4e0e\u96ea\u82b1 Snowflake\u76f8\u6bd4UUID\u505a\u4e3b\u952e 1 - UUID 32 \u4f4d Snowflake 64 \u4f4d 2 - \u4e0d\u5177\u5907\u5355\u8c03\u9012\u589e\u6027 . \u6bd4\u5982\u8bc4\u8bba\u8868 \u82e5\u9700\u8981\u6392\u5e8f \u8fd8\u9700\u8981\u989d\u5916\u6dfb\u52a0\u4e00\u4e2a\u65f6\u95f4\u5e8f\u5217\u5b57\u6bb5 3 - \u4e0d\u5177\u5907\u4e1a\u52a1\u542b\u4e49 4 - \u662f\u65e0\u5e8f\u7684 . \u6709\u5e8f ID\u53ef\u4ee5\u63d0\u9ad8\u6570\u636e\u5199\u5165\u6027\u80fd B + \u6811 \u82e5\u4e3b\u952e\u662f\u6709\u5e8f\u7684 , \u8ffd\u52a0\u5230\u6700\u540e\u9762\u5c31\u884c \u65e0\u5e8f\u7684\u8bdd \u8fd8\u8981\u627e\u5230\u4f4d\u7f6e\u540e\u518d\u63d2\u5165\u8fdb\u53bb \u53c2\u8003\u94fe\u63a5 : https : // cloud . tencent . com / developer / article / 1766264 3> \u591a\u4e2a\u95e8\u5e97\u540c\u65f6\u6dfb\u52a0\u4f1a\u5458\u4fe1\u606f\u8bdd,\u9700\u8981\u7528\u5230\u4e8b\u52a1,\u9632\u6b62\u522b\u7684\u8fde\u63a5\u8bfb\u53d6\u5230\u9519\u8bef\u7684\u4fe1\u606f 4> \u603b\u90e8\u8981\u5bf9max_id\u505a\u6743\u9650\u63a7\u5236,\u9632\u6b62\u6076\u610f\u4fee\u6539. \u4e5f\u4f1a\u6d89\u53ca\u5230\u52a0\u9501\u7b49\u95ee\u9898. 5> \u4e3a\u5565\u80fd\u8054\u7f51,\u95e8\u5e97\u8fd8\u8981\u5c06\u4f1a\u5458\u4fe1\u606f\u5b58\u5728\u672c\u5730. \u5e97\u5bb6\u662f\u8054\u7f51\u4e86\u7684\uff01\uff01 \u4e0d\u80fd\u56e0\u4e3a\u7f51\u7edc\u4e0d\u7a33\u5b9a\u5bfc\u81f4\u6bcf\u6b21\u6dfb\u52a0\u4f1a\u5458\u4e0d\u6210\u800c\u5f71\u54cd\u9500\u552e. \u5c06max_id\u653e\u5728\u4e00\u5f20\u5355\u72ec\u7684\u914d\u7f6e\u4fe1\u606f\u8868 \u91cc\u9762\u53ea\u6709\u8fd9\u4e48\u4e00\u4e2a\u5b57\u6bb5 \u5c31\u662f\u4e3a\u4e86\u67e5\u8be2\u66f4\u5feb\uff01\u6c47\u603b\u53ef\u4ee5\u5f80\u540e\u518d\u6c47\u603b. \u5982\u679cmax_id\u4e0d\u5355\u72ec\u4e00\u5f20\u8868\u7684\u8bdd \u6bcf\u6b21\u67e5\u603b\u90e8\u7684\u4f1a\u5458\u8868\u7684\u6700\u5927id\u53ef\u80fd\u662f\u6ca1\u53ca\u65f6\u6c47\u603b\u7684id 6> \u6dfb\u52a0\u4f1a\u5458\u64cd\u4f5c\u7684\u9891\u7387\u8fd8\u662f\u6bd4\u8f83\u4f4e\u7684,\u51fa\u73b0\u963b\u585e\u7684\u98ce\u9669\u4e0d\u5927. \u9898\u5916\u8bdd: \u82e5\u6709\u8fd9\u6837\u4e00\u4e2a\u9700\u6c42,\u5c06\u9500\u552e\u6d41\u6c34\u8868 demo.trans \u4e2d,\u6240\u6709\u5355\u4f4d\u662f\u201c\u5305\u201d\u7684\u5546\u54c1\u7684\u4ef7\u683c\u6539\u6210\u539f\u6765\u4ef7\u683c\u7684 80%,\u8be5\u600e\u4e48\u5b9e\u73b0\u5462\uff1f UPDATE demo . trans AS a , demo . goodsmaster AS b SET price = price * 0 . 8 WHERE a . itemnumber = b . itemnumber AND b . unit = '\u5305' /* \u5176\u5b9e \u76f8\u5f53\u4e8e\u505a\u4e86\u4e2a\u5185\u8fde\u63a5 \u53ea\u4e0d\u8fc7\u4e0d\u662fselect\u8bed\u53e5 \u662fupdate\u8bed\u53e5.. where\u6761\u4ef6\u4e5f\u53ef\u4ee5\u5b9e\u73b0inner join\u7684\u6548\u679c\u7684. select * from employee,department where employee.dep_id = department.id; \u7b49\u540c\u4e8e select * from employee inner join department on employee.dep_id = department.id; */","title":"\u5982\u4f55\u6b63\u786e\u7684\u4f7f\u7528\u4e3b\u952e\uff1f"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/","text":"\u8981\u641e\u660e\u767d\u7684\u51e0\u4e2a\u95ee\u9898\uff1a \u4e3a\u4f55\u7d22\u5f15\u53ebkey. primary key\u3001unique\u3001foreign key... \u7d22\u5f15\u662f\u5982\u4f55\u52a0\u901f\u67e5\u8be2\u7684,\u5b83\u7684\u539f\u7406\u662f\u5565\uff1f \u7d22\u5f15\u6a21\u578b/\u7ed3\u6784 \u4ece\u4e8c\u53c9\u6811--\u5e73\u8861\u4e8c\u53c9\u6811--b\u6811--b+\u6570 \u6bcf\u79cd\u6811\u5230\u5e95\u6709\u4ec0\u4e48\u95ee\u9898\u6700\u7ec8\u6f14\u53d8\u6210\u4e86b+\u6811 \u4e3a\u4f55b+\u6570\u4e0d\u4ec5\u80fd\u591f\u52a0\u901f\u7b49\u503c\u67e5\u8be2\u8fd8\u80fd\u52a0\u901f\u8303\u56f4\u67e5\u8be2(\u7b49\u540c\u4e8e\u591a\u6b21\u7b49\u503c\u67e5\u8be2) \u4ec0\u4e48\u662f\u805a\u96c6(\u805a\u7c07)\u7d22\u5f15\uff1f\u4ec0\u4e48\u662f\u8f85\u52a9(\u975e\u805a\u96c6\uff5c\u975e\u805a\u7c07\uff5c\u4e8c\u7ea7)\u7d22\u5f15? \u4ec0\u4e48\u60c5\u51b5\u4e0b\u53eb\u8986\u76d6\u4e86\u7d22\u5f15. \u4ec0\u4e48\u60c5\u51b5\u4e0b\u53eb\u56de\u8868\u64cd\u4f5c. \u4ec0\u4e48\u662f\u8054\u5408\u7d22\u5f15 \u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219. \u4ec0\u4e48\u662f\u7d22\u5f15\u4e0b\u63a8,\u67e5\u8be2\u4f18\u5316. \u5982\u4f55\u6b63\u786e\u4f7f\u7528\u7d22\u5f15\uff1f 1.\u4ec0\u4e48\u662f\u7d22\u5f15\uff1f mysql\u7684\u6570\u636e\u7ec4\u7ec7\u65b9\u5f0f,B+\u6811\u7ec4\u7ec7\u7ed3\u6784.. innodb\u4e0d\u652f\u6301hash 2.\u4e3a\u4ec0\u4e48\u7528\u7d22\u5f15\uff1f \u52a0\u901f\u67e5\u8be2 \u4f1a\u964d\u4f4e\u5199\u5165\u901f\u5ea6 \u5efa\u5b8c\u540e\u786c\u76d8\u7a7a\u95f4\u4f1a\u53d8\u5927 3.\u5982\u4f55\u505a\u5230\u52a0\u901f\u7684\u5462\uff1f(B+\u6811\u662f\u600e\u6837\u7684\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff1f) \u56de\u7b54\u601d\u8def: B+\u6811\u662f\u7531 \u4e8c\u53c9\u6811\u3001\u5e73\u8861\u4e8c\u53c9\u6811\u3001B\u6811\u4e00\u8def\u6f14\u53d8\u800c\u6765\u7684 \u4e0d\u7ba1\u4ee5\u4ec0\u4e48\u6811\u6784\u5efa\u7d22\u5f15,\u90fd\u5206\u4e3a\u4e24\u6b65 \u82e5\u4ee5id\u5b57\u6bb5\u6784\u5efa\u7d22\u5f15 key-id value-\u672c\u884c\u8bb0\u5f55;\u6bd4\u8f83key\u503c\u5927\u5c0f \u6784\u5efa\u6811\u5f62\u7ed3\u6784 \u82e5\u6811\u578b\u7ed3\u6784\u662f\u4e8c\u53c9\u6811 \u4e8c\u53c9\u6811\u7684\u4e24\u4e2a\u7279\u70b9\uff1f\u4e8c\u53c9\u6811\u81f4\u547d\u7684\u7f3a\u70b9,\u53ef\u80fd\u662f\u4e00\u6839\u68cd,\u53f3\u659c\u68cd,\u6811\u9ad8\u5ea6\u9ad8-IO\u6b21\u6570\u5c31\u9ad8. \u5e73\u8861\u4e8c\u53c9\u6811\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e00\u81f4\u547d\u7f3a\u70b9 AVL\u6811\u7684\u7279\u70b9\uff1fAVL\u6811\u7684\u7f3a\u70b9.. \u6bcf\u4e2a\u8282\u70b9|\u9875|\u78c1\u76d8\u5757\u653e\u7684\u53ea\u6709\u4e00\u884c\u5185\u5bb9.. \u82e5\u6709\u767e\u4e07\u884c\u6570\u636e,\u54ea\u6015\u662f\u6700\u7406\u60f3\u7684AVL\u6811 2 ^ 0 2 ^ 1 ... 2 ^ 20 \u767e\u4e07\u7ea7\u522b\u7684\u6570\u636e,IO\u6b21\u6570\u4e5f\u5f9720\u6b21 \u4e00\u6b21\u78c1\u76d8IO\u7684\u5f71\u54cd\uff1f B\u6811 \u6bcf\u4e2a\u8282\u70b9\u653e\u591a\u4e2akey-value. \u6253\u4e2a\u6bd4\u65b9,\u4e24\u7ec4\u503c\u7684key\u768418,31.\u5c31\u6709\u4e09\u4e2a\u6307\u9488,\u4e00\u4e2a\u6307\u5411\u6bd418\u5c0f\u7684,\u4e00\u4e2a\u6307\u541118\u523031\u4e2d\u95f4\u7684,\u4e00\u4e2a\u6307\u5411\u6bd431\u5927\u7684. \u5728\u7b49\u91cf\u6570\u636e\u4e0b,B\u6811\u7684\u9ad8\u5ea6\u662f\u8fdc\u8fdc\u5c0f\u4e8eAVL\u6811\u7684. B\u6811\u524d\u51e0\u6b21IO\u4e0d\u5fc5\u8981\u7684value\u6570\u636e.. B+\u6811\u56db\u5927\u7279\u70b9: \u975e\u53f6\u5b50\u8282\u70b9\u53ea\u653ekey\u503c,\u53f6\u5b50\u8282\u70b9\u653ekey-value (\u76f8\u8f83\u4e8eB\u6811 \u975e\u53f6\u5b50\u8282\u70b9\u56fa\u5b9a16k\u7684\u5927\u5c0f \u53ef\u653e\u7684key\u503c\u66f4\u591a..\u6307\u9488\u4e5f\u66f4\u591a \u6811\u53d8\u77ee\u53d8\u80d6) \u53f6\u5b50\u8282\u70b9\u5f7c\u6b64\u4e4b\u95f4\u6709\u53cc\u5411\u94fe\u8868\u7684\u6307\u5411(\u8303\u56f4\u67e5\u8be2\u53d8\u5feb why?\u76f8\u5f53\u4e8e\u591a\u6b21\u7b49\u503c\u67e5\u8be2 \u4ece\u6839\u8282\u70b9\u4e00\u8def\u627e\u5230\u67d0\u4e00\u53f6\u5b50\u8282\u70b9\u540e... B\u6811\u5f97\u6bcf\u6b21\u56de\u5934\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u627e)\u8bf4\u4e0d\u660e\u767d\u5c31\u4e3e\u4f8b\u5b50 where id > 3, \u5148\u627e\u5230id=4\u6240\u5728\u7684\u53f6\u5b50\u8282\u70b9... \u53f6\u5b50\u91cc\u9762\u7684key\u503c\u662f\u5355\u5411\u94fe\u8868,\u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u662f\u53cc\u5411\u94fe\u8868 \u5168\u90fd\u6392\u597d\u5e8f\u4e86 \u5bfc\u81f4\u6392\u5e8f\u4e5f\u5f88\u5feb. \u9ad8\u5ea6\u4e3a3\u7684B+\u6811\u80fd\u653e\u5343\u4e07\u7ea7\u522b\u7684\u6570\u636e...\u6f14\u7b97\u8fc7\u7a0b.. 4.B+\u6811\u7d22\u5f15\u7684\u5206\u7c7b \u805a\u96c6\u7d22\u5f15\u4e0e\u8f85\u52a9\u7d22\u5f15\u7684\u533a\u522b id name\u5b57\u6bb5\u4e3e\u4f8b\u8bf4\u660e 5.\u8986\u76d6\u4e86\u7d22\u5f15\u4e0e\u56de\u8868\u64cd\u4f5c \u4e24\u8005\u90fd\u662f\u5728\u547d\u4e2d\u4e86\u7d22\u5f15\u7684\u524d\u63d0\u4e0b 6.innodb\u5f15\u64ce\u4e3a\u5565\u53eb\u7d22\u5f15\u7ec4\u7ec7\u8868\uff1f\u4e00\u5f20\u8868\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u952e \u4ee5\u4e3b\u952e\u6765\u7ec4\u7ec7\u6570\u636e \u82e5\u6ca1\u6709\u4e3b\u952e... 7.\u5982\u4f55\u6b63\u786e\u4f7f\u7528\u7d22\u5f15\uff1f 1) \u7d22\u5f15\u539f\u5219:\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u5360\u7528\u7a7a\u95f4\u5c0f 2) \u7ed9\u91cd\u590d\u5ea6\u9ad8or\u5360\u7a7a\u95f4\u5927\u7684\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15 \u7b49\u503c\u67e5\u8be2\u901f\u5ea6\u63d0\u5347\u4e0d\u7406\u60f3 3\uff09\u5168\u8868\u6700\u597d \u5206\u9875\u7ed9 4\uff09\u8303\u56f4\u67e5\u8be2\u8303\u56f4\u522b\u592a\u5927 \u592a\u5927\u4e86\u5c31\u76f8\u5f53\u4e8e\u7b49\u503c\u67e5\u8be2\u4e86 5\uff09\u522b\u8ba9\u5b57\u6bb5\u53c2\u4e0e\u8fd0\u7b97,\u4e5f\u522b\u7528\u5565\u51fd\u6570 \u4fdd\u6301\u5b57\u6bb5\u5e72\u51c0 6\uff09\u5176\u5b83... 8.\u7d22\u5f15\u4e0b\u63a8\u3001\u8054\u5408\u7d22\u5f15\u3001\u6700\u5de6\u524d\u7f00\u5339\u914d\uff1f \u7d22\u5f15\u4e0b\u63a8 and-\u627e\u91cc\u9762\u6700\u4f18\u7684\u90a3\u4e2a\u5b57\u6bb5\u7f29\u5c0f\u8303\u56f4 \u5bf9or\u6ca1\u6cd5 \u6700\u5de6\u524d\u7f00\u5339\u914d \u5c31\u662f\u4e00\u5b9a\u8981\u6709\u6700\u5de6\u8fb9\u90a3\u4e2a 9.\u672a\u547d\u4e2d\u7d22\u5f15\u7684\u60c5\u51b5 \u7b2c1-3\u95ee\u9898\u7684\u89e3\u7b54\u5982\u4e0b: \u00b6 \u4e00. \u4ec0\u4e48\u662f\u7d22\u5f15? \u00b6 key - \u6570\u636e\u7ed3\u6784 - \u7d22\u5f15\u7ec4\u7ec7\u6570\u636e - B+\u6811 \u7b80\u5355\u7406\u89e3 \u76f8\u5f53\u4e8e\u4e66\u7c4d\u7684\u76ee\u5f55. \u7d22\u5f15\u662fmysql\u7684\u4e00\u79cd \u6570\u636e\u7ed3\u6784 ,\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u79f0\u4e4b\u4e3a key ,\u5927\u767d\u8bdd\u8bf4\u7d22\u5f15\u5c31\u662f\u4e00\u79cd\u6570\u636e\u7684\u7ec4\u7ec7\u65b9\u5f0f. \u8868\u4e2d\u7684\u4e00\u884c\u884c\u6570\u636e\u6309\u7167\u7d22\u5f15\u89c4\u5b9a\u7684\u7ed3\u6784\u7ec4\u7ec7\u6210\u4e86\u4e00\u79cd\u6811\u578b\u7ed3\u6784,\u8be5\u6811\u53eb B+\u6811 . \u4e8c. \u4e3a\u4f55\u8981\u7528\u7d22\u5f15? \u00b6 \u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4 \u4f18\u5316\u67e5\u8be2\u901f\u5ea6.(\u8bfb\u5199\u6bd4\u4f8b 10:1 ) \u4e09. \u5982\u4f55\u6b63\u786e\u7684\u770b\u5f85\u7d22\u5f15\u5462? \u00b6 why\u5361\uff1f\u6392\u67e5\u5230\u7d22\u5f15\u4e0a\u6210\u672c\u9ad8.\u5f00\u53d1\u4e4b\u521d\u5c31\u5e94\u8be5\u52a0. \u7d22\u5f15\u8d8a\u591a ibd\u6587\u4ef6\u91cc\u7684\u7d22\u5f15\u6811\u8d8a\u591a \u4e00\u4e2aupdate\u8bed\u53e5\u5bfc\u81f4\u5f88\u591a\u6811\u53d1\u751f\u53d8\u5316 IO\u6548\u7387down\uff01 \u9519\u8bef\u7684\u8ba4\u77e5 \u8f6f\u4ef6\u4e0a\u7ebf\u4e4b\u540e,\u8fd0\u884c\u4e86\u4e00\u6bb5\u65f6\u95f4,\u53d1\u73b0\u8f6f\u4ef6\u6781\u5361(\u7528\u6237\u8bf7\u6c42\u4e00\u4e2a\u6570\u636e\u534a\u5929\u51fa\u4e0d\u6765),\u60f3\u5230\u8981\u52a0\u7d22\u5f15 \uff08x\uff09 \u6162\uff1a\u4e0d\u662f\u6307\u7edd\u5bf9\u610f\u4e49\u4e0a\u7684\u5f88\u957f\u65f6\u95f4\u3002\u5373\u4fbf\u67d0\u4e00\u6761sql\u8bed\u53e5\u5361\u987f2-3\u79d2\u4e5f\u4f1a\u4e25\u91cd\u5f71\u54cd\u7528\u6237\u4f53\u9a8c. \u6162\u7684\u539f\u56e0\uff1a\u7f51\u901f\u3001\u7a0b\u5e8f\u672c\u8eab\u3001\u6570\u636e\u5e93.... \u5728\u5f00\u53d1\u8f6f\u4ef6\u4e4b\u521d\u5c31\u5e94\u8be5\u6839\u636e\u4e1a\u52a1\u7684\u7406\u89e3\u52a0\u7d22\u5f15 (\u5b9a\u4f4d\u5230\u5e38\u7528\u7684\u67e5\u8be2\u5b57\u6bb5). \u706b\u70e7\u7709\u6bdb\u518d\u52a0\u7d22\u5f15,\u5149\u95ee\u9898\u5b9a\u4f4d\u6392\u67e5\u5230\u6570\u636e\u5e93\u4e0a\u5c31\u9700\u8981\u8017\u8d39\u5f88\u957f\u65f6\u95f4,\u6210\u672c\u5f88\u9ad8\uff01 \u7d22\u5f15\u8d8a\u591a\u8d8a\u597d. (x) \u52a0\u7d22\u5f15\u67e5\u8be2 (\u8bfb) \u4f1a\u53d8\u5feb,\u4f46\u589e\u5220\u6539\u6570\u636e (\u5199) \u7684\u901f\u5ea6\u4f1a\u53d8\u6162,\u56e0\u4e3a\u591a\u4e86\u4e00\u5c42B+\u6811\u7684\u6570\u636e\u7ed3\u6784\u7684\u7ef4\u62a4(\u6bcf\u6b21\u64cd\u4f5c\u90fd \u8981\u8c03\u6574\u6574\u4e2aB+\u6811\u7684\u6570\u636e\u7ed3\u6784\u5173\u7cfb) \u5982\u679c\u67d0\u5f20\u8868\u7684ibd\u6587\u4ef6(ibd -- \u6570\u636e\u548c\u7d22\u5f15\u7ed3\u6784\u7684\u6587\u4ef6)\u4e2d\u521b\u5efa\u4e86\u5f88\u591a\u68f5\u7d22\u5f15\u6811,\u610f\u5473\u7740\u5f88\u5c0f\u7684update\u8bed\u53e5\u4f1a\u5bfc\u81f4\u5f88\u591a\u68f5\u7d22\u5f15\u6811\u90fd\u9700\u8981\u53d1\u751f\u53d8\u5316,\u4ece\u800c\u786c\u76d8\u7684 IO \u4f1a\u5f88\u9ad8,\u5403\u4e0d\u6d88. \u56db. \u50a8\u5907\u77e5\u8bc6 \u00b6 1> \u7d22\u5f15\u7684\u6839\u672c\u539f\u7406 \u00b6 \u539f\u7406: \u5c06\u78c1\u76d8(\u786c\u76d8)\u7684IO\u6b21\u6570\u964d\u4e0b\u6765.\u63d0\u901f. [ \u7c7b\u6bd4 ]: \u4e66( \u4e00\u5f20\u8868); \u4e66\u7684\u4e00\u9875( \u8868\u7684\u4e00\u884c); \u7d22\u5f15( \u4e66\u7684\u76ee\u5f55) \u6240\u4ee5 \u51c6\u786e\u6765\u8bf4 \u662f\u4e3a\u4e00\u5f20\u8868\u7684\u4e00\u884c\u884c\u8bb0\u5f55\u521b\u5efa\u7d22\u5f15\uff01(\u4e3a\u4e66\u7684\u4e00\u9875\u9875\u5185\u5bb9\u521b\u5efa\u76ee\u5f55) \u6709\u4e86\u76ee\u5f55\u7ed3\u6784(\u7d22\u5f15)\u540e,\u6211\u4eec\u4ee5\u540e\u7684\u67e5\u8be2\u90fd\u5e94\u8be5\u901a\u8fc7\u76ee\u5f55(\u7d22\u5f15)\u53bb\u67e5\u8be2\uff01 \u9898\u5916\u8bdd: \u50cf\u4ec0\u4e48\u96c6\u7fa4\u67b6\u6784\u7684\u4f18\u5316\u5230\u6700\u540e\u90fd\u662f\u4f18\u5316IO. \u786c\u76d8\u5185\u5b58\u90fd\u6709IO \u5185\u5b58IO\u5f88\u5feb\u4e0d\u8003\u8651, \u4e3b\u8981\u662f \u786c\u76d8IO\u548c\u7f51\u7edcIO . \u56e0\u4e3a\u5185\u5b58\u7684\u6613\u5931\u6027(\u65ad\u7535\u6570\u636e\u4e22\u5931) \u4e00\u822c\u60c5\u51b5\u4e0b,\u6211\u4eec\u90fd\u4f1a\u9009\u62e9\u5c06\u8868\u4e2d\u7684\u6570\u636e\u548c\u7d22\u5f15\u5b58\u50a8\u5728\u78c1\u76d8\u8fd9\u79cd\u5916\u56f4\u8bbe\u5907\u4e2d \u4f46\u662f\u548c\u5185\u5b58\u76f8\u6bd4,\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u6570\u636e\u7684\u901f\u5ea6\u4f1a\u6162\u4e0a\u767e\u500d\u5343\u500d\u751a\u81f3\u4e07\u500d,\u6240\u4ee5,\u5e94\u5f53\u5c3d\u91cf\u51cf\u5c11\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u6570\u636e\u7684\u6b21\u6570\u3002 2> \u4e00\u6b21\u78c1\u76d8IO\u7684\u5f71\u54cd \u00b6 \u786c\u76d8\u4f20\u6570\u636e\u5230\u5185\u5b58\u901a\u8fc7\u4e3b\u529e\u4e0a\u7684\u603b\u4ecb\u4f20\u8f93 \u5149\u901f\uff017200\u8f6c/min\u7684\u786c\u76d8\u4e3a\u4f8b... \u786c\u76d8\u4e3b\u8981\u770b\u627e\u6570\u636e\u7684\u65f6\u95f4 = avg\u5bfb\u9053\u65f6\u95f4 + avg\u65cb\u8f6c\u65f6\u95f4 + \u8bfb\u5199\u6570\u636e\u65f6\u95f4 \u2248 9ms \u78c1\u81c2\u627e\u5230\u78c1\u9053 - \u6570\u636e\u5728\u78c1\u9053\u67d0\u4e00\u4e2a\u4f4d\u7f6e - \u8bfb\u53d6\u78c1\u76d8\u5757(\u591a\u4e2a\u5f27\u6bb5) 9ms? \u65f6\u95f4\u957f\u5417\uff1f\u4e00\u4e2a\u666e\u901a\u7684cpu\u53ef\u4ee5\u5728\u8fd9\u6bb5\u65f6\u95f4\u8fd0\u884c450\u4e07\u6761\u547d\u4ee4. \u51b5\u4e14\u4e00\u4e2a\u8868\u4e2d\u7684\u8bb0\u5f55\u6210\u5343\u4e0a\u4e07, \u82e5\u662f \u4e00\u884c\u884c\u7684\u627e... \u6bcf\u884c9ms ,boom\u539f\u5730\u7206\u70b8. \u56fa\u6001\u786c\u76d8\u8d35. \u673a\u68b0\u786c\u76d8 (\u8f6c\u901f\u8d8a\u9ad8\u8bfb\u5199\u8d8a\u5feb \u8bfb\u5199\u6570\u636e\u9760\u7684\u673a\u68b0\u8fd0\u52a8) \u4ee57200\u8f6c/\u5206\u949f(120\u8f6c/\u79d2)\u7684\u673a\u68b0\u786c\u76d8\u4e3a\u4f8b, \u505a\u78c1\u76d8IO\u5c06\u786c\u76d8\u7684\u6570\u636e\u8bfb\u5230\u5185\u5b58. cpu\u4e0b\u53d1\u6307\u4ee4\u5230\u786c\u76d8,\u786c\u76d8\u627e\u5230\u6570\u636e\u540e\u5f80\u5185\u5b58\u91cc\u8bfb, \u4ece\u786c\u76d8\u628a\u6570\u636e\u5f80\u5185\u5b58\u8bfb\u5176\u5b9e\u5c31\u662f\u672c\u5730\u5728\u4e3b\u677f\u4e0a\u901a\u8fc7\u603b\u4ecb\u4f20\u8f93,\u8fd9\u4e2a\u901f\u5ea6\u5f88\u5feb\u51e0\u4e4e\u5149\u901f. \u6211\u4eec\u8bf4\u786c\u76d8\u6162\u662f\u6162\u5728\u627e\u6570\u636e\u8fd9\u4e00\u8fc7\u7a0b.(\u8fd9\u91cc\u8bf4\u7684\u662f\u672c\u5730 \u4e0d\u6d89\u53ca\u7f51\u7edc\u54c8\uff01) \u4e00\u6b21\u78c1\u76d8IO\u7684\u5ef6\u8fdf\u65f6\u95f4'\u5373\u627e\u6570\u636e\u7684\u65f6\u95f4' = \u5e73\u5747\u5bfb\u9053\u65f6\u95f4+ \u5e73\u5747\u65cb\u8f6c\u65f6\u95f4+\u4f20\u8f93\u65f6\u95f4 = 9ms \u5e73\u5747\u5bfb\u9053\u65f6\u95f4: \u78c1\u81c2\u4ece\u5916\u5230\u5185\u7684\u8981\u5212\u5230\u6570\u636e\u6240\u5728\u7684\u90a3\u4e2a\u78c1\u9053\u4e0a '\u5927\u6982\u9700\u89815ms' \u5e73\u5747\u65cb\u8f6c\u65f6\u95f4: \u6570\u636e\u5728\u78c1\u9053\u90a3\u4e00\u5708\u7684\u67d0\u4e2a\u4f4d\u7f6e \u8f6c\u4e00\u5708 1/120s = 1000/120ms = 8.3ms '\u534a\u5708 4ms' \u4f20\u8f93\u65f6\u95f4: \u6307\u7684\u662f\u4ece\u78c1\u76d8\u8bfb\u51fa\u6216\u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\u7684\u65f6\u95f4.\u4e00\u822c\u5728\u96f6\u70b9\u51e0\u6beb\u79d2.\u76f8\u5bf9\u4e8e\u524d\u4e24\u4e2a\u65f6\u95f4\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1. 9ms\u5f88\u957f\u5f88\u957f\u4e86,\u4e00\u4e2a\u666e\u901a\u7684cpu\u57289ms\u7684\u65f6\u95f4\u91cc\u53ef\u4ee5\u6267\u884c450\u4e07\u6761\u6307\u4ee4.cpu\u53ef\u4e0d\u4e50\u610f\u7b49\u8fd9\u4e48\u4e45. 3> \u78c1\u76d8\u9884\u8bfb \u00b6 \u786c\u76d8\u8bfb\u5199\u57fa\u672c\u5355\u4f4d - '\u6247\u533a'(\u78c1\u9053\u5f27\u6bb5) 512B \u5b57\u8282 \u6269\u5c55: \u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5b58\u50a8\u6700\u5c0f\u5355\u5143\u662f\u5757 4k (\u54ea\u6015\u6587\u4ef6\u53ea\u67091k\u5927\u5c0f\u4e5f\u8981\u53604k\u7684\u7a7a\u95f4) innodb\u5b58\u50a8\u5f15\u64ce\u7684\u6700\u5c0f\u5355\u5143\u662f\u9875Page 16k .ibd\u662f16\u7684\u6574\u6570\u500d n*\u6247\u533a = \u78c1\u76d8\u5757 \u786c\u76d8\u4e00\u6b21IO\u5c31\u662f\u8bfb\u53d6\u4e00\u4e2a\u78c1\u76d8\u5757\u7684\u5927\u5c0f\u5230\u5185\u5b58 \u90a3\u78c1\u76d8\u5757\u591a\u5927\u5462\uff1f\u5bf9\u4e8einnodb\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6765\u8bf4,\u78c1\u76d8\u5757\u6700\u5927\u4e3a16K\uff01 \u7b80\u5355\u7406\u89e3\uff1a\u6570\u636e\u5e93\u7684\u4e00\u6b21IO\u6700\u597d\u80fd\u8bfb\u53d616k\u7684\u6570\u636e... Mysql\u4e00\u6b21IO\u5927\u5c0f \uff5c \u786c\u76d8\u4e00\u6b21IO\u5927\u5c0f == \u4e00\u4e2a\u78c1\u76d8\u5757\u5927\u5c0f \uff5c Mysql\u4e00\u9875\u6570\u636e\u5927\u5c0f \uff5c\u7d22\u5f15\u6811\u8282\u70b9\u7684\u5927\u5c0f \u6247\u533a \u662f\u6307\u78c1\u76d8\u4e0a\u5212\u5206\u7684\u533a\u57df, \u78c1\u76d8\u4e0a\u7684\u6bcf\u4e2a\u78c1\u9053\u88ab\u7b49\u5206\u4e3a\u82e5\u5e72\u4e2a\u5f27\u6bb5, \u8fd9\u4e9b\u5f27\u6bb5\u4fbf\u662f\u78c1\u76d8\u7684\u6247\u533a; \u786c\u76d8\u7684\u8bfb\u5199\u4ee5\u6247\u533a\u4e3a\u57fa\u672c\u5355\u4f4d . \u5373\u6247\u533a\u662f\u78c1\u76d8\u5b58\u50a8\u4fe1\u606f\u7684\u6700\u5c0f\u7269\u7406\u5355\u4f4d, \u901a\u5e38\u4e00\u4e2a\u6247\u533a\u7684\u5bb9\u91cf\u4e3a512B; \u591a\u4e2a\u6247\u533a\u7ec4\u5408\u5230\u4e00\u8d77\u79f0\u4f5c\u4e3a\u4e00\u4e2a \u78c1\u76d8\u5757 . \u78c1\u76d8\u4e00\u6b21IO\u662f\u8bfb\u53d6\u4e00\u4e2a\u78c1\u76d8\u5757\u5230\u5185\u5b58\u91cc\u9762. \u4e00\u4e2a\u78c1\u76d8\u5757\u5728\u6570\u636e\u5e93\u91cc\u79f0\u4e4b\u4e3a\u4e00\u9875 . innodb\u5b58\u50a8\u5f15\u64ce\u4e00\u987516k. \u5373\u4e00\u6b21\u78c1\u76d8IO\u8bfb16k\u6570\u636e\u5230\u5185\u5b58\u4e2d. \u9884\u8bfb\uff1a\u5f53\u4e00\u6b21IO\u65f6,\u628a\u5f53\u524d\u78c1\u76d8\u5757\u548c\u76f8\u90bb\u7684\u78c1\u76d8\u5757\u90fd\u8bfb\u53d6\u5230\u5185\u5b58\u7f13\u51b2\u533a\u5185. \u56e0\u4e3a\u5c40\u90e8\u9884\u8bfb\u6027\u539f\u7406\u544a\u8bc9\u6211\u4eec,\u5f53\u8ba1\u7b97\u673a\u8bbf\u95ee\u4e00\u4e2a\u5730\u5740\u7684\u6570\u636e\u7684\u65f6\u5019,\u4e0e\u5176\u76f8\u90bb\u7684\u6570\u636e\u5927\u6982\u8def\u4f1a\u5f88\u5feb\u88ab\u8bbf\u95ee\u5230\u3002 \u9898\u5916\u8bdd\uff1a\u7406\u60f3\u60c5\u51b5\u80af\u5b9a\u662f\u6328\u7740\u5b58\u7684.... \u8fd9\u91cc\u4e0d\u6df1\u7ea0.. A\u6587\u4ef6\u53603\u4e2a\u78c1\u76d8\u5757\u3001B\u6587\u4ef6\u53604\u4e2a\u78c1\u76d8\u5757, C\u6587\u4ef6\u53603\u4e2a\u78c1\u76d8\u5757,\u4f9d\u6b21\u6328\u7740\u5b58\u5230\u78c1\u76d8\u91cc\u5f88\u5feb,\u67d0\u4e00\u5929\u5220\u9664\u4e86B\u6587\u4ef6,4\u4e2a\u78c1\u76d8\u5757\u5c31\u7a7a\u51fa\u6765\u4e86. \u8fd9\u65f6D\u6587\u4ef6\u6765\u4e86,\u5b83\u9700\u89815\u4e2a\u78c1\u76d8\u5757,\u5148\u5b58\u6ee1\u8fd94\u4e2a\u78c1\u76d8\u5757,\u8de8\u8fc7C\u6587\u4ef6\u518d\u627e\u4e00\u4e2a\u78c1\u76d8\u5757\u5b58,\u6240\u4ee5\u4e00\u4e2a\u6587\u4ef6\u4e0d\u4e00\u5b9a\u662f\u8fde\u7eed\u5b58\u7684.\u5bfc\u81f4\u78c1\u76d8\u7684\u5199\u6548\u7387\u5c31\u4f4e\u4e86. \u4e94. \u7d22\u5f15\u7684\u5206\u7c7b \u00b6 B+\u6811\u4e0eHash \u7b49\u503c\u67e5\u8be2\uff1aHash\u660e\u663e\u6709\u7edd\u5bf9\u7684\u4f18\u52bf,\u53ea\u9700\u8981\u901a\u8fc7\u4e00\u6b21Hash\u7b97\u6cd5\u5c31\u53ef\u4ee5\u627e\u5230key\u5bf9\u5e94\u7684value(\u524d\u63d0Key\u662f\u552f\u4e00\u7684.) \u8303\u56f4\u67e5\u8be2\uff1aHash\u7d22\u5f15\u662f\u65e0\u5e8f\u7684,\u54ea\u6015\u539f\u672c\u7684\u952e\u503c\u662f\u6709\u5e8f\u7684 \u4e5f\u4f1a\u88ab\u6253\u6563. \u6240\u4ee5Hash\u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2. B+\u6811\uff01\uff01\uff01 ***** \u00b6 \u7b49\u503c\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2\u90fd\u5feb Hash *** \u00b6 innodb\u4e0d\u652f\u6301 \u7b49\u503c\u67e5\u8be2\u5feb \u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2\u3001\u7ec4\u5408\u67e5\u8be2\u3001\u6392\u5e8f\u3001\u5206\u7ec4... \u9002\u7528\u573a\u666f: \u79bb\u6563\u578b\u9ad8 \u6570\u636e\u57fa\u6570\u5927 \u7b49\u503c\u67e5\u8be2 FULL-TEXT:\u5168\u6587\u7d22\u5f15 \u00b6 \u901a\u8fc7\u5173\u952e\u5b57\u7684\u5339\u914d\u6765\u8fdb\u884c\u67e5\u8be2,\u7c7b\u4f3c\u4e8elike\u7684\u6a21\u7cca\u67e5\u8be2 like+%_ \u5728\u6587\u672c\u6bd4\u8f83\u5c11\u7684\u65f6\u6bd4\u8f83\u5408\u9002,\u5bf9\u4e8e\u5927\u91cf\u7684\u6587\u672c\u6570\u636e\u68c0\u7d22\u4f1a\u975e\u5e38\u6162 \u5168\u6587\u7d22\u5f15\u5728\u5927\u91cf\u7684\u6570\u636e\u9762\u524d\u80fd\u6bd4like\u5feb\u5f88\u591a,\u4f46\u662f\u51c6\u786e\u7387\u5f88\u4f4e \u767e\u5ea6\u5728\u641c\u7d22\u6587\u7ae0\u7684\u65f6\u5019\u4f7f\u7528\u7684\u5c31\u662f\u5168\u6587\u7d22\u5f15,\u4e5f\u6709\u53ef\u80fd\u662fES \u5168\u6587\u68c0\u7d22\u901a\u4fd7\u70b9\u5c31\u662fword\u6587\u6863\u91ccctrl+f\u67e5\u627e,\u9488\u5bf9\u7684\u662f\u4e00\u7bc7\u5185\u5bb9\u5f88\u591a\u7684\u6587\u6863. \u63d0\u4e00\u5634: \u9ed8\u8ba4\u7684innodb\u5f15\u64ce\u4e0d\u652f\u6301\u6211\u4eec\u81ea\u5df1\u53bb\u521b\u5efaHash\u7d22\u5f15,\u4f46\u5b83\u81ea\u5df1\u5185\u90e8\u7528\u5230\u4e86Hash\u7d22\u5f15\u4fbf\u4e8e\u627e\u5230\u5185\u5b58\u91cc\u7f13\u5b58\u7684\u6570\u636e\u3002 \u516d. \u521b\u5efa\u7d22\u5f15\u7684\u4e24\u4e2a\u6b65\u9aa4 \u00b6 create index \u7d22\u5f15\u540d on \u8868\u540d(\u5217\u540d); step1: \u63d0\u53d6\u7d22\u5f15\u5b57\u6bb5\u6bcf\u884c\u7684\u503c\u5f53\u4f5ckey, value\u5c31\u662f\u5bf9\u5e94\u884c\u7684\u8bb0\u5f55 10 --- 10 zs 7 --- 7 ls 13 --- 13 ww \u7d22\u5f15\u5b57\u6bb5\u503c\u4f5c\u4e3a\u952e,\u5bf9\u5e94\u7684\u4e00\u884c\u8bb0\u5f55(\u6570\u636e)\u4f5c\u4e3a\u503c step2: \u4ee5key\u503c\u4e3a\u57fa\u7840\u6bd4\u8f83\u5927\u5c0f ,\u751f\u6210\u6811\u578b\u7ed3\u6784 \u4e03. B+\u6811? \u00b6 \u82e5\u6ca1\u6709\u7d22\u5f15,\u7b49\u503c\u67e5\u627e\u67d0\u4e2a\u6570\u636e,\u4f1a\u5c06\u8868\u4e2d\u7684\u8bb0\u5f55\u6328\u4e2a\u67e5\u8be2,\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n). \u6709\u4e86\u7d22\u5f15\u540e,\u7d22\u5f15\u6309\u7167 \u4e8c\u53c9\u6811 -- \u5e73\u8861\u4e8c\u53c9\u6811 -- B\u6811'\u591a\u5206\u652fAVL\u6811' -- B+\u6811 \u7684\u6570\u636e\u7ed3\u6784\u9010\u6b65\u4f18\u5316\u5bf9\u6570\u636e\u7684\u6784\u5efa. \u5c06\u6570\u636e(1\u6761\u6216\u591a\u6761\u8bb0\u5f55)\u653e\u5230\u6811\u7684\u8282\u70b9\u91cc,\u6bcf\u8bfb\u4e00\u4e2a\u8282\u70b9\u5c31\u662f\u4e00\u6b21IO. \u8282\u70b9\u7684\u5927\u5c0f \u4e8c\u53c9\u6811\u548c\u5e73\u8861\u4e8c\u53c9\u6811\u6811\u7684\u8282\u70b9\u7684\u57fa\u672c\u5355\u4f4d\u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u6247\u533a(\u56e0\u4e3a\u4e00\u6761\u8bb0\u5f55\u6240\u5360\u7a7a\u95f4\u4e0d\u591f\u5927) \uff1f B\u6811\u548cB+\u6811\u7684\u8282\u70b9\u7684\u57fa\u672c\u5355\u4f4d\u662f\u78c1\u76d8\u5757(\u7406\u60f3\u60c5\u51b5\u4e0b\u7684\u5927\u5c0f\u662f16K) \u4e8c\u53c9\u6811\u7684\u7ed3\u6784\u53ef\u80fd\u5c31\u662f\u5355\u7eaf\u7684\u4e00\u6839\u659c\u7740\u7684\u68cd,\u6811\u7684\u9ad8\u5ea6\u4e0d\u591f\u4f4e...\u6240\u4ee5\u6709\u4e86\u5e73\u8861\u4e8c\u53c9\u6811,\u538b\u4f4e\u4e86\u9ad8\u5ea6.\u4f46\u8fd9\u9ad8\u5ea6\u5b9e\u5219\u4e0a\u4e5f\u4e0d\u591f\u4f4e,\u56e0\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u4e2d\u53ea\u653e\u4e00\u6761\u8bb0\u5f55...\u5728\u6d77\u91cf\u6570\u636e\u9762\u524d,\u4e3a\u4e86\u8ba9\u6811\u7684\u9ad8\u5ea6\u66f4\u4f4e,\u5c31\u6709\u4e86B\u6811,\u6bcf\u4e2a\u8282\u70b9\u5b58\u653e\u591a\u4e2akey-value...\u4f46B\u6811\u9664\u6700\u540e\u4e00\u6b21IO\u8282\u70b9,\u5176\u5b83IO\u8282\u70b9\u7684value\u5e76\u6ca1\u6709\u7528\u5230. \u6240\u4ee5B+\u6811\u975e\u53f6\u5b50\u8282\u70b9\u653e\u7d22\u5f15\u7ed3\u679c, \u53f6\u5b50\u8282\u70b9\u653ekey-value... B+\u6570\u7684\u67e5\u627e\u6709\u70b9\u4e8c\u5206\u6cd5\u67e5\u627e(\u6392\u597d\u5e8f\u540e..)\u7684\u610f\u601d. \u8bf4\u660e : \u5728\u4e0b\u65b9\u7684\u4e00\u7cfb\u5217\u9610\u8ff0\u4e2d \u5c06\u6811\u7684\u9ad8\u5ea6\u8ddf\u5c42\u6570\u4e24\u4e2a\u6982\u5ff5\u6df7\u4e3a\u4e86\u4e00\u8c08,\u4f46\u5bf9\u6574\u4f53\u7684\u7406\u89e3\u6ca1\u591a\u5927\u7684\u5f71\u54cd. (\u61d2\u5f97\u6539\u4e86..Hhhh) \u4e8c\u53c9\u67e5\u627e\u6811 \u00b6 \u6811\u7684\u8282\u70b9\u5206\u4e3a\u4e24\u7c7b\u4e09\u79cd : leaf node: \u53f6\u5b50\u8282\u70b9 non-leaf node: \u6839\u8282\u70b9\u3001\u6811\u679d\u8282\u70b9 \u9876\u7aef\u7684\u8282\u70b9\u6211\u4eec\u79f0\u4e3a\u6839\u8282\u70b9, \u6ca1\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\u6211\u4eec\u79f0\u4e4b\u4e3a\u53f6\u5b50\u8282\u70b9, \u4f4d\u4e8e\u4e2d\u95f4\u7684\u90fd\u79f0\u4e4b\u4e3a\u6811\u679d. \u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230,\u6211\u4eec\u4e3auser\u8868(\u7528\u6237\u4fe1\u606f\u8868)\u5efa\u7acb\u4e86\u4e00\u4e2a\u4e8c\u53c9\u67e5\u627e\u6811\u7684\u7d22\u5f15 \u4e8c\u53c9\u67e5\u627e\u6811\u7279\u70b9 : \u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u6709\u4e24\u4e2a\u5b50\u8282\u70b9 \u4efb\u4f55\u8282\u70b9\u7684\u5de6\u5b50\u8282\u70b9\u7684\u952e\u503c\u90fd\u5c0f\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c,\u53f3\u5b50\u8282\u70b9\u7684\u952e\u503c\u90fd\u5927\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c (\u4e0d\u7ea0\u7ed3\u6839\u8282\u70b9\u4e3a\u5565\u5c31\u662f10 '\u5b83\u5c31\u662f\u591a\u79cd\u6784\u5efa\u65b9\u6848\u7684\u5176\u4e2d\u4e00\u79cd\u7ed3\u679c' \u91cd\u70b9\u5728\u4e8e\u53ea\u8981\u8fd9\u68f5\u6811\u6ee1\u8db3\u4e8c\u53c9\u67e5\u8be2\u6811\u7684\u7279\u70b9\u5c31\u884c\uff01\uff01) \u56fe\u4e2d\u7684\u5706\u4e3a\u4e8c\u53c9\u67e5\u627e\u6811\u7684\u8282\u70b9,\u8282\u70b9\u4e2d\u5b58\u50a8\u4e86\u952e(key)\u548c\u6570\u636e(data) \u952e\u5bf9\u5e94user\u8868\u4e2d\u7684id,\u6570\u636e\u5bf9\u5e94user\u8868\u4e2d\u7684\u884c\u6570\u636e\u3002 Q: \u6709\u4e86\u8fd9\u4e2a\u4e8c\u53c9\u6811,\u67e5\u8be2\u6548\u7387\u5c31\u63d0\u9ad8\u4e86\uff1f A\uff1a\u9519\uff01\u4e00\u5b9a\u8981\u547d\u4e2d\u7d22\u5f15\u624d\u884c\uff01\u547d\u4e2d\u7d22\u5f15 -- sql\u8bed\u53e5\u4e2d\u67e5\u8be2\u6761\u4ef6\u7684id\u5bf9\u5e94\u4e0a\u4e86\u67d0\u68f5\u6811\u7684key\u503c select * from where id = 12 ; \u5229\u7528\u4e8c\u53c9\u7d22\u5f15\u6811\u7684\u67e5\u627e\u8fc7\u7a0b\u5982\u4e0b : < 1 > \u6839\u7ed3\u70b9\u4f5c\u4e3a\u5f53\u524d\u8282\u70b9 , \u628a 12 \u4e0e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c 10 \u6bd4\u8f83 , 12 > 10 , \u5c31\u5c06\u5f53\u524d\u8282\u70b9\u7684\u53f3\u5b50\u8282\u70b9\u4f5c\u4e3a\u5f53\u524d\u8282\u70b9 . < 2 > \u7ee7\u7eed\u628a 12 \u548c\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c 13 \u6bd4\u8f83\uff0c\u53d1\u73b0 12 < 13 \uff0c\u628a\u5f53\u524d\u8282\u70b9\u7684\u5de6\u5b50\u8282\u70b9\u4f5c\u4e3a\u5f53\u524d\u8282\u70b9 . < 3 > \u628a 12 \u548c\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c 12 \u5bf9\u6bd4 , 12 = 12 , \u6ee1\u8db3\u6761\u4ef6 , \u4ece\u5f53\u524d\u8282\u70b9\u4e2d\u53d6\u51fa data , \u5373 id = 12 , name = xm . \u6700\u591a\u4e09\u6b21\u5c31\u80fd\u786e\u5b9a\u7ed3\u679c\u4e86,\u8ddf\u8fd9\u9897\u6811\u7684\u9ad8\u5ea6\u76f8\u540c\uff01\u82e5\u6ca1\u6709\u6811,\u4e00\u6761\u6761\u7684\u627e,\u6700\u591a\u9700\u89817\u6b21\uff01 \u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u5c31\u662f\u6240\u9700\u8981\u67e5\u627e\u7684\u6570\u636e\u7684\u6700\u5927IO\u6b21\u6570 \u4f46\u4e8c\u53c9\u67e5\u8be2\u6811 \u975e\u5e38\u5bb9\u6613\u53d8\u6210\u50cf\u4e0b\u56fe \u8fd9\u6837\u6784\u5efa. \u53d8\u6210\u4e86\u4e00\u5f20\u94fe\u8868. \u82e5\u9700\u8981\u67e5\u627eid=17\u7684\u7528\u6237\u4fe1\u606f,\u5c31\u9700\u8981\u67e5\u627e7\u6b21,\u4e5f\u5c31\u76f8\u5f53\u4e8e\u5168\u8868\u626b\u63cf\u4e86, \u65f6\u95f4\u590d\u6742\u5ea6\u53d8\u6210\u4e86O(n) \u65e0\u6cd5\u968f\u673a\u67e5\u627e, \u6839\u672c\u65e0\u6cd5\u8fbe\u5230\u51cf\u5c11IO\u6b21\u6570\u7684\u76ee\u7684. \u9ad8\u5ea6\u592a\u9ad8\u5bfc\u81f4\u67e5\u8be2\u6548\u7387\u4e0d\u7a33\u5b9a (\u4e0a\u65b9\u7684\u90a3\u9897\u6811\u5b9e\u5219\u662f\u4e8c\u53c9\u6811\u7684\u7279\u6b8a\u60c5\u51b5 \u5e73\u8861\u4e8c\u53c9\u6811) \u5e73\u8861\u4e8c\u53c9\u6811\uff08AVL\u6811\uff09 \u00b6 \u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898,\u5c31\u9700\u8981\u7528\u5230\u5e73\u8861\u4e8c\u53c9\u6811\u4e86\u3002 \u5e73\u8861\u4e8c\u53c9\u6811\u7684\u7279\u70b9 : \u5728\u6ee1\u8db3\u4e8c\u53c9\u67e5\u627e\u6811\u7279\u6027\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u6c42 \u6bcf\u4e2a\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u4e0d\u80fd\u8d85\u8fc71 ! \u5047\u8bbe \u4e00\u9897\u5e73\u8861\u4e8c\u53c9\u6811 , \u4e00\u5171 5 \u5c42 , \u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u6709\u4e24\u4e2a\u5b50\u8282\u70b9 . \u90a3\u4e48\u8fd9\u68f5\u6811\u5171\u6709 2 ^ 0 + 2 ^ 1 .. + 2 ^ 5 = 31 \u4e2a\u8282\u70b9 \u7b49\u503c\u67e5\u627e \u6700\u591a 5 \u6b21 IO \uff01 Q: \u7528\u5e73\u8861\u4e8c\u53c9\u6811\u5c31\u6ca1\u95ee\u9898\u4e86\u5417\uff1f A: No\uff01\u6211\u4eec\u521b\u5efa\u7d22\u5f15\u7684\u65f6\u5019\u5c06\u7d22\u5f15\u7684\u952e\u503c\u5bf9\u5199\u5165\u786c\u76d8, \u7136\u540emysql\u6bcf\u6b21IO\u8bfb\u53d6\u4e00\u4e2a\u8282\u70b9\u7684\u6570\u636e\u5230\u5185\u5b58. \u54c7\uff01\u8bda\u7136, \u5e73\u8861\u4e8c\u53c9\u6811\u76f8\u8f83\u4e8e\u9010\u884c\u4e00\u6761\u6761\u7684\u67e5\u627e\u53ef\u4ee5\u63d0\u901f. \u4f46innodb\u5f15\u64ce\u7684\u4e00\u9875\u6570\u636e\u53ef\u662f\u53ef\u4ee5\u8fbe\u523016k\u7684. \u4e00\u6b21IO\u5c31\u8bfb\u4e00\u6761\u8bb0\u5f55(\u51e0\u4e2a\u5b57\u8282)\u4e5f\u592a\u6d6a\u8d39\u4e86\u5427\uff01IO\u6b21\u6570\u53ef\u662f\u53d6\u51b3\u4e8e\u6811\u7684\u9ad8\u5ea6\u7684\uff01 \u8fd9\u5c31\u597d\u6bd4\u4e8e\u5f00\u5361\u8f66\u8fd0\u8d27,\u4e3a\u4ec0\u4e48\u6bcf\u8f86\u5361\u8f66\u53ea\u653e\u4e00\u4e2a\u5f88\u5c0f\u7684\u8d27\u7269\u5462\uff1f \u6240\u4ee5\u4e0d\u7528\u6b7b\u677f,\u7075\u6d3b\u4e9b,\u6bcf\u4e2a\u8282\u70b9\u8bd5\u7740\u591a\u653e\u51e0\u6761\u6570\u636e\uff01\u8fd9\u5c31\u4e0d\u5f97\u4e0d\u63d0B\u6811\u5566. B\u6811 \u00b6 \u6ce8\u610f: [1] \u56fe\u4e2d\u7684p\u8282\u70b9\u4e3a\u6307\u5411\u5b50\u8282\u70b9\u7684\u6307\u9488(\u5730\u5740), \u4e8c\u53c9\u67e5\u627e\u6811\u548c\u5e73\u8861\u4e8c\u53c9\u6811\u5176\u5b9e\u4e5f\u6709, \u56e0\u4e3a\u56fe\u7684\u7f8e\u89c2\u6027, \u88ab\u7701\u7565\u4e86 [2] \u4e00\u9875\u4e00\u78c1\u76d8\u5757\u4e00\u8282\u70b9 \u4e09\u8005\u4e00\u56de\u4e8b. \u5728mysql\u4e2d\u6570\u636e\u8bfb\u53d6\u7684\u57fa\u672c\u5355\u4f4d\u662f\u9875Page, \u6240\u4ee5\u8fd9\u91cc\u53eb\u505a\u9875\u66f4\u7b26\u5408mysql\u4e2d\u7d22\u5f15\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784. B\u6811\u662f\u4e00\u79cd\u591a\u53c9\u7684AVL\u6811. \u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa, B\u6811\u76f8\u8f83\u4e8e\u5e73\u8861\u4e8c\u53c9\u6811, \u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u4e86\u66f4\u591a\u7684\u952e\u503c(key)\u548c\u6570\u636e(data). \u5e76\u4e14\u6bcf\u4e2a\u8282\u70b9\u62e5\u6709\u66f4\u591a\u7684\u5b50\u8282\u70b9, \u4e0a\u8ff0\u56fe\u4e2d\u7684B\u6811\u4e3a3\u9636( \u6811\u4e2d \u8282\u70b9\u5b69\u5b50\u4e2a\u6570\u7684\u6700\u5927\u503c \u4e3a3 )B\u6811, \u9ad8\u5ea6\u4e5f\u4f1a\u66f4\u4f4e. \u57fa\u4e8e\u8fd9\u4e2a\u7279\u6027, B\u6811\u76f8\u8f83\u4e8e\u5e73\u8861\u4e8c\u53c9\u6811\u67e5\u627e\u6570\u636e\u8bfb\u53d6\u78c1\u76d8\u7684IO\u6b21\u6570\u5c06\u4f1a\u66f4\u5c11, \u67e5\u627e\u6548\u7387\u5c31\u4f1a\u6bd4\u5e73\u8861\u4e8c\u53c9\u6811\u9ad8\u5f88\u591a\u3002 \u5047\u5982\u6211\u4eec\u8981\u67e5\u627e id = 28 \u7684\u7528\u6237\u4fe1\u606f , \u90a3\u4e48\u6211\u4eec\u5728\u4e0a\u56fe B\u6811\u4e2d\u67e5\u627e\u7684\u6d41\u7a0b\u5982\u4e0b : < 1 > \u5148\u627e\u5230\u6839\u8282\u70b9\u4e5f\u5c31\u662f\u9875 1 , \u5224\u65ad 28 \u5728\u952e\u503c 17 \u548c 35 \u4e4b\u95f4 , \u90a3\u4e48\u6839\u636e\u9875 1 \u4e2d\u7684\u6307\u9488 p2\u627e\u5230\u98753 < 2 > \u5c06 28 \u548c\u9875 3 \u4e2d\u7684\u952e\u503c\u76f8\u6bd4\u8f83 , 28 \u5728 26 \u548c 30 \u4e4b\u95f4\uff0c\u6839\u636e\u9875 3 \u4e2d\u7684\u6307\u9488 p2\u627e\u5230\u98758 < 3 > \u5c06 28 \u548c\u9875 8 \u4e2d\u7684\u952e\u503c\u76f8\u6bd4\u8f83 , \u53d1\u73b0\u6709\u5339\u914d\u7684\u952e\u503c 28 , \u952e\u503c 28 \u5bf9\u5e94\u7684\u7528\u6237\u4fe1\u606f\u4e3a ( 28 , bv ) \u63d0\u4e00\u4e2a\u70b9: \u6839\u8282\u70b9\u4e00\u822c\u662f\u5e38\u9a7b\u5185\u5b58\u7684 ,\u6240\u4ee5\u8bfb\u53d6\u6839\u8282\u70b9\u7684\u90a3\u4e00\u6b21IO\u5c31\u4e0d\u7528\u8fdb\u884c\u4e86. \u4e8c\u53c9\u6811\u7684\u7ed3\u6784\u53ef\u80fd\u5c31\u662f\u5355\u7eaf\u7684\u4e00\u6839\u659c\u7740\u7684\u68cd,\u6811\u7684\u9ad8\u5ea6\u4e0d\u591f\u4f4e...\u6240\u4ee5\u6709\u4e86\u5e73\u8861\u4e8c\u53c9\u6811,\u538b\u4f4e\u4e86\u9ad8\u5ea6.\u4f46\u8fd9\u9ad8\u5ea6\u5b9e\u5219\u4e0a\u4e5f\u4e0d\u591f\u4f4e,\u56e0\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u53ea\u653e\u4e00\u6761\u8bb0\u5f55.\u5728\u6d77\u91cf\u6570\u636e\u9762\u524d,\u4e3a\u4e86\u8ba9\u6811\u7684\u9ad8\u5ea6\u66f4\u4f4e,\u5c31\u6709\u4e86B\u6811,\u6bcf\u4e2a\u8282\u70b9\u5b58\u653e\u591a\u4e2akey-value ... \u9ad8\u5ea6\u8fd8\u80fd\u4e0d\u80fd\u66f4\u4f4e\uff1f \u4e00\u9875(\u4e00\u8282\u70b9)\u5927\u5c0f\u6700\u5927\u662f16k,\u91cc\u9762\u6709\u591a\u6761\u6570\u636e,\u6bcf\u6761\u6570\u636e\u7531key\u548cvalue\u7ec4\u6210\u3002\u5927\u80c6\u70b9\u60f3, \u82e5\u53ea\u8981key\u4e0d\u8981value,\u4e00\u9875\u662f\u4e0d\u662f\u5c31\u80fd\u653e\u66f4\u591a\u6761\u6570\u636e, \u8fdb\u4e00\u6b65\u538b\u4f4e\u9ad8\u5ea6? \u5047\u8bbe\u67e5\u627e\u5230\u6570\u636e\u7ecf\u5386\u4e86\u4e09\u6b21 IO,\u524d\u4e24\u6b21 IO \u5176\u5b9e\u4ece\u78c1\u76d8\u8bfb\u53d6\u4e86\u4e0d\u5fc5\u8981\u7684\u6570\u636e,\u56e0\u4e3a\u53ea\u7528\u6bd4\u8f83 KEY,\u6240\u4ee5\u975e\u53f6\u5b50\u8282\u70b9\u5bf9\u5e94\u7684 DATA \u5b8c\u5168\u6ca1\u6709\u5fc5\u8981,\u5982\u679c DATA \u5f88\u5927,\u90a3\u5b8c\u5168\u662f\u6d6a\u8d39\u5185\u5b58\u8d44\u6e90\u3002\u8003\u8651\u4e0b\u80fd\u5426\u628a\u975e\u53f6\u5b50\u8282\u70b9\u7684 DATA \u62ff\u6389\uff1f \u7b54\u6848\u662f\u80af\u5b9a\u7684,\u8fd9\u5c31\u5f15\u51fa\u4e86B+\u6811\uff01 \u987a\u5e26\u63d0\u4e00\u5634, B\u6811\u7684\u6784\u9020\u662f\u6709\u4e00\u4e9b\u89c4\u5b9a\u7684, \u4f46\u8fd9\u4e0d\u662f\u8fd9\u91cc\u7684\u5173\u6ce8\u70b9 \u7565. B\u6811\u4e5f\u662f\u5e73\u8861\u7684,\u5f53\u589e\u52a0\u6216\u5220\u9664\u6570\u636e\u800c\u5bfc\u81f4B\u6811\u4e0d\u5e73\u8861\u65f6, \u4e5f\u662f\u9700\u8981\u8fdb\u884c\u8282\u70b9\u8c03\u6574\u7684\u3002 B+\u6811 \u00b6 \u6ce8\u610f\u554a \u98751(1) - \u98752(1) - \u98755(1) \u9ad8\u5ea6\u66f4\u4f4e : <\u7528\u7a7a\u95f4\u6362\u65f6\u95f4> 'non-leaf node'\u7d22\u5f15\u7ed3\u6784; leaf node\u771f\u6b63\u7684\u6570\u636e (\u975e\u53f6\u5b50\u8282\u70b9\u548c\u53f6\u5b50\u8282\u70b9\u628akey\u7d22\u5f15\u503c\u4e0d\u6b62\u5b58\u4e861\u904d...1.5\uff1fHhhh) \u76f8\u8f83\u4e8eB\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u5b58\u50a8\u952e\u503c\u548c\u6570\u636e\u3002B+\u6811\u975e\u53f6\u5b50\u8282\u70b9\u4e0a\u662f\u4e0d\u5b58\u50a8\u6570\u636e\u7684, \u4ec5\u5b58\u50a8\u952e\u503c, \u4e4b\u6240\u4ee5\u8fd9\u4e48\u505a\u662f\u56e0\u4e3a\u5728\u6570\u636e\u5e93\u4e2d\u9875\u7684\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0cinnodb\u4e2d\u9875\u7684\u9ed8\u8ba4\u5927\u5c0f\u662f16KB\u3002 \u5982\u679c\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u90a3\u4e48\u975e\u53f6\u5b50\u8282\u70b9\u7684\u78c1\u76d8\u5757\u5c31\u80fd\u5bb9\u7eb3\u66f4\u591a\u7684key\u503c, \u76f8\u5e94\u7684\u6811\u7684\u9636\u6570(\u8282\u70b9\u7684\u5b50\u8282\u70b9\u6811)\u5c31\u4f1a\u66f4\u5927'\u5f15\u51fa\u6765\u7684\u7bad\u5934\u5c31\u66f4\u591a\u4e86' , \u6811\u5c31\u4f1a\u66f4\u77ee\u66f4\u80d6, \u88ab\u538b\u6241\u4e86\u3002\u5982\u6b64\u4e00\u6765\u6211\u4eec\u67e5\u627e\u6570\u636e\u8fdb\u884c\u78c1\u76d8\u7684IO\u6b21\u6570\u6709\u4f1a\u518d\u6b21\u51cf\u5c11\uff0c\u6570\u636e\u67e5\u8be2\u7684\u6548\u7387\u4e5f\u4f1a\u66f4\u5feb\u3002 !!!!\u4e00\u9897B+\u6811\u80fd\u5b58\u50a8\u5343\u4e07\u6761\u7ea7\u522b\u7684\u6570\u636e.. \u63a8\u7406\u5982\u4e0b: \u5148\u8981\u6653\u5f97\uff01\u6570\u636e\u662f\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\uff01\uff01\uff01\u975e\u53f6\u5b50\u8282\u70b9\u662f\u7d22\u5f15\u7ed3\u6784\uff01\uff01\u6240\u4ee5\u80fd\u5b58\u591a\u5c11\u6761\u6570\u636e\u662f\u770b\u53f6\u5b50\u8282\u70b9 . \u82e5\u4e00\u6761\u8bb0\u5f55\u5927\u5c0f\u4e3a 1 k , \u90a3\u4e48\u53f6\u5b50\u8282\u70b9\u4e0a\u7406\u8bba\u4e0a\u53ef\u4ee5\u653e 16 \u6761\u6570\u636e . \u975e\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684 key\u503c\u548c\u6307\u9488 , \u5047\u8bbe\u4e3b\u952e ID\u4e3abigint\u7c7b\u578b8\u5b57\u8282 , \u6307\u9488\u5927\u5c0f\u5728 innodb\u6e90\u7801\u91cc\u9762\u8bbe\u7f6e\u662f6\u5b57\u8282 . \u90a3\u4e48\u4e00\u7ec4 key + \u6307\u9488\u5c31\u662f 14 \u5b57\u8282 , 16 k = 16 * 1024 = 16384 B , \u5219\u975e\u53f6\u5b50\u8282\u70b9\u6700\u591a\u80fd\u653e 16384 / 14 \u2248 1170 \u6761\u6570\u636e . \u82e5\u6811\u7684\u9ad8\u5ea6\u4e3a 2 , \u5219\u6839\u8282\u70b9\u7684\u6bcf\u4e2a\u6307\u9488\u6307\u5411\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9 , \u5219\u6709 1170 \u4e2a\u53f6\u5b50\u8282\u70b9 , \u4e00\u5171\u80fd\u5b58 1170 * 16 = 16384 \u6761\u6570\u636e . \u82e5\u6811\u7684\u9ad8\u5ea6\u4e3a 3 , \u5219\u4e00\u5171\u80fd\u5b58 1170 * 1170 * 16 = 21902400 \u6761\u6570\u636e . \u5343\u4e07\u7ea7\u522b . \u82e5 id\u4e3aint\u7c7b\u578b \u4e8c\u5343\u4e07\u5c31\u80fd\u53d8\u6210\u56db\u5343\u4e07 . \u9006\u63a8\u9a8c\u8bc1 : \u5047\u8bbe\u6570\u636e\u4ece 1 \u5230 21902400 \u987a\u5e8f\u5b58\u50a8 . 16 \u4e2a\u6570\u636e\u4e3a\u4e00\u7ec4 , \u5c31\u6709 1170 * 1170 \u4e2a\u53f6\u5b50\u8282\u70b9 ; \u6bcf 1170 \u4e2a\u53f6\u5b50\u8282\u70b9\u4e3a\u4e00\u7ec4\u5bf9\u5e94\u7b2c\u4e8c\u5c42\u8272\u6811\u679d\u8282\u70b9 ( \u53cd\u8fc7\u6765 , \u6bcf\u4e2a\u6811\u679d\u8282\u70b9\u91cc\u6709 1170 \u4e2a\u6307\u9488 ), \u5219\u6709 1170 \u4e2a\u6811\u679d\u8282\u70b9 . \u6700\u4e0a\u5c42\u7684\u6839\u8282\u70b9\u6709 1170 \u4e2a\u6307\u9488\u6307\u5411\u8fd9\u4e9b\u6811\u679d\u8282\u70b9 . \u6392\u5e8f\u67e5\u627e\u7b49\u66f4\u5feb \uff1a \u4ed4\u7ec6\u770b, 1> B+\u6811\u7d22\u5f15\u7684\u6240\u6709\u6570\u636e\u5747\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9, \u5b83\u9ed8\u8ba4\u5e2e\u5fd9\u6392\u597d\u5e8f,\u662f\u6709\u5e8f\u6392\u5217\u7684\uff01(B\u6811\u7684\u6570\u636e\u662f\u5206\u6563\u5728\u5404\u4e2a\u8282\u70b9\u7684) 2> \u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u4e5f\u6709\u6307\u9488\u6307\u5411\uff01 \u8fd9\u4f7f\u5f97B+\u6811\u8303\u56f4\u67e5\u627e\u3001\u6392\u5e8f\u67e5\u627e\u3001\u5206\u7ec4\u67e5\u627e\u4ee5\u53ca\u53bb\u91cd\u67e5\u627e\u53d8\u5f97\u5f02\u5e38\u7b80\u5355. B+\u6811\u7b49\u503c\u67e5\u8be2\u4e5f\u5feb,B\u6811\u4e5f\u5feb,\u7b49\u503c\u67e5\u8be2\u4e0d\u662fB+\u6811\u72ec\u7279\u7684\u4f18\u52bf,\u90a3B+\u8303\u56f4\u67e5\u8be2\u4e3a\u5565\u5feb\u5462\uff1f \u8303\u56f4\u67e5\u8be2\u9501\u5b9a\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9(\u53cc\u5411\u94fe\u8868)\u540e,\u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u7684\u6307\u5411\u5f80\u540e\u627e,\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u56de\u5934\u518d\u4e00\u6b21\u4ece\u6839\u8282\u70b9\u67e5\u627e. select * from user where id > 9 and id < 20 ; -- \u4f9d\u6b21\u627eid=10\u7684,id=11\u7684\u76f4\u5230id=20. B + \u6811 : \u9875 1 ( P1 '1<10<18' ) ==> \u9875 2 ( P2 '8<10<14' ) ==> \u9875 6 ( \u627e\u5230 10 ) ==> \u9875 7 ==> \u9875 8 \u8303\u56f4\u67e5\u8be2\u9501\u5b9a\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9 ( \u53cc\u5411\u94fe\u8868 ) \u540e , \u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u7684\u6307\u5411\u5f80\u540e\u627e , \u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u56de\u5934\u4ece\u6839\u8282\u70b9\u67e5\u627e . B\u6811 : \u53f6\u5b50\u8282\u70b9\u6ca1\u6709\u4e92\u76f8\u7684\u6307\u5411 , \u800c\u4e14\u6570\u636e\u662f\u5206\u6563\u7684 , \u6bcf\u6b21\u90fd\u9700\u8981\u4ece\u6839\u8282\u70b9\u91cd\u65b0\u5f00\u59cb\u67e5\u8be2 . \u4e0b\u56fe\u662fsql\u8bed\u53e5 select * from user where id>=18 and id <40 \u7684\u67e5\u8be2\u8fc7\u7a0b. \u8865\u5145\uff1aname\u5b57\u6bb5\u80fd\u505a\u7d22\u5f15\u5417\uff1f \u80fd\uff01\u56e0\u4e3a\u5b57\u7b26\u7c7b\u578b\u7684\u6570\u636e\u4e5f\u80fd\u6bd4\u5927\u5c0f.\u6839\u636e\u5b57\u7b26\u5bf9\u5e94\u4f4d\u7f6e\u7684ACSII\u7801\u8fdb\u884c\u6bd4\u8f83\uff01eg 'abc' < 'az' \u7b2c4-9\u95ee\u9898\u7684\u89e3\u7b54\u5982\u4e0b: \u00b6 \u516b. B+\u6811\u7d22\u5f15\u7684\u5206\u7c7b \u00b6 \u6ce8\u610f\uff1a\u4e00\u5f20innodb\u5b58\u50a8\u5f15\u64ce\u8868\u4e2d\u5fc5\u987b\u8981\u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15.\u4f46\u662f\u53ef\u4ee5\u6709\u591a\u4e2a\u8f85\u52a9\u7d22\u5f15. \u805a\u96c6\u7d22\u5f15 \u2018\u4e00\u4e2a\u2019 \u4e0e\u8f85\u52a9\u7d22\u5f15 \u2018\u591a\u4e2a\u2019 \u6bd4\u8f83\uff1a \u76f8\u540c\u70b9 --- B+\u6811\u7ed3\u6784,\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u653ekey,\u53f6\u5b50\u8282\u70b9\u90fd\u653ekey+value \u4e0d\u540c\u70b9 --- \u524d\u8005\u7684key\u662f\u4e3b\u952e , \u540e\u8005\u7684key\u662f\u975e\u4e3b\u952e\u5b57\u6bb5 \u524d\u8005\u7684value\u662f\u4e00\u6574\u884c\u5b8c\u6574\u7684\u8bb0\u5f55 , \u540e\u8005\u7684value\u662f\u5176\u5bf9\u5e94\u7684\u4e3b\u952e\u5b57\u6bb5\u7684\u503c \u805a\u96c6\u7d22\u5f15(\u805a\u7c07\u7d22\u5f15\uff5c\u4e3b\u952e\u7d22\u5f15)\uff1a \u00b6 \u901a\u5e38\u4e3b\u952e\u9009\u62e9\u5b57\u6bb5id, \u56e0\u4e3aid\u5b57\u6bb5\u5360\u7684\u7a7a\u95f4\u5c0f\u5e76\u4e14\u91cd\u590d\u5ea6\u4e0d\u9ad8(\u4e00\u822c\u8bbe\u7f6eid\u81ea\u52a8\u589e\u957f \u4fbf\u4e8e\u6bd4\u5927\u5c0f).\u4ee5\u6b64\u6784\u5efa\u51fa\u6765\u7684\u6811\u7684\u9ad8\u5ea6\u4f1a\u975e\u5e38\u77ee. \u805a\u96c6\u7d22\u5f15: \u4ee5 \u4e3b\u952e\u5b57\u6bb5\u4e3akey \u6784\u5efa\u7684B+\u6811, \u8be5B+\u6811\u7684\u975e\u53f6\u5b50\u8282\u70b9\u4ee5key\u503c\u6784\u5efa\u7d22\u5f15\u6811,\u53f6\u5b50\u8282\u70b9\u653e\u7684\u662f\u4e3b\u952e\u503c\u4e0e\u672c\u884c\u5b8c\u6574\u7684\u8bb0\u5f55\u3002\u8868\u4e2d\u7684\u6570\u636e\u90fd\u805a\u96c6\u5728\u53f6\u5b50\u8282\u70b9. \u8865\u5145: \u4ee5innodb\u5f15\u64ce\u521b\u5efa\u7684\u8868(\u7d22\u5f15\u7ec4\u7ec7\u8868)\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u4e3b\u952e. \u82e5\u6ca1\u6709\u6307\u5b9a\u4e3b\u952e,\u4f1a\u81ea\u52a8\u4f7f\u7528\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u7684\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\u5b57\u6bb5,\u5982\u679c\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684,Innodb\u5f15\u64ce\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u9690\u85cf\u7684\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\u5b57\u6bb5.(\u82e5\u662f\u9690\u85cf\u5b57\u6bb5\u505a\u7684\u4e3b\u952e\u7684\u8bdd \u6b64\u4e3b\u952e\u5c31\u4e0d\u5177\u5907\u52a0\u901f\u6548\u679c\u4e86) \u975e\u805a\u96c6\u7d22\u5f15(\u975e\u805a\u7c07\u7d22\u5f15\uff5c\u8f85\u52a9\u7d22\u5f15\uff5c\u4e8c\u7ea7\u7d22\u5f15) \u00b6 \u4ee5 \u975e\u4e3b\u952e\u5b57\u6bb5\u4e3akey \u6784\u5efa\u7684B+\u6811, \u8be5B+\u6811\u7684 \u53f6\u5b50\u8282\u70b9 \u653e\u7684\u662f key\u503c\u548c\u4e0e\u5176\u5bf9\u5e94\u7684\u4e3b\u952e\u5b57\u6bb5\u503c . \u4e5d. \u8986\u76d6\u4e86\u7d22\u5f15\u3001\u56de\u8868\u64cd\u4f5c \u00b6 \u5047\u8bbe \u4e3b\u952e\u7d22\u5f15 -- id\u5b57\u6bb5; \u8f85\u52a9\u7d22\u5f15 -- name\u5b57\u6bb5. \u547d\u4e2d\u4e3b\u952e\u7d22\u5f15\u80af\u5b9a\u8986\u76d6\u4e86\u7d22\u5f15 \u547d\u4e2d\u8f85\u52a9\u7d22\u5f15\u8981\u770b\u6307\u5b9a\u5217\u662f\u5426\u53ea\u6709\u8f85\u52a9\u7d22\u5f15\u5b57\u6bb5\u548c\u4e3b\u952e\u5b57\u6bb5. \u662f \u8986\u76d6\u4e86\u7d22\u5f15; \u5426 \u56de\u8868\u64cd\u4f5c. \u8986\u76d6\u4e86\u7d22\u5f15: \u00b6 \u5728\u547d\u4e2d\u7d22\u5f15\u7684\u57fa\u7840\u4e0a, \u53ea\u5728\u672c\u7d22\u5f15\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5c31\u627e\u5230\u4e86\u6211\u4eec\u60f3\u8981\u7684\u6570\u636e. \u547d\u4e2d\u8f85\u52a9\u7d22\u5f15 select id,name from user where name='egon'; \u547d\u4e2d\u4e3b\u952e\u7d22\u5f15 select name,age,gender from user where id=3; \u56de\u8868\u64cd\u4f5c \u00b6 select name,age,gender from user where name='egon'; (\u547d\u4e2d\u8f85\u52a9\u7d22\u5f15) \u975e\u805a\u96c6\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8\u8868\u4e2d\u7684\u6570\u636e,\u800c\u662f\u5b58\u50a8\u8be5\u5217\u5bf9\u5e94\u7684\u4e3b\u952e,\u60f3\u8981\u67e5\u627e\u6570\u636e\u6211\u4eec\u8fd8\u9700\u8981\u6839\u636e\u4e3b\u952e\u518d\u53bb\u805a\u96c6\u7d22\u5f15\u4e2d\u67e5\u627e, \u8fd9\u4e2a\u518d\u6839\u636e\u805a\u96c6\u7d22\u5f15\u67e5\u627e\u6570\u636e\u7684\u8fc7\u7a0b, \u6211\u4eec\u79f0\u4e3a\u56de\u8868. \u7b80\u5355\u6765\u8bf4, \u5728\u547d\u4e2d\u8f85\u52a9\u7d22\u5f15\u7684\u57fa\u7840\u4e0a,\u5728\u8f85\u52a9\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5e76\u6ca1\u6709\u627e\u5230\u60f3\u8981\u7684\u6570\u636e,\u9700\u8981\u62ff\u7740\u5bf9\u5e94\u7684\u4e3b\u952e\u5b57\u6bb5\u53bb\u805a\u96c6\u7d22\u5f15\u91cc\u518d\u627e\u4e00\u4e0b. eg: \u6811\u7684\u9ad8\u5ea6\u662f3 \u90a3\u4e48IO\u6700\u5927\u53ef\u80fd\u662f6\u6b21\uff01 \u5341. \u7d22\u5f15\u7ba1\u7406 \u00b6 \u589e\u52a0\u5220\u9664\u4e3b\u952e PRI\u3001\u552f\u4e00UNL\u3001\u666e\u901a\u7d22\u5f15MUL \u9002\u7528\u573a\u666f unique \u9700\u6c42\u8868\u660e\u67d0\u4e00\u5217\u4e0d\u80fd\u91cd\u590d eg:\u624b\u673a\u53f7\u90ae\u7bb1\u4e0d\u80fd\u91cd\u590d \u60f3\u8ba9\u4e24\u4e2a\u5217\u52a0\u8d77\u6765\u662f\u552f\u4e00\u7684,\u90a3\u4e48\u5c31\u521b\u5efa\u591a\u5217\u8054\u5408\u552f\u4e00\u7d22\u5f15. eg: \u535a\u5ba2\u7cfb\u7edf\u4e2d\u7684up_down\u63a8\u8350\u8868. \u90a3\u4e48user_id\u548carticle_id\u5c31\u9002\u5408\u505a\u4e00\u4e2a\u8054\u5408\u552f\u4e00\u7d22\u5f15. \u8981\u4e48\u8d5e\u8981\u4e48\u8e29. index \u4e00\u4e9b\u5217\u53ef\u80fd\u91cd\u590d,\u6bd4\u5982 \u6635\u79f0. \u60f3\u901a\u8fc7\u6635\u79f0\u8fdb\u884c\u641c\u7d22.\u52a0\u5feb\u5b83\u7684\u901f\u5ea6\u90a3\u5c31\u505a\u666e\u901a\u7d22\u5f15. \u60f3\u8981\u51e0\u4e2a\u8981\u4e00\u8d77\u53bb\u641c\u7d22\u7684\u65f6\u5019.\u5c31\u7528\u666e\u901a\u8054\u5408\u7d22\u5f15. eg: select * from info where user ='**' and pwd ='**' \u5341\u4e00. \u7d22\u5f15\u5b9e\u9a8c \u00b6 \u5728\u8868\u4e2d\u5df2\u7ecf\u6709\u5927\u91cf\u6570\u636e\u7684\u60c5\u51b5\u4e0b,\u4e3a\u67d0\u4e2a\u5b57\u6bb5\u5efa\u7d22\u5f15\u4f1a\u5f88\u6162,\u4e14\u5360\u7528\u786c\u76d8\u7a7a\u95f4,\u5efa\u5b8c\u540e\u67e5\u8be2\u901f\u5ea6\u52a0\u5feb. \u767e\u4e07\u884c\u7ea7\u522b\u7684\u6570\u636e\u5927\u6982\u9700\u89818,9\u79d2...\u751a\u81f3\u66f4\u4e45. create index idx on s1(id); \u5efa\u7d22\u5f15\u65f6\u4f1a\u6253\u4e71,\u6240\u4ee5\u5efa\u7684\u8fc7\u7a0b\u4e2d\u522b\u67e5\uff1f\uff1f \u5b83\u4f1a\u626b\u63cf\u8868\u4e2d\u6240\u6709\u7684\u6570\u636e,\u7136\u540e\u4ee5id\u4e3a\u6570\u636e\u9879,\u521b\u5efa\u7d22\u5f15\u7ed3\u6784,\u5b58\u653e\u4e8e\u786c\u76d8\u7684\u8868\u4e2d. \u6570\u636e\u91cf\u5927\u5efa\u7d22\u5f15\u5feb\u4e0d\u4e86.. \u9898\u5916\u8bdd: \u82e5\u52a0\u7d22\u5f15\u7684\u5b57\u6bb5\u662fsex\u5b57\u6bb5, \u54ea\u6015\u547d\u4e2d\u7d22\u5f15\u67e5\u8be2\u4e5f\u5feb\u4e0d\u4e86.\u5b9e\u9645\u4e0asex\u5b57\u6bb5\u52a0\u4e86\u7d22\u5f15\u8ddf\u6ca1\u52a0\u4e00\u6837. select count(1) from t1 where sex='\u7537'; \u53ef\u4ee5\u53c2\u8003\u6267\u884c\u8ba1\u5212 expain \u6ce8\u610f: \u5220\u9664\u7d22\u5f15\u540eibd\u6587\u4ef6\u7684\u5927\u5c0f\u5e76\u4e0d\u4f1a\u51cf\u5c0f.\u56e0\u4e3amysql\u73b0\u76ee\u524d\u6e05\u7406\u4e0d\u6389\u91cc\u9762\u7684\u4e1c\u897f.Hhhh. \u5efa\u7d22\u5f15\u65f6\u614e\u91cd \uff01\uff01\uff01 \u53ea\u6709\u51e0\u4e2a\u5b57\u6bb5\u7684300\u4e07\u6761\u6570\u636e. 192M. \u5efa\u5b8cid\u7d22\u5f15\u540e. ibd\u6587\u4ef6\u4f1a\u53d8\u5927,\u5927\u6982250M. \u5341\u4e8c. \u6b63\u786e\u4f7f\u7528\u7d22\u5f15 \u00b6 \u6b63\u786e\u4f7f\u7528\u7d22\u5f15 \u5373\u4f7f\u547d\u4e2d\u7d22\u5f15\u63d0\u901f\u4e5f\u4e0d\u660e\u663e.. explain <sql\u8bed\u53e5> \u7ed3\u679c \u770bkey\u6709\u65e0\u547d\u4e2d\u7d22\u5f15 \u770brows\u884c\u6570 \u6784\u5efa\u57fa\u7840 \u00b6 1> \u4ee5\u4ec0\u4e48\u5b57\u6bb5\u7684\u503c\u4e3a\u57fa\u7840\u6784\u5efa\u7d22\u5f15? \u6700\u597d\u662f\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u5360\u7528\u7a7a\u95f4\u5c0f\u7684\u5b57\u6bb5 \u5168\u8868\u67e5\u8be2 \u00b6 2> \u9488\u5bf9\u5168\u8868\u67e5\u8be2\u8bed\u53e5\u5982\u4f55\u4f18\u5316\uff1f select count(id) from s1; \u5e94\u7528\u573a\u666f: \u7528\u6237\u60f3\u8981\u6d4f\u89c8\u6240\u6709\u7684\u5546\u54c1\u4fe1\u606f \u4f18\u5316\u65b9\u6848: \u5f00\u53d1\u5c42\u9762\u5206\u9875\u67e5\u627e, \u4e0d\u4e00\u6b21\u6027\u5c55\u73b0\u7ed9\u7528\u6237; \u7f13\u5b58. \u7b49\u503c\u67e5\u8be2 \u00b6 3> \u9488\u5bf9\u7b49\u503c\u67e5\u8be2 select count(id) from s1 where id = 33; \u4ee5\u91cd\u590d\u5ea6\u4f4e\u7684\u67e5\u8be2\u5b57\u6bb5\u4e3a\u57fa\u7840\u521b\u5efa\u7d22\u5f15\u624d\u80fd\u52a0\u901f\u67e5\u8be2\uff01\uff01\u7ed9\u91cd\u590d\u5ea6\u9ad8\u7684\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u662f\u6ca1\u6709\u610f\u4e49\u7684! \u4ee5\u5360\u7528\u7a7a\u95f4\u5927\u7684\u5b57\u6bb5\u4e3a\u57fa\u7840\u521b\u5efa\u7d22\u5f15\u52a0\u901f\u6548\u679c\u4e0d\u660e\u663e. select count ( id ) from s1 where name = 'egon' ; -- 300\u4e07\u6761\u6570\u636e\u7684name\u5168\u662fegon. -- \u6267\u884c\u4e0a\u65b9\u8bed\u53e5 \u5168\u8868\u626b\u63cf 1.32s -- \u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00 \u4e3aname\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15 5.13s create index idx_name on s1 ( name ); -- \u518d\u6267\u884c\u7b2c\u4e00\u6761sql\u8bed\u53e5 28.45s (\u00b4\u25bd\uff40)\u53d8\u5f97\u5f88\u6162\u4e86\u8036 \u867d\u7136\u547d\u4e2d\u7d22\u5f15\u4f46\u4e0e\u5168\u8868\u626b\u63cf\u76f8\u6bd4\u53cd\u800c\u53d8\u6162\u4e86\u5f88\u591a\u5f88\u591a -- \u56e0\u4e3a\u4ee5name\u521b\u5efa\u7684\u6811 \u5b83\u7684key\u5168\u662fegon. \u5206\u4e0d\u6e05\u8c01\u5927\u8c01\u5c0f,\u5c31\u662f\u4e00\u6839\u68cd.. -- \u8fd9\u5bfc\u81f4\u4e86\u4e2a\u5f88\u6709\u8da3\u7684\u73b0\u8c61 \u6ca1\u6709\u7684\u77ac\u95f4\u5224\u65ad\u51fa\u6765 select count ( id ) from s1 where name != 'egon' ; -- 0.00s \u77ac\u95f4\u5224\u65ad\u51fa\u6765\u4e86. select count ( id ) from s1 where name != 'xxxx' ; -- 0.00s \u77ac\u95f4\u5224\u65ad\u51fa\u6765\u4e86. \u603b\u7ed3: \u7b49\u503c\u67e5\u8be2\u7684\u4f18\u5316 \u5e94\u8be5\u7ed9\u91cd\u590d\u5ea6\u4f4e\u4e14\u5360\u7528\u7a7a\u95f4\u5c0f\u7684\u5b57\u6bb5\u503c\u4e3a\u57fa\u7840\u521b\u5efa\u7d22\u5f15. \u8303\u56f4\u67e5\u8be2 \u00b6 4> \u5173\u4e8e\u8303\u56f4\u67e5\u8be2 -- > >= < <= != between and like create index idx_id on s1 ( id ); select count ( id ) form s1 where id > 33 ; -- \u54ea\u6015\u547d\u4e2d\u4e86\u7d22\u5f15,\u4e5f\u76f8\u5f53\u4e8e\u5bf9300\u4e07\u6761\u6570\u636e\u5168\u8868\u626b\u63cf\u4e86 select count ( id ) from s1 where id > 33 and id < 10000 ; /* id != 33; -- \u6162 \u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8303\u56f4 between 1 and 3; -- \u5feb \u8303\u56f4\u5c0f between 1 and 300000; -- \u6162 \u8303\u56f4\u5927 */ /*\u7ed9email\u52a0\u7d22\u5f15\u540e \u7b49\u503c\u67e5\u8be2\u53d8\u5feb email like 'xxxx'; -- \u5feb like\u6307\u5b9a\u7684\u662f\u4e00\u4e2a\u660e\u786e\u7684\u503c email like 'egon3%'; -- \u82e5\u4ee5egon3\u5f00\u5934\u7684\u6570\u636e\u5f88\u591a \u5c31\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8303\u56f4,\u6162 \u53cd\u4e4b\u76f8\u53cd email like '%xxxx'; -- \u6162 -- %\u5c3d\u91cf\u53f3\u8fb9 \u5c3d\u91cf\u5c06\u6a21\u7cca\u67e5\u8be2\u7684\u6761\u4ef6\u5199\u5f97\u5b8c\u5584\u4e9b */ \u603b\u7ed3: innodb\u5b58\u50a8\u80fd\u52a0\u901f\u8303\u56f4\u67e5\u8be2,\u4f46\u662f\u67e5\u8be2\u8303\u56f4\u4e0d\u80fd\u592a\u5927. like \u540e\u7684\u5185\u5bb9%\u5e94\u8be5\u5f80\u53f3\u653e,\u5e76\u4e14\u5de6\u534a\u90e8\u5206\u7684\u5185\u5bb9\u5e94\u8be5\u5c3d\u91cf\u7cbe\u786e \u5b57\u6bb5\u8fd0\u7b97 \u00b6 5> \u6761\u4ef6\u5b57\u6bb5\u53c2\u4e0e\u8fd0\u7b97 create index idx_mouth_salary on s1 ( mouth_salary ); -- \u67e5\u8be2\u5e74\u85aa\u4e3a10000\u7684\u5458\u5de5 select count ( id ) from s1 where mouth_salary * 12 = 10000 ; -- \u7d22\u5f15\u5b57\u6bb5id\u53c2\u4e0e\u4e86\u8ba1\u7b97 \u6bcf\u6b21\u90fd\u6709\u56db\u5219\u8fd0\u7b97\u4e0b select count ( id ) from s1 where mouth_salary = 10000 / 12 ; -- \u4f18\u5316 \u603b\u7ed3: \u4e0d\u8981\u8ba9\u6761\u4ef6\u5b57\u6bb5\u53c2\u4e0e\u8fd0\u7b97,\u4e5f\u4e0d\u8981\u4f20\u9012\u7ed9\u67d0\u4e00\u4e2a\u51fd\u6570 \u4fdd\u6301\u5b57\u6bb5\u662f\u5e72\u51c0\u7684.. \u5176\u5b83 \u00b6 \u9690\u5f0f\u8f6c\u6362\u95ee\u9898: id = 1 id=\u201c1\u201d \u5c3d\u91cf\u907f\u514d\u4f7f\u7528select * \u56e0\u4e3a\u53ef\u80fd\u4f1a\u51fa\u73b0\u56de\u8868\u64cd\u4f5c \u5efa\u8868\u65f6\u5c3d\u53ef\u80fd\u628a\u5360\u7528\u7a7a\u95f4\u5c0f\u7684\u5f80\u524d\u653e \u8fd9\u8ddf\u5e95\u5c42\u6709\u5173 \u5efa\u8bae\u7528\u8fde\u63a5(join) \u6765\u4ee3\u66ff \u5b50\u67e5\u8be2 \u8986\u76d6\u4e86\u7d22\u5f15 \u6162\u67e5\u8be2\u65e5\u5fd7 \u5341\u4e09. \u7d22\u5f15\u4e0b\u63a8\u6280\u672f \u00b6 mysql\u5185\u90e8\u4f18\u5316\u5668\u7684\u4e00\u79cd\u673a\u5236.\u5b83\u4f1a\u5206\u6790\u51fa\u591a\u79cd\u6267\u884c\u65b9\u6848.\u627e\u5230\u5176\u4e2d\u6700\u4f18\u7684\u65b9\u6848. \u8fde\u7eed\u591a\u4e2aand \u00b6 \u5bf9\u4e8e\u8fde\u7eed\u591a\u4e2aand\u7684\u6761\u4ef6, \u4f18\u5316\u5668\u4f1a\u5148\u627e\u51fa\u80fd\u628a\u8303\u56f4\u7f29\u5230\u6700\u5c0f\u7684\u67d0\u4e00\u4e2a\u6761\u4ef6'(\u4e00\u822c\u662f\u533a\u5206\u5ea6\u9ad8\u7684\u7d22\u5f15\u5b57\u6bb5)'. select count ( id ) from s1 where name = 'egon' and age = 18 and gender = 'male' ; /*\u6211\u4eec\u7684\u601d\u8def: -- \u62ff\u5230\u7b2c\u4e00\u6761\u8bb0\u5f55 \u4f9d\u6b21\u5224\u65adname\u3001age\u3001gender\u7684\u503c,\u82e5\u5224\u65ad\u9014\u4e2d\u51fa\u73b0false\u5c31\u4e2d\u65ad\u6b64\u6b21\u5224\u65ad \u518d\u62ff\u5230\u7b2c\u4e8c\u6761\u8bb0\u5f55 \u5982\u6cd5\u70ae\u5236.*/ /*\u4f18\u5316\u5668\u7684\u601d\u8def: and\u8fde\u63a5\u7684\u6761\u4ef6\u7684\u5730\u4f4d\u90fd\u662f\u4e00\u6837\u7684 \u8c01\u5148\u8c01\u540e\u5224\u65ad\u90fd\u4e0d\u8981\u7d27 \u65b9\u6848\u4e00: \u4ee5name\u5b57\u6bb5\u4e3a\u57fa\u7840,\u5148\u7b5b\u9009\u51faname='egon'\u7684\u8bb0\u5f55,\u7b5b\u51fa\u6765\u540e\u518d\u6328\u4e2a\u6bd4age\u548cgender. \u65b9\u6848\u4e8c: \u5148\u7b5b\u9009\u51faage='18'\u7684\u8bb0\u5f55,\u6bd4name\u548cgender \u65b9\u6848\u4e8c: \u5148\u7b5b\u9009\u51fagender='male'\u7684\u8bb0\u5f55,\u6bd4name\u548cage \u8981\u77e5\u9053\u54ea\u6015\u4ee5name\u4e3a\u57fa\u7840\u547d\u4e2d\u4e86\u4e00\u9897\u7d22\u5f15\u6811,\u4f46\u7b5b\u9009\u51fa\u7684\u8bb0\u5f55\u4e5f\u6709\u53ef\u80fd\u5f88\u591a. mysql\u4f1a\u5206\u6790\u8fd9\u4e9b\u65b9\u6848,\u770bexplain\u6267\u884c\u8ba1\u5212,\u770brow\u884c\u6570\u7b49\u53c2\u6570..\u6765\u51b3\u5b9a\u7528\u54ea\u4e2a. */ -- \u4e3e\u4f8b \u76f8\u4eb2,\u6bd4\u5982\u597d\u770b\u8fd9\u5c5e\u4e8e\u7a00\u6709\u5c5e\u6027,\u6211\u4eec\u4f1a\u62ff\u7740\u8fd9\u4e2a\u7a00\u6709\u5c5e\u6027\u5148\u7f29\u5c0f\u8303\u56f4,\u7136\u540e\u518d\u67e5 -- where \u5e74\u9f84=18 and \u8eab\u9ad8 = 170 and \u957f\u76f8 = \u597d\u770b \u8fde\u7eed\u591a\u4e2aor \u00b6 \u5bf9\u4e8e\u8fde\u7eed\u591a\u4e2aor\u7684\u6761\u4ef6 \u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u4f9d\u6b21\u7b97 \u53ea\u8981\u6709\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u6b64\u6761\u8bb0\u5f55\u5c31\u53ef\u4ee5\u653e\u884c. \u7d22\u5f15\u4e0b\u63a8\u6280\u672f\u5bf9\u6b64\u6ca1\u62db.. select count ( id ) from s1 where name = 'egon' or age = 18 or gender = 'male' ; -- or\u9501\u5b9a\u7684\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8303\u56f4.. \u7d22\u5f15\u4e0b\u63a8\u6ca1\u62db.. -- \u4e3e\u4f8b: \u751f\u4ea7\u6c7d\u8f66\u627e\u6b8b\u6b21\u54c1 \uff08\u9519\u7684\u601d\u8def- \u5148\u627e\u8f6e\u80ce\u574f\u7684 \u518d\u4ece\u8f6e\u80ce\u574f\u7684\u91cc\u9762\u627e\u65b9\u5411\u76d8\u574f\u7684\uff09\u8fd9\u79cd\u601d\u8def\u662f\u9519\u7684\uff01\uff01\uff01 -- where \u8f6e\u80ce\u574f\u4e86 or \u65b9\u5411\u76d8\u574f\u4e86 or \u5239\u8f66\u574f\u4e86; \u5341\u56db. \u8054\u5408\u7d22\u5f15\u4e0e\u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219 \u00b6 \u8054\u5408\u7d22\u5f15\uff1a\u6307\u5bf9\u8868\u4e0a\u7684\u5404\u4e2a\u5217(\u591a\u4e2a\u5b57\u6bb5)\u5408\u8d77\u6765\u505a\u4e00\u4e2a\u7d22\u5f15 \u6700\u505a\u524d\u7f00\u5339\u914d\uff1a\u4ece\u8054\u5408\u7d22\u5f15\u7684\u6700\u5de6\u8fb9\u5f00\u59cb\u5339\u914d,\u4e00\u5b9a\u8981\u5e26\u6700\u5de6\u8fb9\u7684\u90a3\u4e2a\u5b57\u6bb5\uff01 \u91cd\u590d\u5ea6\u4f4e\u4e14\u5360\u7528\u7a7a\u95f4\u8f83\u5c0f\u7684\u5b57\u6bb5\u5e94\u8be5\u5c3d\u91cf\u5f80\u5de6\u653e. \u4ec0\u4e48\u65f6\u5019\u521b\u5efa\uff1a\u6761\u4ef6\u4e2d\u9700\u8981\u7528\u5230\u591a\u4e2a\u5b57\u6bb5,\u5e76\u4e14\u591a\u6b21\u67e5\u8be2\u4e2d\u7684\u591a\u4e2a\u5b57\u6bb5\u90fd\u5305\u542b\u67d0\u4e00\u4e2a\u5b57\u6bb5. \u5efa\u7acb\u8054\u5408\u7d22\u5f15\u540e\u5c31\u53ef\u4ee5\u4f18\u5316\u597d\u51e0\u79cd\u642d\u914d\u7684sql\u8bed\u53e5.. create index idx_id_name_gender on s1 ( id , name , age ); -- (1,egon1,18) < (2,egon2,28) \u4ece\u5de6\u5230\u53f3\u6bd4,1<2 \u5206\u80dc\u8d1f\u4e86,\u90a3\u540e\u9762\u7684\u90fd\u4e0d\u7528\u6bd4\u4e86 /* \u67e5\u8be2\u6761\u4ef6\u4e2d\u51fa\u73b0\u4e86(\u5fc5\u987b\u51fa\u73b0id),\u90a3\u4e48\u5c31\u547d\u4e2d\u4e86\u8fd9\u4e2a\u8054\u5408\u7d22\u5f15\uff01\uff01\uff01: id name age ; id name ; id age ; id \u82e5\u4ec5\u4ec5\u53ea\u662f\u51fa\u73b0\u4e86name,\u5219\u6ca1\u6709\u547d\u4e2d. */ -- \u8054\u5408\u7d22\u5f15\u662f\u4e00\u68f5\u6811 /* ... and\u8fde\u63a5\u591a\u4e2a\u6761\u4ef6*/ -- \u82e5\u7ed9\u5b57\u6bb5name\u3001email\u3001gender\u90fd\u52a0\u4e86\u7d22\u5f15 select count ( id ) from s1 where name = 'egon' and email = 18 and gender = 'male' ; -- \u7ed3\u5408\u7d22\u5f15\u4e0b\u63a8\u6280\u672f,\u4e0a\u65b9\u7684sql\u8bed\u53e5\u4f1a\u5f88\u5feb -- \u4ee5\u540e\u67e5\u8be2\u6761\u4ef6\u4e2d\u90fd\u8981\u5e26\u7740\u8fd9\u4e09name\u3001email\u3001gender \u4f46\u4e5f\u6ca1\u5fc5\u8981\u4e3a\u8fd9\u4e09\u4e2a\u5b57\u6bb5\u90fd\u5efa\u7acb\u7d22\u5f15 -- \u5efa\u4e00\u4e2a\u8054\u5408\u7d22\u5f15\u5c31\u884c \u7ed3\u5408\u8054\u5408\u7d22\u5f15\u5e94\u8be5\u628aemail\u5b57\u6bb5\u653e\u5230\u6700\u5de6\u7aef -- \u67e5\u770b\u8868\u7ed3\u6784 MUL\u4f1a\u51fa\u73b0\u5728email\u5b57\u6bb5\u90a3\u91cc create index idx_name on s1 ( email , name , gender ); -- where name='egon' and gender='male' and email=18; \u8fd9\u4e2a\u6700\u4f18\u5b57\u6bb5email\u653e\u54ea\u65e0\u6240\u8c13..\u7d22\u5f15\u4e0b\u63a8 \u8865\u5145: \u672a\u547d\u4e2d\u7d22\u5f15 \u00b6 \u7c7b\u578b\u4e0d\u4e00\u81f4 \u00b6 -- name\u5b57\u6bb5\u662f\u5b57\u7b26\u7c7b\u578b \u800c\u67e5\u8be2\u65f6\u8d4b\u503c\u7684\u662f\u5176\u5b83\u7c7b\u578b select * from big where name = 123 ; -- \u672a\u547d\u4e2d select * from big where email = 123 ; -- \u672a\u547d\u4e2d -- \u82e5\u662f\u4e3b\u952e\u7d22\u5f15 \u54ea\u6015\u7c7b\u578b\u4e0d\u4e00\u81f4\u4e5f\u662f\u5f88\u5feb\u7684:id\u4e3b\u952e\u662f\u6574\u578b \u4f46\u8fd9\u91cc\u5199\u6210\u5b57\u7b26\u7c7b\u578b\u4e5f\u6ca1\u5173\u7cfb select * from big where id = \"123\" ; -- \u547d\u4e2d \u4f7f\u7528\u4e0d\u7b49\u4e8e \u00b6 select * from big where name != \"\u6b66\u6c9b\u9f50\" ; -- \u672a\u547d\u4e2d select * from big where email != \"wupeiqi@live.com\" ; -- \u672a\u547d\u4e2d -- \u7279\u6b8a\u7684\u4e3b\u952e\uff1a select * from big where id != 123 ; -- \u547d\u4e2d or \u00b6 \u5f53or\u6761\u4ef6\u4e2d\u6709\u672a\u5efa\u7acb\u7d22\u5f15\u7684\u5217\u624d\u5931\u6548 -- id\u5efa\u4e86\u7d22\u5f15 password\u6ca1\u6709 select * from big where id = 123 or password = \"xx\" ; -- \u672a\u547d\u4e2d select * from big where name = \"wupeiqi\" or password = \"xx\" ; -- \u672a\u547d\u4e2d -- \u7279\u522b\u7684\uff1a id = 10\u662f\u4e00\u5768; password=\"xx\" and name=\"xx\"\u8fd9\u662f\u53e6\u4e00\u5768 select * from big where id = 10 or password = \"xx\" and name = \"xx\" ; -- \u547d\u4e2d \u6392\u5e8f \u00b6 \u5f53\u6839\u636e\u7d22\u5f15\u6392\u5e8f\u65f6\u5019\uff0c\u9009\u62e9\u7684\u6620\u5c04\u5982\u679c\u4e0d\u662f\u7d22\u5f15\uff0c\u5219\u4e0d\u8d70\u7d22\u5f15 -- \u56e0\u4e3a\u6620\u5c04\u7684\u662f*\u5168\u90e8 \u6240\u4ee5\u4e0d\u4f1a\u8d70\u7d22\u5f15 \u5373\u4f7f\u662f\u6839\u636e\u7d22\u5f15name\u8fdb\u884c\u7684\u6392\u5e8f select * from big order by name asc ; -- \u672a\u547d\u4e2d select * from big order by name desc ; -- \u672a\u547d\u4e2d -- \u7279\u522b\u7684\u4e3b\u952e\uff1a select * from big order by id desc ; -- \u547d\u4e2d like \u6a21\u7cca\u5339\u914d \u00b6 select * from big where name like \"%u-12-19999\" ; -- \u672a\u547d\u4e2d select * from big where name like \"_u-12-19999\" ; -- \u672a\u547d\u4e2d select * from big where name like \"wu-%-10\" ; -- \u672a\u547d\u4e2d -- \u7279\u522b\u7684:\u901a\u914d\u7b26\u5728\u524d\u9762\u4e2d\u95f4\u4e0d\u884c \u5728\u6700\u540e\u53ef\u4ee5 select * from big where name like \"wu-1111-%\" ; -- \u547d\u4e2d select * from big where name like \"wuw-%\" ; -- \u547d\u4e2d \u4f7f\u7528\u51fd\u6570 \u00b6 select * from big where reverse ( name ) = \"wupeiqi\" ; -- \u672a\u547d\u4e2d \u7279\u522b\u7684\uff1a select * from big where name = reverse ( \"wupeiqi\" ); -- \u547d\u4e2d \u6700\u5de6\u524d\u7f00\u539f\u5219 \u00b6 -- \u5982\u679c\u8054\u5408\u7d22\u5f15\u4e3a\uff1a(name,password) name and password -- \u547d\u4e2d name -- \u547d\u4e2d password -- \u672a\u547d\u4e2d name or password -- \u672a\u547d\u4e2d PS: \u6162\u67e5\u8be2,\u8d85\u8fc7\u89c4\u5b9a\u9600\u503c\u672a\u67e5\u8be2\u51fa\u6765\u7684sql\u8bed\u53e5\u90fd\u79f0\u4e3a\u6162\u67e5\u8be2..","title":"\u7d22\u5f15"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#1-3","text":"","title":"\u7b2c1-3\u95ee\u9898\u7684\u89e3\u7b54\u5982\u4e0b:"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_1","text":"key - \u6570\u636e\u7ed3\u6784 - \u7d22\u5f15\u7ec4\u7ec7\u6570\u636e - B+\u6811 \u7b80\u5355\u7406\u89e3 \u76f8\u5f53\u4e8e\u4e66\u7c4d\u7684\u76ee\u5f55. \u7d22\u5f15\u662fmysql\u7684\u4e00\u79cd \u6570\u636e\u7ed3\u6784 ,\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u79f0\u4e4b\u4e3a key ,\u5927\u767d\u8bdd\u8bf4\u7d22\u5f15\u5c31\u662f\u4e00\u79cd\u6570\u636e\u7684\u7ec4\u7ec7\u65b9\u5f0f. \u8868\u4e2d\u7684\u4e00\u884c\u884c\u6570\u636e\u6309\u7167\u7d22\u5f15\u89c4\u5b9a\u7684\u7ed3\u6784\u7ec4\u7ec7\u6210\u4e86\u4e00\u79cd\u6811\u578b\u7ed3\u6784,\u8be5\u6811\u53eb B+\u6811 .","title":"\u4e00. \u4ec0\u4e48\u662f\u7d22\u5f15?"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_2","text":"\u4ee5\u7a7a\u95f4\u6362\u65f6\u95f4 \u4f18\u5316\u67e5\u8be2\u901f\u5ea6.(\u8bfb\u5199\u6bd4\u4f8b 10:1 )","title":"\u4e8c. \u4e3a\u4f55\u8981\u7528\u7d22\u5f15?"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_3","text":"why\u5361\uff1f\u6392\u67e5\u5230\u7d22\u5f15\u4e0a\u6210\u672c\u9ad8.\u5f00\u53d1\u4e4b\u521d\u5c31\u5e94\u8be5\u52a0. \u7d22\u5f15\u8d8a\u591a ibd\u6587\u4ef6\u91cc\u7684\u7d22\u5f15\u6811\u8d8a\u591a \u4e00\u4e2aupdate\u8bed\u53e5\u5bfc\u81f4\u5f88\u591a\u6811\u53d1\u751f\u53d8\u5316 IO\u6548\u7387down\uff01 \u9519\u8bef\u7684\u8ba4\u77e5 \u8f6f\u4ef6\u4e0a\u7ebf\u4e4b\u540e,\u8fd0\u884c\u4e86\u4e00\u6bb5\u65f6\u95f4,\u53d1\u73b0\u8f6f\u4ef6\u6781\u5361(\u7528\u6237\u8bf7\u6c42\u4e00\u4e2a\u6570\u636e\u534a\u5929\u51fa\u4e0d\u6765),\u60f3\u5230\u8981\u52a0\u7d22\u5f15 \uff08x\uff09 \u6162\uff1a\u4e0d\u662f\u6307\u7edd\u5bf9\u610f\u4e49\u4e0a\u7684\u5f88\u957f\u65f6\u95f4\u3002\u5373\u4fbf\u67d0\u4e00\u6761sql\u8bed\u53e5\u5361\u987f2-3\u79d2\u4e5f\u4f1a\u4e25\u91cd\u5f71\u54cd\u7528\u6237\u4f53\u9a8c. \u6162\u7684\u539f\u56e0\uff1a\u7f51\u901f\u3001\u7a0b\u5e8f\u672c\u8eab\u3001\u6570\u636e\u5e93.... \u5728\u5f00\u53d1\u8f6f\u4ef6\u4e4b\u521d\u5c31\u5e94\u8be5\u6839\u636e\u4e1a\u52a1\u7684\u7406\u89e3\u52a0\u7d22\u5f15 (\u5b9a\u4f4d\u5230\u5e38\u7528\u7684\u67e5\u8be2\u5b57\u6bb5). \u706b\u70e7\u7709\u6bdb\u518d\u52a0\u7d22\u5f15,\u5149\u95ee\u9898\u5b9a\u4f4d\u6392\u67e5\u5230\u6570\u636e\u5e93\u4e0a\u5c31\u9700\u8981\u8017\u8d39\u5f88\u957f\u65f6\u95f4,\u6210\u672c\u5f88\u9ad8\uff01 \u7d22\u5f15\u8d8a\u591a\u8d8a\u597d. (x) \u52a0\u7d22\u5f15\u67e5\u8be2 (\u8bfb) \u4f1a\u53d8\u5feb,\u4f46\u589e\u5220\u6539\u6570\u636e (\u5199) \u7684\u901f\u5ea6\u4f1a\u53d8\u6162,\u56e0\u4e3a\u591a\u4e86\u4e00\u5c42B+\u6811\u7684\u6570\u636e\u7ed3\u6784\u7684\u7ef4\u62a4(\u6bcf\u6b21\u64cd\u4f5c\u90fd \u8981\u8c03\u6574\u6574\u4e2aB+\u6811\u7684\u6570\u636e\u7ed3\u6784\u5173\u7cfb) \u5982\u679c\u67d0\u5f20\u8868\u7684ibd\u6587\u4ef6(ibd -- \u6570\u636e\u548c\u7d22\u5f15\u7ed3\u6784\u7684\u6587\u4ef6)\u4e2d\u521b\u5efa\u4e86\u5f88\u591a\u68f5\u7d22\u5f15\u6811,\u610f\u5473\u7740\u5f88\u5c0f\u7684update\u8bed\u53e5\u4f1a\u5bfc\u81f4\u5f88\u591a\u68f5\u7d22\u5f15\u6811\u90fd\u9700\u8981\u53d1\u751f\u53d8\u5316,\u4ece\u800c\u786c\u76d8\u7684 IO \u4f1a\u5f88\u9ad8,\u5403\u4e0d\u6d88.","title":"\u4e09. \u5982\u4f55\u6b63\u786e\u7684\u770b\u5f85\u7d22\u5f15\u5462?"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_4","text":"","title":"\u56db. \u50a8\u5907\u77e5\u8bc6"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#1","text":"\u539f\u7406: \u5c06\u78c1\u76d8(\u786c\u76d8)\u7684IO\u6b21\u6570\u964d\u4e0b\u6765.\u63d0\u901f. [ \u7c7b\u6bd4 ]: \u4e66( \u4e00\u5f20\u8868); \u4e66\u7684\u4e00\u9875( \u8868\u7684\u4e00\u884c); \u7d22\u5f15( \u4e66\u7684\u76ee\u5f55) \u6240\u4ee5 \u51c6\u786e\u6765\u8bf4 \u662f\u4e3a\u4e00\u5f20\u8868\u7684\u4e00\u884c\u884c\u8bb0\u5f55\u521b\u5efa\u7d22\u5f15\uff01(\u4e3a\u4e66\u7684\u4e00\u9875\u9875\u5185\u5bb9\u521b\u5efa\u76ee\u5f55) \u6709\u4e86\u76ee\u5f55\u7ed3\u6784(\u7d22\u5f15)\u540e,\u6211\u4eec\u4ee5\u540e\u7684\u67e5\u8be2\u90fd\u5e94\u8be5\u901a\u8fc7\u76ee\u5f55(\u7d22\u5f15)\u53bb\u67e5\u8be2\uff01 \u9898\u5916\u8bdd: \u50cf\u4ec0\u4e48\u96c6\u7fa4\u67b6\u6784\u7684\u4f18\u5316\u5230\u6700\u540e\u90fd\u662f\u4f18\u5316IO. \u786c\u76d8\u5185\u5b58\u90fd\u6709IO \u5185\u5b58IO\u5f88\u5feb\u4e0d\u8003\u8651, \u4e3b\u8981\u662f \u786c\u76d8IO\u548c\u7f51\u7edcIO . \u56e0\u4e3a\u5185\u5b58\u7684\u6613\u5931\u6027(\u65ad\u7535\u6570\u636e\u4e22\u5931) \u4e00\u822c\u60c5\u51b5\u4e0b,\u6211\u4eec\u90fd\u4f1a\u9009\u62e9\u5c06\u8868\u4e2d\u7684\u6570\u636e\u548c\u7d22\u5f15\u5b58\u50a8\u5728\u78c1\u76d8\u8fd9\u79cd\u5916\u56f4\u8bbe\u5907\u4e2d \u4f46\u662f\u548c\u5185\u5b58\u76f8\u6bd4,\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u6570\u636e\u7684\u901f\u5ea6\u4f1a\u6162\u4e0a\u767e\u500d\u5343\u500d\u751a\u81f3\u4e07\u500d,\u6240\u4ee5,\u5e94\u5f53\u5c3d\u91cf\u51cf\u5c11\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u6570\u636e\u7684\u6b21\u6570\u3002","title":"1&gt; \u7d22\u5f15\u7684\u6839\u672c\u539f\u7406"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#2-io","text":"\u786c\u76d8\u4f20\u6570\u636e\u5230\u5185\u5b58\u901a\u8fc7\u4e3b\u529e\u4e0a\u7684\u603b\u4ecb\u4f20\u8f93 \u5149\u901f\uff017200\u8f6c/min\u7684\u786c\u76d8\u4e3a\u4f8b... \u786c\u76d8\u4e3b\u8981\u770b\u627e\u6570\u636e\u7684\u65f6\u95f4 = avg\u5bfb\u9053\u65f6\u95f4 + avg\u65cb\u8f6c\u65f6\u95f4 + \u8bfb\u5199\u6570\u636e\u65f6\u95f4 \u2248 9ms \u78c1\u81c2\u627e\u5230\u78c1\u9053 - \u6570\u636e\u5728\u78c1\u9053\u67d0\u4e00\u4e2a\u4f4d\u7f6e - \u8bfb\u53d6\u78c1\u76d8\u5757(\u591a\u4e2a\u5f27\u6bb5) 9ms? \u65f6\u95f4\u957f\u5417\uff1f\u4e00\u4e2a\u666e\u901a\u7684cpu\u53ef\u4ee5\u5728\u8fd9\u6bb5\u65f6\u95f4\u8fd0\u884c450\u4e07\u6761\u547d\u4ee4. \u51b5\u4e14\u4e00\u4e2a\u8868\u4e2d\u7684\u8bb0\u5f55\u6210\u5343\u4e0a\u4e07, \u82e5\u662f \u4e00\u884c\u884c\u7684\u627e... \u6bcf\u884c9ms ,boom\u539f\u5730\u7206\u70b8. \u56fa\u6001\u786c\u76d8\u8d35. \u673a\u68b0\u786c\u76d8 (\u8f6c\u901f\u8d8a\u9ad8\u8bfb\u5199\u8d8a\u5feb \u8bfb\u5199\u6570\u636e\u9760\u7684\u673a\u68b0\u8fd0\u52a8) \u4ee57200\u8f6c/\u5206\u949f(120\u8f6c/\u79d2)\u7684\u673a\u68b0\u786c\u76d8\u4e3a\u4f8b, \u505a\u78c1\u76d8IO\u5c06\u786c\u76d8\u7684\u6570\u636e\u8bfb\u5230\u5185\u5b58. cpu\u4e0b\u53d1\u6307\u4ee4\u5230\u786c\u76d8,\u786c\u76d8\u627e\u5230\u6570\u636e\u540e\u5f80\u5185\u5b58\u91cc\u8bfb, \u4ece\u786c\u76d8\u628a\u6570\u636e\u5f80\u5185\u5b58\u8bfb\u5176\u5b9e\u5c31\u662f\u672c\u5730\u5728\u4e3b\u677f\u4e0a\u901a\u8fc7\u603b\u4ecb\u4f20\u8f93,\u8fd9\u4e2a\u901f\u5ea6\u5f88\u5feb\u51e0\u4e4e\u5149\u901f. \u6211\u4eec\u8bf4\u786c\u76d8\u6162\u662f\u6162\u5728\u627e\u6570\u636e\u8fd9\u4e00\u8fc7\u7a0b.(\u8fd9\u91cc\u8bf4\u7684\u662f\u672c\u5730 \u4e0d\u6d89\u53ca\u7f51\u7edc\u54c8\uff01) \u4e00\u6b21\u78c1\u76d8IO\u7684\u5ef6\u8fdf\u65f6\u95f4'\u5373\u627e\u6570\u636e\u7684\u65f6\u95f4' = \u5e73\u5747\u5bfb\u9053\u65f6\u95f4+ \u5e73\u5747\u65cb\u8f6c\u65f6\u95f4+\u4f20\u8f93\u65f6\u95f4 = 9ms \u5e73\u5747\u5bfb\u9053\u65f6\u95f4: \u78c1\u81c2\u4ece\u5916\u5230\u5185\u7684\u8981\u5212\u5230\u6570\u636e\u6240\u5728\u7684\u90a3\u4e2a\u78c1\u9053\u4e0a '\u5927\u6982\u9700\u89815ms' \u5e73\u5747\u65cb\u8f6c\u65f6\u95f4: \u6570\u636e\u5728\u78c1\u9053\u90a3\u4e00\u5708\u7684\u67d0\u4e2a\u4f4d\u7f6e \u8f6c\u4e00\u5708 1/120s = 1000/120ms = 8.3ms '\u534a\u5708 4ms' \u4f20\u8f93\u65f6\u95f4: \u6307\u7684\u662f\u4ece\u78c1\u76d8\u8bfb\u51fa\u6216\u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\u7684\u65f6\u95f4.\u4e00\u822c\u5728\u96f6\u70b9\u51e0\u6beb\u79d2.\u76f8\u5bf9\u4e8e\u524d\u4e24\u4e2a\u65f6\u95f4\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1. 9ms\u5f88\u957f\u5f88\u957f\u4e86,\u4e00\u4e2a\u666e\u901a\u7684cpu\u57289ms\u7684\u65f6\u95f4\u91cc\u53ef\u4ee5\u6267\u884c450\u4e07\u6761\u6307\u4ee4.cpu\u53ef\u4e0d\u4e50\u610f\u7b49\u8fd9\u4e48\u4e45.","title":"2&gt; \u4e00\u6b21\u78c1\u76d8IO\u7684\u5f71\u54cd"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#3","text":"\u786c\u76d8\u8bfb\u5199\u57fa\u672c\u5355\u4f4d - '\u6247\u533a'(\u78c1\u9053\u5f27\u6bb5) 512B \u5b57\u8282 \u6269\u5c55: \u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5b58\u50a8\u6700\u5c0f\u5355\u5143\u662f\u5757 4k (\u54ea\u6015\u6587\u4ef6\u53ea\u67091k\u5927\u5c0f\u4e5f\u8981\u53604k\u7684\u7a7a\u95f4) innodb\u5b58\u50a8\u5f15\u64ce\u7684\u6700\u5c0f\u5355\u5143\u662f\u9875Page 16k .ibd\u662f16\u7684\u6574\u6570\u500d n*\u6247\u533a = \u78c1\u76d8\u5757 \u786c\u76d8\u4e00\u6b21IO\u5c31\u662f\u8bfb\u53d6\u4e00\u4e2a\u78c1\u76d8\u5757\u7684\u5927\u5c0f\u5230\u5185\u5b58 \u90a3\u78c1\u76d8\u5757\u591a\u5927\u5462\uff1f\u5bf9\u4e8einnodb\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6765\u8bf4,\u78c1\u76d8\u5757\u6700\u5927\u4e3a16K\uff01 \u7b80\u5355\u7406\u89e3\uff1a\u6570\u636e\u5e93\u7684\u4e00\u6b21IO\u6700\u597d\u80fd\u8bfb\u53d616k\u7684\u6570\u636e... Mysql\u4e00\u6b21IO\u5927\u5c0f \uff5c \u786c\u76d8\u4e00\u6b21IO\u5927\u5c0f == \u4e00\u4e2a\u78c1\u76d8\u5757\u5927\u5c0f \uff5c Mysql\u4e00\u9875\u6570\u636e\u5927\u5c0f \uff5c\u7d22\u5f15\u6811\u8282\u70b9\u7684\u5927\u5c0f \u6247\u533a \u662f\u6307\u78c1\u76d8\u4e0a\u5212\u5206\u7684\u533a\u57df, \u78c1\u76d8\u4e0a\u7684\u6bcf\u4e2a\u78c1\u9053\u88ab\u7b49\u5206\u4e3a\u82e5\u5e72\u4e2a\u5f27\u6bb5, \u8fd9\u4e9b\u5f27\u6bb5\u4fbf\u662f\u78c1\u76d8\u7684\u6247\u533a; \u786c\u76d8\u7684\u8bfb\u5199\u4ee5\u6247\u533a\u4e3a\u57fa\u672c\u5355\u4f4d . \u5373\u6247\u533a\u662f\u78c1\u76d8\u5b58\u50a8\u4fe1\u606f\u7684\u6700\u5c0f\u7269\u7406\u5355\u4f4d, \u901a\u5e38\u4e00\u4e2a\u6247\u533a\u7684\u5bb9\u91cf\u4e3a512B; \u591a\u4e2a\u6247\u533a\u7ec4\u5408\u5230\u4e00\u8d77\u79f0\u4f5c\u4e3a\u4e00\u4e2a \u78c1\u76d8\u5757 . \u78c1\u76d8\u4e00\u6b21IO\u662f\u8bfb\u53d6\u4e00\u4e2a\u78c1\u76d8\u5757\u5230\u5185\u5b58\u91cc\u9762. \u4e00\u4e2a\u78c1\u76d8\u5757\u5728\u6570\u636e\u5e93\u91cc\u79f0\u4e4b\u4e3a\u4e00\u9875 . innodb\u5b58\u50a8\u5f15\u64ce\u4e00\u987516k. \u5373\u4e00\u6b21\u78c1\u76d8IO\u8bfb16k\u6570\u636e\u5230\u5185\u5b58\u4e2d. \u9884\u8bfb\uff1a\u5f53\u4e00\u6b21IO\u65f6,\u628a\u5f53\u524d\u78c1\u76d8\u5757\u548c\u76f8\u90bb\u7684\u78c1\u76d8\u5757\u90fd\u8bfb\u53d6\u5230\u5185\u5b58\u7f13\u51b2\u533a\u5185. \u56e0\u4e3a\u5c40\u90e8\u9884\u8bfb\u6027\u539f\u7406\u544a\u8bc9\u6211\u4eec,\u5f53\u8ba1\u7b97\u673a\u8bbf\u95ee\u4e00\u4e2a\u5730\u5740\u7684\u6570\u636e\u7684\u65f6\u5019,\u4e0e\u5176\u76f8\u90bb\u7684\u6570\u636e\u5927\u6982\u8def\u4f1a\u5f88\u5feb\u88ab\u8bbf\u95ee\u5230\u3002 \u9898\u5916\u8bdd\uff1a\u7406\u60f3\u60c5\u51b5\u80af\u5b9a\u662f\u6328\u7740\u5b58\u7684.... \u8fd9\u91cc\u4e0d\u6df1\u7ea0.. A\u6587\u4ef6\u53603\u4e2a\u78c1\u76d8\u5757\u3001B\u6587\u4ef6\u53604\u4e2a\u78c1\u76d8\u5757, C\u6587\u4ef6\u53603\u4e2a\u78c1\u76d8\u5757,\u4f9d\u6b21\u6328\u7740\u5b58\u5230\u78c1\u76d8\u91cc\u5f88\u5feb,\u67d0\u4e00\u5929\u5220\u9664\u4e86B\u6587\u4ef6,4\u4e2a\u78c1\u76d8\u5757\u5c31\u7a7a\u51fa\u6765\u4e86. \u8fd9\u65f6D\u6587\u4ef6\u6765\u4e86,\u5b83\u9700\u89815\u4e2a\u78c1\u76d8\u5757,\u5148\u5b58\u6ee1\u8fd94\u4e2a\u78c1\u76d8\u5757,\u8de8\u8fc7C\u6587\u4ef6\u518d\u627e\u4e00\u4e2a\u78c1\u76d8\u5757\u5b58,\u6240\u4ee5\u4e00\u4e2a\u6587\u4ef6\u4e0d\u4e00\u5b9a\u662f\u8fde\u7eed\u5b58\u7684.\u5bfc\u81f4\u78c1\u76d8\u7684\u5199\u6548\u7387\u5c31\u4f4e\u4e86.","title":"3&gt; \u78c1\u76d8\u9884\u8bfb"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_5","text":"B+\u6811\u4e0eHash \u7b49\u503c\u67e5\u8be2\uff1aHash\u660e\u663e\u6709\u7edd\u5bf9\u7684\u4f18\u52bf,\u53ea\u9700\u8981\u901a\u8fc7\u4e00\u6b21Hash\u7b97\u6cd5\u5c31\u53ef\u4ee5\u627e\u5230key\u5bf9\u5e94\u7684value(\u524d\u63d0Key\u662f\u552f\u4e00\u7684.) \u8303\u56f4\u67e5\u8be2\uff1aHash\u7d22\u5f15\u662f\u65e0\u5e8f\u7684,\u54ea\u6015\u539f\u672c\u7684\u952e\u503c\u662f\u6709\u5e8f\u7684 \u4e5f\u4f1a\u88ab\u6253\u6563. \u6240\u4ee5Hash\u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2.","title":"\u4e94. \u7d22\u5f15\u7684\u5206\u7c7b"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#b","text":"\u7b49\u503c\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2\u90fd\u5feb","title":"B+\u6811\uff01\uff01\uff01*****"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#hash","text":"innodb\u4e0d\u652f\u6301 \u7b49\u503c\u67e5\u8be2\u5feb \u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2\u3001\u7ec4\u5408\u67e5\u8be2\u3001\u6392\u5e8f\u3001\u5206\u7ec4... \u9002\u7528\u573a\u666f: \u79bb\u6563\u578b\u9ad8 \u6570\u636e\u57fa\u6570\u5927 \u7b49\u503c\u67e5\u8be2","title":"Hash *** "},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#full-text","text":"\u901a\u8fc7\u5173\u952e\u5b57\u7684\u5339\u914d\u6765\u8fdb\u884c\u67e5\u8be2,\u7c7b\u4f3c\u4e8elike\u7684\u6a21\u7cca\u67e5\u8be2 like+%_ \u5728\u6587\u672c\u6bd4\u8f83\u5c11\u7684\u65f6\u6bd4\u8f83\u5408\u9002,\u5bf9\u4e8e\u5927\u91cf\u7684\u6587\u672c\u6570\u636e\u68c0\u7d22\u4f1a\u975e\u5e38\u6162 \u5168\u6587\u7d22\u5f15\u5728\u5927\u91cf\u7684\u6570\u636e\u9762\u524d\u80fd\u6bd4like\u5feb\u5f88\u591a,\u4f46\u662f\u51c6\u786e\u7387\u5f88\u4f4e \u767e\u5ea6\u5728\u641c\u7d22\u6587\u7ae0\u7684\u65f6\u5019\u4f7f\u7528\u7684\u5c31\u662f\u5168\u6587\u7d22\u5f15,\u4e5f\u6709\u53ef\u80fd\u662fES \u5168\u6587\u68c0\u7d22\u901a\u4fd7\u70b9\u5c31\u662fword\u6587\u6863\u91ccctrl+f\u67e5\u627e,\u9488\u5bf9\u7684\u662f\u4e00\u7bc7\u5185\u5bb9\u5f88\u591a\u7684\u6587\u6863. \u63d0\u4e00\u5634: \u9ed8\u8ba4\u7684innodb\u5f15\u64ce\u4e0d\u652f\u6301\u6211\u4eec\u81ea\u5df1\u53bb\u521b\u5efaHash\u7d22\u5f15,\u4f46\u5b83\u81ea\u5df1\u5185\u90e8\u7528\u5230\u4e86Hash\u7d22\u5f15\u4fbf\u4e8e\u627e\u5230\u5185\u5b58\u91cc\u7f13\u5b58\u7684\u6570\u636e\u3002","title":"FULL-TEXT:\u5168\u6587\u7d22\u5f15"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_6","text":"create index \u7d22\u5f15\u540d on \u8868\u540d(\u5217\u540d); step1: \u63d0\u53d6\u7d22\u5f15\u5b57\u6bb5\u6bcf\u884c\u7684\u503c\u5f53\u4f5ckey, value\u5c31\u662f\u5bf9\u5e94\u884c\u7684\u8bb0\u5f55 10 --- 10 zs 7 --- 7 ls 13 --- 13 ww \u7d22\u5f15\u5b57\u6bb5\u503c\u4f5c\u4e3a\u952e,\u5bf9\u5e94\u7684\u4e00\u884c\u8bb0\u5f55(\u6570\u636e)\u4f5c\u4e3a\u503c step2: \u4ee5key\u503c\u4e3a\u57fa\u7840\u6bd4\u8f83\u5927\u5c0f ,\u751f\u6210\u6811\u578b\u7ed3\u6784","title":"\u516d. \u521b\u5efa\u7d22\u5f15\u7684\u4e24\u4e2a\u6b65\u9aa4"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#b_1","text":"\u82e5\u6ca1\u6709\u7d22\u5f15,\u7b49\u503c\u67e5\u627e\u67d0\u4e2a\u6570\u636e,\u4f1a\u5c06\u8868\u4e2d\u7684\u8bb0\u5f55\u6328\u4e2a\u67e5\u8be2,\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n). \u6709\u4e86\u7d22\u5f15\u540e,\u7d22\u5f15\u6309\u7167 \u4e8c\u53c9\u6811 -- \u5e73\u8861\u4e8c\u53c9\u6811 -- B\u6811'\u591a\u5206\u652fAVL\u6811' -- B+\u6811 \u7684\u6570\u636e\u7ed3\u6784\u9010\u6b65\u4f18\u5316\u5bf9\u6570\u636e\u7684\u6784\u5efa. \u5c06\u6570\u636e(1\u6761\u6216\u591a\u6761\u8bb0\u5f55)\u653e\u5230\u6811\u7684\u8282\u70b9\u91cc,\u6bcf\u8bfb\u4e00\u4e2a\u8282\u70b9\u5c31\u662f\u4e00\u6b21IO. \u8282\u70b9\u7684\u5927\u5c0f \u4e8c\u53c9\u6811\u548c\u5e73\u8861\u4e8c\u53c9\u6811\u6811\u7684\u8282\u70b9\u7684\u57fa\u672c\u5355\u4f4d\u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u6247\u533a(\u56e0\u4e3a\u4e00\u6761\u8bb0\u5f55\u6240\u5360\u7a7a\u95f4\u4e0d\u591f\u5927) \uff1f B\u6811\u548cB+\u6811\u7684\u8282\u70b9\u7684\u57fa\u672c\u5355\u4f4d\u662f\u78c1\u76d8\u5757(\u7406\u60f3\u60c5\u51b5\u4e0b\u7684\u5927\u5c0f\u662f16K) \u4e8c\u53c9\u6811\u7684\u7ed3\u6784\u53ef\u80fd\u5c31\u662f\u5355\u7eaf\u7684\u4e00\u6839\u659c\u7740\u7684\u68cd,\u6811\u7684\u9ad8\u5ea6\u4e0d\u591f\u4f4e...\u6240\u4ee5\u6709\u4e86\u5e73\u8861\u4e8c\u53c9\u6811,\u538b\u4f4e\u4e86\u9ad8\u5ea6.\u4f46\u8fd9\u9ad8\u5ea6\u5b9e\u5219\u4e0a\u4e5f\u4e0d\u591f\u4f4e,\u56e0\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u4e2d\u53ea\u653e\u4e00\u6761\u8bb0\u5f55...\u5728\u6d77\u91cf\u6570\u636e\u9762\u524d,\u4e3a\u4e86\u8ba9\u6811\u7684\u9ad8\u5ea6\u66f4\u4f4e,\u5c31\u6709\u4e86B\u6811,\u6bcf\u4e2a\u8282\u70b9\u5b58\u653e\u591a\u4e2akey-value...\u4f46B\u6811\u9664\u6700\u540e\u4e00\u6b21IO\u8282\u70b9,\u5176\u5b83IO\u8282\u70b9\u7684value\u5e76\u6ca1\u6709\u7528\u5230. \u6240\u4ee5B+\u6811\u975e\u53f6\u5b50\u8282\u70b9\u653e\u7d22\u5f15\u7ed3\u679c, \u53f6\u5b50\u8282\u70b9\u653ekey-value... B+\u6570\u7684\u67e5\u627e\u6709\u70b9\u4e8c\u5206\u6cd5\u67e5\u627e(\u6392\u597d\u5e8f\u540e..)\u7684\u610f\u601d. \u8bf4\u660e : \u5728\u4e0b\u65b9\u7684\u4e00\u7cfb\u5217\u9610\u8ff0\u4e2d \u5c06\u6811\u7684\u9ad8\u5ea6\u8ddf\u5c42\u6570\u4e24\u4e2a\u6982\u5ff5\u6df7\u4e3a\u4e86\u4e00\u8c08,\u4f46\u5bf9\u6574\u4f53\u7684\u7406\u89e3\u6ca1\u591a\u5927\u7684\u5f71\u54cd. (\u61d2\u5f97\u6539\u4e86..Hhhh)","title":"\u4e03. B+\u6811?"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_7","text":"\u6811\u7684\u8282\u70b9\u5206\u4e3a\u4e24\u7c7b\u4e09\u79cd : leaf node: \u53f6\u5b50\u8282\u70b9 non-leaf node: \u6839\u8282\u70b9\u3001\u6811\u679d\u8282\u70b9 \u9876\u7aef\u7684\u8282\u70b9\u6211\u4eec\u79f0\u4e3a\u6839\u8282\u70b9, \u6ca1\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\u6211\u4eec\u79f0\u4e4b\u4e3a\u53f6\u5b50\u8282\u70b9, \u4f4d\u4e8e\u4e2d\u95f4\u7684\u90fd\u79f0\u4e4b\u4e3a\u6811\u679d. \u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230,\u6211\u4eec\u4e3auser\u8868(\u7528\u6237\u4fe1\u606f\u8868)\u5efa\u7acb\u4e86\u4e00\u4e2a\u4e8c\u53c9\u67e5\u627e\u6811\u7684\u7d22\u5f15 \u4e8c\u53c9\u67e5\u627e\u6811\u7279\u70b9 : \u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u6709\u4e24\u4e2a\u5b50\u8282\u70b9 \u4efb\u4f55\u8282\u70b9\u7684\u5de6\u5b50\u8282\u70b9\u7684\u952e\u503c\u90fd\u5c0f\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c,\u53f3\u5b50\u8282\u70b9\u7684\u952e\u503c\u90fd\u5927\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c (\u4e0d\u7ea0\u7ed3\u6839\u8282\u70b9\u4e3a\u5565\u5c31\u662f10 '\u5b83\u5c31\u662f\u591a\u79cd\u6784\u5efa\u65b9\u6848\u7684\u5176\u4e2d\u4e00\u79cd\u7ed3\u679c' \u91cd\u70b9\u5728\u4e8e\u53ea\u8981\u8fd9\u68f5\u6811\u6ee1\u8db3\u4e8c\u53c9\u67e5\u8be2\u6811\u7684\u7279\u70b9\u5c31\u884c\uff01\uff01) \u56fe\u4e2d\u7684\u5706\u4e3a\u4e8c\u53c9\u67e5\u627e\u6811\u7684\u8282\u70b9,\u8282\u70b9\u4e2d\u5b58\u50a8\u4e86\u952e(key)\u548c\u6570\u636e(data) \u952e\u5bf9\u5e94user\u8868\u4e2d\u7684id,\u6570\u636e\u5bf9\u5e94user\u8868\u4e2d\u7684\u884c\u6570\u636e\u3002 Q: \u6709\u4e86\u8fd9\u4e2a\u4e8c\u53c9\u6811,\u67e5\u8be2\u6548\u7387\u5c31\u63d0\u9ad8\u4e86\uff1f A\uff1a\u9519\uff01\u4e00\u5b9a\u8981\u547d\u4e2d\u7d22\u5f15\u624d\u884c\uff01\u547d\u4e2d\u7d22\u5f15 -- sql\u8bed\u53e5\u4e2d\u67e5\u8be2\u6761\u4ef6\u7684id\u5bf9\u5e94\u4e0a\u4e86\u67d0\u68f5\u6811\u7684key\u503c select * from where id = 12 ; \u5229\u7528\u4e8c\u53c9\u7d22\u5f15\u6811\u7684\u67e5\u627e\u8fc7\u7a0b\u5982\u4e0b : < 1 > \u6839\u7ed3\u70b9\u4f5c\u4e3a\u5f53\u524d\u8282\u70b9 , \u628a 12 \u4e0e\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c 10 \u6bd4\u8f83 , 12 > 10 , \u5c31\u5c06\u5f53\u524d\u8282\u70b9\u7684\u53f3\u5b50\u8282\u70b9\u4f5c\u4e3a\u5f53\u524d\u8282\u70b9 . < 2 > \u7ee7\u7eed\u628a 12 \u548c\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c 13 \u6bd4\u8f83\uff0c\u53d1\u73b0 12 < 13 \uff0c\u628a\u5f53\u524d\u8282\u70b9\u7684\u5de6\u5b50\u8282\u70b9\u4f5c\u4e3a\u5f53\u524d\u8282\u70b9 . < 3 > \u628a 12 \u548c\u5f53\u524d\u8282\u70b9\u7684\u952e\u503c 12 \u5bf9\u6bd4 , 12 = 12 , \u6ee1\u8db3\u6761\u4ef6 , \u4ece\u5f53\u524d\u8282\u70b9\u4e2d\u53d6\u51fa data , \u5373 id = 12 , name = xm . \u6700\u591a\u4e09\u6b21\u5c31\u80fd\u786e\u5b9a\u7ed3\u679c\u4e86,\u8ddf\u8fd9\u9897\u6811\u7684\u9ad8\u5ea6\u76f8\u540c\uff01\u82e5\u6ca1\u6709\u6811,\u4e00\u6761\u6761\u7684\u627e,\u6700\u591a\u9700\u89817\u6b21\uff01 \u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u5c31\u662f\u6240\u9700\u8981\u67e5\u627e\u7684\u6570\u636e\u7684\u6700\u5927IO\u6b21\u6570 \u4f46\u4e8c\u53c9\u67e5\u8be2\u6811 \u975e\u5e38\u5bb9\u6613\u53d8\u6210\u50cf\u4e0b\u56fe \u8fd9\u6837\u6784\u5efa. \u53d8\u6210\u4e86\u4e00\u5f20\u94fe\u8868. \u82e5\u9700\u8981\u67e5\u627eid=17\u7684\u7528\u6237\u4fe1\u606f,\u5c31\u9700\u8981\u67e5\u627e7\u6b21,\u4e5f\u5c31\u76f8\u5f53\u4e8e\u5168\u8868\u626b\u63cf\u4e86, \u65f6\u95f4\u590d\u6742\u5ea6\u53d8\u6210\u4e86O(n) \u65e0\u6cd5\u968f\u673a\u67e5\u627e, \u6839\u672c\u65e0\u6cd5\u8fbe\u5230\u51cf\u5c11IO\u6b21\u6570\u7684\u76ee\u7684. \u9ad8\u5ea6\u592a\u9ad8\u5bfc\u81f4\u67e5\u8be2\u6548\u7387\u4e0d\u7a33\u5b9a (\u4e0a\u65b9\u7684\u90a3\u9897\u6811\u5b9e\u5219\u662f\u4e8c\u53c9\u6811\u7684\u7279\u6b8a\u60c5\u51b5 \u5e73\u8861\u4e8c\u53c9\u6811)","title":"\u4e8c\u53c9\u67e5\u627e\u6811"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#avl","text":"\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898,\u5c31\u9700\u8981\u7528\u5230\u5e73\u8861\u4e8c\u53c9\u6811\u4e86\u3002 \u5e73\u8861\u4e8c\u53c9\u6811\u7684\u7279\u70b9 : \u5728\u6ee1\u8db3\u4e8c\u53c9\u67e5\u627e\u6811\u7279\u6027\u7684\u57fa\u7840\u4e0a\uff0c\u8981\u6c42 \u6bcf\u4e2a\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u4e0d\u80fd\u8d85\u8fc71 ! \u5047\u8bbe \u4e00\u9897\u5e73\u8861\u4e8c\u53c9\u6811 , \u4e00\u5171 5 \u5c42 , \u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u6709\u4e24\u4e2a\u5b50\u8282\u70b9 . \u90a3\u4e48\u8fd9\u68f5\u6811\u5171\u6709 2 ^ 0 + 2 ^ 1 .. + 2 ^ 5 = 31 \u4e2a\u8282\u70b9 \u7b49\u503c\u67e5\u627e \u6700\u591a 5 \u6b21 IO \uff01 Q: \u7528\u5e73\u8861\u4e8c\u53c9\u6811\u5c31\u6ca1\u95ee\u9898\u4e86\u5417\uff1f A: No\uff01\u6211\u4eec\u521b\u5efa\u7d22\u5f15\u7684\u65f6\u5019\u5c06\u7d22\u5f15\u7684\u952e\u503c\u5bf9\u5199\u5165\u786c\u76d8, \u7136\u540emysql\u6bcf\u6b21IO\u8bfb\u53d6\u4e00\u4e2a\u8282\u70b9\u7684\u6570\u636e\u5230\u5185\u5b58. \u54c7\uff01\u8bda\u7136, \u5e73\u8861\u4e8c\u53c9\u6811\u76f8\u8f83\u4e8e\u9010\u884c\u4e00\u6761\u6761\u7684\u67e5\u627e\u53ef\u4ee5\u63d0\u901f. \u4f46innodb\u5f15\u64ce\u7684\u4e00\u9875\u6570\u636e\u53ef\u662f\u53ef\u4ee5\u8fbe\u523016k\u7684. \u4e00\u6b21IO\u5c31\u8bfb\u4e00\u6761\u8bb0\u5f55(\u51e0\u4e2a\u5b57\u8282)\u4e5f\u592a\u6d6a\u8d39\u4e86\u5427\uff01IO\u6b21\u6570\u53ef\u662f\u53d6\u51b3\u4e8e\u6811\u7684\u9ad8\u5ea6\u7684\uff01 \u8fd9\u5c31\u597d\u6bd4\u4e8e\u5f00\u5361\u8f66\u8fd0\u8d27,\u4e3a\u4ec0\u4e48\u6bcf\u8f86\u5361\u8f66\u53ea\u653e\u4e00\u4e2a\u5f88\u5c0f\u7684\u8d27\u7269\u5462\uff1f \u6240\u4ee5\u4e0d\u7528\u6b7b\u677f,\u7075\u6d3b\u4e9b,\u6bcf\u4e2a\u8282\u70b9\u8bd5\u7740\u591a\u653e\u51e0\u6761\u6570\u636e\uff01\u8fd9\u5c31\u4e0d\u5f97\u4e0d\u63d0B\u6811\u5566.","title":"\u5e73\u8861\u4e8c\u53c9\u6811\uff08AVL\u6811\uff09"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#b_2","text":"\u6ce8\u610f: [1] \u56fe\u4e2d\u7684p\u8282\u70b9\u4e3a\u6307\u5411\u5b50\u8282\u70b9\u7684\u6307\u9488(\u5730\u5740), \u4e8c\u53c9\u67e5\u627e\u6811\u548c\u5e73\u8861\u4e8c\u53c9\u6811\u5176\u5b9e\u4e5f\u6709, \u56e0\u4e3a\u56fe\u7684\u7f8e\u89c2\u6027, \u88ab\u7701\u7565\u4e86 [2] \u4e00\u9875\u4e00\u78c1\u76d8\u5757\u4e00\u8282\u70b9 \u4e09\u8005\u4e00\u56de\u4e8b. \u5728mysql\u4e2d\u6570\u636e\u8bfb\u53d6\u7684\u57fa\u672c\u5355\u4f4d\u662f\u9875Page, \u6240\u4ee5\u8fd9\u91cc\u53eb\u505a\u9875\u66f4\u7b26\u5408mysql\u4e2d\u7d22\u5f15\u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784. B\u6811\u662f\u4e00\u79cd\u591a\u53c9\u7684AVL\u6811. \u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa, B\u6811\u76f8\u8f83\u4e8e\u5e73\u8861\u4e8c\u53c9\u6811, \u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u4e86\u66f4\u591a\u7684\u952e\u503c(key)\u548c\u6570\u636e(data). \u5e76\u4e14\u6bcf\u4e2a\u8282\u70b9\u62e5\u6709\u66f4\u591a\u7684\u5b50\u8282\u70b9, \u4e0a\u8ff0\u56fe\u4e2d\u7684B\u6811\u4e3a3\u9636( \u6811\u4e2d \u8282\u70b9\u5b69\u5b50\u4e2a\u6570\u7684\u6700\u5927\u503c \u4e3a3 )B\u6811, \u9ad8\u5ea6\u4e5f\u4f1a\u66f4\u4f4e. \u57fa\u4e8e\u8fd9\u4e2a\u7279\u6027, B\u6811\u76f8\u8f83\u4e8e\u5e73\u8861\u4e8c\u53c9\u6811\u67e5\u627e\u6570\u636e\u8bfb\u53d6\u78c1\u76d8\u7684IO\u6b21\u6570\u5c06\u4f1a\u66f4\u5c11, \u67e5\u627e\u6548\u7387\u5c31\u4f1a\u6bd4\u5e73\u8861\u4e8c\u53c9\u6811\u9ad8\u5f88\u591a\u3002 \u5047\u5982\u6211\u4eec\u8981\u67e5\u627e id = 28 \u7684\u7528\u6237\u4fe1\u606f , \u90a3\u4e48\u6211\u4eec\u5728\u4e0a\u56fe B\u6811\u4e2d\u67e5\u627e\u7684\u6d41\u7a0b\u5982\u4e0b : < 1 > \u5148\u627e\u5230\u6839\u8282\u70b9\u4e5f\u5c31\u662f\u9875 1 , \u5224\u65ad 28 \u5728\u952e\u503c 17 \u548c 35 \u4e4b\u95f4 , \u90a3\u4e48\u6839\u636e\u9875 1 \u4e2d\u7684\u6307\u9488 p2\u627e\u5230\u98753 < 2 > \u5c06 28 \u548c\u9875 3 \u4e2d\u7684\u952e\u503c\u76f8\u6bd4\u8f83 , 28 \u5728 26 \u548c 30 \u4e4b\u95f4\uff0c\u6839\u636e\u9875 3 \u4e2d\u7684\u6307\u9488 p2\u627e\u5230\u98758 < 3 > \u5c06 28 \u548c\u9875 8 \u4e2d\u7684\u952e\u503c\u76f8\u6bd4\u8f83 , \u53d1\u73b0\u6709\u5339\u914d\u7684\u952e\u503c 28 , \u952e\u503c 28 \u5bf9\u5e94\u7684\u7528\u6237\u4fe1\u606f\u4e3a ( 28 , bv ) \u63d0\u4e00\u4e2a\u70b9: \u6839\u8282\u70b9\u4e00\u822c\u662f\u5e38\u9a7b\u5185\u5b58\u7684 ,\u6240\u4ee5\u8bfb\u53d6\u6839\u8282\u70b9\u7684\u90a3\u4e00\u6b21IO\u5c31\u4e0d\u7528\u8fdb\u884c\u4e86. \u4e8c\u53c9\u6811\u7684\u7ed3\u6784\u53ef\u80fd\u5c31\u662f\u5355\u7eaf\u7684\u4e00\u6839\u659c\u7740\u7684\u68cd,\u6811\u7684\u9ad8\u5ea6\u4e0d\u591f\u4f4e...\u6240\u4ee5\u6709\u4e86\u5e73\u8861\u4e8c\u53c9\u6811,\u538b\u4f4e\u4e86\u9ad8\u5ea6.\u4f46\u8fd9\u9ad8\u5ea6\u5b9e\u5219\u4e0a\u4e5f\u4e0d\u591f\u4f4e,\u56e0\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u53ea\u653e\u4e00\u6761\u8bb0\u5f55.\u5728\u6d77\u91cf\u6570\u636e\u9762\u524d,\u4e3a\u4e86\u8ba9\u6811\u7684\u9ad8\u5ea6\u66f4\u4f4e,\u5c31\u6709\u4e86B\u6811,\u6bcf\u4e2a\u8282\u70b9\u5b58\u653e\u591a\u4e2akey-value ... \u9ad8\u5ea6\u8fd8\u80fd\u4e0d\u80fd\u66f4\u4f4e\uff1f \u4e00\u9875(\u4e00\u8282\u70b9)\u5927\u5c0f\u6700\u5927\u662f16k,\u91cc\u9762\u6709\u591a\u6761\u6570\u636e,\u6bcf\u6761\u6570\u636e\u7531key\u548cvalue\u7ec4\u6210\u3002\u5927\u80c6\u70b9\u60f3, \u82e5\u53ea\u8981key\u4e0d\u8981value,\u4e00\u9875\u662f\u4e0d\u662f\u5c31\u80fd\u653e\u66f4\u591a\u6761\u6570\u636e, \u8fdb\u4e00\u6b65\u538b\u4f4e\u9ad8\u5ea6? \u5047\u8bbe\u67e5\u627e\u5230\u6570\u636e\u7ecf\u5386\u4e86\u4e09\u6b21 IO,\u524d\u4e24\u6b21 IO \u5176\u5b9e\u4ece\u78c1\u76d8\u8bfb\u53d6\u4e86\u4e0d\u5fc5\u8981\u7684\u6570\u636e,\u56e0\u4e3a\u53ea\u7528\u6bd4\u8f83 KEY,\u6240\u4ee5\u975e\u53f6\u5b50\u8282\u70b9\u5bf9\u5e94\u7684 DATA \u5b8c\u5168\u6ca1\u6709\u5fc5\u8981,\u5982\u679c DATA \u5f88\u5927,\u90a3\u5b8c\u5168\u662f\u6d6a\u8d39\u5185\u5b58\u8d44\u6e90\u3002\u8003\u8651\u4e0b\u80fd\u5426\u628a\u975e\u53f6\u5b50\u8282\u70b9\u7684 DATA \u62ff\u6389\uff1f \u7b54\u6848\u662f\u80af\u5b9a\u7684,\u8fd9\u5c31\u5f15\u51fa\u4e86B+\u6811\uff01 \u987a\u5e26\u63d0\u4e00\u5634, B\u6811\u7684\u6784\u9020\u662f\u6709\u4e00\u4e9b\u89c4\u5b9a\u7684, \u4f46\u8fd9\u4e0d\u662f\u8fd9\u91cc\u7684\u5173\u6ce8\u70b9 \u7565. B\u6811\u4e5f\u662f\u5e73\u8861\u7684,\u5f53\u589e\u52a0\u6216\u5220\u9664\u6570\u636e\u800c\u5bfc\u81f4B\u6811\u4e0d\u5e73\u8861\u65f6, \u4e5f\u662f\u9700\u8981\u8fdb\u884c\u8282\u70b9\u8c03\u6574\u7684\u3002","title":"B\u6811"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#b_3","text":"\u6ce8\u610f\u554a \u98751(1) - \u98752(1) - \u98755(1) \u9ad8\u5ea6\u66f4\u4f4e : <\u7528\u7a7a\u95f4\u6362\u65f6\u95f4> 'non-leaf node'\u7d22\u5f15\u7ed3\u6784; leaf node\u771f\u6b63\u7684\u6570\u636e (\u975e\u53f6\u5b50\u8282\u70b9\u548c\u53f6\u5b50\u8282\u70b9\u628akey\u7d22\u5f15\u503c\u4e0d\u6b62\u5b58\u4e861\u904d...1.5\uff1fHhhh) \u76f8\u8f83\u4e8eB\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u5b58\u50a8\u952e\u503c\u548c\u6570\u636e\u3002B+\u6811\u975e\u53f6\u5b50\u8282\u70b9\u4e0a\u662f\u4e0d\u5b58\u50a8\u6570\u636e\u7684, \u4ec5\u5b58\u50a8\u952e\u503c, \u4e4b\u6240\u4ee5\u8fd9\u4e48\u505a\u662f\u56e0\u4e3a\u5728\u6570\u636e\u5e93\u4e2d\u9875\u7684\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0cinnodb\u4e2d\u9875\u7684\u9ed8\u8ba4\u5927\u5c0f\u662f16KB\u3002 \u5982\u679c\u4e0d\u5b58\u50a8\u6570\u636e\uff0c\u90a3\u4e48\u975e\u53f6\u5b50\u8282\u70b9\u7684\u78c1\u76d8\u5757\u5c31\u80fd\u5bb9\u7eb3\u66f4\u591a\u7684key\u503c, \u76f8\u5e94\u7684\u6811\u7684\u9636\u6570(\u8282\u70b9\u7684\u5b50\u8282\u70b9\u6811)\u5c31\u4f1a\u66f4\u5927'\u5f15\u51fa\u6765\u7684\u7bad\u5934\u5c31\u66f4\u591a\u4e86' , \u6811\u5c31\u4f1a\u66f4\u77ee\u66f4\u80d6, \u88ab\u538b\u6241\u4e86\u3002\u5982\u6b64\u4e00\u6765\u6211\u4eec\u67e5\u627e\u6570\u636e\u8fdb\u884c\u78c1\u76d8\u7684IO\u6b21\u6570\u6709\u4f1a\u518d\u6b21\u51cf\u5c11\uff0c\u6570\u636e\u67e5\u8be2\u7684\u6548\u7387\u4e5f\u4f1a\u66f4\u5feb\u3002 !!!!\u4e00\u9897B+\u6811\u80fd\u5b58\u50a8\u5343\u4e07\u6761\u7ea7\u522b\u7684\u6570\u636e.. \u63a8\u7406\u5982\u4e0b: \u5148\u8981\u6653\u5f97\uff01\u6570\u636e\u662f\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u7684\uff01\uff01\uff01\u975e\u53f6\u5b50\u8282\u70b9\u662f\u7d22\u5f15\u7ed3\u6784\uff01\uff01\u6240\u4ee5\u80fd\u5b58\u591a\u5c11\u6761\u6570\u636e\u662f\u770b\u53f6\u5b50\u8282\u70b9 . \u82e5\u4e00\u6761\u8bb0\u5f55\u5927\u5c0f\u4e3a 1 k , \u90a3\u4e48\u53f6\u5b50\u8282\u70b9\u4e0a\u7406\u8bba\u4e0a\u53ef\u4ee5\u653e 16 \u6761\u6570\u636e . \u975e\u53f6\u5b50\u8282\u70b9\u5b58\u653e\u7684 key\u503c\u548c\u6307\u9488 , \u5047\u8bbe\u4e3b\u952e ID\u4e3abigint\u7c7b\u578b8\u5b57\u8282 , \u6307\u9488\u5927\u5c0f\u5728 innodb\u6e90\u7801\u91cc\u9762\u8bbe\u7f6e\u662f6\u5b57\u8282 . \u90a3\u4e48\u4e00\u7ec4 key + \u6307\u9488\u5c31\u662f 14 \u5b57\u8282 , 16 k = 16 * 1024 = 16384 B , \u5219\u975e\u53f6\u5b50\u8282\u70b9\u6700\u591a\u80fd\u653e 16384 / 14 \u2248 1170 \u6761\u6570\u636e . \u82e5\u6811\u7684\u9ad8\u5ea6\u4e3a 2 , \u5219\u6839\u8282\u70b9\u7684\u6bcf\u4e2a\u6307\u9488\u6307\u5411\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9 , \u5219\u6709 1170 \u4e2a\u53f6\u5b50\u8282\u70b9 , \u4e00\u5171\u80fd\u5b58 1170 * 16 = 16384 \u6761\u6570\u636e . \u82e5\u6811\u7684\u9ad8\u5ea6\u4e3a 3 , \u5219\u4e00\u5171\u80fd\u5b58 1170 * 1170 * 16 = 21902400 \u6761\u6570\u636e . \u5343\u4e07\u7ea7\u522b . \u82e5 id\u4e3aint\u7c7b\u578b \u4e8c\u5343\u4e07\u5c31\u80fd\u53d8\u6210\u56db\u5343\u4e07 . \u9006\u63a8\u9a8c\u8bc1 : \u5047\u8bbe\u6570\u636e\u4ece 1 \u5230 21902400 \u987a\u5e8f\u5b58\u50a8 . 16 \u4e2a\u6570\u636e\u4e3a\u4e00\u7ec4 , \u5c31\u6709 1170 * 1170 \u4e2a\u53f6\u5b50\u8282\u70b9 ; \u6bcf 1170 \u4e2a\u53f6\u5b50\u8282\u70b9\u4e3a\u4e00\u7ec4\u5bf9\u5e94\u7b2c\u4e8c\u5c42\u8272\u6811\u679d\u8282\u70b9 ( \u53cd\u8fc7\u6765 , \u6bcf\u4e2a\u6811\u679d\u8282\u70b9\u91cc\u6709 1170 \u4e2a\u6307\u9488 ), \u5219\u6709 1170 \u4e2a\u6811\u679d\u8282\u70b9 . \u6700\u4e0a\u5c42\u7684\u6839\u8282\u70b9\u6709 1170 \u4e2a\u6307\u9488\u6307\u5411\u8fd9\u4e9b\u6811\u679d\u8282\u70b9 . \u6392\u5e8f\u67e5\u627e\u7b49\u66f4\u5feb \uff1a \u4ed4\u7ec6\u770b, 1> B+\u6811\u7d22\u5f15\u7684\u6240\u6709\u6570\u636e\u5747\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9, \u5b83\u9ed8\u8ba4\u5e2e\u5fd9\u6392\u597d\u5e8f,\u662f\u6709\u5e8f\u6392\u5217\u7684\uff01(B\u6811\u7684\u6570\u636e\u662f\u5206\u6563\u5728\u5404\u4e2a\u8282\u70b9\u7684) 2> \u53f6\u5b50\u8282\u70b9\u4e4b\u95f4\u4e5f\u6709\u6307\u9488\u6307\u5411\uff01 \u8fd9\u4f7f\u5f97B+\u6811\u8303\u56f4\u67e5\u627e\u3001\u6392\u5e8f\u67e5\u627e\u3001\u5206\u7ec4\u67e5\u627e\u4ee5\u53ca\u53bb\u91cd\u67e5\u627e\u53d8\u5f97\u5f02\u5e38\u7b80\u5355. B+\u6811\u7b49\u503c\u67e5\u8be2\u4e5f\u5feb,B\u6811\u4e5f\u5feb,\u7b49\u503c\u67e5\u8be2\u4e0d\u662fB+\u6811\u72ec\u7279\u7684\u4f18\u52bf,\u90a3B+\u8303\u56f4\u67e5\u8be2\u4e3a\u5565\u5feb\u5462\uff1f \u8303\u56f4\u67e5\u8be2\u9501\u5b9a\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9(\u53cc\u5411\u94fe\u8868)\u540e,\u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u7684\u6307\u5411\u5f80\u540e\u627e,\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u56de\u5934\u518d\u4e00\u6b21\u4ece\u6839\u8282\u70b9\u67e5\u627e. select * from user where id > 9 and id < 20 ; -- \u4f9d\u6b21\u627eid=10\u7684,id=11\u7684\u76f4\u5230id=20. B + \u6811 : \u9875 1 ( P1 '1<10<18' ) ==> \u9875 2 ( P2 '8<10<14' ) ==> \u9875 6 ( \u627e\u5230 10 ) ==> \u9875 7 ==> \u9875 8 \u8303\u56f4\u67e5\u8be2\u9501\u5b9a\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9 ( \u53cc\u5411\u94fe\u8868 ) \u540e , \u901a\u8fc7\u53f6\u5b50\u8282\u70b9\u7684\u6307\u5411\u5f80\u540e\u627e , \u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u56de\u5934\u4ece\u6839\u8282\u70b9\u67e5\u627e . B\u6811 : \u53f6\u5b50\u8282\u70b9\u6ca1\u6709\u4e92\u76f8\u7684\u6307\u5411 , \u800c\u4e14\u6570\u636e\u662f\u5206\u6563\u7684 , \u6bcf\u6b21\u90fd\u9700\u8981\u4ece\u6839\u8282\u70b9\u91cd\u65b0\u5f00\u59cb\u67e5\u8be2 . \u4e0b\u56fe\u662fsql\u8bed\u53e5 select * from user where id>=18 and id <40 \u7684\u67e5\u8be2\u8fc7\u7a0b. \u8865\u5145\uff1aname\u5b57\u6bb5\u80fd\u505a\u7d22\u5f15\u5417\uff1f \u80fd\uff01\u56e0\u4e3a\u5b57\u7b26\u7c7b\u578b\u7684\u6570\u636e\u4e5f\u80fd\u6bd4\u5927\u5c0f.\u6839\u636e\u5b57\u7b26\u5bf9\u5e94\u4f4d\u7f6e\u7684ACSII\u7801\u8fdb\u884c\u6bd4\u8f83\uff01eg 'abc' < 'az'","title":"B+\u6811"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#4-9","text":"","title":"\u7b2c4-9\u95ee\u9898\u7684\u89e3\u7b54\u5982\u4e0b:"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#b_4","text":"\u6ce8\u610f\uff1a\u4e00\u5f20innodb\u5b58\u50a8\u5f15\u64ce\u8868\u4e2d\u5fc5\u987b\u8981\u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15.\u4f46\u662f\u53ef\u4ee5\u6709\u591a\u4e2a\u8f85\u52a9\u7d22\u5f15. \u805a\u96c6\u7d22\u5f15 \u2018\u4e00\u4e2a\u2019 \u4e0e\u8f85\u52a9\u7d22\u5f15 \u2018\u591a\u4e2a\u2019 \u6bd4\u8f83\uff1a \u76f8\u540c\u70b9 --- B+\u6811\u7ed3\u6784,\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u653ekey,\u53f6\u5b50\u8282\u70b9\u90fd\u653ekey+value \u4e0d\u540c\u70b9 --- \u524d\u8005\u7684key\u662f\u4e3b\u952e , \u540e\u8005\u7684key\u662f\u975e\u4e3b\u952e\u5b57\u6bb5 \u524d\u8005\u7684value\u662f\u4e00\u6574\u884c\u5b8c\u6574\u7684\u8bb0\u5f55 , \u540e\u8005\u7684value\u662f\u5176\u5bf9\u5e94\u7684\u4e3b\u952e\u5b57\u6bb5\u7684\u503c","title":"\u516b. B+\u6811\u7d22\u5f15\u7684\u5206\u7c7b"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_8","text":"\u901a\u5e38\u4e3b\u952e\u9009\u62e9\u5b57\u6bb5id, \u56e0\u4e3aid\u5b57\u6bb5\u5360\u7684\u7a7a\u95f4\u5c0f\u5e76\u4e14\u91cd\u590d\u5ea6\u4e0d\u9ad8(\u4e00\u822c\u8bbe\u7f6eid\u81ea\u52a8\u589e\u957f \u4fbf\u4e8e\u6bd4\u5927\u5c0f).\u4ee5\u6b64\u6784\u5efa\u51fa\u6765\u7684\u6811\u7684\u9ad8\u5ea6\u4f1a\u975e\u5e38\u77ee. \u805a\u96c6\u7d22\u5f15: \u4ee5 \u4e3b\u952e\u5b57\u6bb5\u4e3akey \u6784\u5efa\u7684B+\u6811, \u8be5B+\u6811\u7684\u975e\u53f6\u5b50\u8282\u70b9\u4ee5key\u503c\u6784\u5efa\u7d22\u5f15\u6811,\u53f6\u5b50\u8282\u70b9\u653e\u7684\u662f\u4e3b\u952e\u503c\u4e0e\u672c\u884c\u5b8c\u6574\u7684\u8bb0\u5f55\u3002\u8868\u4e2d\u7684\u6570\u636e\u90fd\u805a\u96c6\u5728\u53f6\u5b50\u8282\u70b9. \u8865\u5145: \u4ee5innodb\u5f15\u64ce\u521b\u5efa\u7684\u8868(\u7d22\u5f15\u7ec4\u7ec7\u8868)\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u4e3b\u952e. \u82e5\u6ca1\u6709\u6307\u5b9a\u4e3b\u952e,\u4f1a\u81ea\u52a8\u4f7f\u7528\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u7684\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\u5b57\u6bb5,\u5982\u679c\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684,Innodb\u5f15\u64ce\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u9690\u85cf\u7684\u5b57\u6bb5\u4f5c\u4e3a\u4e3b\u952e\u5b57\u6bb5.(\u82e5\u662f\u9690\u85cf\u5b57\u6bb5\u505a\u7684\u4e3b\u952e\u7684\u8bdd \u6b64\u4e3b\u952e\u5c31\u4e0d\u5177\u5907\u52a0\u901f\u6548\u679c\u4e86)","title":"\u805a\u96c6\u7d22\u5f15(\u805a\u7c07\u7d22\u5f15\uff5c\u4e3b\u952e\u7d22\u5f15)\uff1a"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_9","text":"\u4ee5 \u975e\u4e3b\u952e\u5b57\u6bb5\u4e3akey \u6784\u5efa\u7684B+\u6811, \u8be5B+\u6811\u7684 \u53f6\u5b50\u8282\u70b9 \u653e\u7684\u662f key\u503c\u548c\u4e0e\u5176\u5bf9\u5e94\u7684\u4e3b\u952e\u5b57\u6bb5\u503c .","title":"\u975e\u805a\u96c6\u7d22\u5f15(\u975e\u805a\u7c07\u7d22\u5f15\uff5c\u8f85\u52a9\u7d22\u5f15\uff5c\u4e8c\u7ea7\u7d22\u5f15)"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_10","text":"\u5047\u8bbe \u4e3b\u952e\u7d22\u5f15 -- id\u5b57\u6bb5; \u8f85\u52a9\u7d22\u5f15 -- name\u5b57\u6bb5. \u547d\u4e2d\u4e3b\u952e\u7d22\u5f15\u80af\u5b9a\u8986\u76d6\u4e86\u7d22\u5f15 \u547d\u4e2d\u8f85\u52a9\u7d22\u5f15\u8981\u770b\u6307\u5b9a\u5217\u662f\u5426\u53ea\u6709\u8f85\u52a9\u7d22\u5f15\u5b57\u6bb5\u548c\u4e3b\u952e\u5b57\u6bb5. \u662f \u8986\u76d6\u4e86\u7d22\u5f15; \u5426 \u56de\u8868\u64cd\u4f5c.","title":"\u4e5d. \u8986\u76d6\u4e86\u7d22\u5f15\u3001\u56de\u8868\u64cd\u4f5c"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_11","text":"\u5728\u547d\u4e2d\u7d22\u5f15\u7684\u57fa\u7840\u4e0a, \u53ea\u5728\u672c\u7d22\u5f15\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5c31\u627e\u5230\u4e86\u6211\u4eec\u60f3\u8981\u7684\u6570\u636e. \u547d\u4e2d\u8f85\u52a9\u7d22\u5f15 select id,name from user where name='egon'; \u547d\u4e2d\u4e3b\u952e\u7d22\u5f15 select name,age,gender from user where id=3;","title":"\u8986\u76d6\u4e86\u7d22\u5f15: "},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_12","text":"select name,age,gender from user where name='egon'; (\u547d\u4e2d\u8f85\u52a9\u7d22\u5f15) \u975e\u805a\u96c6\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8\u8868\u4e2d\u7684\u6570\u636e,\u800c\u662f\u5b58\u50a8\u8be5\u5217\u5bf9\u5e94\u7684\u4e3b\u952e,\u60f3\u8981\u67e5\u627e\u6570\u636e\u6211\u4eec\u8fd8\u9700\u8981\u6839\u636e\u4e3b\u952e\u518d\u53bb\u805a\u96c6\u7d22\u5f15\u4e2d\u67e5\u627e, \u8fd9\u4e2a\u518d\u6839\u636e\u805a\u96c6\u7d22\u5f15\u67e5\u627e\u6570\u636e\u7684\u8fc7\u7a0b, \u6211\u4eec\u79f0\u4e3a\u56de\u8868. \u7b80\u5355\u6765\u8bf4, \u5728\u547d\u4e2d\u8f85\u52a9\u7d22\u5f15\u7684\u57fa\u7840\u4e0a,\u5728\u8f85\u52a9\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5e76\u6ca1\u6709\u627e\u5230\u60f3\u8981\u7684\u6570\u636e,\u9700\u8981\u62ff\u7740\u5bf9\u5e94\u7684\u4e3b\u952e\u5b57\u6bb5\u53bb\u805a\u96c6\u7d22\u5f15\u91cc\u518d\u627e\u4e00\u4e0b. eg: \u6811\u7684\u9ad8\u5ea6\u662f3 \u90a3\u4e48IO\u6700\u5927\u53ef\u80fd\u662f6\u6b21\uff01","title":"\u56de\u8868\u64cd\u4f5c"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_13","text":"\u589e\u52a0\u5220\u9664\u4e3b\u952e PRI\u3001\u552f\u4e00UNL\u3001\u666e\u901a\u7d22\u5f15MUL \u9002\u7528\u573a\u666f unique \u9700\u6c42\u8868\u660e\u67d0\u4e00\u5217\u4e0d\u80fd\u91cd\u590d eg:\u624b\u673a\u53f7\u90ae\u7bb1\u4e0d\u80fd\u91cd\u590d \u60f3\u8ba9\u4e24\u4e2a\u5217\u52a0\u8d77\u6765\u662f\u552f\u4e00\u7684,\u90a3\u4e48\u5c31\u521b\u5efa\u591a\u5217\u8054\u5408\u552f\u4e00\u7d22\u5f15. eg: \u535a\u5ba2\u7cfb\u7edf\u4e2d\u7684up_down\u63a8\u8350\u8868. \u90a3\u4e48user_id\u548carticle_id\u5c31\u9002\u5408\u505a\u4e00\u4e2a\u8054\u5408\u552f\u4e00\u7d22\u5f15. \u8981\u4e48\u8d5e\u8981\u4e48\u8e29. index \u4e00\u4e9b\u5217\u53ef\u80fd\u91cd\u590d,\u6bd4\u5982 \u6635\u79f0. \u60f3\u901a\u8fc7\u6635\u79f0\u8fdb\u884c\u641c\u7d22.\u52a0\u5feb\u5b83\u7684\u901f\u5ea6\u90a3\u5c31\u505a\u666e\u901a\u7d22\u5f15. \u60f3\u8981\u51e0\u4e2a\u8981\u4e00\u8d77\u53bb\u641c\u7d22\u7684\u65f6\u5019.\u5c31\u7528\u666e\u901a\u8054\u5408\u7d22\u5f15. eg: select * from info where user ='**' and pwd ='**'","title":"\u5341. \u7d22\u5f15\u7ba1\u7406"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_14","text":"\u5728\u8868\u4e2d\u5df2\u7ecf\u6709\u5927\u91cf\u6570\u636e\u7684\u60c5\u51b5\u4e0b,\u4e3a\u67d0\u4e2a\u5b57\u6bb5\u5efa\u7d22\u5f15\u4f1a\u5f88\u6162,\u4e14\u5360\u7528\u786c\u76d8\u7a7a\u95f4,\u5efa\u5b8c\u540e\u67e5\u8be2\u901f\u5ea6\u52a0\u5feb. \u767e\u4e07\u884c\u7ea7\u522b\u7684\u6570\u636e\u5927\u6982\u9700\u89818,9\u79d2...\u751a\u81f3\u66f4\u4e45. create index idx on s1(id); \u5efa\u7d22\u5f15\u65f6\u4f1a\u6253\u4e71,\u6240\u4ee5\u5efa\u7684\u8fc7\u7a0b\u4e2d\u522b\u67e5\uff1f\uff1f \u5b83\u4f1a\u626b\u63cf\u8868\u4e2d\u6240\u6709\u7684\u6570\u636e,\u7136\u540e\u4ee5id\u4e3a\u6570\u636e\u9879,\u521b\u5efa\u7d22\u5f15\u7ed3\u6784,\u5b58\u653e\u4e8e\u786c\u76d8\u7684\u8868\u4e2d. \u6570\u636e\u91cf\u5927\u5efa\u7d22\u5f15\u5feb\u4e0d\u4e86.. \u9898\u5916\u8bdd: \u82e5\u52a0\u7d22\u5f15\u7684\u5b57\u6bb5\u662fsex\u5b57\u6bb5, \u54ea\u6015\u547d\u4e2d\u7d22\u5f15\u67e5\u8be2\u4e5f\u5feb\u4e0d\u4e86.\u5b9e\u9645\u4e0asex\u5b57\u6bb5\u52a0\u4e86\u7d22\u5f15\u8ddf\u6ca1\u52a0\u4e00\u6837. select count(1) from t1 where sex='\u7537'; \u53ef\u4ee5\u53c2\u8003\u6267\u884c\u8ba1\u5212 expain \u6ce8\u610f: \u5220\u9664\u7d22\u5f15\u540eibd\u6587\u4ef6\u7684\u5927\u5c0f\u5e76\u4e0d\u4f1a\u51cf\u5c0f.\u56e0\u4e3amysql\u73b0\u76ee\u524d\u6e05\u7406\u4e0d\u6389\u91cc\u9762\u7684\u4e1c\u897f.Hhhh. \u5efa\u7d22\u5f15\u65f6\u614e\u91cd \uff01\uff01\uff01 \u53ea\u6709\u51e0\u4e2a\u5b57\u6bb5\u7684300\u4e07\u6761\u6570\u636e. 192M. \u5efa\u5b8cid\u7d22\u5f15\u540e. ibd\u6587\u4ef6\u4f1a\u53d8\u5927,\u5927\u6982250M.","title":"\u5341\u4e00. \u7d22\u5f15\u5b9e\u9a8c"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_15","text":"\u6b63\u786e\u4f7f\u7528\u7d22\u5f15 \u5373\u4f7f\u547d\u4e2d\u7d22\u5f15\u63d0\u901f\u4e5f\u4e0d\u660e\u663e.. explain <sql\u8bed\u53e5> \u7ed3\u679c \u770bkey\u6709\u65e0\u547d\u4e2d\u7d22\u5f15 \u770brows\u884c\u6570","title":"\u5341\u4e8c. \u6b63\u786e\u4f7f\u7528\u7d22\u5f15"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_16","text":"1> \u4ee5\u4ec0\u4e48\u5b57\u6bb5\u7684\u503c\u4e3a\u57fa\u7840\u6784\u5efa\u7d22\u5f15? \u6700\u597d\u662f\u4e0d\u4e3a\u7a7a\u4e14\u552f\u4e00\u5360\u7528\u7a7a\u95f4\u5c0f\u7684\u5b57\u6bb5","title":"\u6784\u5efa\u57fa\u7840"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_17","text":"2> \u9488\u5bf9\u5168\u8868\u67e5\u8be2\u8bed\u53e5\u5982\u4f55\u4f18\u5316\uff1f select count(id) from s1; \u5e94\u7528\u573a\u666f: \u7528\u6237\u60f3\u8981\u6d4f\u89c8\u6240\u6709\u7684\u5546\u54c1\u4fe1\u606f \u4f18\u5316\u65b9\u6848: \u5f00\u53d1\u5c42\u9762\u5206\u9875\u67e5\u627e, \u4e0d\u4e00\u6b21\u6027\u5c55\u73b0\u7ed9\u7528\u6237; \u7f13\u5b58.","title":"\u5168\u8868\u67e5\u8be2"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_18","text":"3> \u9488\u5bf9\u7b49\u503c\u67e5\u8be2 select count(id) from s1 where id = 33; \u4ee5\u91cd\u590d\u5ea6\u4f4e\u7684\u67e5\u8be2\u5b57\u6bb5\u4e3a\u57fa\u7840\u521b\u5efa\u7d22\u5f15\u624d\u80fd\u52a0\u901f\u67e5\u8be2\uff01\uff01\u7ed9\u91cd\u590d\u5ea6\u9ad8\u7684\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\u662f\u6ca1\u6709\u610f\u4e49\u7684! \u4ee5\u5360\u7528\u7a7a\u95f4\u5927\u7684\u5b57\u6bb5\u4e3a\u57fa\u7840\u521b\u5efa\u7d22\u5f15\u52a0\u901f\u6548\u679c\u4e0d\u660e\u663e. select count ( id ) from s1 where name = 'egon' ; -- 300\u4e07\u6761\u6570\u636e\u7684name\u5168\u662fegon. -- \u6267\u884c\u4e0a\u65b9\u8bed\u53e5 \u5168\u8868\u626b\u63cf 1.32s -- \u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00 \u4e3aname\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15 5.13s create index idx_name on s1 ( name ); -- \u518d\u6267\u884c\u7b2c\u4e00\u6761sql\u8bed\u53e5 28.45s (\u00b4\u25bd\uff40)\u53d8\u5f97\u5f88\u6162\u4e86\u8036 \u867d\u7136\u547d\u4e2d\u7d22\u5f15\u4f46\u4e0e\u5168\u8868\u626b\u63cf\u76f8\u6bd4\u53cd\u800c\u53d8\u6162\u4e86\u5f88\u591a\u5f88\u591a -- \u56e0\u4e3a\u4ee5name\u521b\u5efa\u7684\u6811 \u5b83\u7684key\u5168\u662fegon. \u5206\u4e0d\u6e05\u8c01\u5927\u8c01\u5c0f,\u5c31\u662f\u4e00\u6839\u68cd.. -- \u8fd9\u5bfc\u81f4\u4e86\u4e2a\u5f88\u6709\u8da3\u7684\u73b0\u8c61 \u6ca1\u6709\u7684\u77ac\u95f4\u5224\u65ad\u51fa\u6765 select count ( id ) from s1 where name != 'egon' ; -- 0.00s \u77ac\u95f4\u5224\u65ad\u51fa\u6765\u4e86. select count ( id ) from s1 where name != 'xxxx' ; -- 0.00s \u77ac\u95f4\u5224\u65ad\u51fa\u6765\u4e86. \u603b\u7ed3: \u7b49\u503c\u67e5\u8be2\u7684\u4f18\u5316 \u5e94\u8be5\u7ed9\u91cd\u590d\u5ea6\u4f4e\u4e14\u5360\u7528\u7a7a\u95f4\u5c0f\u7684\u5b57\u6bb5\u503c\u4e3a\u57fa\u7840\u521b\u5efa\u7d22\u5f15.","title":"\u7b49\u503c\u67e5\u8be2"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_19","text":"4> \u5173\u4e8e\u8303\u56f4\u67e5\u8be2 -- > >= < <= != between and like create index idx_id on s1 ( id ); select count ( id ) form s1 where id > 33 ; -- \u54ea\u6015\u547d\u4e2d\u4e86\u7d22\u5f15,\u4e5f\u76f8\u5f53\u4e8e\u5bf9300\u4e07\u6761\u6570\u636e\u5168\u8868\u626b\u63cf\u4e86 select count ( id ) from s1 where id > 33 and id < 10000 ; /* id != 33; -- \u6162 \u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8303\u56f4 between 1 and 3; -- \u5feb \u8303\u56f4\u5c0f between 1 and 300000; -- \u6162 \u8303\u56f4\u5927 */ /*\u7ed9email\u52a0\u7d22\u5f15\u540e \u7b49\u503c\u67e5\u8be2\u53d8\u5feb email like 'xxxx'; -- \u5feb like\u6307\u5b9a\u7684\u662f\u4e00\u4e2a\u660e\u786e\u7684\u503c email like 'egon3%'; -- \u82e5\u4ee5egon3\u5f00\u5934\u7684\u6570\u636e\u5f88\u591a \u5c31\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8303\u56f4,\u6162 \u53cd\u4e4b\u76f8\u53cd email like '%xxxx'; -- \u6162 -- %\u5c3d\u91cf\u53f3\u8fb9 \u5c3d\u91cf\u5c06\u6a21\u7cca\u67e5\u8be2\u7684\u6761\u4ef6\u5199\u5f97\u5b8c\u5584\u4e9b */ \u603b\u7ed3: innodb\u5b58\u50a8\u80fd\u52a0\u901f\u8303\u56f4\u67e5\u8be2,\u4f46\u662f\u67e5\u8be2\u8303\u56f4\u4e0d\u80fd\u592a\u5927. like \u540e\u7684\u5185\u5bb9%\u5e94\u8be5\u5f80\u53f3\u653e,\u5e76\u4e14\u5de6\u534a\u90e8\u5206\u7684\u5185\u5bb9\u5e94\u8be5\u5c3d\u91cf\u7cbe\u786e","title":"\u8303\u56f4\u67e5\u8be2"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_20","text":"5> \u6761\u4ef6\u5b57\u6bb5\u53c2\u4e0e\u8fd0\u7b97 create index idx_mouth_salary on s1 ( mouth_salary ); -- \u67e5\u8be2\u5e74\u85aa\u4e3a10000\u7684\u5458\u5de5 select count ( id ) from s1 where mouth_salary * 12 = 10000 ; -- \u7d22\u5f15\u5b57\u6bb5id\u53c2\u4e0e\u4e86\u8ba1\u7b97 \u6bcf\u6b21\u90fd\u6709\u56db\u5219\u8fd0\u7b97\u4e0b select count ( id ) from s1 where mouth_salary = 10000 / 12 ; -- \u4f18\u5316 \u603b\u7ed3: \u4e0d\u8981\u8ba9\u6761\u4ef6\u5b57\u6bb5\u53c2\u4e0e\u8fd0\u7b97,\u4e5f\u4e0d\u8981\u4f20\u9012\u7ed9\u67d0\u4e00\u4e2a\u51fd\u6570 \u4fdd\u6301\u5b57\u6bb5\u662f\u5e72\u51c0\u7684..","title":"\u5b57\u6bb5\u8fd0\u7b97"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_21","text":"\u9690\u5f0f\u8f6c\u6362\u95ee\u9898: id = 1 id=\u201c1\u201d \u5c3d\u91cf\u907f\u514d\u4f7f\u7528select * \u56e0\u4e3a\u53ef\u80fd\u4f1a\u51fa\u73b0\u56de\u8868\u64cd\u4f5c \u5efa\u8868\u65f6\u5c3d\u53ef\u80fd\u628a\u5360\u7528\u7a7a\u95f4\u5c0f\u7684\u5f80\u524d\u653e \u8fd9\u8ddf\u5e95\u5c42\u6709\u5173 \u5efa\u8bae\u7528\u8fde\u63a5(join) \u6765\u4ee3\u66ff \u5b50\u67e5\u8be2 \u8986\u76d6\u4e86\u7d22\u5f15 \u6162\u67e5\u8be2\u65e5\u5fd7","title":"\u5176\u5b83"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_22","text":"mysql\u5185\u90e8\u4f18\u5316\u5668\u7684\u4e00\u79cd\u673a\u5236.\u5b83\u4f1a\u5206\u6790\u51fa\u591a\u79cd\u6267\u884c\u65b9\u6848.\u627e\u5230\u5176\u4e2d\u6700\u4f18\u7684\u65b9\u6848.","title":"\u5341\u4e09. \u7d22\u5f15\u4e0b\u63a8\u6280\u672f"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#and","text":"\u5bf9\u4e8e\u8fde\u7eed\u591a\u4e2aand\u7684\u6761\u4ef6, \u4f18\u5316\u5668\u4f1a\u5148\u627e\u51fa\u80fd\u628a\u8303\u56f4\u7f29\u5230\u6700\u5c0f\u7684\u67d0\u4e00\u4e2a\u6761\u4ef6'(\u4e00\u822c\u662f\u533a\u5206\u5ea6\u9ad8\u7684\u7d22\u5f15\u5b57\u6bb5)'. select count ( id ) from s1 where name = 'egon' and age = 18 and gender = 'male' ; /*\u6211\u4eec\u7684\u601d\u8def: -- \u62ff\u5230\u7b2c\u4e00\u6761\u8bb0\u5f55 \u4f9d\u6b21\u5224\u65adname\u3001age\u3001gender\u7684\u503c,\u82e5\u5224\u65ad\u9014\u4e2d\u51fa\u73b0false\u5c31\u4e2d\u65ad\u6b64\u6b21\u5224\u65ad \u518d\u62ff\u5230\u7b2c\u4e8c\u6761\u8bb0\u5f55 \u5982\u6cd5\u70ae\u5236.*/ /*\u4f18\u5316\u5668\u7684\u601d\u8def: and\u8fde\u63a5\u7684\u6761\u4ef6\u7684\u5730\u4f4d\u90fd\u662f\u4e00\u6837\u7684 \u8c01\u5148\u8c01\u540e\u5224\u65ad\u90fd\u4e0d\u8981\u7d27 \u65b9\u6848\u4e00: \u4ee5name\u5b57\u6bb5\u4e3a\u57fa\u7840,\u5148\u7b5b\u9009\u51faname='egon'\u7684\u8bb0\u5f55,\u7b5b\u51fa\u6765\u540e\u518d\u6328\u4e2a\u6bd4age\u548cgender. \u65b9\u6848\u4e8c: \u5148\u7b5b\u9009\u51faage='18'\u7684\u8bb0\u5f55,\u6bd4name\u548cgender \u65b9\u6848\u4e8c: \u5148\u7b5b\u9009\u51fagender='male'\u7684\u8bb0\u5f55,\u6bd4name\u548cage \u8981\u77e5\u9053\u54ea\u6015\u4ee5name\u4e3a\u57fa\u7840\u547d\u4e2d\u4e86\u4e00\u9897\u7d22\u5f15\u6811,\u4f46\u7b5b\u9009\u51fa\u7684\u8bb0\u5f55\u4e5f\u6709\u53ef\u80fd\u5f88\u591a. mysql\u4f1a\u5206\u6790\u8fd9\u4e9b\u65b9\u6848,\u770bexplain\u6267\u884c\u8ba1\u5212,\u770brow\u884c\u6570\u7b49\u53c2\u6570..\u6765\u51b3\u5b9a\u7528\u54ea\u4e2a. */ -- \u4e3e\u4f8b \u76f8\u4eb2,\u6bd4\u5982\u597d\u770b\u8fd9\u5c5e\u4e8e\u7a00\u6709\u5c5e\u6027,\u6211\u4eec\u4f1a\u62ff\u7740\u8fd9\u4e2a\u7a00\u6709\u5c5e\u6027\u5148\u7f29\u5c0f\u8303\u56f4,\u7136\u540e\u518d\u67e5 -- where \u5e74\u9f84=18 and \u8eab\u9ad8 = 170 and \u957f\u76f8 = \u597d\u770b","title":"\u8fde\u7eed\u591a\u4e2aand"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#or","text":"\u5bf9\u4e8e\u8fde\u7eed\u591a\u4e2aor\u7684\u6761\u4ef6 \u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u4f9d\u6b21\u7b97 \u53ea\u8981\u6709\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u6b64\u6761\u8bb0\u5f55\u5c31\u53ef\u4ee5\u653e\u884c. \u7d22\u5f15\u4e0b\u63a8\u6280\u672f\u5bf9\u6b64\u6ca1\u62db.. select count ( id ) from s1 where name = 'egon' or age = 18 or gender = 'male' ; -- or\u9501\u5b9a\u7684\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8303\u56f4.. \u7d22\u5f15\u4e0b\u63a8\u6ca1\u62db.. -- \u4e3e\u4f8b: \u751f\u4ea7\u6c7d\u8f66\u627e\u6b8b\u6b21\u54c1 \uff08\u9519\u7684\u601d\u8def- \u5148\u627e\u8f6e\u80ce\u574f\u7684 \u518d\u4ece\u8f6e\u80ce\u574f\u7684\u91cc\u9762\u627e\u65b9\u5411\u76d8\u574f\u7684\uff09\u8fd9\u79cd\u601d\u8def\u662f\u9519\u7684\uff01\uff01\uff01 -- where \u8f6e\u80ce\u574f\u4e86 or \u65b9\u5411\u76d8\u574f\u4e86 or \u5239\u8f66\u574f\u4e86;","title":"\u8fde\u7eed\u591a\u4e2aor"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_23","text":"\u8054\u5408\u7d22\u5f15\uff1a\u6307\u5bf9\u8868\u4e0a\u7684\u5404\u4e2a\u5217(\u591a\u4e2a\u5b57\u6bb5)\u5408\u8d77\u6765\u505a\u4e00\u4e2a\u7d22\u5f15 \u6700\u505a\u524d\u7f00\u5339\u914d\uff1a\u4ece\u8054\u5408\u7d22\u5f15\u7684\u6700\u5de6\u8fb9\u5f00\u59cb\u5339\u914d,\u4e00\u5b9a\u8981\u5e26\u6700\u5de6\u8fb9\u7684\u90a3\u4e2a\u5b57\u6bb5\uff01 \u91cd\u590d\u5ea6\u4f4e\u4e14\u5360\u7528\u7a7a\u95f4\u8f83\u5c0f\u7684\u5b57\u6bb5\u5e94\u8be5\u5c3d\u91cf\u5f80\u5de6\u653e. \u4ec0\u4e48\u65f6\u5019\u521b\u5efa\uff1a\u6761\u4ef6\u4e2d\u9700\u8981\u7528\u5230\u591a\u4e2a\u5b57\u6bb5,\u5e76\u4e14\u591a\u6b21\u67e5\u8be2\u4e2d\u7684\u591a\u4e2a\u5b57\u6bb5\u90fd\u5305\u542b\u67d0\u4e00\u4e2a\u5b57\u6bb5. \u5efa\u7acb\u8054\u5408\u7d22\u5f15\u540e\u5c31\u53ef\u4ee5\u4f18\u5316\u597d\u51e0\u79cd\u642d\u914d\u7684sql\u8bed\u53e5.. create index idx_id_name_gender on s1 ( id , name , age ); -- (1,egon1,18) < (2,egon2,28) \u4ece\u5de6\u5230\u53f3\u6bd4,1<2 \u5206\u80dc\u8d1f\u4e86,\u90a3\u540e\u9762\u7684\u90fd\u4e0d\u7528\u6bd4\u4e86 /* \u67e5\u8be2\u6761\u4ef6\u4e2d\u51fa\u73b0\u4e86(\u5fc5\u987b\u51fa\u73b0id),\u90a3\u4e48\u5c31\u547d\u4e2d\u4e86\u8fd9\u4e2a\u8054\u5408\u7d22\u5f15\uff01\uff01\uff01: id name age ; id name ; id age ; id \u82e5\u4ec5\u4ec5\u53ea\u662f\u51fa\u73b0\u4e86name,\u5219\u6ca1\u6709\u547d\u4e2d. */ -- \u8054\u5408\u7d22\u5f15\u662f\u4e00\u68f5\u6811 /* ... and\u8fde\u63a5\u591a\u4e2a\u6761\u4ef6*/ -- \u82e5\u7ed9\u5b57\u6bb5name\u3001email\u3001gender\u90fd\u52a0\u4e86\u7d22\u5f15 select count ( id ) from s1 where name = 'egon' and email = 18 and gender = 'male' ; -- \u7ed3\u5408\u7d22\u5f15\u4e0b\u63a8\u6280\u672f,\u4e0a\u65b9\u7684sql\u8bed\u53e5\u4f1a\u5f88\u5feb -- \u4ee5\u540e\u67e5\u8be2\u6761\u4ef6\u4e2d\u90fd\u8981\u5e26\u7740\u8fd9\u4e09name\u3001email\u3001gender \u4f46\u4e5f\u6ca1\u5fc5\u8981\u4e3a\u8fd9\u4e09\u4e2a\u5b57\u6bb5\u90fd\u5efa\u7acb\u7d22\u5f15 -- \u5efa\u4e00\u4e2a\u8054\u5408\u7d22\u5f15\u5c31\u884c \u7ed3\u5408\u8054\u5408\u7d22\u5f15\u5e94\u8be5\u628aemail\u5b57\u6bb5\u653e\u5230\u6700\u5de6\u7aef -- \u67e5\u770b\u8868\u7ed3\u6784 MUL\u4f1a\u51fa\u73b0\u5728email\u5b57\u6bb5\u90a3\u91cc create index idx_name on s1 ( email , name , gender ); -- where name='egon' and gender='male' and email=18; \u8fd9\u4e2a\u6700\u4f18\u5b57\u6bb5email\u653e\u54ea\u65e0\u6240\u8c13..\u7d22\u5f15\u4e0b\u63a8","title":"\u5341\u56db. \u8054\u5408\u7d22\u5f15\u4e0e\u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_24","text":"","title":"\u8865\u5145: \u672a\u547d\u4e2d\u7d22\u5f15"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_25","text":"-- name\u5b57\u6bb5\u662f\u5b57\u7b26\u7c7b\u578b \u800c\u67e5\u8be2\u65f6\u8d4b\u503c\u7684\u662f\u5176\u5b83\u7c7b\u578b select * from big where name = 123 ; -- \u672a\u547d\u4e2d select * from big where email = 123 ; -- \u672a\u547d\u4e2d -- \u82e5\u662f\u4e3b\u952e\u7d22\u5f15 \u54ea\u6015\u7c7b\u578b\u4e0d\u4e00\u81f4\u4e5f\u662f\u5f88\u5feb\u7684:id\u4e3b\u952e\u662f\u6574\u578b \u4f46\u8fd9\u91cc\u5199\u6210\u5b57\u7b26\u7c7b\u578b\u4e5f\u6ca1\u5173\u7cfb select * from big where id = \"123\" ; -- \u547d\u4e2d","title":"\u7c7b\u578b\u4e0d\u4e00\u81f4"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_26","text":"select * from big where name != \"\u6b66\u6c9b\u9f50\" ; -- \u672a\u547d\u4e2d select * from big where email != \"wupeiqi@live.com\" ; -- \u672a\u547d\u4e2d -- \u7279\u6b8a\u7684\u4e3b\u952e\uff1a select * from big where id != 123 ; -- \u547d\u4e2d","title":"\u4f7f\u7528\u4e0d\u7b49\u4e8e"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#or_1","text":"\u5f53or\u6761\u4ef6\u4e2d\u6709\u672a\u5efa\u7acb\u7d22\u5f15\u7684\u5217\u624d\u5931\u6548 -- id\u5efa\u4e86\u7d22\u5f15 password\u6ca1\u6709 select * from big where id = 123 or password = \"xx\" ; -- \u672a\u547d\u4e2d select * from big where name = \"wupeiqi\" or password = \"xx\" ; -- \u672a\u547d\u4e2d -- \u7279\u522b\u7684\uff1a id = 10\u662f\u4e00\u5768; password=\"xx\" and name=\"xx\"\u8fd9\u662f\u53e6\u4e00\u5768 select * from big where id = 10 or password = \"xx\" and name = \"xx\" ; -- \u547d\u4e2d","title":"or"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_27","text":"\u5f53\u6839\u636e\u7d22\u5f15\u6392\u5e8f\u65f6\u5019\uff0c\u9009\u62e9\u7684\u6620\u5c04\u5982\u679c\u4e0d\u662f\u7d22\u5f15\uff0c\u5219\u4e0d\u8d70\u7d22\u5f15 -- \u56e0\u4e3a\u6620\u5c04\u7684\u662f*\u5168\u90e8 \u6240\u4ee5\u4e0d\u4f1a\u8d70\u7d22\u5f15 \u5373\u4f7f\u662f\u6839\u636e\u7d22\u5f15name\u8fdb\u884c\u7684\u6392\u5e8f select * from big order by name asc ; -- \u672a\u547d\u4e2d select * from big order by name desc ; -- \u672a\u547d\u4e2d -- \u7279\u522b\u7684\u4e3b\u952e\uff1a select * from big order by id desc ; -- \u547d\u4e2d","title":"\u6392\u5e8f"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#like","text":"select * from big where name like \"%u-12-19999\" ; -- \u672a\u547d\u4e2d select * from big where name like \"_u-12-19999\" ; -- \u672a\u547d\u4e2d select * from big where name like \"wu-%-10\" ; -- \u672a\u547d\u4e2d -- \u7279\u522b\u7684:\u901a\u914d\u7b26\u5728\u524d\u9762\u4e2d\u95f4\u4e0d\u884c \u5728\u6700\u540e\u53ef\u4ee5 select * from big where name like \"wu-1111-%\" ; -- \u547d\u4e2d select * from big where name like \"wuw-%\" ; -- \u547d\u4e2d","title":"like \u6a21\u7cca\u5339\u914d"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_28","text":"select * from big where reverse ( name ) = \"wupeiqi\" ; -- \u672a\u547d\u4e2d \u7279\u522b\u7684\uff1a select * from big where name = reverse ( \"wupeiqi\" ); -- \u547d\u4e2d","title":"\u4f7f\u7528\u51fd\u6570"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/0_index/#_29","text":"-- \u5982\u679c\u8054\u5408\u7d22\u5f15\u4e3a\uff1a(name,password) name and password -- \u547d\u4e2d name -- \u547d\u4e2d password -- \u672a\u547d\u4e2d name or password -- \u672a\u547d\u4e2d PS: \u6162\u67e5\u8be2,\u8d85\u8fc7\u89c4\u5b9a\u9600\u503c\u672a\u67e5\u8be2\u51fa\u6765\u7684sql\u8bed\u53e5\u90fd\u79f0\u4e3a\u6162\u67e5\u8be2..","title":"\u6700\u5de6\u524d\u7f00\u539f\u5219"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/","text":"\u6267\u884c\u8ba1\u5212 \u00b6 MySQL\u4e2d\u63d0\u4f9b\u4e86\u6267\u884c\u8ba1\u5212\uff0c\u80fd\u591f\u9884\u5224SQL\u7684\u6267\u884c\uff08\u53ea\u80fd\u7ed9\u5230\u4e00\u5b9a\u7684\u53c2\u8003\uff0c\u4e0d\u4e00\u5b9a\u5b8c\u5168\u80fd\u9884\u5224\u51c6\u786e\uff09 explain + SQL\u8bed\u53e5; \u5176\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u662f type\uff0c\u4ed6\u4ed6SQL\u6027\u80fd\u6bd4\u8f83\u91cd\u8981\u7684\u6807\u5fd7\uff0c\u6027\u80fd\u4ece\u4f4e\u5230\u9ad8\u4f9d\u6b21\uff1a all < index < range < index_merge < ref_or_null < ref < eq_ref < system/const \u521d\u6b65\u5224\u65ad\u7ed3\u679c\u662frange\u53ca\u4ee5\u4e0a \u8fd8\u5c31OK. ALL \u00b6 \u5168\u8868\u626b\u63cf\uff0c\u6570\u636e\u8868\u4ece\u5934\u5230\u5c3e\u627e\u4e00\u904d\u3002(\u4e00\u822c\u672a\u547d\u4e2d\u7d22\u5f15\uff0c\u90fd\u662f\u4f1a\u6267\u884c\u5168\u8868\u626b\u63cf) select * from big ; -- \u7279\u522b\u7684\uff1a\u5982\u679c\u6709limit\uff0c\u5219\u627e\u5230\u4e4b\u540e\u5c31\u4e0d\u5728\u7ee7\u7eed\u5411\u4e0b\u626b\u63cf. select * from big limit 1 ; INDEX \u00b6 \u5168\u7d22\u5f15\u626b\u63cf\uff0c\u5bf9\u7d22\u5f15\u4ece\u5934\u5230\u5c3e\u627e\u4e00\u904d explain select id from big ; explain select name from big ; RANGE \u00b6 \u5bf9\u7d22\u5f15\u5217\u8fdb\u884c\u8303\u56f4\u67e5\u627e explain select * from big where id > 10 ; explain select * from big where id in ( 11 , 22 , 33 ); explain select * from big where id between 10 and 20 ; explain select * from big where name > \"wupeiqi\" ; INDEX_MERGE \u00b6 \u5408\u5e76\u7d22\u5f15\uff0c\u4f7f\u7528\u591a\u4e2a\u5355\u5217\u7d22\u5f15\u641c\u7d22 -- id\u662f\u7d22\u5f15 name\u4e5f\u662f\u7d22\u5f15 explain select * from big where id = 10 or name = \"\u6b66\u6c9b\u9f50\" ; REF \u00b6 \u6839\u636e \u7d22\u5f15 \u76f4\u63a5\u53bb\u67e5\u627e\uff08\u975e\u952e\uff09 select * from big where name = '\u6b66\u6c9b\u9f50' ; E Q_REF \u00b6 \u8fde\u8868\u64cd\u4f5c\u65f6\u5e38\u89c1 explain select big . name , users . id from big left join users on big . age = users . id ; CONST \u00b6 \u5e38\u91cf\uff0c\u8868\u6700\u591a\u6709\u4e00\u4e2a\u5339\u914d\u884c,\u56e0\u4e3a\u4ec5\u6709\u4e00\u884c,\u5728\u8fd9\u884c\u7684\u5217\u503c\u53ef\u88ab\u4f18\u5316\u5668\u5269\u4f59\u90e8\u5206\u8ba4\u4e3a\u662f\u5e38\u6570,const\u8868\u5f88\u5feb explain select * from big where id=11; -- \u4e3b\u952e explain select * from big where email=\"w-11-0@qq.com\"; -- \u552f\u4e00\u7d22\u5f15 SYSTEM \u00b6 \u7cfb\u7edf\uff0c\u8868\u4ec5\u6709\u4e00\u884c(=\u7cfb\u7edf\u8868)\u3002\u8fd9\u662fconst\u8054\u63a5\u7c7b\u578b\u7684\u4e00\u4e2a\u7279\u4f8b\u3002 explain select * from ( select * from big where id = 1 limit 1 ) as A ; explain \u7684\u5176\u5b83\u5217 \u00b6 id \u67e5\u8be2\u987a\u5e8f\u6807\u8bc6 z \u67e5\u8be2\u7c7b\u578b SIMPLE \u7b80\u5355\u67e5\u8be2 PRIMARY \u6700\u5916\u5c42\u67e5\u8be2 SUBQUERY \u6620\u5c04\u4e3a\u5b50\u67e5\u8be2 DERIVED \u5b50\u67e5\u8be2 UNION \u8054\u5408 UNION RESULT \u4f7f\u7528\u8054\u5408\u7684\u7ed3\u679c ... table \u6b63\u5728\u8bbf\u95ee\u7684\u8868\u540d partitions \u6d89\u53ca\u7684\u5206\u533a\uff08MySQL\u652f\u6301\u5c06\u6570\u636e\u5212\u5206\u5230\u4e0d\u540c\u7684idb\u6587\u4ef6\u4e2d\uff0c\u8be6\u5355\u4e0e\u6570\u636e\u7684\u62c6\u5206\uff09\u3002 \u4e00\u4e2a\u7279\u522b\u5927\u7684\u6587\u4ef6\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u6587\u4ef6\uff08\u5206\u533a\uff09\u3002 1111possible _ keys \u67e5\u8be2\u6d89\u53ca\u5230\u7684\u5b57\u6bb5\u4e0a\u82e5\u5b58\u5728\u7d22\u5f15\uff0c\u5219\u8be5\u7d22\u5f15\u5c06\u88ab\u5217\u51fa\uff0c\u5373\uff1a\u53ef\u80fd\u4f7f\u7528\u7684\u7d22\u5f15\u3002 111111key \u663e\u793aMySQL\u5728\u67e5\u8be2\u4e2d\u5b9e\u9645\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u82e5\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u663e\u793a\u4e3aNULL\u3002\u4f8b\u5982\uff1a\u6709\u7d22\u5f15\u4f46\u672a\u547d\u4e2d\uff0c\u5219possible _ keys\u663e\u793a\u3001key\u5219\u663e\u793aNULL\u3002 key _ len \u8868\u793a\u7d22\u5f15\u5b57\u6bb5\u7684\u6700\u5927\u53ef\u80fd\u957f\u5ea6\u3002(\u7c7b\u578b\u5b57\u8282\u957f\u5ea6 + \u53d8\u957f2 + \u53ef\u7a7a1)\uff0c\u4f8b\u5982\uff1akey _ len=195\uff0c\u7c7b\u578bvarchar(64)\uff0c195=64*3+2+1 ref \u8fde\u8868\u65f6\u663e\u793a\u7684\u5173\u8054\u4fe1\u606f\u3002\u4f8b\u5982\uff1aA\u548cB\u8fde\u8868\uff0c\u663e\u793a\u8fde\u8868\u7684\u5b57\u6bb5\u4fe1\u606f\u3002 1111rows \u4f30\u8ba1\u8bfb\u53d6\u7684\u6570\u636e\u884c\u6570\uff08\u53ea\u662f\u9884\u4f30\u503c\uff09 explain select * from big where password =\"025dfdeb-d803-425d-9834-445758885d1c\"; explain select * from big where password =\"025dfdeb-d803-425d-9834-445758885d1c\" limit 1; filtered \u8fd4\u56de\u7ed3\u679c\u7684\u884c\u5360\u9700\u8981\u8bfb\u5230\u7684\u884c\u7684\u767e\u5206\u6bd4\u3002 explain select * from big where id=1; -- 100\uff0c\u53ea\u8bfb\u4e86\u4e00\u4e2a1\u884c\uff0c\u8fd4\u56de\u7ed3\u679c\u4e5f\u662f1\u884c\u3002 explain select * from big where password=\"27d8ba90-edd0-4a2f-9aaf-99c9d607c3b3\"; -- 10\uff0c\u8bfb\u53d6\u4e8610\u884c\uff0c\u8fd4\u56de\u4e861\u884c\u3002 \u6ce8\u610f\uff1a\u5bc6\u780127d8ba90-edd0-4a2f-9aaf-99c9d607c3b3\u5728\u7b2c10\u884c extra \u8be5\u5217\u5305\u542bMySQL\u89e3\u51b3\u67e5\u8be2\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u201cUsing index\u201d \u6b64\u503c\u8868\u793amysql\u5c06\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u4ee5\u907f\u514d\u8bbf\u95ee\u8868\u3002\u4e0d\u8981\u628a\u8986\u76d6\u7d22\u5f15\u548cindex\u8bbf\u95ee\u7c7b\u578b\u5f04\u6df7\u4e86\u3002 \u201cUsing where\u201d \u8fd9\u610f\u5473\u7740mysql\u670d\u52a1\u5668\u5c06\u5728\u5b58\u50a8\u5f15\u64ce\u68c0\u7d22\u884c\u540e\u518d\u8fdb\u884c\u8fc7\u6ee4\uff0c\u8bb8\u591awhere\u6761\u4ef6\u91cc\u6d89\u53ca\u7d22\u5f15\u4e2d\u7684\u5217\uff0c\u5f53\uff08\u5e76\u4e14\u5982\u679c\uff09\u5b83\u8bfb\u53d6\u7d22\u5f15\u65f6\uff0c\u5c31\u80fd\u88ab\u5b58\u50a8\u5f15\u64ce\u68c0\u9a8c\uff0c\u56e0\u6b64\u4e0d\u662f\u6240\u6709\u5e26where\u5b50\u53e5\u7684\u67e5\u8be2\u90fd\u4f1a\u663e\u793a\u201cUsing where\u201d\u3002\u6709\u65f6\u201cUsing where\u201d\u7684\u51fa\u73b0\u5c31\u662f\u4e00\u4e2a\u6697\u793a\uff1a\u67e5\u8be2\u53ef\u53d7\u76ca\u4e8e\u4e0d\u540c\u7684\u7d22\u5f15. \u201cUsing temporary\u201d \u8fd9\u610f\u5473\u7740mysql\u5728\u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u65f6\u4f1a\u4f7f\u7528\u4e00\u4e2a\u4e34\u65f6\u8868\u3002 \u201cUsing filesort\u201d \u8fd9\u610f\u5473\u7740mysql\u4f1a\u5bf9\u7ed3\u679c\u4f7f\u7528\u4e00\u4e2a\u5916\u90e8\u7d22\u5f15\u6392\u5e8f\uff0c\u800c\u4e0d\u662f\u6309\u7d22\u5f15\u6b21\u5e8f\u4ece\u8868\u91cc\u8bfb\u53d6\u884c\u3002mysql\u6709\u4e24\u79cd\u6587\u4ef6\u6392\u5e8f\u7b97\u6cd5\uff0c\u8fd9\u4e24\u79cd\u6392\u5e8f\u65b9\u5f0f\u90fd\u53ef\u4ee5\u5728\u5185\u5b58\u6216\u8005\u78c1\u76d8\u4e0a\u5b8c\u6210\uff0cexplain\u4e0d\u4f1a\u544a\u8bc9\u4f60mysql\u5c06\u4f7f\u7528\u54ea\u4e00\u79cd\u6587\u4ef6\u6392\u5e8f\uff0c\u4e5f\u4e0d\u4f1a\u544a\u8bc9\u4f60\u6392\u5e8f\u4f1a\u5728\u5185\u5b58\u91cc\u8fd8\u662f\u78c1\u76d8\u4e0a\u5b8c\u6210\u3002 \u201cRange checked for each record(index map: N)\u201d \u8fd9\u4e2a\u610f\u5473\u7740\u6ca1\u6709\u597d\u7528\u7684\u7d22\u5f15\uff0c\u65b0\u7684\u7d22\u5f15\u5c06\u5728\u8054\u63a5\u7684\u6bcf\u4e00\u884c\u4e0a\u91cd\u65b0\u4f30\u7b97\uff0cN\u662f\u663e\u793a\u5728possible _ keys\u5217\u4e2d\u7d22\u5f15\u7684\u4f4d\u56fe\uff0c\u5e76\u4e14\u662f\u5197\u4f59\u7684\u3002","title":"\u6267\u884c\u8ba1\u5212"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#_1","text":"MySQL\u4e2d\u63d0\u4f9b\u4e86\u6267\u884c\u8ba1\u5212\uff0c\u80fd\u591f\u9884\u5224SQL\u7684\u6267\u884c\uff08\u53ea\u80fd\u7ed9\u5230\u4e00\u5b9a\u7684\u53c2\u8003\uff0c\u4e0d\u4e00\u5b9a\u5b8c\u5168\u80fd\u9884\u5224\u51c6\u786e\uff09 explain + SQL\u8bed\u53e5; \u5176\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u662f type\uff0c\u4ed6\u4ed6SQL\u6027\u80fd\u6bd4\u8f83\u91cd\u8981\u7684\u6807\u5fd7\uff0c\u6027\u80fd\u4ece\u4f4e\u5230\u9ad8\u4f9d\u6b21\uff1a all < index < range < index_merge < ref_or_null < ref < eq_ref < system/const \u521d\u6b65\u5224\u65ad\u7ed3\u679c\u662frange\u53ca\u4ee5\u4e0a \u8fd8\u5c31OK.","title":"\u6267\u884c\u8ba1\u5212"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#all","text":"\u5168\u8868\u626b\u63cf\uff0c\u6570\u636e\u8868\u4ece\u5934\u5230\u5c3e\u627e\u4e00\u904d\u3002(\u4e00\u822c\u672a\u547d\u4e2d\u7d22\u5f15\uff0c\u90fd\u662f\u4f1a\u6267\u884c\u5168\u8868\u626b\u63cf) select * from big ; -- \u7279\u522b\u7684\uff1a\u5982\u679c\u6709limit\uff0c\u5219\u627e\u5230\u4e4b\u540e\u5c31\u4e0d\u5728\u7ee7\u7eed\u5411\u4e0b\u626b\u63cf. select * from big limit 1 ;","title":"ALL"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#index","text":"\u5168\u7d22\u5f15\u626b\u63cf\uff0c\u5bf9\u7d22\u5f15\u4ece\u5934\u5230\u5c3e\u627e\u4e00\u904d explain select id from big ; explain select name from big ;","title":"INDEX"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#range","text":"\u5bf9\u7d22\u5f15\u5217\u8fdb\u884c\u8303\u56f4\u67e5\u627e explain select * from big where id > 10 ; explain select * from big where id in ( 11 , 22 , 33 ); explain select * from big where id between 10 and 20 ; explain select * from big where name > \"wupeiqi\" ;","title":"RANGE"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#index_merge","text":"\u5408\u5e76\u7d22\u5f15\uff0c\u4f7f\u7528\u591a\u4e2a\u5355\u5217\u7d22\u5f15\u641c\u7d22 -- id\u662f\u7d22\u5f15 name\u4e5f\u662f\u7d22\u5f15 explain select * from big where id = 10 or name = \"\u6b66\u6c9b\u9f50\" ;","title":"INDEX_MERGE"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#ref","text":"\u6839\u636e \u7d22\u5f15 \u76f4\u63a5\u53bb\u67e5\u627e\uff08\u975e\u952e\uff09 select * from big where name = '\u6b66\u6c9b\u9f50' ;","title":"REF"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#e-q_ref","text":"\u8fde\u8868\u64cd\u4f5c\u65f6\u5e38\u89c1 explain select big . name , users . id from big left join users on big . age = users . id ;","title":"E Q_REF"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#const","text":"\u5e38\u91cf\uff0c\u8868\u6700\u591a\u6709\u4e00\u4e2a\u5339\u914d\u884c,\u56e0\u4e3a\u4ec5\u6709\u4e00\u884c,\u5728\u8fd9\u884c\u7684\u5217\u503c\u53ef\u88ab\u4f18\u5316\u5668\u5269\u4f59\u90e8\u5206\u8ba4\u4e3a\u662f\u5e38\u6570,const\u8868\u5f88\u5feb explain select * from big where id=11; -- \u4e3b\u952e explain select * from big where email=\"w-11-0@qq.com\"; -- \u552f\u4e00\u7d22\u5f15","title":"CONST"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#system","text":"\u7cfb\u7edf\uff0c\u8868\u4ec5\u6709\u4e00\u884c(=\u7cfb\u7edf\u8868)\u3002\u8fd9\u662fconst\u8054\u63a5\u7c7b\u578b\u7684\u4e00\u4e2a\u7279\u4f8b\u3002 explain select * from ( select * from big where id = 1 limit 1 ) as A ;","title":"SYSTEM"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/1_explain/#explain","text":"id \u67e5\u8be2\u987a\u5e8f\u6807\u8bc6 z \u67e5\u8be2\u7c7b\u578b SIMPLE \u7b80\u5355\u67e5\u8be2 PRIMARY \u6700\u5916\u5c42\u67e5\u8be2 SUBQUERY \u6620\u5c04\u4e3a\u5b50\u67e5\u8be2 DERIVED \u5b50\u67e5\u8be2 UNION \u8054\u5408 UNION RESULT \u4f7f\u7528\u8054\u5408\u7684\u7ed3\u679c ... table \u6b63\u5728\u8bbf\u95ee\u7684\u8868\u540d partitions \u6d89\u53ca\u7684\u5206\u533a\uff08MySQL\u652f\u6301\u5c06\u6570\u636e\u5212\u5206\u5230\u4e0d\u540c\u7684idb\u6587\u4ef6\u4e2d\uff0c\u8be6\u5355\u4e0e\u6570\u636e\u7684\u62c6\u5206\uff09\u3002 \u4e00\u4e2a\u7279\u522b\u5927\u7684\u6587\u4ef6\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u6587\u4ef6\uff08\u5206\u533a\uff09\u3002 1111possible _ keys \u67e5\u8be2\u6d89\u53ca\u5230\u7684\u5b57\u6bb5\u4e0a\u82e5\u5b58\u5728\u7d22\u5f15\uff0c\u5219\u8be5\u7d22\u5f15\u5c06\u88ab\u5217\u51fa\uff0c\u5373\uff1a\u53ef\u80fd\u4f7f\u7528\u7684\u7d22\u5f15\u3002 111111key \u663e\u793aMySQL\u5728\u67e5\u8be2\u4e2d\u5b9e\u9645\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u82e5\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u663e\u793a\u4e3aNULL\u3002\u4f8b\u5982\uff1a\u6709\u7d22\u5f15\u4f46\u672a\u547d\u4e2d\uff0c\u5219possible _ keys\u663e\u793a\u3001key\u5219\u663e\u793aNULL\u3002 key _ len \u8868\u793a\u7d22\u5f15\u5b57\u6bb5\u7684\u6700\u5927\u53ef\u80fd\u957f\u5ea6\u3002(\u7c7b\u578b\u5b57\u8282\u957f\u5ea6 + \u53d8\u957f2 + \u53ef\u7a7a1)\uff0c\u4f8b\u5982\uff1akey _ len=195\uff0c\u7c7b\u578bvarchar(64)\uff0c195=64*3+2+1 ref \u8fde\u8868\u65f6\u663e\u793a\u7684\u5173\u8054\u4fe1\u606f\u3002\u4f8b\u5982\uff1aA\u548cB\u8fde\u8868\uff0c\u663e\u793a\u8fde\u8868\u7684\u5b57\u6bb5\u4fe1\u606f\u3002 1111rows \u4f30\u8ba1\u8bfb\u53d6\u7684\u6570\u636e\u884c\u6570\uff08\u53ea\u662f\u9884\u4f30\u503c\uff09 explain select * from big where password =\"025dfdeb-d803-425d-9834-445758885d1c\"; explain select * from big where password =\"025dfdeb-d803-425d-9834-445758885d1c\" limit 1; filtered \u8fd4\u56de\u7ed3\u679c\u7684\u884c\u5360\u9700\u8981\u8bfb\u5230\u7684\u884c\u7684\u767e\u5206\u6bd4\u3002 explain select * from big where id=1; -- 100\uff0c\u53ea\u8bfb\u4e86\u4e00\u4e2a1\u884c\uff0c\u8fd4\u56de\u7ed3\u679c\u4e5f\u662f1\u884c\u3002 explain select * from big where password=\"27d8ba90-edd0-4a2f-9aaf-99c9d607c3b3\"; -- 10\uff0c\u8bfb\u53d6\u4e8610\u884c\uff0c\u8fd4\u56de\u4e861\u884c\u3002 \u6ce8\u610f\uff1a\u5bc6\u780127d8ba90-edd0-4a2f-9aaf-99c9d607c3b3\u5728\u7b2c10\u884c extra \u8be5\u5217\u5305\u542bMySQL\u89e3\u51b3\u67e5\u8be2\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u201cUsing index\u201d \u6b64\u503c\u8868\u793amysql\u5c06\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\uff0c\u4ee5\u907f\u514d\u8bbf\u95ee\u8868\u3002\u4e0d\u8981\u628a\u8986\u76d6\u7d22\u5f15\u548cindex\u8bbf\u95ee\u7c7b\u578b\u5f04\u6df7\u4e86\u3002 \u201cUsing where\u201d \u8fd9\u610f\u5473\u7740mysql\u670d\u52a1\u5668\u5c06\u5728\u5b58\u50a8\u5f15\u64ce\u68c0\u7d22\u884c\u540e\u518d\u8fdb\u884c\u8fc7\u6ee4\uff0c\u8bb8\u591awhere\u6761\u4ef6\u91cc\u6d89\u53ca\u7d22\u5f15\u4e2d\u7684\u5217\uff0c\u5f53\uff08\u5e76\u4e14\u5982\u679c\uff09\u5b83\u8bfb\u53d6\u7d22\u5f15\u65f6\uff0c\u5c31\u80fd\u88ab\u5b58\u50a8\u5f15\u64ce\u68c0\u9a8c\uff0c\u56e0\u6b64\u4e0d\u662f\u6240\u6709\u5e26where\u5b50\u53e5\u7684\u67e5\u8be2\u90fd\u4f1a\u663e\u793a\u201cUsing where\u201d\u3002\u6709\u65f6\u201cUsing where\u201d\u7684\u51fa\u73b0\u5c31\u662f\u4e00\u4e2a\u6697\u793a\uff1a\u67e5\u8be2\u53ef\u53d7\u76ca\u4e8e\u4e0d\u540c\u7684\u7d22\u5f15. \u201cUsing temporary\u201d \u8fd9\u610f\u5473\u7740mysql\u5728\u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u65f6\u4f1a\u4f7f\u7528\u4e00\u4e2a\u4e34\u65f6\u8868\u3002 \u201cUsing filesort\u201d \u8fd9\u610f\u5473\u7740mysql\u4f1a\u5bf9\u7ed3\u679c\u4f7f\u7528\u4e00\u4e2a\u5916\u90e8\u7d22\u5f15\u6392\u5e8f\uff0c\u800c\u4e0d\u662f\u6309\u7d22\u5f15\u6b21\u5e8f\u4ece\u8868\u91cc\u8bfb\u53d6\u884c\u3002mysql\u6709\u4e24\u79cd\u6587\u4ef6\u6392\u5e8f\u7b97\u6cd5\uff0c\u8fd9\u4e24\u79cd\u6392\u5e8f\u65b9\u5f0f\u90fd\u53ef\u4ee5\u5728\u5185\u5b58\u6216\u8005\u78c1\u76d8\u4e0a\u5b8c\u6210\uff0cexplain\u4e0d\u4f1a\u544a\u8bc9\u4f60mysql\u5c06\u4f7f\u7528\u54ea\u4e00\u79cd\u6587\u4ef6\u6392\u5e8f\uff0c\u4e5f\u4e0d\u4f1a\u544a\u8bc9\u4f60\u6392\u5e8f\u4f1a\u5728\u5185\u5b58\u91cc\u8fd8\u662f\u78c1\u76d8\u4e0a\u5b8c\u6210\u3002 \u201cRange checked for each record(index map: N)\u201d \u8fd9\u4e2a\u610f\u5473\u7740\u6ca1\u6709\u597d\u7528\u7684\u7d22\u5f15\uff0c\u65b0\u7684\u7d22\u5f15\u5c06\u5728\u8054\u63a5\u7684\u6bcf\u4e00\u884c\u4e0a\u91cd\u65b0\u4f30\u7b97\uff0cN\u662f\u663e\u793a\u5728possible _ keys\u5217\u4e2d\u7d22\u5f15\u7684\u4f4d\u56fe\uff0c\u5e76\u4e14\u662f\u5197\u4f59\u7684\u3002","title":"explain \u7684\u5176\u5b83\u5217"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/","text":"\u4e8b\u52a1\u662f\u4ec0\u4e48 \u00b6 transaction \u4e8b\u52a1\u662fmysql\u7684\u4e00\u79cd\u673a\u5236,\u6bcf\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1,\u90fd\u53ef\u4ee5\u5f80\u91cc\u9762\u653e\u4e00\u7cfb\u5217\u7684sql\u8bed\u53e5.. \u4e8b\u52a1\u662f\u5355\u4e2a\u903b\u8f91\u5de5\u4f5c\u5355\u4f4d\u6267\u884c\u7684\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c,\u8981\u4e48\u5168\u6267\u884c,\u8981\u4e48\u5168\u4e0d\u6267\u884c. \u6bcf\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1,\u76f8\u5f53\u4e8e\u7ed9\u6570\u636e\u5e93\u62cd\u4e86\u4e00\u5f20\u5feb\u7167,\u8fd9\u610f\u5473\u7740\u5728\u63d0\u4ea4\u4e4b\u524d\u53ef\u4ee5\u56de\u6eda,\u5728\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u4fdd\u5b58\u70b9,\u7136\u540e\u53ef\u4ee5\u56de\u6eda\u5230\u6bcf\u4e2a\u4fdd\u5b58\u70b9. \u7ed3\u675f\u4e8b\u52a1\u53ef\u4ee5\u7528commit\u6216rollback,\u7ed3\u675f\u4e8b\u52a1\u4f1a\u91ca\u653e\u4e8b\u52a1\u4e2d\u6240\u6709\u7684\u9501. \u56db\u5927\u7279\u6027 ACID \u00b6 \u7ecf\u5178\u8f6c\u8d26\u884c\u4e3a A\u5411B\u8f6c\u8d26100 --- A\u8d26\u6237\u51cf\u94b1 B\u8d26\u6237\u52a0\u94b1 step1: selectA\u8d26\u6237\u7684\u4f59\u989d if > 100; 500 step2: update A\u8d26\u6237 \u4f59\u989d \u51cf 100; 500-100 step3: selectB\u8d26\u6237\u7684\u4f59\u989d; 500 step4: update B\u8d26\u6237 \u4f59\u989d \u52a0 100; 600 \u539f\u5b50\u6027 Atomicity \u00b6 \u591a\u6761sql\u8bed\u53e5\u662f\u4e0d\u53ef\u5206\u5272\u7684\u6574\u4f53 \u8981\u4e48\u5168\u90e8\u6267\u884c\u6210,\u8981\u4e48\u90fd\u4e0d\u6267\u884c \u4f46\u51e1\u4e00\u6761\u5931\u8d25 \u5168\u90e8\u56de\u6eda \u4e00\u635f\u4ff1\u635f \u6267\u884c\u5230\u7b2c\u4e09\u6b65\u7684\u65f6\u5019 B\u7684\u8d26\u53f7\u7a81\u7136\u4e0d\u53ef\u7528\u4e86(\u6ce8\u9500\u4e86) \u90a3\u4e48\u5c31\u9700\u8981\u56de\u6eda \u4e00\u81f4\u6027 Consistency \u00b6 (\u539f\u5b50\u6027\u548c\u4e00\u81f4\u6027\u8fd9\u4e24\u70b9\u4e0d\u5206\u5bb6) \u8f6c\u8d26\u524d A+B\u8d26\u6237\u4f59\u989d == \u8f6c\u8d26\u540e A+B\u8d26\u6237\u4f59\u989d \u524d\u540e\u7684\u72b6\u6001\u4e00\u81f4 \u4e8b\u52a1\u5f00\u542f\u524d\u4f59\u989d\u5b57\u6bb5\u89c4\u5b9a\u4e3a\u6b63\u6574\u6570 \u90a3\u4e48\u4e8b\u52a1\u7ed3\u675f\u540e\u5f97\u5230\u7684\u5b57\u6bb5\u503c\u4e0d\u80fd\u4e3a\u8d1f\u6570 \u524d\u540e\u90fd\u8981\u7b26\u5408\u5b57\u6bb5\u7684\u7ea6\u675f \u9694\u79bb\u6027 Isolation \u00b6 \u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6, \u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u4e0d\u5e94\u5f71\u54cd\u5176\u4ed6\u4e8b\u52a1\u7684\u6267\u884c \u5373\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d, \u4e0d\u5e94\u8be5\u53d7\u5230\u5176\u5b83\u4e8b\u52a1\u7684\u5e72\u6270! \u8981\u5148\u660e\u767d\u4e00\u70b9: \u5728A\u5411B\u8f6c\u8d26\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e2d,\u53ea\u8981\u4e8b\u52a1\u8fd8\u6ca1\u6709\u63d0\u4ea4(commit),\u67e5\u8be2A\u8d26\u6237\u548cB\u8d26\u6237\u7684\u65f6\u5019,\u4e24\u4e2a\u8d26\u6237\u91cc\u9762\u7684\u94b1\u7684\u6570\u91cf\u90fd\u4e0d\u4f1a\u6709\u53d8\u5316 \u4e8b\u52a1\u662f\u5bf9\u5feb\u7167\u8fdb\u884c\u7684\u64cd\u4f5c,\u771f\u6b63\u5bf9\u6570\u636e\u5e93\u7684\u4fee\u6539\u662f\u8981commit\u540e\uff01\uff01 \u540c\u65f6\u5f00\u542f\u4e86\u4e24\u4e2a\u4e8b\u52a1, \u4e8b\u52a11 A\u5411B\u8f6c\u8d26100;\u4e8b\u52a12 C\u5411B\u8f6c\u8d26200\u3002\u4e8b\u52a1\u5f00\u542f,\u4e8b\u52a11\u4e00\u4e2a\u5feb\u7167,\u4e8b\u52a12\u4e00\u4e2a\u5feb\u7167. \u4e8b\u52a12\u5148\u5b8c\u6210\u4e86commit\u63d0\u4ea4,\u8fd9\u65f6\u5019\u6570\u636e\u5e93\u91ccAB\u7684\u4f59\u989d\u5206\u522b\u662f300,700. \u4f46\u4e8b\u52a12\u7684\u5b8c\u6210\u5bf9\u4e8b\u52a11\u4e0d\u4f1a\u6709\u5f71\u54cd,\u4e8b\u52a11\u67e5\u770b\u5feb\u7167,\u67e5\u770bB\u8d26\u6237\u4f59\u989d\u4f9d\u65e7\u4f1a\u662f500,\u4e00\u7cfb\u5217sql\u8bed\u53e5\u6267\u884c\u65f6. mysql\u5e95\u5c42\u4f1a\u8fdb\u884c\u5904\u7406(\u4e00\u62b9\u591a\u9501\u7684\u673a\u5236),\u4fdd\u8bc1\u8f6c\u8d26\u7ed3\u679c\u7684\u51c6\u786e.. \u6301\u4e45\u6027 Durability \u00b6 \u6267\u884ccommit\u540e,\u4f1a\u5c06\u6570\u636e\u5199\u5230\u6570\u636e\u5e93\u505a\u6301\u4e45\u5316\u4fdd\u5b58 \u4e09\u79cd\u8fd0\u884c\u6a21\u5f0f \u00b6 \u663e\u793a -- \u624b\u52a8 ; \u9690\u5f0f -- \u81ea\u52a8. \u9690\u5f0f\u5f00\u542f,\u9690\u5f0f\u63d0\u4ea4 \u00b6 mysql\u9ed8\u8ba4\u6bcf\u6267\u884c\u4e00\u6761sql\u8bed\u53e5\u90fd\u4f1a\u5f00\u4e00\u4e2a\u4e8b\u52a1,\u5728\u6267\u884c\u5b8csql\u8bed\u53e5\u540e,\u4e8b\u52a1\u4f1a\u81ea\u52a8\u9690\u5f0f\u6267\u884ccommit\u64cd\u4f5c. \u5982\u679c\u51fa\u73b0\u9519\u8bef,\u5219\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u81f3\u4e4b\u524d\u72b6\u6001. -- start transaction; update user set name = 'EGON' where id = 1 ; -- commit; \u663e\u5f0f\u5f00\u542f\u3001\u663e\u5f0f\u63d0\u4ea4 \u00b6 \u9700\u8981\u81ea\u5df1\u5199 start transaction; | begin; \u548c commit; | rollback; , \u5c06\u8981\u6267\u884c\u7684sql\u8bed\u53e5\u653e\u5728\u81ea\u5df1\u624b\u52a8\u5f00\u542f\u7684\u4e8b\u52a1\u91cc.. \u5207\u8bb0\u8981commit\u63d0\u4ea4\u4e8b\u52a1\u6216rollback\u56de\u6eda\u4e8b\u52a1,\u4e0d\u7136\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c,\u64cd\u4f5c\u7684\u662f\u5feb\u7167\u800c\u4e0d\u662f\u771f\u6b63\u7684\u6570\u636e\uff01\uff01 \u6ce8\u610f: \u8fd9\u79cd\u65b9\u5f0f\u5728\u6211\u4eec\u4f7f\u7528commit\u6216\u8005rollback\u540e,\u4e8b\u52a1\u5c31\u7ed3\u675f\u4e86 .\u518d\u6b21\u8fdb\u5165\u4e8b\u52a1\u72b6\u6001\u9700\u8981\u518d\u6b21start transaction. -- \u51c6\u5907\u6570\u636e create table tr ( id int , name varchar ( 10 ), age int ); desc tr ; insert into tr values ( 1 , '\u5c0f\u660e' , 18 ),( 2 , '\u5c0f\u7ea2' , 16 ); select * from tr ; + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u660e | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ -- \u5f00\u59cb\u5b9e\u9a8c mysql > begin ; -- \u663e\u793a\u5f00\u542f\u4e8b\u52a1 mysql > update tr set name = '\u5c0f\u6653' where id = 1 ; -- \u6539\u4e86 \u6539\u7684\u662f\u5feb\u7167 mysql > select * from tr ; + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u6653 | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ mysql > rollback ; -- rollback\u4e0d\u63d0\u4ea4\u5feb\u7167 commit\u63d0\u4ea4\u5feb\u7167. \u4f46rollback\u548ccommit\u90fd\u4f1a\u7ed3\u675f\u4e8b\u52a1. mysql > select * from tr ; -- \u4e0d\u80fd\u8bf4\u56de\u6765\u4e86,\u5e94\u8be5\u8bf4\u5feb\u7167\u4ece\u6765\u6ca1\u6709\u63d0\u4ea4\u8fc7... + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u660e | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ mysql > update tr set name = '\u5c0f\u5ddd' where id = 1 ; -- \u9690\u5f0f\u5f00\u542f\u9690\u5f0f\u63d0\u4ea4 \u81ea\u52a8commit \u6570\u636e\u5df2\u7ecf\u5199\u5165\u4e86\u786c\u76d8. mysql > rollback ; -- rollback\u6ca1\u7528 \u4e8b\u52a1\u5df2\u7ecf\u88ab\u81ea\u52a8commit\u4e86 \u6ca1\u6709\u4e8b\u52a1\u62ff\u6765\u56de\u6eda.. mysql > select * from tr ; + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u5ddd | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ \u9690\u5f0f\u5f00\u542f,\u663e\u793a\u63d0\u4ea4 \u00b6 mysql\u5e2e\u5fd9\u81ea\u52a8\u5f00\u542f\u4e8b\u52a1,\u4f46\u662f\u63d0\u4ea4\u548c\u56de\u6eda\u5f52\u6211\u81ea\u5df1\u7ba1. -- mysql\u901a\u8fc7\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4\u4e8b\u52a1,\u6765\u8fbe\u5230\u9690\u5f0f\u5f00\u542f\u4e8b\u52a1,\u663e\u793a\u63d0\u4ea4\u4e8b\u52a1\u7684\u76ee\u7684.. set session autocommit = 0 ; -- 0\u662f\u5173\u95ed,1\u662f\u5f00\u542f;session\u662f\u8bbe\u7f6e\u5f53\u524d\u4f1a\u8bdd\u53d8\u91cf,global\u662f\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf. \u5b9e\u9a8c \u00b6 \u9a8c\u8bc1\u4e00\u81f4\u6027\u3001\u539f\u5b50\u6027\u3001\u9694\u79bb\u6027 \u51c6\u5907\u6570\u636e \u00b6 create table employee ( id int primary key auto_increment , name varchar ( 20 ) not null , age int ( 3 ) unsigned not null default 20 ); insert into employee ( name ) values ( 'egon' ), ( 'alex' ), ( 'wupeiqi' ); update employee set age = 18 where id <= 2 ; select * from employee ; + ----+---------+-----+ | id | name | age | + ----+---------+-----+ | 1 | egon | 18 | | 2 | alex | 18 | | 3 | wupeiqi | 20 | + ----+---------+-----+ \u5f00\u59cb\u5b9e\u9a8c \u00b6 \u4e24\u8fb9\u540c\u65f6\u5f00\u542f\u4e8b\u52a1 update\u8bed\u53e5\u4e2d age = age + 1,\u53f3\u8fb9\u7684age\u662f\u4f1a\u53bb\u539f\u8868\u4e2d\u8bfb\u6570\u636e\u7684,update\u64cd\u4f5c\u7684\u662f\u5feb\u7167\uff01 \u5f00\u4e86\u4e24\u4e2a\u7ec8\u7aefA\u548cB,\u540c\u65f6begin\u5f00\u542f\u4e86\u4e8b\u52a1. B\u6267\u884c\u4e86\u4e24\u6761update\u8bed\u53e5. \u770bstep3\u548cstep4, \u5728B\u63d0\u4ea4\u4e8b\u52a1\u524d\u5bf9\u4e8b\u52a1A\u6ca1\u6709\u5f71\u54cd, \u770bstep5\u548cstep6, \u5728B\u63d0\u4ea4\u4e8b\u52a1\u540e\u5bf9\u4e8b\u52a1A\u4f9d\u65e7\u6ca1\u6709\u5f71\u54cd, \u8fd9\u5c31\u662f \u9694\u79bb\u6027 \uff01\uff01 \u7ee7\u7eed\u8fdb\u884cstep7,A\u5c06id\u4e3a1\u7684\u7528\u6237\u7684\u5e74\u9f84\u589e\u52a0\u4e861,\u7ed3\u679c\u4e0estep6\u76f8\u6bd4,\u4f1a\u53d1\u73b0egon\u7684\u5e74\u9f84\u4ece18\u5230\u4e8620\uff01\uff01 \u8fd9\u662f\u56e0\u4e3a age = age + 1 ,\u867d\u7136\u64cd\u4f5c\u7684\u662f\u5feb\u7167,\u4f46\u662f\u4e3a\u4e86 \u4e00\u81f4\u6027 , \u53f3\u8fb9\u7684age\u662f\u4f1a\u53bb\u8bfb\u539f\u8868\u91cc\u7684\u6570\u636e\u7684\uff01\uff01 step8\u540c\u7406,\u7ee7\u7eed\u5f80\u540e,A\u4e8b\u52a1\u63d0\u4ea4\u524d,step10\u7684\u7ed3\u679c\u518d\u6b21\u9a8c\u8bc1\u4e86 \u9694\u79bb\u6027 , step11,A\u4e8b\u52a1\u63d0\u4ea4, \u6570\u636e\u5199\u5165\u4e86\u786c\u76d8, \u6301\u4e45\u6027 \uff01step12, B\u53ef\u4ee5\u8bfb\u53d6\u5230\u76f8\u5e94\u6570\u636e. pymysql\u5b9e\u73b0\u4e8b\u52a1\u5904\u7406 \u00b6 # pymysql\u9ed8\u8ba4\u662f\u9690\u5f0f\u5f00\u542f\u4e8b\u52a1,\u663e\u5f0f\u63d0\u4ea4\u4e8b\u52a1 # \u4ee5\u4e0b\u4ee3\u7801\u770b\u770b\u5c31\u884c \u5b9e\u9645\u4e0a\u5728pymysql\u91cc\u53ea\u8981\u6211\u4e0dcommit,\u6570\u636e\u5c31\u4e0d\u4f1a\u771f\u6b63\u7684\u66f4\u6539\uff01\uff01 # \u67e5\u8be2\u4e0d\u7528\u653e\u5230\u4e8b\u52a1\u91cc \u5199\u64cd\u4f5c\u9700\u8981 try : cursor . execute ( sql_1 ) cursor . execute ( sql_2 ) cursor . execute ( sql_3 ) except Exception as e : connect . rollback () # \u4e8b\u52a1\u56de\u6eda print ( '\u4e8b\u52a1\u5904\u7406\u5931\u8d25' , e ) else : connect . commit () # \u8fd9\u91cc\u7684commit\u5c31\u662f\u4e8b\u52a1\u63d0\u4ea4\u7684\u610f\u601d\uff01\uff01 print ( '\u4e8b\u52a1\u5904\u7406\u6210\u529f' , cursor . rowcount ) # \u5173\u95ed\u8fde\u63a5 cursor . close () connect . close ()","title":"\u4e8b\u52a1"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_1","text":"transaction \u4e8b\u52a1\u662fmysql\u7684\u4e00\u79cd\u673a\u5236,\u6bcf\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1,\u90fd\u53ef\u4ee5\u5f80\u91cc\u9762\u653e\u4e00\u7cfb\u5217\u7684sql\u8bed\u53e5.. \u4e8b\u52a1\u662f\u5355\u4e2a\u903b\u8f91\u5de5\u4f5c\u5355\u4f4d\u6267\u884c\u7684\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c,\u8981\u4e48\u5168\u6267\u884c,\u8981\u4e48\u5168\u4e0d\u6267\u884c. \u6bcf\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1,\u76f8\u5f53\u4e8e\u7ed9\u6570\u636e\u5e93\u62cd\u4e86\u4e00\u5f20\u5feb\u7167,\u8fd9\u610f\u5473\u7740\u5728\u63d0\u4ea4\u4e4b\u524d\u53ef\u4ee5\u56de\u6eda,\u5728\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u4fdd\u5b58\u70b9,\u7136\u540e\u53ef\u4ee5\u56de\u6eda\u5230\u6bcf\u4e2a\u4fdd\u5b58\u70b9. \u7ed3\u675f\u4e8b\u52a1\u53ef\u4ee5\u7528commit\u6216rollback,\u7ed3\u675f\u4e8b\u52a1\u4f1a\u91ca\u653e\u4e8b\u52a1\u4e2d\u6240\u6709\u7684\u9501.","title":"\u4e8b\u52a1\u662f\u4ec0\u4e48"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#acid","text":"\u7ecf\u5178\u8f6c\u8d26\u884c\u4e3a A\u5411B\u8f6c\u8d26100 --- A\u8d26\u6237\u51cf\u94b1 B\u8d26\u6237\u52a0\u94b1 step1: selectA\u8d26\u6237\u7684\u4f59\u989d if > 100; 500 step2: update A\u8d26\u6237 \u4f59\u989d \u51cf 100; 500-100 step3: selectB\u8d26\u6237\u7684\u4f59\u989d; 500 step4: update B\u8d26\u6237 \u4f59\u989d \u52a0 100; 600","title":"\u56db\u5927\u7279\u6027 ACID"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#atomicity","text":"\u591a\u6761sql\u8bed\u53e5\u662f\u4e0d\u53ef\u5206\u5272\u7684\u6574\u4f53 \u8981\u4e48\u5168\u90e8\u6267\u884c\u6210,\u8981\u4e48\u90fd\u4e0d\u6267\u884c \u4f46\u51e1\u4e00\u6761\u5931\u8d25 \u5168\u90e8\u56de\u6eda \u4e00\u635f\u4ff1\u635f \u6267\u884c\u5230\u7b2c\u4e09\u6b65\u7684\u65f6\u5019 B\u7684\u8d26\u53f7\u7a81\u7136\u4e0d\u53ef\u7528\u4e86(\u6ce8\u9500\u4e86) \u90a3\u4e48\u5c31\u9700\u8981\u56de\u6eda","title":"\u539f\u5b50\u6027 Atomicity"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#consistency","text":"(\u539f\u5b50\u6027\u548c\u4e00\u81f4\u6027\u8fd9\u4e24\u70b9\u4e0d\u5206\u5bb6) \u8f6c\u8d26\u524d A+B\u8d26\u6237\u4f59\u989d == \u8f6c\u8d26\u540e A+B\u8d26\u6237\u4f59\u989d \u524d\u540e\u7684\u72b6\u6001\u4e00\u81f4 \u4e8b\u52a1\u5f00\u542f\u524d\u4f59\u989d\u5b57\u6bb5\u89c4\u5b9a\u4e3a\u6b63\u6574\u6570 \u90a3\u4e48\u4e8b\u52a1\u7ed3\u675f\u540e\u5f97\u5230\u7684\u5b57\u6bb5\u503c\u4e0d\u80fd\u4e3a\u8d1f\u6570 \u524d\u540e\u90fd\u8981\u7b26\u5408\u5b57\u6bb5\u7684\u7ea6\u675f","title":"\u4e00\u81f4\u6027 Consistency"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#isolation","text":"\u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6, \u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u4e0d\u5e94\u5f71\u54cd\u5176\u4ed6\u4e8b\u52a1\u7684\u6267\u884c \u5373\u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d, \u4e0d\u5e94\u8be5\u53d7\u5230\u5176\u5b83\u4e8b\u52a1\u7684\u5e72\u6270! \u8981\u5148\u660e\u767d\u4e00\u70b9: \u5728A\u5411B\u8f6c\u8d26\u7684\u6574\u4e2a\u8fc7\u7a0b\u4e2d,\u53ea\u8981\u4e8b\u52a1\u8fd8\u6ca1\u6709\u63d0\u4ea4(commit),\u67e5\u8be2A\u8d26\u6237\u548cB\u8d26\u6237\u7684\u65f6\u5019,\u4e24\u4e2a\u8d26\u6237\u91cc\u9762\u7684\u94b1\u7684\u6570\u91cf\u90fd\u4e0d\u4f1a\u6709\u53d8\u5316 \u4e8b\u52a1\u662f\u5bf9\u5feb\u7167\u8fdb\u884c\u7684\u64cd\u4f5c,\u771f\u6b63\u5bf9\u6570\u636e\u5e93\u7684\u4fee\u6539\u662f\u8981commit\u540e\uff01\uff01 \u540c\u65f6\u5f00\u542f\u4e86\u4e24\u4e2a\u4e8b\u52a1, \u4e8b\u52a11 A\u5411B\u8f6c\u8d26100;\u4e8b\u52a12 C\u5411B\u8f6c\u8d26200\u3002\u4e8b\u52a1\u5f00\u542f,\u4e8b\u52a11\u4e00\u4e2a\u5feb\u7167,\u4e8b\u52a12\u4e00\u4e2a\u5feb\u7167. \u4e8b\u52a12\u5148\u5b8c\u6210\u4e86commit\u63d0\u4ea4,\u8fd9\u65f6\u5019\u6570\u636e\u5e93\u91ccAB\u7684\u4f59\u989d\u5206\u522b\u662f300,700. \u4f46\u4e8b\u52a12\u7684\u5b8c\u6210\u5bf9\u4e8b\u52a11\u4e0d\u4f1a\u6709\u5f71\u54cd,\u4e8b\u52a11\u67e5\u770b\u5feb\u7167,\u67e5\u770bB\u8d26\u6237\u4f59\u989d\u4f9d\u65e7\u4f1a\u662f500,\u4e00\u7cfb\u5217sql\u8bed\u53e5\u6267\u884c\u65f6. mysql\u5e95\u5c42\u4f1a\u8fdb\u884c\u5904\u7406(\u4e00\u62b9\u591a\u9501\u7684\u673a\u5236),\u4fdd\u8bc1\u8f6c\u8d26\u7ed3\u679c\u7684\u51c6\u786e..","title":"\u9694\u79bb\u6027 Isolation"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#durability","text":"\u6267\u884ccommit\u540e,\u4f1a\u5c06\u6570\u636e\u5199\u5230\u6570\u636e\u5e93\u505a\u6301\u4e45\u5316\u4fdd\u5b58","title":"\u6301\u4e45\u6027 Durability"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_2","text":"\u663e\u793a -- \u624b\u52a8 ; \u9690\u5f0f -- \u81ea\u52a8.","title":"\u4e09\u79cd\u8fd0\u884c\u6a21\u5f0f"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_3","text":"mysql\u9ed8\u8ba4\u6bcf\u6267\u884c\u4e00\u6761sql\u8bed\u53e5\u90fd\u4f1a\u5f00\u4e00\u4e2a\u4e8b\u52a1,\u5728\u6267\u884c\u5b8csql\u8bed\u53e5\u540e,\u4e8b\u52a1\u4f1a\u81ea\u52a8\u9690\u5f0f\u6267\u884ccommit\u64cd\u4f5c. \u5982\u679c\u51fa\u73b0\u9519\u8bef,\u5219\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u81f3\u4e4b\u524d\u72b6\u6001. -- start transaction; update user set name = 'EGON' where id = 1 ; -- commit;","title":"\u9690\u5f0f\u5f00\u542f,\u9690\u5f0f\u63d0\u4ea4"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_4","text":"\u9700\u8981\u81ea\u5df1\u5199 start transaction; | begin; \u548c commit; | rollback; , \u5c06\u8981\u6267\u884c\u7684sql\u8bed\u53e5\u653e\u5728\u81ea\u5df1\u624b\u52a8\u5f00\u542f\u7684\u4e8b\u52a1\u91cc.. \u5207\u8bb0\u8981commit\u63d0\u4ea4\u4e8b\u52a1\u6216rollback\u56de\u6eda\u4e8b\u52a1,\u4e0d\u7136\u4e00\u7cfb\u5217\u7684\u64cd\u4f5c,\u64cd\u4f5c\u7684\u662f\u5feb\u7167\u800c\u4e0d\u662f\u771f\u6b63\u7684\u6570\u636e\uff01\uff01 \u6ce8\u610f: \u8fd9\u79cd\u65b9\u5f0f\u5728\u6211\u4eec\u4f7f\u7528commit\u6216\u8005rollback\u540e,\u4e8b\u52a1\u5c31\u7ed3\u675f\u4e86 .\u518d\u6b21\u8fdb\u5165\u4e8b\u52a1\u72b6\u6001\u9700\u8981\u518d\u6b21start transaction. -- \u51c6\u5907\u6570\u636e create table tr ( id int , name varchar ( 10 ), age int ); desc tr ; insert into tr values ( 1 , '\u5c0f\u660e' , 18 ),( 2 , '\u5c0f\u7ea2' , 16 ); select * from tr ; + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u660e | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ -- \u5f00\u59cb\u5b9e\u9a8c mysql > begin ; -- \u663e\u793a\u5f00\u542f\u4e8b\u52a1 mysql > update tr set name = '\u5c0f\u6653' where id = 1 ; -- \u6539\u4e86 \u6539\u7684\u662f\u5feb\u7167 mysql > select * from tr ; + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u6653 | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ mysql > rollback ; -- rollback\u4e0d\u63d0\u4ea4\u5feb\u7167 commit\u63d0\u4ea4\u5feb\u7167. \u4f46rollback\u548ccommit\u90fd\u4f1a\u7ed3\u675f\u4e8b\u52a1. mysql > select * from tr ; -- \u4e0d\u80fd\u8bf4\u56de\u6765\u4e86,\u5e94\u8be5\u8bf4\u5feb\u7167\u4ece\u6765\u6ca1\u6709\u63d0\u4ea4\u8fc7... + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u660e | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+ mysql > update tr set name = '\u5c0f\u5ddd' where id = 1 ; -- \u9690\u5f0f\u5f00\u542f\u9690\u5f0f\u63d0\u4ea4 \u81ea\u52a8commit \u6570\u636e\u5df2\u7ecf\u5199\u5165\u4e86\u786c\u76d8. mysql > rollback ; -- rollback\u6ca1\u7528 \u4e8b\u52a1\u5df2\u7ecf\u88ab\u81ea\u52a8commit\u4e86 \u6ca1\u6709\u4e8b\u52a1\u62ff\u6765\u56de\u6eda.. mysql > select * from tr ; + ------+--------+------+ | id | name | age | + ------+--------+------+ | 1 | \u5c0f\u5ddd | 18 | | 2 | \u5c0f\u7ea2 | 16 | + ------+--------+------+","title":"\u663e\u5f0f\u5f00\u542f\u3001\u663e\u5f0f\u63d0\u4ea4"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_5","text":"mysql\u5e2e\u5fd9\u81ea\u52a8\u5f00\u542f\u4e8b\u52a1,\u4f46\u662f\u63d0\u4ea4\u548c\u56de\u6eda\u5f52\u6211\u81ea\u5df1\u7ba1. -- mysql\u901a\u8fc7\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4\u4e8b\u52a1,\u6765\u8fbe\u5230\u9690\u5f0f\u5f00\u542f\u4e8b\u52a1,\u663e\u793a\u63d0\u4ea4\u4e8b\u52a1\u7684\u76ee\u7684.. set session autocommit = 0 ; -- 0\u662f\u5173\u95ed,1\u662f\u5f00\u542f;session\u662f\u8bbe\u7f6e\u5f53\u524d\u4f1a\u8bdd\u53d8\u91cf,global\u662f\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf.","title":"\u9690\u5f0f\u5f00\u542f,\u663e\u793a\u63d0\u4ea4"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_6","text":"\u9a8c\u8bc1\u4e00\u81f4\u6027\u3001\u539f\u5b50\u6027\u3001\u9694\u79bb\u6027","title":"\u5b9e\u9a8c"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_7","text":"create table employee ( id int primary key auto_increment , name varchar ( 20 ) not null , age int ( 3 ) unsigned not null default 20 ); insert into employee ( name ) values ( 'egon' ), ( 'alex' ), ( 'wupeiqi' ); update employee set age = 18 where id <= 2 ; select * from employee ; + ----+---------+-----+ | id | name | age | + ----+---------+-----+ | 1 | egon | 18 | | 2 | alex | 18 | | 3 | wupeiqi | 20 | + ----+---------+-----+","title":"\u51c6\u5907\u6570\u636e"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#_8","text":"\u4e24\u8fb9\u540c\u65f6\u5f00\u542f\u4e8b\u52a1 update\u8bed\u53e5\u4e2d age = age + 1,\u53f3\u8fb9\u7684age\u662f\u4f1a\u53bb\u539f\u8868\u4e2d\u8bfb\u6570\u636e\u7684,update\u64cd\u4f5c\u7684\u662f\u5feb\u7167\uff01 \u5f00\u4e86\u4e24\u4e2a\u7ec8\u7aefA\u548cB,\u540c\u65f6begin\u5f00\u542f\u4e86\u4e8b\u52a1. B\u6267\u884c\u4e86\u4e24\u6761update\u8bed\u53e5. \u770bstep3\u548cstep4, \u5728B\u63d0\u4ea4\u4e8b\u52a1\u524d\u5bf9\u4e8b\u52a1A\u6ca1\u6709\u5f71\u54cd, \u770bstep5\u548cstep6, \u5728B\u63d0\u4ea4\u4e8b\u52a1\u540e\u5bf9\u4e8b\u52a1A\u4f9d\u65e7\u6ca1\u6709\u5f71\u54cd, \u8fd9\u5c31\u662f \u9694\u79bb\u6027 \uff01\uff01 \u7ee7\u7eed\u8fdb\u884cstep7,A\u5c06id\u4e3a1\u7684\u7528\u6237\u7684\u5e74\u9f84\u589e\u52a0\u4e861,\u7ed3\u679c\u4e0estep6\u76f8\u6bd4,\u4f1a\u53d1\u73b0egon\u7684\u5e74\u9f84\u4ece18\u5230\u4e8620\uff01\uff01 \u8fd9\u662f\u56e0\u4e3a age = age + 1 ,\u867d\u7136\u64cd\u4f5c\u7684\u662f\u5feb\u7167,\u4f46\u662f\u4e3a\u4e86 \u4e00\u81f4\u6027 , \u53f3\u8fb9\u7684age\u662f\u4f1a\u53bb\u8bfb\u539f\u8868\u91cc\u7684\u6570\u636e\u7684\uff01\uff01 step8\u540c\u7406,\u7ee7\u7eed\u5f80\u540e,A\u4e8b\u52a1\u63d0\u4ea4\u524d,step10\u7684\u7ed3\u679c\u518d\u6b21\u9a8c\u8bc1\u4e86 \u9694\u79bb\u6027 , step11,A\u4e8b\u52a1\u63d0\u4ea4, \u6570\u636e\u5199\u5165\u4e86\u786c\u76d8, \u6301\u4e45\u6027 \uff01step12, B\u53ef\u4ee5\u8bfb\u53d6\u5230\u76f8\u5e94\u6570\u636e.","title":"\u5f00\u59cb\u5b9e\u9a8c"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/2_transaction/#pymysql","text":"# pymysql\u9ed8\u8ba4\u662f\u9690\u5f0f\u5f00\u542f\u4e8b\u52a1,\u663e\u5f0f\u63d0\u4ea4\u4e8b\u52a1 # \u4ee5\u4e0b\u4ee3\u7801\u770b\u770b\u5c31\u884c \u5b9e\u9645\u4e0a\u5728pymysql\u91cc\u53ea\u8981\u6211\u4e0dcommit,\u6570\u636e\u5c31\u4e0d\u4f1a\u771f\u6b63\u7684\u66f4\u6539\uff01\uff01 # \u67e5\u8be2\u4e0d\u7528\u653e\u5230\u4e8b\u52a1\u91cc \u5199\u64cd\u4f5c\u9700\u8981 try : cursor . execute ( sql_1 ) cursor . execute ( sql_2 ) cursor . execute ( sql_3 ) except Exception as e : connect . rollback () # \u4e8b\u52a1\u56de\u6eda print ( '\u4e8b\u52a1\u5904\u7406\u5931\u8d25' , e ) else : connect . commit () # \u8fd9\u91cc\u7684commit\u5c31\u662f\u4e8b\u52a1\u63d0\u4ea4\u7684\u610f\u601d\uff01\uff01 print ( '\u4e8b\u52a1\u5904\u7406\u6210\u529f' , cursor . rowcount ) # \u5173\u95ed\u8fde\u63a5 cursor . close () connect . close ()","title":"pymysql\u5b9e\u73b0\u4e8b\u52a1\u5904\u7406"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/3_db_readPhenomenon/","text":"\u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6\u7684\u201c\u8bfb\u73b0\u8c61\u201d\u6307\u7684\u662f\u5f53\u591a\u4e2a\u4e8b\u52a1 \u5e76\u53d1 \u6267\u884c\u65f6, \u5728\u8bfb\u53d6\u6570\u636e\u65b9\u9762\u53ef\u80fd\u78b0\u5230\u7684\u95ee\u9898, \u5305\u62ec\u6709\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u3002(\u6362\u4e2a\u8bf4\u6cd5: \u8bfb\u73b0\u8c61\u662f\u6570\u636e\u5e93\u5728\u9ad8\u5e76\u53d1\u7684\u573a\u666f\u4e0b,\u591a\u4e2a\u540c\u65f6\u6267\u884c\u7684\u4e8b\u52a1\u5e26\u6765\u7684\u5f71\u54cd..) \u4e00\u4e9b\u6570\u636e\u5e93\u7ba1\u7406\u8f6f\u4ef6\u4f1a\u81ea\u5e26\u76f8\u5e94\u7684\u673a\u5236\u53bb\u89e3\u51b3\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u7b49\u95ee\u9898. \u5373\u6211\u4eec\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\u4e0d\u4f1a\u9047\u5230\u8fd9\u4e9b\u95ee\u9898. \u6240\u4ee5\u63a5\u4e0b\u6765\u7684\u4e00\u7cfb\u5217\u4e3e\u4f8b\u53ea\u662f\u4e3a\u4e86\u7406\u89e3, mysql\u5e95\u5c42\u6ca1\u6709\u89e3\u51b3,\u4f1a\u662f\u4ec0\u4e48\u6837\u5b50\u7684.. \u810f\u8bfb \u00b6 AB\u5e76\u53d1\u6267\u884c, \u4e8b\u52a1B\u6539\u5b8c\u6570\u636e\u540e\u6ca1\u6709\u63d0\u4ea4,\u5728A\u8bfb\u53d6\u8fd9\u6761\u6570\u636e\u540e,\u4e8b\u52a1B\u56de\u6eda,\u4e8b\u52a1A\u521a\u8bfb\u5230\u7684\u8fd9\u6761\u6570\u636e\u662f\u65e0\u6548\u6570\u636e(\u810f\u6570\u636e)... \u4e8b\u52a1A \u4e8b\u52a1B SELECT age FROM users WHERE id = 1; / will read 20 / \u8bfb\u5230\u503c\u4e3a20 UPDATE users SET age = 21 WHERE id = 1; / No commit here / \u4fee\u6539\u503c\u4e3a21\u540e \u6ca1\u6709\u63d0\u4ea4\u4e8b\u52a1 SELECT age FROM users WHERE id = 1; / will read 21 / \u8bfb\u5230\u503c\u4e3a21, (\u771f\u5b9e\u60c5\u51b5\u4e0b\u53ea\u4f1a\u8bfb\u523020, \u9694\u79bb\u6027) ROLLBACK; \u56de\u6eda, \u4e8b\u52a1A\u8bfb\u5230\u7684\u6570\u636e\u5c31\u662f\u810f\u6570\u636e \u4e0d\u53ef\u91cd\u590d\u8bfb \u00b6 \u4e8b\u52a1A\u8bfb\u53d6\u4e00\u884c\u8bb0\u5f55, \u7d27\u63a5\u7740\u4e8b\u52a1B\u4fee\u6539\u4e86A\u521a\u624d\u8bfb\u53d6\u7684\u90a3\u4e00\u884c\u8bb0\u5f55\u5e76\u4e14\u63d0\u4ea4\u4e86\u3002 \u7136\u540eA\u53c8\u518d\u6b21\u8bfb\u53d6\u8fd9\u884c\u8bb0\u5f55, \u53d1\u73b0\u4e0e\u521a\u624d\u8bfb\u53d6\u7684\u7ed3\u679c\u4e0d\u540c\u3002\u8fd9\u5c31\u79f0\u4e3a\u201c\u4e0d\u53ef\u91cd\u590d\u201d\u8bfb, \u56e0\u4e3aA\u539f\u6765\u8bfb\u53d6\u7684\u90a3\u884c\u8bb0\u5f55\u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316\u3002 \u4e8b\u52a1A \u4e8b\u52a1B SELECT * FROM users WHERE id = 1; / will read 20 / \u8bfb\u5230\u7684\u503c\u4e3a20 UPDATE users SET age = 21 WHERE id = 1; COMMIT; \u628a\u503c\u53d8\u6210\u4e8621 \u5e76\u4e14\u63d0\u4ea4\u4e86 SELECT * FROM users WHERE id = 1; COMMIT; \u518d\u8bfb, \u53d1\u73b0\u8bfb\u5230\u7684\u503c\u4e3a21\u4e86,\u524d\u540e\u8bfb\u5230\u7684\u503c\u4e0d\u4e00\u81f4 (\u771f\u5b9e\u60c5\u51b5\u4e0b\u8bfb\u5230\u7684\u5e94\u8be5\u662f20,\u9694\u79bb\u6027\uff09 \u5e7b\u8bfb \u00b6 \u4e0d\u53ef\u91cd\u590d\u8bfb\u7684\u4e00\u79cd\u7279\u6b8a\u73b0\u8c61 \u4e8b\u52a1A\u66f4\u6539\u6216\u8005\u67e5\u8be2\u4e86\u6570\u636e,\u5728\u6781\u77ed\u7684\u65f6\u95f4\u5185,\u4e8b\u52a1B\u53c8\u63d2\u5165\u53ef\u4e00\u6761\u65b0\u7684\u6570\u636e,\u5bfc\u81f4\u4e8b\u52a1A\u5728\u63a5\u4e0b\u6765\u7684\u67e5\u8be2\u4e2d,\u5c31\u4f1a\u53d1\u73b0\u6709\u51e0\u5217\u6570\u636e\u662f\u5b83\u5148\u524d\u6240\u6ca1\u6709\u7684.. \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u4e8b\u52a1A\u5c06id>3\u7684\u8bb0\u5f55\u8fdb\u884c\u4e86\u4fee\u6539\u5e76\u63d0\u4ea4.\u4e8b\u52a1A\u6267\u884c\u5b8c\u540e\u7acb\u523b\u9a8c\u8bc1\u7ed3\u679c.(\u5728\u90a3\u67e5\u8be2\u7684\u90a3\u4e00\u523b\uff01\u4e8b\u52a1B\u51d1\u5de7\u65b0\u63d2\u5165\u4e86\u4e00\u6761\u8bb0\u5f55\u5e76\u63d0\u4ea4.) \u5c31\u4f1a\u53d1\u73b0\u6709\u4e00\u6761\u8bb0\u5f55\u6ca1\u6709\u4fee\u6539\u6210\u529f... \u5c31\u8ddf\u7279\u55b5\u505a\u68a6\u4e00\u6837Hhhh.. \u6570\u636e\u5e93\u4f1a\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u4e8b\u52a1, \u591a\u4e2a\u4e8b\u52a1\u53ef\u80fd\u4f1a\u5e76\u53d1\u5730\u5bf9\u7f13\u5b58\u9875\u91cc\u7684\u540c\u4e00\u6279\u6570\u636e\u8fdb\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c, \u5c31\u53ef\u80fd\u51fa\u73b0\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u7b49\u73b0\u8c61... \u6570\u636e\u5e93\u8bbe\u8ba1\u4e86 \u9501\u673a\u5236 \u3001 \u4e8b\u52a1\u9694\u79bb\u673a\u5236 \u3001 MVCC \u591a\u7248\u672c\u9694\u79bb\u673a\u5236, \u7528\u4e00\u6574\u5957\u673a\u5236\u6765\u89e3\u51b3\u591a\u4e8b\u52a1\u5e76\u53d1\u95ee\u9898 (\u53cc\u5203\u5251 \u52a0\u9501\u5b89\u5168\u4e86 \u4f46\u6548\u7387\u4e5f\u4f1a\u964d\u4f4e..)","title":"\u8bfb\u73b0\u8c61"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/3_db_readPhenomenon/#_1","text":"AB\u5e76\u53d1\u6267\u884c, \u4e8b\u52a1B\u6539\u5b8c\u6570\u636e\u540e\u6ca1\u6709\u63d0\u4ea4,\u5728A\u8bfb\u53d6\u8fd9\u6761\u6570\u636e\u540e,\u4e8b\u52a1B\u56de\u6eda,\u4e8b\u52a1A\u521a\u8bfb\u5230\u7684\u8fd9\u6761\u6570\u636e\u662f\u65e0\u6548\u6570\u636e(\u810f\u6570\u636e)... \u4e8b\u52a1A \u4e8b\u52a1B SELECT age FROM users WHERE id = 1; / will read 20 / \u8bfb\u5230\u503c\u4e3a20 UPDATE users SET age = 21 WHERE id = 1; / No commit here / \u4fee\u6539\u503c\u4e3a21\u540e \u6ca1\u6709\u63d0\u4ea4\u4e8b\u52a1 SELECT age FROM users WHERE id = 1; / will read 21 / \u8bfb\u5230\u503c\u4e3a21, (\u771f\u5b9e\u60c5\u51b5\u4e0b\u53ea\u4f1a\u8bfb\u523020, \u9694\u79bb\u6027) ROLLBACK; \u56de\u6eda, \u4e8b\u52a1A\u8bfb\u5230\u7684\u6570\u636e\u5c31\u662f\u810f\u6570\u636e","title":"\u810f\u8bfb"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/3_db_readPhenomenon/#_2","text":"\u4e8b\u52a1A\u8bfb\u53d6\u4e00\u884c\u8bb0\u5f55, \u7d27\u63a5\u7740\u4e8b\u52a1B\u4fee\u6539\u4e86A\u521a\u624d\u8bfb\u53d6\u7684\u90a3\u4e00\u884c\u8bb0\u5f55\u5e76\u4e14\u63d0\u4ea4\u4e86\u3002 \u7136\u540eA\u53c8\u518d\u6b21\u8bfb\u53d6\u8fd9\u884c\u8bb0\u5f55, \u53d1\u73b0\u4e0e\u521a\u624d\u8bfb\u53d6\u7684\u7ed3\u679c\u4e0d\u540c\u3002\u8fd9\u5c31\u79f0\u4e3a\u201c\u4e0d\u53ef\u91cd\u590d\u201d\u8bfb, \u56e0\u4e3aA\u539f\u6765\u8bfb\u53d6\u7684\u90a3\u884c\u8bb0\u5f55\u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316\u3002 \u4e8b\u52a1A \u4e8b\u52a1B SELECT * FROM users WHERE id = 1; / will read 20 / \u8bfb\u5230\u7684\u503c\u4e3a20 UPDATE users SET age = 21 WHERE id = 1; COMMIT; \u628a\u503c\u53d8\u6210\u4e8621 \u5e76\u4e14\u63d0\u4ea4\u4e86 SELECT * FROM users WHERE id = 1; COMMIT; \u518d\u8bfb, \u53d1\u73b0\u8bfb\u5230\u7684\u503c\u4e3a21\u4e86,\u524d\u540e\u8bfb\u5230\u7684\u503c\u4e0d\u4e00\u81f4 (\u771f\u5b9e\u60c5\u51b5\u4e0b\u8bfb\u5230\u7684\u5e94\u8be5\u662f20,\u9694\u79bb\u6027\uff09","title":"\u4e0d\u53ef\u91cd\u590d\u8bfb"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/3_db_readPhenomenon/#_3","text":"\u4e0d\u53ef\u91cd\u590d\u8bfb\u7684\u4e00\u79cd\u7279\u6b8a\u73b0\u8c61 \u4e8b\u52a1A\u66f4\u6539\u6216\u8005\u67e5\u8be2\u4e86\u6570\u636e,\u5728\u6781\u77ed\u7684\u65f6\u95f4\u5185,\u4e8b\u52a1B\u53c8\u63d2\u5165\u53ef\u4e00\u6761\u65b0\u7684\u6570\u636e,\u5bfc\u81f4\u4e8b\u52a1A\u5728\u63a5\u4e0b\u6765\u7684\u67e5\u8be2\u4e2d,\u5c31\u4f1a\u53d1\u73b0\u6709\u51e0\u5217\u6570\u636e\u662f\u5b83\u5148\u524d\u6240\u6ca1\u6709\u7684.. \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u4e8b\u52a1A\u5c06id>3\u7684\u8bb0\u5f55\u8fdb\u884c\u4e86\u4fee\u6539\u5e76\u63d0\u4ea4.\u4e8b\u52a1A\u6267\u884c\u5b8c\u540e\u7acb\u523b\u9a8c\u8bc1\u7ed3\u679c.(\u5728\u90a3\u67e5\u8be2\u7684\u90a3\u4e00\u523b\uff01\u4e8b\u52a1B\u51d1\u5de7\u65b0\u63d2\u5165\u4e86\u4e00\u6761\u8bb0\u5f55\u5e76\u63d0\u4ea4.) \u5c31\u4f1a\u53d1\u73b0\u6709\u4e00\u6761\u8bb0\u5f55\u6ca1\u6709\u4fee\u6539\u6210\u529f... \u5c31\u8ddf\u7279\u55b5\u505a\u68a6\u4e00\u6837Hhhh.. \u6570\u636e\u5e93\u4f1a\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u4e8b\u52a1, \u591a\u4e2a\u4e8b\u52a1\u53ef\u80fd\u4f1a\u5e76\u53d1\u5730\u5bf9\u7f13\u5b58\u9875\u91cc\u7684\u540c\u4e00\u6279\u6570\u636e\u8fdb\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c, \u5c31\u53ef\u80fd\u51fa\u73b0\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u7b49\u73b0\u8c61... \u6570\u636e\u5e93\u8bbe\u8ba1\u4e86 \u9501\u673a\u5236 \u3001 \u4e8b\u52a1\u9694\u79bb\u673a\u5236 \u3001 MVCC \u591a\u7248\u672c\u9694\u79bb\u673a\u5236, \u7528\u4e00\u6574\u5957\u673a\u5236\u6765\u89e3\u51b3\u591a\u4e8b\u52a1\u5e76\u53d1\u95ee\u9898 (\u53cc\u5203\u5251 \u52a0\u9501\u5b89\u5168\u4e86 \u4f46\u6548\u7387\u4e5f\u4f1a\u964d\u4f4e..)","title":"\u5e7b\u8bfb"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/","text":"\u56de\u5fc6\u6740 \u7ad9\u5728\u5e76\u53d1\u7f16\u7a0b\u7684\u89d2\u5ea6 \u9501\u5206\u4e3a\u4e24\u5927\u7c7b \u4e92\u65a5\u9501: \u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u7531\u4e00\u4e2a\u4eba\u7528;\u4fe1\u53f7\u91cf: \u540c\u4e00\u65f6\u95f4\u591a\u4eba\u5728\u7528 \u4ec0\u4e48\u662f\u9501\u673a\u5236\uff1f \u00b6 \u4e3e\u4e2a\u6817\u5b50: \u540c\u4e00\u4e2a\u529e\u516c\u5ba4\u7684\u540c\u4e8b\u4eec, \u90fd\u60f3\u4f7f\u7528\u6253\u5370\u673a\u6253\u5370\u6587\u4ef6. \u5982\u679c\u4e0d\u52a0\u4ee5\u63a7\u5236. \u53ef\u80fd\u51fa\u73b0\u4e24\u4e2a\u4eba\u540c\u65f6\u6253\u5370\u4e0d\u540c\u7684\u5185\u5bb9\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc, \u5c31\u4f1a\u5f15\u8d77\u5185\u5bb9\u6df7\u4e71. \u4e8b\u52a1\u7684\u9501\u673a\u5236: \u5f53\u6709\u5e76\u53d1\u7684\u7684\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u64cd\u4f5c\u540c\u4e00\u4efd\u6570\u636e\u65f6,\u53ea\u6709\"\u62a2\u5230\"\u4e86\u9501\u7684\u4e8b\u52a1,\u624d\u80fd\u771f\u6b63\u7684\u53bb\u64cd\u4f5c\u6570\u636e,\u4f7f\u5f97\u6570\u636e\u7684\u5b89\u5168\u6027\u5f97\u5230\u4fdd\u8bc1\u3002 \u9501\u4fdd\u8bc1\u5e76\u53d1\u7684\u591a\u4e2a\u4e8b\u52a1\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u80fd\u8fd0\u884c, \u4f1a\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387. \u4f46\u80fd\u5927\u5927\u63d0\u5347\u6570\u636e\u7684\u5b89\u5168\u6027. \u6570\u636e\u5e93\u9501\u7684\u5206\u7c7b \u00b6 1> \u6309\u9501 \u7c92\u5ea6 \u5212\u5206: \u53ef\u5206\u4e3a\u884c\u7ea7\u9501\u3001\u8868\u7ea7\u9501\u3001\u9875\u7ea7\u9501 -- \u7c92\u5ea6\u4f9d\u6b21\u589e\u5927 \u9501\u7684\u7ea7\u522b\u4f9d\u6b21\u9012\u589e, \u7ea7\u522b\u8d8a\u9ad8 \u5e76\u53d1\u6548\u7387\u8d8a\u4f4e, (\u4e3b\u8981\u5173\u6ce8\u884c\u7ea7\u9501,\u540e\u9762\u4e24\u57fa\u672c\u4e0d\u7528) 2> \u6309\u9501 \u7ea7\u522b \u5212\u5206: \u53ef\u5206\u4e3a \u5171\u4eab\u9501\u3001\u6392\u4ed6\u9501 \u5171\u4eab\u4fa7\u91cd\u4e8e\u53ea\u8ba9\u8bfb\u4e0d\u8ba9\u5199,\u6392\u4ed6\u80fd\u6539\u4e5f\u80fd\u5199 3> \u6309\u9501 \u4f7f\u7528\u65b9\u5f0f \u5212\u5206: \u53ef\u5206\u4e3a \u4e50\u89c2\u9501\u3001\u60b2\u89c2\u9501 4> \u6309\u9501 \u52a0\u9501\u65b9\u5f0f \u5212\u5206: \u53ef\u5206\u4e3a \u81ea\u52a8\u9501 \u3001\u663e\u5f0f\u9501 5> \u6309\u9501 \u64cd\u4f5c \u5212\u5206: \u53ef\u5206\u4e3aDML\u9501\u3001DDL\u9501 \u884c\u7ea7\u9501 \u00b6 \u6545\u540d\u601d\u610f, \u8868\u793a\u53ea\u9488\u5bf9\u5f53\u524d\u64cd\u4f5c\u7684\u884c(eg: 4 5 6\u884c)\u8fdb\u884c\u52a0\u9501, InnoDB\u5f15\u64ce\u652f\u6301. \u884c\u7ea7\u9501\u52a0\u9501\u7c92\u5ea6\u6700\u5c0f,\u4f46\u52a0\u9501\u7684\u5f00\u9500\u4e5f\u6700\u5927. \u884c\u7ea7\u9501\u5206\u4e3a \u4e92\u65a5\u9501(\u6392\u4ed6\u9501) \u548c \u5171\u4eab\u9501 \u4e24\u79cd. \u8981\u77e5\u9053\u4e00\u70b9: \u5728\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u4e2d,\u6211\u4eec\u901a\u5e38\u4f1a\u5c06\u5e93\u3001\u8868\u7ed3\u6784\u5efa\u597d. \u5f80\u540e\u90fd\u662f\u9488\u5bf9\u8868\u8bb0\u5f55\u7684\u64cd\u4f5c. \u64cd\u4f5c\u65e0\u975e\u56db\u79cd, insert delete update select \u5199 - \u589e\u5220\u6539; \u8bfb - \u67e5 \u4e92\u65a5\u9501(\u6392\u4ed6\u9501) \u00b6 \u6392\u4ed6\u9501\u7b80\u79f0X\u9501 \u4e00\u65e6\u67d0\u4e00\u6570\u636e\u83b7\u5f97\u6392\u4ed6\u9501\u540e,\u5176\u5b83\u4e8b\u52a1\u90fd\u4e0d\u80fd\u5bf9\u6b64\u6570\u636e\u518d\u52a0\u9501,\u4ec0\u4e48\u9501(x\u9501\u3001s\u9501)\u90fd\u4e0d\u884c\uff01 \u4e00\u65e6\u4e8b\u52a1A\u5bf9\u6570\u636eP\u52a0\u4e86\u6392\u4ed6\u9501: \u90a3\u4e48\u5176\u5b83\u4e8b\u52a1\u65e0\u6cd5\u5bf9\u6570\u636eP\u52a0\u4efb\u4f55\u9501; \u53ea\u6709\u62ff\u5230\u9501\u7684\u4e8b\u52a1A\u53ef\u4ee5\u64cd\u4f5c\u6570\u636eP,\u800c\u4e14\u53ef\u4ee5\u8bfb\u4e5f\u53ef\u4ee5\u5199 \u4e8b\u52a1A\u5bf9\u6570\u636eP\u52a0\u4ec0\u4e48\u9501(x\u9501\u3001s\u9501)\u90fd\u884c.. \u5bf9\u4e8e\u5199\u64cd\u4f5c insert\u3001update\u3001delete\u8bed\u53e5, InnoDB\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u6570\u636e\u52a0\u9501, \u800c\u4e14\u662f\u6392\u4ed6\u9501 \u7b80\u5355\u6765\u8bf4,\u5199\u64cd\u4f5c\u6709\u9501\u624d\u80fd\u6210\u529f\u6267\u884c \u4e8b\u52a1A\u5df2\u7ecf\u7ed9\u4e86\u8fd9\u884c\u6570\u636e\u6392\u4ed6\u9501\u4e86 \u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u884c\u6570\u636e\u7ed9\u4e0d\u4e86\u9501\u4e86\u554a \u5bf9\u4e8e\u8bfb\u64cd\u4f5c select\u8bed\u53e5, \u9ed8\u8ba4\u4e0d\u4f1a\u53d7\u4efb\u4f55\u9501\u7684\u5f71\u54cd,InnoDB\u4e0d\u4f1a\u5bf9\u5176\u52a0\u4efb\u4f55\u9501, \u9700\u8981\u6211\u4eec\u624b\u52a8\u81ea\u5df1\u52a0 SELECT ... LOCK IN SHARE MODE; SELECT ... FOR UPDATE; /* select * from employee; +----+---------+-----+ | id | name | age | +----+---------+-----+ | 1 | egon | 18 | | 2 | alex | 18 | | 3 | wupeiqi | 20 | +----+---------+-----+ */ \u8bed\u53e5 1 : select * from employee ; \u8bed\u53e5 2 : update employee set name = 'EGON' where id = 1 ; \u8bed\u53e5 3 : update employee set name = 'xxx' where id = 1 ; \u8bed\u53e5 4 : update employee set name = '666' where id = 1 ; \u8bed\u53e5 5 : update employee set name = '777' where id = 1 ; \u8bed\u53e5 6 : select * from employee where id = 3 for update ; \u8bed\u53e5 7 : select * from employee ; \u8bed\u53e5 8 : select * from employee where id > 1 for update ; \u8bed\u53e5 9 : update employee set name = 'abc' where id = 3 ; \u8bed\u53e5 10 : update employee set name = 'abc' where id = 4 ; \u7ec8\u7aef A\u76f4\u63a5\u6267\u884c\u8bed\u53e52 , \u4fee\u6539\u6210\u529f . \u7d27\u63a5\u7740\u7ec8\u7aef B\u6267\u884c\u8bed\u53e53 , \u4e5f\u4fee\u6539\u6210\u529f . \u89e3\u91ca : A\u7ec8\u7aef , \u9690\u5f0f\u5f00\u542f\u4e86\u4e8b\u52a1 , \u4e3a update\u8bed\u53e5\u52a0\u4e86\u4e92\u65a5\u9501 , id\u4e3a1\u7684\u8fd9\u4e00\u884c\u6570\u636e\u88ab\u9501\u4f4f\u4e86 , \u5176\u5b83\u7ec8\u7aef\u4f1a\u8bdd\u90fd\u4e0d\u80fd\u5bf9\u8fd9\u4e00\u884c\u6570\u636e\u8fdb\u884c\u5199\u64cd\u4f5c , \u5f85\u9690\u5f0f commit\u63d0\u4ea4\u4e8b\u52a1\u540e , \u4e92\u65a5\u9501\u91ca\u653e .. \u56e0\u4e3a A\u7ec8\u7aef\u5bf9id\u4e3a1\u7684\u884c\u52a0\u7684\u9501\u91ca\u653e\u4e86 , B\u7ec8\u7aef\u6267\u884c\u8bed\u53e53\u5c31\u4e0d\u4f1a\u963b\u585e . \u4e0d\u8d39\u5439\u7070\u4e4b\u529b\u5c31\u62a2\u5230\u4e86\u8fd9\u628a\u9501 . \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . A\u6267\u884c\u8bed\u53e54\u6210\u529f , B\u8fd0\u884cselect\u8bed\u53e5\u662f\u80fd\u6210\u529f\u7684 , select\u8bed\u53e5\u4e0d\u53d7\u9501\u7684\u5f71\u54cd , \u4f46 B\u7ec8\u7aef\u6267\u884c\u8bed\u53e55 , \u4f1a\u963b\u585e\u5728\u539f\u5730 .. \u5f53 A\u7ec8\u7aefrollback\u6216commit\u91ca\u653e\u9501\u540e . B\u7ec8\u7aef\u7684\u8bed\u53e55\u7acb\u523b\u6267\u884c\u6210\u529f . ( \u8865\u5145 : A\u53ef\u4ee5\u8fde\u7eed\u6267\u884c\u6210\u529f\u8bed\u53e54\u548c\u8bed\u53e55 \u56e0\u4e3a\u6392\u5b83\u9501\u4e00\u76f4\u5728\u4e8b\u52a1 A\u64cd\u4f5c\u7684id = 1 \u7684\u90a3\u884c\u8eab\u4e0a\u554a\uff01 ) \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . A\u6267\u884c\u8bed\u53e56 , \u67e5\u51fa\u4e86\u7ed3\u679c\u5e76\u4e14\u628a id = 3 \u7684\u8fd9\u884c\u52a0\u4e92\u65a5\u9501\u7ed9\u9501\u4f4f\u4e86 . B\u6267\u884c\u8bed\u53e57\u662f\u80fd\u6210\u529f\u67e5\u5904\u7ed3\u679c\u7684 , \u56e0\u4e3a\u5355\u7eaf\u7684 select\u8bed\u53e5\u4e0d\u53d7\u9501\u7684\u5f71\u54cd . B\u63a5\u7740\u6267\u884c\u8bed\u53e58 ( \u5206\u6790 : \u7ed9 id > 1 \u7684\u884c\u52a0\u6392\u5b83\u9501 , \u5305\u542b id = 3 \u7684\u90a3\u884c ), \u6572\u4e0b\u56de\u8f66\u4f1a\u53d1\u73b0\u76f4\u63a5\u963b\u585e\u5728\u539f\u5730 .. B\u7ec8\u7aefctrl + c\u5f3a\u884c\u9000\u51fa\u540e\u6267\u884c\u8bed\u53e59 ( \u5206\u6790 : update \u8bed\u53e5\u5bf9 id = 3 \u52a0\u6392\u5b83\u9501 ), \u6572\u4e0b\u56de\u8f66 , \u4f9d\u65e7\u4f1a\u963b\u585e\u5728\u539f\u5730 . why ? \u56e0\u4e3a A\u7ec8\u7aef\u6ca1\u6709\u5bf9id = 3 \u7684\u884c\u7684\u9501\u8fdb\u884c\u91ca\u653e\uff01\uff01\u4f46\u82e5 B\u6267\u884c\u8bed\u53e510\u662f\u80fd\u6210\u529f\u7684 \uff01\uff01 why \uff1f\u770b\u4e0b\u65b9\u7684\u89e3\u6790\u3002 \u3010\u6ce8\u610f : id\u5b57\u6bb5\u662f\u4e3b\u952e\u662f\u7d22\u5f15 \uff01\uff01 innodb\u9501\u7684\u5176\u5b9e\u662f\u7d22\u5f15 \uff01\u5373\u53ea\u6709\u52a0\u4e86\u7d22\u5f15\u7684\u5b57\u6bb5\u624d\u662f\u884c\u7ea7\u9501 .. \u547d\u4e2d\u4e86\u7d22\u5f15\u5c31\u9501\u884c , \u82e5\u6b64\u5b57\u6bb5\u4e0d\u662f\u7d22\u5f15 , \u5b83\u4f1a\u5c06\u8868\u4e2d\u7684\u6240\u6709\u884c\u90fd\u9501\u4f4f , \u76f8\u5f53\u4e8e\u8868\u7ea7\u9501 ..( \u5b9e\u9645\u4e0a\u662f\u884c\u7ea7\u9501\u54e6 \u53ea\u662f\u76f8\u5f53\u4e8e ) \u3011 \u5148\u5c06\u8868 employee\u7684\u4e3b\u952eid\u5b57\u6bb5\u7ed9\u5220\u9664 . alter table employee modify id int ; alter table employee drop primary key ; \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . A\u6267\u884c\u8bed\u53e56 , B\u6267\u884c\u8bed\u53e59 , \u8bed\u53e5 10 \u90fd\u4f1a\u963b\u585e\u5728\u539f\u5730 ... #### \u5171\u4eab\u9501(\u8bfb\u9501) \u5171\u4eab\u9501 \u7b80\u79f0S\u9501 \u82e5\u4e8b\u52a1A\u5bf9\u6570\u636eP\u52a0\u4e0a\u5171\u4eab\u9501\u540e, \u5176\u4ed6\u4e8b\u52a1\u53ea\u80fd\u5bf9\u6570\u636eP\u518d\u52a0\u5171\u4eab\u9501\u6216\u4e0d\u52a0\u9501 \u4e00\u65e6\u591a\u4e2a\u4e8b\u52a1\u90fd\u5bf9\u6570\u636eP\u52a0\u4e86\u5171\u4eab\u9501,\u5927\u5bb6\u90fd\u53ea\u80fd\u8bfb\u4e0d\u80fd\u6539.. \u4e8b\u52a1 A\u5bf9id = 1 \u7684\u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 , \u4e8b\u52a1 B\u4e5f\u5bf9id = 1 \u7684\u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 . \u4e8b\u52a1 A\u80fd\u5426\u6267\u884c\u5bf9id = 1 \u8fd9\u4e00\u884c\u7684 update\u64cd\u4f5c \uff1f \u4e0d\u53ef\u4ee5 , \u56e0\u4e3a update\u8bed\u53e5\u9ed8\u8ba4\u4f1a\u52a0\u6392\u5b83\u9501 , \u4f46\u662f\u52a0\u4e0d\u4e0a\uff01\u56e0\u4e3a\u4e8b\u52a1 B\u5bf9\u8fd9\u884c\u6570\u636e\u52a0\u4e86\u5171\u4eab\u9501 , \u4e8b\u52a1 A\u53ea\u80fd\u5bf9\u5176\u52a0\u5171\u4eab\u9501\u6216\u4e0d\u52a0\u9501 . \u7ad9\u5728\u4e8b\u52a1 B\u7684\u89d2\u5ea6\u540c\u7406 . \u4e8b\u52a1 B\u4e5f\u4e0d\u80fd\u5bf9\u8fd9\u4e00\u884c\u6570\u636e\u8fdb\u884cupdate\u64cd\u4f5c . \u7279\u4f8b : \u82e5\u4e8b\u52a1 A\u5bf9id = 1 \u7684\u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 , \u6ca1\u6709\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u4e00\u884c\u6570\u636e\u52a0\u5171\u4eab\u9501\u4e86 . \u8fd9\u6837\u7684\u8bdd , \u6ca1\u4eba\u8ddf\u4e8b\u52a1 A\u62a2\u9501 , \u4e8b\u52a1 A\u53ef\u4ee5\u5bf9\u4e00\u884c\u6570\u636e\u8fdb\u884cupdate\u64cd\u4f5c , \u518d\u7ed9\u8fd9\u884c\u6570\u636e\u52a0\u4e00\u4e2a\u4e92\u65a5\u9501 . --- /* \u6b7b\u9501\u95ee\u9898 */ \u8bed\u53e5 1 : select * from employee where id = 1 lock in share mode ; \u8bed\u53e5 2 : update employee set name = 'xxx' where id = 1 ; \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . \u4e8b\u52a1 A\u6267\u884c\u8bed\u53e51 , \u4e8b\u52a1 2 \u4e5f\u6267\u884c\u8bed\u53e5 1 ; \u63a5\u7740 , \u4e8b\u52a1 B\u6267\u884c\u8bed\u53e52 , \u963b\u585e , \u56e0\u4e3a\u7ad9\u5728\u4e8b\u52a1 B\u7684\u89d2\u5ea6\u4e8b\u52a1A\u5bf9id = 1 \u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 , \u90a3\u4e48\u4e8b\u52a1 B\u4e5f\u5c31\u53ea\u80fd\u5bf9\u8fd9\u4e00\u884c\u52a0\u5171\u4eab\u9501\u6216\u4e0d\u52a0\u9501 , \u8bed\u53e5 2 \u7684 update\u7684\u6392\u5b83\u9501\u52a0\u4e0d\u4e0a\u5bfc\u81f4\u4e86\u963b\u585e .. \u6b64\u65f6 , \u4e8b\u52a1 A\u4e5f\u6267\u884c\u4e86\u8bed\u53e52 , \u7ec8\u7aef A\u76f4\u63a5\u547d\u4ee4\u884c\u62a5\u9519 \"ERROR 1213 (40001): Deadlock found when trying to get lock; try restarting transaction\" \u89e6\u53d1\u4e86\u6b7b\u9501\u73b0\u8c61 , \u4e8b\u52a1 A\u88ab\u5f3a\u5236\u7ec8\u6b62 , \u91ca\u653e\u4e86\u6240\u6709\u9501 . \u4e8b\u52a1 B\u7684\u8bed\u53e52\u7acb\u523b\u8fd0\u884c\u6210\u529f .. Innodb\u7684\u9501\u673a\u5236 \u00b6 InnoDB(\u7d22\u5f15\u7ec4\u7ec7\u8868)\u652f\u6301\u884c\u7ea7\u9501\u548c\u8868\u7ea7\u9501,\u9ed8\u8ba4\u4e3a\u884c\u7ea7\u9501. InnoDB\u884c\u7ea7\u9501\u7684\u4e09\u5927\u7279\u70b9 \u00b6 \u9501\u7684\u662f\u7d22\u5f15 \u53ea\u6709\u5728\u547d\u4e2d\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b,\u624d\u4f1a\u9501\u4f4f\u7b26\u5408\u6761\u4ef6\u7684\u4e00\u884c\u6216\u51e0\u884c.\u6ca1\u547d\u4e2d\u7684\u8bdd,\u9501\u5168\u90e8\u884c,\u76f8\u5f53\u4e8e\u9501\u8868. \u5177\u4f53\u6765\u8bf4,innodb\u5b58\u50a8\u5f15\u64ce\u7684\u7d22\u5f15\u5206\u4e3a\u4e3b\u952e\u7d22\u5f15\u548c\u8f85\u52a9\u7d22\u5f15 \u547d\u4e2d\u7684\u662f\u4e3b\u952e\u7d22\u5f15,\u9501\u7684\u5c31\u662f\u4e3b\u952e\u7d22\u5f15\u5bf9\u5e94\u7684\u8bb0\u5f55; \u547d\u4e2d\u7684\u662f\u8f85\u52a9\u7d22\u5f15,\u4f1a\u5148\u9501\u4f4f\u8be5\u8f85\u52a9\u7d22\u5f15\u7684\u8bb0\u5f55,\u518d\u9501\u4f4f\u76f8\u5173\u7684\u4e3b\u952e\u7d22\u5f15\u7684\u8bb0\u5f55... \u5982\u679c\u6ca1\u6709\u7d22\u5f15,Innodb\u4f1a\u901a\u8fc7\u9690\u85cf\u7684\u805a\u7c07\u7d22\u5f15\u6765\u5bf9\u8bb0\u5f55\u52a0\u9501..\u5b9e\u9645\u6548\u679c\u8ddf\u8868\u7ea7\u9501\u4e00\u6837.. MYISAM\u652f\u6301\u8868\u9501 , \u4e0d\u652f\u6301\u884c\u9501 ; InnoDB\u5f15\u64ce\u652f\u6301\u884c\u9501\u548c\u8868\u9501 . \u5373\u5728MYISAM\u4e0b\u5982\u679c\u8981\u52a0\u9501 , \u65e0\u8bba\u600e\u4e48\u52a0\u90fd\u4f1a\u662f\u8868\u9501 . \u5728InnoDB\u5f15\u64ce\u652f\u6301\u4e0b\u5982\u679c\u662f\u57fa\u4e8e\u7d22\u5f15\u67e5\u8be2\u7684\u6570\u636e\u5219\u662f\u884c\u7ea7\u9501 , \u5426\u5219\u5c31\u662f\u8868\u9501 . So , \u4e00\u822c\u60c5\u51b5\u4e0b\u6211\u4eec\u4f1a\u9009\u62e9\u4f7f\u7528innodb\u5f15\u64ce , \u5e76\u4e14\u5728 \u641c\u7d22 \u65f6\u4e5f\u4f1a\u4f7f\u7528\u7d22\u5f15 ( \u547d\u4e2d\u7d22\u5f15 ) . \u5728innodb\u5f15\u64ce\u4e2d , update \u3001 insert \u3001 delete\u7684\u884c\u4e3a\u4f1a\u81ea\u52a8\u52a0\u9501 . \u5185\u90e8\u90fd\u4f1a\u5148\u7533\u8bf7\u9501 ( \u6392\u5b83\u9501 ), \u7533\u8bf7\u5230\u4e4b\u540e\u624d\u6267\u884c\u76f8\u5173\u64cd\u4f5c , \u6700\u540e\u518d\u91ca\u653e\u9501 . \u6240\u4ee5 , \u5f53\u591a\u4e2a\u4eba\u540c\u65f6\u5411\u6570\u636e\u5e93\u6267\u884c : insert \u3001 update \u3001 delete\u7b49\u64cd\u4f5c\u65f6 , \u5185\u90e8\u52a0\u9501\u540e\u4f1a\u6392\u961f\u9010\u4e00\u6267\u884c . \u800cselect\u5219\u9ed8\u8ba4\u4e0d\u4f1a\u7533\u8bf7\u9501 . \u82e5\u4f60\u60f3\u8981\u8ba9select\u53bb\u7533\u8bf7\u9501 , \u5219\u9700\u8981\u914d\u5408 \u4e8b\u52a1 + \u7279\u6b8a\u8bed\u6cd5\u6765\u5b9e\u73b0 . \u4e3e\u4e2a\u4f8b\u5b50 : ` for update ` , \u6392\u5b83\u9501 , \u52a0\u9501\u4e4b\u540e , \u5176\u4ed6\u4e0d\u53ef\u4ee5\u8bfb\u5199 . begin ; -- \u5f00\u542f\u4e8b\u52a1 select * from L1 where name = \"\u6b66\u6c9b\u9f50\" for update ; -- name\u5217\u4e0d\u662f\u7d22\u5f15 \uff08 \u8868\u9501 \uff09 commit ; -- \u7ed3\u675f\u4e8b\u52a1 , \u4e8b\u52a1\u7ed3\u675f\u540e\u91ca\u653e\u9501 ! begin ; -- \u6216\u8005 start transaction ; select * from L1 where id = 1 for update ; -- id\u5217\u662f\u7d22\u5f15 \uff08 \u884c\u9501 \uff09 commit ; \u884c\u7ea7\u9501\u4e09\u79cd\u7b97\u6cd5 \u00b6 \u4e09\u79cd\u7b97\u6cd5\u90fd\u4ee5\u4ee5\u547d\u4e2d\u7d22\u5f15\u4e3a\u524d\u63d0\uff01\uff01 innodb\u5f15\u64ce\u7684\u884c\u7ea7\u9501\u7b97\u6cd5\u9ed8\u8ba4\u662fNext-Key Lock Record Lock (\u5355\u4e2a\u8bb0\u5f55\u52a0\u9501) : \u53ea\u5bf9\u7b26\u5408\u6761\u4ef6\u7684\u884c\u52a0\u9501! Gap Lock (\u95f4\u9699\u9501) : \u9501\u5b9a\u4e00\u4e2a\u8303\u56f4,\u4f46\u4e0d\u5305\u62ec\u8bb0\u5f55\u672c\u8eab \u4f55\u4e3a\u95f4\u9699\uff1feg \u5e74\u9f8418 20 25, 18\u523020\u4e4b\u95f4\u5c31\u662f\u95f4\u9699;20\u523025\u4e4b\u95f4\u4e5f\u662f\u95f4\u9699! \u95f4\u9699\u9501\u53ef\u4ee5\u89e3\u51b3\u8bfb\u73b0\u8c61\u91cc\u7684\u5e7b\u8bfb. Next-Key Lock = Record Lock + Gap Lock \u6bd4\u5982where ege=20,\u4ed6\u5c31\u4f1a\u628a20\u5bf9\u5e94\u7684\u8fd9\u884c\u8bb0\u5f55\u4ee5\u53ca20\u7684\u4e0a\u4e0b\u4e24\u4e2a\u95f4\u9699(18-20,20-25)\u90fd\u9501\u4f4f\uff01 \u6b7b\u9501\u95ee\u9898 \u00b6 \u7b80\u5355\u60c5\u51b5 \u00b6 \u4e8b\u52a1A: begin; select * from employee where id = 1 lock in share mode; -- step1 \u52a0\u9501\u5931\u8d25 \u4e8b\u52a1B\u5df2\u7ecf\u5bf9id=3\u7684\u884c\u52a0\u9501\u4e86 \u00b6 update employee set name='xxx' where id = 3; -- step3 \u963b\u585e\u5728\u539f\u5730 \u4e8b\u52a1B: begin; \u7075\u9b42\u4e09\u95ee: \u52a0\u7684\u4ec0\u4e48\u9501?\u5bf9\u4ec0\u4e48\u52a0\u7684\u9501?\u5728\u52a0\u9501\u7684\u65f6\u5019,\u6709\u65e0\u5176\u4ed6\u4e8b\u52a1\u5bf9\u5176\u52a0\u9501? \u00b6 \u52a0\u6392\u4ed6\u9501;id=3\u7684\u884c\u52a0\u9501;\u6ca1\u6709 \u52a0\u6210\u529f\u4e86\uff01 \u00b6 delete from employee where id = 3; -- step2 \u5bf9id=1\u7684\u884c\u52a0\u6392\u4ed6\u9501;\u52a0\u9501\u5931\u8d25! \u56e0\u4e3a\u4e8b\u52a1A\u5bf9id=1\u7684\u884c\u52a0\u4e86\u5171\u4eab\u9501 \u00b6 delete from employee where id = 1; -- step4 \u963b\u585e\u5728\u539f\u5730 \u5e76\u53d1\u9690\u85cf\u60c5\u51b5 \u00b6 \u9ad8\u5e76\u53d1\u7684\u65f6\u5019,\u6709\u51e0\u7387\u51fa\u73b0\u8fd9\u6837\u7684\u95ee\u9898.. \uff08innodb\u9501\u673a\u5236\u7684\u4e09\u5927\u7279\u70b9\u5bfc\u81f4\u7684\uff09 -- \u8868emp \u8868\u5bf9id\u5b57\u6bb5\u52a0\u4e86\u4e3b\u952e\u7d22\u5f15;name\u5b57\u6bb5\u548cage\u5b57\u6bb5\u90fd\u52a0\u4e86\u8f85\u52a9\u7d22\u5f15.. + ----+---------+-----+-----+ | id | name | age | sex | + ----+---------+-----+-----+ | 1 | egon | 78 | male | | 2 | xxxx | 19 | male | + ----+---------+-----+-----+ \u8bed\u53e5 1 : select * from emp where name = 'egon' or name = 'xxxx' for update ; \u8bed\u53e5 2 : update emp set sex = 'famale' where age = 19 or age = 78 ; -- \u8bed\u53e51\u548c\u8bed\u53e52\u90fd\u547d\u4e2d\u7684\u8f85\u52a9\u7d22\u5f15,\u4f1a\u5148\u5bf9\u8f85\u52a9\u7d22\u5f15\u52a0\u9501,\u518d\u5bf9\u4e3b\u952e\u7d22\u5f15\u52a0\u9501 -- eg: \u8bed\u53e51\u9501\u7684\u5148\u540e (egon,1) (xxxx,2)(1,\u6574\u884c)(2,\u6574\u884c) \u8bb2\u9053\u7406 \u82e5\u4e8b\u52a1 A\u6267\u884c\u8bed\u53e51 , \u4f1a\u5bf9\u540d\u5b57\u4e3a 'egon' \u548c 'xxxx' \u7684\u884c\u52a0\u4e86\u4e92\u65a5\u9501 . \u5bf9\u4e3b\u952e\u7d22\u5f15\u52a0\u9501\u987a\u5e8f\u662f < 1 , 2 > \u82e5\u4e8b\u52a1 B\u6267\u884c\u8bed\u53e52 , \u4f1a\u5bf9\u5e74\u9f84\u4e3a 19 \u548c 78 \u7684\u884c\u52a0\u4e92\u65a5\u9501 . \u5bf9\u4e3b\u952e\u7d22\u5f15\u52a0\u9501\u7684\u987a\u5e8f\u662f < 2 , 1 > \u4e8b\u52a1 A\u548c\u4e8b\u52a1B\u5e76\u53d1\u540c\u65f6\u8fd0\u884c , \u4e8b\u52a1 A\u4e0a\u6765\u5148\u628a\u4e3b\u952e1\u7ed9\u9501\u4f4f , \u4e8b\u52a1 B\u4e0a\u6765\u5148\u628a\u4e3b\u952e2\u9501\u4f4f , \u63a5\u4e0b\u6765\u5c31 BBQ\u4e86 ... \u4e8b\u52a1 A\u5bf9\u4e8b\u52a1B\u8bf4\u4f60\u628a\u4e3b\u952e2\u7ed9\u6211\u91ca\u653e\u51fa\u6765 , \u6211\u8981\u52a0\u9501 \u5c2c\u4f4f\u4e86 .. \u4e8b\u52a1 B\u5bf9\u4e8b\u52a1A\u8bf4\u4f60\u628a\u4e3b\u952e1\u7ed9\u6211\u91ca\u653e\u51fa\u6765 , \u6211\u8981\u52a0\u9501 \u5c2c\u4f4f\u4e86 .. \u4e8b\u52a1\u9694\u79bb\u673a\u5236 \u00b6 \u4e8b\u52a1\u5177\u6709\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027\u56db\u5927\u7279\u6027.. \u800c\u9694\u79bb\u6027\u987e\u540d\u601d\u4e49\u6307\u7684\u5c31\u662f\u4e8b\u52a1\u5f7c\u6b64\u4e4b\u95f4\u95f4\u9694\u79bb\u5f00,\u591a\u4e2a\u4e8b\u52a1\u5728\u540c\u65f6\u5904\u7406\u4e00\u4e2a\u6570\u636e\u65f6\u5f7c\u6b64\u4e4b\u95f4\u4e92\u76f8\u4e0d\u5f71\u54cd.\u82e5\u9694\u79bb\u4e0d\u591f\u597d,\u5c31\u4f1a\u51fa\u73b0\u8bfb\u73b0\u8c61.. \u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u8d8a\u9ad8, \u5e76\u53d1\u80fd\u529b\u4e5f\u5c31\u8d8a\u4f4e Y\uff1a\u53ef\u80fd\u51fa\u73b0 N\uff1a\u4e0d\u4f1a\u51fa\u73b0 \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb Read uncommitted \u672a\u63d0\u4ea4\u8bfb Y Y Y Read committed \u63d0\u4ea4\u8bfb N Y Y Repeatable reads \u53ef\u91cd\u590d\u8bfb N N Y Serializable \u53ef\u5e8f\u5217\u5316 N N N READ UNCOMMITTED\uff1a\u53ef\u4ee5\u8bfb\u53d6\u4e8b\u52a1\u4e2d\u8fd8\u672a\u63d0\u4ea4\u7684\u88ab\u66f4\u6539\u7684\u6570\u636e. READ COMMITTED\uff1a\u53ea\u80fd\u8bfb\u53d6\u4e8b\u52a1\u4e2d\u5df2\u7ecf\u63d0\u4ea4\u7684\u88ab\u66f4\u6539\u7684\u6570\u636e. REPEATABLE READ\uff1a\u8868\u793a\u4e00\u4e2a\u4e8b\u52a1\u4e2d, \u5bf9\u4e00\u4e2a\u6570\u636e\u8bfb\u53d6\u7684\u503c, \u6c38\u8fdc\u8ddf\u7b2c\u4e00\u6b21\u8bfb\u53d6\u7684\u503c\u4e00\u81f4, \u4e0d\u53d7\u5176\u4ed6\u4e8b\u52a1\u4e2d\u6570\u636e\u64cd\u4f5c\u7684\u5f71\u54cd\u3002\u8fd9\u4e5f\u662f MySQL \u7684\u9ed8\u8ba4\u9009\u9879. SERIALIZABLE\uff1a\u8868\u793a\u4efb\u4f55\u4e00\u4e2a\u4e8b\u52a1, \u4e00\u65e6\u5bf9\u67d0\u4e00\u4e2a\u6570\u636e\u8fdb\u884c\u4e86\u4efb\u4f55\u64cd\u4f5c, \u90a3\u4e48, \u4e00\u76f4\u5230\u8fd9\u4e2a\u4e8b\u52a1\u7ed3\u675f, MySQL \u90fd\u4f1a\u628a\u8fd9\u4e2a\u6570\u636e\u9501\u4f4f, \u7981\u6b62\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u4e2a\u6570\u636e\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c. \u9898\u5916\u8bdd: Django\u6846\u67b6\u91cc\u63a8\u8350\u4f7f\u7528RC(\u63d0\u4ea4\u8bfb)\u673a\u5236,\u6846\u67b6\u4f1a\u5e2e\u5fd9\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u95ee\u9898... mysql\u9ed8\u8ba4\u7684\u662fRepeatable reads\u673a\u5236,\u8fd9\u4e00\u673a\u5236\u6ca1\u6709\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898! \u4f46\u662f\u7528Innodb\u5f15\u64ce\u7684\u8bdd,\u5b83\u7684Next-Key Lock \u884c\u7ea7\u9501\u7b97\u6cd5\u89e3\u51b3\u5566\uff01 \u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501 \u00b6 \u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501\u66f4\u50cf\u662f\u4e00\u79cd\u7f16\u7a0b\u601d\u60f3.. \u662f\u9501\u5177\u4f53\u7684\u4e00\u79cd\u5e94\u7528\u65b9\u5f0f \u60b2\u89c2\u9501 \u00b6 \u6bcf\u6b21\u5199\u6570\u636e\u90fd\u8ba4\u4e3a\u4e00\u5b9a\u4f1a\u6709\u4eba\u8ddf\u5b83\u540c\u65f6\u5199\u8fd9\u4efd\u6570\u636e.. \u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00,\u6709\u6ca1\u6709\u4eba\u8ddf\u6211\u62a2,\u4e00\u4e0a\u6765\u5c31\u52a0\u9501! \u5b89\u5168\u6027\u9ad8,\u6548\u7387\u4f4e,\u5e76\u53d1\u4f4e,\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u4eba\u7b49\u5f85.. (\u51e0\u4e4e\u4e0d\u7528..\u6548\u7387\u592a\u4f4e\u4e86) \u4e50\u89c2\u9501 \u00b6 \u6bcf\u6b21\u5199\u6570\u636e\u90fd\u8ba4\u4e3a\u6ca1\u4eba\u8ddf\u5b83\u540c\u65f6\u5199\u8fd9\u4efd\u6570\u636e.. \u6ca1\u6709\u52a0\u9501,\u4e0d\u5f71\u54cd\u5e76\u53d1\u6548\u7387;\u5927\u91cf\u4eba\u540c\u65f6\u4fee\u6539,\u5c31\u4f1a\u6709\u5927\u91cf\u7684\u63d0\u4ea4\u5931\u8d25..\u65e0\u6548\u63d0\u4ea4.. \u5b83\u6ca1\u6709\u7528\u6570\u636e\u5e93\u81ea\u5e26\u7684\u9501\u673a , \u90a3\u5982\u4f55\u5b9e\u73b0\u5462\uff1f \u65b9\u5f0f\u4e00 : \u5728\u6570\u636e\u5e93\u91cc\u52a0\u4e00\u4e2a\u7248\u672c\u53f7\u7684\u5b57\u6bb5 , \u6bcf\u6b21\u5199\u540e\u770b\u7248\u672c\u53f7\u8ddf\u5199\u4e4b\u524d\u4e00\u4e0d\u4e00\u6837 . \u4e0d\u4e00\u6837\u5199\u5931\u8d25 , \u82e5\u4e00\u6837 , \u90a3\u5199\u5b8c\u540e\u7248\u672c\u53f7\u52a0 1 . \u65b9\u5f0f\u4e8c : \u5728\u6570\u636e\u5e93\u91cc\u52a0\u4e00\u4e2a\u65f6\u95f4\u6233\u7684\u5b57\u6bb5 , \u5199\u64cd\u4f5c\u540e\u770b\u65f6\u95f4\u6233\u6709\u65e0\u88ab\u66f4\u6539 , \u88ab\u66f4\u6539\u4e86\u8fd9\u6b21\u5199\u64cd\u4f5c\u5c31\u5931\u8d25\u4e86 . MVCC \u00b6 Mysql Inodb\u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u7684\u4e8b\u57fa\u4e8e\u591a\u7248\u672c\u7684\u5e76\u53d1\u63a7\u5236\u534f\u8bae \u2014 MVCC. MVCC\u6700\u5927\u7684\u597d\u5904\u5728\u4e8e\uff1a\u8bfb\u4e0d\u52a0\u9501, \u8bfb\u5199\u4e0d\u51b2\u7a81.. \u8fd9\u673a\u5236\u6709\u6548\u7684\u89e3\u51b3\u4e86\u6570\u636e\u7684\u810f\u8bfb\u95ee\u9898! MVCC\u4e2d, \u8bfb\u64cd\u4f5c\u53ef\u5206\u4e3a\u4e24\u7c7b: \u5f53\u524d\u8bfb\u548c\u5feb\u7167\u8bfb.. \u5feb\u7167\u8bfb \u00b6 \u6bcf\u5f00\u4e00\u4e2a\u4e8b\u52a1,\u9ed8\u8ba4\u8bfb\u7684\u662f\u5feb\u7167; \u7b80\u5355\u7684select\u64cd\u4f5c, \u5c5e\u4e8e\u5feb\u7167\u8bfb,\u4e0d\u52a0\u9501. \u5f53\u524d\u8bfb \u00b6 \u7279\u6b8a\u7684\u8bfb\u64cd\u4f5c, \u63d2\u5165/\u66f4\u65b0/\u5220\u9664\u64cd\u4f5c, \u5c5e\u4e8e\u5f53\u524d\u8bfb, \u9700\u8981\u52a0\u9501.. \u52a0\u4e86\u5171\u4eab\u9501\u53ea\u80fd\u8bfb\u5185\u5bb9,\u4e0d\u80fd\u6539,\u6240\u4ee5\u8bfb\u7684\u5185\u5bb9\u4e00\u5b9a\u662f\u5f53\u524d\u5185\u5bb9 \u4e92\u65a5\u9501\u4e5f\u662f, \u56e0\u4e3a\u4e92\u65a5\u561b\u8bfb\u7684\u4e5f\u662f\u6700\u65b0\u7684\u5185\u5bb9 \u57fa\u4e8epython\u4ee3\u7801\u7684\u793a\u4f8b import pymysql import threading def task (): conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = 'userdb' ) cursor = conn . cursor ( pymysql . cursors . DictCursor ) # cursor = conn.cursor() # \u5f00\u542f\u4e8b\u52a1 conn . begin () cursor . execute ( \"select id,age from tran where id=2 for update\" ) # fetchall ({\"id\":1,\"age\":10},{\"id\":2,\"age\":10}, ) ((1,10),(2,10)) # {\"id\":1,\"age\":10} (1,10) result = cursor . fetchone () current_age = result [ 'age' ] if current_age > 0 : cursor . execute ( \"update tran set age=age-1 where id=2\" ) else : print ( \"\u5df2\u552e\u7f44\" ) conn . commit () cursor . close () conn . close () def run (): for i in range ( 5 ): t = threading . Thread ( target = task ) t . start () if __name__ == '__main__' : run ()","title":"\u9501"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_1","text":"\u4e3e\u4e2a\u6817\u5b50: \u540c\u4e00\u4e2a\u529e\u516c\u5ba4\u7684\u540c\u4e8b\u4eec, \u90fd\u60f3\u4f7f\u7528\u6253\u5370\u673a\u6253\u5370\u6587\u4ef6. \u5982\u679c\u4e0d\u52a0\u4ee5\u63a7\u5236. \u53ef\u80fd\u51fa\u73b0\u4e24\u4e2a\u4eba\u540c\u65f6\u6253\u5370\u4e0d\u540c\u7684\u5185\u5bb9\u5728\u4e00\u4e2a\u6587\u4ef6\u91cc, \u5c31\u4f1a\u5f15\u8d77\u5185\u5bb9\u6df7\u4e71. \u4e8b\u52a1\u7684\u9501\u673a\u5236: \u5f53\u6709\u5e76\u53d1\u7684\u7684\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u64cd\u4f5c\u540c\u4e00\u4efd\u6570\u636e\u65f6,\u53ea\u6709\"\u62a2\u5230\"\u4e86\u9501\u7684\u4e8b\u52a1,\u624d\u80fd\u771f\u6b63\u7684\u53bb\u64cd\u4f5c\u6570\u636e,\u4f7f\u5f97\u6570\u636e\u7684\u5b89\u5168\u6027\u5f97\u5230\u4fdd\u8bc1\u3002 \u9501\u4fdd\u8bc1\u5e76\u53d1\u7684\u591a\u4e2a\u4e8b\u52a1\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u80fd\u8fd0\u884c, \u4f1a\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387. \u4f46\u80fd\u5927\u5927\u63d0\u5347\u6570\u636e\u7684\u5b89\u5168\u6027.","title":"\u4ec0\u4e48\u662f\u9501\u673a\u5236\uff1f"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_2","text":"1> \u6309\u9501 \u7c92\u5ea6 \u5212\u5206: \u53ef\u5206\u4e3a\u884c\u7ea7\u9501\u3001\u8868\u7ea7\u9501\u3001\u9875\u7ea7\u9501 -- \u7c92\u5ea6\u4f9d\u6b21\u589e\u5927 \u9501\u7684\u7ea7\u522b\u4f9d\u6b21\u9012\u589e, \u7ea7\u522b\u8d8a\u9ad8 \u5e76\u53d1\u6548\u7387\u8d8a\u4f4e, (\u4e3b\u8981\u5173\u6ce8\u884c\u7ea7\u9501,\u540e\u9762\u4e24\u57fa\u672c\u4e0d\u7528) 2> \u6309\u9501 \u7ea7\u522b \u5212\u5206: \u53ef\u5206\u4e3a \u5171\u4eab\u9501\u3001\u6392\u4ed6\u9501 \u5171\u4eab\u4fa7\u91cd\u4e8e\u53ea\u8ba9\u8bfb\u4e0d\u8ba9\u5199,\u6392\u4ed6\u80fd\u6539\u4e5f\u80fd\u5199 3> \u6309\u9501 \u4f7f\u7528\u65b9\u5f0f \u5212\u5206: \u53ef\u5206\u4e3a \u4e50\u89c2\u9501\u3001\u60b2\u89c2\u9501 4> \u6309\u9501 \u52a0\u9501\u65b9\u5f0f \u5212\u5206: \u53ef\u5206\u4e3a \u81ea\u52a8\u9501 \u3001\u663e\u5f0f\u9501 5> \u6309\u9501 \u64cd\u4f5c \u5212\u5206: \u53ef\u5206\u4e3aDML\u9501\u3001DDL\u9501","title":"\u6570\u636e\u5e93\u9501\u7684\u5206\u7c7b"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_3","text":"\u6545\u540d\u601d\u610f, \u8868\u793a\u53ea\u9488\u5bf9\u5f53\u524d\u64cd\u4f5c\u7684\u884c(eg: 4 5 6\u884c)\u8fdb\u884c\u52a0\u9501, InnoDB\u5f15\u64ce\u652f\u6301. \u884c\u7ea7\u9501\u52a0\u9501\u7c92\u5ea6\u6700\u5c0f,\u4f46\u52a0\u9501\u7684\u5f00\u9500\u4e5f\u6700\u5927. \u884c\u7ea7\u9501\u5206\u4e3a \u4e92\u65a5\u9501(\u6392\u4ed6\u9501) \u548c \u5171\u4eab\u9501 \u4e24\u79cd. \u8981\u77e5\u9053\u4e00\u70b9: \u5728\u8f6f\u4ef6\u5f00\u53d1\u8fc7\u7a0b\u4e2d,\u6211\u4eec\u901a\u5e38\u4f1a\u5c06\u5e93\u3001\u8868\u7ed3\u6784\u5efa\u597d. \u5f80\u540e\u90fd\u662f\u9488\u5bf9\u8868\u8bb0\u5f55\u7684\u64cd\u4f5c. \u64cd\u4f5c\u65e0\u975e\u56db\u79cd, insert delete update select \u5199 - \u589e\u5220\u6539; \u8bfb - \u67e5","title":"\u884c\u7ea7\u9501"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_4","text":"\u6392\u4ed6\u9501\u7b80\u79f0X\u9501 \u4e00\u65e6\u67d0\u4e00\u6570\u636e\u83b7\u5f97\u6392\u4ed6\u9501\u540e,\u5176\u5b83\u4e8b\u52a1\u90fd\u4e0d\u80fd\u5bf9\u6b64\u6570\u636e\u518d\u52a0\u9501,\u4ec0\u4e48\u9501(x\u9501\u3001s\u9501)\u90fd\u4e0d\u884c\uff01 \u4e00\u65e6\u4e8b\u52a1A\u5bf9\u6570\u636eP\u52a0\u4e86\u6392\u4ed6\u9501: \u90a3\u4e48\u5176\u5b83\u4e8b\u52a1\u65e0\u6cd5\u5bf9\u6570\u636eP\u52a0\u4efb\u4f55\u9501; \u53ea\u6709\u62ff\u5230\u9501\u7684\u4e8b\u52a1A\u53ef\u4ee5\u64cd\u4f5c\u6570\u636eP,\u800c\u4e14\u53ef\u4ee5\u8bfb\u4e5f\u53ef\u4ee5\u5199 \u4e8b\u52a1A\u5bf9\u6570\u636eP\u52a0\u4ec0\u4e48\u9501(x\u9501\u3001s\u9501)\u90fd\u884c.. \u5bf9\u4e8e\u5199\u64cd\u4f5c insert\u3001update\u3001delete\u8bed\u53e5, InnoDB\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u6570\u636e\u52a0\u9501, \u800c\u4e14\u662f\u6392\u4ed6\u9501 \u7b80\u5355\u6765\u8bf4,\u5199\u64cd\u4f5c\u6709\u9501\u624d\u80fd\u6210\u529f\u6267\u884c \u4e8b\u52a1A\u5df2\u7ecf\u7ed9\u4e86\u8fd9\u884c\u6570\u636e\u6392\u4ed6\u9501\u4e86 \u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u884c\u6570\u636e\u7ed9\u4e0d\u4e86\u9501\u4e86\u554a \u5bf9\u4e8e\u8bfb\u64cd\u4f5c select\u8bed\u53e5, \u9ed8\u8ba4\u4e0d\u4f1a\u53d7\u4efb\u4f55\u9501\u7684\u5f71\u54cd,InnoDB\u4e0d\u4f1a\u5bf9\u5176\u52a0\u4efb\u4f55\u9501, \u9700\u8981\u6211\u4eec\u624b\u52a8\u81ea\u5df1\u52a0 SELECT ... LOCK IN SHARE MODE; SELECT ... FOR UPDATE; /* select * from employee; +----+---------+-----+ | id | name | age | +----+---------+-----+ | 1 | egon | 18 | | 2 | alex | 18 | | 3 | wupeiqi | 20 | +----+---------+-----+ */ \u8bed\u53e5 1 : select * from employee ; \u8bed\u53e5 2 : update employee set name = 'EGON' where id = 1 ; \u8bed\u53e5 3 : update employee set name = 'xxx' where id = 1 ; \u8bed\u53e5 4 : update employee set name = '666' where id = 1 ; \u8bed\u53e5 5 : update employee set name = '777' where id = 1 ; \u8bed\u53e5 6 : select * from employee where id = 3 for update ; \u8bed\u53e5 7 : select * from employee ; \u8bed\u53e5 8 : select * from employee where id > 1 for update ; \u8bed\u53e5 9 : update employee set name = 'abc' where id = 3 ; \u8bed\u53e5 10 : update employee set name = 'abc' where id = 4 ; \u7ec8\u7aef A\u76f4\u63a5\u6267\u884c\u8bed\u53e52 , \u4fee\u6539\u6210\u529f . \u7d27\u63a5\u7740\u7ec8\u7aef B\u6267\u884c\u8bed\u53e53 , \u4e5f\u4fee\u6539\u6210\u529f . \u89e3\u91ca : A\u7ec8\u7aef , \u9690\u5f0f\u5f00\u542f\u4e86\u4e8b\u52a1 , \u4e3a update\u8bed\u53e5\u52a0\u4e86\u4e92\u65a5\u9501 , id\u4e3a1\u7684\u8fd9\u4e00\u884c\u6570\u636e\u88ab\u9501\u4f4f\u4e86 , \u5176\u5b83\u7ec8\u7aef\u4f1a\u8bdd\u90fd\u4e0d\u80fd\u5bf9\u8fd9\u4e00\u884c\u6570\u636e\u8fdb\u884c\u5199\u64cd\u4f5c , \u5f85\u9690\u5f0f commit\u63d0\u4ea4\u4e8b\u52a1\u540e , \u4e92\u65a5\u9501\u91ca\u653e .. \u56e0\u4e3a A\u7ec8\u7aef\u5bf9id\u4e3a1\u7684\u884c\u52a0\u7684\u9501\u91ca\u653e\u4e86 , B\u7ec8\u7aef\u6267\u884c\u8bed\u53e53\u5c31\u4e0d\u4f1a\u963b\u585e . \u4e0d\u8d39\u5439\u7070\u4e4b\u529b\u5c31\u62a2\u5230\u4e86\u8fd9\u628a\u9501 . \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . A\u6267\u884c\u8bed\u53e54\u6210\u529f , B\u8fd0\u884cselect\u8bed\u53e5\u662f\u80fd\u6210\u529f\u7684 , select\u8bed\u53e5\u4e0d\u53d7\u9501\u7684\u5f71\u54cd , \u4f46 B\u7ec8\u7aef\u6267\u884c\u8bed\u53e55 , \u4f1a\u963b\u585e\u5728\u539f\u5730 .. \u5f53 A\u7ec8\u7aefrollback\u6216commit\u91ca\u653e\u9501\u540e . B\u7ec8\u7aef\u7684\u8bed\u53e55\u7acb\u523b\u6267\u884c\u6210\u529f . ( \u8865\u5145 : A\u53ef\u4ee5\u8fde\u7eed\u6267\u884c\u6210\u529f\u8bed\u53e54\u548c\u8bed\u53e55 \u56e0\u4e3a\u6392\u5b83\u9501\u4e00\u76f4\u5728\u4e8b\u52a1 A\u64cd\u4f5c\u7684id = 1 \u7684\u90a3\u884c\u8eab\u4e0a\u554a\uff01 ) \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . A\u6267\u884c\u8bed\u53e56 , \u67e5\u51fa\u4e86\u7ed3\u679c\u5e76\u4e14\u628a id = 3 \u7684\u8fd9\u884c\u52a0\u4e92\u65a5\u9501\u7ed9\u9501\u4f4f\u4e86 . B\u6267\u884c\u8bed\u53e57\u662f\u80fd\u6210\u529f\u67e5\u5904\u7ed3\u679c\u7684 , \u56e0\u4e3a\u5355\u7eaf\u7684 select\u8bed\u53e5\u4e0d\u53d7\u9501\u7684\u5f71\u54cd . B\u63a5\u7740\u6267\u884c\u8bed\u53e58 ( \u5206\u6790 : \u7ed9 id > 1 \u7684\u884c\u52a0\u6392\u5b83\u9501 , \u5305\u542b id = 3 \u7684\u90a3\u884c ), \u6572\u4e0b\u56de\u8f66\u4f1a\u53d1\u73b0\u76f4\u63a5\u963b\u585e\u5728\u539f\u5730 .. B\u7ec8\u7aefctrl + c\u5f3a\u884c\u9000\u51fa\u540e\u6267\u884c\u8bed\u53e59 ( \u5206\u6790 : update \u8bed\u53e5\u5bf9 id = 3 \u52a0\u6392\u5b83\u9501 ), \u6572\u4e0b\u56de\u8f66 , \u4f9d\u65e7\u4f1a\u963b\u585e\u5728\u539f\u5730 . why ? \u56e0\u4e3a A\u7ec8\u7aef\u6ca1\u6709\u5bf9id = 3 \u7684\u884c\u7684\u9501\u8fdb\u884c\u91ca\u653e\uff01\uff01\u4f46\u82e5 B\u6267\u884c\u8bed\u53e510\u662f\u80fd\u6210\u529f\u7684 \uff01\uff01 why \uff1f\u770b\u4e0b\u65b9\u7684\u89e3\u6790\u3002 \u3010\u6ce8\u610f : id\u5b57\u6bb5\u662f\u4e3b\u952e\u662f\u7d22\u5f15 \uff01\uff01 innodb\u9501\u7684\u5176\u5b9e\u662f\u7d22\u5f15 \uff01\u5373\u53ea\u6709\u52a0\u4e86\u7d22\u5f15\u7684\u5b57\u6bb5\u624d\u662f\u884c\u7ea7\u9501 .. \u547d\u4e2d\u4e86\u7d22\u5f15\u5c31\u9501\u884c , \u82e5\u6b64\u5b57\u6bb5\u4e0d\u662f\u7d22\u5f15 , \u5b83\u4f1a\u5c06\u8868\u4e2d\u7684\u6240\u6709\u884c\u90fd\u9501\u4f4f , \u76f8\u5f53\u4e8e\u8868\u7ea7\u9501 ..( \u5b9e\u9645\u4e0a\u662f\u884c\u7ea7\u9501\u54e6 \u53ea\u662f\u76f8\u5f53\u4e8e ) \u3011 \u5148\u5c06\u8868 employee\u7684\u4e3b\u952eid\u5b57\u6bb5\u7ed9\u5220\u9664 . alter table employee modify id int ; alter table employee drop primary key ; \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . A\u6267\u884c\u8bed\u53e56 , B\u6267\u884c\u8bed\u53e59 , \u8bed\u53e5 10 \u90fd\u4f1a\u963b\u585e\u5728\u539f\u5730 ... #### \u5171\u4eab\u9501(\u8bfb\u9501) \u5171\u4eab\u9501 \u7b80\u79f0S\u9501 \u82e5\u4e8b\u52a1A\u5bf9\u6570\u636eP\u52a0\u4e0a\u5171\u4eab\u9501\u540e, \u5176\u4ed6\u4e8b\u52a1\u53ea\u80fd\u5bf9\u6570\u636eP\u518d\u52a0\u5171\u4eab\u9501\u6216\u4e0d\u52a0\u9501 \u4e00\u65e6\u591a\u4e2a\u4e8b\u52a1\u90fd\u5bf9\u6570\u636eP\u52a0\u4e86\u5171\u4eab\u9501,\u5927\u5bb6\u90fd\u53ea\u80fd\u8bfb\u4e0d\u80fd\u6539.. \u4e8b\u52a1 A\u5bf9id = 1 \u7684\u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 , \u4e8b\u52a1 B\u4e5f\u5bf9id = 1 \u7684\u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 . \u4e8b\u52a1 A\u80fd\u5426\u6267\u884c\u5bf9id = 1 \u8fd9\u4e00\u884c\u7684 update\u64cd\u4f5c \uff1f \u4e0d\u53ef\u4ee5 , \u56e0\u4e3a update\u8bed\u53e5\u9ed8\u8ba4\u4f1a\u52a0\u6392\u5b83\u9501 , \u4f46\u662f\u52a0\u4e0d\u4e0a\uff01\u56e0\u4e3a\u4e8b\u52a1 B\u5bf9\u8fd9\u884c\u6570\u636e\u52a0\u4e86\u5171\u4eab\u9501 , \u4e8b\u52a1 A\u53ea\u80fd\u5bf9\u5176\u52a0\u5171\u4eab\u9501\u6216\u4e0d\u52a0\u9501 . \u7ad9\u5728\u4e8b\u52a1 B\u7684\u89d2\u5ea6\u540c\u7406 . \u4e8b\u52a1 B\u4e5f\u4e0d\u80fd\u5bf9\u8fd9\u4e00\u884c\u6570\u636e\u8fdb\u884cupdate\u64cd\u4f5c . \u7279\u4f8b : \u82e5\u4e8b\u52a1 A\u5bf9id = 1 \u7684\u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 , \u6ca1\u6709\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u4e00\u884c\u6570\u636e\u52a0\u5171\u4eab\u9501\u4e86 . \u8fd9\u6837\u7684\u8bdd , \u6ca1\u4eba\u8ddf\u4e8b\u52a1 A\u62a2\u9501 , \u4e8b\u52a1 A\u53ef\u4ee5\u5bf9\u4e00\u884c\u6570\u636e\u8fdb\u884cupdate\u64cd\u4f5c , \u518d\u7ed9\u8fd9\u884c\u6570\u636e\u52a0\u4e00\u4e2a\u4e92\u65a5\u9501 . --- /* \u6b7b\u9501\u95ee\u9898 */ \u8bed\u53e5 1 : select * from employee where id = 1 lock in share mode ; \u8bed\u53e5 2 : update employee set name = 'xxx' where id = 1 ; \u7ec8\u7aef A\u548cB\u540c\u65f6\u90fdBegin\u5f00\u542f\u4e86\u4e00\u4e2a\u4e8b\u52a1 . \u4e8b\u52a1 A\u6267\u884c\u8bed\u53e51 , \u4e8b\u52a1 2 \u4e5f\u6267\u884c\u8bed\u53e5 1 ; \u63a5\u7740 , \u4e8b\u52a1 B\u6267\u884c\u8bed\u53e52 , \u963b\u585e , \u56e0\u4e3a\u7ad9\u5728\u4e8b\u52a1 B\u7684\u89d2\u5ea6\u4e8b\u52a1A\u5bf9id = 1 \u8fd9\u4e00\u884c\u52a0\u4e86\u5171\u4eab\u9501 , \u90a3\u4e48\u4e8b\u52a1 B\u4e5f\u5c31\u53ea\u80fd\u5bf9\u8fd9\u4e00\u884c\u52a0\u5171\u4eab\u9501\u6216\u4e0d\u52a0\u9501 , \u8bed\u53e5 2 \u7684 update\u7684\u6392\u5b83\u9501\u52a0\u4e0d\u4e0a\u5bfc\u81f4\u4e86\u963b\u585e .. \u6b64\u65f6 , \u4e8b\u52a1 A\u4e5f\u6267\u884c\u4e86\u8bed\u53e52 , \u7ec8\u7aef A\u76f4\u63a5\u547d\u4ee4\u884c\u62a5\u9519 \"ERROR 1213 (40001): Deadlock found when trying to get lock; try restarting transaction\" \u89e6\u53d1\u4e86\u6b7b\u9501\u73b0\u8c61 , \u4e8b\u52a1 A\u88ab\u5f3a\u5236\u7ec8\u6b62 , \u91ca\u653e\u4e86\u6240\u6709\u9501 . \u4e8b\u52a1 B\u7684\u8bed\u53e52\u7acb\u523b\u8fd0\u884c\u6210\u529f ..","title":"\u4e92\u65a5\u9501(\u6392\u4ed6\u9501) "},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#innodb","text":"InnoDB(\u7d22\u5f15\u7ec4\u7ec7\u8868)\u652f\u6301\u884c\u7ea7\u9501\u548c\u8868\u7ea7\u9501,\u9ed8\u8ba4\u4e3a\u884c\u7ea7\u9501.","title":"Innodb\u7684\u9501\u673a\u5236"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#innodb_1","text":"\u9501\u7684\u662f\u7d22\u5f15 \u53ea\u6709\u5728\u547d\u4e2d\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b,\u624d\u4f1a\u9501\u4f4f\u7b26\u5408\u6761\u4ef6\u7684\u4e00\u884c\u6216\u51e0\u884c.\u6ca1\u547d\u4e2d\u7684\u8bdd,\u9501\u5168\u90e8\u884c,\u76f8\u5f53\u4e8e\u9501\u8868. \u5177\u4f53\u6765\u8bf4,innodb\u5b58\u50a8\u5f15\u64ce\u7684\u7d22\u5f15\u5206\u4e3a\u4e3b\u952e\u7d22\u5f15\u548c\u8f85\u52a9\u7d22\u5f15 \u547d\u4e2d\u7684\u662f\u4e3b\u952e\u7d22\u5f15,\u9501\u7684\u5c31\u662f\u4e3b\u952e\u7d22\u5f15\u5bf9\u5e94\u7684\u8bb0\u5f55; \u547d\u4e2d\u7684\u662f\u8f85\u52a9\u7d22\u5f15,\u4f1a\u5148\u9501\u4f4f\u8be5\u8f85\u52a9\u7d22\u5f15\u7684\u8bb0\u5f55,\u518d\u9501\u4f4f\u76f8\u5173\u7684\u4e3b\u952e\u7d22\u5f15\u7684\u8bb0\u5f55... \u5982\u679c\u6ca1\u6709\u7d22\u5f15,Innodb\u4f1a\u901a\u8fc7\u9690\u85cf\u7684\u805a\u7c07\u7d22\u5f15\u6765\u5bf9\u8bb0\u5f55\u52a0\u9501..\u5b9e\u9645\u6548\u679c\u8ddf\u8868\u7ea7\u9501\u4e00\u6837.. MYISAM\u652f\u6301\u8868\u9501 , \u4e0d\u652f\u6301\u884c\u9501 ; InnoDB\u5f15\u64ce\u652f\u6301\u884c\u9501\u548c\u8868\u9501 . \u5373\u5728MYISAM\u4e0b\u5982\u679c\u8981\u52a0\u9501 , \u65e0\u8bba\u600e\u4e48\u52a0\u90fd\u4f1a\u662f\u8868\u9501 . \u5728InnoDB\u5f15\u64ce\u652f\u6301\u4e0b\u5982\u679c\u662f\u57fa\u4e8e\u7d22\u5f15\u67e5\u8be2\u7684\u6570\u636e\u5219\u662f\u884c\u7ea7\u9501 , \u5426\u5219\u5c31\u662f\u8868\u9501 . So , \u4e00\u822c\u60c5\u51b5\u4e0b\u6211\u4eec\u4f1a\u9009\u62e9\u4f7f\u7528innodb\u5f15\u64ce , \u5e76\u4e14\u5728 \u641c\u7d22 \u65f6\u4e5f\u4f1a\u4f7f\u7528\u7d22\u5f15 ( \u547d\u4e2d\u7d22\u5f15 ) . \u5728innodb\u5f15\u64ce\u4e2d , update \u3001 insert \u3001 delete\u7684\u884c\u4e3a\u4f1a\u81ea\u52a8\u52a0\u9501 . \u5185\u90e8\u90fd\u4f1a\u5148\u7533\u8bf7\u9501 ( \u6392\u5b83\u9501 ), \u7533\u8bf7\u5230\u4e4b\u540e\u624d\u6267\u884c\u76f8\u5173\u64cd\u4f5c , \u6700\u540e\u518d\u91ca\u653e\u9501 . \u6240\u4ee5 , \u5f53\u591a\u4e2a\u4eba\u540c\u65f6\u5411\u6570\u636e\u5e93\u6267\u884c : insert \u3001 update \u3001 delete\u7b49\u64cd\u4f5c\u65f6 , \u5185\u90e8\u52a0\u9501\u540e\u4f1a\u6392\u961f\u9010\u4e00\u6267\u884c . \u800cselect\u5219\u9ed8\u8ba4\u4e0d\u4f1a\u7533\u8bf7\u9501 . \u82e5\u4f60\u60f3\u8981\u8ba9select\u53bb\u7533\u8bf7\u9501 , \u5219\u9700\u8981\u914d\u5408 \u4e8b\u52a1 + \u7279\u6b8a\u8bed\u6cd5\u6765\u5b9e\u73b0 . \u4e3e\u4e2a\u4f8b\u5b50 : ` for update ` , \u6392\u5b83\u9501 , \u52a0\u9501\u4e4b\u540e , \u5176\u4ed6\u4e0d\u53ef\u4ee5\u8bfb\u5199 . begin ; -- \u5f00\u542f\u4e8b\u52a1 select * from L1 where name = \"\u6b66\u6c9b\u9f50\" for update ; -- name\u5217\u4e0d\u662f\u7d22\u5f15 \uff08 \u8868\u9501 \uff09 commit ; -- \u7ed3\u675f\u4e8b\u52a1 , \u4e8b\u52a1\u7ed3\u675f\u540e\u91ca\u653e\u9501 ! begin ; -- \u6216\u8005 start transaction ; select * from L1 where id = 1 for update ; -- id\u5217\u662f\u7d22\u5f15 \uff08 \u884c\u9501 \uff09 commit ;","title":"InnoDB\u884c\u7ea7\u9501\u7684\u4e09\u5927\u7279\u70b9"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_5","text":"\u4e09\u79cd\u7b97\u6cd5\u90fd\u4ee5\u4ee5\u547d\u4e2d\u7d22\u5f15\u4e3a\u524d\u63d0\uff01\uff01 innodb\u5f15\u64ce\u7684\u884c\u7ea7\u9501\u7b97\u6cd5\u9ed8\u8ba4\u662fNext-Key Lock Record Lock (\u5355\u4e2a\u8bb0\u5f55\u52a0\u9501) : \u53ea\u5bf9\u7b26\u5408\u6761\u4ef6\u7684\u884c\u52a0\u9501! Gap Lock (\u95f4\u9699\u9501) : \u9501\u5b9a\u4e00\u4e2a\u8303\u56f4,\u4f46\u4e0d\u5305\u62ec\u8bb0\u5f55\u672c\u8eab \u4f55\u4e3a\u95f4\u9699\uff1feg \u5e74\u9f8418 20 25, 18\u523020\u4e4b\u95f4\u5c31\u662f\u95f4\u9699;20\u523025\u4e4b\u95f4\u4e5f\u662f\u95f4\u9699! \u95f4\u9699\u9501\u53ef\u4ee5\u89e3\u51b3\u8bfb\u73b0\u8c61\u91cc\u7684\u5e7b\u8bfb. Next-Key Lock = Record Lock + Gap Lock \u6bd4\u5982where ege=20,\u4ed6\u5c31\u4f1a\u628a20\u5bf9\u5e94\u7684\u8fd9\u884c\u8bb0\u5f55\u4ee5\u53ca20\u7684\u4e0a\u4e0b\u4e24\u4e2a\u95f4\u9699(18-20,20-25)\u90fd\u9501\u4f4f\uff01","title":"\u884c\u7ea7\u9501\u4e09\u79cd\u7b97\u6cd5"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_6","text":"","title":"\u6b7b\u9501\u95ee\u9898"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_7","text":"\u4e8b\u52a1A: begin; select * from employee where id = 1 lock in share mode; -- step1","title":"\u7b80\u5355\u60c5\u51b5"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#bid3","text":"update employee set name='xxx' where id = 3; -- step3 \u963b\u585e\u5728\u539f\u5730 \u4e8b\u52a1B: begin;","title":"\u52a0\u9501\u5931\u8d25 \u4e8b\u52a1B\u5df2\u7ecf\u5bf9id=3\u7684\u884c\u52a0\u9501\u4e86"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_8","text":"","title":"\u7075\u9b42\u4e09\u95ee: \u52a0\u7684\u4ec0\u4e48\u9501?\u5bf9\u4ec0\u4e48\u52a0\u7684\u9501?\u5728\u52a0\u9501\u7684\u65f6\u5019,\u6709\u65e0\u5176\u4ed6\u4e8b\u52a1\u5bf9\u5176\u52a0\u9501?"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#id3","text":"delete from employee where id = 3; -- step2","title":"\u52a0\u6392\u4ed6\u9501;id=3\u7684\u884c\u52a0\u9501;\u6ca1\u6709     \u52a0\u6210\u529f\u4e86\uff01"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#id1-aid1","text":"delete from employee where id = 1; -- step4 \u963b\u585e\u5728\u539f\u5730","title":"\u5bf9id=1\u7684\u884c\u52a0\u6392\u4ed6\u9501;\u52a0\u9501\u5931\u8d25! \u56e0\u4e3a\u4e8b\u52a1A\u5bf9id=1\u7684\u884c\u52a0\u4e86\u5171\u4eab\u9501"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_9","text":"\u9ad8\u5e76\u53d1\u7684\u65f6\u5019,\u6709\u51e0\u7387\u51fa\u73b0\u8fd9\u6837\u7684\u95ee\u9898.. \uff08innodb\u9501\u673a\u5236\u7684\u4e09\u5927\u7279\u70b9\u5bfc\u81f4\u7684\uff09 -- \u8868emp \u8868\u5bf9id\u5b57\u6bb5\u52a0\u4e86\u4e3b\u952e\u7d22\u5f15;name\u5b57\u6bb5\u548cage\u5b57\u6bb5\u90fd\u52a0\u4e86\u8f85\u52a9\u7d22\u5f15.. + ----+---------+-----+-----+ | id | name | age | sex | + ----+---------+-----+-----+ | 1 | egon | 78 | male | | 2 | xxxx | 19 | male | + ----+---------+-----+-----+ \u8bed\u53e5 1 : select * from emp where name = 'egon' or name = 'xxxx' for update ; \u8bed\u53e5 2 : update emp set sex = 'famale' where age = 19 or age = 78 ; -- \u8bed\u53e51\u548c\u8bed\u53e52\u90fd\u547d\u4e2d\u7684\u8f85\u52a9\u7d22\u5f15,\u4f1a\u5148\u5bf9\u8f85\u52a9\u7d22\u5f15\u52a0\u9501,\u518d\u5bf9\u4e3b\u952e\u7d22\u5f15\u52a0\u9501 -- eg: \u8bed\u53e51\u9501\u7684\u5148\u540e (egon,1) (xxxx,2)(1,\u6574\u884c)(2,\u6574\u884c) \u8bb2\u9053\u7406 \u82e5\u4e8b\u52a1 A\u6267\u884c\u8bed\u53e51 , \u4f1a\u5bf9\u540d\u5b57\u4e3a 'egon' \u548c 'xxxx' \u7684\u884c\u52a0\u4e86\u4e92\u65a5\u9501 . \u5bf9\u4e3b\u952e\u7d22\u5f15\u52a0\u9501\u987a\u5e8f\u662f < 1 , 2 > \u82e5\u4e8b\u52a1 B\u6267\u884c\u8bed\u53e52 , \u4f1a\u5bf9\u5e74\u9f84\u4e3a 19 \u548c 78 \u7684\u884c\u52a0\u4e92\u65a5\u9501 . \u5bf9\u4e3b\u952e\u7d22\u5f15\u52a0\u9501\u7684\u987a\u5e8f\u662f < 2 , 1 > \u4e8b\u52a1 A\u548c\u4e8b\u52a1B\u5e76\u53d1\u540c\u65f6\u8fd0\u884c , \u4e8b\u52a1 A\u4e0a\u6765\u5148\u628a\u4e3b\u952e1\u7ed9\u9501\u4f4f , \u4e8b\u52a1 B\u4e0a\u6765\u5148\u628a\u4e3b\u952e2\u9501\u4f4f , \u63a5\u4e0b\u6765\u5c31 BBQ\u4e86 ... \u4e8b\u52a1 A\u5bf9\u4e8b\u52a1B\u8bf4\u4f60\u628a\u4e3b\u952e2\u7ed9\u6211\u91ca\u653e\u51fa\u6765 , \u6211\u8981\u52a0\u9501 \u5c2c\u4f4f\u4e86 .. \u4e8b\u52a1 B\u5bf9\u4e8b\u52a1A\u8bf4\u4f60\u628a\u4e3b\u952e1\u7ed9\u6211\u91ca\u653e\u51fa\u6765 , \u6211\u8981\u52a0\u9501 \u5c2c\u4f4f\u4e86 ..","title":"\u5e76\u53d1\u9690\u85cf\u60c5\u51b5"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_10","text":"\u4e8b\u52a1\u5177\u6709\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027\u56db\u5927\u7279\u6027.. \u800c\u9694\u79bb\u6027\u987e\u540d\u601d\u4e49\u6307\u7684\u5c31\u662f\u4e8b\u52a1\u5f7c\u6b64\u4e4b\u95f4\u95f4\u9694\u79bb\u5f00,\u591a\u4e2a\u4e8b\u52a1\u5728\u540c\u65f6\u5904\u7406\u4e00\u4e2a\u6570\u636e\u65f6\u5f7c\u6b64\u4e4b\u95f4\u4e92\u76f8\u4e0d\u5f71\u54cd.\u82e5\u9694\u79bb\u4e0d\u591f\u597d,\u5c31\u4f1a\u51fa\u73b0\u8bfb\u73b0\u8c61.. \u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u8d8a\u9ad8, \u5e76\u53d1\u80fd\u529b\u4e5f\u5c31\u8d8a\u4f4e Y\uff1a\u53ef\u80fd\u51fa\u73b0 N\uff1a\u4e0d\u4f1a\u51fa\u73b0 \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb Read uncommitted \u672a\u63d0\u4ea4\u8bfb Y Y Y Read committed \u63d0\u4ea4\u8bfb N Y Y Repeatable reads \u53ef\u91cd\u590d\u8bfb N N Y Serializable \u53ef\u5e8f\u5217\u5316 N N N READ UNCOMMITTED\uff1a\u53ef\u4ee5\u8bfb\u53d6\u4e8b\u52a1\u4e2d\u8fd8\u672a\u63d0\u4ea4\u7684\u88ab\u66f4\u6539\u7684\u6570\u636e. READ COMMITTED\uff1a\u53ea\u80fd\u8bfb\u53d6\u4e8b\u52a1\u4e2d\u5df2\u7ecf\u63d0\u4ea4\u7684\u88ab\u66f4\u6539\u7684\u6570\u636e. REPEATABLE READ\uff1a\u8868\u793a\u4e00\u4e2a\u4e8b\u52a1\u4e2d, \u5bf9\u4e00\u4e2a\u6570\u636e\u8bfb\u53d6\u7684\u503c, \u6c38\u8fdc\u8ddf\u7b2c\u4e00\u6b21\u8bfb\u53d6\u7684\u503c\u4e00\u81f4, \u4e0d\u53d7\u5176\u4ed6\u4e8b\u52a1\u4e2d\u6570\u636e\u64cd\u4f5c\u7684\u5f71\u54cd\u3002\u8fd9\u4e5f\u662f MySQL \u7684\u9ed8\u8ba4\u9009\u9879. SERIALIZABLE\uff1a\u8868\u793a\u4efb\u4f55\u4e00\u4e2a\u4e8b\u52a1, \u4e00\u65e6\u5bf9\u67d0\u4e00\u4e2a\u6570\u636e\u8fdb\u884c\u4e86\u4efb\u4f55\u64cd\u4f5c, \u90a3\u4e48, \u4e00\u76f4\u5230\u8fd9\u4e2a\u4e8b\u52a1\u7ed3\u675f, MySQL \u90fd\u4f1a\u628a\u8fd9\u4e2a\u6570\u636e\u9501\u4f4f, \u7981\u6b62\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u4e2a\u6570\u636e\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c. \u9898\u5916\u8bdd: Django\u6846\u67b6\u91cc\u63a8\u8350\u4f7f\u7528RC(\u63d0\u4ea4\u8bfb)\u673a\u5236,\u6846\u67b6\u4f1a\u5e2e\u5fd9\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u95ee\u9898... mysql\u9ed8\u8ba4\u7684\u662fRepeatable reads\u673a\u5236,\u8fd9\u4e00\u673a\u5236\u6ca1\u6709\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898! \u4f46\u662f\u7528Innodb\u5f15\u64ce\u7684\u8bdd,\u5b83\u7684Next-Key Lock \u884c\u7ea7\u9501\u7b97\u6cd5\u89e3\u51b3\u5566\uff01","title":"\u4e8b\u52a1\u9694\u79bb\u673a\u5236"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_11","text":"\u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501\u66f4\u50cf\u662f\u4e00\u79cd\u7f16\u7a0b\u601d\u60f3.. \u662f\u9501\u5177\u4f53\u7684\u4e00\u79cd\u5e94\u7528\u65b9\u5f0f","title":"\u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_12","text":"\u6bcf\u6b21\u5199\u6570\u636e\u90fd\u8ba4\u4e3a\u4e00\u5b9a\u4f1a\u6709\u4eba\u8ddf\u5b83\u540c\u65f6\u5199\u8fd9\u4efd\u6570\u636e.. \u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00,\u6709\u6ca1\u6709\u4eba\u8ddf\u6211\u62a2,\u4e00\u4e0a\u6765\u5c31\u52a0\u9501! \u5b89\u5168\u6027\u9ad8,\u6548\u7387\u4f4e,\u5e76\u53d1\u4f4e,\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u4eba\u7b49\u5f85.. (\u51e0\u4e4e\u4e0d\u7528..\u6548\u7387\u592a\u4f4e\u4e86)","title":"\u60b2\u89c2\u9501"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_13","text":"\u6bcf\u6b21\u5199\u6570\u636e\u90fd\u8ba4\u4e3a\u6ca1\u4eba\u8ddf\u5b83\u540c\u65f6\u5199\u8fd9\u4efd\u6570\u636e.. \u6ca1\u6709\u52a0\u9501,\u4e0d\u5f71\u54cd\u5e76\u53d1\u6548\u7387;\u5927\u91cf\u4eba\u540c\u65f6\u4fee\u6539,\u5c31\u4f1a\u6709\u5927\u91cf\u7684\u63d0\u4ea4\u5931\u8d25..\u65e0\u6548\u63d0\u4ea4.. \u5b83\u6ca1\u6709\u7528\u6570\u636e\u5e93\u81ea\u5e26\u7684\u9501\u673a , \u90a3\u5982\u4f55\u5b9e\u73b0\u5462\uff1f \u65b9\u5f0f\u4e00 : \u5728\u6570\u636e\u5e93\u91cc\u52a0\u4e00\u4e2a\u7248\u672c\u53f7\u7684\u5b57\u6bb5 , \u6bcf\u6b21\u5199\u540e\u770b\u7248\u672c\u53f7\u8ddf\u5199\u4e4b\u524d\u4e00\u4e0d\u4e00\u6837 . \u4e0d\u4e00\u6837\u5199\u5931\u8d25 , \u82e5\u4e00\u6837 , \u90a3\u5199\u5b8c\u540e\u7248\u672c\u53f7\u52a0 1 . \u65b9\u5f0f\u4e8c : \u5728\u6570\u636e\u5e93\u91cc\u52a0\u4e00\u4e2a\u65f6\u95f4\u6233\u7684\u5b57\u6bb5 , \u5199\u64cd\u4f5c\u540e\u770b\u65f6\u95f4\u6233\u6709\u65e0\u88ab\u66f4\u6539 , \u88ab\u66f4\u6539\u4e86\u8fd9\u6b21\u5199\u64cd\u4f5c\u5c31\u5931\u8d25\u4e86 .","title":"\u4e50\u89c2\u9501"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#mvcc","text":"Mysql Inodb\u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u7684\u4e8b\u57fa\u4e8e\u591a\u7248\u672c\u7684\u5e76\u53d1\u63a7\u5236\u534f\u8bae \u2014 MVCC. MVCC\u6700\u5927\u7684\u597d\u5904\u5728\u4e8e\uff1a\u8bfb\u4e0d\u52a0\u9501, \u8bfb\u5199\u4e0d\u51b2\u7a81.. \u8fd9\u673a\u5236\u6709\u6548\u7684\u89e3\u51b3\u4e86\u6570\u636e\u7684\u810f\u8bfb\u95ee\u9898! MVCC\u4e2d, \u8bfb\u64cd\u4f5c\u53ef\u5206\u4e3a\u4e24\u7c7b: \u5f53\u524d\u8bfb\u548c\u5feb\u7167\u8bfb..","title":"MVCC"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_14","text":"\u6bcf\u5f00\u4e00\u4e2a\u4e8b\u52a1,\u9ed8\u8ba4\u8bfb\u7684\u662f\u5feb\u7167; \u7b80\u5355\u7684select\u64cd\u4f5c, \u5c5e\u4e8e\u5feb\u7167\u8bfb,\u4e0d\u52a0\u9501.","title":"\u5feb\u7167\u8bfb"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/4_lock/#_15","text":"\u7279\u6b8a\u7684\u8bfb\u64cd\u4f5c, \u63d2\u5165/\u66f4\u65b0/\u5220\u9664\u64cd\u4f5c, \u5c5e\u4e8e\u5f53\u524d\u8bfb, \u9700\u8981\u52a0\u9501.. \u52a0\u4e86\u5171\u4eab\u9501\u53ea\u80fd\u8bfb\u5185\u5bb9,\u4e0d\u80fd\u6539,\u6240\u4ee5\u8bfb\u7684\u5185\u5bb9\u4e00\u5b9a\u662f\u5f53\u524d\u5185\u5bb9 \u4e92\u65a5\u9501\u4e5f\u662f, \u56e0\u4e3a\u4e92\u65a5\u561b\u8bfb\u7684\u4e5f\u662f\u6700\u65b0\u7684\u5185\u5bb9 \u57fa\u4e8epython\u4ee3\u7801\u7684\u793a\u4f8b import pymysql import threading def task (): conn = pymysql . connect ( host = '127.0.0.1' , port = 3306 , user = 'root' , passwd = 'root123' , charset = \"utf8\" , db = 'userdb' ) cursor = conn . cursor ( pymysql . cursors . DictCursor ) # cursor = conn.cursor() # \u5f00\u542f\u4e8b\u52a1 conn . begin () cursor . execute ( \"select id,age from tran where id=2 for update\" ) # fetchall ({\"id\":1,\"age\":10},{\"id\":2,\"age\":10}, ) ((1,10),(2,10)) # {\"id\":1,\"age\":10} (1,10) result = cursor . fetchone () current_age = result [ 'age' ] if current_age > 0 : cursor . execute ( \"update tran set age=age-1 where id=2\" ) else : print ( \"\u5df2\u552e\u7f44\" ) conn . commit () cursor . close () conn . close () def run (): for i in range ( 5 ): t = threading . Thread ( target = task ) t . start () if __name__ == '__main__' : run ()","title":"\u5f53\u524d\u8bfb"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/other/","text":"\u57fa\u672c\u7528\u6cd5 \u00b6 1000\u5ba2\u6237\u7aef\u5e76\u53d1\u6765 \u8981\u521b\u5efa1000\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u5417\uff1f\u521b\u5efa\u8fde\u63a5\u540e\u518d\u56de\u6765\u65ad\u6389,\u4e0b\u4e00\u6b21\u53c8\u9700\u8981\u518d\u6b21\u521b\u5efa\u8fde\u63a5\uff1f <1>\u4e2a\u6570\u95ee\u9898 <2>\u8fde\u63a5\u540e\u65ad\u5f00\u518d\u8fde\u63a5\u6d88\u8017\u5185\u5b58\u7b49\u8d44\u6e90\u7684\u95ee\u9898. \u9700\u8981\u4e00\u4e2a\u4e1c\u897f\u63a7\u5236\u7f51\u7ad9\u6700\u591a\u8fde\u63a5\u6570\u636e\u5e93\u7684\u6570\u91cf,\u591f\u4e86\u540e\u6765\u8005\u5c31\u6392\u961f; \u521b\u5efa\u8fde\u63a5\u540e\u4e0d\u7528\u6b64\u8fde\u63a5\u4e86\u4f46\u4e0d\u65ad\u5f00\u6682\u65f6\u5b58\u8d77\u6765,\u4ee5\u4fbf\u8fde\u63a5\u7684\u91cd\u7528. \u89e3\u51b3\u65b9\u6848: \u4f7f\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60. pip3.9 install pymysql pip3.9 install dbutils import threading import pymysql from dbutils.pooled_db import PooledDB MYSQL_DB_POOL = PooledDB ( creator = pymysql , # -- \u4f7f\u7528\u94fe\u63a5\u6570\u636e\u5e93\u7684\u6a21\u5757 maxconnections = 10 , # -- \u8fde\u63a5\u6c60\u5141\u8bb8\u7684\u6700\u5927\u8fde\u63a5\u6570\uff0c0\u548cNone\u8868\u793a\u4e0d\u9650\u5236\u8fde\u63a5\u6570 # -- \u521d\u59cb\u5316\u65f6\uff0c\u94fe\u63a5\u6c60\u4e2d\u81f3\u5c11\u521b\u5efa\u7684\u7a7a\u95f2\u7684\u94fe\u63a5\uff0c0\u8868\u793a\u4e0d\u521b\u5efa # \u6700\u5f00\u59cb\u7684\u65f6\u5019\u6ca1\u6709\u90a3\u4e48\u591a\u8bf7\u6c42\u7684\u5230\u6765,\u6ca1\u5fc5\u8981\u5728\u5185\u90e8\u521b\u5efa10\u4e2a\u8fde\u63a5 \"10\u662f\u4e0a\u9762maxconnections\u7684\u503c\" # \u6240\u4ee5\u6700\u5c0f\u521b\u5efa\u8fde\u63a5\u6570,\u6700\u5f00\u59cb\u7684\u65f6\u5019\u521b\u5efa\u4e24\u4e2a,\u540e\u9762\u4e0d\u591f\u7528\u4e86,\u518d\u81ea\u52a8\u53bb\u589e\u52a0. mincached = 3 , # -- \u94fe\u63a5\u6c60\u4e2d\u6700\u591a\u95f2\u7f6e\u7684\u94fe\u63a5,0\u548cNone\u4e0d\u9650\u5236 # \u4e00\u5f00\u59cb\u8fde\u63a5\u6c60\u6709\u4e24\u4e2a\u8fde\u63a5,\u7a81\u7136\u7528\u6237\u731b\u589e\u8fde\u63a5\u6c60\u6ee1\u4e86,\u8fc7\u4e86\u4e00\u4f1a\u7528\u6237\u91cf\u53c8\u5c11\u4e86,\u90a3\u4e48\u8fc7\u6bb5\u65f6\u95f4\u5c31\u8981\u5bf9\u5176\u8fdb\u884c\u56de\u6536. maxcached = 5 , # -- \u8be5\u53c2\u6570\u503c\u65e0\u8bba\u8bbe\u7f6e\u4e3a\u591a\u5c11,\u751f\u6548\u7684\u53ea\u4f1a\u662f0! \u4e0d\u7528\u8bbe\u7f6e! # \u8fde\u63a5\u6c60\u4e2d\u6700\u591a\u5171\u4eab\u7684\u8fde\u63a5\u6570\u91cf.0\u548cNone\u8868\u793a\u5168\u90e8\u5171\u4eab! maxshared = 3 , # -- \u8fde\u63a5\u6c60\u4e2d\u5982\u679c\u6ca1\u6709\u53ef\u7528\u8fde\u63a5,\u662f\u5426\u963b\u585e\u7b49\u5f85. True\u7b49\u5f85\u3001False\u4e0d\u7b49\u5f85\u7136\u540e\u62a5\u9519. blocking = True , # -- \u4e00\u4e2a\u8fde\u63a5\u6700\u591a\u88ab\u91cd\u590d\u4f7f\u7528\u7684\u6b21\u6570. None\u8868\u793a\u65e0\u9650\u5236! \u4e00\u822c\u90fd\u8bbe\u7f6e\u4e3aNone! maxusage = None , # -- \u5f00\u59cb\u4f1a\u8bdd(\u8fde\u63a5)\u524d\u6267\u884c\u7684\u547d\u4ee4\u5217\u8868. \u5982: [\"set datestyle to ...\", \"set time zone ...\"] setsession = [], # -- ping MySQL\u670d\u52a1\u7aef,\u68c0\u67e5\u662f\u5426\u670d\u52a1\u53ef\u7528 \u8be5\u53c2\u6570\u503c\u901a\u5e38\u8bbe\u7f6e\u4e3a0 # 0 = None = never ; 1 = default = whenever it is requested # 2 = when a cursor is created ; 4 = when a query is executed ; 7 = always ping = 0 , host = '127.0.0.1' , port = 3306 , user = 'root' , password = '123456' , database = 'youku' , charset = 'utf8' ) def task (): conn = MYSQL_DB_POOL . connection () # -- \u53bb\u8fde\u63a5\u6c60\u83b7\u53d6\u4e00\u4e2a\u8fde\u63a5 print ( \"\u8be5\u94fe\u63a5\u88ab\u62ff\u8d70\u4e86!\" , conn . _con ) print ( \"\u6c60\u5b50\u91cc\u76ee\u524d\u6709\u8fd9\u4e9b\u94fe\u63a5:\" , MYSQL_DB_POOL . _idle_cache , ' \\r\\n ' ) cursor = conn . cursor ( pymysql . cursors . DictCursor ) cursor . execute ( 'select * from user' ) result = cursor . fetchall () cursor . close () # -- \u5e76\u4e0d\u662f\u5173\u95ed\u8fde\u63a5 \u800c\u662f\u5c06\u8fde\u63a5\u4ea4\u8fd8\u7ed9\u6570\u636e\u5e93\u8fde\u63a5\u6c60 conn . close () def run (): for i in range ( 10 ): t = threading . Thread ( target = task ) t . start () if __name__ == '__main__' : run () SQL\u5de5\u5177\u7c7b \u00b6 \u57fa\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5f00\u53d1\u4e00\u4e2a\u516c\u5171\u7684SQL\u64cd\u4f5c\u7c7b, \u65b9\u4fbf\u4ee5\u540e\u64cd\u4f5c\u6570\u636e\u5e93. \u5355\u4f8b\u548c\u65b9\u6cd5 \u00b6 # db . py import pymysql from dbutils . pooled_db import PooledDB # \u8fd9\u4e2a\u7c7b\u4e2d\u96c6\u6210\u4e86\u6240\u6709\u7684\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u548c pymysql\u6570\u636e\u7684\u64cd\u4f5c class DBHelper ( object ): def __init__ ( self ): # TODO \u6b64\u5904\u914d\u7f6e\uff0c\u53ef\u4ee5\u53bb\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u3002 self . pool = PooledDB ( creator = pymysql , maxconnections = 5 , mincached = 2 , maxcached = 3 , blocking = True , setsession = [], ping = 0 , host = '127.0.0.1' , port = 3306 , user = 'root' , password = 'root123' , database = 'userdb' , charset = 'utf8' ) def get_conn_cursor ( self ): conn = self . pool . connection () cursor = conn . cursor ( pymysql . cursors . DictCursor ) return conn , cursor def close_conn_cursor ( self , * args ): for item in args : item . close () def exec ( self , sql , ** kwargs ): conn , cursor = self . get_conn_cursor () cursor . execute ( sql , kwargs ) conn . commit () self . close_conn_cursor ( conn , cursor ) def fetch_one ( self , sql , ** kwargs ): conn , cursor = self . get_conn_cursor () cursor . execute ( sql , kwargs ) result = cursor . fetchone () self . close_conn_cursor ( conn , cursor ) return result def fetch_all ( self , sql , ** kwargs ): conn , cursor = self . get_conn_cursor () cursor . execute ( sql , kwargs ) result = cursor . fetchall () self . close_conn_cursor ( conn , cursor ) return result db = DBHelper () # other . py \u5bfc\u5165 db\u8fd9\u4e00\u4e2a\u5bf9\u8c61 ( \u5b83\u662f\u5355\u4f8b\u6a21\u5f0f\u5b9e\u73b0\u7684 ) from db import db db . exec ( \"insert into d1(name) values(%(name)s)\" , name = \"\u6b66\u6c9b\u9f50666\" ) ret = db . fetch_one ( \"select * from d1\" ) print ( ret ) ret = db . fetch_one ( \"select * from d1 where id=%(nid)s\" , nid = 3 ) print ( ret ) ret = db . fetch_all ( \"select * from d1\" ) print ( ret ) ret = db . fetch_all ( \"select * from d1 where id>%(nid)s\" , nid = 2 ) print ( ret ) \u4e0a\u4e0b\u6587\u7ba1\u7406 \u00b6 \u5982\u679c\u4f60\u60f3\u8981\u8ba9\u4ed6\u4e5f\u652f\u6301 with \u4e0a\u4e0b\u6587\u7ba1\u7406. with \u83b7\u53d6\u8fde\u63a5 \uff1a \u6267\u884cSQL \uff08 \u6267\u884c\u5b8c\u6bd5\u540e , \u81ea\u52a8\u5c06\u8fde\u63a5\u4ea4\u8fd8\u7ed9\u8fde\u63a5\u6c60 \uff09 # db_context.py import threading import pymysql from dbutils.pooled_db import PooledDB # \u5168\u5c40\u53d8\u91cf POOL = PooledDB ( creator = pymysql , maxconnections = 5 , mincached = 2 , maxcached = 3 , blocking = True , setsession = [], ping = 0 , host = '127.0.0.1' , port = 3306 , user = 'root' , password = 'root123' , database = 'userdb' , charset = 'utf8' ) class Connect ( object ): def __init__ ( self ): self . conn = conn = POOL . connection () self . cursor = conn . cursor ( pymysql . cursors . DictCursor ) def __enter__ ( self ): return self def __exit__ ( self , exc_type , exc_val , exc_tb ): self . cursor . close () self . conn . close () def exec ( self , sql , ** kwargs ): self . cursor . execute ( sql , kwargs ) self . conn . commit () def fetch_one ( self , sql , ** kwargs ): self . cursor . execute ( sql , kwargs ) result = self . cursor . fetchone () return result def fetch_all ( self , sql , ** kwargs ): self . cursor . execute ( sql , kwargs ) result = self . cursor . fetchall () return result from db_context import Connect # \u6709\u4e00\u4e2a\u597d\u5904 \u5728\u540c\u4e00\u4e2a\u8fde\u63a5\u4e0b\u53ef\u4ee5\u6267\u884c\u591a\u4e2asql\u8bed\u53e5 with Connect () as obj : # print(obj.conn) # print(obj.cursor) ret = obj . fetch_one ( \"select * from d1\" ) print ( ret ) ret = obj . fetch_one ( \"select * from d1 where id= %(id)s \" , id = 3 ) print ( ret )","title":"\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/other/#_1","text":"1000\u5ba2\u6237\u7aef\u5e76\u53d1\u6765 \u8981\u521b\u5efa1000\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u5417\uff1f\u521b\u5efa\u8fde\u63a5\u540e\u518d\u56de\u6765\u65ad\u6389,\u4e0b\u4e00\u6b21\u53c8\u9700\u8981\u518d\u6b21\u521b\u5efa\u8fde\u63a5\uff1f <1>\u4e2a\u6570\u95ee\u9898 <2>\u8fde\u63a5\u540e\u65ad\u5f00\u518d\u8fde\u63a5\u6d88\u8017\u5185\u5b58\u7b49\u8d44\u6e90\u7684\u95ee\u9898. \u9700\u8981\u4e00\u4e2a\u4e1c\u897f\u63a7\u5236\u7f51\u7ad9\u6700\u591a\u8fde\u63a5\u6570\u636e\u5e93\u7684\u6570\u91cf,\u591f\u4e86\u540e\u6765\u8005\u5c31\u6392\u961f; \u521b\u5efa\u8fde\u63a5\u540e\u4e0d\u7528\u6b64\u8fde\u63a5\u4e86\u4f46\u4e0d\u65ad\u5f00\u6682\u65f6\u5b58\u8d77\u6765,\u4ee5\u4fbf\u8fde\u63a5\u7684\u91cd\u7528. \u89e3\u51b3\u65b9\u6848: \u4f7f\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60. pip3.9 install pymysql pip3.9 install dbutils import threading import pymysql from dbutils.pooled_db import PooledDB MYSQL_DB_POOL = PooledDB ( creator = pymysql , # -- \u4f7f\u7528\u94fe\u63a5\u6570\u636e\u5e93\u7684\u6a21\u5757 maxconnections = 10 , # -- \u8fde\u63a5\u6c60\u5141\u8bb8\u7684\u6700\u5927\u8fde\u63a5\u6570\uff0c0\u548cNone\u8868\u793a\u4e0d\u9650\u5236\u8fde\u63a5\u6570 # -- \u521d\u59cb\u5316\u65f6\uff0c\u94fe\u63a5\u6c60\u4e2d\u81f3\u5c11\u521b\u5efa\u7684\u7a7a\u95f2\u7684\u94fe\u63a5\uff0c0\u8868\u793a\u4e0d\u521b\u5efa # \u6700\u5f00\u59cb\u7684\u65f6\u5019\u6ca1\u6709\u90a3\u4e48\u591a\u8bf7\u6c42\u7684\u5230\u6765,\u6ca1\u5fc5\u8981\u5728\u5185\u90e8\u521b\u5efa10\u4e2a\u8fde\u63a5 \"10\u662f\u4e0a\u9762maxconnections\u7684\u503c\" # \u6240\u4ee5\u6700\u5c0f\u521b\u5efa\u8fde\u63a5\u6570,\u6700\u5f00\u59cb\u7684\u65f6\u5019\u521b\u5efa\u4e24\u4e2a,\u540e\u9762\u4e0d\u591f\u7528\u4e86,\u518d\u81ea\u52a8\u53bb\u589e\u52a0. mincached = 3 , # -- \u94fe\u63a5\u6c60\u4e2d\u6700\u591a\u95f2\u7f6e\u7684\u94fe\u63a5,0\u548cNone\u4e0d\u9650\u5236 # \u4e00\u5f00\u59cb\u8fde\u63a5\u6c60\u6709\u4e24\u4e2a\u8fde\u63a5,\u7a81\u7136\u7528\u6237\u731b\u589e\u8fde\u63a5\u6c60\u6ee1\u4e86,\u8fc7\u4e86\u4e00\u4f1a\u7528\u6237\u91cf\u53c8\u5c11\u4e86,\u90a3\u4e48\u8fc7\u6bb5\u65f6\u95f4\u5c31\u8981\u5bf9\u5176\u8fdb\u884c\u56de\u6536. maxcached = 5 , # -- \u8be5\u53c2\u6570\u503c\u65e0\u8bba\u8bbe\u7f6e\u4e3a\u591a\u5c11,\u751f\u6548\u7684\u53ea\u4f1a\u662f0! \u4e0d\u7528\u8bbe\u7f6e! # \u8fde\u63a5\u6c60\u4e2d\u6700\u591a\u5171\u4eab\u7684\u8fde\u63a5\u6570\u91cf.0\u548cNone\u8868\u793a\u5168\u90e8\u5171\u4eab! maxshared = 3 , # -- \u8fde\u63a5\u6c60\u4e2d\u5982\u679c\u6ca1\u6709\u53ef\u7528\u8fde\u63a5,\u662f\u5426\u963b\u585e\u7b49\u5f85. True\u7b49\u5f85\u3001False\u4e0d\u7b49\u5f85\u7136\u540e\u62a5\u9519. blocking = True , # -- \u4e00\u4e2a\u8fde\u63a5\u6700\u591a\u88ab\u91cd\u590d\u4f7f\u7528\u7684\u6b21\u6570. None\u8868\u793a\u65e0\u9650\u5236! \u4e00\u822c\u90fd\u8bbe\u7f6e\u4e3aNone! maxusage = None , # -- \u5f00\u59cb\u4f1a\u8bdd(\u8fde\u63a5)\u524d\u6267\u884c\u7684\u547d\u4ee4\u5217\u8868. \u5982: [\"set datestyle to ...\", \"set time zone ...\"] setsession = [], # -- ping MySQL\u670d\u52a1\u7aef,\u68c0\u67e5\u662f\u5426\u670d\u52a1\u53ef\u7528 \u8be5\u53c2\u6570\u503c\u901a\u5e38\u8bbe\u7f6e\u4e3a0 # 0 = None = never ; 1 = default = whenever it is requested # 2 = when a cursor is created ; 4 = when a query is executed ; 7 = always ping = 0 , host = '127.0.0.1' , port = 3306 , user = 'root' , password = '123456' , database = 'youku' , charset = 'utf8' ) def task (): conn = MYSQL_DB_POOL . connection () # -- \u53bb\u8fde\u63a5\u6c60\u83b7\u53d6\u4e00\u4e2a\u8fde\u63a5 print ( \"\u8be5\u94fe\u63a5\u88ab\u62ff\u8d70\u4e86!\" , conn . _con ) print ( \"\u6c60\u5b50\u91cc\u76ee\u524d\u6709\u8fd9\u4e9b\u94fe\u63a5:\" , MYSQL_DB_POOL . _idle_cache , ' \\r\\n ' ) cursor = conn . cursor ( pymysql . cursors . DictCursor ) cursor . execute ( 'select * from user' ) result = cursor . fetchall () cursor . close () # -- \u5e76\u4e0d\u662f\u5173\u95ed\u8fde\u63a5 \u800c\u662f\u5c06\u8fde\u63a5\u4ea4\u8fd8\u7ed9\u6570\u636e\u5e93\u8fde\u63a5\u6c60 conn . close () def run (): for i in range ( 10 ): t = threading . Thread ( target = task ) t . start () if __name__ == '__main__' : run ()","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/other/#sql","text":"\u57fa\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5f00\u53d1\u4e00\u4e2a\u516c\u5171\u7684SQL\u64cd\u4f5c\u7c7b, \u65b9\u4fbf\u4ee5\u540e\u64cd\u4f5c\u6570\u636e\u5e93.","title":"SQL\u5de5\u5177\u7c7b"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/other/#_2","text":"# db . py import pymysql from dbutils . pooled_db import PooledDB # \u8fd9\u4e2a\u7c7b\u4e2d\u96c6\u6210\u4e86\u6240\u6709\u7684\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u548c pymysql\u6570\u636e\u7684\u64cd\u4f5c class DBHelper ( object ): def __init__ ( self ): # TODO \u6b64\u5904\u914d\u7f6e\uff0c\u53ef\u4ee5\u53bb\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u3002 self . pool = PooledDB ( creator = pymysql , maxconnections = 5 , mincached = 2 , maxcached = 3 , blocking = True , setsession = [], ping = 0 , host = '127.0.0.1' , port = 3306 , user = 'root' , password = 'root123' , database = 'userdb' , charset = 'utf8' ) def get_conn_cursor ( self ): conn = self . pool . connection () cursor = conn . cursor ( pymysql . cursors . DictCursor ) return conn , cursor def close_conn_cursor ( self , * args ): for item in args : item . close () def exec ( self , sql , ** kwargs ): conn , cursor = self . get_conn_cursor () cursor . execute ( sql , kwargs ) conn . commit () self . close_conn_cursor ( conn , cursor ) def fetch_one ( self , sql , ** kwargs ): conn , cursor = self . get_conn_cursor () cursor . execute ( sql , kwargs ) result = cursor . fetchone () self . close_conn_cursor ( conn , cursor ) return result def fetch_all ( self , sql , ** kwargs ): conn , cursor = self . get_conn_cursor () cursor . execute ( sql , kwargs ) result = cursor . fetchall () self . close_conn_cursor ( conn , cursor ) return result db = DBHelper () # other . py \u5bfc\u5165 db\u8fd9\u4e00\u4e2a\u5bf9\u8c61 ( \u5b83\u662f\u5355\u4f8b\u6a21\u5f0f\u5b9e\u73b0\u7684 ) from db import db db . exec ( \"insert into d1(name) values(%(name)s)\" , name = \"\u6b66\u6c9b\u9f50666\" ) ret = db . fetch_one ( \"select * from d1\" ) print ( ret ) ret = db . fetch_one ( \"select * from d1 where id=%(nid)s\" , nid = 3 ) print ( ret ) ret = db . fetch_all ( \"select * from d1\" ) print ( ret ) ret = db . fetch_all ( \"select * from d1 where id>%(nid)s\" , nid = 2 ) print ( ret )","title":"\u5355\u4f8b\u548c\u65b9\u6cd5"},{"location":"5_db/1_%E8%BF%9B%E9%98%B6/other/#_3","text":"\u5982\u679c\u4f60\u60f3\u8981\u8ba9\u4ed6\u4e5f\u652f\u6301 with \u4e0a\u4e0b\u6587\u7ba1\u7406. with \u83b7\u53d6\u8fde\u63a5 \uff1a \u6267\u884cSQL \uff08 \u6267\u884c\u5b8c\u6bd5\u540e , \u81ea\u52a8\u5c06\u8fde\u63a5\u4ea4\u8fd8\u7ed9\u8fde\u63a5\u6c60 \uff09 # db_context.py import threading import pymysql from dbutils.pooled_db import PooledDB # \u5168\u5c40\u53d8\u91cf POOL = PooledDB ( creator = pymysql , maxconnections = 5 , mincached = 2 , maxcached = 3 , blocking = True , setsession = [], ping = 0 , host = '127.0.0.1' , port = 3306 , user = 'root' , password = 'root123' , database = 'userdb' , charset = 'utf8' ) class Connect ( object ): def __init__ ( self ): self . conn = conn = POOL . connection () self . cursor = conn . cursor ( pymysql . cursors . DictCursor ) def __enter__ ( self ): return self def __exit__ ( self , exc_type , exc_val , exc_tb ): self . cursor . close () self . conn . close () def exec ( self , sql , ** kwargs ): self . cursor . execute ( sql , kwargs ) self . conn . commit () def fetch_one ( self , sql , ** kwargs ): self . cursor . execute ( sql , kwargs ) result = self . cursor . fetchone () return result def fetch_all ( self , sql , ** kwargs ): self . cursor . execute ( sql , kwargs ) result = self . cursor . fetchall () return result from db_context import Connect # \u6709\u4e00\u4e2a\u597d\u5904 \u5728\u540c\u4e00\u4e2a\u8fde\u63a5\u4e0b\u53ef\u4ee5\u6267\u884c\u591a\u4e2asql\u8bed\u53e5 with Connect () as obj : # print(obj.conn) # print(obj.cursor) ret = obj . fetch_one ( \"select * from d1\" ) print ( ret ) ret = obj . fetch_one ( \"select * from d1 where id= %(id)s \" , id = 3 ) print ( ret )","title":"\u4e0a\u4e0b\u6587\u7ba1\u7406"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/","text":"git\u4ecb\u7ecd \u00b6 Git\u662f\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf,\u63a7\u5236\u7684\u5bf9\u8c61\u662f\u5f00\u53d1\u7684\u9879\u76ee\u4ee3\u7801. 1> \u5bf9\u6587\u4ef6(\u4ee3\u7801)\u8fdb\u884c\u7248\u672c\u7ba1\u7406 2> \u5b8c\u6210 \u534f\u540c\u5f00\u53d1 \u9879\u76ee, \u5e2e\u52a9\u7a0b\u5e8f\u5458\u6574\u5408\u4ee3\u7801 i\uff09\u5e2e\u52a9\u5f00\u53d1\u8005\u5408\u5e76\u5f00\u53d1\u7684\u4ee3\u7801 ii\uff09\u5982\u679c\u51fa\u73b0\u51b2\u7a81\u4ee3\u7801\u7684\u5408\u5e76, \u4f1a\u63d0\u793a\u540e\u63d0\u4ea4\u5408\u5e76\u4ee3\u7801\u7684\u5f00\u53d1\u8005, \u8ba9\u5176\u89e3\u51b3\u51b2\u7a81 \u4e0b\u8f7d: https://git-scm.com/book/zh/v2/\u8d77\u6b65-\u5b89\u88c5-Git Q: git\u4e0esvn\u7684\u533a\u522b. git : \u5206\u5e03\u5f0f\u7ba1\u7406 ; svn : \u96c6\u4e2d\u7ba1\u7406 . \u6bcf\u4e2agit\u5ba2\u6237\u7aef\u90fd\u6709\u81ea\u5df1\u7248\u672c\u5e93 , \u672c\u5730\u5c31\u53ef\u4ee5\u8fdb\u884c\u7248\u672c\u7ba1\u7406 , \u4e0d\u9700\u8981\u8fdc\u7a0b . svn\u5fc5\u987b\u628a\u4ee3\u7801\u63d0\u4ea4\u5230\u8fdc\u7aef , \u624d\u80fd\u8fdb\u884c\u4ee3\u7801\u7248\u672c\u7ba1\u7406 .. \u4f9d\u9644\u4e8e\u670d\u52a1\u7aef\u8fdb\u884c\u7248\u672c\u7ba1\u7406 . \u4e5f\u5c31\u662f\u8bf4 Git : \u5206\u5e03\u5f0f , \u65e0\u7f51\u7edc\u65f6\u4e5f\u53ef\u4ee5\u63d0\u4ea4\u5230\u672c\u5730\u7248\u672c\u5e93 , \u5f85\u5230\u6709\u7f51\u7edc\u65f6\u518dpush\u5230\u670d\u52a1\u5668 . svn : \u975e\u5206\u5e03\u5f0f . \u65e0\u7f51\u7edc\u4e0d\u53ef\u4ee5\u63d0\u4ea4 . Q: git\u3001gitlab\u3001gitee\u3001github\u6709\u4ec0\u4e48\u533a\u522b \u57fa\u4e8edocker\u642d\u5efa\u4e00\u4e2agitlab,\u53c2\u8003\u6587\u6863: https://www.cnblogs.com/liuqingzheng/p/15325288.html git : \u7248\u672c\u7ba1\u7406\u8f6f\u4ef6 github : \u5168\u7403\u6700\u5927\u7684\u5f00\u6e90\u4ee3\u7801\u4ed3\u5e93 - \u5f00\u6e90\u7684\u4ee3\u7801 , \u6258\u7ba1\u5728github\u4e0a , \u5176\u4ed6\u4eba\u53ef\u4ee5\u4e0b\u8f7d - \u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 ( \u5f00\u6e90\u7684 \u3001 \u4e0d\u5f00\u6e90\u7684\u90fd\u53ef\u4ee5\u6258\u7ba1 ) \u516c\u6709\u4ed3\u5e93\u514d\u8d39 , \u90e8\u5206\u79c1\u6709\u4ed3\u5e93\u6536\u8d39 Ps : \u79c1\u6709\u7684\u4e00\u822c\u4e0d\u4f1a\u6258\u7ba1\u5728github\u4e0a - git\u7684\u8fdc\u7a0b\u4ed3\u5e93 gitee : \u7801\u4e91 . \u56fd\u4ea7\u7248github . - \u56fd\u5185\u8bbf\u95ee\u4f1a\u6bd4github\u5feb\u5f88\u591a - \u5c0f\u516c\u53f8 , \u4f1a\u82b1\u94b1\u4f7f\u7528gitee\u7684\u79c1\u6709\u4ed3\u5e93 . gitlab : \u516c\u53f8\u5185\u90e8\u81ea\u5df1\u7684\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 . \u7b80\u5355\u6765\u8bf4 , \u5c31\u662f\u516c\u53f8\u5185\u90e8\u81ea\u5df1\u642d\u5efa\u4e86\u4e00\u4e2agitee . \u7b80\u5355\u6765\u8bf4 : git \u8f6f\u4ef6 github \u5168\u7403\u6700\u5927\u7684\u5f00\u6e90\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 gitee \u56fd\u5185\u6700\u5927\u7684\u5f00\u6e90\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 gitlab \u516c\u53f8\u5185\u90e8\u7684\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 Q: git\u5de5\u4f5c\u6d41\u7a0b \u6ce8: \u56fe\u4e2d\u6807\u7ea2\u7684\u662f\u9700\u8981\u8bb0\u4f4f\u7684. \u5de5\u4f5c\u533a === \u6682\u5b58\u533a === \u7248\u672c\u5e93 \u5de5\u4f5c\u533a\u4fee\u6539\u7684\u5185\u5bb9 ( \u5220\u9664 \u3001 \u65b0\u589e \u3001 \u4fee\u6539 ) --> \u63d0\u4ea4\u5230\u6682\u5b58\u533a --> \u63d0\u4ea4\u5230\u7248\u672c\u5e93 \u5f3a\u8c03 : git checkout . ==> \u6062\u590d\u5de5\u4f5c\u533a\u7684\u66f4\u6539 , \u614e\u7528 git reset HEAD ==> \u628a\u6682\u5b58\u533a\u7684\u66f4\u6539\u62c9\u56de\u5230\u5de5\u4f5c\u533a , \u5c11\u7528 git reset -- soft \u7248\u672c\u53f7 git reset -- mix \u7248\u672c\u53f7 ==> \u8fd9\u4e24\u6761\u547d\u4ee4\u77e5\u9053\u5c31\u884c , \u57fa\u672c\u4e0d\u4f1a\u7528 git reset -- hard \u7248\u672c\u53f7 ==> \u76f4\u63a5\u5c06\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u53d8\u6210\u76f8\u5e94\u7248\u672c\u5e93\u91cc\u7684\u67d0\u4e2a\u7248\u672c , \u5076\u5c14\u4f1a\u7528 git\u57fa\u672c\u547d\u4ee4 \u00b6 \u6ce8\u610f: \u7a7a \u6587\u4ef6<\u5939> \u4e0d\u4f1a\u88abgit\u7ba1\u7406 1. \u2605 \u521b\u5efa\u51fa\u4e00\u4e2a\u5de5\u4f5c\u533a , \u5728\u91cc\u9762\u64cd\u4f5c\u6587\u4ef6 1 ) \u5c06\u5df2\u6709\u7684\u6587\u4ef6\u5939\u521d\u59cb\u5316\u4e3agit\u4ed3\u5e93 cd \u76ee\u6807\u6587\u4ef6\u5939 git init # -- \u521d\u59cb\u5316\u4ed3\u5e93,\u8868\u660e\u8be5\u6587\u4ef6\u5939\u88abgit\u6240\u7ba1\u7406\u5566!\u5728\u76ee\u6807\u6587\u4ef6\u5939\u4e0b\u4f1a\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u7684.git\u6587\u4ef6\u5939!! 2 ) \u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u521d\u59cb\u5316git\u4ed3\u5e93 cd \u76ee\u6807\u76ee\u5f55 git init \u4ed3\u5e93\u540d # -- \u5728\u76ee\u6807\u76ee\u5f55\u4e0b\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u548c\u4ed3\u5e93\u540d\u4e00\u6837\u7684\u6587\u4ef6\u5939,\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u4f1a\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u7684.git\u6587\u4ef6\u5939!! 2. \u2605 \u67e5\u770b\u72b6\u6001 git status # -- \u7ea2\u8272 \u8868\u793a\u53d8\u5316\u4e86,\u6ca1\u6709\u63d0\u4ea4\u5230\u6682\u5b58\u533a # -- \u7eff\u8272 \u8868\u793a\u5728\u6682\u5b58\u533a,\u6ca1\u6709\u63d0\u4ea4\u5230\u7248\u672c\u5e93 # -- \u82e5\u6ca1\u6709\u53d8\u5316,\u8868\u793a\u6240\u6709\u4ee3\u7801\u90fd\u88ab\u7248\u672c\u7ba1\u7406\u5566 git status - s # -- \u67e5\u770b\u4ed3\u5e93\u72b6\u6001\u7684\u7b80\u7ea6\u663e\u793a 3. \u2605 \u4ece\u5de5\u4f5c\u533a\u63d0\u4ea4\u5230\u6682\u5b58\u533a git add s1 . py # -- \u53ea\u63d0\u4ea4s1.py\u5230\u6682\u5b58\u533a git add . # -- \u628a\u5de5\u4f5c\u533a\u4e2d\u7684\u6240\u6709\u66f4\u6539\u90fd\u63d0\u4ea4\u5230\u6682\u5b58\u533a \u7ea2\u53d8\u7eff 4. \u2605 \u4ece\u6682\u5b58\u533a\u63d0\u4ea4\u5230\u7248\u672c\u5e93 git commit - m '\u6ce8\u91ca' 5. \u2605 \u67e5\u770b\u65e5\u5fd7 git log # -- \u67e5\u770b\u7248\u672c\u53d8\u5316\u7684\u65e5\u5fd7 git reflog # -- \u4ee5\u7b80\u7565\u5f62\u5f0f\u663e\u793a\u65e5\u5fd7 git log \u548cgit reflog\u7684\u533a\u522b : git log \u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u6240\u6709\u63d0\u4ea4\u8fc7\u7684\u7248\u672c\u4fe1\u606f\u5982\u679c\u611f\u89c9\u592a\u7e41\u7410 , \u53ef\u4ee5\u52a0\u4e0a\u53c2\u6570 -- pretty = oneline , \u53ea\u4f1a\u663e\u793a\u7248\u672c\u53f7\u548c\u63d0\u4ea4\u65f6\u7684\u5907\u6ce8\u4fe1\u606f git reflog \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u5206\u652f\u7684\u6240\u6709\u64cd\u4f5c\u8bb0\u5f55 ( \u5305\u62ec\u5df2\u7ecf\u88ab\u5220\u9664\u7684 commit \u8bb0\u5f55\u548c reset \u7684\u64cd\u4f5c ) 6. \u6062\u590d\u5230\u67d0\u4e2a\u7248\u672c git reset -- hard \u7248\u672c\u53f7 7. \u628a\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u6062\u590d\u5230\u7248\u672c\u5e93\u6700\u540e\u7684\u72b6\u6001 git checkout . 8. \u8bbe\u7f6e\u7528\u6237\u548c\u90ae\u7bb1 # -- \u4f5c\u7528: \u63d0\u4ea4\u5230\u7248\u672c\u5e93\u540e,\u80fd\u770b\u5230\u662f\u8c01\u6539\u7684 # \u6ce8\u610f: \u4e00\u4e2a\u4ed3\u5e93\u6709\u5c40\u90e8\u7528\u6237,\u4f18\u5148\u4f7f\u7528\u5c40\u90e8\u7528\u6237,\u6ca1\u6709\u914d\u7f6e\u518d\u627e\u5168\u5c40\u7528\u6237 # \u25ce \u5168\u5c40\u914d\u7f6e # \u6ce8: \u5168\u5c40\u914d\u7f6e\u540e \u4f1a\u5728\u7528\u6237\u5bb6\u8def\u5f84\u7684\\.gitconfig\u4e2d\u65b0\u5efa\u7528\u6237\u4fe1\u606f,\u5728\u6240\u6709\u4ed3\u5e93\u4e0b\u90fd\u53ef\u4ee5\u4f7f\u7528 git config -- global user . name \"\u7528\u6237\u540d\" git config -- global user . email \"\u7528\u6237\u90ae\u7bb1\" # \u25ce \u5c40\u90e8\u914d\u7f6e # \u6ce8: \u5c40\u90e8\u914d\u7f6e\u540e \u4f1a\u5728\u5f53\u524d\u4ed3\u5e93\u4e0b\u7684.git\u6587\u4ef6\u5939\u7684config\u4e2d\u65b0\u5efa\u7528\u6237\u4fe1\u606f,\u53ea\u80fd\u5728\u5f53\u524d\u4ed3\u5e93\u4e0b\u4f7f\u7528 git config user . name \"\u7528\u6237\u540d\" git config user . email \"\u7528\u6237\u90ae\u7bb1\" \u8fc7\u6ee4\u6587\u4ef6 \u00b6 Git\u5de5\u4f5c\u76ee\u5f55\u4e2d, \u6709\u4e9b\u6587\u4ef6\u5fc5\u987b\u6709, \u4f46\u53c8\u4e0d\u80fd\u63d0\u4ea4\u5b83\u4eec, \u5c31\u53ef\u4ee5\u8bbe\u7f6e\u5ffd\u7565\u6587\u4ef6!! \u5728Git\u5de5\u4f5c\u533a\u7684\u6839\u8def\u5f84\u4e0b\u65b0\u5efa\u7acb .gitignore \u6587\u4ef6. \u5728\u6587\u4ef6\u4e2d\u5199\u5ffd\u7565\u6587\u4ef6.. \u6587\u4ef6\u6216\u6587\u4ef6\u5939\u540d : \u4ee3\u8868\u6240\u6709\u76ee\u5f55\u4e0b\u7684\u540c\u540d\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u90fd\u88ab\u8fc7\u6ee4 / \u6587\u4ef6\u6216\u6587\u4ef6\u5939\u540d : \u4ee3\u8868\u4ed3\u5e93\u6839\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u88ab\u8fc7\u6ee4 eg : a . txt - \u9879\u76ee\u4e2d\u6240\u6709a . txt\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u90fd\u4f1a\u88ab\u8fc7\u6ee4 / a . txt - \u9879\u76ee\u4e2d\u53ea\u6709\u6839\u76ee\u5f55\u4e0ba . txt\u6587\u4ef6\u4f1a\u88ab\u8fc7\u6ee4 / b / a . txt - \u9879\u76ee\u4e2d\u53ea\u6709\u6839\u76ee\u5f55\u4e0b\u7684b\u6587\u4ef6\u5939\u4e0b\u7684a . txt\u6587\u4ef6\u4f1a\u88ab\u8fc7\u6ee4 * x * : - \u540d\u5b57\u4e2d\u6709\u4e00\u4e2ax\u7684\u90fd\u4f1a\u88ab\u8fc7\u6ee4 \uff08 * \u4ee3\u88680 ~ n\u4e2a\u4efb\u610f\u5b57\u7b26 \uff09 \u7a7a\u6587\u4ef6\u5939\u4e0d\u4f1a\u88ab\u63d0\u4ea4 , \u7a7a\u5305\u4f1a\u88ab\u63d0\u4ea4 , \u5305\u53ef\u4ee5\u88ab\u63d0\u4ea4 \uff08 \u5305\u4e2d\u6709\u4e00\u4e2ainit\u7a7a\u6587\u4ef6 \uff09 \u6ce8 : a / b a \u3001 b\u90fd\u662f\u7a7a\u6587\u4ef6\u5939 , git status\u4e0d\u4f1a\u6709\u53d8\u5316 ! \u5206\u652f\u64cd\u4f5c \u00b6 ps: \u4e0a\u56fe\u5c31\u662fgit\u7684flow\u5de5\u4f5c\u6d41. \u6211\u4eec\u7528\u7684\u662f master-dev-bug. \u4e00\u822c\u7684\u4e2d\u5c0f\u578b\u516c\u53f8\u90fd\u662f\u8fd9\u6837\u64cd\u4f5c : \u4e3b\u5206\u652f\u53ea\u7528\u6765\u53d1\u65b0\u7248\u672c v1 v2 v3 dev\u5206\u652f\u7528\u6765\u5f00\u53d1 .. ( v1\u5230v2\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u82e5\u5e72\u6b21\u63d0\u4ea4 ) dev\u5206\u652f\u5f00\u53d1\u5b8c\u540e\u5408\u5e76\u5230\u4e3b\u5206\u652f . \u518d\u53d1\u5e03\u5230\u670d\u52a1\u5668 . 1. \u521b\u5efa\u5206\u652f git branch \u5206\u652f\u540d \u6ce8 : master\u4e3b\u5e72\u4e0a\u6240\u6709\u7684\u4e1c\u897f\u90fd\u88abgit\u7ba1\u7406\u540e , \u62c9\u53d6\u5206\u652f\u624d\u662f\u5408\u7406\u7684 ! 2. \u67e5\u770b\u5206\u652f git branch 3. \u5207\u6362\u5206\u652f git branch \u5206\u652f\u540d 4. \u5220\u9664\u5206\u652f git branch - d \u5206\u652f\u540d \u6ce8 : \u5728\u5f53\u524d\u5206\u652f\u4e0a\u5220\u9664\u5f53\u524d\u5206\u652f\u662f\u5220\u9664\u4e0d\u4e86\u7684 ! 5. \u5408\u5e76\u5206\u652f # -- \u5c06 \u67d0\u5206\u652f \u5408\u5e76\u5230\u5f53\u524d\u6240\u5728\u5206\u652f\u4e0a git merge \u67d0\u5206\u652f # -- \u6ce8:\u5c06dev\u5206\u652f\u5408\u5e76\u5230master\u5206\u652f\u4e0a\u65f6,\u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81!! \u8fdc\u7a0b\u4ed3\u5e93 \u00b6 \u4ee5gitee\u4e3a\u4f8b, \u4f5c\u4e3a\u6211\u4eec\u7684\u8fdc\u7a0b\u4ed3\u5e93!! \u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740\u6709\u4e24\u79cd http/ssh. \u767b\u9646gitee,\u521b\u5efa <\u7a7a> \u4ed3\u5e93! \u82e5\u521b\u5efa\u7684\u4e0d\u662f\u7a7a\u4ed3\u5e93, \u672c\u5730\u7684\u6709\u5185\u5bb9, push\u4e0a\u53bb, \u5c31\u4f1a\u6709\u51b2\u7a81.. \u5982\u4f55\u89e3\u51b3? \u5148pull\u62c9\u53d6\u4e0b\u6765, \u5c06\u672c\u5730master\u5206\u652f\u4e2d\u9664\u4e86.git\u6587\u4ef6\u7684\u5176\u5b83\u6587\u4ef6,\u590d\u5236\u5230\u521a\u4ece\u8fdc\u7a0b\u62c9\u53d6\u7684\u90a3\u4e2a\u4ed3\u5e93\u4e2d.. \u518dadd commit push.. http\u534f\u8bae\u8fde\u63a5 \u00b6 git config -- global user . name \"DC\" git config -- global user . email \"1415806497@qq.com\" git remote add origin https : // gitee . com / One_PieceDC / test . git # -- \u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93,\u5e76\u5c06\u8be5\u8fdc\u7a0b\u4ed3\u5e93\u547d\u540d\u4e3aorigin git remote # -- \u67e5\u770b\u672c\u5730\u8bbe\u7f6e\u7684\u8fdc\u7a0b\u4ed3\u5e93 git push origin \"master\" # -- \u5c06\u672c\u5730\u7684master\u5206\u652f \u63d0\u4ea4\u5230/\u63a8\u5230 \u8fdc\u7a0b\u4ed3\u5e93 \u6ce8 - \u7b2c\u4e00\u6b21\u63a8\u8fdc\u7a0b\u4ed3\u5e93\u65f6 , \u4f1a\u8ba9\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801 .. \u82e5\u662f\u5728windows\u7cfb\u7edf\u4e0a\u64cd\u4f5c\u7684 . \u4f1a\u5f39\u51fa\u4e00\u4e2a\u6846 . \u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u4f1a\u81ea\u52a8\u4fdd\u5b58\u5230 \u63a7\u5236\u9762\u677f -> \u7528\u6237\u8d26\u6237 -> \u51ed\u636e\u7ba1\u7406\u5668 -> windows\u51ed\u636e -> \u666e\u901a\u51ed\u636e \u4e2d . \u4fdd\u5b58\u540e , \u4e0b\u4e00\u6b21\u63a8\u5c31\u4e0d\u4f1a\u8ba9\u8f93\u5165\u5566 . git pull origin \"master\" # -- \u4ece\u8fdc\u7a0b\u4ed3\u5e93\u62c9\u53d6\u4ee3\u7801 git remote remove origin # -- \u5220\u9664\u672c\u5730\u8bbe\u7f6e\u7684\u8fdc\u7a0b\u4ed3\u5e93 ssh\u8fde\u63a5 \u00b6 \u63a8\u9001\u548c\u4e0b\u8f7d,\u4f7f\u7528http\u534f\u8bae\u7684\u5f62\u5f0f,\u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801 \u73b0\u5728\u4f7f\u7528ssh\u8fde\u63a5\u8fdc\u7a0b -- \u516c\u53f8\u91cc\u57fa\u672c\u4e0a\u4f7f\u7528\u7684\u8fd9\u79cd! \u4f7f\u7528ssh\u8fde\u63a5\u8fdc\u7a0b - \u4e0d\u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801 - \u9700\u8981\u914d\u7f6e\u516c\u94a5\u548c\u79c1\u94a5 ( \u975e\u5bf9\u79f0\u52a0\u5bc6 ) \u5f3a\u8c03 : \u79c1\u94a5\u662f\u81ea\u5df1\u7684 , \u4e00\u5b9a\u4e0d\u80fd\u4e22 ; \u516c\u94a5\u53ef\u4ee5\u7ed9\u522b\u4eba . \u6ce8 : \u522b\u4eba\u4f7f\u7528\u516c\u94a5\u52a0\u5bc6\u6570\u636e\u4f20\u9012\u8fc7\u6765 , \u6211\u4eec\u518d\u7528\u79c1\u94a5\u89e3\u5bc6 . \u54ea\u6015\u4e2d\u9014\u6570\u636e\u88ab\u622a\u83b7\u4e86 , \u6ca1\u6709\u79c1\u94a5\u4e5f\u662f\u89e3\u4e0d\u5f00\u7684 . step1: \u751f\u6210/\u6dfb\u52a0\u516c\u94a5\u79c1\u94a5 \u5b98\u65b9\u6587\u6863: https://gitee.com/help/articles/4181#article-header0 # -t \u4f7f\u7528\u4ec0\u4e48\u52a0\u5bc6\u65b9\u5f0f ; -C \u90ae\u7bb1\u5730\u5740 One_Piece@DC\u7684MacBook test % ssh-keygen -t rsa -C \"1415806497@qq.com\" Generating public/private rsa key pair. # \u8fd9\u91cc\u63d0\u793a\u4e86\u9ed8\u8ba4\u7684\u4fdd\u5b58\u8def\u5f84/Users/One_Piece/.ssh Enter file in which to save the key (/Users/One_Piece/.ssh/id_rsa): ... ... # -- \u4e00\u8defEnter\u56de\u8f66\u5373\u53ef cd /Users/One_Piece/.ssh # -- \u5728\u8be5\u6587\u4ef6\u5939\u4e0b,id_rsa\u662f\u79c1\u94a5 id_rsa.pub\u662f\u516c\u94a5 step2: \u5c06\u516c\u94a5\u6dfb\u52a0\u5230gitee\u4e2d,\u76f8\u5f53\u4e8e<\u5f53\u524d>\u673a\u5668\u4e0egitee\u5efa\u7acb\u4e86\u4e00\u4e2a\u52a0\u5bc6\u901a\u9053(\u8d70\u7684ssh\u7684\u534f\u8bae). step3: \u5728\u672c\u5730\u6dfb\u52a0ssh\u534f\u8bae\u5f62\u5f0f\u7684\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 git remote add origin_ssh git @gitee . com : One_PieceDC / test . git # -- \u5b83\u4f1a\u81ea\u52a8\u53bb\u7535\u8111\u91cc\u67e5\u627e\u79c1\u94a5,\u7b2c\u4e00\u6b21\u63d0\u4ea4\u65f6,\u4f1a\u95ee\u4f60\u662f\u5426\u786e\u5b9a\u4f7f\u7528\u8be5\u79c1\u94a5,\u8f93\u5165yes\u5373\u53ef!!\u5f80\u540e\u76f4\u63a5\u63d0\u76f4\u63a5\u62c9. git push origin_ssh master \u534f\u540c\u5f00\u53d1 clone \u00b6 \u7ec4\u957f\u672c\u5730\u521b\u5efa\u51fa\u7a7a\u9879\u76ee,\u5e95\u5c42\u4ee3\u7801\u5199\u5b8c ---> \u63d0\u4ea4\u5230\u8fdc\u7a0b\u4ed3\u5e93 \u5f20\u4e09\u3001\u674e\u56db\u3001\u738b\u4e94\u90fd\u8981\u5171\u540c\u5f00\u53d1\u8fd9\u4e2a\u9879\u76ee, \u6211\u4eec\u9700\u8981\u5148\u628a\u4ee3\u7801 clone \u5230\u672c\u5730 \u63d0\u4ea4\u524d,\u65f6\u4e0d\u65f6\u7684pull\u4e0b!! \u4ee5\u8def\u98de\u5b66\u57ce\u7684\u540e\u7aef\u9879\u76ee\u4e3a\u4f8b 1 > git init 2 > \u8bbe\u7f6e\u5ffd\u7565\u6587\u4ef6 . gitignore ( \u8bbe\u7f6e\u540e , \u88ab\u5ffd\u7565\u7684\u6587\u4ef6\u5728pycharm\u91cc\u4f1a\u53d8\u6210\u9ec4\u8272 ) . idea . DS_Store / logs /*. log __pycache__ 3 > git add . 4 > git commit - m \"\u7b2c\u4e00\u6b21\u63d0\u4ea4,\u5199\u5b8c\u4e86\u9996\u9875\u529f\u80fd\" 5 > \u5728\u8fdc\u7a0b , \u5efa\u7acb\u4e00\u4e2a\u8fdc\u7a0b < \u7a7a > \u4ed3\u5e93 6 > \u5728\u672c\u5730git\u91cc\u6dfb\u52a0\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 git remote add origin git @gitee . com : One_PieceDC / luffy_api . git 7 > \u628a\u672c\u5730\u4ed3\u5e93\u7684\u4ee3\u7801\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93 # -- -u\u8868\u793a\u7f13\u5b58\u4e86origin \"master\",\u4e0b\u6b21\u53ea\u9700\u8981\u6572git push\u5c31\u76f8\u5f53\u4e8e\u6572\u4e86git push origin \"master\" # git push -u origin \"master\" git push origin \"master\" # -- \u56e0\u4e3a\u5df2\u7ecf\u914d\u7f6e\u4e86ssh,\u516c\u94a5\u79c1\u94a5,\u6240\u4ee5\u8be5\u5904\u7684\u63d0\u4ea4\u4e0d\u9700\u8981\u4efb\u4f55\u8ba4\u8bc1 --- \u5f3a\u8c03 , \u4e0a\u8ff05\u4e2a\u6b65\u9aa4 , \u82e5\u662f\u4ece\u5934\u5f00\u59cb\u7684\u65b0\u9879\u76ee\u7684\u8bdd , \u624d\u4f1a\u5982\u6b64\u64cd\u4f5c . ( \u4e00\u822c\u6765\u8bf4 , \u4ee5\u4e0a\u7684\u64cd\u4f5c , \u516c\u53f8\u7684\u524d\u8f88\u5c31\u5df2\u7ecf\u505a\u597d\u5566 ! ) --- \u9879\u76ee\u7684\u62e5\u6709\u8005\u5c06\u65b0\u6765\u7684\u4eba\u52a0\u6210\u9879\u76ee\u7684\u534f\u540c\u5f00\u53d1\u8005 . 1 > \u65b0\u6765\u7684\u4eba \u6267\u884c\u4e0b\u9762\u547d\u4ee4 \u514b\u9686\u4ee3\u7801 / \u8ddf\u4e0b\u8f7dzip\u6587\u4ef6\u6ca1\u5565\u4e24\u6837 git clone git @gitee . com : One_PieceDC / luffy_api . git 2 > \u57fa\u4e8e\u514b\u9686\u4e0b\u7684\u4ee3\u7801 , \u5f00\u53d1\u65b0\u529f\u80fd eg : \u65b0\u589e\u4e86\u4e00\u4e2as1 . py\u6587\u4ef6 git add . git commit - m \"\u65b0\u589e\u4e00\u4e2as1.py\u6587\u4ef6\" 3 > \u63a8\u9001\u5230\u8fdc\u7a0b # -- \u6211\u5c06\u672c\u5730\u7684\u4ee3\u7801\u63a8\u9001\u8fc7\u53bb.\u5931\u8d25.\u5927\u6982\u7387\u662f\u56e0\u4e3a <\u201c\u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1\u51fa\u73b0\u51b2\u7a81\u201d> # \u8fdc\u7a0b\u7684master\u5206\u652f\u5176\u5b83\u6210\u5458\u5df2\u7ecf\u5f80\u540e\u63a8\u4e86\u4e24\u4e2a\u5c0f\u7248\u672c,\u65b0\u589e\u4e86\u5f88\u591a\u5185\u5bb9 # \u800c\u6211\u4eec\u672c\u5730\u7684\u4ed3\u5e93\u662f\u57fa\u4e8e\u8fdc\u7a0bmaster\u5206\u652f\u6700\u5f00\u59cb\u7684\u72b6\u6001\u5f00\u53d1\u7684..\u6240\u4ee5\u63a8\u9001\u5931\u8d25.\u9700\u8981\u5148pull\u540c\u6b65\u4e0b. # \u82e5\u8fdc\u7a0b\u6700\u65b0\u7684\u7248\u672c\u4e2d\u6709s1.py \u5728\u62c9\u53d6\u8fdc\u7a0b\u4ee3\u7801\u540c\u6b65\u8fc7\u7a0b\u4e2d\u8fd8\u4f1a\u6709\u51b2\u7a81,\u9700\u8981\u89e3\u51b3\u51b2\u7a81! # -- So,\u5728\u63a8\u9001\u4e4b\u524d,\u5148\u62c9\u53d6\u4e00\u4e0b\u4ee3\u7801,\u5c06\u6700\u65b0\u7684\u4ee3\u7801\u540c\u6b65\u5230\u672c\u5730,\u53ef\u80fd\u4f1a\u6709\u51b2\u7a81,\u65f6\u4e0d\u65f6\u62c9\u53d6\u4e0b,\u53ef\u4ee5\u51cf\u5c11\u51b2\u7a81\u7684\u6982\u7387. git pull origin \"master\" git push origin \"master\" # -- \u7528\u6237\u540d\u5bc6\u7801;\u5bf9\u4ed3\u5e93\u6709\u5199\u6743\u9650(\u4e00\u5f00\u59cb\u65b0\u4eba\u53ef\u80fd\u53ea\u662f\u89c2\u5bdf\u8005,\u4e0d\u662f\u5f00\u53d1\u8005,\u6240\u4ee5\u4e0d\u80fd\u63d0\u4ea4\u4ee3\u7801) \u672c\u5730bug\u5206\u652f \u00b6 \u4e3b\u529f\u80fd\u5df2\u4e0a\u7ebf , \u73b0\u5728\u670d\u52a1\u5668\u8fd0\u884c\u7248\u672c\u662fv1 .1 \u5728dev\u5206\u652f\u4e0a\u5f00\u53d1\u7740\u65b0\u529f\u80fd \u5ffd\u7136\u53d1\u73b0\u4e0a\u7ebf\u7684\u4e3b\u529f\u80fd\u4e0a\u6709bug -- \u9700\u8981\u65b0\u5efa\u4e00\u4e2abug\u5206\u652f ( \u57fa\u4e8emaster\u5206\u652f\u5efa\u7acbbug\u5206\u652f ) - \u6539bug - \u628a\u53d8\u66f4\u63d0\u4ea4\u5230bug\u5206\u652f -> \u6d4b\u8bd5 -> \u5408\u5e76\u5230master -> v1 .1.1 \u6ce8 : \u82e5\u8fd8\u53d1\u73b0\u6709bug , \u57fa\u4e8ev1 .1.1 \u7ee7\u7eed\u6539bug \u65b0\u529f\u80fd\u5f00\u53d1\u5b8c\u4e86 -- \u8981\u5408\u5e76\u5230master\u5206\u652f -- v1 .2 - \u8fd9\u91cc\u7684dev\u5206\u652f\u548cmaster\u5206\u652f\u5408\u5e76 , \u53ef\u80fd\u4f1a\u6709\u51b2\u7a81 ( eg : \u6539\u5230\u4e86\u540c\u4e00\u4e2a\u6587\u4ef6 ), \u4e5f\u53ef\u80fd\u6ca1\u6709 . \u89e3\u51b3bug,\u5f00\u53d1\u65b0\u529f\u80fd,\u4e0d\u51fa\u51b2\u7a81\u7684\u60c5\u51b5 git branch dev # -- \u5728\u672c\u5730\u65b0\u5efa\u4e86\u4e00\u4e2adev\u5206\u652f git checkout dev # -- \u5728\u672c\u5730\u5207\u6362\u5230\u4e86dev\u5206\u652f # \u6ce8:\u6b64\u65f6\u8fdc\u7a0b\u662f\u6ca1\u6709dev\u5206\u652f\u7684. # \u65b9\u5f0f1) \u53ef\u4ee5\u8fdc\u7a0b\u5efa\u7acb\u5206\u652f,\u540c\u6b65\u5230\u672c\u5730 # \u65b9\u5f0f2) \u53ef\u4ee5\u672c\u5730\u5efa\u7acb\u5206\u652f,\u540c\u6b65\u5230\u8fdc\u7a0b git push origin dev # -- \u5c06\u672c\u5730\u7684dev\u5206\u652f\u63a8\u5230\u8fdc\u7a0b --- \u65b0\u5efa\u4e00\u4e2as1 . py , \u5728\u91cc\u9762\u5f00\u53d1\u65b0\u529f\u80fd --- vim s1 . py # \u7b2c\u4e00\u884c\u5199\u4e86\"\u7528\u6237\u529f\u80fd\" git add . git commit - m \"dev\u5f00\u53d1\u4e86\u7528\u6237\u529f\u80fd\" git push origin dev # -- \u5c06\u672c\u5730\u7684dev\u66f4\u6539\u63d0\u4ea4\u5230\u4e86\u8fdc\u7a0b\u7684dev\u5206\u652f --- \u7ee7\u7eed\u5f00\u53d1\u65b0\u529f\u80fd --- vim s1 . py # \u7b2c\u4e8c\u884c\u5199\u4e86\"\u8ba2\u5355\u529f\u80fd\" git add . git commit - m \"dev\u5f00\u53d1\u4e86\u8ba2\u5355\u529f\u80fd\" git push origin dev # -- \u5c06\u672c\u5730\u7684dev\u66f4\u6539\u63d0\u4ea4\u5230\u4e86\u8fdc\u7a0b\u7684dev\u5206\u652f -- \u6b64\u65f6 , \u6d4b\u8bd5\u53d1\u73b0\u4e86\u7ebf\u4e0a\u7cfb\u7edf\u6709bug , \u9700\u8981\u7d27\u6025\u4fee\u590dbug -- # -- 1> \u9996\u5148\u8981\u57fa\u4e8emaster\u5efa\u7acb\u4e00\u4e2abug\u5206\u652f,\u5728bug\u5206\u652f\u4e0a\u4fee\u6539bug # \u6ce8\u610f:master\u5206\u652f\u548cbug\u5206\u652f\u662f\u6ca1\u6709s1.py\u6587\u4ef6\u7684!! git checkout master # -- \u5207\u6362\u5230master\u5206\u652f ps:\u5728dev\u5206\u652f\u6267\u884c\u4e86commit\u64cd\u4f5c\u540e\u5c31\u53ef\u4ee5\u5207\u6362\u5230master\u5206\u652f\u4e0a\u5566 git branch bug # -- \u5728\u672c\u5730\u57fa\u4e8emaster\u5206\u652f\u65b0\u5efa\u4e86\u4e00\u4e2abug\u5206\u652f git checkout bug # -- \u5207\u6362\u5230\u672c\u5730\u7684bug\u5206\u652f # \u8fdc\u7a0b\u662f\u6ca1\u6709bug\u5206\u652f\u7684,\u53ef\u4ee5\u628a\u8be5\u5206\u652f\u63d0\u5230\u8fdc\u7a0b,\u4e5f\u53ef\u4ee5\u4e0d\u7528. # \u53ef\u4ee5\u5728\u672c\u5730\u64cd\u4f5c\u5b8c\u4e86,\u5408\u5230master,\u518d\u63d0\u4ea4\u5230\u8fdc\u7a0b,\u4e5f\u662fok\u7684! vim s2 . py # -- \u65b0\u5efa\u4e00\u4e2as2.py\u6587\u4ef6,\u7b2c\u4e00\u884c\u5199\u4e86\"\u89e3\u51b3\u4e86bug\" git add . git commit - m \"bug\u5206\u652f\u89e3\u51b3\u4e86bug\" # -- 2> bug\u4fee\u590d\u540e,\u5408\u5e76\u5230master\u4e0a,\u9700\u8981\u5148\u5207\u6362\u5230master\u5206\u652f git checkout master # -- \u6b64\u65f6\u8be5master\u5206\u652f\u4e0a\u662f\u6ca1\u6709s2.py\u7684 git merge bug # -- \u4e0d\u4f1a\u51fa\u51b2\u7a81,\u5408\u5e76\u540e,\u8be5master\u5206\u652f\u4e0a\u5c31\u6709s2.py\u5566 # -- 3> \u5c06\u5408\u5e76\u4e86bug\u5206\u652f\u7684master\u5206\u652f\u63a8\u5230\u8fdc\u7a0b git push origin master # -- \u6700\u65b0v1.1.1\u7248\u672c\u53d1\u5e03 -- \u5207\u6362\u5230dev\u5206\u652f\u7ee7\u7eed\u5f00\u53d1 -- git checkout dev -- \u5f00\u53d1\u5b8c\u540e , \u5408\u5e76\u5230master -- git checkout master git merge dev git push origin master # -- \u6700\u65b0v1.2\u7248\u672c\u53d1\u5e03 \u89e3\u51b3bug,\u5f00\u53d1\u65b0\u529f\u80fd,\u51fa\u51b2\u7a81\u7684\u60c5\u51b5 \u51c6\u5907\u5de5\u4f5c , \u5148\u628abug\u548cdev\u5206\u652f\u5220\u9664 , \u672c\u5730\u53ea\u6709master\u5206\u652f . --- \u5728dev\u5206\u652f\u4e0a\u5f00\u53d1\u65b0\u529f\u80fd --- git branch dev git checkout dev vim common . py # -- \u5199\u5165\u4ee3\u7801 print(1234) git add . git commit - m 'dev\u5206\u652f\u589e\u52a0\u4e86common.py' --- \u7ebf\u4e0a\u73af\u5883\u51fa\u95ee\u9898 --- git checkout master git branch bug git checkout bug vim common . py # -- <\u6b64\u65f6,\u5728bug\u5206\u652f\u4e0a\u662f\u6ca1\u6709common.py\u7684> \u65b0\u5efacommon.py \u5199\u5165\u4ee3\u7801 print(9999) git add . git commit - m 'bug\u5206\u652f\u589e\u52a0\u4e86common.py' --- \u628abug\u7684\u66f4\u6539\u5408\u5e76\u5230master\u5206\u652f\u4e0a --- git checkout master git merge bug # -- \u672c\u5730bug\u5408\u5e76\u5230\u672c\u5730master\u4e0a,\u653e\u5fc3,\u8fd9\u91cc\u4e0d\u4f1a\u6709\u51b2\u7a81 <master\u5206\u652f\u5c31\u6709\u4e86common.py> --- \u628adev\u5408\u5e76\u5230master\u5206\u652f\u4e0a --- git merge dev # -- \u6b64\u65f6,\u5c31\u4f1a\u51fa\u51b2\u7a81!!\u56e0\u4e3a\u90fd\u6539\u4e86common.py\u6587\u4ef6 \"\"\" (luffy) One_Piece@DC\u7684MacBook luffy_api % git merge dev \u51b2\u7a81\uff08add/add\uff09: \u5408\u5e76\u51b2\u7a81\u4e8e common.py \u81ea\u52a8\u5408\u5e76 common.py \u81ea\u52a8\u5408\u5e76\u5931\u8d25, \u4fee\u6b63\u51b2\u7a81\u7136\u540e\u63d0\u4ea4\u4fee\u6b63\u7684\u7ed3\u679c. \"\"\" \"\"\" # -- \u6b64\u65f6,common.py\u662f\u8fd9\u6837\u7684!! <<<<<<< HEAD print(9999) ======= print(1234) >>>>>>> dev \"\"\" git add . git commit - m '\u89e3\u51b3\u51b2\u7a81' git push pull \"master\" # -- \u6b63\u5e38\u60c5\u51b5\u9700\u8981\u5148\u62c9\u53d6\u4e0b,\u4fdd\u8bc1\u63d0\u4ea4\u5230\u8fdc\u7a0b\u65f6\u6ca1\u6709\u51b2\u7a81 git push origin \"master\" \u51b2\u7a81\u89e3\u51b3 \u00b6 \u51b2\u7a81\u51fa\u73b0\u7684\u60c5\u51b5: \u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1\u51fa\u73b0\u51b2\u7a81 \u5206\u652f\u5408\u5e76\u51fa\u73b0\u51b2\u7a81 \u60c5\u51b5\u4e00 \u00b6 \u522b\u4eba\u8ddf\u4f60\u6539\u4e86\u540c\u6837\u7684\u4ee3\u7801,\u4f46\u662f\u4ed6\u5148\u63d0\u4ea4\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4e86.\u4f60\u8981\u63d0\u4ea4, \u63d0\u4ea4\u4e0d\u4e0a,\u5148\u62c9\u53d6,\u62c9\u53d6\u4e0b\u6765,\u56e0\u4e3a\u6539\u4e86\u540c\u6837\u4ee3\u7801,\u51b2\u7a81.. \u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1\u51fa\u73b0\u51b2\u7a81 -- push\u4e0d\u6210\u529f,\u5148pull \u8fdc\u7a0bmaster : \u25a0 ( \u6700\u5f00\u59cb ) -- \u25a0 ( \u674e\u56db\u63d0\u4ea4\u7684 ) -- \u25a0 ( \u738b\u4e94\u63d0\u4ea4\u7684 \u738b\u4e94\u65b0\u5efa\u4e86s1 . py\u5e76\u5199\u4e86\u5185\u5bb9 ) \u672c\u5730 : \u57fa\u4e8e\u8fdc\u7a0bmaster\u6700\u5f00\u59cb\u7684\u8282\u70b9clone\u7684\u4ee3\u7801 , \u5f00\u53d1\u4e86\u65b0\u529f\u80fd , \u65b0\u5efas1 . py , \u5e76\u5728\u91cc\u9762\u5199\u4e86\u5f88\u591a\u5185\u5bb9 . git add . git commit - m \"\u5f00\u53d1s1.py\" \u51c6\u5907push\u63d0\u4ea4\u5230\u8fdc\u7a0bmaster , \u63d0\u4ea4\u88ab\u62d2\u7edd\u4e86 . \u89e3\u51b3\u65b9\u6848 , \u5148pull\u62c9\u53d6\u8fdc\u7a0b\u6700\u65b0\u7684\u4ee3\u7801\u5230\u672c\u5730 , \u4f1a\u6709\u51b2\u7a81\u63d0\u793a , s1 . py\u7684\u51b2\u7a81 <<<<<<< HEAD \u6211\u5199\u7684 ======= \u738b\u4e94\u5199\u7684 >>>>>>> f9436c568cf24f6c4239abffc2d035318e0b9666 \u82e5\u51b2\u7a81\u662f\u540c\u4e00\u4e2a\u529f\u80fd , \u8ddf\u540c\u4e8b\u5546\u91cf , \u4fdd\u7559\u67d0\u4e00\u4e2a\u4eba\u7684 . \u82e5\u51b2\u7a81\u4e0d\u662f\u540c\u4e00\u4e2a\u529f\u80fd , \u4fdd\u7559\u4e24\u4e2a\u4eba\u7684\u4ee3\u7801 . git add . git commit - m \"\u89e3\u51b3\u51b2\u7a81\" git pull origin master git push origin master \u60c5\u51b5\u4e8c \u00b6 \u5206\u652f\u5408\u5e76\u51fa\u73b0\u51b2\u7a81 -- merge\u5408\u5e76\u5206\u652f,\u6709\u51b2\u7a81,\u89e3\u51b3\u51b2\u7a81\u540e,\u518d\u6b21add commit,\u6700\u540epull push\u63d0\u4ea4 \u201c \u89e3\u51b3bug , \u5f00\u53d1\u65b0\u529f\u80fd , \u51fa\u51b2\u7a81\u7684\u60c5\u51b5 \u201d \u5c0f\u8282\u6709\u8fc7merge\u5408\u5e76\u5206\u652f\u51fa\u73b0\u51b2\u7a81\u7684\u95ee\u9898 ! \u7ebf\u4e0a\u5206\u652f\u5408\u5e76 \u00b6 \u524d\u9762\u7684\u5206\u652f\u5408\u5e76\u90fd\u662f\u5728\u672c\u5730\u5b8c\u6210,\u7136\u540e\u63a8\u5230\u8fdc\u7a0b.. \u5f53\u7136,\u8fdc\u7aef\u4e5f\u53ef\u4ee5\u5408\u5e76\u5206\u652f!! \u672f\u8bed - \u63d0\u4ea4pr # -- master\u5206\u652f\u548cdev\u5206\u652f (\u672c\u5730\u548c\u8fdc\u7aef\u90fd\u6709) # -- \u672c\u5730dev\u5408\u5e76\u5230\u672c\u5730master\u4e0a ==> \u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81 - \u60c5\u51b5\u4e8c # -- \u5408\u5e76\u5b8c\u540e,\u672c\u5730master\u63d0\u4ea4\u8fdc\u7a0bmaster ==> \u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81 - \u60c5\u51b5\u4e00 --- \u5728\u7ebf\u4e0a\u5b8c\u6210dev\u5408\u5e76\u5230master , \u5373\u63d0\u4ea4\u4e00\u4e2apull request , \u7b80\u79f0 \u63d0\u4ea4pr . --- # \u5b9e\u9a8c\u51c6\u5907:\u4fdd\u6301\u5b9e\u9a8c\u73af\u5883\u5e72\u51c0,\u672c\u5730\u548c\u8fdc\u7aef\u90fd\u53ea\u6709master\u5206\u652f! 1 > \u672c\u5730\u521b\u5efadev , \u63d0\u4ea4\u5230\u8fdc\u7a0b git branch dev git checkout dev git push origin dev 2 > \u5728common . py\u4e2d\u52a0\u5165\u4e86\u4ee3\u7801 , \u63d0\u4ea4\u5230\u8fdc\u7aef\u7684dev\u5206\u652f 3 > \u539f\u6765\u662f\u5728\u672c\u5730\u5c06\u672c\u5730\u7684dev\u5408\u5e76\u5230\u672c\u5730master , \u672c\u5730master\u63d0\u4ea4\u5230\u8fdc\u7a0bmaster . \u73b0\u5728\u662f\u5728\u7ebf\u4e0a\u5c06\u8fdc\u7a0b\u7684dev\u5408\u5e76\u5230\u8fdc\u7a0b\u7684master\u4e2d . \u6211\u4eec\u53ea\u9700\u5728\u7ebf\u4e0a\u63d0\u4ea4\u4e00\u4e2apull request . \u9886\u5bfc\u6536\u5230\u540e , \u6d4b\u8bd5 \u3001 review\u5ba1\u67e5\u4ee3\u7801 , \u901a\u8fc7\u540e , \u5408\u5e76 ( \u5408\u5e76\u5206\u652f - merge ; \u6241\u5e73\u5316\u5206\u652f - \u53d8\u57fa ), \u6b64\u65f6 , dev\u5206\u652f\u624d\u5408\u5e76\u5230\u4e86master\u5206\u652f !! \u8fdc\u7a0b\u4ed3\u5e93\u56de\u6eda \u00b6 # -- \u672c\u5730\u6062\u590d\u5230\u6700\u521d\u72b6\u6001 git checkout master git reset -- hard \u7248\u672c\u53f7 # -- \u63d0\u4ea4\u5230\u8fdc\u7a0b(\u5f3a\u5236\u63d0\u4ea4) git push origin master - f # -- \u4e00\u822c\u4e0d\u8981\u7528! pycharm\u64cd\u4f5c \u00b6 \u5176\u4f59\u64cd\u4f5c\u622a\u56fe,\u53c2\u8003 https://www.cnblogs.com/cainiaozhy/p/16875573.html#4-pycharm\u64cd\u4f5cgit \u6211\u8fd8\u662f\u66f4\u559c\u6b22\u7528\u547d\u4ee4\u6765\u64cd\u4f5c... git\u64cd\u4f5c\u65e5\u5fd7 \u672c\u5730\u6587\u4ef6\u4e0e\u7248\u672c\u5e93\u8fdb\u884c\u6bd4\u8f83,\u6bcf\u6b21\u63d0\u4ea4\u524d,\u5148\u770b\u770b!! \u9762\u8bd5\u9898 \u00b6 1. \u4ec0\u4e48\u662f\u53d8\u57fa ? git rebase - \u6241\u5e73\u5316\u5408\u5e76 \u8ba9\u65e5\u5fd7\u66f4\u7b80\u6d01 - 1 > \u53ef\u4ee5\u5c06\u591a\u4e2a\u8bb0\u5f55\u6574\u5408\u6210\u4e00\u4e2a - 2 > \u89e3\u51b3\u5206\u652f\u5408\u5e76\u5206\u53c9\u95ee\u9898 ( \u516c\u53f8\u91cc\u4e0d\u548b\u7528 , \u9762\u8bd5\u53c8\u7231\u95ee \u5355\u8d70\u4e00\u4e2a\u5b576 ) 2. git pull\u548cgit fetch\u7684\u533a\u522b - \u76f8\u540c\u70b9\u9996\u5148\u5728\u4f5c\u7528\u4e0a\u4ed6\u4eec\u7684\u529f\u80fd\u662f\u5927\u81f4\u76f8\u540c\u7684 , \u90fd\u662f\u8d77\u5230\u4e86\u66f4\u65b0\u4ee3\u7801\u7684\u4f5c\u7528 - \u4e0d\u540c\u70b9git pull \u7c7b\u4f3c\u4e8e git fetch + git merge 3. \u4f55\u4e3agit\u5de5\u4f5c\u6d41 ( gitflow ) ? - \u5206\u652f\u65b9\u6848 , \u5f88\u9ebb\u70e6 - \u77e5\u9053 , \u4f46\u4e00\u822c\u6211\u4eec\u4f7f\u7528 master - dev - bug \u8fd9\u6837\u7684\u5206\u652f\u65b9\u6848 . Git\u5927\u56de\u987e \u00b6 \u6ca1\u4e8b\u591apull\u4ee3\u7801, \u4e00\u4e2a\u529f\u80fdpush\u4e00\u6b21\u4ee3\u7801. 1. git : \u7248\u672c\u7ba1\u7406\u8f6f\u4ef6 , \u8fdb\u884c\u7248\u672c\u7ba1\u7406 . \u534f\u540c\u5f00\u53d1 . \u5408\u5e76\u4ee3\u7801 . - \u5206\u5e03\u5f0f : \u5373\u4fbf\u6ca1\u6709\u8fdc\u7aef , \u5728\u672c\u5730\u4e0a\u4e5f\u80fd\u8fdb\u884c\u7248\u672c\u7ba1\u7406 . 2. gitee \u3001 github \u3001 gitlab \u90fd\u662f git\u7684\u8fdc\u7a0b\u4ed3\u5e93 . 3. git\u5b89\u88c5 - win \u3001 mac : \u5b98\u65b9\u4e0b\u8f7d\u8f6f\u4ef6 , \u4e00\u8def\u4e0b\u4e00\u6b65 ; - linux : yum install git 4. \u5de5\u4f5c\u6d41\u7a0b - \u5de5\u4f5c\u533a \u3001 \u6682\u5b58\u533a \u3001 \u7248\u672c\u5e93 \u3001 \u8fdc\u7a0b\u4ed3\u5e93 5. \u5e38\u7528\u547d\u4ee4 - git init - git status - git log : \u53ea\u663e\u793a\u5f53\u524d\u548c\u4ee5\u524d\u7684\u7248\u672c - git relog : \u56de\u9000 \u3001 \u5220\u9664\u7684\u7248\u672c\u90fd\u4f1a\u663e\u793a - git add . - git commit - m '\u6ce8\u91ca' - git pull origin master \u5c06\u8fdc\u7aef\u7684master\u5206\u652f\u62c9\u53d6\u4e0b\u6765 - git push origin master \u5c06\u672c\u5730\u7684master\u5206\u652f\u63a8\u5230\u8fdc\u7aef - git clone \u5730\u5740 6. \u5ffd\u7565\u6587\u4ef6 . gitignore 7. \u5206\u652f\u7ba1\u7406 - \u4e2d\u5c0f\u578b\u516c\u53f8\u4e3b\u6d41\u7684\u5206\u652f\u65b9\u6848 \u4e3b\u5206\u652f + dev\u5206\u652f + bug\u5206\u652f \u2611\ufe0f Ps : \u8fd8\u6709\u7684\u4f1a\u81ea\u5df1\u53ea\u5728\u672c\u5730\u5efa\u7acb\u4e00\u4e2a\u5206\u652f\u6765\u5f00\u53d1 , eg : dc\u5206\u652f , \u5f00\u53d1\u5b8c\u540e , \u5c06dc\u5206\u652f\u5408\u5e76\u5230dev\u5206\u652f , \u518d\u5c06dev\u5206\u652f\u63a8\u5230\u8fdc\u7aef ( \u53ef\u505apr ) - git branch - git branch dev \u82e5\u8fdc\u7aef\u60f3\u521b\u5efadev\u5206\u652f , \u53ef\u4ee5\u672c\u5730\u521b\u5efa\u540e\u63a8\u9001\u5230\u8fdc\u7aef ; \u6216\u8005\u5728\u8fdc\u7aef\u70b9\u51fb\u521b\u5efa - git checkout dev - git branch - d dev \u5f3a\u5236\u5220\u9664\u7684\u8bdd\u662f - D \u8c28\u614e\u4f7f\u7528 - git merge dev \u4e00\u5b9a\u8981\u7406\u6e05\u662f\u8c01\u5408\u5e76\u5230\u8c01\u4e0a\u9762\u53bb 8. \u8fdc\u7a0b\u4ed3\u5e93 \u8981\u65f6\u4e0d\u65f6\u540c\u6b65\u4e0b\u8fdc\u7aef\u4ed3\u5e93\u548c\u672c\u5730\u5e93 , \u4e3e\u4e2a\u4f8b\u5b50 : \u8fdc\u7aef\u5e93 v0 \u5f20\u4e09 v0 v1 v2 \u674e\u56db v0 v3 v4 \u674e\u56db\u5148\u63d0\u4ea4 , \u8fdc\u7aef\u5e93\u5c31\u53d8\u6210\u4e86v0 v3 v4 \u5f20\u4e09\u60f3\u63d0\u4ea4 , \u63d0\u4ea4\u4e0d\u4e0a\u53bb , \u5f97\u5148\u540c\u6b65 , \u5f20\u4e09\u672c\u5730\u5e93\u5c31\u53d8\u6210\u4e86 v0 v3 v4 v1 v2 \u518d\u63d0\u4ea4\u4e0a\u53bb , \u8fdc\u7aef\u5e93\u5c31\u53d8\u6210\u4e86v0 v3 v4 v1 v2 \u82e5\u5f20\u4e09\u60f3\u63d0\u4ea4 , \u63d0\u4ea4\u4e0d\u4e0a\u53bb\u7684\u65f6\u5019 , \u5f3a\u5236\u63d0\u4ea4 , \u90a3\u4e48\u8fdc\u7aef\u5e93\u5c31\u53d8\u6210\u4e86 v0 v1 v2 \u674e\u56db\u76f4\u63a5\u5c31\u5410\u4e86 ! \u674e\u56db\u5c06\u8fdc\u7aef\u5e93\u6062\u590d\u5230v0 v3 v4\u7684\u72b6\u6001 . \u5f20\u4e09\u5168\u8d23 . - gitlab \u3001 github \u3001 gitee - git remote add \u8fdc\u7a0b\u4ed3\u5e93 ( https / ssh ) - https : \u7528\u6237\u540d\u548c\u5bc6\u7801 - ssh : \u516c\u94a5\u548c\u79c1\u94a5 --> \u975e\u5bf9\u79f0\u52a0\u5bc6 , \u52a0\u5bc6\u7528\u516c\u94a5 , \u89e3\u5bc6\u7528\u79c1\u94a5 --> \u5176\u5b83\u5e94\u7528\u573a\u666f : Linux\u4e3b\u673a\u4e4b\u95f4\u64cd\u4f5c \u3001 \u652f\u4ed8\u5b9d\u652f\u4ed8\u65f6 9. \u534f\u540c\u5f00\u53d1 - \u5927\u5bb6\u63a5\u5165\u540c\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u9879\u76ee - \u628a\u4f60\u52a0\u6210\u5f00\u53d1\u8005 , \u7ed9\u4f60\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 - git clone \u8fdc\u7a0b\u5730\u5740 - \u57fa\u4e8e\u5b83\u5f00\u53d1 , \u63a8\u5230\u8fdc\u7a0b 10. \u7ebf\u4e0abug , \u5206\u652f\u89e3\u51b3\u65b9\u6848 11. \u51b2\u7a81\u89e3\u51b3 - \u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1 - \u5206\u652f\u5408\u5e76\u51fa\u73b0\u51b2\u7a81 12. \u7ebf\u4e0a\u5206\u652f\u5408\u5e76 ( pr ) 13. \u8fdc\u7a0b\u4ed3\u5e93\u56de\u6eda - \u57fa\u672c\u7528\u4e0d\u5230 14. pycharm\u64cd\u4f5cgit - \u4e4b\u524d\u6240\u6709\u7684\u547d\u4ee4 , \u90fd\u53ef\u4ee5\u70b9\u51fb\u5b8c\u6210 15. \u9762\u8bd5\u9898 \u4e3a\u5f00\u6e90\u8f6f\u4ef6\u8d21\u732e\u4ee3\u7801 fork -- \u6539\u597dbug\u540e\u5411\u5f00\u6e90\u9879\u76eepull request \u4e5f\u53ef\u4ee5issues , \u5728\u5f00\u6e90\u9879\u76ee\u4e2d\u63d0\u51fa\u8fd9\u4e2abug .","title":"git\u751f\u6d3b\u7248"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#git","text":"Git\u662f\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf,\u63a7\u5236\u7684\u5bf9\u8c61\u662f\u5f00\u53d1\u7684\u9879\u76ee\u4ee3\u7801. 1> \u5bf9\u6587\u4ef6(\u4ee3\u7801)\u8fdb\u884c\u7248\u672c\u7ba1\u7406 2> \u5b8c\u6210 \u534f\u540c\u5f00\u53d1 \u9879\u76ee, \u5e2e\u52a9\u7a0b\u5e8f\u5458\u6574\u5408\u4ee3\u7801 i\uff09\u5e2e\u52a9\u5f00\u53d1\u8005\u5408\u5e76\u5f00\u53d1\u7684\u4ee3\u7801 ii\uff09\u5982\u679c\u51fa\u73b0\u51b2\u7a81\u4ee3\u7801\u7684\u5408\u5e76, \u4f1a\u63d0\u793a\u540e\u63d0\u4ea4\u5408\u5e76\u4ee3\u7801\u7684\u5f00\u53d1\u8005, \u8ba9\u5176\u89e3\u51b3\u51b2\u7a81 \u4e0b\u8f7d: https://git-scm.com/book/zh/v2/\u8d77\u6b65-\u5b89\u88c5-Git Q: git\u4e0esvn\u7684\u533a\u522b. git : \u5206\u5e03\u5f0f\u7ba1\u7406 ; svn : \u96c6\u4e2d\u7ba1\u7406 . \u6bcf\u4e2agit\u5ba2\u6237\u7aef\u90fd\u6709\u81ea\u5df1\u7248\u672c\u5e93 , \u672c\u5730\u5c31\u53ef\u4ee5\u8fdb\u884c\u7248\u672c\u7ba1\u7406 , \u4e0d\u9700\u8981\u8fdc\u7a0b . svn\u5fc5\u987b\u628a\u4ee3\u7801\u63d0\u4ea4\u5230\u8fdc\u7aef , \u624d\u80fd\u8fdb\u884c\u4ee3\u7801\u7248\u672c\u7ba1\u7406 .. \u4f9d\u9644\u4e8e\u670d\u52a1\u7aef\u8fdb\u884c\u7248\u672c\u7ba1\u7406 . \u4e5f\u5c31\u662f\u8bf4 Git : \u5206\u5e03\u5f0f , \u65e0\u7f51\u7edc\u65f6\u4e5f\u53ef\u4ee5\u63d0\u4ea4\u5230\u672c\u5730\u7248\u672c\u5e93 , \u5f85\u5230\u6709\u7f51\u7edc\u65f6\u518dpush\u5230\u670d\u52a1\u5668 . svn : \u975e\u5206\u5e03\u5f0f . \u65e0\u7f51\u7edc\u4e0d\u53ef\u4ee5\u63d0\u4ea4 . Q: git\u3001gitlab\u3001gitee\u3001github\u6709\u4ec0\u4e48\u533a\u522b \u57fa\u4e8edocker\u642d\u5efa\u4e00\u4e2agitlab,\u53c2\u8003\u6587\u6863: https://www.cnblogs.com/liuqingzheng/p/15325288.html git : \u7248\u672c\u7ba1\u7406\u8f6f\u4ef6 github : \u5168\u7403\u6700\u5927\u7684\u5f00\u6e90\u4ee3\u7801\u4ed3\u5e93 - \u5f00\u6e90\u7684\u4ee3\u7801 , \u6258\u7ba1\u5728github\u4e0a , \u5176\u4ed6\u4eba\u53ef\u4ee5\u4e0b\u8f7d - \u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 ( \u5f00\u6e90\u7684 \u3001 \u4e0d\u5f00\u6e90\u7684\u90fd\u53ef\u4ee5\u6258\u7ba1 ) \u516c\u6709\u4ed3\u5e93\u514d\u8d39 , \u90e8\u5206\u79c1\u6709\u4ed3\u5e93\u6536\u8d39 Ps : \u79c1\u6709\u7684\u4e00\u822c\u4e0d\u4f1a\u6258\u7ba1\u5728github\u4e0a - git\u7684\u8fdc\u7a0b\u4ed3\u5e93 gitee : \u7801\u4e91 . \u56fd\u4ea7\u7248github . - \u56fd\u5185\u8bbf\u95ee\u4f1a\u6bd4github\u5feb\u5f88\u591a - \u5c0f\u516c\u53f8 , \u4f1a\u82b1\u94b1\u4f7f\u7528gitee\u7684\u79c1\u6709\u4ed3\u5e93 . gitlab : \u516c\u53f8\u5185\u90e8\u81ea\u5df1\u7684\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 . \u7b80\u5355\u6765\u8bf4 , \u5c31\u662f\u516c\u53f8\u5185\u90e8\u81ea\u5df1\u642d\u5efa\u4e86\u4e00\u4e2agitee . \u7b80\u5355\u6765\u8bf4 : git \u8f6f\u4ef6 github \u5168\u7403\u6700\u5927\u7684\u5f00\u6e90\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 gitee \u56fd\u5185\u6700\u5927\u7684\u5f00\u6e90\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 gitlab \u516c\u53f8\u5185\u90e8\u7684\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0 Q: git\u5de5\u4f5c\u6d41\u7a0b \u6ce8: \u56fe\u4e2d\u6807\u7ea2\u7684\u662f\u9700\u8981\u8bb0\u4f4f\u7684. \u5de5\u4f5c\u533a === \u6682\u5b58\u533a === \u7248\u672c\u5e93 \u5de5\u4f5c\u533a\u4fee\u6539\u7684\u5185\u5bb9 ( \u5220\u9664 \u3001 \u65b0\u589e \u3001 \u4fee\u6539 ) --> \u63d0\u4ea4\u5230\u6682\u5b58\u533a --> \u63d0\u4ea4\u5230\u7248\u672c\u5e93 \u5f3a\u8c03 : git checkout . ==> \u6062\u590d\u5de5\u4f5c\u533a\u7684\u66f4\u6539 , \u614e\u7528 git reset HEAD ==> \u628a\u6682\u5b58\u533a\u7684\u66f4\u6539\u62c9\u56de\u5230\u5de5\u4f5c\u533a , \u5c11\u7528 git reset -- soft \u7248\u672c\u53f7 git reset -- mix \u7248\u672c\u53f7 ==> \u8fd9\u4e24\u6761\u547d\u4ee4\u77e5\u9053\u5c31\u884c , \u57fa\u672c\u4e0d\u4f1a\u7528 git reset -- hard \u7248\u672c\u53f7 ==> \u76f4\u63a5\u5c06\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u53d8\u6210\u76f8\u5e94\u7248\u672c\u5e93\u91cc\u7684\u67d0\u4e2a\u7248\u672c , \u5076\u5c14\u4f1a\u7528","title":"git\u4ecb\u7ecd"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#git_1","text":"\u6ce8\u610f: \u7a7a \u6587\u4ef6<\u5939> \u4e0d\u4f1a\u88abgit\u7ba1\u7406 1. \u2605 \u521b\u5efa\u51fa\u4e00\u4e2a\u5de5\u4f5c\u533a , \u5728\u91cc\u9762\u64cd\u4f5c\u6587\u4ef6 1 ) \u5c06\u5df2\u6709\u7684\u6587\u4ef6\u5939\u521d\u59cb\u5316\u4e3agit\u4ed3\u5e93 cd \u76ee\u6807\u6587\u4ef6\u5939 git init # -- \u521d\u59cb\u5316\u4ed3\u5e93,\u8868\u660e\u8be5\u6587\u4ef6\u5939\u88abgit\u6240\u7ba1\u7406\u5566!\u5728\u76ee\u6807\u6587\u4ef6\u5939\u4e0b\u4f1a\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u7684.git\u6587\u4ef6\u5939!! 2 ) \u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u521d\u59cb\u5316git\u4ed3\u5e93 cd \u76ee\u6807\u76ee\u5f55 git init \u4ed3\u5e93\u540d # -- \u5728\u76ee\u6807\u76ee\u5f55\u4e0b\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u548c\u4ed3\u5e93\u540d\u4e00\u6837\u7684\u6587\u4ef6\u5939,\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u4f1a\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u7684.git\u6587\u4ef6\u5939!! 2. \u2605 \u67e5\u770b\u72b6\u6001 git status # -- \u7ea2\u8272 \u8868\u793a\u53d8\u5316\u4e86,\u6ca1\u6709\u63d0\u4ea4\u5230\u6682\u5b58\u533a # -- \u7eff\u8272 \u8868\u793a\u5728\u6682\u5b58\u533a,\u6ca1\u6709\u63d0\u4ea4\u5230\u7248\u672c\u5e93 # -- \u82e5\u6ca1\u6709\u53d8\u5316,\u8868\u793a\u6240\u6709\u4ee3\u7801\u90fd\u88ab\u7248\u672c\u7ba1\u7406\u5566 git status - s # -- \u67e5\u770b\u4ed3\u5e93\u72b6\u6001\u7684\u7b80\u7ea6\u663e\u793a 3. \u2605 \u4ece\u5de5\u4f5c\u533a\u63d0\u4ea4\u5230\u6682\u5b58\u533a git add s1 . py # -- \u53ea\u63d0\u4ea4s1.py\u5230\u6682\u5b58\u533a git add . # -- \u628a\u5de5\u4f5c\u533a\u4e2d\u7684\u6240\u6709\u66f4\u6539\u90fd\u63d0\u4ea4\u5230\u6682\u5b58\u533a \u7ea2\u53d8\u7eff 4. \u2605 \u4ece\u6682\u5b58\u533a\u63d0\u4ea4\u5230\u7248\u672c\u5e93 git commit - m '\u6ce8\u91ca' 5. \u2605 \u67e5\u770b\u65e5\u5fd7 git log # -- \u67e5\u770b\u7248\u672c\u53d8\u5316\u7684\u65e5\u5fd7 git reflog # -- \u4ee5\u7b80\u7565\u5f62\u5f0f\u663e\u793a\u65e5\u5fd7 git log \u548cgit reflog\u7684\u533a\u522b : git log \u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u6240\u6709\u63d0\u4ea4\u8fc7\u7684\u7248\u672c\u4fe1\u606f\u5982\u679c\u611f\u89c9\u592a\u7e41\u7410 , \u53ef\u4ee5\u52a0\u4e0a\u53c2\u6570 -- pretty = oneline , \u53ea\u4f1a\u663e\u793a\u7248\u672c\u53f7\u548c\u63d0\u4ea4\u65f6\u7684\u5907\u6ce8\u4fe1\u606f git reflog \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u5206\u652f\u7684\u6240\u6709\u64cd\u4f5c\u8bb0\u5f55 ( \u5305\u62ec\u5df2\u7ecf\u88ab\u5220\u9664\u7684 commit \u8bb0\u5f55\u548c reset \u7684\u64cd\u4f5c ) 6. \u6062\u590d\u5230\u67d0\u4e2a\u7248\u672c git reset -- hard \u7248\u672c\u53f7 7. \u628a\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u6062\u590d\u5230\u7248\u672c\u5e93\u6700\u540e\u7684\u72b6\u6001 git checkout . 8. \u8bbe\u7f6e\u7528\u6237\u548c\u90ae\u7bb1 # -- \u4f5c\u7528: \u63d0\u4ea4\u5230\u7248\u672c\u5e93\u540e,\u80fd\u770b\u5230\u662f\u8c01\u6539\u7684 # \u6ce8\u610f: \u4e00\u4e2a\u4ed3\u5e93\u6709\u5c40\u90e8\u7528\u6237,\u4f18\u5148\u4f7f\u7528\u5c40\u90e8\u7528\u6237,\u6ca1\u6709\u914d\u7f6e\u518d\u627e\u5168\u5c40\u7528\u6237 # \u25ce \u5168\u5c40\u914d\u7f6e # \u6ce8: \u5168\u5c40\u914d\u7f6e\u540e \u4f1a\u5728\u7528\u6237\u5bb6\u8def\u5f84\u7684\\.gitconfig\u4e2d\u65b0\u5efa\u7528\u6237\u4fe1\u606f,\u5728\u6240\u6709\u4ed3\u5e93\u4e0b\u90fd\u53ef\u4ee5\u4f7f\u7528 git config -- global user . name \"\u7528\u6237\u540d\" git config -- global user . email \"\u7528\u6237\u90ae\u7bb1\" # \u25ce \u5c40\u90e8\u914d\u7f6e # \u6ce8: \u5c40\u90e8\u914d\u7f6e\u540e \u4f1a\u5728\u5f53\u524d\u4ed3\u5e93\u4e0b\u7684.git\u6587\u4ef6\u5939\u7684config\u4e2d\u65b0\u5efa\u7528\u6237\u4fe1\u606f,\u53ea\u80fd\u5728\u5f53\u524d\u4ed3\u5e93\u4e0b\u4f7f\u7528 git config user . name \"\u7528\u6237\u540d\" git config user . email \"\u7528\u6237\u90ae\u7bb1\"","title":"git\u57fa\u672c\u547d\u4ee4"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_1","text":"Git\u5de5\u4f5c\u76ee\u5f55\u4e2d, \u6709\u4e9b\u6587\u4ef6\u5fc5\u987b\u6709, \u4f46\u53c8\u4e0d\u80fd\u63d0\u4ea4\u5b83\u4eec, \u5c31\u53ef\u4ee5\u8bbe\u7f6e\u5ffd\u7565\u6587\u4ef6!! \u5728Git\u5de5\u4f5c\u533a\u7684\u6839\u8def\u5f84\u4e0b\u65b0\u5efa\u7acb .gitignore \u6587\u4ef6. \u5728\u6587\u4ef6\u4e2d\u5199\u5ffd\u7565\u6587\u4ef6.. \u6587\u4ef6\u6216\u6587\u4ef6\u5939\u540d : \u4ee3\u8868\u6240\u6709\u76ee\u5f55\u4e0b\u7684\u540c\u540d\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u90fd\u88ab\u8fc7\u6ee4 / \u6587\u4ef6\u6216\u6587\u4ef6\u5939\u540d : \u4ee3\u8868\u4ed3\u5e93\u6839\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u88ab\u8fc7\u6ee4 eg : a . txt - \u9879\u76ee\u4e2d\u6240\u6709a . txt\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u90fd\u4f1a\u88ab\u8fc7\u6ee4 / a . txt - \u9879\u76ee\u4e2d\u53ea\u6709\u6839\u76ee\u5f55\u4e0ba . txt\u6587\u4ef6\u4f1a\u88ab\u8fc7\u6ee4 / b / a . txt - \u9879\u76ee\u4e2d\u53ea\u6709\u6839\u76ee\u5f55\u4e0b\u7684b\u6587\u4ef6\u5939\u4e0b\u7684a . txt\u6587\u4ef6\u4f1a\u88ab\u8fc7\u6ee4 * x * : - \u540d\u5b57\u4e2d\u6709\u4e00\u4e2ax\u7684\u90fd\u4f1a\u88ab\u8fc7\u6ee4 \uff08 * \u4ee3\u88680 ~ n\u4e2a\u4efb\u610f\u5b57\u7b26 \uff09 \u7a7a\u6587\u4ef6\u5939\u4e0d\u4f1a\u88ab\u63d0\u4ea4 , \u7a7a\u5305\u4f1a\u88ab\u63d0\u4ea4 , \u5305\u53ef\u4ee5\u88ab\u63d0\u4ea4 \uff08 \u5305\u4e2d\u6709\u4e00\u4e2ainit\u7a7a\u6587\u4ef6 \uff09 \u6ce8 : a / b a \u3001 b\u90fd\u662f\u7a7a\u6587\u4ef6\u5939 , git status\u4e0d\u4f1a\u6709\u53d8\u5316 !","title":"\u8fc7\u6ee4\u6587\u4ef6"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_2","text":"ps: \u4e0a\u56fe\u5c31\u662fgit\u7684flow\u5de5\u4f5c\u6d41. \u6211\u4eec\u7528\u7684\u662f master-dev-bug. \u4e00\u822c\u7684\u4e2d\u5c0f\u578b\u516c\u53f8\u90fd\u662f\u8fd9\u6837\u64cd\u4f5c : \u4e3b\u5206\u652f\u53ea\u7528\u6765\u53d1\u65b0\u7248\u672c v1 v2 v3 dev\u5206\u652f\u7528\u6765\u5f00\u53d1 .. ( v1\u5230v2\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u82e5\u5e72\u6b21\u63d0\u4ea4 ) dev\u5206\u652f\u5f00\u53d1\u5b8c\u540e\u5408\u5e76\u5230\u4e3b\u5206\u652f . \u518d\u53d1\u5e03\u5230\u670d\u52a1\u5668 . 1. \u521b\u5efa\u5206\u652f git branch \u5206\u652f\u540d \u6ce8 : master\u4e3b\u5e72\u4e0a\u6240\u6709\u7684\u4e1c\u897f\u90fd\u88abgit\u7ba1\u7406\u540e , \u62c9\u53d6\u5206\u652f\u624d\u662f\u5408\u7406\u7684 ! 2. \u67e5\u770b\u5206\u652f git branch 3. \u5207\u6362\u5206\u652f git branch \u5206\u652f\u540d 4. \u5220\u9664\u5206\u652f git branch - d \u5206\u652f\u540d \u6ce8 : \u5728\u5f53\u524d\u5206\u652f\u4e0a\u5220\u9664\u5f53\u524d\u5206\u652f\u662f\u5220\u9664\u4e0d\u4e86\u7684 ! 5. \u5408\u5e76\u5206\u652f # -- \u5c06 \u67d0\u5206\u652f \u5408\u5e76\u5230\u5f53\u524d\u6240\u5728\u5206\u652f\u4e0a git merge \u67d0\u5206\u652f # -- \u6ce8:\u5c06dev\u5206\u652f\u5408\u5e76\u5230master\u5206\u652f\u4e0a\u65f6,\u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81!!","title":"\u5206\u652f\u64cd\u4f5c"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_3","text":"\u4ee5gitee\u4e3a\u4f8b, \u4f5c\u4e3a\u6211\u4eec\u7684\u8fdc\u7a0b\u4ed3\u5e93!! \u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740\u6709\u4e24\u79cd http/ssh. \u767b\u9646gitee,\u521b\u5efa <\u7a7a> \u4ed3\u5e93! \u82e5\u521b\u5efa\u7684\u4e0d\u662f\u7a7a\u4ed3\u5e93, \u672c\u5730\u7684\u6709\u5185\u5bb9, push\u4e0a\u53bb, \u5c31\u4f1a\u6709\u51b2\u7a81.. \u5982\u4f55\u89e3\u51b3? \u5148pull\u62c9\u53d6\u4e0b\u6765, \u5c06\u672c\u5730master\u5206\u652f\u4e2d\u9664\u4e86.git\u6587\u4ef6\u7684\u5176\u5b83\u6587\u4ef6,\u590d\u5236\u5230\u521a\u4ece\u8fdc\u7a0b\u62c9\u53d6\u7684\u90a3\u4e2a\u4ed3\u5e93\u4e2d.. \u518dadd commit push..","title":"\u8fdc\u7a0b\u4ed3\u5e93"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#http","text":"git config -- global user . name \"DC\" git config -- global user . email \"1415806497@qq.com\" git remote add origin https : // gitee . com / One_PieceDC / test . git # -- \u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93,\u5e76\u5c06\u8be5\u8fdc\u7a0b\u4ed3\u5e93\u547d\u540d\u4e3aorigin git remote # -- \u67e5\u770b\u672c\u5730\u8bbe\u7f6e\u7684\u8fdc\u7a0b\u4ed3\u5e93 git push origin \"master\" # -- \u5c06\u672c\u5730\u7684master\u5206\u652f \u63d0\u4ea4\u5230/\u63a8\u5230 \u8fdc\u7a0b\u4ed3\u5e93 \u6ce8 - \u7b2c\u4e00\u6b21\u63a8\u8fdc\u7a0b\u4ed3\u5e93\u65f6 , \u4f1a\u8ba9\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801 .. \u82e5\u662f\u5728windows\u7cfb\u7edf\u4e0a\u64cd\u4f5c\u7684 . \u4f1a\u5f39\u51fa\u4e00\u4e2a\u6846 . \u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u4f1a\u81ea\u52a8\u4fdd\u5b58\u5230 \u63a7\u5236\u9762\u677f -> \u7528\u6237\u8d26\u6237 -> \u51ed\u636e\u7ba1\u7406\u5668 -> windows\u51ed\u636e -> \u666e\u901a\u51ed\u636e \u4e2d . \u4fdd\u5b58\u540e , \u4e0b\u4e00\u6b21\u63a8\u5c31\u4e0d\u4f1a\u8ba9\u8f93\u5165\u5566 . git pull origin \"master\" # -- \u4ece\u8fdc\u7a0b\u4ed3\u5e93\u62c9\u53d6\u4ee3\u7801 git remote remove origin # -- \u5220\u9664\u672c\u5730\u8bbe\u7f6e\u7684\u8fdc\u7a0b\u4ed3\u5e93","title":"http\u534f\u8bae\u8fde\u63a5"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#ssh","text":"\u63a8\u9001\u548c\u4e0b\u8f7d,\u4f7f\u7528http\u534f\u8bae\u7684\u5f62\u5f0f,\u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801 \u73b0\u5728\u4f7f\u7528ssh\u8fde\u63a5\u8fdc\u7a0b -- \u516c\u53f8\u91cc\u57fa\u672c\u4e0a\u4f7f\u7528\u7684\u8fd9\u79cd! \u4f7f\u7528ssh\u8fde\u63a5\u8fdc\u7a0b - \u4e0d\u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801 - \u9700\u8981\u914d\u7f6e\u516c\u94a5\u548c\u79c1\u94a5 ( \u975e\u5bf9\u79f0\u52a0\u5bc6 ) \u5f3a\u8c03 : \u79c1\u94a5\u662f\u81ea\u5df1\u7684 , \u4e00\u5b9a\u4e0d\u80fd\u4e22 ; \u516c\u94a5\u53ef\u4ee5\u7ed9\u522b\u4eba . \u6ce8 : \u522b\u4eba\u4f7f\u7528\u516c\u94a5\u52a0\u5bc6\u6570\u636e\u4f20\u9012\u8fc7\u6765 , \u6211\u4eec\u518d\u7528\u79c1\u94a5\u89e3\u5bc6 . \u54ea\u6015\u4e2d\u9014\u6570\u636e\u88ab\u622a\u83b7\u4e86 , \u6ca1\u6709\u79c1\u94a5\u4e5f\u662f\u89e3\u4e0d\u5f00\u7684 . step1: \u751f\u6210/\u6dfb\u52a0\u516c\u94a5\u79c1\u94a5 \u5b98\u65b9\u6587\u6863: https://gitee.com/help/articles/4181#article-header0 # -t \u4f7f\u7528\u4ec0\u4e48\u52a0\u5bc6\u65b9\u5f0f ; -C \u90ae\u7bb1\u5730\u5740 One_Piece@DC\u7684MacBook test % ssh-keygen -t rsa -C \"1415806497@qq.com\" Generating public/private rsa key pair. # \u8fd9\u91cc\u63d0\u793a\u4e86\u9ed8\u8ba4\u7684\u4fdd\u5b58\u8def\u5f84/Users/One_Piece/.ssh Enter file in which to save the key (/Users/One_Piece/.ssh/id_rsa): ... ... # -- \u4e00\u8defEnter\u56de\u8f66\u5373\u53ef cd /Users/One_Piece/.ssh # -- \u5728\u8be5\u6587\u4ef6\u5939\u4e0b,id_rsa\u662f\u79c1\u94a5 id_rsa.pub\u662f\u516c\u94a5 step2: \u5c06\u516c\u94a5\u6dfb\u52a0\u5230gitee\u4e2d,\u76f8\u5f53\u4e8e<\u5f53\u524d>\u673a\u5668\u4e0egitee\u5efa\u7acb\u4e86\u4e00\u4e2a\u52a0\u5bc6\u901a\u9053(\u8d70\u7684ssh\u7684\u534f\u8bae). step3: \u5728\u672c\u5730\u6dfb\u52a0ssh\u534f\u8bae\u5f62\u5f0f\u7684\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 git remote add origin_ssh git @gitee . com : One_PieceDC / test . git # -- \u5b83\u4f1a\u81ea\u52a8\u53bb\u7535\u8111\u91cc\u67e5\u627e\u79c1\u94a5,\u7b2c\u4e00\u6b21\u63d0\u4ea4\u65f6,\u4f1a\u95ee\u4f60\u662f\u5426\u786e\u5b9a\u4f7f\u7528\u8be5\u79c1\u94a5,\u8f93\u5165yes\u5373\u53ef!!\u5f80\u540e\u76f4\u63a5\u63d0\u76f4\u63a5\u62c9. git push origin_ssh master","title":"ssh\u8fde\u63a5"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#clone","text":"\u7ec4\u957f\u672c\u5730\u521b\u5efa\u51fa\u7a7a\u9879\u76ee,\u5e95\u5c42\u4ee3\u7801\u5199\u5b8c ---> \u63d0\u4ea4\u5230\u8fdc\u7a0b\u4ed3\u5e93 \u5f20\u4e09\u3001\u674e\u56db\u3001\u738b\u4e94\u90fd\u8981\u5171\u540c\u5f00\u53d1\u8fd9\u4e2a\u9879\u76ee, \u6211\u4eec\u9700\u8981\u5148\u628a\u4ee3\u7801 clone \u5230\u672c\u5730 \u63d0\u4ea4\u524d,\u65f6\u4e0d\u65f6\u7684pull\u4e0b!! \u4ee5\u8def\u98de\u5b66\u57ce\u7684\u540e\u7aef\u9879\u76ee\u4e3a\u4f8b 1 > git init 2 > \u8bbe\u7f6e\u5ffd\u7565\u6587\u4ef6 . gitignore ( \u8bbe\u7f6e\u540e , \u88ab\u5ffd\u7565\u7684\u6587\u4ef6\u5728pycharm\u91cc\u4f1a\u53d8\u6210\u9ec4\u8272 ) . idea . DS_Store / logs /*. log __pycache__ 3 > git add . 4 > git commit - m \"\u7b2c\u4e00\u6b21\u63d0\u4ea4,\u5199\u5b8c\u4e86\u9996\u9875\u529f\u80fd\" 5 > \u5728\u8fdc\u7a0b , \u5efa\u7acb\u4e00\u4e2a\u8fdc\u7a0b < \u7a7a > \u4ed3\u5e93 6 > \u5728\u672c\u5730git\u91cc\u6dfb\u52a0\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 git remote add origin git @gitee . com : One_PieceDC / luffy_api . git 7 > \u628a\u672c\u5730\u4ed3\u5e93\u7684\u4ee3\u7801\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93 # -- -u\u8868\u793a\u7f13\u5b58\u4e86origin \"master\",\u4e0b\u6b21\u53ea\u9700\u8981\u6572git push\u5c31\u76f8\u5f53\u4e8e\u6572\u4e86git push origin \"master\" # git push -u origin \"master\" git push origin \"master\" # -- \u56e0\u4e3a\u5df2\u7ecf\u914d\u7f6e\u4e86ssh,\u516c\u94a5\u79c1\u94a5,\u6240\u4ee5\u8be5\u5904\u7684\u63d0\u4ea4\u4e0d\u9700\u8981\u4efb\u4f55\u8ba4\u8bc1 --- \u5f3a\u8c03 , \u4e0a\u8ff05\u4e2a\u6b65\u9aa4 , \u82e5\u662f\u4ece\u5934\u5f00\u59cb\u7684\u65b0\u9879\u76ee\u7684\u8bdd , \u624d\u4f1a\u5982\u6b64\u64cd\u4f5c . ( \u4e00\u822c\u6765\u8bf4 , \u4ee5\u4e0a\u7684\u64cd\u4f5c , \u516c\u53f8\u7684\u524d\u8f88\u5c31\u5df2\u7ecf\u505a\u597d\u5566 ! ) --- \u9879\u76ee\u7684\u62e5\u6709\u8005\u5c06\u65b0\u6765\u7684\u4eba\u52a0\u6210\u9879\u76ee\u7684\u534f\u540c\u5f00\u53d1\u8005 . 1 > \u65b0\u6765\u7684\u4eba \u6267\u884c\u4e0b\u9762\u547d\u4ee4 \u514b\u9686\u4ee3\u7801 / \u8ddf\u4e0b\u8f7dzip\u6587\u4ef6\u6ca1\u5565\u4e24\u6837 git clone git @gitee . com : One_PieceDC / luffy_api . git 2 > \u57fa\u4e8e\u514b\u9686\u4e0b\u7684\u4ee3\u7801 , \u5f00\u53d1\u65b0\u529f\u80fd eg : \u65b0\u589e\u4e86\u4e00\u4e2as1 . py\u6587\u4ef6 git add . git commit - m \"\u65b0\u589e\u4e00\u4e2as1.py\u6587\u4ef6\" 3 > \u63a8\u9001\u5230\u8fdc\u7a0b # -- \u6211\u5c06\u672c\u5730\u7684\u4ee3\u7801\u63a8\u9001\u8fc7\u53bb.\u5931\u8d25.\u5927\u6982\u7387\u662f\u56e0\u4e3a <\u201c\u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1\u51fa\u73b0\u51b2\u7a81\u201d> # \u8fdc\u7a0b\u7684master\u5206\u652f\u5176\u5b83\u6210\u5458\u5df2\u7ecf\u5f80\u540e\u63a8\u4e86\u4e24\u4e2a\u5c0f\u7248\u672c,\u65b0\u589e\u4e86\u5f88\u591a\u5185\u5bb9 # \u800c\u6211\u4eec\u672c\u5730\u7684\u4ed3\u5e93\u662f\u57fa\u4e8e\u8fdc\u7a0bmaster\u5206\u652f\u6700\u5f00\u59cb\u7684\u72b6\u6001\u5f00\u53d1\u7684..\u6240\u4ee5\u63a8\u9001\u5931\u8d25.\u9700\u8981\u5148pull\u540c\u6b65\u4e0b. # \u82e5\u8fdc\u7a0b\u6700\u65b0\u7684\u7248\u672c\u4e2d\u6709s1.py \u5728\u62c9\u53d6\u8fdc\u7a0b\u4ee3\u7801\u540c\u6b65\u8fc7\u7a0b\u4e2d\u8fd8\u4f1a\u6709\u51b2\u7a81,\u9700\u8981\u89e3\u51b3\u51b2\u7a81! # -- So,\u5728\u63a8\u9001\u4e4b\u524d,\u5148\u62c9\u53d6\u4e00\u4e0b\u4ee3\u7801,\u5c06\u6700\u65b0\u7684\u4ee3\u7801\u540c\u6b65\u5230\u672c\u5730,\u53ef\u80fd\u4f1a\u6709\u51b2\u7a81,\u65f6\u4e0d\u65f6\u62c9\u53d6\u4e0b,\u53ef\u4ee5\u51cf\u5c11\u51b2\u7a81\u7684\u6982\u7387. git pull origin \"master\" git push origin \"master\" # -- \u7528\u6237\u540d\u5bc6\u7801;\u5bf9\u4ed3\u5e93\u6709\u5199\u6743\u9650(\u4e00\u5f00\u59cb\u65b0\u4eba\u53ef\u80fd\u53ea\u662f\u89c2\u5bdf\u8005,\u4e0d\u662f\u5f00\u53d1\u8005,\u6240\u4ee5\u4e0d\u80fd\u63d0\u4ea4\u4ee3\u7801)","title":"\u534f\u540c\u5f00\u53d1 clone"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#bug","text":"\u4e3b\u529f\u80fd\u5df2\u4e0a\u7ebf , \u73b0\u5728\u670d\u52a1\u5668\u8fd0\u884c\u7248\u672c\u662fv1 .1 \u5728dev\u5206\u652f\u4e0a\u5f00\u53d1\u7740\u65b0\u529f\u80fd \u5ffd\u7136\u53d1\u73b0\u4e0a\u7ebf\u7684\u4e3b\u529f\u80fd\u4e0a\u6709bug -- \u9700\u8981\u65b0\u5efa\u4e00\u4e2abug\u5206\u652f ( \u57fa\u4e8emaster\u5206\u652f\u5efa\u7acbbug\u5206\u652f ) - \u6539bug - \u628a\u53d8\u66f4\u63d0\u4ea4\u5230bug\u5206\u652f -> \u6d4b\u8bd5 -> \u5408\u5e76\u5230master -> v1 .1.1 \u6ce8 : \u82e5\u8fd8\u53d1\u73b0\u6709bug , \u57fa\u4e8ev1 .1.1 \u7ee7\u7eed\u6539bug \u65b0\u529f\u80fd\u5f00\u53d1\u5b8c\u4e86 -- \u8981\u5408\u5e76\u5230master\u5206\u652f -- v1 .2 - \u8fd9\u91cc\u7684dev\u5206\u652f\u548cmaster\u5206\u652f\u5408\u5e76 , \u53ef\u80fd\u4f1a\u6709\u51b2\u7a81 ( eg : \u6539\u5230\u4e86\u540c\u4e00\u4e2a\u6587\u4ef6 ), \u4e5f\u53ef\u80fd\u6ca1\u6709 . \u89e3\u51b3bug,\u5f00\u53d1\u65b0\u529f\u80fd,\u4e0d\u51fa\u51b2\u7a81\u7684\u60c5\u51b5 git branch dev # -- \u5728\u672c\u5730\u65b0\u5efa\u4e86\u4e00\u4e2adev\u5206\u652f git checkout dev # -- \u5728\u672c\u5730\u5207\u6362\u5230\u4e86dev\u5206\u652f # \u6ce8:\u6b64\u65f6\u8fdc\u7a0b\u662f\u6ca1\u6709dev\u5206\u652f\u7684. # \u65b9\u5f0f1) \u53ef\u4ee5\u8fdc\u7a0b\u5efa\u7acb\u5206\u652f,\u540c\u6b65\u5230\u672c\u5730 # \u65b9\u5f0f2) \u53ef\u4ee5\u672c\u5730\u5efa\u7acb\u5206\u652f,\u540c\u6b65\u5230\u8fdc\u7a0b git push origin dev # -- \u5c06\u672c\u5730\u7684dev\u5206\u652f\u63a8\u5230\u8fdc\u7a0b --- \u65b0\u5efa\u4e00\u4e2as1 . py , \u5728\u91cc\u9762\u5f00\u53d1\u65b0\u529f\u80fd --- vim s1 . py # \u7b2c\u4e00\u884c\u5199\u4e86\"\u7528\u6237\u529f\u80fd\" git add . git commit - m \"dev\u5f00\u53d1\u4e86\u7528\u6237\u529f\u80fd\" git push origin dev # -- \u5c06\u672c\u5730\u7684dev\u66f4\u6539\u63d0\u4ea4\u5230\u4e86\u8fdc\u7a0b\u7684dev\u5206\u652f --- \u7ee7\u7eed\u5f00\u53d1\u65b0\u529f\u80fd --- vim s1 . py # \u7b2c\u4e8c\u884c\u5199\u4e86\"\u8ba2\u5355\u529f\u80fd\" git add . git commit - m \"dev\u5f00\u53d1\u4e86\u8ba2\u5355\u529f\u80fd\" git push origin dev # -- \u5c06\u672c\u5730\u7684dev\u66f4\u6539\u63d0\u4ea4\u5230\u4e86\u8fdc\u7a0b\u7684dev\u5206\u652f -- \u6b64\u65f6 , \u6d4b\u8bd5\u53d1\u73b0\u4e86\u7ebf\u4e0a\u7cfb\u7edf\u6709bug , \u9700\u8981\u7d27\u6025\u4fee\u590dbug -- # -- 1> \u9996\u5148\u8981\u57fa\u4e8emaster\u5efa\u7acb\u4e00\u4e2abug\u5206\u652f,\u5728bug\u5206\u652f\u4e0a\u4fee\u6539bug # \u6ce8\u610f:master\u5206\u652f\u548cbug\u5206\u652f\u662f\u6ca1\u6709s1.py\u6587\u4ef6\u7684!! git checkout master # -- \u5207\u6362\u5230master\u5206\u652f ps:\u5728dev\u5206\u652f\u6267\u884c\u4e86commit\u64cd\u4f5c\u540e\u5c31\u53ef\u4ee5\u5207\u6362\u5230master\u5206\u652f\u4e0a\u5566 git branch bug # -- \u5728\u672c\u5730\u57fa\u4e8emaster\u5206\u652f\u65b0\u5efa\u4e86\u4e00\u4e2abug\u5206\u652f git checkout bug # -- \u5207\u6362\u5230\u672c\u5730\u7684bug\u5206\u652f # \u8fdc\u7a0b\u662f\u6ca1\u6709bug\u5206\u652f\u7684,\u53ef\u4ee5\u628a\u8be5\u5206\u652f\u63d0\u5230\u8fdc\u7a0b,\u4e5f\u53ef\u4ee5\u4e0d\u7528. # \u53ef\u4ee5\u5728\u672c\u5730\u64cd\u4f5c\u5b8c\u4e86,\u5408\u5230master,\u518d\u63d0\u4ea4\u5230\u8fdc\u7a0b,\u4e5f\u662fok\u7684! vim s2 . py # -- \u65b0\u5efa\u4e00\u4e2as2.py\u6587\u4ef6,\u7b2c\u4e00\u884c\u5199\u4e86\"\u89e3\u51b3\u4e86bug\" git add . git commit - m \"bug\u5206\u652f\u89e3\u51b3\u4e86bug\" # -- 2> bug\u4fee\u590d\u540e,\u5408\u5e76\u5230master\u4e0a,\u9700\u8981\u5148\u5207\u6362\u5230master\u5206\u652f git checkout master # -- \u6b64\u65f6\u8be5master\u5206\u652f\u4e0a\u662f\u6ca1\u6709s2.py\u7684 git merge bug # -- \u4e0d\u4f1a\u51fa\u51b2\u7a81,\u5408\u5e76\u540e,\u8be5master\u5206\u652f\u4e0a\u5c31\u6709s2.py\u5566 # -- 3> \u5c06\u5408\u5e76\u4e86bug\u5206\u652f\u7684master\u5206\u652f\u63a8\u5230\u8fdc\u7a0b git push origin master # -- \u6700\u65b0v1.1.1\u7248\u672c\u53d1\u5e03 -- \u5207\u6362\u5230dev\u5206\u652f\u7ee7\u7eed\u5f00\u53d1 -- git checkout dev -- \u5f00\u53d1\u5b8c\u540e , \u5408\u5e76\u5230master -- git checkout master git merge dev git push origin master # -- \u6700\u65b0v1.2\u7248\u672c\u53d1\u5e03 \u89e3\u51b3bug,\u5f00\u53d1\u65b0\u529f\u80fd,\u51fa\u51b2\u7a81\u7684\u60c5\u51b5 \u51c6\u5907\u5de5\u4f5c , \u5148\u628abug\u548cdev\u5206\u652f\u5220\u9664 , \u672c\u5730\u53ea\u6709master\u5206\u652f . --- \u5728dev\u5206\u652f\u4e0a\u5f00\u53d1\u65b0\u529f\u80fd --- git branch dev git checkout dev vim common . py # -- \u5199\u5165\u4ee3\u7801 print(1234) git add . git commit - m 'dev\u5206\u652f\u589e\u52a0\u4e86common.py' --- \u7ebf\u4e0a\u73af\u5883\u51fa\u95ee\u9898 --- git checkout master git branch bug git checkout bug vim common . py # -- <\u6b64\u65f6,\u5728bug\u5206\u652f\u4e0a\u662f\u6ca1\u6709common.py\u7684> \u65b0\u5efacommon.py \u5199\u5165\u4ee3\u7801 print(9999) git add . git commit - m 'bug\u5206\u652f\u589e\u52a0\u4e86common.py' --- \u628abug\u7684\u66f4\u6539\u5408\u5e76\u5230master\u5206\u652f\u4e0a --- git checkout master git merge bug # -- \u672c\u5730bug\u5408\u5e76\u5230\u672c\u5730master\u4e0a,\u653e\u5fc3,\u8fd9\u91cc\u4e0d\u4f1a\u6709\u51b2\u7a81 <master\u5206\u652f\u5c31\u6709\u4e86common.py> --- \u628adev\u5408\u5e76\u5230master\u5206\u652f\u4e0a --- git merge dev # -- \u6b64\u65f6,\u5c31\u4f1a\u51fa\u51b2\u7a81!!\u56e0\u4e3a\u90fd\u6539\u4e86common.py\u6587\u4ef6 \"\"\" (luffy) One_Piece@DC\u7684MacBook luffy_api % git merge dev \u51b2\u7a81\uff08add/add\uff09: \u5408\u5e76\u51b2\u7a81\u4e8e common.py \u81ea\u52a8\u5408\u5e76 common.py \u81ea\u52a8\u5408\u5e76\u5931\u8d25, \u4fee\u6b63\u51b2\u7a81\u7136\u540e\u63d0\u4ea4\u4fee\u6b63\u7684\u7ed3\u679c. \"\"\" \"\"\" # -- \u6b64\u65f6,common.py\u662f\u8fd9\u6837\u7684!! <<<<<<< HEAD print(9999) ======= print(1234) >>>>>>> dev \"\"\" git add . git commit - m '\u89e3\u51b3\u51b2\u7a81' git push pull \"master\" # -- \u6b63\u5e38\u60c5\u51b5\u9700\u8981\u5148\u62c9\u53d6\u4e0b,\u4fdd\u8bc1\u63d0\u4ea4\u5230\u8fdc\u7a0b\u65f6\u6ca1\u6709\u51b2\u7a81 git push origin \"master\"","title":"\u672c\u5730bug\u5206\u652f"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_4","text":"\u51b2\u7a81\u51fa\u73b0\u7684\u60c5\u51b5: \u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1\u51fa\u73b0\u51b2\u7a81 \u5206\u652f\u5408\u5e76\u51fa\u73b0\u51b2\u7a81","title":"\u51b2\u7a81\u89e3\u51b3"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_5","text":"\u522b\u4eba\u8ddf\u4f60\u6539\u4e86\u540c\u6837\u7684\u4ee3\u7801,\u4f46\u662f\u4ed6\u5148\u63d0\u4ea4\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4e86.\u4f60\u8981\u63d0\u4ea4, \u63d0\u4ea4\u4e0d\u4e0a,\u5148\u62c9\u53d6,\u62c9\u53d6\u4e0b\u6765,\u56e0\u4e3a\u6539\u4e86\u540c\u6837\u4ee3\u7801,\u51b2\u7a81.. \u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1\u51fa\u73b0\u51b2\u7a81 -- push\u4e0d\u6210\u529f,\u5148pull \u8fdc\u7a0bmaster : \u25a0 ( \u6700\u5f00\u59cb ) -- \u25a0 ( \u674e\u56db\u63d0\u4ea4\u7684 ) -- \u25a0 ( \u738b\u4e94\u63d0\u4ea4\u7684 \u738b\u4e94\u65b0\u5efa\u4e86s1 . py\u5e76\u5199\u4e86\u5185\u5bb9 ) \u672c\u5730 : \u57fa\u4e8e\u8fdc\u7a0bmaster\u6700\u5f00\u59cb\u7684\u8282\u70b9clone\u7684\u4ee3\u7801 , \u5f00\u53d1\u4e86\u65b0\u529f\u80fd , \u65b0\u5efas1 . py , \u5e76\u5728\u91cc\u9762\u5199\u4e86\u5f88\u591a\u5185\u5bb9 . git add . git commit - m \"\u5f00\u53d1s1.py\" \u51c6\u5907push\u63d0\u4ea4\u5230\u8fdc\u7a0bmaster , \u63d0\u4ea4\u88ab\u62d2\u7edd\u4e86 . \u89e3\u51b3\u65b9\u6848 , \u5148pull\u62c9\u53d6\u8fdc\u7a0b\u6700\u65b0\u7684\u4ee3\u7801\u5230\u672c\u5730 , \u4f1a\u6709\u51b2\u7a81\u63d0\u793a , s1 . py\u7684\u51b2\u7a81 <<<<<<< HEAD \u6211\u5199\u7684 ======= \u738b\u4e94\u5199\u7684 >>>>>>> f9436c568cf24f6c4239abffc2d035318e0b9666 \u82e5\u51b2\u7a81\u662f\u540c\u4e00\u4e2a\u529f\u80fd , \u8ddf\u540c\u4e8b\u5546\u91cf , \u4fdd\u7559\u67d0\u4e00\u4e2a\u4eba\u7684 . \u82e5\u51b2\u7a81\u4e0d\u662f\u540c\u4e00\u4e2a\u529f\u80fd , \u4fdd\u7559\u4e24\u4e2a\u4eba\u7684\u4ee3\u7801 . git add . git commit - m \"\u89e3\u51b3\u51b2\u7a81\" git pull origin master git push origin master","title":"\u60c5\u51b5\u4e00"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_6","text":"\u5206\u652f\u5408\u5e76\u51fa\u73b0\u51b2\u7a81 -- merge\u5408\u5e76\u5206\u652f,\u6709\u51b2\u7a81,\u89e3\u51b3\u51b2\u7a81\u540e,\u518d\u6b21add commit,\u6700\u540epull push\u63d0\u4ea4 \u201c \u89e3\u51b3bug , \u5f00\u53d1\u65b0\u529f\u80fd , \u51fa\u51b2\u7a81\u7684\u60c5\u51b5 \u201d \u5c0f\u8282\u6709\u8fc7merge\u5408\u5e76\u5206\u652f\u51fa\u73b0\u51b2\u7a81\u7684\u95ee\u9898 !","title":"\u60c5\u51b5\u4e8c"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_7","text":"\u524d\u9762\u7684\u5206\u652f\u5408\u5e76\u90fd\u662f\u5728\u672c\u5730\u5b8c\u6210,\u7136\u540e\u63a8\u5230\u8fdc\u7a0b.. \u5f53\u7136,\u8fdc\u7aef\u4e5f\u53ef\u4ee5\u5408\u5e76\u5206\u652f!! \u672f\u8bed - \u63d0\u4ea4pr # -- master\u5206\u652f\u548cdev\u5206\u652f (\u672c\u5730\u548c\u8fdc\u7aef\u90fd\u6709) # -- \u672c\u5730dev\u5408\u5e76\u5230\u672c\u5730master\u4e0a ==> \u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81 - \u60c5\u51b5\u4e8c # -- \u5408\u5e76\u5b8c\u540e,\u672c\u5730master\u63d0\u4ea4\u8fdc\u7a0bmaster ==> \u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81 - \u60c5\u51b5\u4e00 --- \u5728\u7ebf\u4e0a\u5b8c\u6210dev\u5408\u5e76\u5230master , \u5373\u63d0\u4ea4\u4e00\u4e2apull request , \u7b80\u79f0 \u63d0\u4ea4pr . --- # \u5b9e\u9a8c\u51c6\u5907:\u4fdd\u6301\u5b9e\u9a8c\u73af\u5883\u5e72\u51c0,\u672c\u5730\u548c\u8fdc\u7aef\u90fd\u53ea\u6709master\u5206\u652f! 1 > \u672c\u5730\u521b\u5efadev , \u63d0\u4ea4\u5230\u8fdc\u7a0b git branch dev git checkout dev git push origin dev 2 > \u5728common . py\u4e2d\u52a0\u5165\u4e86\u4ee3\u7801 , \u63d0\u4ea4\u5230\u8fdc\u7aef\u7684dev\u5206\u652f 3 > \u539f\u6765\u662f\u5728\u672c\u5730\u5c06\u672c\u5730\u7684dev\u5408\u5e76\u5230\u672c\u5730master , \u672c\u5730master\u63d0\u4ea4\u5230\u8fdc\u7a0bmaster . \u73b0\u5728\u662f\u5728\u7ebf\u4e0a\u5c06\u8fdc\u7a0b\u7684dev\u5408\u5e76\u5230\u8fdc\u7a0b\u7684master\u4e2d . \u6211\u4eec\u53ea\u9700\u5728\u7ebf\u4e0a\u63d0\u4ea4\u4e00\u4e2apull request . \u9886\u5bfc\u6536\u5230\u540e , \u6d4b\u8bd5 \u3001 review\u5ba1\u67e5\u4ee3\u7801 , \u901a\u8fc7\u540e , \u5408\u5e76 ( \u5408\u5e76\u5206\u652f - merge ; \u6241\u5e73\u5316\u5206\u652f - \u53d8\u57fa ), \u6b64\u65f6 , dev\u5206\u652f\u624d\u5408\u5e76\u5230\u4e86master\u5206\u652f !!","title":"\u7ebf\u4e0a\u5206\u652f\u5408\u5e76"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_8","text":"# -- \u672c\u5730\u6062\u590d\u5230\u6700\u521d\u72b6\u6001 git checkout master git reset -- hard \u7248\u672c\u53f7 # -- \u63d0\u4ea4\u5230\u8fdc\u7a0b(\u5f3a\u5236\u63d0\u4ea4) git push origin master - f # -- \u4e00\u822c\u4e0d\u8981\u7528!","title":"\u8fdc\u7a0b\u4ed3\u5e93\u56de\u6eda"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#pycharm","text":"\u5176\u4f59\u64cd\u4f5c\u622a\u56fe,\u53c2\u8003 https://www.cnblogs.com/cainiaozhy/p/16875573.html#4-pycharm\u64cd\u4f5cgit \u6211\u8fd8\u662f\u66f4\u559c\u6b22\u7528\u547d\u4ee4\u6765\u64cd\u4f5c... git\u64cd\u4f5c\u65e5\u5fd7 \u672c\u5730\u6587\u4ef6\u4e0e\u7248\u672c\u5e93\u8fdb\u884c\u6bd4\u8f83,\u6bcf\u6b21\u63d0\u4ea4\u524d,\u5148\u770b\u770b!!","title":"pycharm\u64cd\u4f5c"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#_9","text":"1. \u4ec0\u4e48\u662f\u53d8\u57fa ? git rebase - \u6241\u5e73\u5316\u5408\u5e76 \u8ba9\u65e5\u5fd7\u66f4\u7b80\u6d01 - 1 > \u53ef\u4ee5\u5c06\u591a\u4e2a\u8bb0\u5f55\u6574\u5408\u6210\u4e00\u4e2a - 2 > \u89e3\u51b3\u5206\u652f\u5408\u5e76\u5206\u53c9\u95ee\u9898 ( \u516c\u53f8\u91cc\u4e0d\u548b\u7528 , \u9762\u8bd5\u53c8\u7231\u95ee \u5355\u8d70\u4e00\u4e2a\u5b576 ) 2. git pull\u548cgit fetch\u7684\u533a\u522b - \u76f8\u540c\u70b9\u9996\u5148\u5728\u4f5c\u7528\u4e0a\u4ed6\u4eec\u7684\u529f\u80fd\u662f\u5927\u81f4\u76f8\u540c\u7684 , \u90fd\u662f\u8d77\u5230\u4e86\u66f4\u65b0\u4ee3\u7801\u7684\u4f5c\u7528 - \u4e0d\u540c\u70b9git pull \u7c7b\u4f3c\u4e8e git fetch + git merge 3. \u4f55\u4e3agit\u5de5\u4f5c\u6d41 ( gitflow ) ? - \u5206\u652f\u65b9\u6848 , \u5f88\u9ebb\u70e6 - \u77e5\u9053 , \u4f46\u4e00\u822c\u6211\u4eec\u4f7f\u7528 master - dev - bug \u8fd9\u6837\u7684\u5206\u652f\u65b9\u6848 .","title":"\u9762\u8bd5\u9898"},{"location":"9_git/0_git%E7%94%9F%E6%B4%BB%E7%89%88/#git_2","text":"\u6ca1\u4e8b\u591apull\u4ee3\u7801, \u4e00\u4e2a\u529f\u80fdpush\u4e00\u6b21\u4ee3\u7801. 1. git : \u7248\u672c\u7ba1\u7406\u8f6f\u4ef6 , \u8fdb\u884c\u7248\u672c\u7ba1\u7406 . \u534f\u540c\u5f00\u53d1 . \u5408\u5e76\u4ee3\u7801 . - \u5206\u5e03\u5f0f : \u5373\u4fbf\u6ca1\u6709\u8fdc\u7aef , \u5728\u672c\u5730\u4e0a\u4e5f\u80fd\u8fdb\u884c\u7248\u672c\u7ba1\u7406 . 2. gitee \u3001 github \u3001 gitlab \u90fd\u662f git\u7684\u8fdc\u7a0b\u4ed3\u5e93 . 3. git\u5b89\u88c5 - win \u3001 mac : \u5b98\u65b9\u4e0b\u8f7d\u8f6f\u4ef6 , \u4e00\u8def\u4e0b\u4e00\u6b65 ; - linux : yum install git 4. \u5de5\u4f5c\u6d41\u7a0b - \u5de5\u4f5c\u533a \u3001 \u6682\u5b58\u533a \u3001 \u7248\u672c\u5e93 \u3001 \u8fdc\u7a0b\u4ed3\u5e93 5. \u5e38\u7528\u547d\u4ee4 - git init - git status - git log : \u53ea\u663e\u793a\u5f53\u524d\u548c\u4ee5\u524d\u7684\u7248\u672c - git relog : \u56de\u9000 \u3001 \u5220\u9664\u7684\u7248\u672c\u90fd\u4f1a\u663e\u793a - git add . - git commit - m '\u6ce8\u91ca' - git pull origin master \u5c06\u8fdc\u7aef\u7684master\u5206\u652f\u62c9\u53d6\u4e0b\u6765 - git push origin master \u5c06\u672c\u5730\u7684master\u5206\u652f\u63a8\u5230\u8fdc\u7aef - git clone \u5730\u5740 6. \u5ffd\u7565\u6587\u4ef6 . gitignore 7. \u5206\u652f\u7ba1\u7406 - \u4e2d\u5c0f\u578b\u516c\u53f8\u4e3b\u6d41\u7684\u5206\u652f\u65b9\u6848 \u4e3b\u5206\u652f + dev\u5206\u652f + bug\u5206\u652f \u2611\ufe0f Ps : \u8fd8\u6709\u7684\u4f1a\u81ea\u5df1\u53ea\u5728\u672c\u5730\u5efa\u7acb\u4e00\u4e2a\u5206\u652f\u6765\u5f00\u53d1 , eg : dc\u5206\u652f , \u5f00\u53d1\u5b8c\u540e , \u5c06dc\u5206\u652f\u5408\u5e76\u5230dev\u5206\u652f , \u518d\u5c06dev\u5206\u652f\u63a8\u5230\u8fdc\u7aef ( \u53ef\u505apr ) - git branch - git branch dev \u82e5\u8fdc\u7aef\u60f3\u521b\u5efadev\u5206\u652f , \u53ef\u4ee5\u672c\u5730\u521b\u5efa\u540e\u63a8\u9001\u5230\u8fdc\u7aef ; \u6216\u8005\u5728\u8fdc\u7aef\u70b9\u51fb\u521b\u5efa - git checkout dev - git branch - d dev \u5f3a\u5236\u5220\u9664\u7684\u8bdd\u662f - D \u8c28\u614e\u4f7f\u7528 - git merge dev \u4e00\u5b9a\u8981\u7406\u6e05\u662f\u8c01\u5408\u5e76\u5230\u8c01\u4e0a\u9762\u53bb 8. \u8fdc\u7a0b\u4ed3\u5e93 \u8981\u65f6\u4e0d\u65f6\u540c\u6b65\u4e0b\u8fdc\u7aef\u4ed3\u5e93\u548c\u672c\u5730\u5e93 , \u4e3e\u4e2a\u4f8b\u5b50 : \u8fdc\u7aef\u5e93 v0 \u5f20\u4e09 v0 v1 v2 \u674e\u56db v0 v3 v4 \u674e\u56db\u5148\u63d0\u4ea4 , \u8fdc\u7aef\u5e93\u5c31\u53d8\u6210\u4e86v0 v3 v4 \u5f20\u4e09\u60f3\u63d0\u4ea4 , \u63d0\u4ea4\u4e0d\u4e0a\u53bb , \u5f97\u5148\u540c\u6b65 , \u5f20\u4e09\u672c\u5730\u5e93\u5c31\u53d8\u6210\u4e86 v0 v3 v4 v1 v2 \u518d\u63d0\u4ea4\u4e0a\u53bb , \u8fdc\u7aef\u5e93\u5c31\u53d8\u6210\u4e86v0 v3 v4 v1 v2 \u82e5\u5f20\u4e09\u60f3\u63d0\u4ea4 , \u63d0\u4ea4\u4e0d\u4e0a\u53bb\u7684\u65f6\u5019 , \u5f3a\u5236\u63d0\u4ea4 , \u90a3\u4e48\u8fdc\u7aef\u5e93\u5c31\u53d8\u6210\u4e86 v0 v1 v2 \u674e\u56db\u76f4\u63a5\u5c31\u5410\u4e86 ! \u674e\u56db\u5c06\u8fdc\u7aef\u5e93\u6062\u590d\u5230v0 v3 v4\u7684\u72b6\u6001 . \u5f20\u4e09\u5168\u8d23 . - gitlab \u3001 github \u3001 gitee - git remote add \u8fdc\u7a0b\u4ed3\u5e93 ( https / ssh ) - https : \u7528\u6237\u540d\u548c\u5bc6\u7801 - ssh : \u516c\u94a5\u548c\u79c1\u94a5 --> \u975e\u5bf9\u79f0\u52a0\u5bc6 , \u52a0\u5bc6\u7528\u516c\u94a5 , \u89e3\u5bc6\u7528\u79c1\u94a5 --> \u5176\u5b83\u5e94\u7528\u573a\u666f : Linux\u4e3b\u673a\u4e4b\u95f4\u64cd\u4f5c \u3001 \u652f\u4ed8\u5b9d\u652f\u4ed8\u65f6 9. \u534f\u540c\u5f00\u53d1 - \u5927\u5bb6\u63a5\u5165\u540c\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u9879\u76ee - \u628a\u4f60\u52a0\u6210\u5f00\u53d1\u8005 , \u7ed9\u4f60\u4e00\u4e2a\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 - git clone \u8fdc\u7a0b\u5730\u5740 - \u57fa\u4e8e\u5b83\u5f00\u53d1 , \u63a8\u5230\u8fdc\u7a0b 10. \u7ebf\u4e0abug , \u5206\u652f\u89e3\u51b3\u65b9\u6848 11. \u51b2\u7a81\u89e3\u51b3 - \u591a\u4eba\u5728\u540c\u4e00\u5206\u652f\u5f00\u53d1 - \u5206\u652f\u5408\u5e76\u51fa\u73b0\u51b2\u7a81 12. \u7ebf\u4e0a\u5206\u652f\u5408\u5e76 ( pr ) 13. \u8fdc\u7a0b\u4ed3\u5e93\u56de\u6eda - \u57fa\u672c\u7528\u4e0d\u5230 14. pycharm\u64cd\u4f5cgit - \u4e4b\u524d\u6240\u6709\u7684\u547d\u4ee4 , \u90fd\u53ef\u4ee5\u70b9\u51fb\u5b8c\u6210 15. \u9762\u8bd5\u9898 \u4e3a\u5f00\u6e90\u8f6f\u4ef6\u8d21\u732e\u4ee3\u7801 fork -- \u6539\u597dbug\u540e\u5411\u5f00\u6e90\u9879\u76eepull request \u4e5f\u53ef\u4ee5issues , \u5728\u5f00\u6e90\u9879\u76ee\u4e2d\u63d0\u51fa\u8fd9\u4e2abug .","title":"Git\u5927\u56de\u987e"},{"location":"9_git/1_git%E7%A0%94%E7%A9%B6%E7%89%88/","text":"\u8be6\u89c1 https://github.com/OnePieceDC/GitHub_exercise","title":"git\u7814\u7a76\u7248"}]}